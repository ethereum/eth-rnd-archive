[
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "",
    "created_at": "2026-02-06T12:21:22.594000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "<@792404665068158998> moving your message into this new thread: https://discord.com/channels/595666850260713488/1467996327215370384/1468921118839541915",
    "created_at": "2026-02-06T12:21:23.383000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "One question I have is why withdrawals are added?",
    "created_at": "2026-02-06T12:22:14.853000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "CC <@402080271563751435> since you asked: https://github.com/ethereum/EIPs/pull/11212#issuecomment-3859537708",
    "created_at": "2026-02-06T12:22:36.075000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yep also not sure about withdrawals?",
    "created_at": "2026-02-06T12:23:21.863000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I think the idea would be to forgo compression; not sure how useful it would be to compress each tx individually",
    "created_at": "2026-02-06T12:23:26.687000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "hmm in that case I would be opposed to this encoding format if it means no compression imo.",
    "created_at": "2026-02-06T12:23:54.564000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "What about compression of each tx?",
    "created_at": "2026-02-06T12:24:15.015000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Where else would withdrawals go?",
    "created_at": "2026-02-06T12:24:20.026000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "We should benchmark compression on a per tx basis.",
    "created_at": "2026-02-06T12:24:49.684000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "This won't really give us something",
    "created_at": "2026-02-06T12:24:57.614000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Per-tx makes not much sense to me. Since it will be snappy comressed over the wire anyway",
    "created_at": "2026-02-06T12:25:29.555000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I think this is compression before it gets put into the blob",
    "created_at": "2026-02-06T12:26:20.276000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "yeah",
    "created_at": "2026-02-06T12:26:25.236000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "So we would be compressing the RLP encoded bytes of a transaction, and this is the `txdata` in your encoding",
    "created_at": "2026-02-06T12:27:04.848000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Right any my thinking is we shouldn't compress it. We don't compress the payload today, other than the whole block being compressed over the wire.",
    "created_at": "2026-02-06T12:27:16.032000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "That is effectively compression though right",
    "created_at": "2026-02-06T12:27:39.231000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "because now communicating block over the wire == DA guarantee",
    "created_at": "2026-02-06T12:27:51.937000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "call data is priced based on the assumption of compression",
    "created_at": "2026-02-06T12:27:59.555000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "0 bytes are cheap",
    "created_at": "2026-02-06T12:28:04.507000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The benefit of compression would be less blobs being used -- though I'm also not sure if we can price based on the compressed data since we will need to uncompress it to execute the block with ZK",
    "created_at": "2026-02-06T12:29:15.154000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Just for more context, I can get numbers for compressing each tx to see where we land",
    "created_at": "2026-02-06T12:29:52.911000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Less blobs but total data over wire would stay the same. Thus, i don't see why we would do that. You end up with double.compressing the payload?",
    "created_at": "2026-02-06T12:32:32.185000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "E.g. calldat compression like rollups do (brotli) and then snappy over the wire. Snappy wouldn't compress then.",
    "created_at": "2026-02-06T12:33:09.096000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "zkAttestors would never receive the blobs, only sample right?",
    "created_at": "2026-02-06T12:34:07.217000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Also, the simplest is to not mess with anything else but focus on encoding the payload into blobs, without trying to solve for other things",
    "created_at": "2026-02-06T12:34:11.820000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "What is max theoretical uncompressed size of blocks with current pricing and gas limits?",
    "created_at": "2026-02-06T12:35:03.479000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "5-6mib",
    "created_at": "2026-02-06T12:35:22.328000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "whats blob capcity?",
    "created_at": "2026-02-06T12:35:32.635000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "how would this look with gas limit increase 2 x?",
    "created_at": "2026-02-06T12:35:46.095000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Just 2x the size, assuming we do nothing, e.g. reprice calldata",
    "created_at": "2026-02-06T12:36:14.098000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "do you know current blob capacity?",
    "created_at": "2026-02-06T12:36:30.147000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "and future scaling ambitions for blob capacity",
    "created_at": "2026-02-06T12:36:45.477000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Today, on the 4844 front?\n21",
    "created_at": "2026-02-06T12:36:51.701000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I guess the concern here is we are now bound by blob capacity",
    "created_at": "2026-02-06T12:38:03.957000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Seems wasteful to reduce capacity by half? (assuming 50% compression)",
    "created_at": "2026-02-06T12:38:31.901000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "However, I suppose this is worst case and not typical right?",
    "created_at": "2026-02-06T12:38:45.654000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The worst-case doesn't change with having payloads in blobs, and it should be separated from bib.\nOr the better question. What compressed better:\nTxs -> blob -> snappy(blob)\nVs.\nSnappy(txs) -> blob -> snappy(blob)\nThis might be good figure out.",
    "created_at": "2026-02-06T12:44:05.762000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Agreed regarding worst case but blob capacity is now a hard limit with bib.",
    "created_at": "2026-02-06T12:45:37.320000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Are we stuck with snappy?",
    "created_at": "2026-02-06T13:09:27.316000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "No, I guess, but we shouldn't enshrine it anyway",
    "created_at": "2026-02-06T13:12:49.842000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Updated: https://eth-act.github.io/blob-encoding-experiments/\n\nwith per tx compression on the rlp encoded bytes.\n\nDifference is about 4.2% which amounted to 8 blobs if the data is correct",
    "created_at": "2026-02-06T13:23:14.517000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "For reference:",
    "created_at": "2026-02-06T13:23:34.077000+00:00",
    "attachments": [
      {
        "type": "image/png",
        "origin_name": "Screenshot_2026-02-06_at_13.23.23.png",
        "content": "1bd7a0114f57e341fb56fab793efcd32ffd826f127e02558937df4eaf2fbc767"
      }
    ]
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Okay I see what you and <@402080271563751435>  is saying -- I would summarise it by saying there are two variables here:\n\n- The number of blobs that we consume\n- The bandwidth cost for each blob on the network\n\nCompressing the transactions before putting them into blobs, will reduce the number of blobs we consume and has a knock-on effect on the blob market.\n\nThe snappy compression on the blobs will affect the bandwidth consumption of each blob we take up",
    "created_at": "2026-02-06T13:27:48.772000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "They are dependent I guess because if snappy compression on the blob means that the bandwidth cost for a blob is reduced, then we could feasibly raise the blob limit",
    "created_at": "2026-02-06T13:30:02.649000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Isn't bandwidth related to the amount of raw data being committed to in DAS scheme? If I'm not mistaken, consensus nodes don't custody full blobs.",
    "created_at": "2026-02-06T13:33:46.225000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "But i guess the idea is that you just apply snappy compression based on the DAS message that is gossiped over the network so the same applies?",
    "created_at": "2026-02-06T13:35:19.773000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah post 4844, we wouldn't snappy compress the whole blob",
    "created_at": "2026-02-06T13:42:01.265000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "is there a kzg based overhead?",
    "created_at": "2026-02-06T13:43:18.036000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I guess not in terms of message size but possibly in terms of computation",
    "created_at": "2026-02-06T13:43:41.112000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "For proving the equivalence between the payload and kzg commitment?",
    "created_at": "2026-02-06T13:45:38.545000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah for the optimized zk variant, more blobs would imply higher cost for this, one way to maybe think about it is that an extra blob adds another group element into two MSMs -- though we haven't measured the cost of this yet, so it could be negligible",
    "created_at": "2026-02-06T13:48:52.655000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Here I think it would be useful to split up the usecases -- for an attester they would essentially be randomly sampling parts of blobs\n\nFor the usecase Toni is envisioning, the node wants very specific data, its not clear if those should conceptually intertwine",
    "created_at": "2026-02-06T13:52:07.039000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah agreed, I think clearly defining the scope and objective would be useful here because we are trying to optimise for different things",
    "created_at": "2026-02-06T13:56:03.725000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I see the attester usecase as the \"minimal requirement\" (this is what the EIP focusses on) and technically speaking it doesn't mean that we _need_ to pack the data into blobs as efficiently as possible.\n\nMoreso, given that this is at odds with some data retrieval schemes\n\nThe wallet/RPC usecase would be a superset of this and I think we could have it dictate the layout",
    "created_at": "2026-02-06T14:01:28.909000+00:00",
    "attachments": []
  }
]