[
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "",
    "created_at": "2026-02-06T12:21:22.594000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "<@792404665068158998> moving your message into this new thread: https://discord.com/channels/595666850260713488/1467996327215370384/1468921118839541915",
    "created_at": "2026-02-06T12:21:23.383000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "One question I have is why withdrawals are added?",
    "created_at": "2026-02-06T12:22:14.853000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "CC <@402080271563751435> since you asked: https://github.com/ethereum/EIPs/pull/11212#issuecomment-3859537708",
    "created_at": "2026-02-06T12:22:36.075000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yep also not sure about withdrawals?",
    "created_at": "2026-02-06T12:23:21.863000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I think the idea would be to forgo compression; not sure how useful it would be to compress each tx individually",
    "created_at": "2026-02-06T12:23:26.687000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "hmm in that case I would be opposed to this encoding format if it means no compression imo.",
    "created_at": "2026-02-06T12:23:54.564000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "What about compression of each tx?",
    "created_at": "2026-02-06T12:24:15.015000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Where else would withdrawals go?",
    "created_at": "2026-02-06T12:24:20.026000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "We should benchmark compression on a per tx basis.",
    "created_at": "2026-02-06T12:24:49.684000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "This won't really give us something",
    "created_at": "2026-02-06T12:24:57.614000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Per-tx makes not much sense to me. Since it will be snappy comressed over the wire anyway",
    "created_at": "2026-02-06T12:25:29.555000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I think this is compression before it gets put into the blob",
    "created_at": "2026-02-06T12:26:20.276000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "yeah",
    "created_at": "2026-02-06T12:26:25.236000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "So we would be compressing the RLP encoded bytes of a transaction, and this is the `txdata` in your encoding",
    "created_at": "2026-02-06T12:27:04.848000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Right any my thinking is we shouldn't compress it. We don't compress the payload today, other than the whole block being compressed over the wire.",
    "created_at": "2026-02-06T12:27:16.032000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "That is effectively compression though right",
    "created_at": "2026-02-06T12:27:39.231000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "because now communicating block over the wire == DA guarantee",
    "created_at": "2026-02-06T12:27:51.937000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "call data is priced based on the assumption of compression",
    "created_at": "2026-02-06T12:27:59.555000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "0 bytes are cheap",
    "created_at": "2026-02-06T12:28:04.507000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The benefit of compression would be less blobs being used -- though I'm also not sure if we can price based on the compressed data since we will need to uncompress it to execute the block with ZK",
    "created_at": "2026-02-06T12:29:15.154000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Just for more context, I can get numbers for compressing each tx to see where we land",
    "created_at": "2026-02-06T12:29:52.911000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Less blobs but total data over wire would stay the same. Thus, i don't see why we would do that. You end up with double.compressing the payload?",
    "created_at": "2026-02-06T12:32:32.185000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "E.g. calldat compression like rollups do (brotli) and then snappy over the wire. Snappy wouldn't compress then.",
    "created_at": "2026-02-06T12:33:09.096000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "zkAttestors would never receive the blobs, only sample right?",
    "created_at": "2026-02-06T12:34:07.217000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Also, the simplest is to not mess with anything else but focus on encoding the payload into blobs, without trying to solve for other things",
    "created_at": "2026-02-06T12:34:11.820000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "What is max theoretical uncompressed size of blocks with current pricing and gas limits?",
    "created_at": "2026-02-06T12:35:03.479000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "5-6mib",
    "created_at": "2026-02-06T12:35:22.328000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "whats blob capcity?",
    "created_at": "2026-02-06T12:35:32.635000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "how would this look with gas limit increase 2 x?",
    "created_at": "2026-02-06T12:35:46.095000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Just 2x the size, assuming we do nothing, e.g. reprice calldata",
    "created_at": "2026-02-06T12:36:14.098000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "do you know current blob capacity?",
    "created_at": "2026-02-06T12:36:30.147000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "and future scaling ambitions for blob capacity",
    "created_at": "2026-02-06T12:36:45.477000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Today, on the 4844 front?\n21",
    "created_at": "2026-02-06T12:36:51.701000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I guess the concern here is we are now bound by blob capacity",
    "created_at": "2026-02-06T12:38:03.957000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Seems wasteful to reduce capacity by half? (assuming 50% compression)",
    "created_at": "2026-02-06T12:38:31.901000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "However, I suppose this is worst case and not typical right?",
    "created_at": "2026-02-06T12:38:45.654000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The worst-case doesn't change with having payloads in blobs, and it should be separated from bib.\nOr the better question. What compressed better:\nTxs -> blob -> snappy(blob)\nVs.\nSnappy(txs) -> blob -> snappy(blob)\nThis might be good figure out.",
    "created_at": "2026-02-06T12:44:05.762000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Agreed regarding worst case but blob capacity is now a hard limit with bib.",
    "created_at": "2026-02-06T12:45:37.320000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Are we stuck with snappy?",
    "created_at": "2026-02-06T13:09:27.316000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "No, I guess, but we shouldn't enshrine it anyway",
    "created_at": "2026-02-06T13:12:49.842000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Updated: https://eth-act.github.io/blob-encoding-experiments/\n\nwith per tx compression on the rlp encoded bytes.\n\nDifference is about 4.2% which amounted to 8 blobs if the data is correct",
    "created_at": "2026-02-06T13:23:14.517000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "For reference:",
    "created_at": "2026-02-06T13:23:34.077000+00:00",
    "attachments": [
      {
        "type": "image/png",
        "origin_name": "Screenshot_2026-02-06_at_13.23.23.png",
        "content": "1bd7a0114f57e341fb56fab793efcd32ffd826f127e02558937df4eaf2fbc767"
      }
    ]
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Okay I see what you and <@402080271563751435>  is saying -- I would summarise it by saying there are two variables here:\n\n- The number of blobs that we consume\n- The bandwidth cost for each blob on the network\n\nCompressing the transactions before putting them into blobs, will reduce the number of blobs we consume and has a knock-on effect on the blob market.\n\nThe snappy compression on the blobs will affect the bandwidth consumption of each blob we take up",
    "created_at": "2026-02-06T13:27:48.772000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "They are dependent I guess because if snappy compression on the blob means that the bandwidth cost for a blob is reduced, then we could feasibly raise the blob limit",
    "created_at": "2026-02-06T13:30:02.649000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Isn't bandwidth related to the amount of raw data being committed to in DAS scheme? If I'm not mistaken, consensus nodes don't custody full blobs.",
    "created_at": "2026-02-06T13:33:46.225000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "But i guess the idea is that you just apply snappy compression based on the DAS message that is gossiped over the network so the same applies?",
    "created_at": "2026-02-06T13:35:19.773000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah post 4844, we wouldn't snappy compress the whole blob",
    "created_at": "2026-02-06T13:42:01.265000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "is there a kzg based overhead?",
    "created_at": "2026-02-06T13:43:18.036000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I guess not in terms of message size but possibly in terms of computation",
    "created_at": "2026-02-06T13:43:41.112000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "For proving the equivalence between the payload and kzg commitment?",
    "created_at": "2026-02-06T13:45:38.545000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah for the optimized zk variant, more blobs would imply higher cost for this, one way to maybe think about it is that an extra blob adds another group element into two MSMs -- though we haven't measured the cost of this yet, so it could be negligible",
    "created_at": "2026-02-06T13:48:52.655000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Here I think it would be useful to split up the usecases -- for an attester they would essentially be randomly sampling parts of blobs\n\nFor the usecase Toni is envisioning, the node wants very specific data, its not clear if those should conceptually intertwine",
    "created_at": "2026-02-06T13:52:07.039000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah agreed, I think clearly defining the scope and objective would be useful here because we are trying to optimise for different things",
    "created_at": "2026-02-06T13:56:03.725000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I see the attester usecase as the \"minimal requirement\" (this is what the EIP focusses on) and technically speaking it doesn't mean that we _need_ to pack the data into blobs as efficiently as possible.\n\nMoreso, given that this is at odds with some data retrieval schemes\n\nThe wallet/RPC usecase would be a superset of this and I think we could have it dictate the layout",
    "created_at": "2026-02-06T14:01:28.909000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "That makes sense. Is the per tx compression + <@792404665068158998> encoding scheme a middle ground that works for both? If not then we can just proceed uncompressed with <@792404665068158998> encoding and leave compression as a optimisation for the future.",
    "created_at": "2026-02-06T14:49:54.716000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "It's likely the encoding scheme will evolve as things become clearer. Ideally, we can get the EIP merged so we can start experimenting in client implementations in combination with EIP8025. It doesn't necessarily have to be final.",
    "created_at": "2026-02-06T15:01:34.005000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "My strong feeling is that it should stay uncompressed in bib and if we want to ever compress it, there should be a different EIP.",
    "created_at": "2026-02-06T15:07:13.846000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "But I still need to first validate this:\nTxs -> blob -> snappy(blob)\nVs.\nSnappy(txs) -> blob -> snappy(blob)",
    "created_at": "2026-02-06T15:08:30.530000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "If the 2nd is smaller than the first, it can be put in the eip.",
    "created_at": "2026-02-06T15:09:22.159000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "cool lets wait and see what your investigation yields. Is the objection primarily based on the enshrinement of a compression algorithm?",
    "created_at": "2026-02-06T15:13:53.287000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "There certainly are complexities associated with compression. non-determinism, compression bombs, etc so it's not a free win so to speak.",
    "created_at": "2026-02-06T15:15:04.633000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "<@402080271563751435> wouldn't we decompress in the newPayload method?",
    "created_at": "2026-02-06T15:29:40.074000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yes, you would use decompression.",
    "created_at": "2026-02-06T15:30:08.059000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "All compression issues have been solved by L2's",
    "created_at": "2026-02-06T15:31:41.908000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "okay makes sense -- I think this should be deterministic from the perspective of the function being proven (newPayload) -- the compressor in this case would be the builder which is okay since there is only one builder",
    "created_at": "2026-02-06T15:31:51.785000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Correct. But then the question is other re-execution nodes",
    "created_at": "2026-02-06T15:32:39.463000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Do they receive compressed transactions?",
    "created_at": "2026-02-06T15:32:51.054000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "We replace rlp bytes with compressed rlp bytes in the ExecutionPayload?",
    "created_at": "2026-02-06T15:33:03.253000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Or maybe they don't need to do that for mandatory proofs",
    "created_at": "2026-02-06T15:33:38.012000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "becuase they are already verifying proofs anyway",
    "created_at": "2026-02-06T15:33:46.257000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yep agreed, I think the attester usecase maps over quite cleanly to the L2 design space",
    "created_at": "2026-02-06T15:34:37.547000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah, re-executing nodes would need to decompress before executing",
    "created_at": "2026-02-06T15:34:52.177000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "(whoever needs to re-execute)",
    "created_at": "2026-02-06T15:35:05.970000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Most nodes will likely download the BAL instead to update their view",
    "created_at": "2026-02-06T15:35:40.324000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I don't have a strong opinion on the encoding format if it satsfies the attester usecase -- I added a 2-byte version number to the encoding header to signify that this may change over time",
    "created_at": "2026-02-06T15:36:47.113000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yep, makes sense",
    "created_at": "2026-02-06T15:37:54.537000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Purely from a zkattester use case, I think having DA guarantees is the primary objective. In the grander scheme, minimising bandwidth requirements is also important.",
    "created_at": "2026-02-06T15:38:38.338000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'm not super familiar with the wallet / indexer design space but I speculate that there may be more optimised ways of doing things. For example using, binary merkle trees to compute the transactions root and similarly structuring BALS using a tree structure where you have a mini BAL per transaction.",
    "created_at": "2026-02-06T15:39:58.791000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Something like this combined with bloom filters for identifying which transactions are of interest to an account.",
    "created_at": "2026-02-06T15:40:17.276000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah makes sense -- I think we are all open to changing the encoding based inline with other things becoming more certain!",
    "created_at": "2026-02-06T15:46:01.324000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Imo BALs to blobs should be a separate EIP as it might require different blob encodings and has different stakeholders than the payload.",
    "created_at": "2026-02-06T16:24:46.831000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Compared three approaches for how to compress payload data going into blobs:\n\n| Strategy | Description |\n|----------|-------------|\n| **(a)** | `snappy(payload)` → blobs → `snappy(blobs)` |\n| **(b)** | `payload` → blobs → `snappy(blobs)` |\n| **(c)** | `snappy(each_tx)` → blobs → `snappy(blobs)` |\n\n**Results** (ignoring 32/31 blob encoding overhead):\n\n| | Final size | Ratio |\n|-|------------|-------|\n| (a) | 98,038 | 43.8% |\n| (b) | 98,029 | 43.8% |\n| (c) | 112,406 | 50.3% |\n\n**Takeaways:**\n- **(a) ≈ (b)**: Double-compressing gains nothing — snappy(snappy(x)) ≈ snappy(x)\n- **(c) is ~15% worse**: Per-tx compression destroys cross-tx patterns (repeated addresses, similar gas prices, etc.)",
    "created_at": "2026-02-06T16:27:05.682000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "yeah I agree with BAL to blobs. I'm actually not certain that BALs should be in blobs. Cross posting: \n\n> I've been giving BAL inclusion in blobs some thought. BAL's are not consensus critical in the same way that transactions are. They are an artefact for optimised re-execution. Omission of BALs can not result in a data withholding attack.  I'm questioning if there's any value in including BAL's in blobs. Possibly just wasting bandwidth. In any case, they can be produced from re-executing transactions on a re-execution node. I would be interested in understanding the size of BAL's. Just throwing this out there for discussion.",
    "created_at": "2026-02-06T17:04:57.907000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Follow-up question regarding a vs b. What are the pros and cons of each approach?",
    "created_at": "2026-02-06T17:07:59.123000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "b is simple, enables nice indexing and doesn't require enshrining compression (which would be a non-starter on it's own I think)",
    "created_at": "2026-02-06T17:38:03.353000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I don't see approaches for a.\n(a) makes only sense for rollups that pay for every byte, which we don't -- which brings me to another feedback I had in the EIP: there should not be blob pricing. The pricing stays the same as-is. Tx pay for resources, the payload blob part, apart from the txs, is free, just like it is today.",
    "created_at": "2026-02-06T17:39:48.066000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The incorporation into blob pricing makes it more complex than it needs to be",
    "created_at": "2026-02-06T17:40:23.766000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "This would be establishing a priced object (although the block, except from transactions, are not priced today. Also builder would need to pay for every payload blob? Or who would pay for those? \nShould be removed from the EIP, imo.",
    "created_at": "2026-02-06T17:42:39.201000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Do you mean that `blob_gas_used` should not be incremented?",
    "created_at": "2026-02-06T17:57:56.467000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "right yeah, I'm not sure why this is used in this context?",
    "created_at": "2026-02-06T18:00:42.136000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "we don't charge the builder for the payload today, why would we charge them for blobs?",
    "created_at": "2026-02-06T18:01:08.297000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The builder isn't paying for these right? Its just incrementing the `blob_gas_used` parameter so its inline with the blob capacity being used",
    "created_at": "2026-02-06T18:02:26.314000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "but the capacity is bounded by the block gas limit on the EL. Why would you add another cap?",
    "created_at": "2026-02-06T18:06:02.755000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I agree that the builder shouldn't pay for blobs. I think the cost of consuming DA resource lies with the transaction itself. The transaction already pays for DA via call data cost. However, when we put transactions into blobs, we are now consuming the blob resource but charging for it differently to how we charge 4844 transactions. This asymmetry could lead to undesirable inclusion patterns as the builder is optimising for profit. More research and analysis needed here imo.",
    "created_at": "2026-02-06T18:06:25.027000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "ExecutionPayloads also consumed the same resource, which is bandwidth. But what we do with the data makes the difference. So, having it count against the same limit makes not much sense and undoes the nice fee dimension split we got through 4844",
    "created_at": "2026-02-06T18:08:59.243000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "But bandwidth overhead from payloads and blobs is different right? You sample blobs but need to gossip the full payload.",
    "created_at": "2026-02-06T18:12:36.948000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "If call data costs > blob gas costs then maybe its fine as is",
    "created_at": "2026-02-06T18:15:58.200000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "After thinking about it more, even the simple indexing I proposed is already overkill and should be split-out, thought of independently with a clear goal in mind. So, I'd ignore it for 8132.",
    "created_at": "2026-02-06T19:09:21.919000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "What would you propose for 8132?",
    "created_at": "2026-02-06T20:23:29.468000+00:00",
    "attachments": []
  },
  {
    "author": "taulepton_",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "just raw uncompressed rlp bytes? small header to specify byte length?",
    "created_at": "2026-02-06T20:23:54.311000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I think so, plus a versioning?",
    "created_at": "2026-02-06T20:52:36.197000+00:00",
    "attachments": []
  },
  {
    "author": "nero_eth",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I thought that's the bib nr",
    "created_at": "2026-02-06T21:04:51.814000+00:00",
    "attachments": []
  },
  {
    "author": "kevaundray",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Ah I meant a version number in the BiB payload header in the first blob",
    "created_at": "2026-02-06T21:09:28.391000+00:00",
    "attachments": []
  }
]