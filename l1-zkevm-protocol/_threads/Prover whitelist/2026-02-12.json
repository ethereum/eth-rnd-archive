[
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "By the way, I've reorder the p2p validation rules for proof so we don't verify valid proofs with the same `proof_type` more than once. Please have a look to see if it makes sense: https://github.com/jihoonsong/consensus-specs/compare/eip8025-prover-pubkey...jihoonsong:consensus-specs:eip8025-p2p-validations  cc <@427491045308235776> <@592004585506340885>",
    "created_at": "2026-02-12T16:55:56.053000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I don't think this change makes sense. This wouldn't prevent a node from verifying proofs of the same type that were received at approx the same time.",
    "created_at": "2026-02-12T16:59:10.877000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "But to your point, clients typically perform this \"have we seen this before\" check twice. Once the beginning and again at the end.",
    "created_at": "2026-02-12T17:00:23.973000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "It's sort of impossible to prevent duplication verifications.",
    "created_at": "2026-02-12T17:00:53.651000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I would prefer for this check to be at the end (like it is now). I believe this matches how we do things elsewhere, eg: https://github.com/ethereum/consensus-specs/blob/278cbe7bea4d6b5f0e0aa380b70208c8349a52a2/specs/fulu/p2p-interface.md?plain=1#L256-L258",
    "created_at": "2026-02-12T17:03:50.133000+00:00",
    "attachments": []
  },
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Right, it doesn't prevent verifying other proofs received before current validation process finishes. But with current set up, it verifies proofs with the same proof_type even after one valid proof is received.",
    "created_at": "2026-02-12T17:10:11.946000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Oh I see. You're right. Let me think about this more.",
    "created_at": "2026-02-12T17:12:06.390000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "<@845691100072509460> with that in mind, this change is reasonable. I also like that all of the ignores/rejects are grouped together now.",
    "created_at": "2026-02-12T17:17:48.934000+00:00",
    "attachments": []
  },
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "But your point is valid that it might receive multiple valid proofs at the nearly same time. In that case, we will end up storing more than one valid proof with the same proof_type. Do we need to add similar check at the end to prevent this?",
    "created_at": "2026-02-12T17:20:13.679000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Maybe we should. That would be closer to how implementations do it.",
    "created_at": "2026-02-12T17:20:40.272000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'd be fine with doing that here, since payload proof verifications are quite expensive compared to other stuff.",
    "created_at": "2026-02-12T17:21:17.385000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "It would be explicit, which is nice.",
    "created_at": "2026-02-12T17:21:30.285000+00:00",
    "attachments": []
  },
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Restored the original one. Since this is based off of #4914, let me open a PR after #4914 is merged.",
    "created_at": "2026-02-12T17:24:29.291000+00:00",
    "attachments": [
      {
        "type": "image/png",
        "origin_name": "image.png",
        "content": "3f34d57692d2dd0e04ecf4807eccb62c482138e17f73d3ed22e464e40a6c264b"
      }
    ]
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Let me merge 4914, we all agree on it",
    "created_at": "2026-02-12T17:25:11.132000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "<@845691100072509460> merged.",
    "created_at": "2026-02-12T17:28:02.709000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "For your next PR, let's ensure the language is consistent though. ie \"the proof is the first proof\" vs \"no valid proof has already been received\"",
    "created_at": "2026-02-12T17:28:48.448000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Whatever you prefer.",
    "created_at": "2026-02-12T17:28:54.733000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Regardless, this will change when we make these executable functions ðŸ™‚",
    "created_at": "2026-02-12T17:29:22.663000+00:00",
    "attachments": []
  },
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah I also spent some time on that. The thing is, we can put \"no valid proof has already been received\" in the beginning and the end, but cannot put \"the first valid proof\" in the beginning. Because you cannot know if it's valid or not until you finish the validation process.",
    "created_at": "2026-02-12T17:38:39.143000+00:00",
    "attachments": []
  },
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Anyway, I'll go with \"no valid proof has already been received\" (it's the only option I think)",
    "created_at": "2026-02-12T17:40:28.110000+00:00",
    "attachments": []
  },
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The PR is up: https://github.com/ethereum/consensus-specs/pull/4915",
    "created_at": "2026-02-12T17:44:30.698000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Nice, LGTM. Just fix the title (needs to be shorter, I think) and feel free to enable auto-merge.",
    "created_at": "2026-02-12T17:49:20.222000+00:00",
    "attachments": []
  },
  {
    "author": "jtraglia",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "FYI these checks are defined here: https://github.com/ethereum/consensus-specs/blob/36a73141b6270a8ca7a43c2c0a6c80c5cc9a33a6/.github/workflows/checks.yml#L62-L115",
    "created_at": "2026-02-12T17:49:57.415000+00:00",
    "attachments": []
  },
  {
    "author": "jih2nn",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Just curious, why do we need these checks? For release notes?",
    "created_at": "2026-02-12T23:52:29.657000+00:00",
    "attachments": []
  }
]