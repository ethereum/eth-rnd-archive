[
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "can you check cuda 13.1?",
    "created_at": "2026-02-17T10:22:50.956000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "you mean update the docker image to use cuda toolkit 13.1?",
    "created_at": "2026-02-17T12:09:20.234000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "13.1 works fine as well, tho upgrading it would require everyone to also upgrade their driver I think",
    "created_at": "2026-02-17T14:38:08.616000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Just to clarify, when you see the error `context is destroyed (709) at ntt_goldilocks.cu:443.`, did it keep happening or it can recover after some time? Because sometimes I also see this kind of error, but the retry mechanism somehow bring the prover back",
    "created_at": "2026-02-17T14:39:35.132000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "oh",
    "created_at": "2026-02-17T14:40:00.025000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "i dont have retry mechanism",
    "created_at": "2026-02-17T14:40:04.855000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "If it crashes with that it kills my container and it dies",
    "created_at": "2026-02-17T14:40:12.805000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "kurtosis doesn't like crashes like these",
    "created_at": "2026-02-17T14:40:21.111000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "hmm but the retrying loop I meant should happen in the `ere-server`, so the container shouldn't exit immediately, if it exits it means the retrying reaches the maximum attempts (3 times)",
    "created_at": "2026-02-17T14:41:24.841000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "pushed to `han0110/ere-server-zisk:e7ed714-cuda` built with `nvidia/cuda:13.1.1-{devel,runtime}-ubuntu24.04`",
    "created_at": "2026-02-17T14:58:24.228000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "",
    "created_at": "2026-02-17T16:29:22.553000+00:00",
    "attachments": [
      {
        "type": "image/png",
        "origin_name": "Screenshot_2026-02-17_at_17.29.15.png",
        "content": "63634bfe6a2707ff01a34a86096a4d5b9a3a93cc0eacb2faf154227678937234"
      }
    ]
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "pretty much right away i'm getting the same issue :/",
    "created_at": "2026-02-17T16:29:39.625000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "ah wait, could you wait a bit more and see if it retries and succeeds?",
    "created_at": "2026-02-17T16:30:05.357000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "sure can",
    "created_at": "2026-02-17T16:30:43.849000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "but Usually it just dies here for me",
    "created_at": "2026-02-17T16:30:49.390000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "wonder if you would have the same bug ?",
    "created_at": "2026-02-17T16:31:01.598000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "can you try to run it also on your system?",
    "created_at": "2026-02-17T16:31:06.601000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "checkout your pr , pull the latest and run `kurtosis run . --args-file .github/tests/ews.yaml --image-download always`",
    "created_at": "2026-02-17T16:31:32.084000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "and just monitor your ere server docker logs",
    "created_at": "2026-02-17T16:31:44.274000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'm sorry I haven't had too much time to dive in deeper in debugging this this week either",
    "created_at": "2026-02-17T16:32:03.766000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Been super busy with other stuff, and i'm ooo for the rest of the week.",
    "created_at": "2026-02-17T16:32:17.033000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'll try to really focus on getting something working next week tho",
    "created_at": "2026-02-17T16:32:28.168000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I was also bothered by this issue for a long time as well, this happens but sometimes it doesn't, but it can always retry and spin up the server in the end",
    "created_at": "2026-02-17T16:32:34.871000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "yeah the retry logic doesn't exist in kurtosis",
    "created_at": "2026-02-17T16:33:01.240000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "so I'd prefer to have this goldilocks bug ironed out lol",
    "created_at": "2026-02-17T16:33:11.104000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "adding a restart logic sounds hacky",
    "created_at": "2026-02-17T16:33:22.518000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "ah wait it did restart lol",
    "created_at": "2026-02-17T16:33:42.290000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "ahh the retry I mean here is built-in in ere-server, if you run the container longer enough you should see some timeout and retrying message",
    "created_at": "2026-02-17T16:33:42.420000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "",
    "created_at": "2026-02-17T16:33:59.171000+00:00",
    "attachments": [
      {
        "type": "image/png",
        "origin_name": "Screenshot_2026-02-17_at_17.33.52.png",
        "content": "32e49442938093c5830e0fb208f53b371d7777fe0d3dec17c9296247ce9e1660"
      }
    ]
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "sounds like some stuff is still a bit borked",
    "created_at": "2026-02-17T16:34:14.478000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "it can also be of course something on the ethereum-package's side",
    "created_at": "2026-02-17T16:34:25.473000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "```\n2026-02-17T16:34:51.243702Z ERROR ere_zisk::zkvm::server: Failed to shutdown ZisK server: Error: Error executing ProveClient command\n\nCaused by:\n    Failed to connect to server: Connection refused (os error 111)\n\n2026-02-17T16:34:51.243707Z ERROR ere_zisk::zkvm::server: Shutdown server child process and asm services manually...\n```",
    "created_at": "2026-02-17T16:35:32.111000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "any idea on this?",
    "created_at": "2026-02-17T16:35:34.677000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "hmm looks like it's the mem lock size issue, does ethereum-package supports setting some extra docker flags like `--shm-size 32G --ulimit memlock=-1:-1`?\n\nbtw the successful retry would look like this:",
    "created_at": "2026-02-17T16:37:32.804000+00:00",
    "attachments": [
      {
        "type": "image/png",
        "origin_name": "image.png",
        "content": "e3a03ed9db052a5f8f1c36d41c5de79c65cc99079d1a7e19b64e4db498c39bf4"
      }
    ]
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'd try to fix the zisk cuda issue soon (restarting is a bit annoying), will let you know when it's done",
    "created_at": "2026-02-17T16:40:31.151000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "i'll add those docker flags",
    "created_at": "2026-02-17T16:40:47.994000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "will default to have those added",
    "created_at": "2026-02-17T16:40:53.574000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "shm size is not supported :/",
    "created_at": "2026-02-17T16:45:09.787000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "can leave teh ulimit memlock tho",
    "created_at": "2026-02-17T16:45:38.048000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "and added extra args",
    "created_at": "2026-02-17T16:45:41.273000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'll have to figure out how to get the shm working",
    "created_at": "2026-02-17T16:45:54.660000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "maybe we can set the shm size in the docker.json",
    "created_at": "2026-02-17T16:46:34.006000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "no luck :/",
    "created_at": "2026-02-17T16:50:38.660000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "even with docker.json setting the shm size to 32G",
    "created_at": "2026-02-17T16:50:54.886000+00:00",
    "attachments": []
  }
]