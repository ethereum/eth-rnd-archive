[
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I tried this and found that the zisk server fails to start (from nvidia-smi I can see it can access the gpu but soon it panics without error message), but using a local built image it works as usual, will dig a bit to see what could be the reason.\n\nAlso another thing is actually 1 gpu can do the 4-5 seconds empty block proving, I was confused with the 4 gpus number (will do the test again and report back).",
    "created_at": "2026-02-06T08:23:04.841000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "ah 4-5 s empty block sounds awesome",
    "created_at": "2026-02-06T09:33:09.433000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "that first image is super full yolo, we can probably modify the build process",
    "created_at": "2026-02-06T09:33:34.125000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'll try to build locally as well and see if i can repro the issue",
    "created_at": "2026-02-06T09:33:47.959000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I use the script in https://github.com/ethpandaops/eth-client-docker-image-builder/blob/master/ere-server-zisk/build.sh to build locally and it works for me, still trying to figure out why the one published doesn't work",
    "created_at": "2026-02-06T09:44:57.240000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "note that the first proof of the `ere-server-zisk` would  take much longer due to lazy setup, it'd be configurable in next release to make the server is ready to be used after spinned up, so the `depends_on` makes more sense",
    "created_at": "2026-02-06T10:00:43.628000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I think its fine if we don't get proofs for the first few blocks too",
    "created_at": "2026-02-06T11:00:39.472000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "<@466102668138512394> did you pr make it in to the upstream lh image?",
    "created_at": "2026-02-06T12:21:30.816000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "or should I keep using han0110/lighthouse for now ?",
    "created_at": "2026-02-06T12:21:44.832000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "<@466102668138512394> is the idea to have a single ere_server image that could potentially run any type of programs, let that be ethrex zisk/ reth zisk / ziren/sp1 whatever else? Or the ere server will be zisk specific ?",
    "created_at": "2026-02-06T12:44:15.165000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Yeah now itâ€™s available here https://github.com/eth-act/lighthouse/pkgs/container/lighthouse%2Flighthouse/673027856?tag=latest-optional-proofs",
    "created_at": "2026-02-06T13:13:51.143000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "The ere-server is zkVM specific, each zkVM will need its own build, but they can prove any ELF",
    "created_at": "2026-02-06T13:15:30.504000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "do i wanna handle one proof type per servie?",
    "created_at": "2026-02-06T13:23:14.951000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "or all in one?",
    "created_at": "2026-02-06T13:23:19.097000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "can you let me know how many ere server types do we expect?",
    "created_at": "2026-02-06T13:24:59.978000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "and give me a list of them",
    "created_at": "2026-02-06T13:25:13.750000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "which cuda runtime should we be using 13.x or 12.x ?",
    "created_at": "2026-02-06T13:31:52.980000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Could you push your locally built image somewhere?",
    "created_at": "2026-02-06T14:05:29.061000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'd like to test with taht",
    "created_at": "2026-02-06T14:05:33.707000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "my locally built image keeps crashing with some goldilocks issues",
    "created_at": "2026-02-06T14:05:44.666000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "`Root cause: The NTT kernel br_ntt_batch_steps_blocks_par likely has an illegal device memory access on Blackwell GPUs that corrupts the CUDA context. The binary was compiled from han0110/zisk fork (patch/v0.15.0) using pil2-proofman commit 78497c5 with -arch sm_120`",
    "created_at": "2026-02-06T14:15:40.279000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "wonder if my compilation of the ere container was messed up",
    "created_at": "2026-02-06T14:16:00.431000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "pushing it now, it'd take sometime since it's huge",
    "created_at": "2026-02-06T14:24:43.397000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "hmm didn't observe this, are you running local built image with 50 series GPU?",
    "created_at": "2026-02-06T14:25:07.170000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "yes, running a 5090",
    "created_at": "2026-02-06T14:25:24.409000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "trying to fully integrate ere into ethereum package",
    "created_at": "2026-02-06T14:25:40.505000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "almost there now",
    "created_at": "2026-02-06T14:25:45.574000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "pushed here `docker.io/han0110/ere-server-zisk:master`, I'm also running on 5090 (with driver version `580.105.08`), hope it works for you (but we still need to figure out why your local built doesn't work)",
    "created_at": "2026-02-06T14:27:10.777000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "oh im using a newer driver locally",
    "created_at": "2026-02-06T14:29:40.440000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "not sure if that matters?",
    "created_at": "2026-02-06T14:29:43.387000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "im on a 590.x",
    "created_at": "2026-02-06T14:29:52.970000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "`| NVIDIA-SMI 590.48.01              Driver Version: 590.48.01      CUDA Version: 13.1     |`",
    "created_at": "2026-02-06T14:30:49.241000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "ah could be, let me check if that matters..",
    "created_at": "2026-02-06T14:30:57+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "downgrading such drivers might be a pain lmao",
    "created_at": "2026-02-06T14:31:08.554000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "Same crash - context is destroyed (709) at ntt_goldilocks.cu:443. The han0110/ere-server-zisk:master image uses the same cargo-zisk-cuda binary with the same pil2-proofman NTT kernel, so the same Blackwell sm_120 bug hits.",
    "created_at": "2026-02-06T14:45:38.587000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "This confirms it's not a build issue with your local image - both images use the same underlying cargo-zisk-cuda with pil2-proofman's NTT kernel that doesn't work on RTX 5090 (Blackwell). The bug is in the pil2-proofman CUDA code itself, not in how the image is built.",
    "created_at": "2026-02-06T14:45:59.677000+00:00",
    "attachments": []
  },
  {
    "author": "barnabasbusa",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "0xPolygonHermez/pil2-proofman or the han0110/zisk fork's pil2-proofman dependency. This is a Blackwell architecture compatibility issue in the NTT goldilocks CUDA kernel",
    "created_at": "2026-02-06T14:46:12.686000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "hmm so it's purely driver version issue? the code somehow works for older version but fails (not valid) for newer?",
    "created_at": "2026-02-06T14:47:58.843000+00:00",
    "attachments": []
  },
  {
    "author": "han0110",
    "category": "Cross-layer",
    "parent": "l1-zkevm-protocol",
    "content": "I'll try to upgrade driver on my side to see if I can reproduce, if so I think we'd need to add some more warning on the readme about this...\n\n(ZisK's repo installs cuda 12.1 by default https://github.com/0xPolygonHermez/zisk/blob/v0.15.0/tools/test-env/install_deps.sh#L90, but in Ere we are using 12.9, not sure if this matters)",
    "created_at": "2026-02-06T14:52:39.949000+00:00",
    "attachments": []
  }
]