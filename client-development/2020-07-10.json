[
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hell \u003c@!211091239112671234\u003e \u003c@456226577798135808\u003e \u003c@!552133098075193354\u003e \u003c@!425615769280315392\u003e .... not sure what Thomas from nethermind's handle is.... same with other OpenEthereum folk.    I know \u003c@!213672586264051717\u003e also had things to say.....\n\nMaybe we can use this as a common channel for cross-client communication focused on generic client development, and for now, trying to move the discussion we've had over the last two ACD calls towards something actionable.",
        "created_at": "2020-07-10T15:46:18.518000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@489256758989029405\u003e ‚òùÔ∏è",
        "created_at": "2020-07-10T15:47:38.743000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hey everyone",
        "created_at": "2020-07-10T15:48:35.993000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I suspect that SNAP sync is probably one of the areas where more of us being focused on that as a collaborative effort would yield real results.  Currently I think it's been largely just a few people from the Geth team working on it and maybe it is time for more of us to dedicate some of our attention towards that as a common ground for how we address problems with state sync.",
        "created_at": "2020-07-10T15:53:08.174000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For reference: https://github.com/ethereum/devp2p/pull/145",
        "created_at": "2020-07-10T15:54:25.461000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "given that warp sync is not *terrible* (it works well, just doesn't sync to the very top of the chain), we at OpenEthereum are waiting to see how it works out for other clients",
        "created_at": "2020-07-10T16:10:31.664000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hey all! Thay proto spec is not up to date. We can probably update it next week",
        "created_at": "2020-07-10T16:10:37.987000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(also, doesn't \u003c@456226577798135808\u003e 's proposal obliterate the need for both warp and snap?)",
        "created_at": "2020-07-10T16:12:34.084000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "what I suggested on the call today is sort of warp sync, but with the difference that the snapshots would be created very infrequently (maybe once every 6 months), and apart from the snapshots to download, they would also be files containing blocks and files containing receipts for various ranges",
        "created_at": "2020-07-10T16:12:37.031000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I actually think it is a rather good idea to just bundle a small bittorrent client and use it download that huge snapshot",
        "created_at": "2020-07-10T16:14:02.348000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "that is what I would like to do too",
        "created_at": "2020-07-10T16:14:20.341000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "just use BitTorrent and hard-code the bundle content-addresses in the code",
        "created_at": "2020-07-10T16:14:43.192000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and see how it goes",
        "created_at": "2020-07-10T16:14:59.728000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if it works well, we can standardize the format",
        "created_at": "2020-07-10T16:15:14.148000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Drawback being that you might have to catch-up thousands of blocks. If that's ok, then sure, it's a legit approach",
        "created_at": "2020-07-10T16:16:56.342000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "catching up with thousands of blocks is not such a big problem, I think",
        "created_at": "2020-07-10T16:17:22.171000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It would be for us, but slow python doesn't have to influence the design decision.",
        "created_at": "2020-07-10T16:17:38.993000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But more broadly, it would mean slower and slower sync times the further away from the re-genesis as the chain grows (O(N) sync times... üò¶ )",
        "created_at": "2020-07-10T16:18:27.974000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, it is a tradeoff, and I am taking a side of this trade-off to try to go with a simpler approach",
        "created_at": "2020-07-10T16:21:36.719000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and see if user experience is acceptable (if there are any users üôÇ )",
        "created_at": "2020-07-10T16:22:05.959000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but I would also like to connect Snap sync to our primary questions - would that make things simpler for everyone, or have enough performance impact that would shift the balance of installations on the network?",
        "created_at": "2020-07-10T16:26:20.128000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think so yes",
        "created_at": "2020-07-10T16:29:31.482000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@364458974906548225\u003e as an aside, do you target CPython or PyPy?",
        "created_at": "2020-07-10T17:00:12.733000+00:00",
        "attachments": []
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Cpython. Unfortunately pypy was stuck on py3.5 last I checked, and we use a few libraries that have wrapped C implementations that don't work on pypy",
        "created_at": "2020-07-10T17:02:22.473000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "One thing we did not have time to drill into, but I think it is of importance - we do not have a good definition of what \"client diversity\" that we desire means. Here is a thought experiment. I spin up couple of backend nodes somewhere, and create lots of lightweight dev2p2 sentries that would talk to the backend nodes but they will appear as distinct nodes. Although it would change the stats on ethernodes.org, it will not change the fact that if go-ethereum has a bug, the network will probably suffer. Why? Because what matters is not exactly the number of installations, but number of critical installations, which includes mining pools, exchanges with high volume, wallet/dapp backends, etherscan. Which makes the definition messier, but also more useful, because it can make our proposals more actionable",
        "created_at": "2020-07-10T17:07:48.853000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "perhaps the first step we can make (and here is where Eth Cat Herders can help us) is to create a reliable system that would give us info about the critical installations, but without revealing too much info about them",
        "created_at": "2020-07-10T17:10:17.845000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so we can track important metrics rather than vanity metrics",
        "created_at": "2020-07-10T17:10:35.613000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it does not need to be completely decentralised, it can be mediated, but it would be super useful to access where we are and any progress we make",
        "created_at": "2020-07-10T17:11:25.115000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don‚Äôt think any major player in their right mind will ever divulge ownership over specific nodes",
        "created_at": "2020-07-10T17:11:40.913000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Too much of a security risk",
        "created_at": "2020-07-10T17:11:54.714000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "that is why I think it might need to be mediated",
        "created_at": "2020-07-10T17:11:59.544000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so that the attribution to the specific critical operators is kept private",
        "created_at": "2020-07-10T17:12:18.712000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but we see the aggregate picture",
        "created_at": "2020-07-10T17:12:29.474000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "or maybe we can use anonymised tokens that Eth Cat Herders will regularly issue to the critical players, they will drop them in accordingly without attribution, but we can see the stats reliably",
        "created_at": "2020-07-10T17:14:05.370000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I do not see an obvious incentive for the critical operators to anonymously disinform us",
        "created_at": "2020-07-10T17:18:23.189000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!642887713246150666\u003e see what I've written above, perhaps you can discuss it with Eth Cat Herders group",
        "created_at": "2020-07-10T17:21:07.067000+00:00",
        "attachments": []
    },
    {
        "author": "poojaranjan",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is interesting. I'll be sure to bring it up with the Cat Herders.",
        "created_at": "2020-07-10T17:25:11.188000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e we do not have a good definition of what \"client diversity\" that we desire means\nis it accurate to say that we desire client diversity, or are we more interested in its byproduct: network resilience to bugs?",
        "created_at": "2020-07-10T17:53:44.869000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think so, we are interested in network resilience to bugs",
        "created_at": "2020-07-10T17:59:35.765000+00:00",
        "attachments": []
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe a slightly more broad benefit: it also helps us catch bugs on testnets before deployment, because the independent implementations highlight underspecified eips.",
        "created_at": "2020-07-10T18:02:46.116000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I made a little data analysis just this evening, to test a refinement to the idea of having state snapshots and block segements in BitTorrent generated every 1m blocks (~6 months). the content addresses of such files can be hard-coded into the client code releases. In order to optimise this scheme a bit more without introducing more complexity, we can apply it one more time \"recursively\". Every 100k blocks (~18 days) we do a minor \"booster\" snapshot, which needs to be downloaded in addition to the major snapshot. Minor snapshot contains only accounts and storage items that actually changed since the last major snapshot. Here is the data (from blocks 9m and 10m)",
        "created_at": "2020-07-10T20:51:57.381000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "total number of accounts changed in the range 9m-10m: 21'629'239, total number of storage slots changed: 78'783'642",
        "created_at": "2020-07-10T20:52:41.009000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so, the first minor snapshot, at block 9.1m would contain 2'415'648 accounts and 10'060'677 storage slots",
        "created_at": "2020-07-10T20:53:45.571000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "minor snapshot at block 9.2m: 5'210'513 accounts and 17'809'830",
        "created_at": "2020-07-10T20:54:29.270000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and so on...",
        "created_at": "2020-07-10T20:54:33.460000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the last minor snapshot before the major snapshot, at block 9.9m: 19'692'228 accounts, and 69'887'434 storage slots",
        "created_at": "2020-07-10T20:55:20.573000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "you can make back on envelope calculations of how large these snapshots would need to be, but it won't be that large. So, in order to sync into the range of 100k blocks from the current head of the chain, you would need to download 1 major and 1 minor snapshot",
        "created_at": "2020-07-10T20:56:35.901000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "note that it is likely that the latest major and the latest minor snapshots will be the most popular on BitTorrent, and the older ones will just fall off",
        "created_at": "2020-07-10T20:57:28.616000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and you can go another level of recursion, of course, to get into 10k blocks range, with minor-minor snapshots (every couple of days). Those will be even smaller",
        "created_at": "2020-07-10T20:58:16.907000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "then you can do something even more clever. Instead of running fast sync or snap sync on the entire state, you just sync relative to the latest combination of snapshots of your choice",
        "created_at": "2020-07-10T20:59:06.880000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I will let this stew for a bit and maybe write this up",
        "created_at": "2020-07-10T21:00:35.838000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "my intuition is though that a combination of couple of snapshots from BitTorrent + some amount of block processing can get anybody synced to head pretty quickly and without the complexity of real-time snapshot sync protocols/algorithms",
        "created_at": "2020-07-10T21:01:48.650000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "one technical challenge of running such scheme is that in order to keep the replication factor of the snapshots high, ideally the snapshot can be used (in an overlay fashion) as the input database for the block processing and other stuff. So that you don't just download, import, and delete, but you keep seeding it",
        "created_at": "2020-07-10T21:06:29.421000+00:00",
        "attachments": []
    }
]