[
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "550G pruned to 90k",
        "created_at": "2021-11-09T17:28:36.229000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "90k?",
        "created_at": "2021-11-09T17:29:15.501000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "last 90k blocks",
        "created_at": "2021-11-09T17:29:26.338000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and pruned?  does this mean a non-archive node version?",
        "created_at": "2021-11-09T17:29:28.866000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "full validation with limited history",
        "created_at": "2021-11-09T17:29:46.758000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and by \"pruned\" you mean disccarding block bodies and receipts or is there state involved in this somehow?",
        "created_at": "2021-11-09T17:29:58.744000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "discard receipts, but not blocks",
        "created_at": "2021-11-09T17:30:12.632000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we never discard block bodies and headers",
        "created_at": "2021-11-09T17:30:18.974000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so full \"recent\" state? pruned receipts?  non-archive?",
        "created_at": "2021-11-09T17:30:40.772000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "basically `--prune=hrtc`, meaning limited history, receipts, tx by hash lookup index and call traces",
        "created_at": "2021-11-09T17:31:51.090000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "also, even if you need receipts, they can be recomputed on the fly as long as state history is not pruned",
        "created_at": "2021-11-09T17:32:58.328000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "excerpt from our help\n```\n   --prune value                       Choose which ancient data delete from DB:\n                                       h - prune history (ChangeSets, HistoryIndices - used by historical state access)\n                                       r - prune receipts (Receipts, Logs, LogTopicIndex, LogAddressIndex - used by eth_getLogs and similar RPC methods)\n                                       t - prune transaction by it's hash index\n                                       c - prune call traces (used by trace_* methods)\n                                       Does delete data older than 90K block (can set another value by '--prune.*.older' flags).\n                                       If item is NOT in the list - means NO pruning for this data.s\n                                       Example: --prune=hrtc (default: \"disabled\")\n   --prune.h.older value               Prune data after this amount of blocks (if --prune flag has 'h', then default is 90K) (default: 0)\n   --prune.r.older value               Prune data after this amount of blocks (if --prune flag has 'r', then default is 90K) (default: 0)\n   --prune.t.older value               Prune data after this amount of blocks (if --prune flag has 't', then default is 90K) (default: 0)\n   --prune.c.older value               Prune data after this amount of blocks (if --prune flag has 'c', then default is 90K) (default: 0)\n   --prune.h.before value              Prune data before this block (default: 0)\n   --prune.r.before value              Prune data before this block (default: 0)\n   --prune.t.before value              Prune data before this block (default: 0)\n   --prune.c.before value              Prune data before this block (default: 0)\n```",
        "created_at": "2021-11-09T17:33:40.623000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so 550GB includes full state history (ability to dig up my balance at any arbitraty historical block)",
        "created_at": "2021-11-09T17:33:40.898000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no, only at the last 90k blocks",
        "created_at": "2021-11-09T17:34:10.922000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so if I send a `GetReceipts` message over DevP2P for a receipt beyond this block boundary, what does erigon do?",
        "created_at": "2021-11-09T17:34:37.751000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(also, thanks for the updated number)",
        "created_at": "2021-11-09T17:36:54.006000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "550G is full prune with default settings (90k), 1.6T with no prune (default if you run Erigon with no flags), and you can mix the options to have Erigon take up space in between",
        "created_at": "2021-11-09T17:38:29.094000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "replies with empty list",
        "created_at": "2021-11-09T17:38:34.697000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is an incredibly frustrating response (empty set rather than error).  Does erigon just copy what Geth does I assume (original sinner)?",
        "created_at": "2021-11-09T20:56:11.287000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There's no way to return an error response in devp2p so nothing much more than they could do. This is the same thing a geth node that is still syncing and hasn't downloaded the receipt yet would respond with. The real thing at play here is that client teams are trying to lighten their disk usage and it seems dropping receipts is the thing they've chosen to drop. But they're have not been any updates to reflect this in the networking protocols which currently impose an implicit requirement that all participants in the network hold all receipts.",
        "created_at": "2021-11-09T22:30:57.621000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Portal network solves this problem. Happy to get any client teams up to speed. I'm giving a talk tomorrow about this if anyone wants to join.",
        "created_at": "2021-11-09T22:32:37.562000+00:00",
        "attachments": []
    }
]