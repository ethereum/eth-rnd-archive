[
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@240180844130598912\u003e Do you by chance have numbers for how long it takes to fetch a block from the portal network and if there are any variances in the latency with respects to block age or some other parameters?",
        "created_at": "2024-05-24T11:03:09.625000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Would be good to know what the new latency will be for rpc calls (I'm currently assuming it is negligible with no basis)",
        "created_at": "2024-05-24T11:04:20.172000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Currently block age shouldn’t make a difference of course size of blocks could. I haven’t recorded formal numbers of how long it takes though.",
        "created_at": "2024-05-24T11:44:11.257000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also how many nodes are in the network will make a difference",
        "created_at": "2024-05-24T11:44:45.482000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So log n(nodes on the network)",
        "created_at": "2024-05-24T11:45:05.799000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "would the capacity of each node also be a variable?",
        "created_at": "2024-05-24T11:45:08.568000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No, shouldn’t be to my knowledge",
        "created_at": "2024-05-24T11:45:19.487000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "why?",
        "created_at": "2024-05-24T11:45:37.754000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ie getting the block from one node vs getting the parts of the block from 100 nodes?",
        "created_at": "2024-05-24T11:45:42.217000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There are 2 major parts of getting data from the network\n- recursively finding the node which stores the content which takes log n(number of nodes on the network)\n- downloading the content from the node that stores it.\n\nCapacity of the node isn’t a factor in the recursive search to find a node storing the content ( at least currently)",
        "created_at": "2024-05-24T11:48:17.257000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Does this assume that a node will always store a whole block?",
        "created_at": "2024-05-24T11:50:13.565000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe I misunderstand the capacity part: I thought that a node could store only parts of the information, so then you need to download from multiple nodes",
        "created_at": "2024-05-24T11:50:49.135000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(Blocks may be small enough now that its not a problem, was just thinking in general)",
        "created_at": "2024-05-24T11:51:37.931000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1 node is unlikely to store the whole block. We have 4 content types for pre-merge 3 for post. Headers, bodies, and receipts (then epoch accumulators for pre-merge). It is your choice what you query for, but if you want all 4 that would be 4 separate queries",
        "created_at": "2024-05-24T11:53:11.254000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If 1 node is not storing the whole block, is the workflow as follows: \n\nI find all nodes that have all the pieces of the block that I want, then I download from all of those nodes to get the whole block?",
        "created_at": "2024-05-24T11:55:29.722000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes that would be very probable",
        "created_at": "2024-05-24T11:55:45.870000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes",
        "created_at": "2024-05-24T11:56:13.719000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What are you defining as the whole block btw?",
        "created_at": "2024-05-24T11:56:45.980000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Header + transactions or Header + transactions + receipts",
        "created_at": "2024-05-24T11:57:17.702000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess if you look at the network as whole, if each nodes capacity decreases, then you will need to connect to more nodes to download the data and that may increase latency?",
        "created_at": "2024-05-24T11:57:40.729000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Could assume headers+transactions!",
        "created_at": "2024-05-24T11:58:45.434000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So it would be 2 separate lookups",
        "created_at": "2024-05-24T11:59:47.624000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The worst case scenario would be log n. If all nodes had high capacity that could lower the lookup count yes, cause you are more likely to find the content before getting near its location",
        "created_at": "2024-05-24T12:01:18.886000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is there somewhere I can read for how redundancy is handled?\n\nNaively speaking (This is not a realistic example):  If the block is 100MB and there are 10 nodes, each whom say \"we only have 10MB of space for the portal network\".\n\nWould each node be given a single disjoint 10MB chunk of the block?\n\nIf we increased the number of nodes to 20, how would that change things?",
        "created_at": "2024-05-24T12:02:45.654000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@427491045308235776\u003e I would read this \u003chttps://pdos.csail.mit.edu/~petar/papers/maymounkov-kademlia-lncs.pdf\u003e",
        "created_at": "2024-05-24T12:03:04.164000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We currently don’t support disjointing data on the network. So in that case a block wouldn’t be able to be stored",
        "created_at": "2024-05-24T12:04:11.970000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah got it -- how does the system determine how to make data redundant? Since many nodes will store redundant copies of a single block I assume",
        "created_at": "2024-05-24T12:08:42.185000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Currently redundant copies is our source of data redundancy",
        "created_at": "2024-05-24T12:31:41.743000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe I misunderstood what you meant as well. Nodes store data closest to them. Each piece of content has a unique id, and each node on the network has a unique node id. We then do xor(content id, node id) and if the number is smaller or bigger determines how close content is to a node.",
        "created_at": "2024-05-24T12:47:16.026000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Nodes will prioritize storing the content closest to themselves using a xor as a distance function to put it in short",
        "created_at": "2024-05-24T12:49:50.660000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@427491045308235776\u003e I would look into our \"radius\" mechanism, which is how individual nodes in the network control how much data they are responsible for storing on the network as well as how other nodes on the network are able to determine whether a node should be \"interested\" in a piece of content.\n\nhttps://github.com/ethereum/portal-network-specs/blob/master/history-network.md#data-radius",
        "created_at": "2024-05-24T17:34:47.434000+00:00",
        "attachments": null
    }
]