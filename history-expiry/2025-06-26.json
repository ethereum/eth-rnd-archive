[
    {
        "author": "matildaclerke",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hey all, I've been modifying some of besu's RPC responses to match the JSON-RPC spec, but it occurred to me that I've seen something about returning a 4444 error code when a request is asking for pre-merge blocks that have been pruned. Does anyone know where I can find that spec change? Or if we've decided on doing anything in particular for missing block data?",
        "created_at": "2025-06-26T04:19:25.819000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes geth returns error `4444` if we can tell a request cannot be fulfilled due to history prunning. It isn't represented in the json-rpc spec yet because we haven't added error codes to spec officially",
        "created_at": "2025-06-26T11:42:01.896000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/go-ethereum/blob/a92f2b86e33e49ec23e67fa0e17eaabf99cc9645/core/history/historymode.go#L94-L98",
        "created_at": "2025-06-26T11:42:03.333000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If someone requests eth_getBlockBy* we can still return header data, so a partial response is possible. Is there any reason not to do that?",
        "created_at": "2025-06-26T19:25:04.271000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's a good point, but I think we shouldn't",
        "created_at": "2025-06-26T22:09:17.185000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The response should be complete as expected by the API",
        "created_at": "2025-06-26T22:09:28.271000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Personally I think the API should change to accommodate - unless there's another existing way to obtain the header data?\n\nIf not returning partial data, then introducing a new endpoint to the spec just for headers could be viable, I think some APIs do this already.\n\nI prefer partial as it's less of a breaking change for users that only care about the header portion, but obv still breaking for anyone relying on the body.",
        "created_at": "2025-06-26T22:37:32.268000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I agree it may be a good idea to add header requests",
        "created_at": "2025-06-26T22:39:07.849000+00:00",
        "attachments": null
    }
]