[
    {
        "author": "gtrintinalia",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think this should match with the NewPooledTransactionHashes eth/68 types. Legacy type is serialized as `0x00` if I am not wrong",
        "created_at": "2025-05-12T04:32:26.496000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no it should be `0x80`",
        "created_at": "2025-05-12T08:23:38.054000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`0x00` is invalid in RLP",
        "created_at": "2025-05-12T08:23:48.967000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@275441691312390144\u003e that link you posted doesn't work for me, it doesn't seem to point to any specific place in the diff",
        "created_at": "2025-05-12T08:24:26.218000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the encoding of receipts has changed in eth/69 to be the same across all tx types, so we are now including the type byte even for legacy transactions",
        "created_at": "2025-05-12T08:24:55.395000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in the consensus encoding, receipts do not have a type byte at all",
        "created_at": "2025-05-12T08:25:14.026000+00:00",
        "attachments": null
    },
    {
        "author": "alexb5dh",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Should point here",
        "created_at": "2025-05-12T09:43:59.568000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "fbe30ce551b9dd28d08c83d9d302f203bd93b78ca56610d415d5a18ce195d363"
            }
        ]
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2025-05-12T09:49:29.303000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it's correct like this",
        "created_at": "2025-05-12T09:49:32.767000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "for eth/68, we do not encode the type byte for legacy tx, so it's always \u003e 0 (see condition in code). And the consensus encoding specifies tx-type to be exactly one byte.",
        "created_at": "2025-05-12T09:49:57.951000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "for eth/69, we encode it as an integer (0 = 0x80, 1 = 0x01, ...)",
        "created_at": "2025-05-12T09:50:18.184000+00:00",
        "attachments": null
    },
    {
        "author": "alexb5dh",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This change from encoding as a byte to encoding as an integer - does it implicitly follow from some part of EIP?",
        "created_at": "2025-05-12T10:20:10.993000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it just follows the eth/69 EIP: https://eips.ethereum.org/EIPS/eip-7642#receipts-message-changes",
        "created_at": "2025-05-12T10:20:58.296000+00:00",
        "attachments": null
    },
    {
        "author": "alexb5dh",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So `receipt = [tx-type, post-state-or-status, cumulative-gas, logs]` means `tx-type` should be encoded now, instead of just written directly as a byte, is this correct?",
        "created_at": "2025-05-12T10:22:43.007000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2025-05-12T10:22:48.368000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the previous encoding is weird, the eth/68 one I mean",
        "created_at": "2025-05-12T10:22:59.742000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so for eth/68, we use the same encoding that is also used for hashing receipts in a block",
        "created_at": "2025-05-12T10:23:44.388000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there, we encode legacy as just a list, and non-legacy as `rlp(type || [...])`",
        "created_at": "2025-05-12T10:24:24.164000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this notation means: we create a byte slice containing `type` concatenated with the RLP list `[...]`, then we encode that byte array as RLP again",
        "created_at": "2025-05-12T10:25:05.481000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in eth/69 it's much simpler, there is no 'nested' RLP byte array, and all the types are encoded the same",
        "created_at": "2025-05-12T10:25:39.518000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "notably, in eth/68, the `type` is not RLP-encoded at all, since it is just the prefix of the inner byte array",
        "created_at": "2025-05-12T10:26:34.552000+00:00",
        "attachments": null
    },
    {
        "author": "alexb5dh",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah, it makes sense now, thanks",
        "created_at": "2025-05-12T10:27:19.053000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "could I get another status update about client readiness please?",
        "created_at": "2025-05-12T10:31:25.058000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "can I merge the spec update?",
        "created_at": "2025-05-12T10:31:58.784000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "should we do some more formalized testing, or should we just put eth/69 in client releases and work out any issues on the network?",
        "created_at": "2025-05-12T10:32:43.752000+00:00",
        "attachments": null
    },
    {
        "author": "alexb5dh",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "From Nethermind side - P2P communication with all messages changes works fine, but I still have a bit of work remaining on our peer strategies",
        "created_at": "2025-05-12T10:52:27.189000+00:00",
        "attachments": null
    }
]