[
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I hear there is discussion happening among ACD around using portal for 4444s in execution clients. The version of notes that I've seen from this discussion mentions a \"minified\" version of the protocol. I would be very interested in understanding in more detail what that means. Can anyone shed some light on this?",
        "created_at": "2024-05-17T20:46:05.771000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For those of you starting to try and dig into understanding how Portal Network works, here are some good links:\n\n- History network specification.  https://github.com/ethereum/portal-network-specs/blob/master/history-network.md\n- Base wire protocol. https://github.com/ethereum/portal-network-specs/blob/master/portal-wire-protocol.md\n\nBased on my current understanding of of the needs for 4444s, I believe our history network is what client teams are probably looking for.  It is a stand alone network that serves chain history (headers/bodies/receipts).  The history network spec above gives technical detail on how the network operates.",
        "created_at": "2024-05-17T22:12:45.591000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the details of the what the minified version of portal looks like is still tbd at the moment â€” personally wasnâ€™t aware of the standalone aspect for the history network",
        "created_at": "2024-05-17T22:18:00.134000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Had a few questions:\n\n- how long does it take to seed the network with a particular block? Relevant to how long we can wait before deleting parts of block history\n- since the storage capacity of the network is limited, what would happen if there is not enough space to store history? Is this even a relevant concern?\n- If the history network is currently running, what is the availability of data at the moment? \n- Are there any planned modifications to the history network specs?\n- Can you make a general comment on readiness?",
        "created_at": "2024-05-17T22:31:14.964000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e since the storage capacity of the network is limited, what would happen if there is not enough space to store history? Is this even a relevant concern?\ndata would be evicted, deleted from individual node's storage databases until there are no nodes left storing that data.\n\nThis isn't a realistic concern because:\n\n- It should be trivial for \"us\" to run enough nodes to store all of the history data with good redundancy\n- It is easy to monitor the network and derive total storage available on the network.\n- There is always a total amount of valid data that can be stored in the network (all of the past block data), and while this grows, it grows slowly and so we always generally know how much capacity the network needs to be healthy.\n\nThe only way this situation should come about naturally is if we simply aren't paying attention.  It should be trivial to bring extra nodes online if needed to store this data, but realistically, if we're talking about all execution nodes running this protocol, there will be ample storage available to store all the data.",
        "created_at": "2024-05-17T22:41:08.577000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e If the history network is currently running, what is the availability of data at the moment?\n\nYou can view the status of the network here.  The green line on the chart is specifically 4444's data.  We have spent the last weeks seeding all of the 4444s data into our network and are approaching the 100% mark.  Current graph shows us at 95% of 4444's data is in the network and available.  We're working to get that number to 100% asap.\n\nhttps://glados.ethdevops.io/",
        "created_at": "2024-05-17T22:43:18.160000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Are there any planned modifications to the history network specs?\n\nSpecification is stable.  No pending or planned modifications or additions.",
        "created_at": "2024-05-17T22:44:20.549000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Can you make a general comment on readiness?\nWe are absolutely ready for execution teams to use the network",
        "created_at": "2024-05-17T22:45:29.131000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e how long does it take to seed the network with a particular block? Relevant to how long we can wait before deleting parts of block history\nI'm hoping someone from my team can chime in with real numbers on this but it's fast (seconds).  Once data is in the network it should be durable.  It would also be trivial for clients to probe the network to make sure a block is available before they delete it.",
        "created_at": "2024-05-17T22:47:23.184000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We are having an in person Portal Network event in Prague May 28th-30th.  All of the client teams for portal will be there.  I any of the core devs that are interested in joining to DM me with your telegram handle (and who you are if I don't already know you well) and I'll get you added to the event thread.",
        "created_at": "2024-05-17T22:49:21.558000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thank you for the detailed responses â€” I guess the reason data availability of all blocks is not at 100% because you need to fetch the block history first and then seed?",
        "created_at": "2024-05-17T23:27:18.551000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Has any analysis been done to see how hard it would be for a malicious entity to custody a subset of some data and then after a while just delete it?\n\nIn practice this is not an issue because the block history will be stored in other places like torrents so you can always re-seed",
        "created_at": "2024-05-17T23:29:02.676000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This attack would need to exploit the network topology to ensure that only the nodes under the control of the malicious entity will get custody of the data",
        "created_at": "2024-05-17T23:30:19.932000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "mods?",
        "created_at": "2024-05-17T23:31:05.404000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Gracias - corrected it",
        "created_at": "2024-05-17T23:32:08.129000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes",
        "created_at": "2024-05-17T23:33:09.565000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is the bottleneck the fetching part?",
        "created_at": "2024-05-17T23:34:55.340000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't think I can give a definitive number because it depends on so many factors. But the process is basically a log(n) look up on the network n being the amount of nodes to find which node is the closest to the data using a xor metric, then the amount of time it takes to send (block header or block body or block receipt) over a uTP connection (it is a TCP like protocol built off UDP like QUIC). So it shouldn't be very long at all.",
        "created_at": "2024-05-17T23:37:39.054000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Are we talking about 4444 blocks (which initially will only be pre-merge blocks, and later updated to a rolling window of the last year) or post 4444 blocks?",
        "created_at": "2024-05-17T23:39:04.414000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If the data is say 1GB and every node specifies that they will only store 100MB then at most is this a 10 logn lookup? Ie you do 10 lookups to find the all of the pieces of the original data",
        "created_at": "2024-05-17T23:41:02.884000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah I was referring to the current history network having ~90% availability; whatâ€™s the bottleneck that makes it such that we are not at 100% right now?",
        "created_at": "2024-05-17T23:42:21.504000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In this example you would already have all 10 nodes in your routing table so the lookup would be O(1) on the network",
        "created_at": "2024-05-17T23:42:44.058000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Assuming the node wasn't in your routing table it should only take at most 1 lookup to find the node the has the data as well",
        "created_at": "2024-05-17T23:43:32.208000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is mostly a problem of probability, assuming you are seeding the network semi-randomly the more you fill the network the harder it is to find spots not filled up. The time it takes to fill up should drastically lower as we further optimise our Portal client implementations.",
        "created_at": "2024-05-17T23:46:21.406000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Perhaps Iâ€™m misunderstandingâ€” does 90% availability of history mean that only 90% of the blocks have been seeded into the portal network?",
        "created_at": "2024-05-17T23:49:33.909000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The 90% number is misleading as that is including different metrics which aren't all related to 4444's avaliablity",
        "created_at": "2024-05-17T23:51:16.871000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2024-05-17T23:51:27.024000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "decc73caa4b4441a89fba924b6647198e86e316393bfbb7a7d44424d5ec36399"
            }
        ]
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2024-05-17T23:51:40.981000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "ca59ae201c856991081102c70b8e477591fa7056c7556712832756228e03915a"
            }
        ]
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would go to this page and only filter for 4444's data information",
        "created_at": "2024-05-17T23:52:07.999000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So the 97.6% means we approximate that 97.6% of 4444's blocks are seeded onto the network yes",
        "created_at": "2024-05-17T23:53:27.703000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For the 2.4% is it that it was seeded onto the network but thereâ€™s not a good guarantee that we can retrieve it or it has just never been seeded?",
        "created_at": "2024-05-17T23:54:45.447000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is an approximation of the blocks that hasn't been seeded yet",
        "created_at": "2024-05-17T23:55:04.793000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah okay got it, and is this mainly because the data has not been fetched from some archive node? Iâ€™m wondering whatâ€™s the bottleneck to get it to 100%",
        "created_at": "2024-05-17T23:55:58.914000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The missing blocks tend to be random single blocks that for some reason or another failed when being injected into the network.  The software responsible for injecting blocks into the network is in it's early stages of battle testing.  There were times when it would crash in the middle of seeding an epoch or something like that...   And now we have a multi-million block range of 4444s data with a few missing gaps.... filling those gaps is a priority, but hasn't been our highest priority because there's a lot of other things being worked on ðŸ™‚",
        "created_at": "2024-05-17T23:56:36.916000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah okay that makes sense â€” I think thatâ€™s okay given there is a way to query the network for success",
        "created_at": "2024-05-17T23:57:34.127000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So you can just retry with an exponential back off for example",
        "created_at": "2024-05-17T23:57:55.110000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes, it's very easy to query the network for whether data is present or not, and it's very easy to push data into the network and it's very easy to fetch the data from era1 files when data is found to be missing from the network.",
        "created_at": "2024-05-17T23:58:23.227000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Fetching from era1 files seems to be out of scope for the portal network?",
        "created_at": "2024-05-17T23:59:13.707000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Or do you mean the entity querying the portal?",
        "created_at": "2024-05-17T23:59:36.043000+00:00",
        "attachments": null
    }
]