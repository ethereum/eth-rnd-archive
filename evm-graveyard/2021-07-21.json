[
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "what's wrong with SLOAD + DELEGATECALL?\n\n(btw the Verkle tree EIP actually makes it significantly more gas-efficient, because the SLOAD would only have to pay 200 gas if it's in location 0...63)",
        "created_at": "2021-07-21T06:44:41.517000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Superior for you maybe, but vastly inferior from Ethereum implementation perspective\n\nThe sooner we get rid of selfdestruct the better",
        "created_at": "2021-07-21T07:06:03.339000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think it's reasonable to try to create a better alternate workflow for people who want some form of upgradeability",
        "created_at": "2021-07-21T13:10:58.444000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "eg. one option would just be a `SET_CODE_ADDRESS` opcode, allowing contracts to store their code at a different address ðŸ¤£",
        "created_at": "2021-07-21T13:12:03.162000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And then SELFDESTRUCT could be mapped to `self.code_address += 1`",
        "created_at": "2021-07-21T13:12:17.386000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hmm, though actually that would be confusing because then code read in codecopy and code executed in a call would be different",
        "created_at": "2021-07-21T13:13:06.674000+00:00",
        "attachments": null
    },
    {
        "author": "albusdompeldorius",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "How so? I'd presume you would have to look up the code at `contract.code_address` when using CODECOPY.",
        "created_at": "2021-07-21T15:10:53.007000+00:00",
        "attachments": null
    },
    {
        "author": "wjmelements",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "SLOAD+DELEGATECALL is a lot of gas since Berlin\n\nMost proxies don't use storage location in the range 0-64.",
        "created_at": "2021-07-21T20:01:27.189000+00:00",
        "attachments": null
    },
    {
        "author": "wjmelements",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Superior for you maybe, but vastly inferior from Ethereum implementation perspective\n\nGas costs say otherwise. Indirection is much more burdensome according to the measurements supporting 2929.  Much better to replace the code directly to save the SLOAD+DELEGATECALL overhead for all users.",
        "created_at": "2021-07-21T20:05:22.396000+00:00",
        "attachments": null
    }
]