[
    {
        "author": "djrtwo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Channel for discussing various backwards incompatible changes and/or removals from the EVM\n\nConversation originally sparked by \u003c@273808422753796097\u003e's doc -- https://hackmd.io/@HWeNw8hNRimMm2m2GH56Cw/evm_feature_removing",
        "created_at": "2021-02-20T16:19:01.319000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2021-02-20T16:19:08.428000+00:00",
        "attachments": []
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "May be this ‚Äúgraveyard‚Äù is not strictly a proper place for a discussion I‚Äôd like to have, but let‚Äôs try. \n\nFirst I should mention that my option below is most likely not popular, but I should state it for completeness and emphasize that recent progress in Eth1.0 development has become something like ‚Äúlet‚Äôs maintain a legacy and let eth2.0 fix everything‚Äù. There are various aspects of it, both related and unrelated to the proposal in it‚Äôs current form. \n\nFirst about the proposal itself: it‚Äôs great from the ‚Äúphilosophical‚Äù point of view and technical beauty, like having additional invariants with removal of ‚Äúselfdestruct‚Äù, but other proposals are ‚Äútoo breaking‚Äù and try to fix things that were related not to some malicious behavior, but to bad system design and lack of information how Ethereum would evolve at the time when contract code was written. E.g. hardcoded gas parameters in the CALLs are bad, but an inability to specify gas parameters at all basically kills a whole class of metatransaction services, partially affects things like Gnosis Safe, and affects UX in various wallets and services that try to onboard users that do not yet have Eth, so they can not follow the ‚Äúpull to withdraw pattern‚Äù",
        "created_at": "2021-02-20T18:08:32.147000+00:00",
        "attachments": []
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But the aspect that troubles me even more is that these proposals are unrelated to the current problems and do not move Eth1.0 forward technically. Many have seen a discussion in Twitter recently where miners (that technically have an ability to increase a gas limit of the blocks on their will) for some reason start to ask developers whether they ‚Äúshould‚Äù increase a limit, and to which they get a strict whining response (do not remember the name from who), that ‚Äúno, everything will break due to IO‚Äù. Simultaneously TurboGeth team has demonstrated that technical innovations allow to overcome those claimed IO problems, and not to mention that a cost of a transaction (hundreds of dollars) is kind of comparable to buying a new SSD with high IOPs. Of course users who initiate transactions are not the final cost bearers for the historical state storage and other related things, but this should be solved with proposals like state rent and not with halting any changes with an argument ‚Äúeverything breaks‚Äù. Yes, it‚Äôs cool to have Eth node on raspberry Pi, but it doesn‚Äôt give any contribution to decentralization because you still can not mine because you do not have an ASIC (yes, another part where initial Eth values and promises were betrayed). \n\nAnother reflection of such approach is a pair of eips 2929/2930. While the latter (access lists) is great for future evolution, but an amount of work put into implementation of both so existing contracts with hardcoded parameters would not break becomes comparable (subjective view here) to an amount of work clients developers could have instead spend on finishing their design and implementation of the better database structure or backporting it from the mentioned TurboGeth. Or more radically, to switching simultaneously to the binary tree. \n\nThis post was quite long, but I hope it reflects my view on the state of the recent proposals and development cycle",
        "created_at": "2021-02-20T18:08:54.549000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Another unpopular thought: we do not *need* historical state. Or, at least, it's worth much less than lower node requirements and gas fees.",
        "created_at": "2021-02-20T23:12:51.383000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'd even argue that obscurity of history is *good* for privacy",
        "created_at": "2021-02-20T23:13:38.316000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "By this do you mean that you support us adding some state expiry scheme, or something else?",
        "created_at": "2021-02-20T23:14:07.516000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I strongly support regenesis and pruning",
        "created_at": "2021-02-20T23:14:33.535000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm cool with those, as long as you show me a decent solution to resurrection conflicts!",
        "created_at": "2021-02-20T23:14:57.591000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(to be clear, I think good solutions exist, but I feel like many people haven't yet quite realized that the problem is truly *central* to a good solution and is the thing that we're been agonizing over for years)",
        "created_at": "2021-02-20T23:16:29.765000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hm, what if we combine your solution 2., but instead of year introduce regenesis index / epoch?",
        "created_at": "2021-02-20T23:18:02.948000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "a bit more concrete imo",
        "created_at": "2021-02-20T23:18:08.897000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So lately I have been disliking solution 2 because it only works for accounts and not contract storage",
        "created_at": "2021-02-20T23:18:53.094000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't think approaches that treat storage as one unit as sustainable, because at least the popular ERC20 contracts will have to survive, and those will keep getting ever-growing state rot too",
        "created_at": "2021-02-20T23:19:40.709000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(although I think this discussion is better fit for \u003c#739145593762611250\u003e )",
        "created_at": "2021-02-20T23:21:40.455000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Fair!",
        "created_at": "2021-02-20T23:21:52.059000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's a really important discussion to have though; it would be good for us all to be on the same page (and a page everyone's comfortable with) for how state expiry can work",
        "created_at": "2021-02-20T23:22:14.110000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "speaking of EVM itself, we at TurboGeth could simplify internals quite a bit by cutting *incarnations* which are necessary for selfdestruct support",
        "created_at": "2021-02-20T23:22:26.706000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What's an incarnation?",
        "created_at": "2021-02-20T23:22:49.613000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is this like a caching layer that allows you to cache multiple storage trees, because a contract could selfdestruct and then reform within one execution?",
        "created_at": "2021-02-20T23:23:10.306000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(my wild guess)",
        "created_at": "2021-02-20T23:23:13.566000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/ledgerwatch/turbo-geth/blob/master/docs/programmers_guide/db_walkthrough.MD\n\u003e The third bit of the field set represent the Incarnation. The Incarnation is a turbo-geth specific attribute, which is used to make removal and revival of contract accounts (now possible with CREATE2 since Constantinopole) efficient with turbo-geth's database layout. For now it will suffice to say that all non-contract accounts will have incarnation 0 (not set), and all contract accounts will start their existence with incarnation 1.",
        "created_at": "2021-02-20T23:23:43.762000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yep yep looks like I guessed well",
        "created_at": "2021-02-20T23:24:10.165000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I remember implementing and debugging a similar thing in python",
        "created_at": "2021-02-20T23:24:39.145000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ü§Æ",
        "created_at": "2021-02-20T23:24:42.743000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A big part of why I want selfdestruct gone ü•∞",
        "created_at": "2021-02-20T23:24:56.092000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "us too",
        "created_at": "2021-02-20T23:25:21.603000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "that, and also because GasTokens are additional useless work for nodes by users abusing this 'feature'",
        "created_at": "2021-02-20T23:26:12.736000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "btw I'm not trying to be insistent on 100% of my bulldozer agenda going through; if people want to keep gas visibility because that's the highest disruption to remove and has the most legitimate usage, that's fine",
        "created_at": "2021-02-20T23:28:45.616000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The doc is there to start a discussion üôÇ",
        "created_at": "2021-02-20T23:29:11.331000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "oh, and another point:\n\nunless we fix eth1 today, eth2 will be dead on arrival",
        "created_at": "2021-02-20T23:30:42.393000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "because of abhorrent gas fees, DeFi will migrate to Polkadot and Ethereum (1 and 2) will be done for",
        "created_at": "2021-02-20T23:31:10.237000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yep, short term scaling is important!",
        "created_at": "2021-02-20T23:31:24.632000+00:00",
        "attachments": []
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well, my point was less about particular Vitalik‚Äôs proposals (although I‚Äôm up to remove self destruct, but doubt that gas visibility can be changed), but more to emphasize that may be more radical changes should be made. And also keep a rule that only a client that can keep up with a network at some speed can be considered ‚Äúofficial‚Äù (following the recently ‚Äúforbidden‚Äù move to increase a block limit)",
        "created_at": "2021-02-20T23:34:14.893000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What are your favorite radical changes? \u003c@!381789485777682434\u003e",
        "created_at": "2021-02-20T23:34:32.012000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "well, that is awkward, given TurboGeth's performance üòÖ",
        "created_at": "2021-02-20T23:35:18.512000+00:00",
        "attachments": []
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ask turbogeth team to share their optimizations for storage, so clients can no longer be nervous about IO üôÇ",
        "created_at": "2021-02-20T23:35:25.474000+00:00",
        "attachments": []
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Binary tree is linked and most likely will improve a situation even further",
        "created_at": "2021-02-20T23:36:05.306000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm a fan of skipping binary and going straight to verkle",
        "created_at": "2021-02-20T23:36:32.818000+00:00",
        "attachments": []
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And hash function change for tree, so we can have efficient ZK  üôÇ",
        "created_at": "2021-02-20T23:36:38.468000+00:00",
        "attachments": []
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think those have been shared by \u003c@456226577798135808\u003e through and through, and we also have extensive documentation\n\nit just boils down to other teams' willingness to act up on those",
        "created_at": "2021-02-20T23:38:28.971000+00:00",
        "attachments": []
    }
]