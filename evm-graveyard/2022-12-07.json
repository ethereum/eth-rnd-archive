[
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes. You have to ask the node for the actual transactional data. In effect, we use the node as a database. By providing an index it actually becomes a usable database for histories. Not excellent, but small compared to a full extraction.",
        "created_at": "2022-12-07T15:24:12.881000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's the responsibility of the end user to convince themselves that the data is correct. They can do that by running the index scraper themselves. It's important to note that there's no need to have a \"chain\" (In the sense that the hash of the previous index chunk is not stored in the current chunk.) The reproducibility comes from the chain, there's no need to store the chain in the index. This allows the indexing to proceed in parallel.",
        "created_at": "2022-12-07T15:26:02.394000+00:00",
        "attachments": null
    },
    {
        "author": "jlokier",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A zk proof of bloom filter.  What an intriguing idea!",
        "created_at": "2022-12-07T15:26:55.062000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That's above my pay grade. Plus, I'm not sure the extra complication actually brings anything -- since the end user can perfectly reproduce the data themselves. But I guess speed would be the benefit.",
        "created_at": "2022-12-07T15:27:05.930000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not 100% sure I understand what this means, but if it helps you explain it to me, we do have to resort to reading Parity style traces (which I think means we have to execute) so that the index is as complete as it needs to be for 18-decimal-place accurate accounting (which is our goal).",
        "created_at": "2022-12-07T15:28:37.875000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "An end user can only reproduce the data if they have access to all of chain history and quite a bit of time.",
        "created_at": "2022-12-07T15:28:43.682000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "With a ZK Proof, they can validate the data with a second of CPU time.",
        "created_at": "2022-12-07T15:28:54.638000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh, you aren't indexing only transaction to/from and looking for addresses in events?",
        "created_at": "2022-12-07T15:29:34.867000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think this gets too complicated. That's why I want it to be the responsibility of the end user to worry about \"provability.\" We provide \"reproducibility.\" They can worry about proving the data if they wish. They have all the tools.",
        "created_at": "2022-12-07T15:29:47.840000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To ZK Prove it I think you would need to rely only on data in transactions and receipts (logs).",
        "created_at": "2022-12-07T15:29:49.403000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Every \"appearance\" of every address anywhere on the chain. About 130% of what any API we've looked at finds.\n\nhttps://trueblocks.io/papers/2022/file-format-spec-v0.40.0-beta.pdf\n\nhttps://medium.com/coinmonks/trueblocks-covalent-comparison-7b42f3d1e6f7\n\nhttps://tjayrush.medium.com/how-accurate-is-etherscan-83dab12eeedd\n\nSorry for the spam, but these are very informative.",
        "created_at": "2022-12-07T15:31:36.957000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right. It's their choice, though. Time: about a day...faster than a node sync, but we do have to replay every `block_trace`.  (I always actually thought it could be a \"stage\" in Erigon, but I've not gotten anywhere near that far...)",
        "created_at": "2022-12-07T15:32:58.575000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That's quite a bit faster ðŸ™‚",
        "created_at": "2022-12-07T15:33:44.351000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think this would produce an index. That's true. But it wouldn't be enough of an index to do 18-decimal-place accurate accounting for any token (including ETH). This requires \"every appearance of every address\" which requires traces because assets are moved down at the bottom of the call tree of 100 smart contracts.",
        "created_at": "2022-12-07T15:35:54.986000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For my use case (and I suspect many others), just knowing the transaction history for an account and ERC20/NFTs owned would be super useful, which you can get from transactions and receipts alone.",
        "created_at": "2022-12-07T15:39:40.923000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You are correct, this would not work for ETH balances, sadly.",
        "created_at": "2022-12-07T15:39:50.961000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So perhaps what I'm looking for is a bit different from what you are building.",
        "created_at": "2022-12-07T15:40:06.967000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(trying to build a privacy preserving \"wallet\", which is hard when you can't use a third party RPC for querying transaction history and figuring out what tokens the user owns)",
        "created_at": "2022-12-07T15:40:49.679000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But your design would solve this problem.  We are assuming user has access to own node (or maybe rented, or at least semi-trusted third party), but no indexes.",
        "created_at": "2022-12-07T15:41:04.628000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It runs in that mode - if traces are not available, it does the best it can. We're going to release a docker version in Two Wooks. Maybe you'll check it out.",
        "created_at": "2022-12-07T15:41:14.724000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes. We assumed from the first day that there was no third-party anything. But that does require the user to have a node -- Erigon preferred because of disc size and `trace_` namespace.",
        "created_at": "2022-12-07T15:42:22.841000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "After the docker version, dAppNode version follows.",
        "created_at": "2022-12-07T15:42:32.955000+00:00",
        "attachments": null
    },
    {
        "author": "tjayrush",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Our thought is that if you want to use a node for \"account histories,\" you need an index. But the index has to be local (so it can't be captured or spied on). And it wants to be at least reproducible, provable if possible.",
        "created_at": "2022-12-07T15:44:02.012000+00:00",
        "attachments": null
    }
]