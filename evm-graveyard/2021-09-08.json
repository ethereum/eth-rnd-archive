[
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Personally, I oppose this.  It speeds up jumpdest analysis, but I want to get rid of it.\n \n Why not just encode the pushdata with the high bit always set, so the bytes can't be jumpdests?",
        "created_at": "2021-09-08T23:04:35.888000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Would we then have to do 7/8ths decompressions?  Or am I not understanding what you are proposing?  Having to bit shift every byte of a push operation would be a loadstone around performance.  IIRC the Push series is the #1 operation by volume.",
        "created_at": "2021-09-08T23:06:44.262000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not my expertise (machine code semantics and whatnot), but with EOF and a scheme that does validation of jumps at the time of creation, removing the need for runtime validation, doesn't that get us the \"win\" we've been looking for?  What does this still leave us wanting?  My understanding was that greg's recent proposal got us this far.",
        "created_at": "2021-09-08T23:09:29.114000+00:00",
        "attachments": []
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Pretty close, depending on how far we go.... (delete detail...) This is a suggestion that is much simpler and can get in much sooner to fix a know DoS problem.",
        "created_at": "2021-09-08T23:12:36.976000+00:00",
        "attachments": []
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I couldn't find the histogram, but I think most PUSHn are for very small n, and I'd guess that the work of encoding the immediate data into the 256-bit stack slot would be a bigger performance hit than a looping over a few bytes masking and shifting.",
        "created_at": "2021-09-08T23:15:29.884000+00:00",
        "attachments": []
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Attached are counts for I forget how many thousand blocks at the tail of the chain some months ago.",
        "created_at": "2021-09-08T23:19:23.016000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "opcode_counts_sorted.txt",
                "content": "IDM3ODg2NzczICAgNjAgICAgICAgICAgICBQVVNIMQogMjgyODA5MzkgICA2MSAgICAgICAgICAgIFBVU0gyCiAyNDAwMzg1MiAgIDUwICAgICAgICAgICAgICBQT1AKIDIyMzc0OTUzICAgNWIgICAgICAgICBKVU1QREVTVAogMTgxMTAwODUgICA5MCAgICAgICAgICAgIFNXQVAxCiAxNzM5Mzk4OCAgIDgxICAgICAgICAgICAgIERVUDIKIDE2MTMyOTQ2ICAgODAgICAgICAgICAgICAgRFVQMQogMTQ5NjM0NzcgICA1NyAgICAgICAgICAgIEpVTVBJCiAxNDg0Mjk4NyAgIDEgICAgICAgICAgICAgICBBREQKIDExNTM1MzI2ICAgODIgICAgICAgICAgICAgRFVQMwogMTEzODk2MzUgICA1NiAgICAgICAgICAgICBKVU1QCiAgOTY3MDg3MiAgIDUyICAgICAgICAgICBNU1RPUkUKICA4OTgxODcxICAgOTEgICAgICAgICAgICBTV0FQMgogIDg5NDIzMDEgICAxNSAgICAgICAgICAgSVNaRVJPCiAgODUyNDc2NyAgIDE2ICAgICAgICAgICAgICBBTkQKICA4MjczNzA5ICAgNTEgICAgICAgICAgICBNTE9BRAogIDgyMjk0NTAgICA4MyAgICAgICAgICAgICBEVVA0CiAgNTI0NzQ2MCAgIDYzICAgICAgICAgICAgUFVTSDQKICA0NzYxMjA2ICAgOTIgICAgICAgICAgICBTV0FQMwogIDQ1MDEzMDEgICA4NCAgICAgICAgICAgICBEVVA1CiAgNDM0NDIyMiAgIDE0ICAgICAgICAgICAgICAgRVEKICA0MzA5NTAxICAgMyAgICAgICAgICAgICAgIFNVQgogIDQyNDQ3MDQgICAxMCAgICAgICAgICAgICAgIExUCiAgMjkyMTM3NCAgIDczICAgICAgICAgICBQVVNIMjAKICAyNTIwNTg1ICAgODUgICAgICAgICAgICAgRFVQNgogIDIzMzY4MTcgICAxMSAgICAgICAgICAgICAgIEdUCiAgMjA3OTU3MiAgIDFiICAgICAgICAgICAgICBTSEwKICAyMDMwNzk1ICAgNTQgICAgICAgICAgICBTTE9BRAogIDE4OTk0ODcgICAyICAgICAgICAgICAgICAgTVVMCiAgMTg4Mjc1MiAgIDM1ICAgICBDQUxMREFUQUxPQUQKICAxODE4OTM4ICAgN2YgICAgICAgICAgIFBVU0gzMgogIDE3OTIwMDMgICA5MyAgICAgICAgICAgIFNXQVA0CiAgMTc3NDk5MSAgIDQgICAgICAgICAgICAgICBESVYKICAxNjI2OTc4ICAgOSAgICAgICAgICAgIE1VTE1PRAogIDE1NTUyMTIgICAyMCAgICAgICAgS0VDQ0FLMjU2CiAgMTQ5Mjk4NyAgIDg2ICAgICAgICAgICAgIERVUDcKICAxMDc3MTY0ICAgOCAgICAgICAgICAgIEFERE1PRAogIDEwMjcxNjcgICA4NyAgICAgICAgICAgICBEVVA4CiAgMTAwMDY4NCAgIDM2ICAgICBDQUxMREFUQVNJWkUKICAgOTM3MDU2ICAgOTQgICAgICAgICAgICBTV0FQNQogICA4ODA0OTIgICA4OCAgICAgICAgICAgICBEVVA5CiAgIDY5NjgyNCAgIDE5ICAgICAgICAgICAgICBOT1QKICAgNjQxOTk4ICAgNTUgICAgICAgICAgIFNTVE9SRQogICA2MDA0NjQgICBhICAgICAgICAgICAgICAgRVhQCiAgIDU3OTMzNSAgIDFjICAgICAgICAgICAgICBTSFIKICAgNTY2MTE3ICAgM2QgICBSRVRVUk5EQVRBU0laRQogICA1NjI1MTUgICAzMyAgICAgICAgICAgQ0FMTEVSCiAgIDUzODU2OSAgIDk1ICAgICAgICAgICAgU1dBUDYKICAgNTEyNzk0ICAgMTcgICAgICAgICAgICAgICBPUgogICA0OTIwMTkgICAzNCAgICAgICAgQ0FMTFZBTFVFCiAgIDQ2MTU0NSAgIDg5ICAgICAgICAgICAgRFVQMTAKICAgNDUyOTYxICAgNWEgICAgICAgICAgICAgIEdBUwogICAzODcxNDEgICBmMyAgICAgICAgICAgUkVUVVJOCiAgIDM3ODIwMSAgIDZkICAgICAgICAgICBQVVNIMTQKICAgMzQ1NjA4ICAgNjcgICAgICAgICAgICBQVVNIOAogICAzNDA5NjIgICA4YSAgICAgICAgICAgIERVUDExCiAgIDI5Mjg5OCAgIDNiICAgICAgRVhUQ09ERVNJWkUKICAgMjg3MzQ0ICAgOTYgICAgICAgICAgICBTV0FQNwogICAyNzY3NjcgICAxMiAgICAgICAgICAgICAgU0xUCiAgIDI2MjYzMSAgIDdjICAgICAgICAgICBQVVNIMjkKICAgMjE5OTQ5ICAgNjIgICAgICAgICAgICBQVVNIMwogICAyMTI5NDYgICA4YiAgICAgICAgICAgIERVUDEyCiAgIDIwNDQwMiAgIGYxICAgICAgICAgICAgIENBTEwKICAgMjAzNzk3ICAgMzcgICAgIENBTExEQVRBQ09QWQogICAxOTg3NDMgICAxYSAgICAgICAgICAgICBCWVRFCiAgIDE4ODk2NiAgIDk4ICAgICAgICAgICAgU1dBUDkKICAgMTg1OTA3ICAgOTcgICAgICAgICAgICBTV0FQOAogICAxNzkzMzAgICBmYSAgICAgICBTVEFUSUNDQUxMCiAgIDE3NDE0MiAgIGEzICAgICAgICAgICAgIExPRzMKICAgMTYwMDUzICAgN2IgICAgICAgICAgIFBVU0gyOAogICAxNTY5NzIgICA1MyAgICAgICAgICBNU1RPUkU4CiAgIDE0ODI3OCAgIDhjICAgICAgICAgICAgRFVQMTMKICAgMTQ0NjEzICAgNjQgICAgICAgICAgICBQVVNINQogICAxMzkzNTYgICAwICAgICAgICAgICAgICBTVE9QCiAgIDEzNDQ0MyAgIDMwICAgICAgICAgIEFERFJFU1MKICAgMTI1NjEyICAgOGQgICAgICAgICAgICBEVVAxNAogICAxMTgyMTcgICAxMyAgICAgICAgICAgICAgU0dUCiAgIDEwOTA1OCAgIDNlICAgUkVUVVJOREFUQUNPUFkKICAgMTA4NzIwICAgNmYgICAgICAgICAgIFBVU0gxNgogICAxMDE5NTkgICA2ZSAgICAgICAgICAgUFVTSDE1CiAgICA5NTE1MiAgIDM5ICAgICAgICAgQ09ERUNPUFkKICAgIDk0MDg4ICAgNDIgICAgICAgIFRJTUVTVEFNUAogICAgNzY1MDggICA5YSAgICAgICAgICAgU1dBUDExCiAgICA3NTE2NCAgIDk5ICAgICAgICAgICBTV0FQMTAKICAgIDY4MDYyICAgZjQgICAgIERFTEVHQVRFQ0FMTAogICAgNjEwODggICA2YiAgICAgICAgICAgUFVTSDEyCiAgICA1ODQ4OSAgIDhlICAgICAgICAgICAgRFVQMTUKICAgIDQyNTQ3ICAgNzAgICAgICAgICAgIFBVU0gxNwogICAgMzg5MTUgICBhMiAgICAgICAgICAgICBMT0cyCiAgICAzODg2OCAgIDYgICAgICAgICAgICAgICBNT0QKICAgIDM2ODk2ICAgYTEgICAgICAgICAgICAgTE9HMQogICAgMzM1MzQgICA4ZiAgICAgICAgICAgIERVUDE2CiAgICAzMDg1NyAgIDc0ICAgICAgICAgICBQVVNIMjEKICAgIDI2NzgyICAgN2UgICAgICAgICAgIFBVU0gzMQogICAgMjY1ODEgICAxOCAgICAgICAgICAgICAgWE9SCiAgICAyNTk4MCAgIDZjICAgICAgICAgICBQVVNIMTMKICAgIDI0ODEwICAgOWMgICAgICAgICAgIFNXQVAxMwogICAgMjQ0ODQgICA0MyAgICAgICAgICAgTlVNQkVSCiAgICAyMzQ0NiAgIGE0ICAgICAgICAgICAgIExPRzQKICAgIDIzMTI3ICAgYiAgICAgICAgU0lHTkVYVEVORAogICAgMTc4OTggICA2NSAgICAgICAgICAgIFBVU0g2CiAgICAxNzUwOCAgIDY4ICAgICAgICAgICAgUFVTSDkKICAgIDE1ODk3ICAgNDYgICAgICAgICAgQ0hBSU5JRAogICAgMTQxMTIgICA3OCAgICAgICAgICAgUFVTSDI1CiAgICAxMzY2MSAgIDliICAgICAgICAgICBTV0FQMTIKICAgIDExNzU0ICAgNTggICAgICAgICAgICBHRVRQQwogICAgMTEzMjIgICAzOCAgICAgICAgIENPREVTSVpFCiAgICAgODM5MiAgIDNmICAgICAgRVhUQ09ERUhBU0gKICAgICA3OTUyICAgNSAgICAgICAgICAgICAgU0RJVgogICAgIDYyMTUgICBmZCAgICAgICAgICAgUkVWRVJUCiAgICAgNjEyNCAgIDY5ICAgICAgICAgICBQVVNIMTAKICAgICA1OTY3ICAgZmYgICAgIFNFTEZERVNUUlVDVAogICAgIDU5NDUgICAzMSAgICAgICAgICBCQUxBTkNFCiAgICAgNDkxNiAgIDY2ICAgICAgICAgICAgUFVTSDcKICAgICA0NTk3ICAgOWQgICAgICAgICAgIFNXQVAxNAogICAgIDQwMDUgICA2YSAgICAgICAgICAgUFVTSDExCiAgICAgMzYwOCAgIDMyICAgICAgICAgICBPUklHSU4KICAgICAzNTg2ICAgM2EgICAgICAgICBHQVNQUklDRQogICAgIDI4MTMgICA3MiAgICAgICAgICAgUFVTSDE5CiAgICAgMjU4NiAgIDcgICAgICAgICAgICAgIFNNT0QKICAgICAyMzgwICAgMWQgICAgICAgICAgICAgIFNBUgogICAgIDE4OTUgICBmMCAgICAgICAgICAgQ1JFQVRFCiAgICAgMTgyOCAgIDc1ICAgICAgICAgICBQVVNIMjIKICAgICAxODI2ICAgNTkgICAgICAgICAgICBNU0laRQogICAgIDE4MDYgICA5ZSAgICAgICAgICAgU1dBUDE1CiAgICAgMTE3MyAgIGY1ICAgICAgICAgIENSRUFURTIKICAgICAxMTU3ICAgN2EgICAgICAgICAgIFBVU0gyNwogICAgICA5MzkgICA0NSAgICAgICAgIEdBU0xJTUlUCiAgICAgIDgzMiAgIDc5ICAgICAgICAgICBQVVNIMjYKICAgICAgNzQ0ICAgOWYgICAgICAgICAgIFNXQVAxNgogICAgICA2NTggICA3NiAgICAgICAgICAgUFVTSDIzCiAgICAgIDM1MCAgIDc3ICAgICAgICAgICBQVVNIMjQKICAgICAgMzI2ICAgNDEgICAgICAgICBDT0lOQkFTRQogICAgICAzMTggICA3MSAgICAgICAgICAgUFVTSDE4CiAgICAgIDIwNyAgIDQwICAgICAgICBCTE9DS0hBU0gKICAgICAgMTcyICAgN2QgICAgICAgICAgIFBVU0gzMAogICAgICAgMzMgICA0NCAgICAgICBESUZGSUNVTFRZCiAgICAgICAgICAgIGZlICAgICAgICAgIElOVkFMSUQKICAgICAgICAgICAgZmMgICAgICAgIFRYRVhFQ0dBUwogICAgICAgICAgICBmMiAgICAgICAgIENBTExDT0RFCiAgICAgICAgICAgIGUzICAgICAgICAgICAgU1NJWkUKICAgICAgICAgICAgZTIgICAgICBTU1RPUkVCWVRFUwogICAgICAgICAgICBlMSAgICAgICBTTE9BREJZVEVTCiAgICAgICAgICAgIGEwICAgICAgICAgICAgIExPRzAKICAgICAgICAgICAgM2MgICAgICBFWFRDT0RFQ09QWQo="
            }
        ]
    }
]