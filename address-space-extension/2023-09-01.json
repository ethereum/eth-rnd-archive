[
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah this is all a good reason to think carefully about how we do EOF, so we can be forward compatible with ASE or ASC",
        "created_at": "2023-09-01T05:47:24.225000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Moving conversation here from \u003c#745077610685661265\u003e.  I think if EOF is 32-byte addresses, then we should assume we'll have to maintain legacy address space forever.",
        "created_at": "2023-09-01T06:12:34.159000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah that's fine and actually not even that big an issue",
        "created_at": "2023-09-01T06:13:01.204000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "proxies: perhaps you'd have a `REGISTER_PROXY` opcode, and a `CALL_AS_PROXY` opcode.  `REGISTER_PROXY` would give you a sequentially assigned proxy address, eg. starting with 2**32, that you could control",
        "created_at": "2023-09-01T06:13:55.177000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The goal of these proxies being to allow 32-byte-address accounts a way to access old stuff",
        "created_at": "2023-09-01T06:14:09.620000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Back when I was involved in the ASE discussions, splitting the address space without two way communication was considered a non-starter.  If that is now acceptable due to ethos drift then I think it is the best option.",
        "created_at": "2023-09-01T06:14:18.178000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I do think it's improtant to think through the implications with counterfactual addrs, especially now that counterfactual addrs are going to be super important in a cross-L2 world",
        "created_at": "2023-09-01T06:15:29.701000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think you have to maintain the ability to continue to deploy legacy addresses.",
        "created_at": "2023-09-01T06:16:08.432000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The problem, of course, is that there is a very real risk that the community refuses to migrate away from USDC and WETH so you end up with the EOF world being empty and unused.",
        "created_at": "2023-09-01T06:16:50.496000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "right, and I'm not advocating taking that away",
        "created_at": "2023-09-01T06:24:11.690000+00:00",
        "attachments": []
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I believe USDC would be forced to migrate in fear of being left behind. They have the incentive to improve their UX. If they dont, people might start using WUSDC which is worse for them because it relinquishes their control over what addresses to block. \nI might be missing something but that is my understanding.\nAs for WETH, we can always redeploy WETH with a new address and have a function that automatically migrates eth balance from the old to the new address once the contract is apporved to spend.",
        "created_at": "2023-09-01T12:36:08.745000+00:00",
        "attachments": []
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It feels like we are having a discussion about applications that only run on Windows XP but we still have to support them in Windows 11 at the cost of windows 11 being super slow and dated. Might not be a good analogy but thats what i came up with :p",
        "created_at": "2023-09-01T12:38:09.143000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is unclear if USDC follows the community, or if the community follows USDC.",
        "created_at": "2023-09-01T13:33:43.129000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I tend to agree that if the community moves first, USDC will follow, though I don't think for the reason you described.  I am not sure the community will be first mover though.",
        "created_at": "2023-09-01T13:34:17.879000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also \"USDC\" here really means a hand wavy set of highly used tokens/contracts.",
        "created_at": "2023-09-01T13:34:33.805000+00:00",
        "attachments": []
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "True, but we can't keep pushing the can down the road and wait for it explode in our faces.\nif the community understands the risk of sticking around with an obsolete addressing scheme, they will definitely move.",
        "created_at": "2023-09-01T16:26:53.681000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not convinced that they will definitely move in that context.",
        "created_at": "2023-09-01T17:44:13.101000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "How many big-name contracts are on upgradable proxies?  And how many are unupgradeable?",
        "created_at": "2023-09-01T19:04:04.301000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also UniswapV3 and Avee V3 show that contracts will migrate to entirely new addresses. But those were for internally motivated reasons, it remains to be seen what appetites are for externally imposed changes like address expansion.  Could go either way.",
        "created_at": "2023-09-01T19:04:36.339000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wherever this lands, it does seem reasonable to have EOF no longer perform address-stripping for the relevant opcodes, but it would be wasted effort if address space expansion never occurs.",
        "created_at": "2023-09-01T19:06:20.753000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "20 bytes proxies won't be able to upgrade to point to a 32 byte implementation, so I think upgradable contracts doesn't help here.",
        "created_at": "2023-09-01T23:38:40.961000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The upgrade isn't for the address.  It's for the storage, removing the 20 byte stripping on transfer and such, for contracts that have that.",
        "created_at": "2023-09-01T23:43:43.873000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But upgrade proxies are a separate and equally problematic issue",
        "created_at": "2023-09-01T23:44:22.832000+00:00",
        "attachments": []
    }
]