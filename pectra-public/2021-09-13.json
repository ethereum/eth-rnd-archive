[
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I would prefer to enable optimal clients to be built using the stock API, and not have to resort to a custom API.",
        "created_at": "2021-09-13T01:33:13.350000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "IMO, it is worth the extra effort to include an estimate mostly because it is so simple and it uses information that the consensus client already has.",
        "created_at": "2021-09-13T01:33:57.160000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The execution engine can ignore it, and a navie consensus client implementation can just do `slot_timestamp - now` for the value.",
        "created_at": "2021-09-13T01:34:41.856000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So complexity increase should be incredibly minimal to include the duration.",
        "created_at": "2021-09-13T01:34:58.398000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess the key thing I'm questioning is whether we actually know what an optimal client needs or if we're just guessing/theorizing?  I'm not against giving an expected time the block will be needed, but that seems very different to the discussion around including tolerance for round trip etc.",
        "created_at": "2021-09-13T01:36:05.234000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We can assert that if you know you have 2 seconds, then it is a waste of time to build an empty block first.  Whether execution clients will actually implement that optimization or not is certainly an open question.",
        "created_at": "2021-09-13T01:37:54.112000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I definitely acknowledge that this duration may not end up being leveraged by execution clients.",
        "created_at": "2021-09-13T01:38:25.744000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So I think it makes sense to include the timestamp of the start of the slot the block will be used for (which is when creation is due). That's simple and well defined, and could easily be used to create at timeout for when to stop trying to create a block. Beyond that it seems like we should wait and see what the optimisations engines actually need to implement are and what info they need.  Adding fields is quite straight forward (we should explicitly state that unrecognised fields are ignored to ensure we can do this btw).",
        "created_at": "2021-09-13T01:41:42.978000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think I can get on board with waiting if we ensure that adding fields is backward compatible.",
        "created_at": "2021-09-13T01:48:38.823000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We already have `block.timestamp` being sent, which I think can be used as a low quality proxy for when the `get` will be called.",
        "created_at": "2021-09-13T01:49:43.426000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Building empty block is very cheap and can be done in parallel. It can be cheaply built on demand. Also its always good to have a backup.",
        "created_at": "2021-09-13T09:09:59.405000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I was thinking about the use cases where the `coinbase` set by execution clients either optimal or necessary. The following comes to my mind:\n- Decentralized pools. Node operator sets the `coinbase` to the address that it owns and pays the share to the validator owner by sending a regular value transfer tx to the address supplied by validator in the `preparePayload` call (https://hackmd.io/@n0ble/consensus_api_design_space#Minimal-set-of-methods)\n- Block builders. Very similar flow to operators of decentralized pools\n\nI would suggest we rename `coinbase` parameter in the `preparePayload` to anything else to avoid semantical clash for the cases when effectively the payload's `coinbase` isn't set to the value provided by validator.\n\ncc \u003c@!301186049323958275\u003e \u003c@!144468805697929216\u003e \u003c@!385978868131168259\u003e \u003c@!784446040073175040\u003e",
        "created_at": "2021-09-13T09:37:53.282000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I favor `transactionFeeRecipient` for maximum clarity.",
        "created_at": "2021-09-13T09:39:22.637000+00:00",
        "attachments": null
    },
    {
        "author": "joshuaisbuilding",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Am I right in thinking the merge will *slightly* reduce average transaction fees for users if network usage is equal? (because we pay less to validators than miners)",
        "created_at": "2021-09-13T10:13:55.093000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e because we pay less to validators than miners\nThere is no strong relation between amount of rewards paid to validators/miners for doing their consensus duties and fees paid by users to block proposers to get their transactions included. So, transaction fees are not gonna be affected by the change in consensus rewards.",
        "created_at": "2021-09-13T10:20:53.896000+00:00",
        "attachments": null
    },
    {
        "author": "thegostep",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "‚ÄúfeeRecipient‚Äù or ‚Äúproposer‚Äù are both reasonable to me",
        "created_at": "2021-09-13T10:25:49.326000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "After the merge could we declare the zero `ExecutionPayload` to mean the empty block and  thus clients that lose a connection with their execution engine can still propose successfully?",
        "created_at": "2021-09-13T11:06:02.061000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think `proposer` is incorrect.  The person receiving the fees may not be the proposer.",
        "created_at": "2021-09-13T12:44:26.074000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cralexstokes\u003e i‚Äôm not sure its the worst semantic clash imo but even just looking at the spec:\n\u003e coinbase: Bytes20  # 'beneficiary' in the yellow paper\ncan just call it beneficiary in the engine API, feeRecipient works the same imo",
        "created_at": "2021-09-13T13:28:20.336000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Agree on the rename, and I think \u003c@301186049323958275\u003e is on the right track - I'd suggest something like `priorityFeeAddress`  with the appropriate clarifications in the help text of execution clients",
        "created_at": "2021-09-13T13:45:22.158000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I like `feeRecipient` as well",
        "created_at": "2021-09-13T14:04:17.247000+00:00",
        "attachments": null
    },
    {
        "author": "thegostep",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But the address defined in preparePayload is not necessarily the one receiving the fees (if for example the block builder sets his own address as coinbase)",
        "created_at": "2021-09-13T14:23:21.751000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah, I see.  I was thinking about the field in the block should be called `feeRecipientAddress`,  Maybe `suggestedFeeRecipient`?",
        "created_at": "2021-09-13T14:24:19.006000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It may not be the proposer.  The proposer may have sold rights to fees for a block and is passing along the counterparty in that deal.",
        "created_at": "2021-09-13T14:24:38.040000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "excuse me if this has been asked ad nauseaum but are the proceeds from opensea NFTs for 'when-merge' really going to researchers and developers?",
        "created_at": "2021-09-13T14:40:03.612000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://twitter.com/dannyryan/status/1432824068831539201 , but this probably belongs more in \u003c#595721451651465227\u003e . Can ask Danny for more details there I guess (or on Twitter)",
        "created_at": "2021-09-13T15:08:39.435000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "FYI, I've updated `preparePayload` + `getPayload` description in the design space doc https://hackmd.io/@n0ble/consensus_api_design_space#Minimal-set-of-methods",
        "created_at": "2021-09-13T15:33:55.399000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Actually, ethereum address that is send in `preparePayload` is validator's ethereum account address and its semantics depends on the case. It may be set as a `coinbase` or used by block builder to share priority fees or send a bribe",
        "created_at": "2021-09-13T15:35:43.323000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e can just call it beneficiary in the engine API\nThis name fits well but probably too abstract",
        "created_at": "2021-09-13T15:37:15.395000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Perhaps a dumb question because my brain is fried after catching up on 1 week of conversation here, but it's been mentioned a few times that there is no \"hard fork block\" for the merge on the execution layer side. I understand the transition to PoS happens after reaching TTD, but when will EVM opcodes (e.g. DIFFICULTY) update their behavior to the post-merge one? Can current execution clients use anything aside from a block number to do this?",
        "created_at": "2021-09-13T22:51:45.149000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "EIP-3675 says \"Beginning with TRANSITION_BLOCK\", so does that just mean that any block produced by a PoW miner follows the pre-3675 rules and any blocks produced by a validator follow the 3675 rules?",
        "created_at": "2021-09-13T22:54:27.048000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I still think that if a builder is added, it is 1. at another layer beyond the validators execution engine and 2. That a builder would naturally pay the requested coinbase and collect fees via other means as it is generically the simplest way for a proposer to assess value of block",
        "created_at": "2021-09-13T23:01:19.423000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And in a decentralized pool, the node operator will control both the beacon node and execution engine if they are producing the block for their pool",
        "created_at": "2021-09-13T23:02:48.172000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That would make sense, I think",
        "created_at": "2021-09-13T23:02:48.441000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So in that case, their beacon node would tell their execution engine the coinbase to set",
        "created_at": "2021-09-13T23:03:08.721000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So i still dont see a good reason for an execution engine to not listen when the coinbase is set via this api and thus tbat it should be named coinbase and that it shouldnt be able to be overridden in a correct impl of the api",
        "created_at": "2021-09-13T23:04:22.140000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes",
        "created_at": "2021-09-13T23:05:16.273000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ok thanks! Wanted to make sure I got that right üòÖ",
        "created_at": "2021-09-13T23:06:30.952000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Im a validator, I'm running a beacon node. I talk to an execution engine for that portion of my block. I either control that execution engine or not (proof of custody would make it so I must). \n\nI ask it for a valuable block  from my execution engine and I say, pay the proceeds to this address. In either case --trusted or external provider -- if the coinbase is overridden, I have no standard way to assess the block contents provided. Same if there is some builder separation\n\nUnless i pass some other address -- pay this address if you dont pay the coinbase. Which seems like a huge complication for zero gain\n\nOr maybe even I'm being paid out of band by my ee provider instead of to my coinbase. In such a case, I just wouldnt provide a coinbase in the call at all and instead default to whatever the EE inserts. **\n\nIt either seems, I want my coinbase filled by this thing Im interacting with. Or I want it to figure it out on its own. So I either set it or I dont. I still cant think of a case where setting it and allowing a valid response to have overridden the coinbase provides value to this api\n\n**note, this ee external provider example is just for illustrative purposes. For the security of the protocol, I still hold that a proof of custody on the ee should be added",
        "created_at": "2021-09-13T23:20:25.816000+00:00",
        "attachments": null
    }
]