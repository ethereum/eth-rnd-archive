[
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "QQ to the other EL teams: Are you guys checking the timestamp on historical blocks?\nRight now we check that an incoming block (via engine api) has a timestamp close to the current time and not older than the parent timestamp.\nI've just added this check to the historical blocks as well. I'm sure that this is not really needed (if we trust that the majority of the network checks the timestamp).\nWould like to know how other EL's are handling this, also if the CL's are checking the timestamp in the Payload as well (if it is current and \u003e than parent timestamp)",
        "created_at": "2021-12-27T16:08:09.862000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "In Erigon we verify that incoming block's timestamp is greater than parent's timestamp, but we don't check that it's close to the current time.",
        "created_at": "2021-12-27T17:13:37.095000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "That's for PoS headers from the CL.",
        "created_at": "2021-12-27T17:14:39.628000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Sorry what I meant with current is, that it is not in the future (more than 1 second) according to our local time",
        "created_at": "2021-12-27T17:14:50.016000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "Currently we don't have this no-future check for incoming beacon headers, only \u003e parent time check.",
        "created_at": "2021-12-27T17:16:38.365000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "timestamp is `\u003e`, not `\u003e=`, parent timestamp right?",
        "created_at": "2021-12-27T19:44:26.400000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think your behavior of making sure the block isn't in the future is good too.  It prevents miners from futzing with difficulty.",
        "created_at": "2021-12-27T19:44:54.288000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I wouldn't even give the 1 second leeway personally, but I get why you are doing that.",
        "created_at": "2021-12-27T19:45:21.897000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "As for post merge, does the EL need to check at all?  Timestamp is in the domain of the CL, so I don't think it is necessary for the EL to check it.  The EL doesn't have the context to know what the timestamp *should* be.",
        "created_at": "2021-12-27T19:46:32.784000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "general",
        "parent": "",
        "content": "FWIW, the consensus spec tolerates a 500ms clock disparity. So, generally, a message that‚Äôs 0.5s early/late won‚Äôt cause peer down-scoring and will likely be imported.",
        "created_at": "2021-12-27T21:53:24.834000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Gossip tolerates the clock disparity",
        "created_at": "2021-12-27T22:11:03.210000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e The fork choice should queue until actual local time",
        "created_at": "2021-12-27T22:11:15.568000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "general",
        "parent": "",
        "content": "Oh you‚Äôre right, we have a queuing thing for that.",
        "created_at": "2021-12-27T22:12:39.916000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e üëç",
        "created_at": "2021-12-27T22:13:52.297000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "We have the queuing in other consensus algorithms too (clique/ethahs)",
        "created_at": "2021-12-27T22:17:54.989000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e For those reading, the allowable clock disparity in gossip helps grease the p2p network given inevitable honest clock drifts. But then the queue that only imporrs at actual local time  makes the p2p gossip allowance not gamable",
        "created_at": "2021-12-27T22:31:24.756000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Attempts to, at least. Clocks are difficult",
        "created_at": "2021-12-27T22:31:50.540000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "\u003c@\u0026595685821026271242\u003e plssss",
        "created_at": "2021-12-27T23:10:52.122000+00:00",
        "attachments": null
    }
]