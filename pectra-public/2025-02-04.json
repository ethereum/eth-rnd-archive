[
    {
        "author": "holdensd",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hello! I'm trying to deploy a smart contract for testing EIP-7002 but I can't. Any suggestions please? many thanks!",
        "created_at": "2025-02-04T09:09:08.857000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What are you trying to do?",
        "created_at": "2025-02-04T09:38:45.913000+00:00",
        "attachments": null
    },
    {
        "author": "holdensd",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Just a final validation of the smart contract. Just want to deploy it, create a few validators with the withdrawal credentials pointing to that SC and, after that, trigger the exits",
        "created_at": "2025-02-04T09:41:28.437000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The contract already exists in pectra-devnet-6, so feel free to use it: https://pectra-devnet-6.ethpandaops.io/",
        "created_at": "2025-02-04T10:03:21.407000+00:00",
        "attachments": null
    },
    {
        "author": "holdensd",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "great! many thanks!",
        "created_at": "2025-02-04T10:04:05.673000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Apologies because I'm sure I've seen the link before, but please could someone point me to the source code for the contract that supports EIP-7002 (`0x00000961Ef480Eb55e80D19ad83579A64c007002`)?\n\n(And lower priority, but it would be nice if the deployment process for devnets added the contract source to the explorers.)",
        "created_at": "2025-02-04T13:54:09.236000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/lightclient/sys-asm",
        "created_at": "2025-02-04T14:00:44.510000+00:00",
        "attachments": null
    },
    {
        "author": "remyroy",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's in here:\n- \u003chttps://github.com/lightclient/sys-asm/tree/main/src/withdrawals\u003e\n- \u003chttps://eips.ethereum.org/EIPS/eip-7002\u003e\n\nDeployment is in here:\n- \u003chttps://github.com/ethpandaops/ethereum-genesis-generator/blob/master/apps/el-gen/genesis_geth.py#L113\u003e\n\nThere are a few app implementations around and we've been working on some if you need help with calling it.\n\n- Dora: \u003chttps://github.com/ethpandaops/dora/blob/f844d0371e8f81b04982e0916112a3c87907dbf1/ui-package/src/components/SubmitWithdrawalsForm/WithdrawalReview.tsx#L296\u003e\n- WIP Launchpad update: \u003chttps://github.com/ethereum/staking-launchpad/blob/pectra/src/pages/Actions/components/PartialWithdraw.tsx#L81\u003e\n\nThe important parts are:\n\n\u003e Withdrawal Request Contract\n\u003e The contract has three different code paths, which can be summarized at a high level as follows:\n\u003e \n\u003e 1. Add withdrawal request - requires a 56 byte input, the validatorâ€™s public key concatenated with a big-endian uint64 amount value.\n\u003e 2. Fee getter - if the input length is zero, return the current fee required to add a withdrawal request.\n\u003e 3. System process - if called by system address, pop off the withdrawal requests for the current block from the queue.",
        "created_at": "2025-02-04T14:03:20.735000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e And lower priority, but it would be nice if the deployment process for devnets added the contract source to the explorers\nThere is no higher level source code ðŸ˜„ so nothing to verify in explorers",
        "created_at": "2025-02-04T14:03:26.635000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "From the looks of things `amount` in EIP-7002 is a gwei amount, as opposed to a wei amount.  This information isn't present in the EIP, but am I correct in this assumption?",
        "created_at": "2025-02-04T14:53:13.033000+00:00",
        "attachments": null
    },
    {
        "author": "remyroy",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We use `amount * 1000000000` where amount is in ETH so it would mean the amount is in gwei.",
        "created_at": "2025-02-04T14:54:46.405000+00:00",
        "attachments": null
    },
    {
        "author": "remyroy",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Trial and error discovery for me ðŸ˜„",
        "created_at": "2025-02-04T14:55:40.442000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(Too late to change, I'm sure, but using the amount `0`  for exiting the validator seems to be a poor choice; I'm sure that it would be relatively easy to accidentally create a withdrawal request with this value (I've already managed it ðŸ¤£ ).  I'll put guards in `ethereal` to avoid this, but I can see many people slipping up here.)",
        "created_at": "2025-02-04T14:56:40.852000+00:00",
        "attachments": null
    },
    {
        "author": "builder_benny",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Dedaub audit seems to have it in wei (unless I am misreading table) - see p. 4 https://github.com/ethereum/audits/blob/master/Pectra/Dedaub%20-%20EIP7002.pdf",
        "created_at": "2025-02-04T16:09:51.445000+00:00",
        "attachments": null
    },
    {
        "author": "builder_benny",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "unrelated question, and possibly dumb, but is it intended that you can activate a validator with 0x02 creds? [the least elegant way to do this would be to manually change the beginning from 01 to 02 in the deposit file...but maybe I am missing something)",
        "created_at": "2025-02-04T16:13:14.935000+00:00",
        "attachments": null
    },
    {
        "author": "builder_benny",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "one more question - hoping someone can confirm - for active validations, you cannot consolidate two 0x01 validators - is that correct? \n\nIt is intended that you first obtain 0x02 credentials for the target validator and then you can consolidate other validators (including 0x01) into that 0x02 - is that correct?",
        "created_at": "2025-02-04T16:14:42.162000+00:00",
        "attachments": null
    },
    {
        "author": "remyroy",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You can deposit for a new validator with `0x02` withdrawal credentials, yes.",
        "created_at": "2025-02-04T16:16:41.708000+00:00",
        "attachments": null
    },
    {
        "author": "remyroy",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is correct. You can upgrade a `0x01` in-place to a `0x02` with the consolidation request using source==target or you can do a consolidation request only if the target is a `0x02` and the source is either a `0x01` or a `0x02`.",
        "created_at": "2025-02-04T16:18:11.648000+00:00",
        "attachments": null
    },
    {
        "author": "builder_benny",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thank you! Very much appreciated!",
        "created_at": "2025-02-04T16:18:32.776000+00:00",
        "attachments": null
    },
    {
        "author": "yash99",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why is the `state_root` when querying the beacon state object API on mekong `0x00000....` Is there an issue? \n\nMaking the following call: \n\n```\ncurl -v -X GET 'https://beacon.mekong.ethpandaops.io:443/eth/v2/debug/beacon/states/654720' \\\n-H 'accept: application/json' \\\n--output beacon_654720.json\n```",
        "created_at": "2025-02-04T16:38:25.199000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That's expected. You can't have the current state root within the state ðŸ˜‰",
        "created_at": "2025-02-04T16:56:47.671000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Am I correct in thinking that the withdrawal contract only takes a single withdrawal?  So if someone wants to send multiple withdrawals we're going to have to write a separate batch contract?",
        "created_at": "2025-02-04T19:08:03.157000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "batch contracts won't work as the sender of the request needs to be the withdrawal address.\nyou could do batching with 7702 tho..",
        "created_at": "2025-02-04T19:11:33.325000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but yea,  each call to the system contract includes one withdrawal request only",
        "created_at": "2025-02-04T19:12:03.075000+00:00",
        "attachments": null
    },
    {
        "author": "0x0e19",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "good day \u003c@808969530608451584\u003e",
        "created_at": "2025-02-04T19:13:08.116000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "At ~85k gas per tx that's not cheap, but okay.  I haven't played with 7702 so may take a look.",
        "created_at": "2025-02-04T19:13:16.292000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "gas usage is also not easily predictable ðŸ˜…  \nfirst request in each block is more expensive than the rest",
        "created_at": "2025-02-04T19:15:26.431000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Gas estimation should always give the more expensive option, so that's \"good\" in that the tx is less likely to revert from being out of gas.",
        "created_at": "2025-02-04T19:17:20.655000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeaa, unfortunately the gas estimation knows about previous transactions when trying to do batches. \nso the estimation for subsequent transactions is lower, which might not work if part of the batch slips into the next block ðŸ˜… \nI've ended up setting a static gas limit for requests submitted through dora..\n\u003c@710132892197453824\u003e also spent a lot time with batching multiple requests, he might have another solution",
        "created_at": "2025-02-04T19:20:47.521000+00:00",
        "attachments": null
    }
]