[
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just DM'ed Danny and Mikhail about this, but asking here before I make a PR to EIP-3675: does anyone have a good reason to remove extraData in the merge? I think it would be useful to keep as it will be the default ways clients/block producers can be identified on chain. This is useful for things like client diversity analysis, and for trying to figure out who is on a minority fork when they are producing bad blocks, like I did last Friday üòÖ  \n\nThe second use case is not exactly the same post-merge given you also have the consensus-layer info, but I'm inclined towards keeping `extraData` too (and, ofc, having it be modifiable like it currently is).",
        "created_at": "2021-09-01T01:53:51.005000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cdannyryan\u003e I dont see a good reason to remove the option of filling data there. Good for opt in identification of that layer and leaves open the door for any number of alternative use cases",
        "created_at": "2021-09-01T01:56:20.068000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cdannyryan\u003e So +1 on modding the eip to continue support  for arbitrary data in executionlayer extradata",
        "created_at": "2021-09-01T01:56:50.203000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e This is useful for things like client diversity analysis, and for trying to figure out who is on a minority fork when they are producing bad blocks\nThis is a good argument for me in favour of keeping `extraData` as is post-Merge",
        "created_at": "2021-09-01T02:17:08.047000+00:00",
        "attachments": null
    },
    {
        "author": "chris2_2_2",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We use it to keep track (easily) on etherscan as to which node is producing a block. Its also nice for sending public messages on-chain and I could see it being used for statements/messaging in the future.",
        "created_at": "2021-09-01T04:29:53.081000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We will likely use a field of fixed length in the `ExecutionPayload` structure, i.e. `extraData: Bytes32`. But this field has an arbitrary length (up to 32 bytes) in the execution layer and on the beacon chain it will be appended by zeros if the length is less than 32 bytes. This approach has an edge case when `extraData` has trailing zeros which are not recognizable by the consensus layer and passing an invalid payload to the execution layer.\n\nThere are two options that I can see. 1) We use `Bytes32` and do not care about this edge case 2) We use `ByteList[32]` and accept the complexity (if there is any) of a dynamic type, it also saves us a little space in a block\n\ncc \u003c@!203220829473996800\u003e \u003c@!291925846556540928\u003e \u003c@!552133098075193354\u003e",
        "created_at": "2021-09-01T07:19:38.842000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why use a fixed length field instead of a byte array?",
        "created_at": "2021-09-01T09:03:35.261000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is, what is the complexity introduced in the consensus layer?",
        "created_at": "2021-09-01T09:04:18.123000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There *might* be a bit of extra complexity around estimating the size of the payload due to parsing SSZ prefixes is a bit harder with the dynamic size fields. I don't know for sure, just wondering to know. `ExecutionPayloadHeader` is of a fixed size now and it will be of a dynamic size if we add `extraData: ByteList[32]`.",
        "created_at": "2021-09-01T09:42:25.241000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There is a minimal extra overhead in deserializing a variable size header, but it should be completely negligible. If anything the most impact could be in hashing when the 32 bytes are used, cause in this case you would need to use 2 chunks instead of 1 due to the added bit length. This will involve an actual call to the hashing algorithm instead of just returning the data as-is as it would be in the fixed sized situation or if the length was less than 32 bytes.",
        "created_at": "2021-09-01T10:25:05.511000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e if the length was less than 32 bytes.\nmaybe if the length was *less or equal to* 32 bytes?",
        "created_at": "2021-09-01T10:26:39.317000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "argh take the whole thing back, you're talking about byte lists not bitlists.. there's no issue of an extra byte being added  here",
        "created_at": "2021-09-01T10:32:36.014000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but always",
        "created_at": "2021-09-01T10:33:51.853000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "since you will be mixing the length",
        "created_at": "2021-09-01T10:34:01.170000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so I suspect the main advantage of having it fixed would be to just avoid 1 call to the hashing algo",
        "created_at": "2021-09-01T10:35:28.872000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, the only piece of the header that is dynamic size is the extraData?",
        "created_at": "2021-09-01T10:49:53.313000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yes, it will be the case if we add it as dynamic field",
        "created_at": "2021-09-01T11:07:36.523000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is a pretty compelling argument to me to keep it fixed.",
        "created_at": "2021-09-01T11:08:09.775000+00:00",
        "attachments": null
    },
    {
        "author": "ethlost",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sorry, don't want to spam here, but one question: In the upcoming merge fork, there will only be the consensus protocol change (PoS) implemented and ETH withdrawal functionality will be added in a later fork, right?",
        "created_at": "2021-09-01T11:23:17.537000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right, this is how the roadmap does look like",
        "created_at": "2021-09-01T11:27:46.891000+00:00",
        "attachments": null
    },
    {
        "author": "ethlost",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ok great thank you üëç",
        "created_at": "2021-09-01T11:31:55.281000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've submitted a PR with the change to how the `random` field value is seeded. https://github.com/ethereum/consensus-specs/pull/2581\nAny feedback on that is very much appreciated. This PR went out of the recent discussion related to proposer/builder and the requirement to set `random` value to the `randao_mix` computed with the reveal of the *previous* block",
        "created_at": "2021-09-01T13:51:17.863000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've been out of office so am just catching up but RE: `latest` being an alias to `safe`, will `eth_blockNumber` report this `safe` block number?  My vote would be `safe` since lots of current dapps seem to use `eth_blockNumber` as a \"cheap\" means to see if `latest` has changed.  Anecdotally most apps that take this approach don't seem to be too reorg resilient so IMO that's another reason to default to `safe`.",
        "created_at": "2021-09-01T17:44:17.882000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think pretty much everything should default to safe, and only make unsafe available to people who explicitly ask for it.",
        "created_at": "2021-09-01T18:39:37.662000+00:00",
        "attachments": null
    }
]