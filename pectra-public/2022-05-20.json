[
    {
        "author": "mysticryuujin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sorry if this is the wrong place to ask but... I'm looking for some guidance from an \"RPC provider\" perspective.\n\nThe Engine API Specification states:\n\u003e The Engine API supports a one-to-many Consensus Layer to Execution Layer configuration. Intuitively this is because the Consensus Layer drives the Execution Layer and thus can drive many of them independently.\n\nSo does this mean that it is theoretically possible to support multiple EL nodes from a single CL node? And is it actually supported in practice by any of the CL implementations? Or is the expectation that every EL client has a 1:1 mapping with a CL client? From a non-validating/non-staking perspective that seems like a lot of extra overhead if so.",
        "created_at": "2022-05-20T00:06:40.634000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cdannyryan\u003e You'd likely need to multiplex the calls. I don't think a CL currently allows listing multiple endpoints but multiplexing the calls especially if you are not validating should work",
        "created_at": "2022-05-20T01:57:40.875000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You also need to decide on the right policy to apply when you get different responses from different ELs. There are a range of suitable answers depending on what you want to do.",
        "created_at": "2022-05-20T02:50:33.559000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Lighthouse currently supports multiple ELs, however we’re going to remove it since the complexity doesn’t seem worth it. IMO it’s better served by a specialised proxy which would be client agnostic and keep the complexity out of the core implementations (eg Lighthouse). \n\nThere’s no scenario where an EL is shared between multiple CLs. The current design doesn’t support it.",
        "created_at": "2022-05-20T02:54:11.913000+00:00",
        "attachments": null
    },
    {
        "author": "mysticryuujin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But an EL node needs a CL node just to sync the chain, no? And a CL that isn't participating in consensus and is only gossiping (or whatever the terminology is) should be able to provide the consensus data required to any number of EL nodes?\n\nIt just means that for every EL node we spin up to support the demand for RPC we also have to spin up a dedicated beacon chain node. It is what it is I guess.",
        "created_at": "2022-05-20T03:03:30.983000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes in theory, but the EL *also* provides vital information back to the CL about the validity of the block (and deposits etc).  So when you move to having multiple ELs you open up a lot of policy questions about which response to use.  That adds a surprising amount of complexity - especially when you then mix in block proposer separation. So it makes more sense to build that functionality once as middle-ware that can then work with any CL/EL rather than building it into every CL.",
        "created_at": "2022-05-20T03:05:47.148000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/karalabe/minority is one such piece of middleware.",
        "created_at": "2022-05-20T03:06:21.358000+00:00",
        "attachments": null
    },
    {
        "author": "mysticryuujin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks everyone. Very helpful information.",
        "created_at": "2022-05-20T03:21:36.416000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Still don't quite get what you mean. If I have to guess a little as what you want to say, slot2 will just be empty on the canonical chain. Not just the eth1 data part.\n( https://github.com/ethereum/consensus-specs/blob/v1.1.1/specs/merge/beacon-chain.md#process_execution_payload , the assertions in  `if is_merge_complete(state):` )",
        "created_at": "2022-05-20T07:04:22.103000+00:00",
        "attachments": null
    },
    {
        "author": "asd9819",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What are the remaining Testnets before Merge? I mean names",
        "created_at": "2022-05-20T10:01:49.984000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ropsten, goerli, sepolia",
        "created_at": "2022-05-20T10:03:21.092000+00:00",
        "attachments": null
    },
    {
        "author": "asd9819",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "estimated time for each?",
        "created_at": "2022-05-20T10:11:40.801000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ropsten June 8th.  Rest undefined.",
        "created_at": "2022-05-20T10:12:13.408000+00:00",
        "attachments": null
    },
    {
        "author": "asd9819",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thank you!",
        "created_at": "2022-05-20T10:12:52.377000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "One thing about minority, it was put together as a proof of concept and afaik Peter has no desire to maintain it. Forking that thing and documenting as well as fully supporting it with binary and docker releases would be amazing",
        "created_at": "2022-05-20T10:28:33.903000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Someone from had shared this in the ethstaker discord a while back, it also allows for one CL to pilot multiple ELs. https://github.com/TennisBowling/executionbackup\n\nEssentially you'd need a loadbalancer that allows the forkchoiceupdate(fcu) messages move from the EL to the CL, but throws away the responses from all but 1 EL (to avoid confusing the CL). This could be a useful setup for the RPC example, since the info the EL needs for syncing is mainly the fcu's - Once its in sync, nothing changes about the RPC behaviour.",
        "created_at": "2022-05-20T12:41:36.315000+00:00",
        "attachments": null
    },
    {
        "author": "wwz0668",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why there is no assertion for  `block_number`  in the latest  code of  `if is_merge_complete(state)`  ? https://github.com/ethereum/consensus-specs/blob/dev/specs/bellatrix/beacon-chain.md#process_execution_payload\nHow can we ensure the continuity here if there is not block_height assertion?",
        "created_at": "2022-05-20T18:17:57.424000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If I understand the question rightly, continuity is assured by the chain of block hashes: each block points to its parent block via its block hash. That check is done there.",
        "created_at": "2022-05-20T18:25:55.161000+00:00",
        "attachments": null
    },
    {
        "author": "wwz0668",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Then it's back to my original question for reorg again. Use the simple example in this post (https://ethereum.stackexchange.com/questions/116738/how-can-there-be-a-fork-if-only-one-validator-is-allowed-to-propose-a-block-per).\nslot2 and slot3 have the same parent slot (slot1),  and both have already proposed/generated an execution (eth1) block, which means an reorg is happening. Then how will the underlying eth1 blocks of slot2 and slot3 be like?\nSince there is no `block_height` assertion in `process_execution_payload`,  will these two eth1 blocks still have the same `block_height`? and one of them will marked as `forked block` eventaully?",
        "created_at": "2022-05-20T19:16:01.326000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes and yes. (We usually call such a \"forked block\" orphaned. Anyway, it doesn't appear in the final canonical chain.)",
        "created_at": "2022-05-20T19:49:32.984000+00:00",
        "attachments": null
    },
    {
        "author": "wwz0668",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks! just curious, any specific reason of removing the `block_height` assertion? it's was there in `tag=v1.1.1`",
        "created_at": "2022-05-20T20:31:53.123000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "the EL will verify the block number relation",
        "created_at": "2022-05-20T20:55:03.287000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "and like benjaminion is saying we just need to check that the EL block hashes form a chain, then anything they commit to in a valid chain is also valid",
        "created_at": "2022-05-20T20:56:14.639000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "the only stuff we verify on the CL side is the stuff the EL has no way to know -- like the randao and the timestamp; otherwise it is up to the EL to determine the validity of the `ExecutionPayload`",
        "created_at": "2022-05-20T20:57:13.704000+00:00",
        "attachments": null
    }
]