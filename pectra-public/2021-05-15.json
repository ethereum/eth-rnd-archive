[
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I always assumed this would be the case, and kind of was drawn into rayonism to read the spec of the merge... To my surprise the lack of such rule was not just an implementation lacune",
        "created_at": "2021-05-15T00:12:51.785000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess the problem I see is that it would significantly increase the testing complexity just for one very extreme case (an active 51% attack in the final hours of the PoW chain)",
        "created_at": "2021-05-15T00:14:14.465000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But maybe I am wrong and adding non-revertable blocks is actually not that hard!",
        "created_at": "2021-05-15T00:14:29.733000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ok I can see that. Probably implementing it is not so bad, but it's true that it may add lots of test vectors",
        "created_at": "2021-05-15T00:18:07.194000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Would it be easier to just use the bad block functionality most/all clients support to manually ban a late appearing fork if it appears?\nThat would require social consensus and obviously take longer to put into effect so the real question is whether the impacts of such a fork would kick in too quickly and be too hard to resolve later.",
        "created_at": "2021-05-15T00:23:37.069000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Once execution engine support is deployed and it starts listen to `finalizeBlock` events that are coming from consensus side it might be possible to use this message to propagate eth1 data voting results and run according logic to finalized corresponding block on the PoW chain. This logic needs additional flag in a block tree and new re-org rule that prunes all side chains starting beyond recent finalized block. It doesn't sound too complicated but might be difficult to implement depending on the client design.\n\nThe problem with eth1 data poll is in its follow distance and voting period size which makes this finality delay almost impractical. It requires new eth1 data poll algorithm to do this which sounds complicated potentially delays overall progress.\n\nIIUC, \u003c@!740198576998842419\u003e is suggesting a rule on eth1 side that doesn't allow for sidechains longer than say `32` blocks which would give a good UX and 51%-attacks protection with a cost of centralization risk. But this risk might not be that bad if this logic is enabled for a day before the merge. This parameter should be configurable and allowing each user to choose its own follow distance; with warning that there is minimal safe follow distance for PoW, e.g. `16`. It also requires implementing the same logic as needed to respect beacon chain finality.\n\nWhat other than centralization hence censorship vectors does this behaviour open? I might overlook something.",
        "created_at": "2021-05-15T04:58:46.277000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Network partition for 10 minutes (e.g., China great firewall goes down) would cause problems with 32 follow distance.",
        "created_at": "2021-05-15T05:06:21.915000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Normally the system would self heal at the end.  With a close follow distance it wouldn't and one side of the partition would need to resync after if they pruned the canonical chain while partitioned.",
        "created_at": "2021-05-15T05:07:56.385000+00:00",
        "attachments": null
    },
    {
        "author": "clefru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I have questions on the migration of legacy ETH1 nodes to \"PoS consensus\". Currently, the merge spec talks about ETH1 nodes being completely controlled by ETH2, in that all conversations are driven by the ETH2 beacon node. How do we get to this state from someone that has already ETH1 nodes deployed? What are the actions that this person has to take and when to have ETH1 transactions still go through on whatever the correct chain will be? How is the cut over organized so that there is no disruption to legacy ETH1 clients? Pardon me, if that has been answered, happy to read up on documentation/blog posts here.",
        "created_at": "2021-05-15T06:45:36.765000+00:00",
        "attachments": null
    },
    {
        "author": "clefru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Or in more simplistic terms, if somebody ignorant of the upgrade does a \"docker run ethereum/client-go:latest\" at the end of 2022, will that give them something that can execute/relay transactions on the post-merge PoS-driven chain? I guess not.",
        "created_at": "2021-05-15T06:47:11.896000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes they will. The eth1 mempool is independently peered, a client that wants to run only an execution layer client may broadcast transactions. These will be seen by other nodes connected to beacon-chain validators. So when the beacon chain requests a block from them, they'll serve said transactions. So to answer your question, someone that wants to run only an execution layer client doesn't need to do anything special, just keep it's software updated.",
        "created_at": "2021-05-15T09:38:44.951000+00:00",
        "attachments": null
    },
    {
        "author": "clefru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "potuz: Sorry, frustratingly, I understood none of that. Is there some background document that I can read up on on what happens to ETH1 legacy nodes and their network? The terminology is just too overloaded/unclear for me.",
        "created_at": "2021-05-15T10:14:01.117000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If hashrate makes rapid changes in the last two days, then yeah, it will end up being wrong",
        "created_at": "2021-05-15T18:57:07.533000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But I really doubt that hashrate will change that much; it definitely won't go up by 4x",
        "created_at": "2021-05-15T18:57:40.623000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It would be insanely expensive and logistically difficult to come up with and deploy that hashpower just for those two days",
        "created_at": "2021-05-15T18:58:06.076000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hashpower dropping off is more likely",
        "created_at": "2021-05-15T18:58:21.669000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Which would of course increase time to merge",
        "created_at": "2021-05-15T18:58:26.937000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But that's not too bad; the worst that will happen is that the transition won't happen at a convenient hour and US or Europeans will be awake at 3am",
        "created_at": "2021-05-15T18:58:50.255000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If we believe hashrate decreases are more likely than increases, we can mitigate this risk by targeting the transition to eg. 11pm EU time, so the decrease would have to be quite large to push it into the middle of the night the previous day",
        "created_at": "2021-05-15T18:59:49.099000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Basically, you would have to:\n\n1. Download and run a beacon chain client (lighthouse, prysm, nimbus, teku)\n2. Download an upgrade to your execution chain client (geth, nethermind, besu...)",
        "created_at": "2021-05-15T19:03:15.594000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(2) is what people have had to do already for every hard fork",
        "created_at": "2021-05-15T19:03:28.350000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(1) is the only new step",
        "created_at": "2021-05-15T19:03:37.679000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "From there, the two clients should handle everything automatically",
        "created_at": "2021-05-15T19:03:47.553000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It isn't obvious to me why non-block producers need both clients?",
        "created_at": "2021-05-15T19:13:52.836000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e need the beacon chain client to tell you what the head is",
        "created_at": "2021-05-15T19:14:10.992000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e I guess you only need the execution client for verification",
        "created_at": "2021-05-15T19:14:23.206000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e In the long run you'll need to have one to generate proofs of custody",
        "created_at": "2021-05-15T19:14:38.114000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Will the  execution chain p2p network and beacon chain p2p network running in parallel? \nto follow the execution chain you need both clients",
        "created_at": "2021-05-15T19:16:38.947000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e At the beginning yes",
        "created_at": "2021-05-15T19:16:50.504000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "okay!",
        "created_at": "2021-05-15T19:17:00.272000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e You'll always need both clients I think; I know some devs are even saying that the forced split into a more modular client architecture is actually good and we should keep going in that direction",
        "created_at": "2021-05-15T19:17:22.611000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e though I do imagine that at some point the p2p stacks will be more unified",
        "created_at": "2021-05-15T19:17:35.419000+00:00",
        "attachments": null
    },
    {
        "author": "dkdkdkdkdkdk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I bet there are Ethereum enthusiasts all over the world, some of them will have to be awake at night either way",
        "created_at": "2021-05-15T19:18:40.648000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Network upgrades always suck for someone",
        "created_at": "2021-05-15T19:19:24.702000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "and there so many",
        "created_at": "2021-05-15T19:19:27.608000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e yeah I don't actually think people being up at 3am *once* is a big deal, particularly since it brings in a transition to PoS which is slot-based and so should remove the risk of a network event happening at an unexpected time forever in the future",
        "created_at": "2021-05-15T19:19:38.338000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e (except for security incidents of course, which are random)",
        "created_at": "2021-05-15T19:19:59.138000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think keeping the clients seperate is an efficient use of human capital. \n\nIt doesn't force cross pollination between client teams at an unexpectedly fast rate",
        "created_at": "2021-05-15T19:20:36.022000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e yep!",
        "created_at": "2021-05-15T19:20:45.653000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e Separation of concerns is good",
        "created_at": "2021-05-15T19:20:52.975000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e I wonder if we can expand on it, eg. create a separate category of \"EVM engine implementations\" or something",
        "created_at": "2021-05-15T19:21:23.367000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e But that's a discussion for the future",
        "created_at": "2021-05-15T19:21:37.181000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Node operators won't like it. I doubt there is very much overlap between teams running beacon chain nodes and geth nodes",
        "created_at": "2021-05-15T19:21:54.909000+00:00",
        "attachments": null
    },
    {
        "author": "zakimanian",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think we are going to have to start building up more experience with the beacon chain now",
        "created_at": "2021-05-15T19:22:22.639000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e yeah I would definitely recommend any serious ethereum ecosystem players start poking around nocturne and reading the merge specs",
        "created_at": "2021-05-15T19:22:51.360000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why is that? I can run an Eth1 node and send transactions without any eth 2 client around, as long as other eth 1 node broadcasts these transactions they'll get it",
        "created_at": "2021-05-15T20:15:37.485000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh reading now there's been a discussion about this, but I don't understand your answer, why do I care what head is if I just want to include transactions",
        "created_at": "2021-05-15T20:17:09.780000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't need any consensus information to submit signed transactions",
        "created_at": "2021-05-15T20:17:36.056000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If you just want to broadcast txs, sure",
        "created_at": "2021-05-15T20:17:41.046000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah actually, to participate in the mempool you need consensus info",
        "created_at": "2021-05-15T20:18:31.148000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Otherwise you rebroadcast txs that can't pay for their fees and get banned (maybe?)",
        "created_at": "2021-05-15T20:18:47.676000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't understand the mempool logic enough to answer this conclusively",
        "created_at": "2021-05-15T20:19:02.822000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't think that's the case, as long as you are peered those transactions will be processed by some node connected to a beacon chain validator, that validator will not include a block with invalid transactions. But for \u003c@381414973747757059\u003e's original question I think the answer is that they have to do nothing new, just upgrade their software",
        "created_at": "2021-05-15T20:20:54.666000+00:00",
        "attachments": null
    },
    {
        "author": "sma4321",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that close to the merge, couldn't the healing event be defined as \"finality on the beacon chain\"?",
        "created_at": "2021-05-15T20:36:05.073000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "To verify transactions you need the latest or at least close to latest world state and you need to verify the tx before broadcasting to the network or your peers will disconnect you. \nSince blocks come from the beacon chain a stand-alone eth1 node will fall out of sync and wind up being disconnected if it publishes invalid transactions. \n\nBottom line running an eth1 node by itself will not be useful.",
        "created_at": "2021-05-15T21:17:43.368000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I continue to not undersand this: I do not see how that is different than what we currently have",
        "created_at": "2021-05-15T21:21:40.503000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "if I send bad transactions today my peers will ban me",
        "created_at": "2021-05-15T21:21:54.864000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think I'm getting to understand  perhaps: blocks will not be broadcasted on the eth1 network anymore, so I won't have access to blocks to update my state... Indeed I won't be able to verify anything. But to submit transactions I don't need any of this",
        "created_at": "2021-05-15T21:24:02.986000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I can just sign a simple transaction, send it, and it will be included.",
        "created_at": "2021-05-15T21:24:24.746000+00:00",
        "attachments": null
    },
    {
        "author": "dkdkdkdkdkdk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "you don't need an eth1 node at all to send a transaction, do you?",
        "created_at": "2021-05-15T22:00:44.692000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I myself wouldn't know how to send one without a node, either I send it with my own node, or if I use a wallet like metamask and the such, that wallet will connect to an eth1 node to broadcast it",
        "created_at": "2021-05-15T22:18:13.231000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But I think I understood Buterin's and Sutton's point: except for trivial messages that do not require knowledge of the state, a standalone eth1 node is useless",
        "created_at": "2021-05-15T22:19:06.333000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah if you are tracking your nonce and balance somehow outside the chain then you could create transactions that are valid. You’d also have to track the current gas price (base fee post 1559) off chain to get your transaction actually included. \nIt’s doable but practically speaking most people get their balance and nonce from the node so they’d need a consensus client running for the execution client to be useful.",
        "created_at": "2021-05-15T22:26:34.544000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You can't hear from it automatically, that is the whole point of maximum reorg distance.",
        "created_at": "2021-05-15T22:28:07.995000+00:00",
        "attachments": null
    }
]