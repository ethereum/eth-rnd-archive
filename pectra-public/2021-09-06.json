[
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e If it's meant a different fork, then still this situation should flag an irrecoverable error rather than silently delete old data and continue syncing I think\nThe case this statement is related to is about a re-org that has happened between the sync process has been stopped and started again due to a client software restart",
        "created_at": "2021-09-06T04:39:57.050000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We should consider justified checkpoints but they could be re-orged as well and if there is a period of non-finality then the probability of a justified checkpoint being re-orged might be increased.",
        "created_at": "2021-09-06T04:41:11.431000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Quick opinion check: how ok are we with making clients by default NOT sync the pre-merge execution chain if they can find a post-merge state root to sync from?",
        "created_at": "2021-09-06T06:38:36.054000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "IMO now is as good a time as any to start seriously planning doing such things",
        "created_at": "2021-09-06T06:38:54.873000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do you mean state or blocks? Snap sync is already the default in geth, so we would not sync the pre-merge exec state (except for blocks). I personally wouldn't like to drop the block sync requirement as we would loose the ability to sync them from the network over time as more nodes drop the old blocks",
        "created_at": "2021-09-06T07:30:31.294000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The merge does feel like a good point to make a cut off and have blocks prior to the merge available via IPFS or similar rather than having to do it in-protocol. Besides, more an more eth1 nodes are \"cheating\" by not storing all blocks to save disk space so I'm not sure how much longer we'll be able to depend on them being available that way (kudos to the clients that don't have an option to discard old blocks btw).",
        "created_at": "2021-09-06T07:35:54.744000+00:00",
        "attachments": null
    },
    {
        "author": "mheuer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "While we are worrying what will happen with all the GPU-based hash rate close to the merge, Nvidia just released a new mining card. ü§î\nhttps://wccftech.com/nvidia-cmp-170hx-cryptocurrency-mining-monster-card-spotted-ampere-ga100-gpu-164-mh-s/",
        "created_at": "2021-09-06T08:00:20.065000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "**The Merge: Engine API design space Call 2**\nDate/Time: Thursday, Sept 9 at 13:00 UTC\nDuration: 60 mins\nAgenda: https://github.com/ethereum/pm/issues/385\nZoom: to be shared in Ethereum R\u0026D discord before call\n\nIf you want an invitation and hasn't been invited yet, please, DM.",
        "created_at": "2021-09-06T08:46:39.910000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e I do mean blocks (re @merge_chat_bot: \u003cMariusVanDerWijden\u003e Do you mean state or blocks? Snap sync is already the default in geth, so we would not sync the pre-merge exec state (except for blocks). I personally wouldn't like to drop the block sync requirement as we would loose the ability to sync them from the network over time as more nodes drop the old blocks)",
        "created_at": "2021-09-06T08:52:35.510000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e I think realistically, if we care about (i) making nodes easier to run, (ii) increasing the gas limit without increasing load, or (iii) making it easier to develop new clients, we should seriously consider making the tough decision and just saying \"if you want the pre-merge exec chain, get it off a torrent network yourself\"",
        "created_at": "2021-09-06T08:54:20.630000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e Of course that will mean you lose the ability to sync the pre-merge chain from the network, but I just don't see how that's all that bad",
        "created_at": "2021-09-06T08:55:11.720000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It probably not that bad if there is a guarantee that it could be obtained from torrent network. Like if block explorers would seed the pre-merge chain",
        "created_at": "2021-09-06T08:56:11.373000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The blocks (at least in geth) are moved to ancient, so they can be stored on an hdd anyway. We should maybe push for more people having dedicated ancient disks which would greatly decrease the ssd space needed",
        "created_at": "2021-09-06T08:56:25.871000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do we care about dropping the pre-merge chain only or also thinking about periodical chain cut offs or even making it available for the last N blocks to be obtained from the network while others are seeded via torrents?",
        "created_at": "2021-09-06T08:57:26.287000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e \u003e We should maybe push for more people having dedicated ancient disks which would greatly decrease the ssd space needed\nIf we want to make it easier to run a node, requiring people to have custom HD setups to do it feels like 180' opposite from where we're trying to go...",
        "created_at": "2021-09-06T08:57:29.219000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e I'm pretty sure any one of our dev teams could unilaterally run the node cluster that does the seeding, no? (re @merge_chat_bot: \u003cMikhail Kalinin [mkalinin]\u003e It probably not that bad if there is a guarantee that it could be obtained from torrent network. Like if block explorers would seed the pre-merge chain)",
        "created_at": "2021-09-06T08:57:53.832000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Agree, currently geth is seeding blocks and is keeping the majority of the nodes in the network. Hence this guarantee is maintained by the network. Cutting off the PoW chain does make sense to me, block explorers will keep these data anyway and can share them likewise some other parties could potentially do this as well.\n\nDo we want to cut the pre-merge chain or add a limit on the number of blocks that could be obtained from the network affecting the PoS part of the chain as well?",
        "created_at": "2021-09-06T09:03:23.433000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We may add this limit saying that blocks that belong to last N epochs are guaranteed to be available in the network. And if this is done then PoW chain will dropped after some period of time",
        "created_at": "2021-09-06T09:06:42.724000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm a huge proponent of this and have been weakly advocating for it for a while.  I think we should regularly drop only data (maybe on a one year sliding window), not just at The Merge.",
        "created_at": "2021-09-06T09:17:25.659000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Clients would be able to walk to head from any block in the canonical chain that have from within the last year, but if they want blocks prior to that they will need to get them out of band (torrents or whatever).",
        "created_at": "2021-09-06T09:18:39.552000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This would free up quite a bit of disk space, and when combined with state expiry (which I think is also slated for roughly 1 year cycles) would make it so Ethereum clients only need to store 1 years worth of \"stuff\" at any given point in time.",
        "created_at": "2021-09-06T09:19:45.522000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "~2.5M headers/bodies/receipts + up to ~78T gas worth of state (if my math is right)",
        "created_at": "2021-09-06T09:21:10.916000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The approach with a sliding window sounds better to me as it could significantly reduce the amount of space required to run a node and make this amount to grow much slower (assuming that state expiry is implemented)",
        "created_at": "2021-09-06T09:22:15.783000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I do think that The Merge is a good time to *start* doing this, as it is a large transition/change and people are expecting some disruption during that time.",
        "created_at": "2021-09-06T09:22:59.307000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So as of The Merge block, clients would only be expected to store the last 2.6M blocks (or something).  The Merge also gives us much more accurate block =\u003e time spans, so 2.6M blocks post-merge means almost exactly 1 year I think.",
        "created_at": "2021-09-06T09:23:45.980000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It could be proposed in a separate EIP. Not necessarily tightly coupled to the Merge changeset",
        "created_at": "2021-09-06T09:26:03.923000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I would suggest post-merge.  It's not directly coupled to the merge, and would add a chunk of complexity on top of it.",
        "created_at": "2021-09-06T09:26:12.159000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Agreed, it shouldn't be part of The Merge EIP.",
        "created_at": "2021-09-06T09:26:15.630000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I believe *all* clients support a snap sync, so it doesn't actually require any consensus changes I think?",
        "created_at": "2021-09-06T09:26:37.518000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess it does have potential to break archive node syncing if no one runs a full-history client anymore, but that is unlikely to happen right away.",
        "created_at": "2021-09-06T09:27:10.220000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If we introduce this thing within the Merge then block sync could be dropped from the post-merge sync design space",
        "created_at": "2021-09-06T09:27:22.508000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think this would be more just like a casual agreement among core devs about what is *acceptable* for a node to serve.",
        "created_at": "2021-09-06T09:27:28.285000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Wouldn't that require having a \"snapshot\" of exactly at The Merge?",
        "created_at": "2021-09-06T09:27:55.735000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So you wouldn't be able to sync a node from 10 blocks before The Merge, you could only sync from The Merge on?",
        "created_at": "2021-09-06T09:28:30.522000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This change would probably require the functionality that allows for building the snapshot and updating it",
        "created_at": "2021-09-06T09:28:49.025000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "At least it would need to be possible to export blocks from the storage",
        "created_at": "2021-09-06T09:29:09.777000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I meant introducing the sliding window approach and start keeping only the last year of the PoW chain at the point of Merge. It would make the block sync unable to work properly.",
        "created_at": "2021-09-06T09:30:45.329000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There is a certain amount of appeal to asserting that one cannot do a *new* sync across The Merge boundary.",
        "created_at": "2021-09-06T09:31:44.704000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It would simplify a lot of things I imagine.",
        "created_at": "2021-09-06T09:31:55.840000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Erigon does not support snap sync yet.",
        "created_at": "2021-09-06T09:32:06.097000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, good to know.",
        "created_at": "2021-09-06T09:32:23.596000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@583892532644151312\u003e Is it (or something similar) on the Erigon roadmap?",
        "created_at": "2021-09-06T09:32:38.895000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Anything that lets you sync without walking from genesis block to head, perhaps using an out-of-band data source.",
        "created_at": "2021-09-06T09:32:49.049000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e Do you support sync from a blockchain fed in via a file? (re @merge_chat_bot: \u003cAndrew Ashikhmin (yperbasis)\u003e Erigon does not support snap sync yet.)",
        "created_at": "2021-09-06T09:32:57.960000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e That would also be an easy workaround",
        "created_at": "2021-09-06T09:33:05.897000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "A version of snap sync is in the works, but it's not fully implemented yet.",
        "created_at": "2021-09-06T09:33:49.843000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What kind of simplification is expected? Once we have the first block finalized there will only be one PoW blockchain starting at genesis and ending with the terminal PoW block. There will be no need to verify Ethash anymore as the sync becomes relying upon the PoS fork choice. Pulling this blockchain from the network or a part of it seems trivial.",
        "created_at": "2021-09-06T09:34:55.336000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Something that may help all of this would be to have a specification for a header history, receipt history, body history, and state file format.",
        "created_at": "2021-09-06T09:37:46.102000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right now there isn't a standardized file format that would allow you to bulk import all of history or the state as of a specific block.",
        "created_at": "2021-09-06T09:38:41.867000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If we had standardized file formats for each of those things, one can imagine just using Bittorrent to download a specific block range + state to bootstrap a new node rather than using the gossip network.",
        "created_at": "2021-09-06T09:39:16.325000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "One can further imagine a specialized torrent seed server that basically ran an archive node and could serve any range you requested from all of history.",
        "created_at": "2021-09-06T09:40:15.878000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You're mixing two things. On the one hand I was just pointing that I think having a contradictory hash for a **finalized** state should stop the sync rather than erase the old data and continuing. On a separate comment about justified checkpoints: my understanding of the current proposal is that there will be something like a calcified state that is going to be not-necessarily final and that execution will keep the diff to the final state in case of a reorg. I just mentioned that it may be worth to keep diffs not only to a finalized state, but actually to all justified children. Since in cases of non-finally what happened often is that you justify a point much later than finally and then finalize a child of this justified point.",
        "created_at": "2021-09-06T09:47:39.030000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Or even a client that is able to run in archive mode and pulling old blocks from torrent network and also seeds them once they have been pulled",
        "created_at": "2021-09-06T09:48:54.654000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think all we really need at the moment is just a loose agreement among core devs that it is socially acceptable to run a client that only has headers and bodies as far back as 1 year ago.",
        "created_at": "2021-09-06T09:50:37.908000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right now some clients have options like this, but it is considered \"unhealthy\" for the network.  I think just removing that stigma is the first step.",
        "created_at": "2021-09-06T09:51:01.431000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "From my understanding the statement in the doc is related to a situation when `Hx` hasn't been finalized yet and after the restart there is `Hx'` that is *finalized* at the same height. In this case it makes sense to overwrite `Hx` with `Hx'`. Agreed on the second, and also it might make sense to keep an interim state each 10k blocks even if there are no justified checkpoints in this range, it could aid for faster re-orgs",
        "created_at": "2021-09-06T09:52:06.016000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The statement is\n\u003e If the local database contains a finalized header at height x, but its hash does not match Hx, the client should delete the header and all block data associated with it.\n\nSo both Hx and the existing local hash are final at the same height. This should be fatal",
        "created_at": "2021-09-06T09:55:51.615000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I see now. It could work as well because the execution client trusts its consensus counter party and if it says that the finalized block has been overwritten then it probably should follow this direction",
        "created_at": "2021-09-06T09:58:29.003000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Agreed, but I think this is a severe enough problem that should require manual intervention. It's not a big deal, just that I think that this shouldn't really happen ever, therefore perhaps it's better to let the user know of the situation and allow him to override",
        "created_at": "2021-09-06T10:00:17.811000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Agree, and speaking in terms of the doc this should be possible after **reset(B)** call has been made:\n\u003e Add a new call **reset(B)** to reset the eth1 client to a historical block",
        "created_at": "2021-09-06T10:01:40.938000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "cc \u003c@!194432762315407360\u003e",
        "created_at": "2021-09-06T10:02:05.651000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "From geth PoV we cannot agree with this. It's easy to say \"people should just use torrents or something\", but in practice this will not be easy.",
        "created_at": "2021-09-06T10:09:19.275000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also I think it's the wrong time to make such changes.",
        "created_at": "2021-09-06T10:10:13.274000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Would the client support of pulling old blocks from torrent network make this easier for users who want to run an archive node?",
        "created_at": "2021-09-06T10:10:40.256000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The eth1 clients can sync the blocks already, it doesn't simplify the merge sync much to remove this part.",
        "created_at": "2021-09-06T10:10:44.290000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's already possible right now to import blocks from a file.",
        "created_at": "2021-09-06T10:11:11.050000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Am I correct in the assertion that only users *not* doing snap sync would be effected?",
        "created_at": "2021-09-06T10:11:22.452000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No, all users will be affected by this, because the block history also contains receipts.",
        "created_at": "2021-09-06T10:11:46.862000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Peter has been pushing for the idea of limiting receipt storage somehow, but at the moment, there is no good off-ramp for existing apps that use receipts.",
        "created_at": "2021-09-06T10:13:37.230000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So we would have to solve this problem first.",
        "created_at": "2021-09-06T10:13:49.136000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I will change it in the v2 sync merge document, thanks for the suggestion.",
        "created_at": "2021-09-06T10:16:38.615000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If a user does a snap sync, do they then fetch all receipts from all of history?",
        "created_at": "2021-09-06T10:23:58.542000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes",
        "created_at": "2021-09-06T10:24:04.276000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I believe that the vast majority of users don't need ancient receipts, headers, or bodies.  What harm do you fear would happen if Geth simply stopped fetching (and serving) ancient stuff?",
        "created_at": "2021-09-06T10:25:20.072000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is the disagreement on whether or not the majority of users actually want/need ancient data, or is the disagreement on the importance of natively supporting the small percentage of people who run an archive nodes?",
        "created_at": "2021-09-06T10:26:05.584000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There are two things: the data needs to be available so that the node who do need it can sync from somewhere. And I suspect quite a lot of apps actually use old-ish data, especially receipts.",
        "created_at": "2021-09-06T10:27:51.738000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's not just for archive nodes.",
        "created_at": "2021-09-06T10:28:05.254000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Our definition of 'full node' also includes access to receipts and transactions.",
        "created_at": "2021-09-06T10:28:29.415000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't have any proof that this data is truly needed by everyone right now. I'm just trying to say that this change (1) is unrelated to the merge, (2) doesn't simplify the merge, (3) is a big change that needs further research",
        "created_at": "2021-09-06T10:31:10.226000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It does feel like we need to actually start that research...",
        "created_at": "2021-09-06T10:48:43.408000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah!",
        "created_at": "2021-09-06T10:50:57.906000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "For things like these, it would really help if EF had a developer relations department",
        "created_at": "2021-09-06T10:51:29.469000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We basically need to make a poll where people tell which features they actually use",
        "created_at": "2021-09-06T10:51:58.283000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We have the various companies that we've been contracting to write \"reports\", eg. like that one on verkle tree gas cost changes",
        "created_at": "2021-09-06T10:52:16.402000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Though this particular problem is a bit different, because it's not code analysis",
        "created_at": "2021-09-06T10:52:34.741000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We tried this once in the geth team, interviewing users to ask how they use it",
        "created_at": "2021-09-06T10:52:42.597000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The results were kind of interesting",
        "created_at": "2021-09-06T10:52:52.372000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But it was quite a while ago and the write-up is probably lost somewhere",
        "created_at": "2021-09-06T10:53:22.524000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "For the receipts, we just need to figure out an acceptable cutoff",
        "created_at": "2021-09-06T10:54:05.626000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is it one year? two years? etc.",
        "created_at": "2021-09-06T10:54:22.582000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Same for old transactions",
        "created_at": "2021-09-06T10:54:57.847000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!552133098075193354\u003e \u003c@!420951281910284289\u003e Love to create polls and interviews üòõ",
        "created_at": "2021-09-06T11:02:52.872000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We have the protocol support group in the ef",
        "created_at": "2021-09-06T11:03:05.768000+00:00",
        "attachments": null
    },
    {
        "author": "cloudy6356",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hey devs.... What would be the block time in ETH 2.0?",
        "created_at": "2021-09-06T12:01:22.232000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e 12s",
        "created_at": "2021-09-06T12:03:18.509000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cvbuterin\u003e Well technically ~12.2s given the tiny percentage of block proposers who don't show up",
        "created_at": "2021-09-06T12:03:39.875000+00:00",
        "attachments": null
    },
    {
        "author": "cloudy6356",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Would Uncle rate be reduced in Eth 2.0 or would it be similar to 1.0?",
        "created_at": "2021-09-06T12:36:44.077000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There is no uncles on the beacon chain and won't be after the Merge",
        "created_at": "2021-09-06T12:43:25.601000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Well, to be fair there is the possibility of blocks that don't make it into the canonical chain",
        "created_at": "2021-09-06T12:43:48.646000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But I think the rate of that should decrease _a lot_",
        "created_at": "2021-09-06T12:43:56.425000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Because of how block production is no longer a poisson distribution, so in the normal case there are no race conditions",
        "created_at": "2021-09-06T12:44:09.833000+00:00",
        "attachments": null
    },
    {
        "author": "cloudy6356",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Nice, ser. Big fan btw..Sending loads of love ‚ù§Ô∏è",
        "created_at": "2021-09-06T12:44:48.721000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My intuitive definition of uncle was a block that isn't included into canonical chain because it (or its fork) looses the arms race. Your definition is more accurate",
        "created_at": "2021-09-06T12:49:54.079000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right",
        "created_at": "2021-09-06T12:50:09.825000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Uncle literally means a different child of the grandparent",
        "created_at": "2021-09-06T12:50:17.904000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Eth PoW has *in-protocol uncle inclusion* and Eth PoS does not, but there's still the possibility of uncles",
        "created_at": "2021-09-06T12:50:49.007000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I (and others) have been telling application developers that they should not be building applications that depend on old receipts.  Receipts should not be seen as \"cheap long term storage\", they should only be used as a notification system.  I think at some point we need to put our foot down and say, \"no really, this is not cheap storage, it is going away now!\"",
        "created_at": "2021-09-06T13:03:52.407000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We can try to give people advanced notice of exactly when it is going away, but so far everyone is \"calling our bluff\" and saying \"you say that... but it is so easy to ignore you and so far you haven't taken it away... so I'm going to just depend on it here...\"",
        "created_at": "2021-09-06T13:05:17.268000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "IMO history of the execution chain is valuable. However, I don't see that much value for users in the pre-merge PoS chain history.",
        "created_at": "2021-09-06T13:05:40.657000+00:00",
        "attachments": null
    },
    {
        "author": "ghosts_in_the_code",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sorry if dumb q, why does execution client need to sync one year if consensus client only syncs two weeks.",
        "created_at": "2021-09-06T14:52:53.287000+00:00",
        "attachments": null
    },
    {
        "author": "ghosts_in_the_code",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are the two related?",
        "created_at": "2021-09-06T14:53:11.534000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "See the Eth2 Deposit contract... we need access to the receipt history to onboard validators to the beacon chain. Nimbus can encode the state of the deposit contract into its checkpoint syncs to avoid loading the entire history of the contract. But afaik other clients don't do that yet, and need to sync up deposit receipts from the beginning. We should probably standardise this across clients as part of weak-subjectivity state checkpoint provision.",
        "created_at": "2021-09-06T16:31:38.420000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, I disagree with the way consensus clients used receipts for long-term storage.",
        "created_at": "2021-09-06T17:32:04.954000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think it is very unhealthy for Ethereum to treat receipts as long term storage rather than a notification system.",
        "created_at": "2021-09-06T17:32:34.844000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(for the reasons discussed above)",
        "created_at": "2021-09-06T17:32:41.737000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cbenjaminion\u003e The irony is that the deposit contract maintains the deposit tree in storage, and beacon chain clients rebuild the same tree from scratch with the receipts. Using receipts doesn't save any storage at all. (re @merge_chat_bot: \u003cMicah\u003e Yeah, I disagree with the way consensus clients used receipts for long-term storage.)",
        "created_at": "2021-09-06T17:47:37.078000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The receipts save on storage in the sense that the alternative solution to the same problem would be to actually write the deposits to Ethereum state (SSTORE), and then rebuild the trie from that.",
        "created_at": "2021-09-06T18:38:46.954000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cbenjaminion\u003e The deposits _are_ written to the Ethereum state (yes, with SSTORE). The contract maintains its own (sparse) Merkle tree of deposits, which the beacon chain rebuilds and sees if it ends up with the same root or not. No storage is saved by using receipts. (re @merge_chat_bot: \u003cMicah\u003e The receipts save on storage in the sense that the alternative solution to the same problem would be to actually write the deposits to Ethereum state (SSTORE), and then rebuild the trie from that.)",
        "created_at": "2021-09-06T18:42:01.971000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Gah, I shouldn't try to multitask - it rarely goes well. Yes, right, the leaves of the tree (which correspond to the receipts) are not stored in the contract.",
        "created_at": "2021-09-06T19:09:54.339000+00:00",
        "attachments": null
    }
]