[
    {
        "author": "thegostep",
        "category": "general",
        "parent": "",
        "content": "\u003c@!291925846556540928\u003e \u003c@!301186049323958275\u003e \u003c@!552133098075193354\u003e \u003c@!425572898787426305\u003e Here are my thoughts on coinbase address selection:\n\nFrom an MEV perspective, knowing the coinbase address of a block ahead of others provides a sustained advantage in the creation of more accurate execution payloads. This is because the coinbase address is available inside the evm execution and can trigger path dependent logic. To produce an accurate payload, builders must know *all* the components of the block which can cause path dependent logic. As such, it is necessary for the coinbase address to be publicly known as soon as a validator is assigned to a slot.\n\nHere are a few ways to acheive this property:\n1) tie the coinbase address to a validator\n2) let block builder set their own coinbase address\n3) remove coinbase opcode from the evm\n\nUnder option 1) the protocol would enforce that the coinbase address must be a publicly known ethereum address like the  validator withdrawal keys. Special care must be taken to limit changing the coinbase address once the validator is assigned a slot. Passing the coinbase address as a part of `engine_preparePayload` is untenable because it prevents builders from constructing blocks ahead of time and therefore the coinbase address will be ignored.\n\nUnder option 2) the block builders would set their own address as the coinbase address and include an out-of-band payment to the validator for inclusion (for example, using an L2). This option likely introduces counter-party risk, obfuscates payments, and increases the complexity of profit switching.\n\nUnder option 3) the coinbase address can be arbitrarily picked by the validator without impacting the accuracy of a block as the coinbase address can no longer trigger path dependent logic. This option would break any contract with logic that depends on coinbase address.\n\nIn order to maximize transparency and security, I recommend pursuing option 1). If no action is taken, I expect option 2) to become the default.",
        "created_at": "2021-08-31T12:11:57.032000+00:00",
        "attachments": null
    },
    {
        "author": "thegostep",
        "category": "general",
        "parent": "",
        "content": "\u003e For maximum flexibility we would want the block builder to be able to execute a block that transfers money to the block proposer, but such that the block builder doesn't need to know the block proposer's address at the time of block build.\nI agree strongly with this statement",
        "created_at": "2021-08-31T12:13:22.984000+00:00",
        "attachments": null
    },
    {
        "author": "thegostep",
        "category": "general",
        "parent": "",
        "content": "\u003e Just as there might be a public market for blocks, there is similarly a public market for transactions.  The transactions need a way to publish into the global pending pool such that any block builder can build a block and receive payment from those transactions.\n\u003e In the latter case, having the block builder be the coinbase actually does help, because the transaction author wants to pay the block builder, not the block proposer in this two tier model.",
        "created_at": "2021-08-31T12:17:05.372000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Under option 2) the address that is passed in the `engine_preparePayload` should be used to make the payment to the proposer, right? How would a proposer know the size of this payment without executing a block?",
        "created_at": "2021-08-31T12:17:20.430000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Post-state proof.",
        "created_at": "2021-08-31T12:19:38.946000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Option 1) would require adding a new field to the validator record. We can't use `withdrawal_credentials` for this purpose unless BLS credentials are deprecated and nobody in the system uses it.",
        "created_at": "2021-08-31T12:26:33.234000+00:00",
        "attachments": null
    },
    {
        "author": "thegostep",
        "category": "general",
        "parent": "",
        "content": "\u003e Ultimately it should be up to the proposer to select whichever block they want, for whatever reasons they want.  Otherwise we're back in to restricting models.\nThis is not always true, as there are proposer behaviors which can be considered harmful to the network:\n- accepting bribes in tokens other than eth\n- performing attestation bribery",
        "created_at": "2021-08-31T12:36:58.780000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "For my understanding, is this related to the system *after* proposer/builder separation is introduced?",
        "created_at": "2021-08-31T12:39:06.819000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Ideally, we'd have a proof linked to a block hash (a hash of an execution block). This would allow for reading the size of a bribe without revealing any information on the block body and do this fast enough to pick up the best block builder proposal.",
        "created_at": "2021-08-31T12:44:54.709000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yeah, you can do that today and after The Merge.",
        "created_at": "2021-08-31T12:46:01.900000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "When you give the block header to the proposer, you would *also* give them a proof of their balance after the block that is rooted to the state root for that block.",
        "created_at": "2021-08-31T12:46:39.727000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Doesn't it need all block header fields today?",
        "created_at": "2021-08-31T12:46:40.853000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Header fields yes, body no.",
        "created_at": "2021-08-31T12:46:50.343000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is the body that the block builder wants to keep secret.",
        "created_at": "2021-08-31T12:47:01.310000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Right, curious if this scheme is sensitive to revealing block header fields or not. For instance, is `coinbase` reveal acceptable?",
        "created_at": "2021-08-31T12:47:09.871000+00:00",
        "attachments": null
    },
    {
        "author": "thegostep",
        "category": "general",
        "parent": "",
        "content": "\u003c@!273808422753796097\u003e can you expand on this? the only case I can think of is censorship from buying the full block space over multiple blocks - I always assumed it was a feature  not a bug since validators have this power regardless",
        "created_at": "2021-08-31T12:49:52.245000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Expand on what specifically?",
        "created_at": "2021-08-31T12:50:14.345000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e The builder driven censorship I am basically describing is: a builder makes a block not containing transactions that they want to censor, and then the builder themselves pays for the bribe to make their blocks win the auction despite missing out on a source of txfees",
        "created_at": "2021-08-31T12:54:45.618000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e It's a simple attack, though it's also easy to see why the griefing factors are heavily against the censor",
        "created_at": "2021-08-31T12:55:05.241000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e *unless* the builder has access to some proprietary tx choosing logic that make them reliably more profitable than the rest of the builders. In that case, they have some margin that they can censor for free",
        "created_at": "2021-08-31T12:55:55.988000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e though even then, the most that they can do is force the victims to resubmit with high priority fees",
        "created_at": "2021-08-31T12:56:19.486000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Keeping thinking on it. It won't work if the address of the proposer is not known in advance. It should either be publicly known or communicated somehow to block builders",
        "created_at": "2021-08-31T12:56:48.004000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Ah this is why I always thought in this approach the COINBASE opcode would just map to the builder and not the proposer",
        "created_at": "2021-08-31T12:57:29.910000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yes, the builder needs *all* properties of the block up front in order to build a complete block.",
        "created_at": "2021-08-31T12:58:02.752000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e right, so the builder sets the coinbase",
        "created_at": "2021-08-31T12:58:16.949000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e \u003e Under option 2) the block builders would set their own address as the coinbase address and include an out-of-band payment to the validator for inclusion (for example, using an L2). This option likely introduces counter-party risk, obfuscates payments, and increases the complexity of profit switching.",
        "created_at": "2021-08-31T12:58:18.320000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Ah, I see you responded to this suggestion",
        "created_at": "2021-08-31T12:58:23.377000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e THe payment does not have to be out of band!",
        "created_at": "2021-08-31T12:58:29.579000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e In all existing proposals, the payment is part of the header that the builder submits and so is done in protocol",
        "created_at": "2021-08-31T12:58:44.276000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e No counterparty risk involved",
        "created_at": "2021-08-31T12:58:51.818000+00:00",
        "attachments": null
    },
    {
        "author": "thegostep",
        "category": "general",
        "parent": "",
        "content": "I suspect there will be significant politics involved wen trying to reduce validator power as validators have and even stronger economic interest in mev extraction relative to miners",
        "created_at": "2021-08-31T12:58:54.421000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e I think realistically validators don't yet have strong beliefs about their entitlements (beyond basic things like \"withdrawals get implemented eventually\" and \"there should be a good reason to change the issuance schedule\")",
        "created_at": "2021-08-31T12:59:59.800000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e So they don't really care about losing fine-grained block selection power",
        "created_at": "2021-08-31T13:00:17.346000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I still favor the option of \"validator suggests a coinbase in the prepareBlock payload, execution engine can choose to ignore it\".",
        "created_at": "2021-08-31T13:01:15.279000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e wait what's prepareBlock?",
        "created_at": "2021-08-31T13:01:32.552000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The message from consensus client to execution client that says \"start building a block with these details, I'll be back shortly to ask for it\".",
        "created_at": "2021-08-31T13:02:02.971000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "`preparePayload` + `getPayload` is a new couple of methods that supplants `assemblePayload`",
        "created_at": "2021-08-31T13:02:14.955000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Are we talking about the same thing here?",
        "created_at": "2021-08-31T13:02:29.612000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is when the consensus client provides randao \u0026 timestamp to the execution client (both of which are required for the execution client to build a block).",
        "created_at": "2021-08-31T13:02:34.632000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I thought so.  ðŸ˜„",
        "created_at": "2021-08-31T13:02:39.899000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e If the builder (and not the proposer) is building a block, then it's not the validator calling any kind of assembly method",
        "created_at": "2021-08-31T13:02:42.235000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "right",
        "created_at": "2021-08-31T13:02:50.220000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The consensus client has to give some details to the execution client before it can *start* building a valid block (RANDAO + timestamp).",
        "created_at": "2021-08-31T13:03:13.763000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "This is gonna be two different ways of getting an execution payload if we keep the way optional",
        "created_at": "2021-08-31T13:03:15.308000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e right",
        "created_at": "2021-08-31T13:03:27.154000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e So, post-merge timestamp is fixed for a given slot",
        "created_at": "2021-08-31T13:03:36.740000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "there will be no single execution client in case of block builder market, there will be a network of them",
        "created_at": "2021-08-31T13:03:49.133000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Is the idea that the block builder will figure that out \"on their own\"?",
        "created_at": "2021-08-31T13:03:50.456000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Ooh now that I think about it, proposer/builder separation is a good reason to NOT make the current-slot randao accessible",
        "created_at": "2021-08-31T13:03:53.848000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Can the RANDAO be figured out out of band?",
        "created_at": "2021-08-31T13:03:58.550000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Or is the current slot validator the only one who knows it?",
        "created_at": "2021-08-31T13:04:13.175000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Only the current slot validator knows it",
        "created_at": "2021-08-31T13:04:25.407000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It shouldn't be known in advance actually",
        "created_at": "2021-08-31T13:04:27.397000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e That's the point, it's a commit-reveal",
        "created_at": "2021-08-31T13:04:29.501000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "ðŸ˜–",
        "created_at": "2021-08-31T13:04:35.509000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e We could add an extra step where the proposer broadcasts their randao, but.... that feels ugly",
        "created_at": "2021-08-31T13:04:35.553000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e One whole extra step in the block creation process *just* for a randomness gadget",
        "created_at": "2021-08-31T13:04:46.730000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Just make randao return the previous-slot randao",
        "created_at": "2021-08-31T13:05:02.622000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So we have to choose between a block builder market or on-chain randomness or protocol complexity?",
        "created_at": "2021-08-31T13:05:17.670000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "RANDAO returning previous slot means it is prone to manipulation?",
        "created_at": "2021-08-31T13:05:36.060000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e I don't think making RANDAO return the previous-slot randao is complexity",
        "created_at": "2021-08-31T13:05:40.393000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Then builders will have to listen to beacon chain to get the randao mix. It should be exposed via API of BN",
        "created_at": "2021-08-31T13:05:41.148000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e No more than RANDAO returning current slot imo (re @merge_chat_bot: \u003cMicah\u003e RANDAO returning previous slot means it is prone to manipulation?)",
        "created_at": "2021-08-31T13:05:48.993000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Because now someone knows next-block's random number before previous block.",
        "created_at": "2021-08-31T13:05:52.550000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Right, while in case of current slot it is only known to the proposer",
        "created_at": "2021-08-31T13:06:09.984000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e If an app is manipulable in the case where someone can stick transactions in while knowing the RANDAO, then in any case it is vulnerable to manipulation by the proposer",
        "created_at": "2021-08-31T13:06:25.314000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Prior to the construction of block `n`, the validator for slot `n+1` can know what the RANDAO value for block `n+1` will be, right?",
        "created_at": "2021-08-31T13:06:29.862000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e So such apps are not secure regardless",
        "created_at": "2021-08-31T13:06:33.441000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e No, they need the slot n block to know that (re @merge_chat_bot: \u003cMicah\u003e Prior to the construction of block `n`, the validator for slot `n+1` can know what the RANDAO value for block `n+1` will be, right?)",
        "created_at": "2021-08-31T13:06:45.858000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "You could pull that from `/eth/v1/beacon/blocks/head`",
        "created_at": "2021-08-31T13:07:26.469000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "In this \"just use the previous RANDAO\" scenario, the RANDAO for slot `n` would become available to the EVM in the block in slot `n+1` IIUC?",
        "created_at": "2021-08-31T13:07:53.486000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "There is a _mix_ not a reveal that is used into a block",
        "created_at": "2021-08-31T13:07:58.926000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e yes (re @merge_chat_bot: \u003cMicah\u003e In this \"just use the previous RANDAO\" scenario, the RANDAO for slot `n` would become available to the EVM in the block in slot `n+1` IIUC?)",
        "created_at": "2021-08-31T13:08:27.871000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "So you'd have to pull it from state?  Or is it held anywhere else?",
        "created_at": "2021-08-31T13:09:12.346000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Btw, single leader election makes the `coinbase` in the validator record useless, right?",
        "created_at": "2021-08-31T13:09:19.928000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e The purpose of single leader election is to make future proposers unknowable until the proposer themselves publishes a block with a proof showing they're entitled to produce it",
        "created_at": "2021-08-31T13:09:48.327000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "either from state if this is for the previous slot or from state + mix in the reveal from the block in case of a current slot",
        "created_at": "2021-08-31T13:09:50.817000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e So the proposer pre-advertising themselves in any way already contravenes SSLE",
        "created_at": "2021-08-31T13:10:01.715000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e yeah it would have to be pulled from the state (re @merge_chat_bot: \u003cMikhail Kalinin [mkalinin]\u003e either from state if this is for the previous slot or from state + mix in the reveal from the block in case of a current slot)",
        "created_at": "2021-08-31T13:10:35.538000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Right, but there is an option 1) listed by \u003c@!385978868131168259\u003e that requires coinbase to be publicly known address",
        "created_at": "2021-08-31T13:10:42.485000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e But the prev block randao is already in the state, fortunately",
        "created_at": "2021-08-31T13:10:42.608000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Because it is needed to compute the current block randao",
        "created_at": "2021-08-31T13:10:48.402000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2021-08-31T13:10:56.185000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Right, so if SSLE is in the roadmap, then that option is a no go (re @merge_chat_bot: \u003cMikhail Kalinin [mkalinin]\u003e Right, but there is an option 1) listed by \u003c@385978868131168259\u003e that requires coinbase to be publicly known address)",
        "created_at": "2021-08-31T13:11:00.702000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "What is SSLE?",
        "created_at": "2021-08-31T13:11:13.710000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e single secret leader election",
        "created_at": "2021-08-31T13:11:19.837000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Also, the whole concept of builder/proposer separation is built on the idea that the builder collects all the fees, and the only mechanism by which the proposer gets paid is the bribe in the header",
        "created_at": "2021-08-31T13:11:31.743000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "and it is in the roadmap, isn't it?",
        "created_at": "2021-08-31T13:11:38.240000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e so far it is!",
        "created_at": "2021-08-31T13:11:44.506000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "cool!",
        "created_at": "2021-08-31T13:11:49.038000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Any deviation from that means that we sacrifice the principle that the proposer can just run the algorithm of \"choose the header with the biggest bribe\" (the goal being that keeping proposer algorithms simpler promotes staking decentralization and makes MPC staking pools easier to build) (re @vbuterin: Also, the whole concept of builder/proposer separation is built on the idea that the builder collects all the fees, and the only mechanism by which the proposer gets paid is the bribe in the header)",
        "created_at": "2021-08-31T13:12:15.932000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Have you thought about it as a new payment mechanism introduced to the beacon chain? It might be complex but won't require tricks with revealing all the information that is required to build a block which we're discussing currently",
        "created_at": "2021-08-31T13:13:08.522000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I believe there are several people who want the ability for a proposer to be able to tell their connected execution engine where to send fees.",
        "created_at": "2021-08-31T13:13:29.270000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e I feel like talking about  execution engines and proposers is mixing layers",
        "created_at": "2021-08-31T13:13:54.713000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Execution engine is part of a client",
        "created_at": "2021-08-31T13:13:58.905000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Proposer / builder is a separation between two economic actors",
        "created_at": "2021-08-31T13:14:05.633000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "But proposer's execution engine won't participate in a block proposal if a proposer chooses to use block builder market",
        "created_at": "2021-08-31T13:14:35.645000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e I think for builder/proposer separation, the \"header contains a bribe\" thing that's already in the sharding PoC is fine enough, but I would be fine with a separate on-beacon-chain transfer mechanism (re @merge_chat_bot: \u003cMikhail Kalinin [mkalinin]\u003e Have you thought about it as a new payment mechanism introduced to the beacon chain? It might be complex but won't require tricks with revealing all the information that is required to build a block which we're discussing currently)",
        "created_at": "2021-08-31T13:14:39.693000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Sorry, there are people who want the consensus client to be able to tell the execution client where to send fees.  This would be for scenarios where you have multiple validators, running on multiple consensus clients, backed by a single execution client.  You might legitimately do this for privacy reasons, or you might illegitimately do this for pooling reasons or execution client outsourcing reasons.",
        "created_at": "2021-08-31T13:14:47.930000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e So, if the builder is not the proposer, then the builder creates the block and chooses the coinbase, and there's an RPC method of the execution engine that does all of this",
        "created_at": "2021-08-31T13:15:43.589000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e And if the proposer self-proposes, then they do the same thing",
        "created_at": "2021-08-31T13:15:51.759000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e what's the problem?",
        "created_at": "2021-08-31T13:15:53.837000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Is this just a question of what params to include in the \"create a block proposal\" RPC method (regardless of which economic actor ends up using that method)?",
        "created_at": "2021-08-31T13:16:17.660000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm not opposed to making the coinbase optional in the prepare block method.",
        "created_at": "2021-08-31T13:16:21.212000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Right, it should be a separate method which pulls the best builder's proposal",
        "created_at": "2021-08-31T13:16:25.348000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Not a massive fan of the general idea of pushing more payments on to the consensus layer.  If there is to be a bribe from the block builder to the block proposer it should be a tx on the execution client if possible.",
        "created_at": "2021-08-31T13:16:30.514000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e The problem with that is that then you need a separate proof to prove to the proposer that the tx is there (re @merge_chat_bot: \u003cjgm\u003e Not a massive fan of the general idea of pushing more payments on to the consensus layer.  If there is to be a bribe from the block builder to the block proposer it should be a tx on the execution client if possible.)",
        "created_at": "2021-08-31T13:16:57.826000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e So it ends up creating considerably more protocol complexity than just making the header (which is needed anyway) have a fee field",
        "created_at": "2021-08-31T13:17:15.358000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e I definitely think that the proposer should NOT have any influence over block execution if they are not building the block themselves",
        "created_at": "2021-08-31T13:17:48.096000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Yes, but it introduces some complexity that is related to proposer revealing some information in order for builders to build a block. Some of this data like randao will be known only a slot before. Proposer's address that the payments go to should be somehow communicated, through the network probably",
        "created_at": "2021-08-31T13:18:16.810000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e It just complicates things if that happens (example: it could make it harder for builders to determine how much fees they collect in a block, and so what bribe they can safely pay to the proposer)",
        "created_at": "2021-08-31T13:18:21.639000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "My preference:\nShort term: Coinbase parameter on prepareBlock is optional.  Execution client can ignore it or use it.\nLong term: PROPOSER opcode or special PAY_PROPOSER transaction type or PROPOSER_PAYMENT header field is introduced that allows a block to pay the proposer, without knowing who that is in advance.  This would require more significant changes than are reasonable for The Merge, but I think long term this would be ideal as it would give builders a way to pay proposers.",
        "created_at": "2021-08-31T13:18:54.594000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e The good thing about the builder -\u003e proposer payment being in the header is that the builder can make the payment without needing to know who the proposer is! (re @merge_chat_bot: \u003cMikhail Kalinin [mkalinin]\u003e Yes, but it introduces some complexity that is related to proposer revealing some information in order for builders to build a block. Some of this data like randao will be known only a slot before. Proposer's address that the payments go to should be somehow communicated, through the network probably)",
        "created_at": "2021-08-31T13:18:57.871000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "If a header have a fee field then the corresponding proof should be passed anyway, no?",
        "created_at": "2021-08-31T13:19:12.289000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "No, headers will be visible to proposers, bodies are what is secret.",
        "created_at": "2021-08-31T13:19:28.479000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The proposer would see dozens or hundreds of headers that they can compare and choose the one they want.  Then they would pick the \"best\", and it is up to the builder at that point to provide the body.",
        "created_at": "2021-08-31T13:20:04.467000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Doesn't that mean that the bribe transfer is stuck on the consensus layer though?  Unless there is an additional field of execution address attached somewhere by the block publisher, there will be no information on where the bribe is to be sent.",
        "created_at": "2021-08-31T13:20:07.270000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I believe at the least sending ETH to the proposer is \"complicated\" and will require engineering not appropriate for The Merge.",
        "created_at": "2021-08-31T13:20:39.461000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "sorry, but I don't understand how *only* the *fee address* in the header would be enough information to redeem the bribe",
        "created_at": "2021-08-31T13:21:27.954000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Though I do like that as a long term solution.",
        "created_at": "2021-08-31T13:21:29.613000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The block header would contain a proposer_fee *amount*.",
        "created_at": "2021-08-31T13:21:51.895000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "And presumably the block would be signed by the builder.",
        "created_at": "2021-08-31T13:22:04.535000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "How that ETH actually gets transferred is a harder problem, I'm guessing some people have an idea for the full solution but I don't understand consensus-ETH well enough to formulate it.",
        "created_at": "2021-08-31T13:22:45.496000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think this would require bonded block builders, where essentially the block builder has ETH stashed somewhere (e.g., deposit contract) that they can't move around easily within a block and have to go through a withdraw process.",
        "created_at": "2021-08-31T13:23:35.561000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That is the ETH that would be used for paying proposers.",
        "created_at": "2021-08-31T13:23:45.100000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Right, that's basically what's required",
        "created_at": "2021-08-31T13:23:52.832000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "1. Block builder escrows some ETH (e.g., deposit contract).\n2. Block builder waits for that escrowed ETH to \"confirm\" (whatever that means).\n3. Block builder builds a block that they sign with a header that says \"the proposer of this block gets `n` of the ETH I escrowed in (1)\".\n4. Proposer compares a bunch of block headers and picks the one that pays them the most and proposes it.\n5. Assuming the block finalizes, the escrowed ETH would transfer from the builder to the proposer (hand waving what \"transferred\" means here).",
        "created_at": "2021-08-31T13:26:12.185000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It sounds like a new account type on the beacon chain. With the same properties as validator accounts but without requirement to validate. Not sure if it's a good idea to seed the beacon state with this new type of accounts.",
        "created_at": "2021-08-31T13:26:31.059000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "But it would make it easy for block proposer to redeem the bribe. I mean easy to designs such a logic",
        "created_at": "2021-08-31T13:26:58.808000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e We can just overload WITHDRAWN-status accounts for this purpose",
        "created_at": "2021-08-31T13:27:00.143000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Or alternatively, require builders to be validators and use their excess balance for this",
        "created_at": "2021-08-31T13:27:14.631000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Interesting, then they will have more skin in the game",
        "created_at": "2021-08-31T13:27:38.141000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Does that mean builders would have to stake 32 ETH + bonds?",
        "created_at": "2021-08-31T13:28:02.248000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e It does (re @merge_chat_bot: \u003cMicah\u003e Does that mean builders would have to stake 32 ETH + bonds?)",
        "created_at": "2021-08-31T13:28:09.919000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Can you have \u003e 32 ETH \"excess\"?",
        "created_at": "2021-08-31T13:28:15.159000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Or is excess %32?",
        "created_at": "2021-08-31T13:28:24.245000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Almost all validators live on mainnet have excess (re @merge_chat_bot: \u003cMicah\u003e Can you have \u003e 32 ETH \"excess\"?)",
        "created_at": "2021-08-31T13:28:30.955000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Ah I see waht you mean",
        "created_at": "2021-08-31T13:28:35.601000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Yeah you can have basically unlimited excess",
        "created_at": "2021-08-31T13:28:42.545000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Then we need to have some other status to withdraw builders' funds which adds the complexity to regular withdrawal flow where WITHDRAWN is the terminal status",
        "created_at": "2021-08-31T13:28:44.308000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Can a someone deposit ETH and then *not* validate without bleeding?",
        "created_at": "2021-08-31T13:29:00.667000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e ah sorry I messed up",
        "created_at": "2021-08-31T13:29:05.043000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e I meant WITHDRAWABLE",
        "created_at": "2021-08-31T13:29:08.751000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Once a validator withdraws, then that account turns into a stub and then disappears after a year",
        "created_at": "2021-08-31T13:29:19.978000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e They can if they never get to 32! (re @merge_chat_bot: \u003cMicah\u003e Can a someone deposit ETH and then *not* validate without bleeding?)",
        "created_at": "2021-08-31T13:29:29.573000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think builders will need bonds much bigger than 32 ETH if they are good at what they do.",
        "created_at": "2021-08-31T13:29:46.893000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e We could also add functionality for a message type for \"skip joining, just go straight to withdraw\"",
        "created_at": "2021-08-31T13:30:00.620000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You'll burn through 32 ETH in proposer payments incredibly quickly.  You'll make *more* in fees, but it will be segregated.",
        "created_at": "2021-08-31T13:30:08.613000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "If:\n  - block builder included the bribe amount in the execution block header\n  - block publisher included an execution address in the execution block header (signed perhaps by their BLS key but not part of the execution block header components signed by the block publisher)\n  - execution client took the bribe payment from COINBASE and transferred it to the block publisher's execution address\nwould that work?  It would be a lot simpler than mucking around with transfers on the consensus layer",
        "created_at": "2021-08-31T13:30:09.075000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "But then they won't be able to do a withdrawal that easy",
        "created_at": "2021-08-31T13:30:10.529000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The problem is that the block builder doesn't have the proposer's address in advance, unless we add some sort of advertisement system.",
        "created_at": "2021-08-31T13:31:15.054000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Actually, they can deposit whatever number of ETH they want to",
        "created_at": "2021-08-31T13:31:15.631000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "It doesn't need it.  The publisher adds that itself after receiving the block.",
        "created_at": "2021-08-31T13:31:36.466000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "As part of the slot header?",
        "created_at": "2021-08-31T13:32:03.277000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Yes (something that is passed to the execution layer, but not part of the header signed by the block builder)",
        "created_at": "2021-08-31T13:32:23.615000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Ah, I see.  So we would envelope blocks with some proposer metadata before including them in a slot or executing them.",
        "created_at": "2021-08-31T13:32:48.605000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Yep",
        "created_at": "2021-08-31T13:33:01.661000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So the tricky part is that the state root would need to not contain the transfer, it would need to be part of the following block's state root.",
        "created_at": "2021-08-31T13:33:24.589000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So when you process block `n`, the first thing you would do is process the transfer of funds from builder to proposer from parent block.",
        "created_at": "2021-08-31T13:33:46.077000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Seems reasonable, a 1-slot delay in payment wouldn't hurt.",
        "created_at": "2021-08-31T13:33:49.667000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yeah, I have no problem with the 1 slot delay in payment at all.  I worry a *little* about complexity, but the complexity for this may be lower than the complexity of the alternatives.",
        "created_at": "2021-08-31T13:34:27.789000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Paying with staked funds is arguably more complex.",
        "created_at": "2021-08-31T13:34:45.137000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "What guarantee of the next slot payment the proposer would have?",
        "created_at": "2021-08-31T13:34:52.760000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "We would still need to have the builder be bonded in a way that makes the ETH used to pay for block building immovable by them for the span of the block they are building.",
        "created_at": "2021-08-31T13:35:08.855000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That way you cannot propose a block that drops your balance to 0 and thus unable to pay proposer in the next block.",
        "created_at": "2021-08-31T13:35:24.169000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Depends what you mean by \"guarantee\".  You could reject the block if at the end of the block execution the state is such that COINBASE doesn't have enough funds to pay the bribe.",
        "created_at": "2021-08-31T13:35:50.993000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Which wouldn't guarantee the funds were available, but would guarantee the block wouldn't be executed without the builder paying the bribe.",
        "created_at": "2021-08-31T13:36:13.893000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Actually, we could just do `assert(block.builder.balance \u003e block.proposer_fee)` at the end of the block.  The block is invalid if that assertion doesn't hold.",
        "created_at": "2021-08-31T13:36:19.470000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It should be in-protocol payment that is done *before* the next block execution is started",
        "created_at": "2021-08-31T13:36:46.494000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It would be done at the start of execution of the following block, the first state transition.",
        "created_at": "2021-08-31T13:37:04.146000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Correct, but the condition for payment is checked beforehand, as per what Micah provided with his assert",
        "created_at": "2021-08-31T13:37:24.249000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "And timestamp + randao will be known to builders in advance. In a *slight* advance in case of randao",
        "created_at": "2021-08-31T13:38:09.859000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "* Builder block header includes `proposer_fee` and `builder_signature`.\n* The proposer adds a single field to that header (but otherwise leaves the block unchanged) which is `proposer_address`.\n* The block is valid only if `recover(block.builder_signature).balance \u003e= proposer_fee` is true at the end of the block (post-execution-state).\n* In the following block, the very first state transition would be `recover(block.parent.builder_signature).balance -= block.parent.proposer_fee` followed immediately by `block.parent.proposer_address += block.parent.proposer_fee`.",
        "created_at": "2021-08-31T13:40:38.656000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "And if `header.coinbase == header.proposer_address` then this first payment and the corresponding check is discarded. Or it may be that the `header.fee_amount` is just set to `0` in case if proposer and builder is the same entity",
        "created_at": "2021-08-31T13:41:25.623000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think setting `proposer_fee` to 0 is the way to go there.  Doesn't require any additional logic/checks.",
        "created_at": "2021-08-31T13:41:49.271000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "(A wrinkle here is that this is a direct balance change rather than a `transfer`, so are we happy with this if `proposer_address` is a smart contract?)",
        "created_at": "2021-08-31T13:45:30.576000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "And getting back to the Engine API, `coinbase` as a parameter to `engine_prepareBlock` seems perfectly co-exists with this mechanism",
        "created_at": "2021-08-31T13:45:31.673000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I like this plan for post-merge.  I still favor \"prepare block includes optional coinbase\" for The Merge.  Primary reason is to keep The Merge simple and avoid politics over introducing changes now.",
        "created_at": "2021-08-31T13:45:50.512000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yes, but the contract should not *execute*.  It should be like receiving mining rewards.",
        "created_at": "2021-08-31T13:46:11.742000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Yes, we're if the contract doesn't require the default method to be triggered. Actually, this is how the `coinbase` is topped up currently",
        "created_at": "2021-08-31T13:46:17.497000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Okay, happy with that (just wanted to raise it in case).",
        "created_at": "2021-08-31T13:46:33.147000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "*Optional* coinbase right?  Not required?",
        "created_at": "2021-08-31T13:46:52.430000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I suppose required is acceptable too, but \"not enforced\" is the critical bit.",
        "created_at": "2021-08-31T13:47:13.017000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Both cases are applicable, because proposer will request the payload from builder via a different method",
        "created_at": "2021-08-31T13:47:23.628000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "I think \"required but not guaranteed to be honoured\" is about right.",
        "created_at": "2021-08-31T13:48:33.651000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "1. `prepareBlock` contains no coinbase.\n2. `prepareBlock` contains a coinbase and the execution client uses it in the block returned from `getBlock`.\n3. `prepareBlock` contains a coinbase and the execution client does not use it in the block returned from `getBlock`.",
        "created_at": "2021-08-31T13:48:39.990000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "If there is a legit use case for execution client to use its own `coinbase`, for example, it might be required by some staking pools. Then we should make it optional and add the corresponding flag to the consensus client, like `--enforce-coinbase-verification` that would reject blocks if the `coinbase` is overwritten, and probably use something instead like an empty execution payload",
        "created_at": "2021-08-31T13:48:52.186000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Are all 3 acceptable?  Or only (2) and (3), or only (1) and (2)?",
        "created_at": "2021-08-31T13:49:02.311000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm fine with that.  Though, one can *imagine* having two validators connected to one execution client.  One validator wants the execution client to buy blocks from the builder network, and the other wants the execution client to build its own block and use a specific coinbase.",
        "created_at": "2021-08-31T13:50:45.964000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Having the coinbase be optional would allow for signalling as much.",
        "created_at": "2021-08-31T13:50:55.399000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Not sure it is worth designing around or not.",
        "created_at": "2021-08-31T13:51:05.728000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Then these two validators would use different endpoints, like `getPayload` and `buyPayload`. The latter doesn't require the `preparePayload` step",
        "created_at": "2021-08-31T13:51:45.850000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think you still would want the prepare step, as you may need to spend some time evaluating options, connecting to different things, executing multiple blocks, etc.",
        "created_at": "2021-08-31T13:52:20.588000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Even if someone else is *building* the block, it still takes non-trivial time to evaluate and validate all of the options.  We want the execution engine to be ready to immediately respond to `getPayload` without any delay.",
        "created_at": "2021-08-31T13:53:07.341000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So was it already accepted that the feature of publishing an execution payload without seeing it first is not enough of a DOS threat (due to the more than 12 seconds to execute?)",
        "created_at": "2021-08-31T13:53:46.496000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "You're right, something like `seekPayloadWithTheBestBid` + `getPayloadWithTheBestBid`",
        "created_at": "2021-08-31T13:53:48.451000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I don't see any system of builder/proposal separation where the proposer is not blind to execution time",
        "created_at": "2021-08-31T13:54:12.081000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Right, it's the thing that I was wondering to",
        "created_at": "2021-08-31T13:54:32.105000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "We have this resource exhaustion analysis after the Merge. Probably it makes sense to do this analysis in the context of builder/proposer separation",
        "created_at": "2021-08-31T13:55:11.675000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I think it's a requirement to even think about builder/proposer separation",
        "created_at": "2021-08-31T13:55:51.980000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "There are two tiers of solutions:\n1. You have some L2 reputation system or even human reputation (like flashbots, eden, bloxroute).\n2. You have an in-protocol mechanism for separating builder from proposer at the protocol layer where the builder can be slashed separately.",
        "created_at": "2021-08-31T13:56:16.612000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "For The Merge we almost certainly will be leaning on (1), where proposers either need to see the body themselves, or they need to trust someone who claims to have seen the body.",
        "created_at": "2021-08-31T13:57:01.344000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Post merge, there are proposals out that would make it so the proposer only gets punished if the header is invalid, and the builder would get punished if the body never shows up.",
        "created_at": "2021-08-31T13:57:41.946000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "I'd be inclined to keep this on an external reputation system unless that is shown to be unworkable",
        "created_at": "2021-08-31T13:59:06.760000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "What worries me is finding the payload that executes for ages and overbidding other builders each time to make these proposal brick the network. So, making builder market optional is one of the ways to mitigate this attack vector",
        "created_at": "2021-08-31T14:01:46.906000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "looks to me that if what Vitalik is suggesting above is implemented (essentially require builders to be validators) then adding this slashing mecanism is not much more overhead and it is more censor resistant than relying on human reputation",
        "created_at": "2021-08-31T14:02:11.195000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Though, it may be done with an empty payload too ðŸ¤”",
        "created_at": "2021-08-31T14:02:18.885000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "We could build a bonding/slashing system on another layer.",
        "created_at": "2021-08-31T14:03:07.257000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Recruitment is harder is all.",
        "created_at": "2021-08-31T14:03:13.440000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "How would you identify the builder in case of option 1?",
        "created_at": "2021-08-31T14:03:23.298000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Some sort of payment channel I'm guessing.",
        "created_at": "2021-08-31T14:03:42.667000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "They may change the address each time when doing something malicious",
        "created_at": "2021-08-31T14:04:05.079000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "When you publish a block to the marketplace, you publish some sort of promise that you will release the body.  If the body shows up, you can close the channel with a proof and get your money back.  If the body never shows up, it eventually releases to the proposer as compensation.",
        "created_at": "2021-08-31T14:04:20.302000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This isn't a reputation system, but a bonded system.\nA reputation system would just be a human thing: \"Proposers generally trust FlashBots and Eden, but not BlockHat1337.com.ru.in\"",
        "created_at": "2021-08-31T14:05:03.452000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It appears that there is an easier way to produce wasteful blocks than seeking for 12 seconds payload. So, builders have no incentive to seek for it.",
        "created_at": "2021-08-31T14:05:41.895000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I don't know why people are so scared of having more transactions in the beacon layer. It's not that engineering would be hard, and it touches a part of the state that changes every epoch anyway so it won't add computation to nodes. I think we can easily have the whole builder/proposer mechanism inside the beaconchain and avoid all obscure reveal/commit schemes to guarantee payment on the execution layer",
        "created_at": "2021-08-31T14:05:44.729000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "All code adds complexity, and complexity adds risk.",
        "created_at": "2021-08-31T14:06:18.590000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yeah but this complexity will be there anyway somewhere, I don't see why having it in the beaconchain will be more complex than on the execution layer, specially when you have to deal with reveal mechanism and advertising addresses and lots of comunications that are not necessary if you have payments on the beacon side",
        "created_at": "2021-08-31T14:07:22.336000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I believe \u003c@144468805697929216\u003e is arguing it shouldn't be in execution layer either.  It should be L2 somewhere.",
        "created_at": "2021-08-31T14:08:02.316000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Pushing complexity to L2 *is* valuable because it reduces risk in the base layer (the most critical piece).",
        "created_at": "2021-08-31T14:08:20.523000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "if both proposer and builder are on the beaconchain, the beacon can directly transfer the bribe to the proposer's balance and that's it, no need for any extra logic, and we can slash the builder which becomes known.",
        "created_at": "2021-08-31T14:09:10.561000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "If the only argument is \"it adds complexity\" then I'd say that it has to be measured against the complexity of the alternatives",
        "created_at": "2021-08-31T14:09:45.690000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "What would potential slashing conditions look like?",
        "created_at": "2021-08-31T14:10:09.268000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I'm not sure what are the behaviour we want to penalize. If it is execution time that will be hard either way.",
        "created_at": "2021-08-31T14:11:19.083000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It seems that block builder doesn't have an incentive to produce payloads with odd execution times",
        "created_at": "2021-08-31T14:11:45.958000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "As the question here is what is the purpose of doing this?",
        "created_at": "2021-08-31T14:12:25.743000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Maybe there isn't?  ðŸ¤”",
        "created_at": "2021-08-31T14:12:48.650000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Oh, no one can build on the proposer's slot if the block body never showed up, so the proposer cannot get paid.",
        "created_at": "2021-08-31T14:13:17.283000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "If \"this\" refers to moving payments to the beacon chain I'd say it looks simpler and cleaner. If \"this\" refers to adding blocks that execute forever no clue, people like to screw things up.",
        "created_at": "2021-08-31T14:13:35.153000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Unless we assert that the builder balance at the start of the block *also* has to be greater than the proposer_fee... in which case we can say that the next block can build on the slot with an empty block?",
        "created_at": "2021-08-31T14:13:47.755000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That way the proposer can still be paid by the builder, even if no body showed up.",
        "created_at": "2021-08-31T14:13:56.560000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Thats too much of a griefing attack. The proposer must be a able to get paid somethi ng",
        "created_at": "2021-08-31T14:13:57.721000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "it was referring to the latter",
        "created_at": "2021-08-31T14:14:20.731000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Though, the builder of block n+1 could then grief block n builder by refusing to build off of it.",
        "created_at": "2021-08-31T14:14:24.694000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Fundamental issue with this is that the builder is _not_ on the beacon chain.",
        "created_at": "2021-08-31T14:14:46.777000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think we can protect the proposer, but not the builder?",
        "created_at": "2021-08-31T14:14:51.739000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e The fork choice  is (no block, block without builder payaload available, block with payload)",
        "created_at": "2021-08-31T14:14:54.378000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Attestations make the builder of n+1 not able to do so",
        "created_at": "2021-08-31T14:15:10.915000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "That's my point: that I think it is simpler to have them both on the beaconchain and let the beaconchain take care of payments",
        "created_at": "2021-08-31T14:15:19.991000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Attestations require the block body?",
        "created_at": "2021-08-31T14:15:21.055000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Therr is a good ethresearch post on this",
        "created_at": "2021-08-31T14:15:23.166000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Also, we have a channel for this call block construction",
        "created_at": "2021-08-31T14:15:48.356000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e The attestation claims what block they saw and if the payload was available. Thus a ternary choice rather than binaty",
        "created_at": "2021-08-31T14:16:14.180000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "The builder is paid at the execution layer, so they'd have to be continually moving funds up to the consensus layer.  It would be ugly and painful, compared to keeping things as much as possible on the execution layer.",
        "created_at": "2021-08-31T14:16:33.589000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e This isnt necessarily solved but there is a good grounding post in ethresearch",
        "created_at": "2021-08-31T14:16:37.128000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Or you hoist this into the consensus with a new actor (re @merge_chat_bot: \u003cjgm\u003e The builder is paid at the execution layer, so they'd have to be continually moving funds up to the consensus layer.  It would be ugly and painful, compared to keeping things as much as possible on the execution layer.)",
        "created_at": "2021-08-31T14:17:06.312000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e See the temp sharding specs for an example",
        "created_at": "2021-08-31T14:17:13.908000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Not really, it's just as it is now with a validator having to set a coinbase on eth1... The builder will send a block with its coinbase on eth1 and pay bribes on eth2.",
        "created_at": "2021-08-31T14:17:22.521000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "How would the builder fund its account to pay bribes on consensus layer?",
        "created_at": "2021-08-31T14:18:20.102000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "So, if we follow the payment scheme on the execution layer and the block takes 12 seconds to get executed then the bribe will very likely not be paid as the block won't be accepted by the network. While if we use consensus layer payment scheme the bribe is guaranteed to be paid",
        "created_at": "2021-08-31T14:18:26.729000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Actually, the latter isn't true as the block won't be accepted as well",
        "created_at": "2021-08-31T14:18:50.725000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "is just an extra deposit now and then... no fuzz really",
        "created_at": "2021-08-31T14:18:54.345000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If the builder gets paid on execution side, and they pay on beacon side then they'll rapidly run out of money and be stuck waiting for a withdraw before they can do more useful work, unless they are very wealthy.",
        "created_at": "2021-08-31T14:18:57.585000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e I think we should move this to #block_construction",
        "created_at": "2021-08-31T14:19:22.091000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "And a new consensus entity, and a bunch of additional transactions on the consensus chain.",
        "created_at": "2021-08-31T14:19:24.445000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "The consensus layer scheme seems to have the same guarantees as the execution layer payments in case of a block that takes 12 seconds to get executed",
        "created_at": "2021-08-31T14:19:37.743000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "there's such a channel ? ðŸ™‚",
        "created_at": "2021-08-31T14:19:42.667000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e That channel was made for these discussions and there is no way these in protocol changes make it to the initial merge",
        "created_at": "2021-08-31T14:19:55.343000+00:00",
        "attachments": null
    }
]