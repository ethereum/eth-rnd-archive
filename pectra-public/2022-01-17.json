[
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "QQ: Did we decide on what to do if the timestamp of the payload to be created is too far in the future? \nCurrently, we warn but not return an error. I think returning `invalid` would be the best way to go? cc \u003c@!425572898787426305\u003e",
        "created_at": "2022-01-17T11:59:28.149000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "There is a PR and related discussion here https://github.com/ethereum/execution-apis/pull/121. It's been closed but if you think it's valuable we may re-open and get back to the discussion. Do you have any new arguments on why this check is valuable? \n\nI am not opposed to have this check if \"too far\" is a minute (as commented in the PR) but I don't think we can maintain a tighter restriction.",
        "created_at": "2022-01-17T12:33:58.582000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "I kinda disagree with \u003c@!543900561460822016\u003es reasoning on the PR. If the EL is supposed to check that timestamp \u003e parent.timestamp it should also be able to refuse mining blocks too far in the future. Adding this requirement would really improve engine fuzzing btw, since right now the fuzzer will quickly create blocks that are very far in the future, s.th. subsequent blocks are rejected, which greatly reduces the ability of the fuzzer to create blocks. \nI'm still not sure about it though.",
        "created_at": "2022-01-17T12:41:07.658000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "The more I think about it, the more I kinda agree that it is superfluous",
        "created_at": "2022-01-17T12:41:29.961000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "In my view, it would help to quickly identify the case when EL's machine clocks are drifting with respect to CL's one. Though, it would also be achieved by the consensus side check (`assert payload.timestamp == compute_timestamp_at_slot(state, state.slot)`) but is less obvious in terms of debugging. I can't find it is usable, other than that",
        "created_at": "2022-01-17T12:44:47.553000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Why does it matter if the EL clock is off?  Timestamps all come from the CL I thought?",
        "created_at": "2022-01-17T12:46:14.239000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I thought the CL just said, \"please create a block, here is the timestamp for that block\" and the EL just followed those instructions?  Similarly, when a new block arrives to the CL I assumed it would validate it had the expected timestamp for the slot before passing it along to the EL for execution?",
        "created_at": "2022-01-17T12:46:59.886000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If those are both true, it seems like the EL could have a wildly wrong clock and it wouldn't matter because its clock is never used?",
        "created_at": "2022-01-17T12:47:16.668000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Those are both true. But I am not sure that drifting clock wouldn't affect a running EL client at all",
        "created_at": "2022-01-17T12:48:32.401000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Does the execution client use the system clock for something else?",
        "created_at": "2022-01-17T12:48:49.666000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Not with respect to consensus and EVM I guess, but probably for other things ðŸ¤”",
        "created_at": "2022-01-17T12:49:23.881000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "\u003e time.now() 414 results in 156 files\nWe use it for a lot of things",
        "created_at": "2022-01-17T12:49:42.612000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "How many of those are tests?",
        "created_at": "2022-01-17T12:49:53.393000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Most of them probably",
        "created_at": "2022-01-17T12:50:01.176000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Then it seems like we shouldn't introduce a consensus requirement on the execution client having an accurate clock if it isn't necessary for consensus.",
        "created_at": "2022-01-17T12:50:11.696000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If *some* execution clients have a need for an accurate clock for other reasons that is fine, they can continue depending on an accurate system clock.  I just don't like creating a spec requirement for it when it isn't necessary.",
        "created_at": "2022-01-17T12:50:53.728000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Of the ones that aren't tests, how many of them are just timing how long something takes by looking at the time before and after an action?",
        "created_at": "2022-01-17T12:51:33.314000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "(e.g., timeouts for network requests)",
        "created_at": "2022-01-17T12:51:46.848000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Lots of them are used for metrics, timeouts for caches, batching writes to db etc",
        "created_at": "2022-01-17T12:53:09.974000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So you need a precise clock, not an accurate clock.  ðŸ˜„",
        "created_at": "2022-01-17T12:53:51.440000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "I'm pretty sure that drift would be okay for geth, but setting some arbitrary time in the future will probably blow things up",
        "created_at": "2022-01-17T12:54:16.263000+00:00",
        "attachments": null
    },
    {
        "author": "johnydony",
        "category": "general",
        "parent": "",
        "content": "Optimistic sync is not the issue to run Kintsugi testnet?\nStill some CL clients working on it.",
        "created_at": "2022-01-17T14:09:21.514000+00:00",
        "attachments": null
    }
]