[
    {
        "author": "yperbasis",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've been thinking about total difficulty vs block number as the Merge trigger. As far as I understand it, total difficulty prevents an attack with bogus timestamps. I.e. the attacker could produce blocks with timestamps far into the future, decreasing each block's difficulty. This is the only security benefit I see of using total difficulty vs block number since, modulo timestamps \u0026 uncles, total difficulty is a deterministic function of the block number. But geth prohibits timestamps in the future, so perhaps this attack is infeasible?",
        "created_at": "2021-11-29T14:27:24.823000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Adversary may modify geth, and malicious chain may be revealed when the transition is already done (not yet finalized though). The merge is the handover of fork choice rule, the right way of thinking this should happen is canonical block according to TD rule in PoW is picked up as the terminal one. Since this is TD rule and not a block number rule then we must use TD to do this right. The minority fork attack is an example of a bad thing that may happen if we do the handover not in the right way.",
        "created_at": "2021-11-29T14:35:47.922000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I see. Another question about the Engine API. CL can replace feeRecipient in a payload, right? Will it then recalculate blockHash accordingly?",
        "created_at": "2021-11-29T15:34:54.366000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Actually, sorry, I don't understand who is responsible for changing feeRecipient: CL or EL?",
        "created_at": "2021-11-29T15:36:26.793000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "CL is suggesting the value of the `feeRecipient`, EL may reject the suggestion and put its own address into this field. The latter allows for block production schemes based on the coinbase opcode to exist. For example, there can be an EL client that uses the same method for preparing payloads but seek for ready payloads on the block builders market instead of creating it with mempool transactions.",
        "created_at": "2021-11-29T15:41:09.111000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The main goal of TD as merge trigger is to make sure that the block that gets selected as the terminal block actually is the winner of the fork choice",
        "created_at": "2021-11-29T16:25:29.929000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "right",
        "created_at": "2021-11-29T16:25:39.950000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do we plan to put the \"how to find safehead\" algorithm in the spec repo somewhere? The algo is clear from Dankard's presentation, but it may be valuable to put it in the spec (i.e. fork.md?)",
        "created_at": "2021-11-29T18:08:05.606000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "good point, it should be!",
        "created_at": "2021-11-29T19:20:13.087000+00:00",
        "attachments": null
    },
    {
        "author": "hikariws",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is there any reason for PoW chain to be merged into Beacon, instead of leaving Beacon lean and responsible for coordinating sidechains, and turn PoW chain to the first sidechain?",
        "created_at": "2021-11-29T19:24:22.614000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think that path would just lead to more complexity",
        "created_at": "2021-11-29T19:24:45.706000+00:00",
        "attachments": null
    },
    {
        "author": "hikariws",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "why is it more complex? because the merge would happen together with creating a sidechain?",
        "created_at": "2021-11-29T19:25:24.049000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "because the end state would have two connected chains instead of a single chain",
        "created_at": "2021-11-29T19:25:40.121000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So it would be harder to reason about",
        "created_at": "2021-11-29T19:25:44.915000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The sharding spec doesn't actually create multiple chains; the shard blocks connect directly into the beacon chain",
        "created_at": "2021-11-29T19:26:03.476000+00:00",
        "attachments": null
    },
    {
        "author": "hikariws",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hm got it, so the sidechain would need to be created first to then do the merge into it",
        "created_at": "2021-11-29T19:26:38.432000+00:00",
        "attachments": null
    },
    {
        "author": "hikariws",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "could u link where the sharding spec is?",
        "created_at": "2021-11-29T19:26:51.994000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs#sharding",
        "created_at": "2021-11-29T19:27:06.998000+00:00",
        "attachments": null
    },
    {
        "author": "hikariws",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "tnx!",
        "created_at": "2021-11-29T19:27:18.344000+00:00",
        "attachments": null
    }
]