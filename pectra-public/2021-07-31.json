[
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Miners can stop hashing leading up to the TTD, which will delay things.  However, in that case there is a strong incentive to defect because any miner who defects and mines the heaviest chain will make more money.",
        "created_at": "2021-07-31T05:54:28.359000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Exception of course for a 51% attack who secretly mines a different chain toward TTD.",
        "created_at": "2021-07-31T05:54:44.942000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@425572898787426305\u003e Can you update the discussions-to thread on Ethereum Magicians to point at the EIPs site in the first post, rather than the pull request?\n\u003chttps://ethereum-magicians.org/t/eip-3675-upgrade-consensus-to-proof-of-stake/6706\u003e should have a link to \u003chttps://eips.ethereum.org/EIPS/eip-3675\u003e",
        "created_at": "2021-07-31T06:39:43.200000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm thinking more of a coordinated effort after the first embedded PoW block and before the chain is finalized to make that last more than two epochs.",
        "created_at": "2021-07-31T06:56:47.331000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Once the first valid TTD block is seen, the switch to Proof of Stake is essentially guaranteed and it is just a matter of time at that point.",
        "created_at": "2021-07-31T06:58:17.177000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is the point of no return where miners can no longer do anything to slow or stop the transition.",
        "created_at": "2021-07-31T06:58:31.173000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess I missed how reorgs in those first few slots were dealt with",
        "created_at": "2021-07-31T09:20:29.929000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Once a consensus block producer notices a TTD block from the execution client, it will build a consensus block that contains an execution block that points at the TTD block as its parent.",
        "created_at": "2021-07-31T09:27:55.990000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "At that point, consensus engine will take over and things will proceed on the consensus chain.",
        "created_at": "2021-07-31T09:28:20.986000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The reason we have to gossip all TTD PoW blocks is because an execution client cannot be sure which TTD PoW block (in the case where there are many) is the one that ends up being included and eventually finalized by PoS.",
        "created_at": "2021-07-31T09:28:53.711000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So it has to be \"ready\" for PoS to pick any of them.",
        "created_at": "2021-07-31T09:28:59.795000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Assuming no attacks, there will be maybe 1 or 2 TTD blocks ever produced and the first one to be referenced by a transition block will probably be the one that gets finalized.",
        "created_at": "2021-07-31T09:30:07.512000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Everything else is just edge cases assuming miners are doing weird things with custom client builds.",
        "created_at": "2021-07-31T09:30:22.887000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah what I'm not understanding is why new TTD blocks cannot be seen between the first seen one and then first finalized one.",
        "created_at": "2021-07-31T09:34:57.626000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What do you mean by \"cannot be seen\"?",
        "created_at": "2021-07-31T09:35:17.647000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "TTD blocks are gossiped by the execution client, not the consensus client.",
        "created_at": "2021-07-31T09:35:28.759000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So if execution client stops gossiping any blocks as soon as it sees *a single* TTD block then the TTD block that ends up getting finalized may not be the one that all participants in the network actually have.",
        "created_at": "2021-07-31T09:36:13.432000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Which would mean that those participants wouldn't be able to move forward with PoS.",
        "created_at": "2021-07-31T09:36:28.451000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So as a defense against this, we want to ensure that execution clients gossip **all** TTD blocks around until PoS finalizes one.",
        "created_at": "2021-07-31T09:36:54.683000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That part I get, also I get that there's a problem if there are too many of them. And that miners can continue mining them until one is finalized. What I'm wandering is if there's something miners can collude (probably with some validators) to delay finalization. But I guess you already told me that they can't (probably without a 33% attack)",
        "created_at": "2021-07-31T09:40:37.715000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "With 51% miner collusion they could drive the difficulty down slowly over time leading up to the merge.",
        "created_at": "2021-07-31T09:42:17.587000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Which would cause the time until TTD to increase.",
        "created_at": "2021-07-31T09:42:23.510000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "To do this, the 51% cabal would censor any miner who mined a block faster than 900 seconds per block.",
        "created_at": "2021-07-31T09:42:44.909000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And the cabal would (somehow) coordinate among itself as to who got the privilege of mining the 900 second block each time.",
        "created_at": "2021-07-31T09:43:18.160000+00:00",
        "attachments": null
    }
]