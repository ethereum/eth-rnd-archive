[
    {
        "author": "garyrong",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And what if the eth2 node is out of sync but the eth1 node is already at the transition boundary? I think in this case the local chain will follow the \"legacy pow chain\"(because miners are mining) but whenever the eth2 node is synced, `newHead` will guide eth1 node to reorg back. Although a big reorg is expected",
        "created_at": "2021-04-23T02:09:29.616000+00:00",
        "attachments": null
    },
    {
        "author": "garyrong",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And another question.\n\n```\nTransition mode. PoW blocks are received from the wire, verified and processed as usual. It implies missing ancestor blocks are being requested from other peers. Total difficulty rule is replaced by the external fork choice rule.\n```\n\nDoes it mean during the `transition` phase, both pow blocks and pos blocks can be received? `PoWBlock` means the block mined by miner with legacy ethash/clique consensus. `PoSBlock` means the block sent by consensus layer in stripped format through `NewBlock` event.",
        "created_at": "2021-04-23T06:10:55.591000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think you do need to accept PoW blocks during the transition phase",
        "created_at": "2021-04-23T18:36:38.629000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The reason is, suppose that the first embedded block you receive is on top of PoW block A",
        "created_at": "2021-04-23T18:36:50.275000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But then the beacon chain reorgs, and the new chain's first embedded block is on top of PoW block B",
        "created_at": "2021-04-23T18:37:10.692000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And you know A, but you do not yet know B",
        "created_at": "2021-04-23T18:37:18+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Because of latency issues",
        "created_at": "2021-04-23T18:37:23.825000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You need to have the ability to accept B remain open, so that once you to receive it you'll be able to validate the new embedded block",
        "created_at": "2021-04-23T18:37:52.432000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But you only need to accept siblings of the fork block, not children.",
        "created_at": "2021-04-23T18:54:41.429000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "right",
        "created_at": "2021-04-23T18:54:50.110000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Actually, there's no need to accept children of an eligible final PoW block under any circumstances",
        "created_at": "2021-04-23T18:55:04.353000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ie. for any block B where totdiff(B) \u003e= target, there's no value in accepting children of B (except of course embedded blocks)",
        "created_at": "2021-04-23T18:55:28.767000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Assuming everything goes perfectly smoothly and no one attacks, you may see one or two valid PoW terminal blocks and a bunch of children that you can ignore.",
        "created_at": "2021-04-23T18:55:48.206000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yep",
        "created_at": "2021-04-23T18:55:53.702000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In fact, you can probably un-peer anyone who sends you a child of a valid fork block.",
        "created_at": "2021-04-23T18:56:05.275000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "just ignore it the same way you ignore a block that provides an unknown parent",
        "created_at": "2021-04-23T18:56:21.313000+00:00",
        "attachments": null
    },
    {
        "author": "dkdkdkdkdkdk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "would this have to continue until the beacon chain can't reorg far back enough?",
        "created_at": "2021-04-23T18:58:12.137000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "correct",
        "created_at": "2021-04-23T18:58:18.861000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The \"transition phase\" is defined as beginning when a node receives a valid embedded block for the first time, and ending when an embedded block is inside the finalized portion of the beacon chain",
        "created_at": "2021-04-23T18:58:49.866000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "btw has anyone on the rayonism side started implementing transition conditions, or is everyone still only working on the post-merge steady-state so far?",
        "created_at": "2021-04-23T18:59:55.151000+00:00",
        "attachments": null
    },
    {
        "author": "dkdkdkdkdkdk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "protolambda mentioned that the transition is out of scope for rayonism",
        "created_at": "2021-04-23T19:04:00.686000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I thought Rayonism was The Merge testnet?",
        "created_at": "2021-04-23T19:04:21.823000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Which would mean the transition is explicitly in scope?",
        "created_at": "2021-04-23T19:04:32.927000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "He said that the transition is out of scope for phase 1 of rayonism",
        "created_at": "2021-04-23T19:04:37.631000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Rayonism today, and for the hackathon, is about Post-merge: making sure the destination is ready, before trying to fork into it. The transition is just a short critical moment, that bridges pre and post merge.",
        "created_at": "2021-04-23T19:06:46.260000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, \"Rayonism\" is the name of the project as a whole. If you have suggestions for devnet and testnet names, please share.",
        "created_at": "2021-04-23T19:07:39.487000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "got it",
        "created_at": "2021-04-23T19:08:24.083000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "How difficult to you expect the transition to be compared to the post-merge stuff?",
        "created_at": "2021-04-23T19:08:36.842000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Apart from some fun sync edge cases, I don't think it's too difficult from a technical perspective. It's a critical thing though, coordination will make it difficult regardless.",
        "created_at": "2021-04-23T19:10:51.430000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If you split Rayonism/merge-dev into phases, I would list it as:\n1. Early hackathon, common prototype: Rayonism post-merge devnets (EVM starting from genesis)\n2. Mid hackathon, in parallel:\n  - Eth2 clients work on proper fork model (instead of phase0 modifications)\n  - Eth1 clients iterate on new sync and chain management (unblocked, can use eth2 prototypes)\n  - Users can help break testnets, prepare for full merge testnets\n3. End-hackathon, in parallel:\n  - Eth1 teams + 1/2 of Eth2 resources: prepare merge transition approach\n  - Other 1/2 of Eth2 resources: help experiment with sharding, try get to small prototype testnet\n4. Post-Rayonism (after hackathon): time to implement merge transition, and try it on Pyrmont/Prater/Gorli (or copies of those)",
        "created_at": "2021-04-23T19:21:22.182000+00:00",
        "attachments": null
    },
    {
        "author": "garyrong",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yup, this makes a lot of sense!",
        "created_at": "2021-04-23T21:24:48.615000+00:00",
        "attachments": null
    }
]