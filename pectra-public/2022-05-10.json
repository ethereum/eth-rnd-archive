[
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Yes, the reason being that the world-state is not present in the network",
        "created_at": "2022-05-10T08:00:30.721000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Due to pruning. Otherwise we'd have to retain all finalized stateroots, which means it almost becomes an archive node",
        "created_at": "2022-05-10T08:01:42.643000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "cc \u003c@206016661470314496\u003e do you agree?",
        "created_at": "2022-05-10T08:01:59.798000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Yeah we discussed this in yesterdays security call",
        "created_at": "2022-05-10T08:02:48.666000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Ah ok, well now it's there if anyone else wonders",
        "created_at": "2022-05-10T08:04:32.812000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "what is average finalization time on Beacon Chain?",
        "created_at": "2022-05-10T08:22:39.498000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "And our testnets?",
        "created_at": "2022-05-10T08:24:51.566000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "on mainnet 384 seconds / epoch, and every epoch the previous justified will pretty much finalize, so every 384 seconds, but the finalized epoch will be 2 epochs old so 768 seconds... is 768 seconds the number you're looking for?",
        "created_at": "2022-05-10T08:34:47.195000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "768 is 64 blocks?",
        "created_at": "2022-05-10T08:35:21.757000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "yep",
        "created_at": "2022-05-10T08:35:27.820000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "no optimal as Geth has 128 snapshots to sync, that gives us 64 blocks worth of finalized data, and its a happy path",
        "created_at": "2022-05-10T08:36:26.087000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "Nethermind currently prunes in 64 blocks, but we can easily move that to 128 or even 256, but that will increase either memory footprint or data saved to SSD.",
        "created_at": "2022-05-10T08:37:27.767000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "so in 'non optimal conditions' we may not finalize that fast",
        "created_at": "2022-05-10T08:37:52.173000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "\u003c@211091239112671234\u003e would it be possible to increase the number of snapshots in Geth from 128 to 256 or more?",
        "created_at": "2022-05-10T08:37:57.492000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "there's been periods where testnets went days without finalizing but less likely on mainnet i would expect",
        "created_at": "2022-05-10T08:38:17.152000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "yeah I know, but thats the case we cannot really handle well",
        "created_at": "2022-05-10T08:38:38.819000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "noone handled a week of non finalization particularly well if thats any consolation... ðŸ™‚",
        "created_at": "2022-05-10T08:39:01.150000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "maybe in Nethermind late this year when we change our State storage model, but even then it might not be performant enough",
        "created_at": "2022-05-10T08:39:30.214000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "That doesn't sound encouraging",
        "created_at": "2022-05-10T08:40:12.940000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "i think the issues were resolved, not sure we've had long finalization to really see how things hold up in the current world order though",
        "created_at": "2022-05-10T08:40:44.570000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Changing from `128` to `256` has two immediate effects\n1. Increased memory footprint for recent non-prunable state data (2x). This is a pretty large set of data. \n2. Impaired pruning. Right now, we have 128 state roots which we cannot touch, with out in-memory pruner. Older stateroots are up for grabs, so we can start pruning state data that is \u003e128 blocks old, and become unreferenced. However, if we double the size of untouchable data, then the space for \"pruning-eligible\" data decreases. So essentially the pruning will be less effective, probably by quite a lot.",
        "created_at": "2022-05-10T09:30:20.078000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "yeah I know :/ \nQuestion is what safety vs performance level do we think is acceptable here",
        "created_at": "2022-05-10T10:18:15.432000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "What is the safety concern? Note: our reorg capability is higher than 128, but deeper reorgs take longer time (potentially an hour or two)",
        "created_at": "2022-05-10T10:50:47.128000+00:00",
        "attachments": null
    },
    {
        "author": "accexau",
        "category": "general",
        "parent": "",
        "content": "Gents problem with sepolia \u003c@199561711278227457\u003e \u003c@360491619402776577\u003e",
        "created_at": "2022-05-10T10:55:21.329000+00:00",
        "attachments": null
    },
    {
        "author": "accexau",
        "category": "general",
        "parent": "",
        "content": "Lastblock 4 hours ago \u003c@552133098075193354\u003e in the Explorer utility our node is ok no query issues",
        "created_at": "2022-05-10T10:56:17.326000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "So the chain is not progressing? Or the explorer is down?",
        "created_at": "2022-05-10T11:05:44.321000+00:00",
        "attachments": null
    },
    {
        "author": "accexau",
        "category": "general",
        "parent": "",
        "content": "Sorry, looks like explorer is down our node is ok",
        "created_at": "2022-05-10T11:06:14.720000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ethereum/execution-apis/blob/main/src/engine/specification.md#forkchoicestatev1 just want to be 100% sure, so not only finalizedBlockHash, but also safeBlockHash can be 0x00..00, right?",
        "created_at": "2022-05-10T11:49:35.588000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Yes, this is correct:\n1) Merge transition block comes with `finalizedBlockHash` and `safeBlockHash` set to `0x00..00`\n2) `safeBlockHash` points to existing block after transition block is *justified*\n3) `finalizedBlockHash` points to existing block once transition one is *finalized*",
        "created_at": "2022-05-10T11:54:27.361000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "newly synced nodes can potentially not be able to reorg, especially if finalization gets longer than 64 blocks",
        "created_at": "2022-05-10T11:57:55.677000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "sepolia is PoW, so no need for \"admin\" to step in. It will progress whenever someone mines on it",
        "created_at": "2022-05-10T12:06:01.061000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Yeah. Not sure we can do anything about this, to be honest. But it's definitely something that can be discussed",
        "created_at": "2022-05-10T12:08:59.097000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "Thx \u003c@425572898787426305\u003e ðŸ™‚ I think I didn't find it in engine spec that is why I was asking.",
        "created_at": "2022-05-10T12:12:21.931000+00:00",
        "attachments": null
    },
    {
        "author": "matkt0",
        "category": "general",
        "parent": "",
        "content": "but do we want a block finalized all along the snapsync. if we guarantee that the majority are finalized (and the last one) ? this can lead to more heal in the end though",
        "created_at": "2022-05-10T12:14:58.783000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "general",
        "parent": "",
        "content": "Lighthouse is planning a *breaking and non-migrating* database upgrade that only affects post-merge testnets (e.g., Kiln, shadow forks). This means that after we merge the relevant PR (see bottom of post) in the coming days, all post-merge testnet users will need to either:\n\n1. Stay on whatever version they're currently using.\n2. Delete their database, upgrade to the new version and then re-sync.\n\nThe purpose of this upgrade is to separate the storage of `BeaconBlock` and `ExecutionPayload` into separate database columns. This will allow us to do more interesting pruning strategies and de-duplication between EE/CE.\n\nWe're requiring a re-sync because the migration code would cost precious developer hours to write and test. Since we're in the fairly early stages of testnets, we're taking this opportunity to move fast and break things. Thanks and apologies for the inconvenience.\n\nOnce this PR merges, you'll need to re-sync in order to use `unstable`: https://github.com/sigp/lighthouse/pull/3157",
        "created_at": "2022-05-10T23:51:31.430000+00:00",
        "attachments": null
    }
]