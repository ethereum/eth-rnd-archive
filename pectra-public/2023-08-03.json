[
    {
        "author": "__flcl",
        "category": "general",
        "parent": "",
        "content": "\u003c@583892532644151312\u003e \u003c@792822129019584562\u003e regarding 426 https://github.com/ethereum/execution-apis/pull/426/files#diff-556d0544d517a1fe1242173c7d23c7cb5f3153bad5eeec9293865df9eefd349aR107\nLooks like `engine_forkchoiceUpdatedV3` has that constraint about to be available only in Cancun. It states:\n\n\u003e 2. Client software **MUST** return `-38005: Unsupported fork` error if the `payloadAttributes.timestamp` does not fall within the time frame of the Cancun fork.",
        "created_at": "2023-08-03T16:19:13.448000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but what if its a normal fcU (without payload attributes)",
        "created_at": "2023-08-03T16:22:00.276000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "may be we put a constraint on the current time? like fcU current time has to match the fork when not with payloadAttributes?",
        "created_at": "2023-08-03T16:23:04.634000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "I think it can be similar to how fcuV2 is preferrered over V1. From shanghai.md: \"Consensus layer client MUST call this method instead of engine_forkchoiceUpdatedV1 under any of the following conditions:\nheadBlockHash references a block which timestamp is greater or equal to the Shanghai timestamp,\npayloadAttributes is not null and payloadAttributes.timestamp is greater or equal to the Shanghai timestamp.\"",
        "created_at": "2023-08-03T16:29:26.887000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "I wouldn't involve current time since current time might be different between machines.",
        "created_at": "2023-08-03T16:30:13.277000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but if the headBlockHash is not in EL i.e. syncing case, then the validation can't be made",
        "created_at": "2023-08-03T16:30:28.527000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "we can do +- 5 sec?",
        "created_at": "2023-08-03T16:30:54.348000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "Nah, I wouldn't involve physical time, that's brittle. It's not a big deal to accept fcuV2 w/o payload even post-Cancun.",
        "created_at": "2023-08-03T16:32:55.853000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "true",
        "created_at": "2023-08-03T16:33:14.834000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "well all forks and slots are based off on physical time so we can't let it be brittle ðŸ™‚",
        "created_at": "2023-08-03T16:33:44.950000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but i am fine with your proposition",
        "created_at": "2023-08-03T16:33:57.727000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "infact that is better for the CL since it would be deciding which method to use based on the headBlockHash's beacon block fork",
        "created_at": "2023-08-03T16:36:19.138000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "added comment to reflect this: https://github.com/ethereum/execution-apis/pull/426/files#r1283502465",
        "created_at": "2023-08-03T17:20:59.233000+00:00",
        "attachments": null
    }
]