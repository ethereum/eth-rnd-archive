[
    {
        "author": "mightypenguin",
        "category": "general",
        "parent": "",
        "content": "I think selfish mining will make things work out.\nA miner could try to protest the ETH merge by NOT mining, but then they for sure won't make money during that period.\nIf ETH is destroyed or split, how does that help the miner?\nThey just gave up the last day or so of money they could have made.\nMost small miners I think will want to keep mining to get all they can until the merge.",
        "created_at": "2021-06-11T01:46:27.700000+00:00",
        "attachments": null
    },
    {
        "author": "quezacoa",
        "category": "general",
        "parent": "",
        "content": "Yes, they are not amused but they would help us get rid of POW and probably the GPU market would be flooded with cheap cards eventually.",
        "created_at": "2021-06-11T05:58:53.116000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Attract gamers to the Merge process to let them buy GPUs at a reasonable price? Sounds interesting",
        "created_at": "2021-06-11T06:22:25.535000+00:00",
        "attachments": null
    },
    {
        "author": "quezacoa",
        "category": "general",
        "parent": "",
        "content": "If the miners do not (all) switch to any other coin it may work...",
        "created_at": "2021-06-11T08:09:44.543000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "There seem to be not that much of a room in other coins, at least today",
        "created_at": "2021-06-11T08:17:13.524000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "\u003c@!425572898787426305\u003e is there no way of using `randao_reveal` in place of difficulty?",
        "created_at": "2021-06-11T10:34:22.857000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "but don't take this too seriously, just waking up from a bad night and woke to see your PR, no coffee yet.",
        "created_at": "2021-06-11T10:35:01.774000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdannyryan\u003e Why randao_reveal instead of the current randao mix?",
        "created_at": "2021-06-11T12:09:11.592000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e https://github.com/ethereum/eth2.0-specs/pull/2479",
        "created_at": "2021-06-11T12:55:56.913000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e this PR seems to use the randao mix",
        "created_at": "2021-06-11T12:56:01.218000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yes, my question is because the reveal is included in the beacon block body anyway",
        "created_at": "2021-06-11T13:49:32.755000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So perhaps it can be moved to the execution payload and reuse it",
        "created_at": "2021-06-11T13:50:25.068000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e mix is better because it's less predictable I guess",
        "created_at": "2021-06-11T13:56:41.939000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Like, if you're a proposer you can't even know your future mix unless you're going to propose in every slot between now and that slot",
        "created_at": "2021-06-11T13:57:20.393000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I see so the proposer can already compute reveal at the beginning of the epoch right? So perhaps adding state or slot dependent data to the computation of the reveal is not worth the saving of these bytes per block?",
        "created_at": "2021-06-11T14:06:01.203000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Right, mix is used as the most recent entropy that the system came up with til the current moment",
        "created_at": "2021-06-11T16:43:06.560000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Right but at least looking at clients implementation it doesn't seem to be any harder to mix in the block hash in the randao_reveal since anyway they are computing it at the slot they are proposing",
        "created_at": "2021-06-11T17:33:53.958000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "This way you get something that is not predictable and you do not need to include this field twice in the block",
        "created_at": "2021-06-11T17:34:31.498000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I am sorry, what do you mean by the block hash mixed in the randao_reveal?",
        "created_at": "2021-06-11T18:08:23.904000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "To change \n```\ndef get_epoch_signature(state: BeaconState, block: BeaconBlock, privkey: int) -\u003e BLSSignature:\n    domain = get_domain(state, DOMAIN_RANDAO, compute_epoch_at_slot(block.slot))\n    signing_root = compute_signing_root(compute_epoch_at_slot(block.slot), domain)\n    return bls.Sign(privkey, signing_root)\n```\nTo instead of signing `compute_epoch_at_slot`  to sign some object that includes up to the parent block",
        "created_at": "2021-06-11T18:12:13.879000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "so that the proposer cannot know his future reveal right up to his turn,",
        "created_at": "2021-06-11T18:13:33.617000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "but perhaps that's not possible?",
        "created_at": "2021-06-11T18:13:38.450000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Do you mean that if you own two proposers in a row you're able to know the mix in advance and if you sign a block hash (which is not known in advance) you can reduce predictability?",
        "created_at": "2021-06-11T18:23:07.470000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "That may be true, but what my original question was asking is the following: in your new PR you propose to include the `randao_mix`  as an entropy data that can play the role of `difficulty`  now. I am only pointing out that already the block body carries a field related to randao which is the randao_reveal, and perhaps we can use that one that anyway needs to be sent over the wire, so that we save a few bytes per block. Vitalik pointed that the mix is better cause is less predictable, so I wander if making the reveal less predictable solves this issue.",
        "created_at": "2021-06-11T18:26:07.429000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Oh, I see. We actually can send `randao_mix` to the execution client in the same fashion to assembled and verify new received payload, right? But we need to be able to process execution payload statelessly for the sake of future compatibility, this is why randao is needed as explicitly set field",
        "created_at": "2021-06-11T18:31:03.800000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yeah I don't mind sending explicitly randao, my point is that the way it is now your beaconBlock will contain a `randao_reveal` and a `randao_mix`  inside to be broadcasted, and perhaps we can do it with only `randao_reveal`",
        "created_at": "2021-06-11T18:34:09.216000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Yep, I get it. The other design goal is to be able to reconstruct former pow block from the payload. We could use `hash(block.body.randao_reveal)` but it would need to be set to an external field anyway",
        "created_at": "2021-06-11T18:39:26.705000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I was suggesting to put `randao_reveal` as your `randao`  in the executionpayload, and not change your pr at all",
        "created_at": "2021-06-11T18:40:53.855000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "just change process_randao to read it from the executionpayload",
        "created_at": "2021-06-11T18:41:06.265000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "instead of the plain body",
        "created_at": "2021-06-11T18:41:10.380000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "We don't want this tight coupling either as there is possibility in having execution moved to a shard in the future",
        "created_at": "2021-06-11T18:43:13.959000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Oh I see, that kills then any effort of not having separate sources of entropy ðŸ™‚",
        "created_at": "2021-06-11T18:43:57.276000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Btw, BEACONBLOCKROOT opcode likewise BLOCKHASH opcode will require some tweaks to make them stateless friendly",
        "created_at": "2021-06-11T18:44:04.622000+00:00",
        "attachments": null
    }
]