[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!425279588009246720\u003e Why is flyclient necessary?  Is the problem that we don't have a reasonable way of syncing state to an arbitrary block (like 10M)?  Doesn't Nethermind's Beam Sync do exactly this \u003c@!489256758989029405\u003e?",
        "created_at": "2020-11-21T05:12:29.560000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!211091239112671234\u003e I tried to document the current state of problems here: https://notes.ethereum.org/@GW1ZUbNKR5iRjjKYx6_dJQ/rJ3Wijm9v",
        "created_at": "2020-11-21T05:37:46.349000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is a first cut/iteration, feedback definitely welcome.",
        "created_at": "2020-11-21T05:37:54.061000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Now that I better understand the benefits of SSZ merklization, and in particular fully SSZ merklized blocks, I think that we should look for a path that lets us eventually get to a place where blocks are SSZ from top to bottom.  I think our decisions with TypedTransactions should reflect such a long-term goal as much as possible and we try to make decisions today that both minimize disruption and complexity, while also not making it *harder* for us to move to SSZ everywhere later.",
        "created_at": "2020-11-21T05:40:08.584000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I know that SSZ is only part of the problem, but I think if we can agree on that long term vision then it will help us with coming to agreement on a number of pieces of TypedTransaction problems.",
        "created_at": "2020-11-21T05:40:38.750000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "My preferred solutions at the moment are:\n* Legacy Transactions are Typed Transactions with type of `0xf8 || 0xf9 || 0xfa`.\n* Legacy Transaction IDs (hashes) continue to be generated as they are today (`keccak256(rlp(tx))`).\n* We assert that Legacy Transaction support will be dropped in 2 years.\n* All new transaction types (e.g., 2930, 1559, etc.) are SSZ serialized.\n* All new transaction IDs (hashes) are SSZ merkle roots.",
        "created_at": "2020-11-21T05:43:26.326000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "\u003e  think that we should look for a path that lets us eventually get to a place where blocks are SSZ from top to bottom.\n\n\u003c@!301186049323958275\u003e One thing to keep in mind here is that the beacon chain merge is already going to be ripping out a lot of the structure that's higher than transaction level",
        "created_at": "2020-11-21T08:13:53.446000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "So coming up with SSZ eth1 blocks may be superfluous",
        "created_at": "2020-11-21T08:14:02.776000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "But SSZ'ing transactions is defintiely really valuable",
        "created_at": "2020-11-21T08:14:18.035000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Hmm, interesting.  I did not know about that.",
        "created_at": "2020-11-21T08:35:56.166000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So you are saying that ETH1 blocks will go away?  What phase of ETH2 is that \u003c@!273808422753796097\u003e?",
        "created_at": "2020-11-21T08:36:07.184000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Formerly known as \"phase 1.5\", now called \"the merge\"",
        "created_at": "2020-11-21T08:36:21.764000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Or \"docking\"",
        "created_at": "2020-11-21T08:36:50.510000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Is there already a plan to have the State, TransactionList, and ReceiptList all be SSZ Merklized?",
        "created_at": "2020-11-21T08:37:14.171000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "(I don't actually know how State fits into this scheme)",
        "created_at": "2020-11-21T08:37:26.299000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "the state will be binary-trie-ified, and the binary tree is kind of a special case because it needs to be dynamic in a way that SSZ cannot be",
        "created_at": "2020-11-21T08:37:39.856000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I'd say talk to mikhail kalinin about this, he's the one drafting the prototype",
        "created_at": "2020-11-21T08:37:58.691000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Is that state binary-trie-ification compatible with the idea of \"here is proof of a storage slot from 1 million blocks ago, with proof root being the latest block ID (block hash)\"?",
        "created_at": "2020-11-21T08:38:46.701000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!425572898787426305\u003e This Mikhail?  ðŸ˜„",
        "created_at": "2020-11-21T08:39:04.294000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "yeah, it is",
        "created_at": "2020-11-21T08:39:40.761000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "it would be one big long binary tree branch; the part going from the old state root to the storage slot would be dynamic, but the part going from the present block hash to the old state root would be a fixed generalized-index",
        "created_at": "2020-11-21T08:40:17.783000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So things we need to work toward in ETH1 in order to make it so \"The Merge\" gives us all of the SSZ proof wins we desire:\n1. Receipts SSZ serialized and their UID is the `ssz_hash_root`.\n2. Transactions SSZ serialized and their UID is the `ssz_hash_root`.",
        "created_at": "2020-11-21T08:41:30.425000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The Merge will take care of the transaction list being SSZified, The Merge will also take care of the receipt list being SSZified.",
        "created_at": "2020-11-21T08:42:00.214000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "right, that would be ideal",
        "created_at": "2020-11-21T08:42:19.473000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "If the signing root of the transaction remains RLP-based that could be an ok sacrifice",
        "created_at": "2020-11-21T08:42:38.116000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "At least my own dream is for EDCSA-based transactions as a whole to become \"legacy\" in the future ðŸ˜†",
        "created_at": "2020-11-21T08:42:59.080000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I also want that, but I'm struggling to see a path to that future that doesn't introduce a whole bunch of other problems.",
        "created_at": "2020-11-21T08:43:22.935000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "(was actually typing up some commentary in \u003c#700028534114222171\u003e a moment ago, need to finish)",
        "created_at": "2020-11-21T08:43:37.862000+00:00",
        "attachments": null
    }
]