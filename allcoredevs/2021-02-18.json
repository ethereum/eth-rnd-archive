[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You don't technically need to do (3).  It is entirely .ossible that no one will use 2930 transactions, and if they do need to it is acceptable if they can't use Infura immediately.",
        "created_at": "2021-02-18T02:10:33.415000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You definitely should work on it, but it isn't a mainnet release blocker.  2718+1559 is a bigger deal, so getting the infrastructure together for typed transactions sooner rather than later is wise.",
        "created_at": "2021-02-18T02:11:11.244000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Ya it's not technically a blocker but as you said it's a good dry run for -1559.",
        "created_at": "2021-02-18T15:40:01.296000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "**AllCoreDevs in ~22.5h (Feb 19th, 14:00 UTC)**\n**Agenda:** https://github.com/ethereum/pm/blob/master/README.md#acd-106-february-19-2021\n**Zoom: ** to be shared here shortly before the call\n**Stream:** https://youtu.be/anrbnroO3dc\n\nIf you want to add something to the agenda, please open an issue at https://github.com/ethereum/pm/issues. \n\nThere are currently 3 issues on the agenda for tomorrow:\n- Berlin timing: https://github.com/ethereum/pm/issues/248\n- An overview of Eth1 requirements for the merge: https://github.com/ethereum/pm/issues/247\n- London timing / feature freeze: https://github.com/ethereum/pm/issues/245",
        "created_at": "2021-02-18T15:41:35.387000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Is there a list of EIPs already being considered for London somewhere, or will that be the main topic of discussion tomorrow for London?",
        "created_at": "2021-02-18T16:49:43.904000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "\u003c@!388751025789468672\u003e we have a list of EIPs that have been \"conceptually üëç'd\" by core devs, see the \"Considered For Inclusion - Approved\" column here: https://github.com/ethereum/eth1.0-specs/projects/1. It may be slightly out of date ( \u003c@!187490121698770945\u003e would know the latest status), but it should be roughly right.",
        "created_at": "2021-02-18T16:56:32.757000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I don't think we'll have the time tomorrow to make London EIPs the main topic of discussion. We need to sort out Berlin, then people had requested to get a better view into the requirements for the Eth2 merge, which \u003c@!425572898787426305\u003e will be going over. I had the London topic to highlight that because of the difficulty bomb, we'll need to have it live on mainnet by July, so we need to make the selection for EIPs soon. \n\nIMO we can probably use the next 1-2 calls after tomorrow to come up with at least a list of the \"big things\" going in so that we can start testing those, but I want to see how the call tomorrow goes first üòÖ",
        "created_at": "2021-02-18T16:58:37.965000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I also think if we can agree on the call tomorrow that we'll be considering the London EIPs in the next 1-2 calls, then at least we can communicate that to the community üëç",
        "created_at": "2021-02-18T17:00:20.395000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Makes sense, thanks.  I was just curious how \"big\" London will be (more Berlin-sized or just a bomb tick like Muir Glacier).",
        "created_at": "2021-02-18T17:00:54.966000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I suspect more Berlin-sized üëç",
        "created_at": "2021-02-18T17:01:26.095000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "One more addition to tomorrow, a list of EVM features potentially worth removing before the merge, by \u003c@!273808422753796097\u003e: https://github.com/ethereum/pm/issues/250",
        "created_at": "2021-02-18T20:51:10.886000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "visibility of gas doesn't have acceptable replacements when you're relying on third parties to schedule a computation (e.g. metatxns or cross-domain messaging). The doc accounts for the untrusted nature of the callee, but doesn't account for the untrusted nature of the scheduler, who might manipulate gas on the transaction to affect the outcome of the computation",
        "created_at": "2021-02-18T21:02:34.846000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "There are EIPs that provide replacements",
        "created_at": "2021-02-18T21:03:06.166000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "The various sponsored transaction stuff",
        "created_at": "2021-02-18T21:03:24.560000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "those aren't really adequate for cross-domain situations. e.g. where the payer on Optimism wishes to schedule a computation on Ethereum",
        "created_at": "2021-02-18T21:04:03.646000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Are those cases common?",
        "created_at": "2021-02-18T21:04:14.870000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "they will be once rollup usage is common",
        "created_at": "2021-02-18T21:04:24.894000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Actually, wait, how is it *currently* possible to do cross-domain pay-for-transactions?",
        "created_at": "2021-02-18T21:04:46.370000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "it isn't. but currently we can guarantee that the scheduler provides a minimum level of service",
        "created_at": "2021-02-18T21:05:08.387000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "e.g. we can require the scheduler to provide at least X gas to the computation",
        "created_at": "2021-02-18T21:05:38.563000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I think we've previously established that **if** we remove gas inspection we will very likely combine that with a new mechanism that allows for the same use cases to still exist (meta-transactions, sponsored transactions, batched transactions, etc via new transaction types)",
        "created_at": "2021-02-18T21:05:45.896000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "If you're allowed to use a rollup, can't you just have a fraud proof scheme inside the rollup that verifies the transaction's gas limit",
        "created_at": "2021-02-18T21:06:14.786000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "that imposes the rollup waiting period when going the other direction",
        "created_at": "2021-02-18T21:07:00.070000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "but not all domains are rollups",
        "created_at": "2021-02-18T21:07:06.347000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "\u003c@!619357961923330051\u003e sponsored transactions were the previously discussed solution to this.  Is there something that the previous proposals for sponsored transactions don't cover?",
        "created_at": "2021-02-18T21:07:46.639000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "yeah, my point here isn't \"don't remove gas visibility\". it's \"we ought to have a fully specified replacement active before it is removed\"",
        "created_at": "2021-02-18T21:07:54.728000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "That's fair",
        "created_at": "2021-02-18T21:08:08.827000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "got it, I don't think anyone is proposing we do otherwise üëç",
        "created_at": "2021-02-18T21:08:18.363000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "I suspect, however, by the time that happens, we'll have a lot more active contracts observing gas ü§î",
        "created_at": "2021-02-18T21:13:51.231000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "even sponsored transactions don't fully address the issue. as the protocol can't guarantee a minimum service level using it",
        "created_at": "2021-02-18T21:14:49.199000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I don't know what \"guarantee a minimum service level\" means in this context.",
        "created_at": "2021-02-18T21:16:27.504000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "Ensure that the computation has \u003e= X gas",
        "created_at": "2021-02-18T21:17:13.995000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I think that's just a detail that has to be worked out when we dust off the proposals for \"sponsored transactions\" as that's one of the core requirements that needs to be satisfied.",
        "created_at": "2021-02-18T21:18:28.796000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "the various guarantees that need to be in place for both gas payer and tx sender",
        "created_at": "2021-02-18T21:18:51.756000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "mmmm. this guarantee isn't for the gas payer or the tx sender. it's for whatever application needs to pass messages and schedule computations",
        "created_at": "2021-02-18T21:19:36.177000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "e.g. a token bridge dispatching a message needs a guarantee that the receiving contract is given sufficient gas to handle receipt. but may not have any control of the payer or the msg sender",
        "created_at": "2021-02-18T21:20:18.005000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "right, but the property you are trying to achieve is \"gas payer only gets paid if they get a tx included where they specify a gas limit of at least X\", no?",
        "created_at": "2021-02-18T21:20:18.867000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "no, the property I'm trying to achieve is that the message only gets processed at all if it has access to at least X gas",
        "created_at": "2021-02-18T21:20:57.974000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Do we necessarily need that?",
        "created_at": "2021-02-18T21:21:16.837000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "well, do you have a proposed replacement?",
        "created_at": "2021-02-18T21:21:45.203000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "If the gas payer includes a tx with \u003cX gas, then either there's still enough gas for the thing desired by the requester to happen, or that transaction is a no-op",
        "created_at": "2021-02-18T21:22:30.958000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "So as far as I can tell, the only party who can suffer from the gas payer misbehaving is the gas payer themselves",
        "created_at": "2021-02-18T21:22:51.113000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "well, any party that relies on the message being processed. presumably it was sent for some reason",
        "created_at": "2021-02-18T21:23:25.918000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "right",
        "created_at": "2021-02-18T21:25:46.241000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "But anyone can always rebroadcast your message with a too-low gas limit",
        "created_at": "2021-02-18T21:26:00.435000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "So the only guarantee that matters is \"you only pay if someone includes it with enough gas limit\"",
        "created_at": "2021-02-18T21:26:16.069000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "a little more concretely. \nDomain A dispatches an ordered sequence of messages to contracts on Doman B. These messages could originate from EOAs or contracts, and ought to be processed in the order they were sent. They arrive at Domain B via the action of some scheduler.\n\nwe need to ensure\n- messages are processed in order\n- the scheduler can't under-gas and cause a message to be skipped\n- the sender can't dispatch an unprocessable message (e.g to a faulty contract)",
        "created_at": "2021-02-18T21:26:45.703000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "ok, so the ordering requirement is new",
        "created_at": "2021-02-18T21:27:05.032000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I'm not even sure how it can be satisfied *today*",
        "created_at": "2021-02-18T21:27:12.019000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "it's not that hard today (assuming you have _some_ cross-domain messaging) ü§î",
        "created_at": "2021-02-18T21:27:51.951000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Can we reduce \"ordered sequence of messages\" to \"ordered single message\"? Because you can always pack N calls into 1 by doing a CREATE -\u003e multicall during init -\u003e assert all succeed -\u003e SELFDESTRUCT",
        "created_at": "2021-02-18T21:28:05.411000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "fair enough. I think this requirement is more on the user side. arbitrary re-ordering of messages with money in them",
        "created_at": "2021-02-18T21:29:50.902000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "assume that Domain B can learn of the message vector. today the message handler contract in Domain B can guarantee that each message gets processed with \u003e= X gas (the minimum service level), and assume that contracts using more than that are faulty. This prevents the scheduler from under-gassing and prevents a faulty message or contract from halting processing",
        "created_at": "2021-02-18T21:32:01.317000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "but in order to do that it needs to be able to view gas in order to guarantee the minimum service and usually reserve extra gas for its own clean-up (e.g.marking a message processed)",
        "created_at": "2021-02-18T21:32:54.858000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "sponsored transactions can't achieve that as specced. they only provide guarantees to the sender and payer, while gas visibility provides guarantees to all parties (including e.g. remote contracts)",
        "created_at": "2021-02-18T21:34:14.556000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "some trimmed code to give a very concrete example:\n```\nrequire(gasleft() \u003e= PROCESS_GAS + RESERVE_GAS, \"!gas\");\n\ntry\n    OpticsHandlerI(recipient).handle{gas: PROCESS_GAS}( ... )\nreturns (bytes memory _response) { ... } catch (bytes memory _err) { ... }\n\n// combined with earlier check this prevents re-entry (necessary to preserve processing order)\nlastProcessed = _sequence;\n```",
        "created_at": "2021-02-18T21:38:33.027000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "general",
        "parent": "",
        "content": "guess this means I gotta wake up at 6 to get on this call üôÇ",
        "created_at": "2021-02-18T21:41:04.005000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "\u003c@!619357961923330051\u003e probably 7 üòÖ  that's the last thing on the agenda, which is already pretty packed. I'm not sure we'll have the time to go into a ton of details about the various features, but I can make sure we timebox, say, the last 10-15 minutes for this at least.",
        "created_at": "2021-02-18T21:42:03.305000+00:00",
        "attachments": null
    }
]