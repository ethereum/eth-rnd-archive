[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Does OE disconnect Geth solely because of the 4-letter response, or would it still disconnect even with a 3-letter one like `snp`?",
        "created_at": "2021-02-17T02:07:21.699000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Original PR is from March 2020 https://github.com/ethereum/devp2p/pull/145",
        "created_at": "2021-02-17T04:12:12.459000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "And yes, I brought it up on ACD",
        "created_at": "2021-02-17T04:12:22.749000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "A very long time ago",
        "created_at": "2021-02-17T04:12:32.379000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "But it runs counter to the eth/* and ENR precident that changes are submitted as EIPs.  Something this foundational really needs to be an EIP.",
        "created_at": "2021-02-17T04:13:34.742000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Foundational?",
        "created_at": "2021-02-17T04:13:45.866000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "well, important.",
        "created_at": "2021-02-17T04:13:56.740000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Well, first time I described it tocore devs was in prague in 2018",
        "created_at": "2021-02-17T04:14:07.668000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I guess other clients are free not to implement it if they don't want to",
        "created_at": "2021-02-17T04:14:29.314000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "So how do we tell a work in process from a functional spec?  EIPs provide a nice demarcation.",
        "created_at": "2021-02-17T04:14:46.437000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "\"merged in the devp2p spec\" seems a good boundary",
        "created_at": "2021-02-17T04:15:10.959000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "a lot better than merged as an EIP, which contains a ton of junk we'll never ship",
        "created_at": "2021-02-17T04:15:27.580000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "https://eips.ethereum.org/core see drafts",
        "created_at": "2021-02-17T04:15:59.840000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Spreading out the surface area core devs need to pay attention to doesn't help.",
        "created_at": "2021-02-17T04:16:32.090000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "or FFS, tell me you didn't know about this until now",
        "created_at": "2021-02-17T04:16:46.509000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I dare you",
        "created_at": "2021-02-17T04:16:47.882000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "The claim wasn't that I didn't know about it, what I was disputing was that it was accepted.",
        "created_at": "2021-02-17T04:17:12.623000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Known about and accepted are two different claims.",
        "created_at": "2021-02-17T04:17:18.789000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "The gold standard of accepted is do other clients also implement it.",
        "created_at": "2021-02-17T04:17:44.920000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "So there may be all sorts of process to publish, or create a standard, but if no one implements it but one client it is just a client feature.  See ENR.",
        "created_at": "2021-02-17T04:18:29.261000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Sweet, Geth has a snap feature",
        "created_at": "2021-02-17T04:19:18.597000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Feel free to implement or not",
        "created_at": "2021-02-17T04:19:23.838000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "If a multi-client network is what is needed for security we need to work together.",
        "created_at": "2021-02-17T04:19:24.797000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I don't care",
        "created_at": "2021-02-17T04:19:25.916000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Well, me publishing a spec and constantly asking - for a year - for feedback and getting approval from ACD; and then before release you telling me to callaborats is a bit of an ass move",
        "created_at": "2021-02-17T04:20:07.700000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "We haven't had bandwidth to deal with it.  It's on our roadmap a quarter out at the moment.",
        "created_at": "2021-02-17T04:20:31.217000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "First we needed to build a flat DB to even consider implementing it.",
        "created_at": "2021-02-17T04:20:58.107000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Then I guess you'll deal with it when you have the time",
        "created_at": "2021-02-17T04:21:13.176000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "It's not a mandatory protocol, feel free not to speak it",
        "created_at": "2021-02-17T04:21:32.001000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "So back to the original issue.  Is four letter capability somehting you are set on not changing?  Can the boot node disable snap in the name of interoperability testing?",
        "created_at": "2021-02-17T04:22:49.599000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Besu could bridge to OE, but our engineer working on it is caught in an epic Texas snowstorm",
        "created_at": "2021-02-17T04:23:33.736000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Does supporting != 3 letters take literally more than 1 hour of work for EO?",
        "created_at": "2021-02-17T04:23:50.570000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "We're being obtuse here",
        "created_at": "2021-02-17T04:24:00.560000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Just fix the damn thing, how hard can it be?!",
        "created_at": "2021-02-17T04:24:12.396000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Btw, wrt protocols and EIPs, Felix said countless times on ACD that it doesn't make sense for discuss it, becuse all core devs never ever have an optionion about protocols",
        "created_at": "2021-02-17T04:26:08.852000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "He brought up all the fancy stuff in devp2p, specced them, but nobody even thinks about them until geth ships production",
        "created_at": "2021-02-17T04:26:25.735000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "So the EIP process is utterly broken for protocols",
        "created_at": "2021-02-17T04:26:32.610000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "we've been just publishing EIPs retrospectively for sake of completeness",
        "created_at": "2021-02-17T04:26:47.059000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "but every time he wanted to discuss something, nobody gave a damn",
        "created_at": "2021-02-17T04:26:55.569000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "see ENR and family",
        "created_at": "2021-02-17T04:27:03.112000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "see disvocery v5 and fanily",
        "created_at": "2021-02-17T04:27:10.832000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "see LES v2, 3, 4, snap and family",
        "created_at": "2021-02-17T04:27:19.645000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "And we've accepted it that there's no time nor inclination on ACD to discuss these",
        "created_at": "2021-02-17T04:27:54.264000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "So we've tried to reach out to relevant people to comment outside of ACD, not to burden it",
        "created_at": "2021-02-17T04:28:08.975000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "But now it's not fair to tell us that we didn;t go through ACD, when nobody wanted to even hear about these things",
        "created_at": "2021-02-17T04:28:28.321000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Piper managed to give his input on the specs",
        "created_at": "2021-02-17T04:28:53.347000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Alexey managed to get the spec changed to better suit turbo geth",
        "created_at": "2021-02-17T04:29:03.535000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Happy to further collaborate on future versions of snap",
        "created_at": "2021-02-17T04:29:47.265000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "But I won't nuke my years' work because you didn't get the memo",
        "created_at": "2021-02-17T04:30:04.359000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "I'm not asking you to nuke your work.  Supporting a brand new sync protocol isn't somehting we can turn on a dime and support.  Besu has many different things pulling us and we don't have as many engineers working on core stuff as many people claim.",
        "created_at": "2021-02-17T04:31:19.197000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I didn't ever expect Besu to just jump on snap",
        "created_at": "2021-02-17T04:31:43.558000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I fully expected to ship snap in Geth",
        "created_at": "2021-02-17T04:31:50.597000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "So just because other clients are not ready to reflect on it seriously doesn't mean it's not valuable.",
        "created_at": "2021-02-17T04:31:52.398000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "And have other clients join yers later",
        "created_at": "2021-02-17T04:31:54.866000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Just not sure I understand what all the fuss is if my expectation and your expectation too was that you might join years later",
        "created_at": "2021-02-17T04:32:15.992000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "spec is final and shipped, but there may be tweaks we may ask for in a new version as we implement it.  Reading a spec is one thing, implementing is something else.",
        "created_at": "2021-02-17T04:32:51.437000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "and the feedback you would find valuable that we could provide is more around implementation.",
        "created_at": "2021-02-17T04:33:16.816000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "that's what version numbers are for",
        "created_at": "2021-02-17T04:33:17.674000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "From a process standpoint, you *are* violating the current spec by using a 4-letter capability.  If you are so keen on pushing this out, why not just change to `snp` so you are to-spec instead of making everyone else update their code to be against spec?",
        "created_at": "2021-02-17T04:52:29.738000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The real debate here isn't \"should Geth be able to ship a new protocol\", it is \"should Geth be able to ship a change that breaks interoperability with other clients and then expect other clients to change to *not* be broken by it despite Geth's change being a spec change that affects all clients.",
        "created_at": "2021-02-17T04:53:11.541000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Either side could update their code in a couple seconds.  Geth could change the code to 3-letters to match the current devp2p specification (which says 3 letters only).  Every other client could change their code to support 3 or 4 letters.",
        "created_at": "2021-02-17T04:53:57.639000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I suspect the real concern is more about Geth shipping a change to their client that causes other clients to unpeer Geth and then Geth expecting everyone else to change their code to *stop* unpeering Geth.  It sets a pretty bad precedent going forward that clients have to capitulate to whatever change Geth makes because everyone knows that if they aren't Geth compatible they'll end up in a partitioned network from mainnet.",
        "created_at": "2021-02-17T04:55:15.553000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Referring specifically to this line:\n\u003e `cap` Specifies a peer capability name as a length-3 ASCII string. Current supported capabilities are `eth`, `shh`.",
        "created_at": "2021-02-17T04:56:39.031000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I suspect that most other client devs saw the proposal and didn't realize that Geth implementing it would break their clients because it is a subtle breakage.  They probably all thought, \"the proposal seems good overall and the Geth team is smart and probably thought this through.  I don't have the bandwidth to implement it right now, but since it is a new `cap` I can just ignore it.\"",
        "created_at": "2021-02-17T04:58:26.022000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "However, that last bit (I can just ignore it) turned out to not be true and this wasn't noticed until it showed up in a multi-client testnet.",
        "created_at": "2021-02-17T04:59:07.111000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If the capability name is changed to `snp` then that assumption will return to an accurate one and the other clients can go back to ignoring the new protocol for now, and implement it at some point in the future.",
        "created_at": "2021-02-17T05:00:53.282000+00:00",
        "attachments": null
    },
    {
        "author": "alita85",
        "category": "general",
        "parent": "",
        "content": "ACD 105 notes https://github.com/ethereum/pm/pull/249",
        "created_at": "2021-02-17T07:19:36.738000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "\u003e so you are to-spec\n\nThe current spec: https://github.com/ethereum/devp2p/blob/master/rlpx.md#capability-messaging - -the wording about three characters was, at some point (years ago?), because, afaik \"it was just silly\". Doing so was not a geth powermove, it was the protocol maintainer ( \u003c@!194432762315407360\u003e )that did protocol maintenance. It can be argued that it should have been vetted through an ACD (and maybe it was, who knows, because it probably would be ignored). \n\n A long time later, \u003c@!206016661470314496\u003e introduced `snap/1`, and we've been trying to get everyone's feedback and thoughts for ~ a year. Besu + Nethermind can sync Yolov3, so obviously handle it. We recently merged default support for `snap/1` in `master`, and we're just about to make an official release -- our normal 2-week schedule has been halted for 2 months due to this being a major release. \n\n\u003e sets a pretty bad precedent going forward that clients have to capitulate to whatever change Geth makes because everyone knows that if they aren't Geth compatible\n\nThis is really not nicely portrayed. We backed down on `eth/66` changes, we let other clients decide on whether to modify existing protocols for 2718 (or force upgrade everyone to `eth67`), we've been telling folks about snap sync since Prague, when it Parity and EthereumJ were still in the game.  It's not about \"move over, we're Geth\", it's about: should we once again work around a quirk in a client implementation and undo the gradual rollout we've been doing, to work around a client-specific bug that wasn't known for the last ~year, instead of simply...  have them fix it.",
        "created_at": "2021-02-17T07:56:19.391000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e to work around a client-specific bug\nThis is the key point of contention I believe.  It isn't a bug, as the spec *clearly states* 3 characters.  Whether that is silly or not doesn't seem relevant to this discussion (and I agree it is a pretty silly constraint).",
        "created_at": "2021-02-17T08:00:52.980000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Someone writing a to-spec client shouldn't (in an ideal world) have to make a change (even a small one) because someone else built something that goes against spec because the spec is silly.",
        "created_at": "2021-02-17T08:01:59.634000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Well, it hasn't been in the spec for years, afaik, hence why neither nethermind nor besu has it",
        "created_at": "2021-02-17T08:03:12.530000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Hmm, is the issue that there are multiple versions of devp2p wire protocol floating around?",
        "created_at": "2021-02-17T08:08:26.252000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Ah, I see.  The wiki linked above is a very old version of the devp2p spec.  At some point, that constraint was removed from the spec.",
        "created_at": "2021-02-17T08:11:22.964000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So IIUC, the frustration is that the spec was changed (a constraint removed) without agreement from the various client dev teams?  It is certainly a minor change, and I can appreciate someone maybe removing it without any intent at malice simply because they thought it was an insignificant thing that surely wouldn't break anyone.",
        "created_at": "2021-02-17T08:13:04.054000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "workflow.png",
                "content": "600f9fe5d9c3b5f904bdb08cfdaa20fd1a891a6b5a136616d93ab595721c1e7e"
            }
        ]
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "(except in this case, the spec said that holding down the spacebar should heat the CPU)",
        "created_at": "2021-02-17T08:13:33.392000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If EIPs are *not* the appropriate process for doing spec changes, what is?",
        "created_at": "2021-02-17T08:13:53.650000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "As an EIP editor, I have no problem with moving the network protocol change process away from EIPs (less work for me!) but it *does* seem like there should be some process that everyone is aware of for making spec changes (even minor ones).",
        "created_at": "2021-02-17T08:15:28.018000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Right now, I think people assume that all specification changes to the network protocol will go through an EIP and then ACD, and in this (minor) case that didn't happen (if I understand the history correctly).",
        "created_at": "2021-02-17T08:16:18.825000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It also sounds like perhaps \u003c@!206016661470314496\u003e isn't particularly satisfied with that process (EIP =\u003e ACD) for network protocol changes, and if others agree it isn't ideal we *should* have a different process.  But we should make that alternative process clear so everyone can know where to go to watch for changes, so they don't get surprised by differences in an integration testnet.",
        "created_at": "2021-02-17T08:17:25.121000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "So what about OE not implementing the full eth protocol by refusing to serve certain data?",
        "created_at": "2021-02-17T08:21:55.308000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Is that a spec violation? Or do they get a free pass on it?",
        "created_at": "2021-02-17T08:22:04.006000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Are they failing to respond to certain requests?",
        "created_at": "2021-02-17T08:22:39.262000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "They respond with empty replies",
        "created_at": "2021-02-17T08:22:46.788000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Faking that they don't have the data",
        "created_at": "2021-02-17T08:22:52.129000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "(Peter is referring to OE dropping getNodeData) (https://github.com/openethereum/openethereum/commit/a8668b371cf8c3c9582d4ae2d802e12e82c601a0)",
        "created_at": "2021-02-17T08:23:11.412000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is a good question I think, how should one handle peers who are not behaving in line with the protocol.  Is this something you can detect from the outside?  Assuming the peer didn't *tell you* it was OE in the handshake, would you be able to tell it was lying?",
        "created_at": "2021-02-17T08:23:54.655000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "The thing here is that time and time again we're catering for the quirks and needs of other clients",
        "created_at": "2021-02-17T08:26:38.780000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That is, we don't want to incintivize clients to lie about their agent details (e.g., browsers all claiming to be `Mozilla/5.0`)",
        "created_at": "2021-02-17T08:26:53.563000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "and it's getting increasingly annoying that this is a one way courtesy",
        "created_at": "2021-02-17T08:26:56.212000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Yes, I can tell that a peer had an up to date chain but says it doesn't have state",
        "created_at": "2021-02-17T08:27:36.502000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "It's a courtesy to allow them doing it because they want to keep their data differently",
        "created_at": "2021-02-17T08:28:07.581000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "But in theory no client should stop serving that data until the network protocol is reworked to not need it",
        "created_at": "2021-02-17T08:28:24.980000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Otherwise Geth could just drop all old protocols and everyone wound remain dangling",
        "created_at": "2021-02-17T08:28:44.720000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If you have a heuristic to detect and kick peers that are not behaving in a way that is healthy for the network (e.g., data withholding) then I think it is reasonable to kick them because we want a healthy network and that may mean excommunicating nodes who refuse to participate in a healthy way (for any reason).",
        "created_at": "2021-02-17T08:29:04.393000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That being said, I also recognize that the real world isn't always that convenient/ideal/clear cut and there may be legitimate engineering reasons why OE is unable to fulfill some requests.",
        "created_at": "2021-02-17T08:29:36.818000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@429719902363058177\u003e Am I correct in understanding that the only reason OE has a problem here is because `snap` is 4 characters rather than 3 characters?  Is there anything else about the way Geth is communicating that is causing problems for OE at the moment?",
        "created_at": "2021-02-17T08:32:06.385000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Is there are technical reason whatsoever why OE can't just fix this?",
        "created_at": "2021-02-17T08:34:09.343000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I understand that it's an inherited code, but we can't keep the entire network stuck for eternity because Parity abandoned their client",
        "created_at": "2021-02-17T08:34:37.576000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Probably (guessing) an equal amount of effort from them to accept any string as it would take Geth to change the capability name to `snp`.  ðŸ¤·  I don't think the change itself is the issue here, it is more about the process and this specific issue is just the MacGuffin.",
        "created_at": "2021-02-17T08:36:30.422000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I think the reason may be that it is currently a fixed-sized string and it would need to be changed to dynamically sized string ðŸ™‚ https://github.com/openethereum/openethereum/blob/main/ethcore/sync/src/api.rs#L108",
        "created_at": "2021-02-17T08:38:43.414000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e Yes, but OE changing it would be an improvement overall, and us changing it would be a step back",
        "created_at": "2021-02-17T08:39:49.103000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "The question is why is it preferrable to keep things broken",
        "created_at": "2021-02-17T08:40:11.995000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I can definitely appreciate the desire to move away from 3-character capability names.  I fully agree that it isn't a particularly desirable design in this case since it isn't something where we need to care much about space conservation on the wire.",
        "created_at": "2021-02-17T08:41:19.805000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and this: https://github.com/openethereum/openethereum/blob/main/util/network/src/lib.rs#L69",
        "created_at": "2021-02-17T08:41:22.841000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "also a fixed sized string",
        "created_at": "2021-02-17T08:41:33.337000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@552133098075193354\u003e Can we get a note on the next ACD agenda or a breakout room (unclear to me whether we need everyone involved or not) to discuss the best way to push forward network protocol spec changes?  It sounds like not everyone is on the same page about what the *current* process is, nor what the *ideal* process is and it would help avoid conflicts in the future I think if everyone at least agreed on \"where do I need to go to subscribe to all network protocol changes\".",
        "created_at": "2021-02-17T08:44:23.683000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I think the problem is to start supporting variable size subprotocol names actually ðŸ™‚",
        "created_at": "2021-02-17T08:44:26.673000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Going from fixed-size datatype to dynamic-sized datatype in a language like rust I assume is a bit of a pain (assuming it is at all like C/C++).",
        "created_at": "2021-02-17T08:45:01.724000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but it is still pretty manageable amount of work",
        "created_at": "2021-02-17T08:45:27.980000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The difficulty, of course, varies greatly depending on how many pieces of code touch that particular variable.",
        "created_at": "2021-02-17T08:45:30.520000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If you have some local private variable it is easy, if it is some variable that is fundamental to the entire application which every piece of your code touches (like a block) then it has potential to be a pretty large amount of work.",
        "created_at": "2021-02-17T08:45:59.825000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I think in this particular case, it should not be too hard, because that `ProtocolId` is used in the data structures that seem to already have dynamically sized elements, so there will be heap-allocation code around",
        "created_at": "2021-02-17T08:47:33.243000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "\"Alexey managed to get the spec changed to better suit turbo geth\" - regarding this - thank you very much for changing it! I need to look at the spec again now, but the idea was to make it possible for turbo-geth to serve data for the snap sync to other nodes. Let me have a look",
        "created_at": "2021-02-17T08:51:34.062000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "yes, it should be possible",
        "created_at": "2021-02-17T08:55:40.859000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "To clarify: I jumped in mainly because I didn't like the narrative \"geth screws over other clients because they're big\". I can live with either way forward",
        "created_at": "2021-02-17T09:06:42.629000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "If the `cap` is changed, then we have to decide on what to do with the already-specified `enr` key. And dns discovery subdomain (currently `snap.mainnet.ethdisco.net`).",
        "created_at": "2021-02-17T09:09:31.946000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm assuming we could acquire a new subdomain (`snp.mainnet.ethdisco.net`) if we went that route without much difficulty?",
        "created_at": "2021-02-17T09:13:33.406000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "What is the `enr` key?",
        "created_at": "2021-02-17T09:13:42.137000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Hm, not sure that one is actually specced :/",
        "created_at": "2021-02-17T09:15:00.948000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "It's a capability defined in the ENR, a self-signed message \"I support snap\", which the crawler uses and publishes in the DNS record",
        "created_at": "2021-02-17T09:15:45.948000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Making it psosible to find mainnet or goerli or whatever nodes that support snap without searching the entire DHT yourself",
        "created_at": "2021-02-17T09:16:21.604000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "IIUC, you are saying that renaming `snap` to `snp` is more work than just a single find-and-replace in the Geth codebase?",
        "created_at": "2021-02-17T09:16:56.110000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2021-02-17T09:18:14.119000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "not much more, but we'd need to redeploy the crawler infra too",
        "created_at": "2021-02-17T09:18:30.862000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "and redo the dns setups",
        "created_at": "2021-02-17T09:18:42.098000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "(or live with the quirk that the cap is `snp` but the enr key and dns discovery name is `snap`)",
        "created_at": "2021-02-17T09:19:45.660000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Just saw this discussion now",
        "created_at": "2021-02-17T09:20:38.842000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "So, the three letter restriction is a really old thing",
        "created_at": "2021-02-17T09:20:56.469000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "It was never really meant to be a hard restriction, even in the very old devp2p spec, it's a *convention*",
        "created_at": "2021-02-17T09:21:18.603000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Intent and reality often do not align.  ðŸ™‚  As seen in this case by OE implementing the field using a fixed-length 3-byte array.  Which was reasonable given that the spec said \"3 letter name\".",
        "created_at": "2021-02-17T09:21:45.068000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I *think* everyone here agrees that it is a silly constraint and we **should** remove it.  The question is just when and what is the process for making such a change.",
        "created_at": "2021-02-17T09:22:45.197000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "From a technical perspective, I see this as a bug in OE",
        "created_at": "2021-02-17T09:34:18.627000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "We can fix this bug, geth team can even help OE and try to implement the change",
        "created_at": "2021-02-17T09:34:35.146000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "I think it's not a risky change at all",
        "created_at": "2021-02-17T09:35:09.548000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Regarding the general discussion about network protocols and EIPs: I think the common assumption is that changes to critical / shared protocols such as \"eth\" or the RLPx transport require an EIP to be changed.",
        "created_at": "2021-02-17T09:38:55.969000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Non-critical or experimental protocols like \"les\" and \"snap\" can be added or changed at any time without an EIP.",
        "created_at": "2021-02-17T09:39:39.478000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "We cannot require protocol development through EIPs, it's too slow.",
        "created_at": "2021-02-17T09:39:59.169000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Instead, the best way is to write the spec first and implement it as a prototype, then ask for feedback. If the protocol becomes critical / shared later, because many clients have it implemented, changes can be made through EIPs",
        "created_at": "2021-02-17T09:41:02.535000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think the general issue is that the meta-protocol was changed (3-characters to dynamic length string) without buy-in from clients (or even clearly informing them of the change).",
        "created_at": "2021-02-17T09:41:22.138000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "It's more like there was a misinterpretation of the spec by parity / OE devs",
        "created_at": "2021-02-17T09:42:47.785000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Eh... the *original* spec did say \"3 character name\".  That is pretty clear to me.",
        "created_at": "2021-02-17T09:43:05.613000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Everyone else seems to have understood the intent of the spec correctly, seeing the 3 letter thing as a convention rather than a hard requirement",
        "created_at": "2021-02-17T09:43:21.386000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Now sure, many clients will implement that with a dynamic string (and in fact most did from the sound of it), but the spec didn't indicate anywhere that this was just a convention.",
        "created_at": "2021-02-17T09:43:33.420000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Original spec:\n\u003e `cap` Specifies a peer capability name as a length-3 ASCII string. Current supported capabilities are `eth`, `shh`.",
        "created_at": "2021-02-17T09:44:07.190000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I find that very hard to interpret as \"3 letters is the convention\".",
        "created_at": "2021-02-17T09:44:21.999000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "I don't want to create a huge discussion about this. We can argue about spec wording all day and it won't lead anywhere. As you said, everyone agrees restricting it to three letters is just stupid.",
        "created_at": "2021-02-17T09:45:04.589000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "So let's not argue about it and let's instead find a technical resolution of this issue that causes the least work for everyone",
        "created_at": "2021-02-17T09:45:35.688000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "I think the easiest resolution is to fix OE",
        "created_at": "2021-02-17T09:45:56.670000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Geth team can do it",
        "created_at": "2021-02-17T09:45:59.841000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "The other possible resolution is renaming the protocol to `snp`",
        "created_at": "2021-02-17T09:48:52.575000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "We're not super happy to do this for multiple reasons: \n(1) `snap` is the better name for this protocol and we're kind of used to it by now\n(2) we'd need to rename it in ENR as well\n(3) there would be additional infrastructure work for this change",
        "created_at": "2021-02-17T09:50:34.199000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "However, the chosen resolution should be agreed upon by everyone.",
        "created_at": "2021-02-17T09:51:38.450000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Geth should not use its privileged network position to force changes on everyone.",
        "created_at": "2021-02-17T09:52:53.761000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "SNP to me reads like \"Scottish National Party\" ðŸ™‚",
        "created_at": "2021-02-17T10:00:28.191000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "hehe",
        "created_at": "2021-02-17T10:02:26.076000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "nice joke Alexey",
        "created_at": "2021-02-17T10:02:33.736000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Interesting question is whether there should be a maximum capability name length in the spec",
        "created_at": "2021-02-17T10:08:15.029000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "For example, we could say that the max length is 8 bytes",
        "created_at": "2021-02-17T10:08:29.639000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I prefer dynamic arbitrary length.  This isn't a free form field where we need to worry about people attacking via it.",
        "created_at": "2021-02-17T10:16:24.742000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Clients can put in *reasonable* limits to prevent OOM or whatever, but I don't think we need to constrain too much?",
        "created_at": "2021-02-17T10:16:46.193000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Yes, there is no need to really limit it for attack reasons",
        "created_at": "2021-02-17T10:28:07.728000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "I suggested 8 bytes because that would make it possible to map protocol names to uint64",
        "created_at": "2021-02-17T10:28:34.010000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Protocol names are used in the client in very few ways, they mostly matter during the initial handshake when the available protocols are matched between peers",
        "created_at": "2021-02-17T10:29:32.210000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I suppose in some languages switching on an INT is easier than switching on a string...",
        "created_at": "2021-02-17T10:42:09.183000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "Narrative that OE has the \"bug\" and needs to \"just fix it\" is a really twisted, and it just feels bad.\nI didnt get in beginning why Geth took this strong stand but it seems from their side it is not just simple rename from `snap` to `snp` that i assumed to be.\nI dont want to waste more my or others energy on this topic that in essence is not worth it, lets just move on,  it will be fixed in OE.",
        "created_at": "2021-02-17T10:49:05.340000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "\u003c@!429719902363058177\u003e I don't want to make you feel bad",
        "created_at": "2021-02-17T11:01:04.352000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Guillaume from our team already started looking into the changes that would be required in OE to make it work",
        "created_at": "2021-02-17T11:02:18.091000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "We really just want to make sure everything is working correctly, please don't be offended by this.",
        "created_at": "2021-02-17T11:03:05.264000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "I already made one here: https://github.com/rakita/openethereum/tree/protocol_id\nI will try to make it as u64 it seems better way.\nI feel bad on how discussion went, not about conclusion",
        "created_at": "2021-02-17T11:04:24.107000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "OK",
        "created_at": "2021-02-17T11:04:31.962000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "OE is syncing on yolo3",
        "created_at": "2021-02-17T11:06:21.188000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "YES!",
        "created_at": "2021-02-17T11:06:30.831000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Very cool!",
        "created_at": "2021-02-17T11:06:33.814000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "The way I see it, since OE is derived from parity, it has inherited many of the initial choices made by the parity team. Aleth and parity were always opinionated in a certain way, and we had many discussions about interop questions with them early on.",
        "created_at": "2021-02-17T11:08:00.235000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Really hope we can handle interop questions better in the future",
        "created_at": "2021-02-17T11:09:37.158000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "Can agree with that, we have a lot of legacy from parity and I am not talking just about code. we can definitely improve interop, at the end we all have same goal",
        "created_at": "2021-02-17T11:13:14.487000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "yeah!",
        "created_at": "2021-02-17T11:14:52.789000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Do people still think this is necessary? Happy to organize a breakout room to discuss general changes to protocol specs if people think that would be valuable even with the `snap` issue resolved",
        "created_at": "2021-02-17T15:25:52.088000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "`snap` isn't really the issue.  Just a MacGuffin.  ðŸ™‚",
        "created_at": "2021-02-17T15:26:11.633000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The issue is that it doesn't seem there is a clear process for making changes to the networking protocol specification.",
        "created_at": "2021-02-17T15:26:34.686000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Though, if no one is interested in taking the time to address that issue then a breakout room isn't worth it.  ðŸ¤·",
        "created_at": "2021-02-17T15:26:50.751000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yeah, that's what I was trying to say (still haven't had my first coffee ðŸ˜… ), wondering if people are interested in the general conversation. We can also have it as a quick ACD item (though perhaps not this call because it is already quite full) and see if it can be quickly resolved?",
        "created_at": "2021-02-17T15:27:23.054000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Nice! I believe that is everyone, right? \u003c@!388751025789468672\u003e are you still in sync? \u003c@!489256758989029405\u003e \u003c@!403707149043105803\u003e Nethermind and Besu are synced, correct?",
        "created_at": "2021-02-17T15:27:52.744000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Is this with the the new changes?",
        "created_at": "2021-02-17T15:30:21.955000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "We still good to go for client readiness by friday? Pick a fork block for mid-next week for the testnets?",
        "created_at": "2021-02-17T15:30:54.662000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "If everyone is in sync, we can pick a block for testnets, but it canâ€™t be mid next week. More like 2-3 weeks from now. Afri opened an issue to discuss at ACD, but maybe we can agree on it async here prior to the call, again, assuming everyone is synced",
        "created_at": "2021-02-17T15:35:51.773000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "2-3 weeks seems like a long time ðŸ¤” . Any technical reasons here?",
        "created_at": "2021-02-17T15:37:40.585000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Where is the bottleneck?",
        "created_at": "2021-02-17T15:37:52.879000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yes: releasing clients and communicating the fork to the community",
        "created_at": "2021-02-17T15:38:06.453000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "All teams need to put out a new release, people need to update their nodes, etc. We canâ€™t do that in 3 days. For previous upgrades, we had an even longer period.",
        "created_at": "2021-02-17T15:39:22.756000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "By staging the testnets, I think itâ€™s fine to start forking them in 2-3 weeks, because if something goes wrong on one at least we can disable Berlin for the others.",
        "created_at": "2021-02-17T15:39:57.430000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Will clients be able to have the release ready by friday?",
        "created_at": "2021-02-17T15:40:35.263000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "No",
        "created_at": "2021-02-17T15:40:40.409000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Not Besu at least",
        "created_at": "2021-02-17T15:40:48.768000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "This would mean we need to release an additional release to disable Berlin thought right?",
        "created_at": "2021-02-17T15:41:13.459000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "If things go wrong, yes",
        "created_at": "2021-02-17T15:41:22.786000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "That is a lot more worrying situation to me tbh",
        "created_at": "2021-02-17T15:41:55.697000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Why are we worried so much about the testnets?",
        "created_at": "2021-02-17T15:42:18.833000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Curious what other teamâ€™s release cycle is like. We can do an â€œout of cycleâ€ release for Besu if weâ€™re holding everyone back here.",
        "created_at": "2021-02-17T15:42:27.901000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If people don't upgrade, they'll be on a testnet fork that may or may not be producing blocks.  ðŸ¤·",
        "created_at": "2021-02-17T15:42:37.519000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I donâ€™t understand?",
        "created_at": "2021-02-17T15:42:44.798000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "If people have to actively upgrade to avoid a chainsplit if people forget.",
        "created_at": "2021-02-17T15:42:48.258000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Feels *equally* worrying to me.  ðŸ˜›",
        "created_at": "2021-02-17T15:43:03.060000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I mean, most clients probably have a flag to turn the hard fork off, but if thereâ€™s a bug, it needs to be fixed and that needs a new version",
        "created_at": "2021-02-17T15:43:34.217000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "In both cases, we have people who upgrade and people who don't.  There *will* be a chainsplit in all cases.  All we can do is try to limit the number of people on the \"wrong\" side.",
        "created_at": "2021-02-17T15:43:50.576000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Agreed, and we can reduce that by a lot just by waiting a few weeks vs days, no?",
        "created_at": "2021-02-17T15:44:17.256000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Like, Infura and Etherscan wonâ€™t update on a 24h notice, and even if they can, it will suck for them to do so",
        "created_at": "2021-02-17T15:44:45.595000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "3 vs 2-3 weeks is a pretty big difference, and 24 hours isn't on the table.",
        "created_at": "2021-02-17T15:45:24.742000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Its the release that has the mainnet blocks that has me concerned.",
        "created_at": "2021-02-17T15:45:51.296000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I would like to better understand what problem we are trying to solve.  Why do we care so much about a testnet chain split?  So what if Infura is on a different version of Ropsten for a while because they are slow to migrate?",
        "created_at": "2021-02-17T15:45:56.892000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Can you give an example of what is the rollout schedule youâ€™d want \u003c@!187490121698770945\u003e ?",
        "created_at": "2021-02-17T15:46:14.167000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "If we have to wait 2-3 weeks for testnets to activate then we need an additional 2-3 weeks for mainnet.",
        "created_at": "2021-02-17T15:46:16.620000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yes, at least?",
        "created_at": "2021-02-17T15:46:26.798000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Choosing the mainnet fork before then means releasing mainnet blocks before we know if there is any issue on mainnet otherwise",
        "created_at": "2021-02-17T15:46:52.857000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "unless we push out Berlin about 2 months",
        "created_at": "2021-02-17T15:47:12.541000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Besu full syncs to head on the dev branch (correcting for yolov3x)",
        "created_at": "2021-02-17T15:47:15.360000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "See this https://discord.com/channels/595666850260713488/745077610685661265/810196927865290773",
        "created_at": "2021-02-17T15:47:21.606000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "I'm not feeling the same priority for Testnets from splitting. Better to get out Berlin early so we can get ready for the next fork. Which on the delayed schedule means we have that fork 2 months after Berlin.",
        "created_at": "2021-02-17T15:49:28.466000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e 1. Having at least a 2 week release cycle and **small buffer from the day the testnet blocks are agreed upon and the first fork** (so that clients can package, communicate and distribute their release);\nThis is the bit that I don't understand.  Why do we need this?\n\u003e 2. Not having all 3 testnets fork at once so that if something goes wrong on one, we can issue a patch release before the others fork;\nI sort of get this one, but also would like to see why people feel such a strong need for it.",
        "created_at": "2021-02-17T15:49:40.296000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Why not work on both in parallel? There is no work for core devs to do once Berlin is scheduled",
        "created_at": "2021-02-17T15:50:04.270000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "2-3 weeks testnets\n2-3 weeks mainnet berlin\n2-3 weeks testnet London\n2-3 weeks mainnet London",
        "created_at": "2021-02-17T15:50:17.838000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "That is Junish already",
        "created_at": "2021-02-17T15:50:42.314000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "We can start London testnets now.  ðŸ¤· (hypothetical, for the sake of argument)",
        "created_at": "2021-02-17T15:50:55.280000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "London doesn't have the EIPs decided yet",
        "created_at": "2021-02-17T15:51:12.170000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "We can start deciding that now.  ðŸ™‚",
        "created_at": "2021-02-17T15:51:18.814000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yes, I have an issue on ACD about that",
        "created_at": "2021-02-17T15:51:31.171000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Point being, that we don't have to block London's forward progress on waiting for Berlin to finish a lengthy release process.",
        "created_at": "2021-02-17T15:51:40.468000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yes exactly",
        "created_at": "2021-02-17T15:51:50.127000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I donâ€™t feel strongly about the specifics, but IMO going _way_ quicker for Berlin, after a process where weâ€™ve uncovered bugs almost each step of the way, just because weâ€™re already late seems reckless",
        "created_at": "2021-02-17T15:52:30.415000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "It seems like we are setting ourself up for more delays if there is a testnet issue.",
        "created_at": "2021-02-17T15:52:48.565000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "We can work on London in parallel, limit its scope and ship it in July if we start planning it now",
        "created_at": "2021-02-17T15:52:54.932000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "^ these are the reasons to delay?",
        "created_at": "2021-02-17T15:57:44.717000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "We already talked about clients having a release ready by Friday last call. So the release being \"out of band\" is a bit of a strange argument to me.",
        "created_at": "2021-02-17T15:58:58.005000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Given we decided 2 weeks ago by friday to have them.",
        "created_at": "2021-02-17T15:59:22.648000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "The priority should be mainnet imo. And a 2-3 week window for testnets is a lot longer.",
        "created_at": "2021-02-17T16:00:36.960000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "re: just because we're already late\n\nIsn't the reason. The point is IF there is a problem on the Testnets then we need to update and do a new release for Mainnet",
        "created_at": "2021-02-17T16:02:17.042000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "and picking blocks for mainnet before knowing the testnet works is setting us up for worse problems.",
        "created_at": "2021-02-17T16:02:53.261000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Realistically that means the next fork is in the next 2 months after we fork Berlin. And, that is if there is no issues.",
        "created_at": "2021-02-17T16:04:26.406000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "And the reason we are cutting the two close is so we can give fork node operators more lead time for the testnet?",
        "created_at": "2021-02-17T16:06:07.906000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "If there is a problem with the testnets we are suddenly refocus on Berlin.",
        "created_at": "2021-02-17T16:09:15.935000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "The Dual focus approach isn't going to work if we have a problem with the test-nets in 2-3 weeks, because we need need to refocus again on Berlin.",
        "created_at": "2021-02-17T16:10:52.212000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "If the reason to delay is mainnet safety I am all about it.",
        "created_at": "2021-02-17T16:11:10.509000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "If the clients can be ready with the release on Friday, and all clients are syncing on YOLO, we could even announce Fork blocks today/tomorrow.",
        "created_at": "2021-02-17T16:14:05.509000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "And start the community outreach.",
        "created_at": "2021-02-17T16:14:15.520000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "That would give us  week.",
        "created_at": "2021-02-17T16:15:38.799000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "for example",
        "created_at": "2021-02-17T16:16:34.348000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "This works as long as we don't have to go back if there is a problem discovered with the testnets.",
        "created_at": "2021-02-17T16:17:37.183000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Delaying the Testnet delays when we know this, and delays mainnet releases as well",
        "created_at": "2021-02-17T16:19:03.009000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm not too worried about client developers being able to context switch from London back to Berlin.",
        "created_at": "2021-02-17T16:20:25.060000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yeah, I don't think that's a major issue",
        "created_at": "2021-02-17T16:20:32.598000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "As long as we aren't doing context switches like that daily at least (sounds like we are talking about maybe a few over the course of a month).",
        "created_at": "2021-02-17T16:20:47.409000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "So, I do think shipping the tesnet forks in a few days is way too quick, but if me/Besu are the only ones with that opinion, we won't block everyone. FWIW \u003c@!557201004060213248\u003e had put an issue to discuss potential timelines on this week's ACD and also got pushback for it being too quick: https://github.com/ethereum/pm/issues/248",
        "created_at": "2021-02-17T16:21:46.288000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "You see any issue with Forks being too close? We could easily end up with forks being 1-2 months apart",
        "created_at": "2021-02-17T16:21:47.256000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Few days is too quick is understandable. Jumping straight to 14-20 days seems a lot longer then needed.",
        "created_at": "2021-02-17T16:23:25.916000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e I do think shipping the tesnet forks in a few days is way too quick\nCan you elaborate on why?  What bad thing are you afraid will happen?",
        "created_at": "2021-02-17T16:23:28.863000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "^ plus 1 to this",
        "created_at": "2021-02-17T16:23:56.808000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "So, I think my meta-concern is we're going to push everyone to update at \"emergency speed\" when there isn't really a reason to do so. Specifically: \n\n1. Organizations (ex: miners/validators, infura, etherscan) not updating isn't the end of the world, but it is not great. \n2. Stressing out already streched core developers to put out a release \"ASAP\" only days after fixing the last bug we found on YOLO, again, without actually having a rush \n3. While it's not the end of the world if a testnet breaks or forks, it's worth noting that Ethereum's testnet have more usage than most blockchain's mainnets, so taking the time to properly release it, announce it and have people update their nodes seems reasonable.",
        "created_at": "2021-02-17T16:29:30.595000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I understand that this means Berlin and London will overlap greatly, but IMO that ship has already sailed anyways (see my proposed timelines for London here: https://github.com/ethereum/pm/issues/245), so there's no real \"cost\" to just deploying Berlin at the same speed as we've deployed, say, Istanbul, as long as we can agree we need to start working on London in parallel. If we don't then London will end up just being Muir Glacier Pt II.",
        "created_at": "2021-02-17T16:30:50.404000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e Organizations (ex: miners/validators, infura, etherscan) not updating isn't the end of the world, **but it is not great.**\nWhy is it \"not great\"?  What bad thing happens if some people fail to update quickly?",
        "created_at": "2021-02-17T16:32:07.198000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Well, if miners/validators don't update, then they cause a fork. If Etherscan/Infura don't update, then people using those networks don't get the right data (or any data?) returned by it",
        "created_at": "2021-02-17T16:32:47.584000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e Well, if miners/validators don't update, then they cause a fork.\nForks happen all the time.  Why are we worried about this?",
        "created_at": "2021-02-17T16:33:17.591000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Perhaps you believe that people are doing meaningful things on testnets that we should try to protect from breaking?",
        "created_at": "2021-02-17T16:33:38.591000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "FWIW, here's the timelines we used for Istanbul: https://medium.com/ethereum-cat-herders/istanbul-testnets-are-coming-53973bcea7df\n\nPublic Announcement: Sept 25th (incl. all clients' ready version)\nRopsten block #6485846 (Oct 2)\nGÃ¶rli block #1561651 (Oct 30)\nRinkeby block #5435345 (November)\nKovan block #14111141 (December)\nMainnet (December)",
        "created_at": "2021-02-17T16:33:52.478000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I generally consider the testnets test environments that no one should *expect* to be up/stable.",
        "created_at": "2021-02-17T16:33:54.557000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yes, I think we do see that (ex: Reddit used one, the Eth2 testnets are based on Goerli)",
        "created_at": "2021-02-17T16:34:01.832000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I don't have more than anecdata on this, though, and would be happy to be proven wrong ðŸ‘ !",
        "created_at": "2021-02-17T16:34:24.551000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Ropsten's the only major issue.  The PoA networks won't fork like a PoW network will.  Worst case is they will halt when \u003e 1/3 are on a different fork.",
        "created_at": "2021-02-17T16:40:04.867000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "There is a small N to co-ordinate with.  Ropsten is all under EF/Geth control. Goerli may need some lead time.  Not sure what kovan looks like.  The bad impact is downstream users will suddenly be kicked off chain.  Almost as bad as a fork but it is easily resolvable (update your client).",
        "created_at": "2021-02-17T16:41:15.049000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "But if clients haven't shipped release grade versions of the software I see downstream node operators balking at upgrading.",
        "created_at": "2021-02-17T16:41:55.363000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "(small n to coordiate with - I'm speaking of the validator nodes)",
        "created_at": "2021-02-17T16:43:58.556000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "That goes back to my original question on having a release ready by Friday. So far we've head from Besu. It would be good to hear from the other clients",
        "created_at": "2021-02-17T16:44:13.830000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Looking at this, and the istanbul. What do we get from staggering each testnet release?",
        "created_at": "2021-02-17T16:45:13.697000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Looking at this as the most recent comment from Tim on the github issue",
        "created_at": "2021-02-17T16:45:40.292000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "896f7ead8bc475a18d8d2fa5c2a53499a711be0e97c7784e52272a108db440e3"
            }
        ]
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Here Rinkeby and Kovan are combined already",
        "created_at": "2021-02-17T16:46:07.847000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "If one breaks, only break 1 testnet, not all",
        "created_at": "2021-02-17T16:46:10.558000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Yes, I'm not sure what the status is re: Kovan (see the text above that screenshot). \u003c@!429719902363058177\u003e do you still want to keep it post-Berlin?",
        "created_at": "2021-02-17T16:46:36.793000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "One thing to note on this: the goal is to have the testnets with the most usage be forked for the longest before mainnet. So I'm not sure we'd want to pull mainnet forward much even if we forked all testnets at the same time, but maybe we'd gain an extra 1-2 weeks?",
        "created_at": "2021-02-17T16:48:11.754000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "Yes I think post berlin is okay, we still need to merge some things related to AuRa. I think this is OE thing and we will organize it after Berlin.",
        "created_at": "2021-02-17T16:49:33+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "So should we schedule a fork block for it along with the other testnets? Not sure I fully got it ðŸ˜…",
        "created_at": "2021-02-17T16:50:09.944000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "Just forget about kovan for berlin. We attend to do after berlin release for kovan changes",
        "created_at": "2021-02-17T16:51:06.464000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "What's OE's preferred timeline to release Berlin, \u003c@!429719902363058177\u003e? Curious about \u003c@!211091239112671234\u003e and \u003c@!489256758989029405\u003e as well!",
        "created_at": "2021-02-17T16:52:04.275000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Ya I'm still in sync.  I'm still catching up on this channel but only the only issue I've seen with geth is the JSONRPC responses for EIP-2930 `eth_getTransactionReceipt` are slightly off, but that should be a minor fix.",
        "created_at": "2021-02-17T16:53:31.342000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "Which client team are you a part of Ryan? I can add you to the team on this dicord.",
        "created_at": "2021-02-17T16:55:03.073000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Infura",
        "created_at": "2021-02-17T16:55:08.823000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "nice",
        "created_at": "2021-02-17T16:59:18.382000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "I don't think we have a team for them here ðŸ˜…",
        "created_at": "2021-02-17T16:59:32.050000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is okay.  Ryan can be part of team teamless with me.  It is the team with all of the cool kids.",
        "created_at": "2021-02-17T17:02:25.365000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "general",
        "parent": "",
        "content": "One sec, i'll make a team for you. ðŸ™‚",
        "created_at": "2021-02-17T17:02:43.559000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Free Agent For Life.",
        "created_at": "2021-02-17T17:02:55.236000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "So maybe we can start by each client team listing when they think they can _comfortably_ have a Berlin-compatible release available, and then work form there?  \n\nRE: testnet stability.  We have customers that use the testnets for, well, testing.  It's not the end of the world if there are issues on the testnets because of the fork failing in different ways, but if it's avoidable then I think we should try to avoid it. \nRE: timing.  For major new releases we prefer to sync new chains, which depending on the testnet can take over 24h, but if need be we can always deploy in place.",
        "created_at": "2021-02-17T17:05:52.029000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "\u003e So maybe we can start by each client team listing when they think they can comfortably have a Berlin-compatible release available, and then work form there?\nFor Besu, if we agree on blocks before ACD Friday, then mid-next week we can have a release with the blocks in them as part of our regular release cycle.",
        "created_at": "2021-02-17T17:07:16.192000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Why do you sync from scratch?",
        "created_at": "2021-02-17T17:07:17.433000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Mainly for our own knowledge/preparedness in case something goes wrong.  Ideally we do both fresh installs and upgrades, so we can see if there are any sync bugs related to syncing from scratch or from upgrading an existing chain.  Usually major new versions of geth have DB upgrades built into them (e.g. the ancient change in 1.9) but I'm not aware of any such major changes in 1.10.",
        "created_at": "2021-02-17T17:10:25.027000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "If we choose Goerli as the first testnet to fork, we should make sure we have a quorum of signers prepared to upgrade, IIRC we've had trouble getting ahold of some signers lately.  Likewise for Ropsten I don't know who normally does the mining, we have a backup miner we spin up sometimes if the network gets in really bad shape but prefer not to as it's not really automated.",
        "created_at": "2021-02-17T17:13:15.926000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Let me share a bit of context for us around how what seems like \"small\" changes can actually have larger impacts.  For us specifically Berlin is a bit of a triple whammy: \n\na) we need to upgrade our clients to a Berlin compatible release (not too bad, nothing surprising there)\nb) it's the first 1.10 release of geth.  For historical reasons we key our geth infra off the \"major\" version (1.10) so need to either do some anticipatory infra work using unreleased geth or \"lie\" to our infra and say that 1.10.0 is still 1.9.x (some risk there, this one is probably unique to us)\nc) we need to update some of our non-client infra (e.g. our routing layer) to be EIP-2718/-2930 aware.  This work is already mostly done but is mainly dependent on the JSONRPC responses for EIP-2718/-2930 being firmed up. (others might not even be aware these changes are coming)\n\nI can only hypothesize but wouldn't be surprised if other large consumers like Etherscan have totally different but equally non-trivial changes they need to implement.\n\nOf course our main concern is mainnet, but as stated ideally the testnet forks go off without a hitch as well.",
        "created_at": "2021-02-17T17:36:28.252000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "general",
        "parent": "",
        "content": "PSA: I have merged Rust implementations of devp2p, discv4 and DNS discovery into rust-sentry repo\n\nhttps://github.com/rust-ethereum/sentry",
        "created_at": "2021-02-17T23:11:56.737000+00:00",
        "attachments": null
    }
]