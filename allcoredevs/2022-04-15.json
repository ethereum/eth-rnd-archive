[
    {
        "author": "chfast",
        "category": "general",
        "parent": "",
        "content": "The EIP-3540: EVM Object Format (EOF) wording has been updated based on the feedback. No functional changes. https://github.com/ethereum/EIPs/pull/4822",
        "created_at": "2022-04-15T08:08:14.293000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "AllCoreDevs in ~30min (Apr. 15, 14:00 UTC)\nAgenda: https://github.com/ethereum/pm/issues/508\nStream: https://youtu.be/JXbOeiPN_uE\nZoom: https://ethereumfoundation.zoom.us/j/91348592283?pwd=SnRnL1VTeXNYVE9CaWpBbnJEUXhQZz09",
        "created_at": "2022-04-15T13:30:26.681000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e zoom link?",
        "created_at": "2022-04-15T14:14:09.921000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctimbeiko\u003e weird, it didnâ€™t cross post",
        "created_at": "2022-04-15T14:16:19.661000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctimbeiko\u003e https://ethereumfoundation.zoom.us/j/91348592283?pwd=SnRnL1VTeXNYVE9CaWpBbnJEUXhQZz09",
        "created_at": "2022-04-15T14:16:27.662000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctimbeiko\u003e last 2 messages didnâ€™t btw, so the bridge may be broken",
        "created_at": "2022-04-15T14:16:46.732000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e ah damn",
        "created_at": "2022-04-15T14:17:06.706000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cpjickling\u003e test",
        "created_at": "2022-04-15T14:25:43.441000+00:00",
        "attachments": null
    },
    {
        "author": "paulj",
        "category": "general",
        "parent": "",
        "content": "test",
        "created_at": "2022-04-15T14:26:02.072000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cpjickling\u003e ok bridge seems fixed, sorry about that!",
        "created_at": "2022-04-15T14:26:14.507000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "\u003c@425279588009246720\u003e said he didn't follow me, so...\nhttps://eips.ethereum.org/EIPS/eip-3860 limits initcode to\n`MAX_CODE_SIZE*2 = 0xC000 =49152`\nwhich fits in 16 bits, which can span that many bytes. But https://eips.ethereum.org/EIPS/eip-170 limits contract code to\n`MAX_CODE_SIZE = 0x6000 = 24,576`\nThe problem is that https://eips.ethereum.org/EIPS/eip-4200 uses a 16 bit intermediate that must span 24,576 bytes for forward and backward relative jumps.  \u003c@211091239112671234\u003e's suggestion to jut use JUMPs could fall afoul of deprecating dynamic jumps in the future.  I'd suggest we use EOF format to break the initcode into code and data sections.",
        "created_at": "2022-04-15T16:12:52.202000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "EOF \"breaks\" initcode into code+data.",
        "created_at": "2022-04-15T16:23:11.641000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "It is optional and not enforced though, as it cannot be enforced without significant changes.",
        "created_at": "2022-04-15T16:24:15.062000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "OK.  I don't quite follow, but seems we should take it up on the Magician's thread later.",
        "created_at": "2022-04-15T16:26:48.335000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "The expected behaviour is that the deployed code is placed into the data section.",
        "created_at": "2022-04-15T16:27:26.189000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "I guess I'm not seeing why that can't be enforced.",
        "created_at": "2022-04-15T16:29:11.362000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "The way the initcode works it just returns data. That data is just a slice of memory, and any regular instruction can be used to populate the memory.\n\nUnless you introduce a specific opcode like `returndeployedcode` and only allow that to be used in an initcode, you cannot enforce how the memory is populated.",
        "created_at": "2022-04-15T16:32:08.311000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "And if you cannot enforce how the memory is populated, you cannot stipulate using a specific opcode to populate that from the data section.",
        "created_at": "2022-04-15T16:32:43.260000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "I am just not sure what is the problem statement ðŸ™‚",
        "created_at": "2022-04-15T16:33:25.904000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "If the initcode is as large as proposes it can't be spanned by EIP-4200's static relative jumps.",
        "created_at": "2022-04-15T16:34:38.962000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Not sure why this is a problem:\n\na) dynamic jump opcodes remain\nb) can chain jumps\nc) in most cases the code section will not be as big as runtime code is placed into the data section",
        "created_at": "2022-04-15T16:35:31.198000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "However what is your suggestion?",
        "created_at": "2022-04-15T16:36:38.085000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "(a) is ok until we deprecate dynamic jumps.  But (b) solves the problem, which will be rare.  So I needn't have a suggestion.",
        "created_at": "2022-04-15T16:37:27.629000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "A related topic:  Someone (Andrew?) was worried about the effect of EOF on Merkelization of code.  My take is that in general object files are structured files containing code, data, and metadata that linkers use to produce executable files of machine code.  I'm thinking that the output of the validation phase could, in the same way, be pure  bytecode without the EOF metadata.  That also makes the specification of the state transition function in the Yellow paper much simpler as well.",
        "created_at": "2022-04-15T16:40:18.451000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "That was an early thought some years back, that instead of storing this entire code in state, it would be only for initcode in the transaction. This however makes us loose one property: versioning, and we are back to square one needing a version property in the account.",
        "created_at": "2022-04-15T16:42:21.678000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Plus factory contracts will still need to store EOF code as data.",
        "created_at": "2022-04-15T16:44:51.173000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "Yeah. I'm think that after validation you have the actual code that needs to be executed.  And Merleized.  I think you can see my concern about complicating the simple \"tick-tick-tick\" semantics of the EVM. But I'm afraid I have a lot to do before my flight to Amsterdam tomorrow morning.",
        "created_at": "2022-04-15T16:47:29.281000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "So we should talk about this more there ðŸ™‚",
        "created_at": "2022-04-15T16:48:21.308000+00:00",
        "attachments": null
    }
]