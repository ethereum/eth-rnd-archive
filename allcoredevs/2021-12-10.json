[
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "If anyone who worked on Arrow Glacier wants an EthStaker POAP for it, DM me and I'll send you one. Thanks \u003c@!584920944762552346\u003e for setting this up üôè",
        "created_at": "2021-12-10T00:29:32.405000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": "Notion is much better in terms of UX, readability, usability and maintainability\n\nhttps://www.notion.so/wikis",
        "created_at": "2021-12-10T03:06:06.629000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": "and free ‚úÖ",
        "created_at": "2021-12-10T03:06:59.306000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "For anyone interested in EIP-4488 btw, I looked into the effect of different mining algorithms and stipend sizes on miner profitability:\nhttps://hackmd.io/@adietrichs/4488-mining-analysis",
        "created_at": "2021-12-10T03:19:50.906000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "tl;dr even with \"naive\" mining, profitability is within ~10% of optimal packing. when tweaking the naive approach just a little bit, that goes to within ~1% of optimal packing.",
        "created_at": "2021-12-10T03:21:05.556000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "And even with a moderate stipend (260 bytes looked good, but could also stick with the current 300), over 99% of current real-world transactions could still be included into blocks with the 1MB base calldata limit already fully consumed. and the remaining \u003c1% are overwhelmingly \"big-calldata\" txs (mostly rollups), so they would exactly be those txs consuming the 1MB in the first place",
        "created_at": "2021-12-10T03:24:13.564000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "I know there are several other valid concerns about a potential pre-merge fork for this EIP, but at least miner profitability without fancy algorithms and inclusion problems for \"normal-sized\" transactions should not be among those concerns üôÇ",
        "created_at": "2021-12-10T03:25:47.206000+00:00",
        "attachments": null
    },
    {
        "author": "tokey1475",
        "category": "general",
        "parent": "",
        "content": "is the plan to squeeze mev-boost with the merge or if it's implemented will it be post-merge?",
        "created_at": "2021-12-10T04:16:59.480000+00:00",
        "attachments": null
    },
    {
        "author": "tokey1475",
        "category": "general",
        "parent": "",
        "content": "i'm assuming post-merge since it seems to be decently complex",
        "created_at": "2021-12-10T04:20:04.164000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": "also why use a third party product like substack or notion?\n\nwhen we have https://blog.ethereum.org/",
        "created_at": "2021-12-10T09:50:30.137000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": "\u003c@643099918998831144\u003e \u003c@485238712415027221\u003e and the ethereum.org team can implement some sort of newsletter",
        "created_at": "2021-12-10T09:51:50.448000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": "so that folks get regular updates.",
        "created_at": "2021-12-10T09:52:04.095000+00:00",
        "attachments": null
    },
    {
        "author": "abcoathup",
        "category": "general",
        "parent": "",
        "content": "The request from Micah was for notifications of upgrades via email; along the lines of when the block is decided, when the releases are available and when it actually happens; notifications should be infrequent, e.g. 3 per upgrade.  If you can do that through blog.ethereum.org, then great.  I was suggesting substack as that is what I use to distribute the newsletter I am the editor of.",
        "created_at": "2021-12-10T09:55:03.439000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": "Oh thats great, you are the guy behind that famous newsletter ‚ù§Ô∏è I'm a subscriber and avid reader üöÄ\n\nSorry I missed the original context.",
        "created_at": "2021-12-10T10:01:33.063000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": ".",
        "created_at": "2021-12-10T10:01:47.603000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "IMG_20211210_152846.jpg",
                "content": "a90a2040247649e15b9e33d15a36c7093fb885cb1f9ea90d841f66f2c4bdf6a0"
            }
        ]
    },
    {
        "author": "muddlebee",
        "category": "general",
        "parent": "",
        "content": "A new category here for releases maybe for frequent/infrequent  updates?\n\nWe got a kickass team at Ethereum.org. There's nothing they can't do.",
        "created_at": "2021-12-10T10:02:46.994000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "This is great work!",
        "created_at": "2021-12-10T12:28:08.165000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "We, in the \u003c@\u0026688090867927482525\u003e team, have discussed EIP-4488 a bit, and are _not_ in favour of including it before the merge. We collected some of the reasons why in this post: https://notes.ethereum.org/EH_xVCD8SnaLCEDrXxUyYA?view",
        "created_at": "2021-12-10T13:08:52.754000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "I seriously hope nobody is offended by this.",
        "created_at": "2021-12-10T13:24:00.907000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "In hindsight, the way i phrased this may come off a bit like we're against rollups in general.",
        "created_at": "2021-12-10T13:24:36.761000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "üòá",
        "created_at": "2021-12-10T13:24:57.217000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "That's not the case!",
        "created_at": "2021-12-10T13:25:08.517000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "I think it's very helpful to see your position written down!",
        "created_at": "2021-12-10T13:38:48.102000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "On that note, **AllCoreDevs starts in 20 minutes!**\n\nAgenda: https://github.com/ethereum/pm/issues/428\nStream: https://youtu.be/Py1_Bw0frO0\nZoom: https://ethereumfoundation.zoom.us/j/91348592283?pwd=SnRnL1VTeXNYVE9CaWpBbnJEUXhQZz09",
        "created_at": "2021-12-10T13:39:19.968000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "I am certainly not offended üôÇ\nBut I don think there are some more fundamental questions that are relevant here re: the role of acd in ethereum governance",
        "created_at": "2021-12-10T13:39:33.283000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "Basically, I would say the concerns around history growth and bandwidth requirement, as well as around the process violation of a unscheduled fork are very valid, and might already be sufficient reasons to not do the fork",
        "created_at": "2021-12-10T13:41:01.787000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "The concerns around \"normal\" txs being outcompeted are valid as well, but I think that in the specific case of 4488 the mechanism specifically results in that not happening (although point taken, this needs more explaining. I hope my analysis from yesterday can help there).",
        "created_at": "2021-12-10T13:42:16.603000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "As to the points on the rollup centric scaling vision for Ethereum, there I am somewhat concerned. Like, those are valid points as well, but they are not technical, and thus I am not sure if acd is the correct venue for them? Basically, it feels more like concerns individual members of the geth team should raise as concerned community members, instead of it being part of the official geth stance.",
        "created_at": "2021-12-10T13:43:42.389000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "I have now deleted the thing about rollup funding",
        "created_at": "2021-12-10T13:44:07.164000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "We're left with the reason that rollups are not super ready",
        "created_at": "2021-12-10T13:44:23.696000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "IMHO that is a valid point to make",
        "created_at": "2021-12-10T13:44:35.722000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "and I apologize for venturing into non-technical territory like that",
        "created_at": "2021-12-10T13:45:04.525000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "general",
        "parent": "",
        "content": "No worries! I actually think all of this is a bit unclear (as is the \"mandate\" of acd), so best we can do is talk about it.",
        "created_at": "2021-12-10T13:45:45.524000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "general",
        "parent": "",
        "content": "thanks for the writeup geth team, this is very helpful",
        "created_at": "2021-12-10T14:01:20.506000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I guess it's important to add that 4488 isn't a bad EIP and we aren't opposed to the ideas in it. Rather we're opposed to it being pushed through to hastily before understanding and exploring all the subtle implications. And thus the question arises that do we afford to take all that time away from the merge or if we should favor the merge first (I'm personally saying we should finish what we started before opening a new can of worms)",
        "created_at": "2021-12-10T14:01:37.664000+00:00",
        "attachments": null
    },
    {
        "author": "void.xyz",
        "category": "general",
        "parent": "",
        "content": "So EIP-4488 proposed that a block is only valid if `sum(len(tx.calldata) for tx in block.txs) \u003c= BASE_MAX_CALLDATA_PER_BLOCK + len(block.txs) * CALLDATA_PER_TX_STIPEND`",
        "created_at": "2021-12-10T14:06:16.669000+00:00",
        "attachments": null
    },
    {
        "author": "void.xyz",
        "category": "general",
        "parent": "",
        "content": "This logic is fairly straight forward, but I wanted to know more about what `len(block.txs) * CALLDATA_PER_TX_STIPEND` does",
        "created_at": "2021-12-10T14:06:49.384000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "\u003c@!99602475178295296\u003e That allows smaller txs to fit even if the \"data space\" was already fully consumed by rollups. The catch is that if your tx is \u003e than 300 bytes, you need to outbid the rollups. Which is going to be... expensive",
        "created_at": "2021-12-10T14:09:22.285000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "general",
        "parent": "",
        "content": "If someone wants to do some experimentation there is a prototype implementation in Nethermind's PR you can use. That was the point of making it to allow people to experiment and understand 4488 better",
        "created_at": "2021-12-10T14:25:55.100000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "BTW, \u003c@!206016661470314496\u003e we have fixed serving receipts in Erigon üôÇ",
        "created_at": "2021-12-10T15:32:10.283000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and we are already working on solutions to package chain history into files and serve it. It is currently iteration 2 or 3",
        "created_at": "2021-12-10T15:33:49.431000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Oh, I thought it was a feature of Erigon to not store them for some reason",
        "created_at": "2021-12-10T15:33:57.857000+00:00",
        "attachments": null
    },
    {
        "author": "void.xyz",
        "category": "general",
        "parent": "",
        "content": "Where are the announcements to the community about upcoming changes going to be made?",
        "created_at": "2021-12-10T15:34:16.433000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Wrt to serving historical files, might be interesting to collab on how it will be in tyh future",
        "created_at": "2021-12-10T15:34:27.582000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Erigon keeps them by default, but we just forgot to do some plumbing to server them via devp2p",
        "created_at": "2021-12-10T15:34:32.807000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "to create a solution that's compatible with the future world too",
        "created_at": "2021-12-10T15:34:36+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Ok, we are trying to not simply bundle txs into file files and ship them away, but also make sure they are compressed, but accessible individually. And also they can be efficiently (compactly) indexed to perform the lookup by tx hash. Tx lookup table is the one that we really would like to remove from our DB, it generates the most write amplification",
        "created_at": "2021-12-10T15:38:26.648000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "yeeeeeess",
        "created_at": "2021-12-10T15:39:00.501000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "currently hooking it up to bit torrent",
        "created_at": "2021-12-10T15:39:08.233000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "I was annoyed by that the entire week and trying to figure out how to do it",
        "created_at": "2021-12-10T15:39:11.439000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "1 billion+ 32-byte keys for tiny-ass data. yes please let's get rid of it",
        "created_at": "2021-12-10T15:39:43.643000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I can tell you what we do üôÇ",
        "created_at": "2021-12-10T15:39:47.751000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "Static index? :)",
        "created_at": "2021-12-10T15:52:40.205000+00:00",
        "attachments": null
    },
    {
        "author": "sajz.",
        "category": "general",
        "parent": "",
        "content": "Thanks for the interesting discussion on ACD.  Some thoughts:\n* users‚Äô painpoint regarding fees are on L1 not L2. the majority of people today still have assets on L1 \n* EIP-4488 will increase rollups adoption so it‚Äôs an EIP that can be very useful when rollups are more mature if we want to push for a migration\n* any EIP that isn‚Äôt solving the L1 gas fees pain point might not be that useful for users now and probably not worth delaying the Merge for.",
        "created_at": "2021-12-10T15:53:24.811000+00:00",
        "attachments": null
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "The proposed EIP-4488 is trying to do *something* for L1 fees though. Whether it will lower fees for all users is being researched.",
        "created_at": "2021-12-10T16:11:34.067000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Come now, don't make me beg üòõ",
        "created_at": "2021-12-10T16:25:32.636000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I cannot write it up right now, but I am planning to add it up here. It is based on the idea of perfect hash tables: https://github.com/ledgerwatch/erigon/wiki/State-sync-design#building-blocks",
        "created_at": "2021-12-10T16:27:24.750000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so for each bundle file, we calculate perfect hash table that maps tx hash to some index 0...N-1, where N - number of txs in the bundle",
        "created_at": "2021-12-10T16:28:10.788000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "then, we also add index that maps the index to the offset of tx in the file",
        "created_at": "2021-12-10T16:28:24.973000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "also, we prepend each transaction payload with the first byte of its hash",
        "created_at": "2021-12-10T16:28:39.851000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so that if we get a miss in the perfect hash table, we can with high probability figure out it is not the right one, without computing the tx hash from the payload, which is expensive",
        "created_at": "2021-12-10T16:29:24.710000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "this kind of access costs currently about 100ms on the cold data (NVMe) on average, and about 0.2ms on hot data (we use memory mapping for all the bundle files)",
        "created_at": "2021-12-10T16:31:03.445000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "there are lots of details there, and there is still huge amount to improve, of course",
        "created_at": "2021-12-10T16:31:26.618000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and format can be changed to be more standard",
        "created_at": "2021-12-10T16:31:45.039000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but we have these bundles integrated into our staged sync in `devel` branch, and currently trying to seed them",
        "created_at": "2021-12-10T16:32:23.392000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "\u003c@!525860938360815626\u003e is currently doing most of the work there, whereas I am exploring the usage of these techniques for the state, and I have a prototype that runs execution through the state split up in multiple files + small DB. It fails after block 10m, and I also did not implement calculation of commitment (root hash) and unwinding, but it all should work conceptually",
        "created_at": "2021-12-10T16:33:52.007000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "most of the relevant code is in here: https://github.com/ledgerwatch/erigon-lib",
        "created_at": "2021-12-10T16:35:09.999000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "under folders `compress` , `recsplit` (perfect hash table), `aggregator` (splitting the state into files)",
        "created_at": "2021-12-10T16:35:43.373000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Oh, and I forgot to mention the size of such index",
        "created_at": "2021-12-10T16:38:36.280000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "for example, if a file contains all transactions from block 12,5m - 13m, then the size of the file itself is 13 Gb, the perfect hash table is 20Mb, and the mapping of `perfect hash table output =\u003e offset in the file` is about 1Gb",
        "created_at": "2021-12-10T16:40:40.193000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so it is pretty compact",
        "created_at": "2021-12-10T16:40:53.572000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "another caveat is that we are planing to make perfect hash tables seed from random numbers, so that each node would have different tables. Since the construction of such hash tables uses non-cryptographic hash functions (for performance reasons, it would be impractical otherwise), if everyone uses the same seed, this could be attackable",
        "created_at": "2021-12-10T16:45:16.648000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so the idea is that each node will use its own seed and build its own index once the bundles are downloaded",
        "created_at": "2021-12-10T16:45:48.316000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I am planning to update the Wiki once my code for commitment calculation works",
        "created_at": "2021-12-10T16:50:58.932000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "for comparison the deposit data on an ethereum 2.0 contract is 420 bytes",
        "created_at": "2021-12-10T22:05:20.725000+00:00",
        "attachments": null
    }
]