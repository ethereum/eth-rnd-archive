[
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Both nethermind and geth rejected this block that was propagated during the night... Nethermind output: \n```\n Oct 01 00:46:21 nethermind.ethdevops.io node 2020-09-30 22:46:21.1071| hash 0x0d9d8d722f28672d447de929996e19e3f37dd53f7410c5ca6bebc8f59c5390a0 != stated hash 0x8859e72b932d344f0b093a1332c71573750bbaddf3924208ed7ff79c4015ef90 \n```\nGeth output : \n```\n Oct 01 00:46:23 bootnode-aws-us-east-1-001 geth ########## BAD BLOCK #########\nOct 01 00:46:23 bootnode-aws-us-east-1-001 geth Chain config: {ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, YOLO v1: \u003cnil\u003e, Engine: ethash}\nOct 01 00:46:23 bootnode-aws-us-east-1-001 geth Number: 10966535\nOct 01 00:46:23 bootnode-aws-us-east-1-001 geth Hash: 0x8859e72b932d344f0b093a1332c71573750bbaddf3924208ed7ff79c4015ef90\nOct 01 00:46:23 bootnode-aws-us-east-1-001 geth Error: invalid merkle root (remote: 939e8f66e873cb41deb6ad9e00ad739c667d25926ee0fc6378fae90efb0ea45a local: c75c633180f1fdc35cb141eddfc75295cacc9e6d23aedf252a16e0643c2515d2)\nOct 01 00:46:23 bootnode-aws-us-east-1-001 geth ##############################\n```",
        "created_at": "2020-10-01T07:50:22.288000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "block: \n```\n{\n    block: {\n      difficulty: \"0xbe3bf32d425ac\",\n      extraData: \"0x626565706f6f6c2e6f72675f36\",\n      gasLimit: \"0xbe1565\",\n      gasUsed: \"0x0\",\n      hash: \"0x8859e72b932d344f0b093a1332c71573750bbaddf3924208ed7ff79c4015ef90\",\n      logsBloom: \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\n      miner: \"0x99c85bb64564d9ef9a99621301f22c9993cb89e3\",\n      mixHash: \"0x78c798c8af5775181f8cf904f2e4d1a37631b96ef3774f83fe517f40f6392ee7\",\n      nonce: \"0xf3bdce000049e903\",\n      number: \"0xa75607\",\n      parentHash: \"0x7d535052cf73c01bc25749b7caf78957b7841f24c59b3c45e3ac9091ba9cd481\",\n      receiptsRoot: \"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\n      sha3Uncles: \"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\n      size: \"0x213\",\n      stateRoot: \"0x939e8f66e873cb41deb6ad9e00ad739c667d25926ee0fc6378fae90efb0ea45a\",\n      timestamp: \"0x5f750abc\",\n      transactions: [],\n      transactionsRoot: \"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\n      uncles: []\n    },\n```\n(I have the rlp too)",
        "created_at": "2020-10-01T07:51:25.405000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "extradata is `beepool.org_6`",
        "created_at": "2020-10-01T07:51:43.041000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Besu said only\n```\n Oct 01 00:46:21 besu.ethdevops.io node 2020-09-30 22:46:21.252+00:00 | nioEventLoopGroup-3-9 | INFO | BlockPropagationManager | Saving announced block 10966535 (0x8859e72b932d344f0b093a1332c71573750bbaddf3924208ed7ff79c4015ef90) for future import \n```",
        "created_at": "2020-10-01T07:52:15.962000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Dunno about OE/Parity, ours isn't fully working",
        "created_at": "2020-10-01T07:52:35.469000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@211091239112671234\u003e this is mainnet?",
        "created_at": "2020-10-01T07:58:19.253000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Ah, yolo.",
        "created_at": "2020-10-01T07:58:58.181000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "No it's mainnet",
        "created_at": "2020-10-01T08:03:54.977000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Hmm, so there is currently a fork?  Do we know how bad yet?",
        "created_at": "2020-10-01T08:07:59.076000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Or perhaps just a miner somehow (maybe bug, maybe malicious) sent out a bad block?",
        "created_at": "2020-10-01T08:08:36.652000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "No not a fork",
        "created_at": "2020-10-01T08:08:50.668000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Just a random bad block -- but I saw it across a lot of nodes, so apparently there are some nodes that were accepting/relaying this block",
        "created_at": "2020-10-01T08:09:21.976000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Otoh, it's ok to relay a block with valid PoW without validating the stateroot, so that's fine",
        "created_at": "2020-10-01T08:12:27.572000+00:00",
        "attachments": null
    },
    {
        "author": "p_bitfly",
        "category": "general",
        "parent": "",
        "content": "OE also rejected the block:\n```\n2020-09-30 22:46:21 UTC Stage 5 block verification failed for #10966535 (0x8859…ef90)\nHeader: Header { parent_hash: 0x7d535052cf73c01bc25749b7caf78957b7841f24c59b3c45e3ac9091ba9cd481, timestamp: 1601505980, number: 10966535, author: 0x99c85bb64564d9ef9a99621301f22c9993cb89e3, transactions_root: 0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421, uncles_hash: 0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347, extra_data: [98, 101, 101, 112, 111, 111, 108, 46, 111, 114, 103, 95, 54], state_root: 0x939e8f66e873cb41deb6ad9e00ad739c667d25926ee0fc6378fae90efb0ea45a, receipts_root: 0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421, log_bloom: 0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000, gas_used: 0, gas_limit: 12457317, difficulty: 3346635074839980, seal: [[160, 120, 199, 152, 200, 175, 87, 117, 24, 31, 140, 249, 4, 242, 228, 209, 163, 118, 49, 185, 110, 243, 119, 79, 131, 254, 81, 127, 64, 246, 57, 46, 231], [136, 243, 189, 206, 0, 0, 73, 233, 3]], hash: Some(0x8859e72b932d344f0b093a1332c71573750bbaddf3924208ed7ff79c4015ef90) }\n```",
        "created_at": "2020-10-01T08:12:32.635000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Good to hear!",
        "created_at": "2020-10-01T08:13:03.515000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "Thanks!",
        "created_at": "2020-10-01T08:13:06.836000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Besu is reporting it via `debug_getBadBlocks`, however our validation errors currently log below INFO (at DEBUG and TRACE)",
        "created_at": "2020-10-01T14:22:37.622000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "(to be clear, that means we rejected that block)",
        "created_at": "2020-10-01T14:51:32.018000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "\u003e \u003c@!682078300234973185\u003e For \"apples to apples\" 1962 codebase with turbo boost off (this is important) gives the following for BLS12-381 without subgroup checks (just the pairing) for 2 and 4 pairs\n\u003e ```\n\u003e test bench::bls12_381_engine::bench_bls12_engine_pair_2                                 ... bench:   3,132,650 ns/iter (+/- 13,014)\n\u003e test bench::bls12_381_engine::bench_bls12_engine_pair_4                                 ... bench:   4,331,603 ns/iter (+/- 64,513)\n\u003e ```\n\u003e \n\u003e Turbo boost is roughly -30% from the numbers cause benchmark is short, CPU bound and CPU frequency flies from 2.9 to 4+ GHz\n\u003c@!381789485777682434\u003e \n\nAfter looking at the code further, I realized our benchmark of the rust code (https://github.com/ewasm-benchmarking/eip1962-bls12-381-bench/blob/two-pairing-bench/src/main.rs#L25) doesn't appear to be using the public interface (which does the subgroup check).  So the comparison appears to be \"apples-to-apples\"",
        "created_at": "2020-10-01T20:36:23.257000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "unless there is something I am missing..",
        "created_at": "2020-10-01T20:36:41.575000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "Apples to apples remark was about having no subgroup checks as they were missing initially in wasm code (it was added at some point if you look at the history here). Unfortunately it’s still not completely apples to apples cause I’ve forgotten about exact non-residues in BLS12-381 extension tower that allows to shave quite a lot of time in G2 ops and pairings. Will need to update benchmarks too",
        "created_at": "2020-10-01T20:40:20.017000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "In any case I’d stick to no-subgroup benchmarks anyway for now cause it’s finally possible to have faster checks and most implementations should integrate them",
        "created_at": "2020-10-01T20:43:12.243000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "general",
        "parent": "",
        "content": "What an irony\nhttps://matrix.org/blog/2020/09/30/welcoming-gitter-to-matrix",
        "created_at": "2020-10-01T23:31:15.642000+00:00",
        "attachments": null
    }
]