[
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Bringing up a different topic I notices while playing with encodings on the engine API\n\nSeems using JSON is kind of a horrible idea and on top of which using *hex-encoded-binary inside json* is another horrible idea",
        "created_at": "2024-06-26T07:45:58.824000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_2024-06-26_at_10.39.24.png",
                "content": "f16c23a3cbe12bc1b5053e058c6c3f43a3edd01b1cd6591379cad5e2b25975cc"
            }
        ]
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Most of the engine API messages are fairtly small, so debatably not relevant, but for blob payloads (i.e. the opaque tx types sent in the payload) it might make sense to replace hex with base64 at least",
        "created_at": "2024-06-26T07:47:47.096000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "If long term we want to increase the blob sizes and block sizes and whatnots, we should strive to get rid of useless encoding time/size cruft",
        "created_at": "2024-06-26T07:48:30.692000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "general",
        "parent": "",
        "content": "Would you support SSZing the engine API?",
        "created_at": "2024-06-26T07:50:40.639000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "If we retain the few quirky types as RLP-in-SSZ (txs as currently in JSON), then I think the rest would be simple0ish enough to pull off",
        "created_at": "2024-06-26T07:53:16.913000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "RLP itself is not the best either because it's not a stream codec, which I think SSZ is, so that should make it even faster",
        "created_at": "2024-06-26T07:55:07.328000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "If we're checking out encoding schemes for APIs, protobuf can also get pretty fast",
        "created_at": "2024-06-26T13:59:32.799000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "ie, grpc",
        "created_at": "2024-06-26T14:00:30.299000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "And I think it would be a mistake not to explore prior art",
        "created_at": "2024-06-26T14:00:33.277000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "The reason I like teh SSZ idea is because it's in our control, so we can perf tweak it if need be. JSON is just dumb and available in every lagnuage so that was also teh nobrainer choice. Fancy binary protocols get a bit murky because if there's som eissue, we can't fix it, and if it's not available in some language, it might be a monstruous task to implement it.",
        "created_at": "2024-06-26T15:20:22.960000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Since SSZ is in every CL and will be needed in ELs soon enough too, it seems like a good step forward, even if it's not the absolute best. If it gets us 95% of the way without requireing extra work or risk, I'd say go for it",
        "created_at": "2024-06-26T15:21:04.567000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "I guess, it depends on where we're thinking about encoding. If we're going to be gossipping these, yeah using something like protobuf doesn't meet requirements, because it's very hard to control, but _just_ in the engine API boundary? I don't see it being too bad - it would even allow us to get rid of the internal serialization of txs in the engine api, since the (structured!) serialization is likely just as small if not better. I would also argue that specifically protobuf is very mature, pretty ubiquitous language-wise as well. Can't speak for other binary formats",
        "created_at": "2024-06-26T17:30:56.830000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "general",
        "parent": "",
        "content": "MessagePack sounds like a good in-between. not sure how everyone feels about it. It also have implementations in every modern programming languagee that i know.",
        "created_at": "2024-06-26T18:19:45.823000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "general",
        "parent": "",
        "content": "The messages are already defined partly in terms of SSZ aren't they?",
        "created_at": "2024-06-26T19:43:48.329000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "not over engine api",
        "created_at": "2024-06-26T20:17:20.388000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "it's possible to serialize more or less any struct you want over SSZ",
        "created_at": "2024-06-26T20:18:38.563000+00:00",
        "attachments": null
    }
]