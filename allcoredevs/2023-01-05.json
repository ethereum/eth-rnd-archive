[
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Hey all, we have been thinking about the a number of proposals which have been made for EOF (most notable around account introspection) and summarised our thoughts in this document: https://notes.ethereum.org/@ipsilon/eof2-proposal\n\nThis gives our view on the roadmap of EOF (v1, and *v2 -- the final boss* üòÅ ).",
        "created_at": "2023-01-05T13:03:14.444000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I generally like this!",
        "created_at": "2023-01-05T13:12:45.091000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "\u003e Disallow (EXT)CODE{COPY,SIZE,HASH} in EOFv2.\n\nProbably a small nitpick: rename those opcodes and have them point to the data field (this would make it practical to convert over eofv1 accounts eventually)",
        "created_at": "2023-01-05T13:13:32.422000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "The gas issue is going to be a fascinating one to talk about... especially given the years that have already gone into it and the points where we've been stuck",
        "created_at": "2023-01-05T13:14:11.103000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "**ACDE in 45 minutes**\nAgenda: https://github.com/ethereum/pm/issues/700\nStream: https://youtu.be/SmcMwdHZqg8\nZoom: https://ethereumfoundation.zoom.us/j/91348592283?pwd=SnRnL1VTeXNYVE9CaWpBbnJEUXhQZz09\n\nTalk soon üòÑ !",
        "created_at": "2023-01-05T13:15:47.097000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "That may be a possibility, even if we enable multiple data sections, we could call those to operate on the first data section. We only allow a single data section currently.",
        "created_at": "2023-01-05T14:04:01.737000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Absolutely, maybe there's a chance to change it within EOF üëÄ \n\nAnd if we want to go crazy, could also lump changes to the design of memory handling into it.",
        "created_at": "2023-01-05T14:13:06.100000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "general",
        "parent": "",
        "content": "Can you share a link where it‚Äôs defined what else is included in Shanghai ?",
        "created_at": "2023-01-05T14:58:47.907000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "general",
        "parent": "",
        "content": "Currently:)",
        "created_at": "2023-01-05T14:58:55.098000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",
        "created_at": "2023-01-05T14:59:43.651000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/files/10348043/elroots.pdf\nMy feeling is that we shouldn't RLP withdraw roots in Shanghai if we are going to switch to SSZ shortly.  We should do SSZ in the first place (in Shanghai).",
        "created_at": "2023-01-05T15:26:25.284000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If we are going to SSZify the withdraw root, we might as well do transaction/receipt roots as well since the additional effort should be minimal and it will provide consistency and I think the context switching cost of doing it partially now, and partially later is worse than just doing them all now.",
        "created_at": "2023-01-05T15:26:28.234000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "For state root, I'm not as familiar with the layout and whether it will be harder than receipt/transaction roots.",
        "created_at": "2023-01-05T15:26:29.106000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "State root will be harder",
        "created_at": "2023-01-05T15:27:29.176000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "In that case, I would support delaying `state_root` and just doing `receipts_root`, `transactions_root`, and `withdraws_root`.",
        "created_at": "2023-01-05T15:28:28.470000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "+1 for shifting them to ssz roots from shanghai",
        "created_at": "2023-01-05T15:28:43.359000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Oh man I should have listened to this meeting, Terence is saying internally that EOF is out, and now you're talking about this issue? was the SSZ root discussed during this meeting? I wouldn¬¥t  delay withdrawals because of this and surely adapting SSZ libraries to EL clients will delay it",
        "created_at": "2023-01-05T15:28:43.527000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It was talked about, yes.  For these particular structures you don't need a full SSZ library.",
        "created_at": "2023-01-05T15:29:17.996000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Encoding/decoding trees like these in SSZ is quite easy IIRC.",
        "created_at": "2023-01-05T15:29:48.009000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think this is worth delaying Shanghai for.  It feels very bad to launch withdraws with a temporary block structure that we just have to change in Cancun or something.",
        "created_at": "2023-01-05T15:30:15.937000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "also from shanghai the engine api response structure is changing to {blockValue,executionPayload} so change roots impl as well",
        "created_at": "2023-01-05T15:30:26.777000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Especially since light clients are complicated by not doing SSZ.",
        "created_at": "2023-01-05T15:30:30.730000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "it's not if you hash hexary trees normally and you need to start hashing binary trees. I know nothing about execution, but I wouldn't be surprised if they don't have any routine implemented to hash binary trees. I don't see anything wrong in changing the block structure in Cancun that we need to do that anyway, Delaying withdrawals for **anything** at this stage I think is wrong",
        "created_at": "2023-01-05T15:32:17.970000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "**Recap of today's ACDE**\n- Withdrawal devnets have all client combinations live, some working better than others. You can check it out at: https://forkmon.withdrawalsdevnet1.ethpandaops.io/ \n- We had rough consensus to make the change to the error format of EIP-3860 (https://github.com/ethereum/EIPs/pull/6249), but want to wait a couple days to merge in case smart contract devs have a strong objection\n- **EOF:** lots of conversations about the current state of things, as well as Vitalik \u0026 Alex's proposals. Conclusion: **EOF removed from Shanghai**. Tentative commitment to have it in Cancun, but still more conversations to be had. It's unclear if EOFv1+v2 can be combined or not. Keeping client teams focused on it is important, as it will help better understand the design space + implementation complexity. We'll discuss this more on the next call üôÇ \n- No other EIPs added to Shanghai to keep the scope small and not delay withdrawals. \n- Had the RLP/SSZ discussion that's continuing above - **important to make a call about this in the next week or two!!**, will add to CL call agenda\n- Presented two new EIPs: 5988 (Poseidon precompile)  and 5843 (EVM Modular Arithmetics Extension)",
        "created_at": "2023-01-05T15:36:51.518000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "I sadly missed the start of this call. What exactly is EOFv1/v2? üôÇ",
        "created_at": "2023-01-05T15:38:04.386000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "See this, \u003c@508125616940515329\u003e üôÇ",
        "created_at": "2023-01-05T15:38:15.581000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Ahhh right, thanks üôÇ",
        "created_at": "2023-01-05T15:38:59.910000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "To my mind it makes sense to switch at least `withdrawals_root` to SSZ on the EL side. Otherwise we're releasing a new feature (withdrawals) already burdened with technical debt.",
        "created_at": "2023-01-05T15:39:23.864000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "general",
        "parent": "",
        "content": "For the `txs_root`, it could be put into the `ExecutionPayload` then as a one-time exception",
        "created_at": "2023-01-05T15:40:01.909000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "PR to remove EOF from the Shanghai spec: https://github.com/ethereum/execution-specs/pull/676",
        "created_at": "2023-01-05T16:31:55.458000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Shouldn't it be added to Cancun in the same?",
        "created_at": "2023-01-05T16:34:29.947000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "It wasn't clear on the call exactly _what_ should be added to Cancun, so I think it's best to discuss that further on the next call, after people have had more time to digest your document. Do you think it might be worth having a breakout room or something before then for implementers to discuss further, or is async chat in \u003c#706868829900505180\u003e sufficient?",
        "created_at": "2023-01-05T16:39:55.852000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Is there a canonical EFI/CFI list anywhere?",
        "created_at": "2023-01-05T16:41:50.819000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "It is certainly confusing, because it felt like many suggested moving it to Cancun, as opposed to just dropping it.",
        "created_at": "2023-01-05T16:42:57.206000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Also, as  long as the EOF breakout room has at least a productive 30 minute meeting, perhaps we should just make it every week there is not an ACED meeting",
        "created_at": "2023-01-05T16:42:58.747000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Why do you think that delaying withdraws is such a bad thing?  Especially if we are doing so to make the withdraw deploy better?",
        "created_at": "2023-01-05T16:45:25.571000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "We have one in the Cancun spec - happy to move the EIPs there alongside 1153 and 2537 so it's at least all in one place. Would just want to get a +1 on the PR from all client teams. cc: \u003c@\u0026688090867927482525\u003e \u003c@\u0026652918665943056397\u003e",
        "created_at": "2023-01-05T16:55:54.938000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "We are organizing the EOF breakout in \u003c#706868829900505180\u003e at the moment",
        "created_at": "2023-01-05T16:58:13.550000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "During the last 2 calls before the break it was decided that Shanghai will bring withdrawals and it won't bring 4844. The reason was unanimous (except from proto and Jesse Pollack expressing otherwise) that we did not want to delay withdrawals one bit.  This by itself is justification enough to not be rescheduling and adding delays to a fork with extra additions of anything else. We cannot continue deciding and requestioning our own decisions on each meeting. No governance system can actually function that way. At some point code freeze must be in place and only strong arguments should change them. Now this server is not about governance but about technical R\u0026D I suppose. So I'd argue that the mismatch between withdrawals_root on the CL and EL side was known for months by now, and was discussed during those meetings previous to the break and no decision was made and no team even signaled that they wanted this for shanghai. There is no available working implementation of light clients that I'm aware of with withdrawals proofs right now. And to actually benefit from this change you need to deploy said clients and proof system and get them to actually be used. I would argue that either this is a long delay or we will simply ship an unused feature just for the sake of shipping it earlier. Cancun necessarily includes a new beacon block and execution payload structure as blobs will need to be included. I do not see absolutely anything wrong in also changing the withdrawals root then. I am personally very strongly opposed to any delay in Capella and I am hoping that this personal opinion is also Prysm's opinion in the next CL call. Unless every EL team can promise that they can have SSZ serialization/merklization of the withdrawals  slice in a week, I don't see how this won't be a serious setback, not being able to test on production during the offsite",
        "created_at": "2023-01-05T17:01:29.408000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Do you think `withdraw_root` will remain RLP indefinitely, or will it change to SSZ in the near future (as soon as we get SSZ into ELs, which comes with 4844 I think)?",
        "created_at": "2023-01-05T17:04:35.109000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If it will be switching to SSZ \"soon\", then I argue that we should not be introducing a block structure that we are just going to have to change \"soon\".  We should just do it right the first time to avoid technical debt associated with changing things like block shape frequently.",
        "created_at": "2023-01-05T17:05:34.326000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If you accept that argument for `withdraw_root`, then it means we are going to have enough SSZ support to do `transaction_root` and `receipts_root` with minor effort and doing them all at once feels like a nearly \"easy win\".",
        "created_at": "2023-01-05T17:07:19.196000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I do not know what will happen, we could easily implement RLP on the CL side, we can find other ways of proving exposing the beacon root on the EL side, who knows. The point is that these are changes that have been brought up at the very last minute that haven't been argued and there's no consensus because of this.",
        "created_at": "2023-01-05T17:12:23.732000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The problem is that people often don't look at what is going in until they are implementing it, which is why we don't see these things until the last minute basically every time.",
        "created_at": "2023-01-05T17:15:18.838000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Same thing with the EOF issues brought up today, people just don't think about these things (like constructor parameters on contracts) until after they go to implement it.",
        "created_at": "2023-01-05T17:15:49.390000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "My understanding (which may be wrong) is that everyone mostly agrees that RLP is \"the old way\" and SSZ is the future of encoding and we want to eventually convert everything to SSZ, we just haven't had a good \"first thing\" to convert.  `withdraw_roots` feels like that good \"first thing\" because it is something that really should match between EL and CL (for light clients) and we don't want to drag RLP code into the CLs.",
        "created_at": "2023-01-05T17:18:35.121000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "\u003cpouts in big-endian\u003e yea, SSZ is the future.",
        "created_at": "2023-01-05T17:28:26.596000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm with you at being annoyed with LE for SSZ.",
        "created_at": "2023-01-05T17:31:58.706000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e Biggest design mistake we madeüòÇ",
        "created_at": "2023-01-05T19:02:55.190000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "quiet from the be pensioner bench, please üòõ",
        "created_at": "2023-01-05T19:29:08.050000+00:00",
        "attachments": null
    },
    {
        "author": "pandapip1",
        "category": "general",
        "parent": "",
        "content": "\u003c`selfdestruct` has entered the chat\u003e",
        "created_at": "2023-01-05T20:47:15.481000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "\u003e We cannot continue deciding and requestioning our own decisions on each meeting. No governance system can actually function that way.\n\nWe've been doing that for years now.\n\n\u003e The problem is that people often don't look at what is going in until they are implementing it, which is why we don't see these things until the last minute basically every time.\n\nIndeed.",
        "created_at": "2023-01-05T22:27:38.872000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e Yes. Alternatively we can try to perfectly research everything, and end up implementing a chain based on UTXO that doesn't support multiple calls to the same contract in one block /s",
        "created_at": "2023-01-05T22:46:39.319000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e /s",
        "created_at": "2023-01-05T22:46:46.347000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "We've been researching EVM changes since I got here circa 2015.  The proposed EOF functionality hasn't fundamentally changed since EIP-615 in 2016.",
        "created_at": "2023-01-05T23:31:46.080000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Well part of the reason for the decision today is a proposed changed in functionality",
        "created_at": "2023-01-05T23:38:17.470000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "A change proposed rather late in a rather long process.",
        "created_at": "2023-01-05T23:47:49.445000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Sure, but we do need to live with the consequence forever if we get it wrong üòÖ",
        "created_at": "2023-01-05T23:52:59.284000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "And also, we had set ourselves a deadline with the implementations and it‚Äôs unclear that even without the new proposal we would have met it",
        "created_at": "2023-01-05T23:53:24.471000+00:00",
        "attachments": null
    }
]