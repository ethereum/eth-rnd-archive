[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Fundamentally, we have different resources being used.  One happens to be the bottleneck today, but that can change through changes to usage patterns, changes to clients, advances in cryptography (e.g., zkProofs), etc.  If we want to be forward looking we should recognize that these are different resources and price them independently so we can tune them independently.",
        "created_at": "2022-02-17T02:04:47.986000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "A problem that I see with this is that even if it gets implemented, you can only estimate the coefficients once each resource becomes an actual problem. Since any change in these coefficients requires a fork anyway, then it doesn't make any sense to implement this before other resources actually become a problem.",
        "created_at": "2022-02-17T14:54:16.215000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "general",
        "parent": "",
        "content": "Non-functional change to EIP-3540 (EOF) spec for clarifications. Thanks \u003c@!211091239112671234\u003e \u003c@!508125616940515329\u003e for questions and comments so far. https://github.com/ethereum/EIPs/pull/4822",
        "created_at": "2022-02-17T15:12:18.677000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "I'm still not entirely sure why it is not possible to create a data-only contract. What is the reasoning for this? I need a code section with at least one opcode and it is suggested to use INVALID there.",
        "created_at": "2022-02-17T15:56:23.064000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "general",
        "parent": "",
        "content": "It is technically possible to have an EOF container with data section only. But you would need to wrap your data with EOF anyway. However, we decided that we want to restrict the number of possible EOF section combinations to minimum. We don't think using contracts code for storage is particularly important feature we want make adjustment for. Are there any use cases this is important for?",
        "created_at": "2022-02-17T16:59:31.699000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "**AllCoreDevs in ~21h (Friday 14:00 UTC)**\nAgenda: https://github.com/ethereum/pm/issues/472\nStream: https://youtu.be/Oo_Nnk3CdLA\nZoom: to be shared here before the call",
        "created_at": "2022-02-17T17:04:42.664000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "I don't know, I could think of some use cases:\n\n(1) Using data contract as storage of certain constants (think of error strings)\n(2) Using data contract as storage of deploycode of othercontracts (now you can `EXTCODECOPY` and then use that as payload for a `CREATE`)\n\nThese things  are particularly useful if you would need that but cannot store that in the own code due to maxCodeSize.\n\nWe now have an opportunity to add this, I don't see why we should not grab this opportunity.",
        "created_at": "2022-02-17T23:13:40.875000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "There's little need for error strings, since using short codes became easy with \"custom errors\" in Solidity.",
        "created_at": "2022-02-17T23:14:45.779000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Basically what the argument is about whether we want to make section parsing have more outcomes (more combinations of valid sections) vs. requiring an overhead of 1-4 bytes for data contracts.",
        "created_at": "2022-02-17T23:15:58.280000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "There was some discussion in the past about data contracts though, because code as storage is cheaper than actual storage and the question was whether that is a good thing or not. I wonder how (if at all) pricing will change with Verkle trees, where code is priced a bit similarly to storage (per chunk).",
        "created_at": "2022-02-17T23:18:13.909000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Notwithstanding I am totally open to making it cheaper (i.e. not needing those extra 4 bytes for the code section) for data contracts if that is the consensus.",
        "created_at": "2022-02-17T23:23:16.585000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "I have no strong opinion but I just think that the mandatory code rule is a bit weird. It is likely that if we have more EOF types in the future, then multiple data section combinations could be introduced, so I find the motivation that \"this limits the number of section combinations to  2\" not super convincing.",
        "created_at": "2022-02-17T23:24:24.164000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "What I also think is missing in the EIP is the extra gas cost which should be charged to validate these EOF rules",
        "created_at": "2022-02-17T23:25:04.934000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Our assumption is that the cost added in 3860 is sufficient, hence while we'd like to get that in too ðŸ™‚",
        "created_at": "2022-02-17T23:25:37.909000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Ah right I was about to add that question, in `ethereum/tests` the current PR there are only tests for 3540 + 3670 which seems to somewhat imply that they should be shipped both ðŸ™‚",
        "created_at": "2022-02-17T23:27:21.486000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "I kind of hoped last year that we would have had the Q4 protocol upgrade to include 3860 and other smaller things, which would have set the scene for an easier upgrade to ship 3540 (less inter-dependencies in the same upgrade).",
        "created_at": "2022-02-17T23:28:24.149000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "But now 3860+3540+3670 should be done together.",
        "created_at": "2022-02-17T23:28:50.626000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Which protocol upgrade would this be?",
        "created_at": "2022-02-17T23:29:45.514000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "I meant the \"2021 Q4 upgrade\", ie. Shanghai. But it became Arrow Glacier as it was limited to the difficulty bomb.",
        "created_at": "2022-02-17T23:30:22.591000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Ah right yeah sorry I was a bit lost here",
        "created_at": "2022-02-17T23:30:33.246000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "I think 3860 doesn't really interact much with the other 2 EIPs right? 3540 and 3670 should indeed be shipped together and 3860 is a nice security bonus",
        "created_at": "2022-02-17T23:31:20.579000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Well as you say 3860 also introduces the cost structure for deploy time validation",
        "created_at": "2022-02-17T23:32:17.767000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Ah right, the gas logic gets rather complex",
        "created_at": "2022-02-17T23:33:37.999000+00:00",
        "attachments": null
    }
]