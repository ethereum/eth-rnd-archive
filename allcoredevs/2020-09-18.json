[
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "For sanity-checking eip-2929, this gist can be used: https://gist.github.com/holiman/8f54f24008b57d303c92f24732a14943 . It uses all YOLOv2 features, but I imagine that most old tests would still pass even if subroutines and bls-precompiles are added, however, introducing `2929` makes a _lot_ of tests fail, since gas rules change so drastically. So if you're implementing it, you can use that gist to do some quick sanity-checks. cc \u003c@!531145505355464708\u003e \u003c@!403707149043105803\u003e \u003c@!489256758989029405\u003e",
        "created_at": "2020-09-18T09:08:29.581000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "\u003e Do we want a similar yolov2 spec document? Like we had for yolov1? With the hashes of the EIP versions included?\nYes",
        "created_at": "2020-09-18T09:09:05.755000+00:00",
        "attachments": null
    },
    {
        "author": "dimitry8570",
        "category": "general",
        "parent": "",
        "content": "Thats because gas price for the opcode is changed. In that eip. The tests scenarios doesn't necessarily fail.\nIs yolov2 ready? I can regenerate the tests using this ruleset and geth transition tool",
        "created_at": "2020-09-18T09:30:23.968000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "I didn't mean that the scenarios fail -- I mean that the existing tests already provide _great_ coverage (for 2929, not so much 2315 or bls). \n\u003e Is yolov2 ready? I can regenerate the tests using this ruleset and geth transition tool\nYes, but since it only exists in geth right now, the implementation has not been cross-checked with any other client, so I can be fully certain whether it's correct. \nIt would be great if you regenerate them. My pr/branch has it on the name `YOLOv2`, but it the name `Berlin` can also be used, it's an alias for `YOLOv2`.",
        "created_at": "2020-09-18T09:43:32.462000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "I just meant that if anyone implements it, they could run a handful of statetests and see if their erroneous stateroot is the same as the one in that gist.",
        "created_at": "2020-09-18T09:45:05.168000+00:00",
        "attachments": null
    },
    {
        "author": "dimitry8570",
        "category": "general",
        "parent": "",
        "content": "I see. How is transition tool implementation in other clients?",
        "created_at": "2020-09-18T09:46:56.919000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "general",
        "parent": "",
        "content": "I don't think it is implemented in other clients -- but they can run statetests",
        "created_at": "2020-09-18T10:12:13.411000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Is there a call for something tonight?",
        "created_at": "2020-09-18T11:10:13.710000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "\u003c@425279588009246720\u003e Alex, I‚Äôve tried to look into wasmsnark code and their pairing function is not what in a precompile as looks to lack subgroup checks (or I didn‚Äôt find it in their codegen). In this case rust benchmark would be -40% in execution time as far as I remember",
        "created_at": "2020-09-18T12:01:30.169000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "Separately, in the interface v6 when you talk about virtual registers, is it some new EVM entity or is it just a memory region that is viewed as a set of registers?",
        "created_at": "2020-09-18T12:07:18.440000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e Hey all! Please add items to the agenda for tomorrow's meeting: https://github.com/ethereum/pm/issues/206\n\u003c@!191378736254287874\u003e This is in 45 minutes, right?  cc \u003c@!642887713246150666\u003e",
        "created_at": "2020-09-18T13:17:25.145000+00:00",
        "attachments": null
    },
    {
        "author": "poojaranjan",
        "category": "general",
        "parent": "",
        "content": "Yes in about 40 mins from now üôÇ",
        "created_at": "2020-09-18T13:19:52.612000+00:00",
        "attachments": null
    },
    {
        "author": "hudsonjameson",
        "category": "general",
        "parent": "",
        "content": "ACD Meeting 96 starts in 10 minutes!\n\nAgenda: https://github.com/ethereum/pm/issues/206\n\nZoom Link: https://ethereumfoundation.zoom.us/j/97150843660\n\nChat Box: https://studio.youtube.com/live_chat?is_popout=1\u0026v=HUUxwyoxU7k",
        "created_at": "2020-09-18T13:50:03.500000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "\u003e I‚Äôve tried to look into wasmsnark code [...]\n\u003c@!381789485777682434\u003e We messaged Jordi that wasmsnark was mentioned here, and will let him respond with details about the algorithm he used.",
        "created_at": "2020-09-18T14:02:24.718000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "I am most interested in whether they both use similar numbers of field operations add/sub/mul and whether these field operations are the bottlenecks for both.",
        "created_at": "2020-09-18T14:03:13.438000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "\u003c@!381789485777682434\u003e v6 was an experiment for speed, it is not recommended for consideration, only v7 is.",
        "created_at": "2020-09-18T14:04:20.128000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "You can get quite precise number of primary field ops from the papers, and number that you have listed look quite close to those as far as I remember \u003c@682078300234973185\u003e",
        "created_at": "2020-09-18T14:04:56.283000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "And math is a main bottleneck in native implementations cause if you e.g. swap mul to assembly one with 40% speedup then you can get proportional speedup for pairing",
        "created_at": "2020-09-18T14:06:05.027000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "For fun I can try to run 1962 and count a number of ‚Äúbase field ops‚Äù per pairing of 4 pairs. This would include subgroup checks too (full way of EIP function). The difference is that 1962 multiplications of extension field elements (that are most likely what are those _fp2, _fp6 in wasmsnark) are degraded to base field manipulations, so it would be tricky to count them separately",
        "created_at": "2020-09-18T14:10:47.816000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "general",
        "parent": "",
        "content": "@everyone I have stepped down from OpenEthereum development lead role, and will be joining turbo-geth team. Please direct all questions about OE to \u003c@!414247794375655424\u003e who is its Project Manager.",
        "created_at": "2020-09-18T14:15:05.227000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "general",
        "parent": "",
        "content": "not @ everyone üò¶",
        "created_at": "2020-09-18T14:15:50.917000+00:00",
        "attachments": null
    },
    {
        "author": "cahead0735",
        "category": "general",
        "parent": "",
        "content": "What is turbo-geth?",
        "created_at": "2020-09-18T14:16:28.687000+00:00",
        "attachments": null
    },
    {
        "author": "b00ris",
        "category": "general",
        "parent": "",
        "content": "\u003c@!329594653097721856\u003e Welcome to turbogeth team)",
        "created_at": "2020-09-18T14:19:30.290000+00:00",
        "attachments": null
    },
    {
        "author": "hudsonjameson",
        "category": "general",
        "parent": "",
        "content": "FYI All: Please don't use @ everyone as it pings the entire Discord server which is not just Eth 1.0 stuff.",
        "created_at": "2020-09-18T14:20:13.918000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "\u003c@!191378736254287874\u003e maybe you can disable regular users from tagging everyone on this server.",
        "created_at": "2020-09-18T14:20:57.363000+00:00",
        "attachments": null
    },
    {
        "author": "hudsonjameson",
        "category": "general",
        "parent": "",
        "content": "\u003c@!476250636548308992\u003e Looking into that now, but it will also disable tagging roles which can be important.",
        "created_at": "2020-09-18T14:21:19.835000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "general",
        "parent": "",
        "content": "\u003e \u003c@!476250636548308992\u003e Looking into that now, but it will also disable tagging roles which can be important.\n\u003c@!191378736254287874\u003e i don't think so ?",
        "created_at": "2020-09-18T14:21:42.897000+00:00",
        "attachments": null
    },
    {
        "author": "jbaylina",
        "category": "general",
        "parent": "",
        "content": "Hello \u003c@381789485777682434\u003e The group order check in G2 is a group order check or a subgroup order check ?",
        "created_at": "2020-09-18T14:21:48.056000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "I think you can disable everyone/here tags to only admins",
        "created_at": "2020-09-18T14:22:35.203000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "general",
        "parent": "",
        "content": "Hi, I'm awake!",
        "created_at": "2020-09-18T14:22:48.480000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "general",
        "parent": "",
        "content": "good morning \u003c@!557201004060213248\u003e",
        "created_at": "2020-09-18T14:23:43.499000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "\u003e Hello \u003c@381789485777682434\u003e The group order check in G2 is a group order check or a subgroup order check ?\n\u003c@691021953976369223\u003e  Subgroup check can be implemented as multiplication by the group order, so yes, it‚Äôs a check that every element in a _pairing4 functions (Groth16 check) is in a correct subgroup",
        "created_at": "2020-09-18T14:23:44.822000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "I‚Äôve checked builders for pairing functions and I didn‚Äôt find anything that looks like a check that subgroup_order * G2Point == infinity, but it may be that JS is not for me",
        "created_at": "2020-09-18T14:24:43.436000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "BLS12 curves allow fast subgroup checks, but those a more like extra sugar",
        "created_at": "2020-09-18T14:25:43.509000+00:00",
        "attachments": null
    },
    {
        "author": "jbaylina",
        "category": "general",
        "parent": "",
        "content": "It's not. But I can add it easily.",
        "created_at": "2020-09-18T14:26:19.551000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "I'll update permissions for tagging. Hope group tagging can keep being a thing, it's been helpful",
        "created_at": "2020-09-18T14:27:33.253000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "It depends on how you call it. Formally it‚Äôs mandatory cause pairing is not defined if points are not in the correct subgroups. All these has actually started with people using your routines for benchmarking against rust implementation, so it results in that rust and websnark have different functionality underneath and we have to account for it",
        "created_at": "2020-09-18T14:28:00.954000+00:00",
        "attachments": null
    },
    {
        "author": "jbaylina",
        "category": "general",
        "parent": "",
        "content": "Ok. I think it make sense to add it. Let me work on it.",
        "created_at": "2020-09-18T14:29:31.554000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "general",
        "parent": "",
        "content": "\u003e FYI All: Please don't use @ everyone as it pings the entire Discord server which is not just Eth 1.0 stuff.\n\u003c@191378736254287874\u003e \nAh, didn't think about that. Apologies!",
        "created_at": "2020-09-18T14:35:47.566000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "general",
        "parent": "",
        "content": "\u003c@!381789485777682434\u003e \u003c@!691021953976369223\u003e I think BN curves also allow a fast subgroup order check on G2 and all pairing curves in general since they all have an efficient endomorphism",
        "created_at": "2020-09-18T14:39:12.719000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!191378736254287874\u003e Server Settings \u003e Roles \u003e `role_name` \u003e Allow anyone to @mention this role",
        "created_at": "2020-09-18T14:40:05.143000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "\u003e \u003c@!381789485777682434\u003e \u003c@!691021953976369223\u003e I think BN curves also allow a fast subgroup order check on G2 and all pairing curves in general since they all have an efficient endomorphism\n\u003c@570268431522201601\u003e  I was not sure for BN, but that‚Äôs great. In practice these checks based on endomorphism were not implemented in my Rust code base and were not suggested for 1962 cause it potentially may be touching a patent for fast multiplication based on endomorphism",
        "created_at": "2020-09-18T14:41:10.065000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "general",
        "parent": "",
        "content": "The patent expires in Sept 2020 so 10 days from now",
        "created_at": "2020-09-18T14:41:34.388000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "Yeah, so I wait...",
        "created_at": "2020-09-18T14:41:54.740000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "general",
        "parent": "",
        "content": "If you need test vectors, here is a sage script: https://github.com/mratsim/constantine/blob/pairing/sage/lattice_decomposition_bn254_snarks_g2.sage",
        "created_at": "2020-09-18T14:42:35.099000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "general",
        "parent": "",
        "content": "\u003e The patent expires in Sept 2020 so 10 days from now\nActually in 7 days (the 25th) üôÇ",
        "created_at": "2020-09-18T14:44:50.877000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "\u003c@!273808422753796097\u003e regarding EIP-2315 and code merklization, we surmised it to be useful (it is mentioned in the analysis: https://ethereum-magicians.org/t/eip-2315-simple-subroutines-for-the-evm-analysis/4229) \n\nIf we have the restrictions in place merklization could consider first splitting by subroutines, then by the algorithm described in the current code merklization proposal.\n\nWe have not conducted any measurements though.",
        "created_at": "2020-09-18T15:08:55.822000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "It is left be figured out whether that provides any significant benefit over the complexity. However, if we don't have the proposed restrictions in EIP-2315 then it doesn't seem to offer any benefits to merklization.",
        "created_at": "2020-09-18T15:09:54.407000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "general",
        "parent": "",
        "content": "do we need to review our keystore parameters defaults because of: RTX3080",
        "created_at": "2020-09-18T15:28:29.989000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "general",
        "parent": "",
        "content": "?",
        "created_at": "2020-09-18T15:28:31.097000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Added a comment on the 1559 EthMagicians thread based on my request on ACD earlier: https://ethereum-magicians.org/t/eip-1559-fee-market-change-for-eth-1-0-chain/2783/114?u=timbeiko\n\nAlso, we've been doing outreach calls to various stakeholders in the community about the EIP and maybe it would be easiest to get core dev feedback that way? We've been using this form (https://forms.gle/zceq94ifyXdwMTJT8) and have also been booking ~45 min calls with folks to go over it synchronously when possible. Would either of those formats work better for anyone than discussing on EthMagicians/AllCoreDevs? Happy to keep people's opinions anonymous if it helps them be more frank.",
        "created_at": "2020-09-18T15:55:41.628000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "\u003c@!682078300234973185\u003e For \"apples to apples\" 1962 codebase with turbo boost off (this is important) gives the following for BLS12-381 without subgroup checks (just the pairing) for 2 and 4 pairs\n```\ntest bench::bls12_381_engine::bench_bls12_engine_pair_2                                 ... bench:   3,132,650 ns/iter (+/- 13,014)\ntest bench::bls12_381_engine::bench_bls12_engine_pair_4                                 ... bench:   4,331,603 ns/iter (+/- 64,513)\n```\n\nTurbo boost is roughly -30% from the numbers cause benchmark is short, CPU bound and CPU frequency flies from 2.9 to 4+ GHz",
        "created_at": "2020-09-18T16:54:14.496000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "\u003c@!381789485777682434\u003e, thank you for sharing the benchmarks without subgroup checks and with turbo boost off.",
        "created_at": "2020-09-18T17:42:05.324000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "I can think of two ways to have better \"apples to apples\".",
        "created_at": "2020-09-18T17:42:10.758000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "1) Implement the EIP-1962 BLS12-381 pairing algorithm using EVM384 opcodes, including the same optimizations.",
        "created_at": "2020-09-18T17:42:29.236000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "2) A synthetic pairing algorithm which executes the same number of 381-bit field add/sub/mul operations. This is apples-to-apples for the major bottlenecks, with some error for the \"cold\" parts.",
        "created_at": "2020-09-18T17:42:57.325000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "Any other ideas?",
        "created_at": "2020-09-18T17:43:09.374000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "First one is beyond my skills, but for synthetic part I‚Äôll try to add counters early next week and post the numbers here",
        "created_at": "2020-09-18T18:22:13.212000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "Then we can try synthetic benchmarks in both EVM and native code",
        "created_at": "2020-09-18T18:22:35.709000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "My concern is that a control flow will be very non-trivial and may add a good penalty",
        "created_at": "2020-09-18T18:29:09.182000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "general",
        "parent": "",
        "content": "Sounds good.",
        "created_at": "2020-09-18T18:36:32.635000+00:00",
        "attachments": null
    }
]