[
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "I agree with the deadline to get done what we have on the table -- that would be worth a slip of one upgrade.  Slipping multiple upgrades to consider new proposals, not so much.",
        "created_at": "2023-01-06T00:00:39.035000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "We just agreed to skip one today",
        "created_at": "2023-01-06T00:01:07.889000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "OK.  I couldn't hear very well where I was at.  I'm listening again now.  But Vitalik's ideas were rather new.",
        "created_at": "2023-01-06T00:02:57.094000+00:00",
        "attachments": null
    },
    {
        "author": "bobsummerwill",
        "category": "general",
        "parent": "",
        "content": "I am afraid to say that I think that the post-deployment bytecode transpiling idea is an absolutely terrible one.  Posted on Magicians. \nhttps://ethereum-magicians.org/t/eof-proposal-ban-code-introspection-of-eof-accounts/12113/19?u=bobsummerwill",
        "created_at": "2023-01-06T00:25:12.510000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "Yes, it looks like a bad solution to problem we don't have.",
        "created_at": "2023-01-06T00:33:36.108000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "A nice thing about EOF is of course that we don't need to bump version # unless we remove an opcode or change its semantics.  And there aren't that many to remove or change.  So it's not like we should be fearing an unending stream of versions.",
        "created_at": "2023-01-06T00:37:28.275000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Code introspection wasn't what moved me into the \"delay is acceptable\" camp.  It was the interaction with constructor parameters, specifically Solidity's practice of appending them to code.  Unless we get full stack tooling buy in to re-write a couple of bytes in the container on deploy (the code section length) or find another solution we run the risk of EOFv1 being a white elephant like the Blake precompile. With what was discovered we need either clarity on acceptance from downstream users before shipping it, or a different mechanism, and there isn't enough time to vet an alternative mechanism nor get tooling buy-in that doesn't feel like an ultimatim.",
        "created_at": "2023-01-06T14:42:17.132000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "The 20-40% code size / gas cost reduction that solidity is seeing in early prototypes is very nice however, that may be the carrot downstream tooling would need.",
        "created_at": "2023-01-06T14:43:13.784000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "I agree with that.  It's worth getting what we have already specified correct and useful in practice.  I don't agree with delaying for proposals that are not part of the current scope.",
        "created_at": "2023-01-06T14:51:34.475000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Constructor params in isolation was enough for me.",
        "created_at": "2023-01-06T14:51:59.688000+00:00",
        "attachments": null
    },
    {
        "author": "sendmoodz",
        "category": "general",
        "parent": "",
        "content": "i'm very skeptical of this number. majority of gas used in uniswap contracts is due to storage reads/writes and external calls",
        "created_at": "2023-01-06T15:29:58.555000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Uniswap is probably the most gas golfed contract on Ethereum that gets meaningful usage.",
        "created_at": "2023-01-06T15:32:21.992000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The *vast* majority of contracts on Ethereum lean on the compiler for optimization, not humans.",
        "created_at": "2023-01-06T15:32:41.056000+00:00",
        "attachments": null
    },
    {
        "author": "sendmoodz",
        "category": "general",
        "parent": "",
        "content": "seaport is also heavily used and heavily optimized, i think it's partly because it's gas golfed that it gets meaningful usage",
        "created_at": "2023-01-06T15:32:57.437000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If that is the case, then making changes that allow the Solidity optimizer to be competitive with gas golfed contracts is a win, as it allows more than a dozen people to write useful contracts on Ethereum.  ðŸ˜„",
        "created_at": "2023-01-06T15:33:50.243000+00:00",
        "attachments": null
    },
    {
        "author": "sendmoodz",
        "category": "general",
        "parent": "",
        "content": "if fully implemented eof only provides a small benefit on the most used contracts on ethereum, is it still worth the complexity?",
        "created_at": "2023-01-06T15:34:29.394000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "It's not just gas cost, it's also code size.",
        "created_at": "2023-01-06T15:36:35.988000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "But the cost of SLOAD/STORE is a dominating concern.  And I would not be surprised if presented with stats that show we are undercharing for it based on the impact on execution layer computation currently.",
        "created_at": "2023-01-06T15:38:35.482000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Counting by gas and instructions show wildly different impacts - https://twitter.com/shemnon/status/1608139941053366272",
        "created_at": "2023-01-06T15:39:41.462000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "counting by wall clock time gets into Hiesenberg territory (the physics Heisenberg)",
        "created_at": "2023-01-06T15:41:34.513000+00:00",
        "attachments": null
    },
    {
        "author": "sendmoodz",
        "category": "general",
        "parent": "",
        "content": "if storage reads/writes make up 67.8% of gas used + 7.6% for call + 5.7% for log, that puts a rough upper bound of 18.9% on the impact of eof",
        "created_at": "2023-01-06T15:43:01.062000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "people have golfed for 1%",
        "created_at": "2023-01-06T15:44:12.590000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "code size reduction also gets you less contract splitting.",
        "created_at": "2023-01-06T15:44:57.972000+00:00",
        "attachments": null
    },
    {
        "author": "sendmoodz",
        "category": "general",
        "parent": "",
        "content": "1% is pretty huge for a code change and i'd golf for that. 1% for the burden of supporting multiple evm versions, i don't think it's worth it imo. you might be able to get 1% faster execution just by removing all the old code from clients a la eip-4444 https://eips.ethereum.org/EIPS/eip-4444\n\ni think it's important to have these tradeoff discussions and i'm glad vitalik brought up his concerns about accumulating technical debt with each eof version and proposed a solution because i had the same concern (but without any solution in mind). i'm also concerned about going from 1-\u003e2 versions.\n\nmy biggest desire for the process is that maybe minor EIPs should be implemented in 2+ clients with tests before being included in a HF so design discussions don't happen so late in the process",
        "created_at": "2023-01-06T15:54:02.988000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "It's not two separate versions.  It's new container parsing and replacing jumpdest analysis with something else.  The main EVM loops are shared between the pre-eof core and EOFv1.  Beyond that it's doing what's been done since homestead: adding opcodes but only for certain versions of the VM.  Any client that parses two different forks has the same style of multiple VM support that is needed for EOF.  It's not 1-\u003e2, it's 9-\u003e10.",
        "created_at": "2023-01-06T15:56:11.091000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Speedup from EIP-4444 can be gained by adopting Get's Ancient (?) Blocks pattern, and moving non-current blocks out of the DB into flat storage.  4444 gets sync speedup and on-disk size reductions (as Besu has shown with their X_CHECKPOINT sync), not so much new block execution speed.",
        "created_at": "2023-01-06T15:58:38.955000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "EOF now has 3-5 implementations (depends on if you include JS and EVMONE or are only going for full EL clients: Geth, Besu, and Nethermind).",
        "created_at": "2023-01-06T16:00:10.736000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "\u003e \u003e the burden of supporting multiple evm versions\n\u003e ...\n\u003e It's not 1-\u003e2, it's 9-\u003e10.\nExactly.  And a mechanism that ensures that we can _add_ new opcodes without bumping the version number.  We should very rarely need to remove or redefine opcodes.",
        "created_at": "2023-01-06T16:03:13.355000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "For the sake of this discussion we should include evmone -- it is the EVM engine for Silkworm and is the fastest engine we have.  \"So coming soon to a client near you,\" and the implementation that will be most affected these optimizations.",
        "created_at": "2023-01-06T16:07:17.483000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "Is silkwork independent (i.e. doesn't need an erigon db seed) and full EL compatible?",
        "created_at": "2023-01-06T16:15:56.453000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "general",
        "parent": "",
        "content": "I don't know where it is at right now but someone here probably does.  I think Geth can run with evmone as well.",
        "created_at": "2023-01-06T16:20:50.771000+00:00",
        "attachments": null
    }
]