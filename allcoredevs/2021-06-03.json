[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Do any clients treat the `difficulty` field in the block header as 64 bits (or any other size less than 256 bits)?",
        "created_at": "2021-06-03T13:55:54.159000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If a block managed to have a difficulty of `2^256-1`, would any client fall out of consensus?",
        "created_at": "2021-06-03T13:56:17.909000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@\u0026836981603216654336\u003e \u003c@\u0026688101493978562687\u003e \u003c@\u0026595684226221735986\u003e \u003c@\u0026688090867927482525\u003e \u003c@\u0026652918665943056397\u003e ‚òùÔ∏è (affects ETH2 merge spec)",
        "created_at": "2021-06-03T13:57:15.129000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@552133098075193354\u003e Can we rename `turbo-geth` role to `erigon`?",
        "created_at": "2021-06-03T13:57:37.137000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "```\n    Difficulty  *big.Int       `json:\"difficulty\"       gencodec:\"required\"`\n```\nFrom geth code",
        "created_at": "2021-06-03T13:58:26.628000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "IIRC it was bigint in most of the clients at the time we checked limits for EIP-1985.",
        "created_at": "2021-06-03T13:58:29.713000+00:00",
        "attachments": null
    },
    {
        "author": "sunce86.",
        "category": "general",
        "parent": "",
        "content": "currently 256 for OE",
        "created_at": "2021-06-03T13:58:55.809000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "What would difficulty be reused for the merge?",
        "created_at": "2021-06-03T13:59:20.938000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@552133098075193354\u003e Can we also get reactions for each of the clients so we can run polls like this and just get reactions from each client?",
        "created_at": "2021-06-03T13:59:43.113000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Done!",
        "created_at": "2021-06-03T13:59:47.059000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The current talk is putting rando mix in place of difficulty.",
        "created_at": "2021-06-03T13:59:56.238000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Difficulty doesn't make sense after the merge, and currently the only known uses of that opcode are \"randomness\" (despite advice against it), and we want a RANDAO opcode in the future anyway.",
        "created_at": "2021-06-03T14:00:27.216000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Nethermind's difficulty is `UInt256`.",
        "created_at": "2021-06-03T14:02:34.135000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "For execution clients, we already have Geth ( \u003c:geth:688089297642979353\u003e) and Nethermind ( \u003c:nethermind:657593276701999106\u003e ). Besu has a \u003c:pegasys:595689365464678473\u003e one, but that's out of date. For Erigon, I don't know if the previous logo is still good (\u003c:turbo:688089339384561777\u003e)?  Happy to add/update them if folks let me know what the right image should be.",
        "created_at": "2021-06-03T14:02:47.547000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Is the randao mix like a hash, i.e. always ~256 bits?",
        "created_at": "2021-06-03T14:02:52.519000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "cc \u003c@425572898787426305\u003e ‚òùÔ∏è (I think so)",
        "created_at": "2021-06-03T14:03:26.165000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "yep, it's a ~~hash~~ XOR'ed hash actually",
        "created_at": "2021-06-03T14:03:44.822000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "I wonder if there are any contracts which depend on the increasing/decreasing property of the difficulty opcode. The only way to not break them would be truncating the randao to be around the bitwidth of the current difficulty value. I am not sure it is worth keeping such contracts alive though.",
        "created_at": "2021-06-03T14:05:09.563000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "None that anyone *knows of*.  \u003c@489256758989029405\u003e is building a product for buying/selling difficulty options, but I believe they are well aware that this particular feature of their product will go away with The Merge.",
        "created_at": "2021-06-03T14:07:07.596000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If it turns out this is 256-bit friendly in all execution clients, then I think we should announce the change ASAP and see if anyone pipes up about how it will break their workflow.",
        "created_at": "2021-06-03T14:07:38.977000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I am a bit worried about block storage where difficulty has a significant impact currently",
        "created_at": "2021-06-03T14:08:40.343000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Implementations will probably need to stop computing total difficulty after the merge to avoid unnecessary operations with such big numbers and keeping them in storage. Also, there could be the case when sync process depends on the total difficulty in the interim, right after the merge before implementations got cleaned up. But this is what we can figure out once sync is implemented. Anyway, put an entire randao mix into difficulty field looks like an optimal way to go.",
        "created_at": "2021-06-03T14:13:19.486000+00:00",
        "attachments": null
    },
    {
        "author": "suburbandad_",
        "category": "general",
        "parent": "",
        "content": "Difficulty in besu is unit256 also",
        "created_at": "2021-06-03T14:43:16.481000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "general",
        "parent": "",
        "content": "Erigon/TurboGeth is the same",
        "created_at": "2021-06-03T15:50:08.982000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "general",
        "parent": "",
        "content": "Reminder üëã  Tim and I are hosting a **1559 Gas API** breakout call tomorrow, 14:00 UTC (10 ET)\n\nPlease DM me your email if you would like to be added to the invite!\n\nAgenda: https://github.com/ethereum/pm/issues/328",
        "created_at": "2021-06-03T16:35:46.095000+00:00",
        "attachments": null
    }
]