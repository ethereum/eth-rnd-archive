[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think the only way is to iterate all of the receipts in the block (or hit an index that already did this).",
        "created_at": "2023-02-27T02:58:07.421000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "general",
        "parent": "",
        "content": "Transaction receipts also have logsBloom so you can narrow your search to individual transactions.",
        "created_at": "2023-02-27T14:07:25.055000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You would already have to be looking at the receipt wouldn't you?",
        "created_at": "2023-02-27T14:10:13.738000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That is, you have to loop over every receipt to get the logs bloom, you might as well just read the logs at that point.  In theory, you may save a little time reading the bloom instead of the receipts, but my guess is it will be negligible.",
        "created_at": "2023-02-27T14:11:43.907000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That being said, I didn't know that receipts had a bloom in them!",
        "created_at": "2023-02-27T14:11:57.258000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "Is there a EIP that deprecates receipt level blooms, they are not that beneficial?",
        "created_at": "2023-02-27T14:27:58.426000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "There isn't, maybe it is worth adding the removal as saving bloom to db takes a lot of space, and regenerating them everytime when receipt is needed is wasteful  if bloom are not used that often",
        "created_at": "2023-02-27T15:10:48.358000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Wow I totally missed that receipts had blooms too.  That seems like a significant size savings in the receipts trie, especially since my hunch is that the majority of txs emit either zero or one events.  Does anyone have stats on the percentiles of how many events have been in tx receipts historically?  For some anecdata I just did a quick manual eyeball of the last 20 or so txs on etherscan and 3 have 0 events, two have 6+ events and the rest have 1 event each.",
        "created_at": "2023-02-27T16:26:08.255000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "general",
        "parent": "",
        "content": "Bloom size is fixed at 256bytes per receipt, it does not matter if receipt has 0 or 100 logs.",
        "created_at": "2023-02-27T17:18:00.494000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Ya I know that. :). My point is that if most receipts only have ~1 event in them then the bloom isn't particularly _useful_.",
        "created_at": "2023-02-27T17:19:34.749000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "That 256bytes seems like a rather significant portion of the overall consensus fields lengths.",
        "created_at": "2023-02-27T17:21:17.814000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "I wonder if we could consider dropping it from the receipts for the new SSZ tx type for 4844 txs?",
        "created_at": "2023-02-27T17:23:02.101000+00:00",
        "attachments": null
    }
]