[
    {
        "author": "popef",
        "category": "general",
        "parent": "",
        "content": "I think we have a problem with ihave/iwant. As of gossipsub v1.1, the number of ihaves sent out is proportional to the peer count.  See https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#adaptive-gossip-dissemination\n\nAnd since we send more ihaves with higher peer count, we will receive more iwants and send more actual messages. Since we have higher peer count, we will also receive more ihaves as well, which means we will send more iwants and receive more messages for the same message id. There is nothing to prevent us from sending more than one iwant for a particular message (at least in go-libp2p-pubsub).\n\nThere is not really any kind of rate limiting on this both in the libp2p spec and go-libp2p-pubsub (I checked the implementation already).\n\nHowever, I think if we really want some kind of rate limiting we should specify it in the libp2p spec. But I don't think this is what libp2p wants? because this has been intruduced in v1.1 not v1.0. cc: \u003c@476250636548308992\u003e",
        "created_at": "2024-12-29T08:10:23.770000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "see also https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#spam-protection-measures  which suggests limits on ihave/iwant/etc per heartbeat",
        "created_at": "2024-12-29T08:42:42.549000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "note specifically \"per heartbeat\" of IHAVE - this implies a peer-count-independent cap",
        "created_at": "2024-12-29T08:44:36.512000+00:00",
        "attachments": null
    },
    {
        "author": "popef",
        "category": "general",
        "parent": "",
        "content": "Okay, I missed that. Thanks.",
        "created_at": "2024-12-29T08:45:44.708000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "responding to IWANT is similarly up to the implementation to limit, else you can be flooded - these basic protections should be part of any conforming libp2p impl",
        "created_at": "2024-12-29T08:45:49.370000+00:00",
        "attachments": null
    },
    {
        "author": "popef",
        "category": "general",
        "parent": "",
        "content": "But iirc, it's not implemented in go-libp2p-pubsub",
        "created_at": "2024-12-29T08:45:55.593000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "that's a different matter ðŸ¤·",
        "created_at": "2024-12-29T08:46:10.109000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "There is a per heartbeat limit for ihaves \u003c@964433541813375036\u003e in go-libp2p. It is per peer though.",
        "created_at": "2024-12-29T11:19:42.948000+00:00",
        "attachments": null
    },
    {
        "author": "popef",
        "category": "general",
        "parent": "",
        "content": "If it's per peer, it means that with higher peer count, the bandwidth used is higher, right?",
        "created_at": "2024-12-29T11:36:45.851000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "Yeap, it would be",
        "created_at": "2024-12-29T11:40:34.030000+00:00",
        "attachments": null
    }
]