[
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Do we have numbers on how much gas on mainnet is being consumed by transactions that revert?",
        "created_at": "2020-09-02T08:10:52.815000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I wonder if simple things like \"remove the rule that says that if a transaction fails we burn *all* the gas, and instead just burn only the gas that was consumed\" would improve the scaling situation",
        "created_at": "2020-09-02T08:13:07.790000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "I'm not sure if it is important, but right now the only way to tell the difference on chain between revert and failure is checking if all gas passed was consumed. There was a proposal to adjust the return value of CALL at the time of introducing revert, but it was not done, only the transaction log was adjusted. Now if this is a feature relied on, I'm not sure. Also there were many attempts at getting rid of gas inspectability and this is one of those cases too.",
        "created_at": "2020-09-02T08:32:13.079000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e I wonder if simple things like \"remove the rule that says that if a transaction fails we burn *all* the gas, and instead just burn only the gas that was consumed\" would improve the scaling situation\n\u003c@!273808422753796097\u003e If the transaction reverts, only consumed gas is burned.  It is only if the transaction asserts or fails due to invalid OPCODE or invalid jump that we burn all the gas.",
        "created_at": "2020-09-02T09:58:10.358000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is a good question how frequently the latter occurs these days.  It used to be all the time, especially because Uniswap v1 was written in Vyper which didn't support revert opcode at the time so all failures were \"burn all gas\".  These days, I *suspect* transactions failing with burn-all-gas is pretty uncommon.",
        "created_at": "2020-09-02T09:59:03.350000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "It should be if people use Solidity features appropriately. It also depends on what version of OpenZeppelin they use for SafeMath, because up until 2019 iirc SafeMath used `assert` and not `require`.",
        "created_at": "2020-09-02T10:01:50.637000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "Is there any good statistic for amount of empty blocks being mined?",
        "created_at": "2020-09-02T13:23:57.488000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It wouldn't be particularly hard to just iterate over all blocks in history (or between two points in time) and look at the number of transactions in each.",
        "created_at": "2020-09-02T14:42:17.354000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm not sure if anyone has already done that and published the results though.",
        "created_at": "2020-09-02T14:42:30.703000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Or perhaps published as a graph of \"empty blocks per day\" or something.",
        "created_at": "2020-09-02T14:42:39.751000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "We could get a rough estimate by looking at gas used per day and comparing that to number of blocks per day.",
        "created_at": "2020-09-02T14:45:33.300000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "79,535,400,000 gas used on August 31st and 6592 blocks on the same day.",
        "created_at": "2020-09-02T14:46:38.950000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If we assume that all blocks with any transactions on August 31st were 99.8% full (reasonable), then we find that we would expect ~81,961,587,042 gas used per day.  That means that about 195 blocks were empty on August 31st.",
        "created_at": "2020-09-02T14:49:04.273000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "About 3% of all blocks mined are empty (if the above math and assumptions are correct).",
        "created_at": "2020-09-02T14:49:19.906000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!381789485777682434\u003e ☝️",
        "created_at": "2020-09-02T14:49:32.832000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "Yeah, I’ve though that if there is nothing available already I just iterate naively over last few month. Your estimate looks reasonable and I will check if two results will coincide",
        "created_at": "2020-09-02T14:56:00.009000+00:00",
        "attachments": null
    },
    {
        "author": "jared.flatow",
        "category": "general",
        "parent": "",
        "content": "\u003c@!381789485777682434\u003e not sure if you got it already but you could also do something like this https://explore.duneanalytics.com/queries/8895/source",
        "created_at": "2020-09-02T18:43:44.834000+00:00",
        "attachments": null
    },
    {
        "author": "afdudley",
        "category": "general",
        "parent": "",
        "content": "sorry to beat what appears to be a dead horse, but when would we normally expect the block gas limit to move up?",
        "created_at": "2020-09-02T18:51:25.772000+00:00",
        "attachments": null
    }
]