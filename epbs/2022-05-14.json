[
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e {\"jsonrpc\":\"2.0\",\"id\":2,\"result\":{\"payloadStatus\":{\"status\":\"VALID\",\"latestValidHash\":\"0xa0513a503d5bd6e89a144c3268e5b7e9da9dbf63df125a360e3950a7d0d67131\",\"validationError\":\"\"},\"payloadId\":[0,0,0,0,0,0,0,4]}}\nfrom the engine API part of the relay in response to fcU (per discussion previously here). But the `payloadId` field isn't encoded the same way as ELs are doing it.\n\nhttps://github.com/ethereum/execution-apis/blob/v1.0.0-alpha.8/src/engine/specification.md#response-1 notes it's a `DATA|null`, and this isn't `null`, so it should be a `DATA`. But\n\u003e Values of a field of `DATA` type MUST be encoded as a hexadecimal string with a `0x` prefix matching the regular expression ^0x(?:[a-fA-F0-9]{2})*$.",
        "created_at": "2022-05-14T07:29:07.179000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "commit `2c53d67eb01327cdacb23b592a6ccf9a36f9895f`",
        "created_at": "2022-05-14T07:31:15.549000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ummm getting issue submiting the signed blinded beacon block: ```bash\nINFO   [2022-05-14T13:21:32+05:30] getHeader                                     parentHash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" pubkey=\"0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d\" slot=\"1\"\nINFO   [2022-05-14T13:21:32+05:30] Consensus client retrieved prepared payload header  parentHash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" pubkey=\"0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d\" slot=\"1\"\n2022/05/14 13:21:32 http: superfluous response.WriteHeader call from main.(*responseWriter).WriteHeader (utils.go:34)\nINFO   [2022-05-14T13:21:32+05:30] http: GET /eth/v1/builder/header/1/0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f/0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d 200  durationMs=\"0\" method=\"GET\" path=\"/eth/v1/builder/header/1/0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f/0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d\" status=\"200\"\nINFO   [2022-05-14T13:24:45+05:30] http: POST /eth/v1/builder/blinded_blocks 400  durationMs=\"0\" method=\"POST\" path=\"/eth/v1/builder/blinded_blocks\" status=\"400\"\n```",
        "created_at": "2022-05-14T08:05:17.935000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "error: `incorrect byte length`",
        "created_at": "2022-05-14T08:05:49.291000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "tested posting the json with `curl --header 'Content-Type: application/json' --request POST 'http://127.0.0.1:8661/eth/v1/builder/blinded_blocks' --data-raw` but same error",
        "created_at": "2022-05-14T08:06:56.069000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "even posted the json which is given in example, assuming it should give some other error, since this looks like relay couldn't parse the request body",
        "created_at": "2022-05-14T08:08:19.430000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "but that also gave the same error",
        "created_at": "2022-05-14T08:08:39.453000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "maybe post the payload somewhere and link it here, seems on of the fields has an incorrect size",
        "created_at": "2022-05-14T08:08:47.250000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "",
        "created_at": "2022-05-14T08:09:47.231000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "541b24be66b8d9e7a3385b953c8a86c75eab0159ac90c8c088a4c6a77795554a"
            }
        ]
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://github.com/protolambda/mergemock/issues/31",
        "created_at": "2022-05-14T08:12:29.285000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok i got it, size of sync_committee_bits is not matching",
        "created_at": "2022-05-14T08:46:19.398000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "merge mock seems to be accepting mainnet preset , while i was using minimal for testing",
        "created_at": "2022-05-14T08:50:07.353000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok, now getting invalid signature ```\nERROR  [2022-05-14T14:22:53+05:30] error verifying signature                     error=\"\u003cnil\u003e\" method=\"getPayload\"\nINFO   [2022-05-14T14:22:53+05:30] http: POST /eth/v1/builder/blinded_blocks 400  durationMs=\"1\" method=\"POST\" path=\"/eth/v1/builder/blinded_blocks\" status=\"400\"\n```",
        "created_at": "2022-05-14T08:55:07.568000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@388610194608750595\u003e is the signature being calculated on the beacon block domain or just hash tree root of signed blinded beacon block?",
        "created_at": "2022-05-14T08:55:54.760000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Currently just tree hash root, domain is todo (see also \u003chttps://github.com/protolambda/mergemock/issues/29\u003e / I think \u003c@543900561460822016\u003e wanted to take a stab at adding this)",
        "created_at": "2022-05-14T09:11:26.570000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "there is some value in having minimal preset support for local testnets -- Nimbus's `launch_local_testnet.sh` operates by default in minimal mode, because it's much faster to determine success/failure that way, a few minutes rather than a half hour or more. It's not quite as realistic, but for protocol aspects which carry over, the efficiency outweighs the tradeoffs.",
        "created_at": "2022-05-14T09:34:51.745000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "(need 4 or 5 epochs to reliably gauge finalization, for example)",
        "created_at": "2022-05-14T09:36:00.725000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes our merge tests/sims also run in minimal",
        "created_at": "2022-05-14T09:37:33.980000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@388610194608750595\u003e , i am having trouble in the the signature verification",
        "created_at": "2022-05-14T11:07:13.750000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so for debugging, i tried comparing the hashtree roots, which were again not matching",
        "created_at": "2022-05-14T11:07:45.980000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so i just tried comparing transactions root with the computed hashtree root of transactions object i got back( by disabling the verification in relay code)",
        "created_at": "2022-05-14T11:08:44.715000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is what i got while fetching header ```\ntransactionsRoot: Uint8Array(32) [\n     86, 232,  31,  23,  27, 204,  85, 166,\n    255, 131,  69, 230, 146, 192, 248, 110,\n     91,  72, 224,  27, 153, 108, 173, 192,\n      1,  98,  47, 181, 227,  99, 180,  33\n  ]\n```",
        "created_at": "2022-05-14T11:09:04.557000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "This represents an empty transaction array, but if i do this locally this happens: ```\nssz.bellatrix.Transactions.hashTreeRoot([])\nUint8Array(32) [\n  127, 254,  36,  30, 166,   1, 135, 253,\n  176,  24, 123, 250,  34, 222,  53, 209,\n  249, 190, 215, 171,   6,  29, 148,   1,\n  253,  71, 227,  74,  84, 251, 237, 225\n]\n```",
        "created_at": "2022-05-14T11:09:58.475000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "they don't seem to be matching, not sure what is going on ðŸ¤”",
        "created_at": "2022-05-14T11:10:22.311000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "by the way, we will need atleast the `BlindedBeaconBlock` 's signature over the normal block signature domain, else if it won't be become a valid `SignedBeaconBlock` if we swipe out the `executionPayloadHeader` with the `executionPayload` one obtained after `submitSignedBlinded`",
        "created_at": "2022-05-14T11:14:40.021000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e In-protocol messages, e.g. `BlindedBeaconBlock`, which should compute the signing root using `compute_signing_root` and use the domain specified for beacon block proposals.\n\nhttps://github.com/ethereum/builder-specs/blob/v0.0.0/specs/README.md#signing specifies this, no?",
        "created_at": "2022-05-14T11:16:31.589000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, was taking about integration with mergemock in present form (currently it uses hashTreeRoot to get signing root)",
        "created_at": "2022-05-14T11:17:47.731000+00:00",
        "attachments": null
    }
]