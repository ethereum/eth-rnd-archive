[
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "A new change in v0.2.0 this needs to be implemented in the CL getHeader response handler is that the relay/builder can reply with \"204 empty response\" if it has no header available. cc/ \u003c@504202741933932544\u003e \u003c@607055410104500244\u003e \u003c@363800010518822915\u003e \u003c@654267572107083777\u003e \u003c@792822129019584562\u003e",
        "created_at": "2022-06-30T09:00:47.707000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ummm with regards to the CL, we have to treat it as api failure , 500 series code should be more appropriate",
        "created_at": "2022-06-30T10:31:43.924000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "it doesn't seem like it should be categorized as an internal failure though? the request is successful, there is just no header to provide to CL",
        "created_at": "2022-06-30T10:33:25.117000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "but 500 code is to say that server can't fullfill requests",
        "created_at": "2022-06-30T10:34:43.639000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "for us, our parsing will anyway fail and throw error (and the parallel execution build block will be picked)",
        "created_at": "2022-06-30T10:35:11.155000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "but it would be better if we get 500 and the appropriate error code with it",
        "created_at": "2022-06-30T10:35:29.787000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "```\nThe HTTP status code 500 is a generic error response. It means that the server encountered an unexpected condition that prevented it from fulfilling the request. This error is usually returned by the server when no other error code is suitable\n```",
        "created_at": "2022-06-30T10:35:49.875000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "i think 500 suits the situation",
        "created_at": "2022-06-30T10:36:02.703000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "but the ~~error~~ result is not unexpected so 5xx doesn't really apply here",
        "created_at": "2022-06-30T10:36:19.268000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "that depends on why server can't respond with the header",
        "created_at": "2022-06-30T10:36:53.685000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so 400s or 500s",
        "created_at": "2022-06-30T10:36:57.615000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "of course, there are occasions where 500 is suitable",
        "created_at": "2022-06-30T10:37:10.008000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "but the 204 response was added specifically with the period of time after the merge where relays won't send headers in mind",
        "created_at": "2022-06-30T10:37:38.237000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ohh",
        "created_at": "2022-06-30T10:37:50.667000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "400s would be appropriate for invalid client requests",
        "created_at": "2022-06-30T10:38:41.288000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "204 seems like the right response, because it's neither a user error not a server error, and it's not an invalid request either. It's just that there's no header for the current selection available.",
        "created_at": "2022-06-30T11:29:21.948000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "I won't push hard on this because our produceBlindedBlock api call will need to throw (and will throw on empty response as well), althrough if it would throw will 400 it would generate proper error log in cli",
        "created_at": "2022-06-30T11:39:52.467000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "also what is the expected delay (in epochs i guess? ) that is to be between merge epoch and builder header availability",
        "created_at": "2022-06-30T11:41:00.855000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so we dont try this path",
        "created_at": "2022-06-30T11:41:47.296000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "See https://github.com/ethereum/builder-specs/issues/32 - probably something around 16 epochs\n\nNote that this 204 response case might happen anytime, in case a builder hasn't submitted a block to the relay matching your requested parent_hash and slot, but it's not being an error and shouldn't be logged as error by the CL",
        "created_at": "2022-06-30T11:43:50.881000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok though we haven't configured for this assuming we will get atleast an empty block or block with single transaction for the feeRecipient, but our current error handling will switch over to use engine block (for which we  start produceBloc api call in parallel)",
        "created_at": "2022-06-30T11:46:28.991000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "will discuss with team how to handle empty response.",
        "created_at": "2022-06-30T11:46:59.815000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Thanks everyone who reviewed the relay API proposal so far üôè https://flashbots.notion.site/Relay-API-Spec-5fb0819366954962bc02e81cb33840f5\n\nThere was a bunch of good feedback so far, all of which is now incorporated or added as comments and notes. If anyone is interested on taking another look, feedback is much appreciated. I feel like it's slowly getting there. The data transparency API is particular interesting to the public, monitoring entities and staking pools, let me know if there's any more requests there too.",
        "created_at": "2022-06-30T13:26:45.250000+00:00",
        "attachments": []
    },
    {
        "author": "realbigsean",
        "category": "Cross-layer",
        "parent": "",
        "content": "Will the sepolia relay target the v0.2 spec?",
        "created_at": "2022-06-30T16:11:08.212000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes, it already implements the changes except the 204 response, which we will add",
        "created_at": "2022-06-30T16:11:52.167000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "also an fyi the hashrate on sepolia has spiked so we may miss it in terms of mev-boost being ready and waiting going into the merge",
        "created_at": "2022-06-30T16:36:58.154000+00:00",
        "attachments": []
    },
    {
        "author": "realbigsean",
        "category": "Cross-layer",
        "parent": "",
        "content": "when's the transition expected now?",
        "created_at": "2022-06-30T16:43:50.734000+00:00",
        "attachments": []
    },
    {
        "author": "realbigsean",
        "category": "Cross-layer",
        "parent": "",
        "content": "I found it, looks like Saturday at the moment",
        "created_at": "2022-06-30T16:48:09.579000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "bordel.wtf",
        "created_at": "2022-06-30T16:51:53.867000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "(is a website)",
        "created_at": "2022-06-30T16:51:59.154000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Second issue of our weekly mev-boost status update is out: https://flashbots.notion.site/mev-boost-Status-Update-June-24-30-2022-5806f8bd969f4ec8948f2b20fd1d2563",
        "created_at": "2022-06-30T19:16:02.407000+00:00",
        "attachments": []
    }
]