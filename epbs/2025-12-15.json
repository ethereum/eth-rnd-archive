[
    {
        "author": "hangleang.eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@\u0026595685821026271242\u003e",
        "created_at": "2025-12-15T01:50:12.668000+00:00",
        "attachments": null
    },
    {
        "author": "hangleang.eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Re: https://discord.com/channels/595666850260713488/874767108809031740/1449008588797247488\n\ncan anyone help us to understand this part of the spec?",
        "created_at": "2025-12-15T05:34:27.213000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Happy to help but isn't this what you needed \u003c@498331483732312075\u003e ?",
        "created_at": "2025-12-15T08:43:28.793000+00:00",
        "attachments": null
    },
    {
        "author": "hangleang.eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "ohh! I didn't look through the chat. I will check it, thanks",
        "created_at": "2025-12-15T08:46:06.936000+00:00",
        "attachments": null
    },
    {
        "author": "hangleang.eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e sir, but how can we weight the fork choice node? if most of attesters vote for empty payload branch, so it will cont. to build up on the empty payload, since the branch has more weight",
        "created_at": "2025-12-15T08:49:59.393000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The current slot votes count for both they aren't on a contending branch to the full branch.",
        "created_at": "2025-12-15T08:52:14.365000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Suppose the next CL block is missing, then the next CL attesters will vote for the current cl block and they yes will vote on contending branches, if they vote for empty those votes do not count for full",
        "created_at": "2025-12-15T08:54:26.045000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "When calling `get_bid` what's the reason for providing gas limit and fee recipient there instead of in a pre-registration as we do now? For fee recipient I can see the argument that you only need to set it in the bid now and the payment tx no longer needs to be part of payload but we also keep supporting trusted payments so builders need to know it beforehand. And for gas limit I also think it's to late to communicate that when calling the api as payloads are prepared in previous slot already",
        "created_at": "2025-12-15T09:21:00.048000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "We can ask builders but I don't believe payloads are prepared in the previous slot already. They seal it in milliseconds and I believe anyway they will seal the payload on demand when receiving the call. I am not strongly against the registration. Just that if I can avoid another call and the extra complexity that comes from it I'm happy to.",
        "created_at": "2025-12-15T09:28:09.889000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The registration has the advantage that it can be taken out of the hot path",
        "created_at": "2025-12-15T09:29:06.881000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "And if we go with \u003c@592004585506340885\u003e's idea of having a gossip Topic to gossip preferences then I'd just add the bool to signal if they will accept trusted payments and that's it",
        "created_at": "2025-12-15T09:30:11.415000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "We can remove these from the builder API",
        "created_at": "2025-12-15T09:30:28.619000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "will the proposer want to accept trusted payments from all builders? i would assume a proposer would only trust a subset of the builders staked to accept a trusted payment.",
        "created_at": "2025-12-15T09:31:56.092000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes and only those he calls",
        "created_at": "2025-12-15T09:32:19.286000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess we could say that, the proposer would only whitelist builder urls that he trusts",
        "created_at": "2025-12-15T09:32:34.772000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "for trusted payments",
        "created_at": "2025-12-15T09:32:44.528000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "does it also makes sense to have a req/resp for the gossip topic? i would assume a builder that becomes active after the proposer has gossiped the preferences would want to fetch the preferences from a peer?",
        "created_at": "2025-12-15T09:33:36.333000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah but you're right though, this undermines a few points, and preferences will vary per builder",
        "created_at": "2025-12-15T09:34:21.528000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah should get more feedback from builders on this, the gossip topic might be a good solution, there have been issue with register validators api due to the amount of data being sent if you have a lot of keys and mostly unncessary to do this for all validators each epoch.\n\nI just realized something though, if the CL acts as a builder there is currently no way to tell the EL which gas limit to use, the only way is to set a flag on the EL side afaik",
        "created_at": "2025-12-15T09:34:50.183000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "even tho the proposers do gossip preferences every epoch, the builder could either wait till the next epoch to receive all the preferences and start building then",
        "created_at": "2025-12-15T09:35:22.745000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "maybe a dumb question, but is `gas_limit` necessary to specify? why would a proposer want to restrict the `gas_limit` of a block being built by an external builder. i can understand this while self building",
        "created_at": "2025-12-15T09:36:22.286000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is a good point and we may need to bring this up to ACD/T. I know of at least \u003c@316280621783580673\u003e that wants this to go the other way and remove this from the CL",
        "created_at": "2025-12-15T09:37:11.731000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Gas limit is decided by the community, otherwise builders would decide it",
        "created_at": "2025-12-15T09:37:57.262000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Proposers should enforce the gas limit is the one promised in the bid and the one they requested",
        "created_at": "2025-12-15T09:38:43.353000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "the registration endpoint also has had a chronic issue with, how many validators can be registered at once. It's not specified, never has been, and the status quo is the result of informal negotiations between clients and the server software",
        "created_at": "2025-12-15T09:39:59.937000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Registration, if it happens, should be only for the proposers of E+1 when computing the lookahead",
        "created_at": "2025-12-15T09:40:52.913000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Same as the gossip topic",
        "created_at": "2025-12-15T09:41:04.580000+00:00",
        "attachments": null
    },
    {
        "author": "gd_0",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's quite important that we get the registration before hand. Primarily so that we know what the gas limit is when building.\nIf we don't have the gas_limit preference we'd have to assume the block gas limit will be the minimum possible for that block.\n\nIf we are using trusted payments we are also required to attach a proposer payment as the last tx. In this case we need the proposer fee recipient ahead of time so we can simulate how much gas it will use to make the transfer (this varies if the fee recipient is a contract). We then can reserve this gas from the gas limit.",
        "created_at": "2025-12-15T09:42:00.317000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Gas limit and fee recipient may be fetched from the gossip topic. The biggest issue is trusted payments being accepted or not",
        "created_at": "2025-12-15T09:43:25.251000+00:00",
        "attachments": null
    },
    {
        "author": "gd_0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Would definitely also be good to have that as part of the gossip topic so we know if we need to reserve gas for the payment or not",
        "created_at": "2025-12-15T09:45:28.958000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "it seems to me that the biggest drawback of validator registrations it the volume of data being sent. If we specify that only proposers of the upcoming epoch send registrations. we can use validator registrations to communicate preferences per builder too i believe? this can give more flexibility to proposers going forward?",
        "created_at": "2025-12-15T09:45:57.487000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "preferences like whether the proposer accepts trusted EL payments, minimum acceptable bid etc? and these registrations could be customized per builder?",
        "created_at": "2025-12-15T09:46:31.972000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "But the problem is what \u003c@1386598056320831509\u003e mentioned: rational proposers will contact directly builders that they may not take trusted payments from",
        "created_at": "2025-12-15T09:46:57.373000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "So this needs to be signaled on a builder basis, not on a global topic",
        "created_at": "2025-12-15T09:47:15.726000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "imo should be done by CL and, specifically the vc should handle the configuration as it's the best place to configure per pubkey, the EL as no context about connected validators\n\nthere was a PR https://github.com/ethereum/execution-apis/pull/608 to pass gas limit in payload attributes",
        "created_at": "2025-12-15T09:49:04.723000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah this topic definitely needs to be brought to ACD for discussion",
        "created_at": "2025-12-15T09:49:54.023000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "More generally, whichever components do the signing have to care. Today, that means web3signer, for example, too",
        "created_at": "2025-12-15T09:51:11.036000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "There's a good argument to keep it in the EL and it's that some L2s don't use the CL",
        "created_at": "2025-12-15T09:51:31.169000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "But I also think that for CL clients to act as builders they need to be able to drive this on demand on the Payload attributes call",
        "created_at": "2025-12-15T09:52:34.355000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "Well, builders in a self-building sense or as builders for others? Those are somewhat distinct roles",
        "created_at": "2025-12-15T09:53:51.126000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "If they want to bid, of course",
        "created_at": "2025-12-15T09:54:04.292000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Both, but the latter is more important",
        "created_at": "2025-12-15T09:54:17.054000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "We have to implement the latter and we will be building for other keys that may have different gas limits requests than ours",
        "created_at": "2025-12-15T09:54:47.998000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "If they're self-building the whole thing is internal",
        "created_at": "2025-12-15T09:54:50.964000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "Any \"protocol\" can be notional",
        "created_at": "2025-12-15T09:55:01.978000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is something we could solve with validator registrations i believe. the proposer can communicate per builder preferences via the registrations. \nwe could also communicate the builder index in the gossip topic and communicate builder preferences over there but that doesn't seem robust and highly prone to sybil attacks.",
        "created_at": "2025-12-15T09:57:59.611000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "i believe we could enforce builders to accept validator registrations only from proposers for epoch E+1 using the lookahead? the beacon client would only have to send registrations if it contains validator keys that are going to be proposing in the upcoming epoch E+1",
        "created_at": "2025-12-15T09:59:24.322000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "are there any other pain points clients have with validator registrations in general outside of the heavy data it has to send per epoch?",
        "created_at": "2025-12-15T10:00:33.689000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "Historically, there have been privacy/correlation issues with it",
        "created_at": "2025-12-15T10:01:45.336000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "what do you mean by correlation issues?",
        "created_at": "2025-12-15T10:11:27.175000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "well, it's the one place in the protocol that up front and trivially, a protocol actor can find out all of a node's validators, all at once",
        "created_at": "2025-12-15T10:12:06.965000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "got it that makes sense üëç",
        "created_at": "2025-12-15T10:12:35.209000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess 1 ETH is more than enough to bid in the most of the cases. Then for large entities registering a hundred of small builders is more optimal since it will at least allow to send up to a hundred of bids each slot. Even if the withdrawability delay for builders is very high, how will that help handling thousands of P2P messages? Or we don't expect large entities to create many builders in protocol?",
        "created_at": "2025-12-15T12:23:39.548000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Only the highest bid is forwarded. If that‚Äôs not good enough, we could also require a certain percentage/amount increase over the previous highest seen bid before forwarding, say 5%.",
        "created_at": "2025-12-15T12:31:27.575000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think the highest bid won't be enough, the percentage can work. with 1 gwei as min and 3%, 1000 bids will end up with 6.8k ETH which is prohibitive enough. Also, some senders can send different bids to different parts of the network to bypass that %% check, though, this should work up to a limited extent",
        "created_at": "2025-12-15T12:37:49.025000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yup that sounds reasonable to me. I can make a PR for this later today. Should be a single sentence somewhere in the p2p specs for gloas.",
        "created_at": "2025-12-15T12:43:14.042000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yup we can add a boolean field for this.",
        "created_at": "2025-12-15T13:34:53.748000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Or wait. \u003c@755590043632140352\u003e is this a bad idea? Adding a field for this.",
        "created_at": "2025-12-15T13:36:30.693000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ah no. You suggested this here. I'll update the PR.",
        "created_at": "2025-12-15T13:37:16.750000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "this might have to be a per builder value. a proposer can connect to a builder who it doesn't want a trustless payment from",
        "created_at": "2025-12-15T14:04:41.511000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "i think validator registrations will be the place to have this",
        "created_at": "2025-12-15T14:04:48.395000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Nah that was a bad idea, this flag needs to be chosen per-builder, so this has to be on a registration basis it seems",
        "created_at": "2025-12-15T14:38:30.884000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "It seems that the minimal practical builder API has three methods\n- getBid. Sent by the proposer to request a bid. sends a signed message to the builder, includes proposer index, slot, parent root and parent hash. \n- postBlock. Sent by the proposer to just forward the full signed beacon block, builder helps in dissemination and gets an early acknowledgment their bid was selected. \n- registerProposer. Sent by the proposers of the **next** epoch E+1 at the beginning of E. This includes fee recipient, gas limit, if they accept trusted payments, etc.",
        "created_at": "2025-12-15T14:40:47.895000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@\u00261417820113981145228\u003e please share your thoughts on the following:\nhttps://github.com/ethereum/consensus-specs/pull/4788\nThis is the top priority for Gloas. We need to decide on this to start implementing/iterating.",
        "created_at": "2025-12-15T16:07:22.959000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e In this case we need the proposer fee recipient ahead of time so we can simulate how much gas it will use to make the transfer (this varies if the fee recipient is a contract). We then can reserve this gas from the gas limit.\nif we're resolving the liquidity issues and make top-ups instant by making builders non validating, then is there a reason why builders would prefer to use trusted payments? it would give you slightly more space in the block and also reach more validators in case they are not directly connected and only listen to p2p\n\none caveat ist that the builder withdrawal cannot trigger smart contract code which might be a limitation but haven't heard of anyone requiring that",
        "created_at": "2025-12-15T17:21:08.489000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Forwarded this to the \u003c#692078615269212180\u003e channel.",
        "created_at": "2025-12-15T17:26:37.242000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Topping up costs money",
        "created_at": "2025-12-15T17:27:50.890000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm going to close the PR for option #1. I'm the main proponent for it \u0026 I agree that its complexity probably isn't worth it.",
        "created_at": "2025-12-15T17:30:40.012000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "true, but would that maybe be offset by being able to not having to include the proposer payment tx in the block?",
        "created_at": "2025-12-15T17:41:47.821000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "very much doubt it in fact, even disregarding the operational  costs of having to top up regularly, the 21K gas vs the deposit has to be a big difference, the only gain the builder would have is the tip in the 21K space freed from it, plus, the builder is actually including a large transaction in the previous block, which  in the long term counts as including this transaction with the deposit in its own block (other builders will be including txs in the block if everyone follows this strategy)",
        "created_at": "2025-12-15T17:45:52.884000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "A question of form, 1) I am ignoring these https://github.com/ethereum/EIPs/pull/10920#issuecomment-3654319881, is this right?\n2) I think you should be added as author \u003c@592004585506340885\u003e",
        "created_at": "2025-12-15T18:17:05.586000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "1) I don't think you should ignore eth-bot's review requests üòÖ\n2) Not necessary, I'm just helping. But if you insist, I'm fine with that.",
        "created_at": "2025-12-15T19:00:05.316000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "By 1) I mean trivial changes like these, we do this in our repo to prevent airdrop farmers, but I have no vote on the EIP repo so not sure if it's correct behavior. I left comments saying that I'd close these types of PRs before, but the bot (and no one) closes them",
        "created_at": "2025-12-15T19:01:35.234000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ah I see. Yes please ignore PRs from airdrop farmers with simple fixes like that.",
        "created_at": "2025-12-15T19:07:59.136000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "A maintainer should probably close that PR.",
        "created_at": "2025-12-15T19:08:12.669000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'll update the EIP with the high level version of the new thinking, and add you then as an author",
        "created_at": "2025-12-15T19:08:59.165000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "Catching up. Even over gossip, a proposer‚Äôs preference for trusted builders can be expressed with a new field like this:\n\n```\nclass ProposerPreferences(Container):\n    proposal_epoch: Epoch\n    validator_index: ValidatorIndex\n    fee_recipient: ExecutionAddress\n    gas_limit: uint64\n    trusted_builders: List[ValidatorIndex, ValidatorLimit]\n```\n\nReal question is whether a proposer wants to publicly reveal who they trust and whether that creates any downside. i think having a registration endpoint is good",
        "created_at": "2025-12-15T20:00:42.367000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah I don't think I would feel comfortable with this myself. It's sort of a DoS vector too, since you could encode a really big list. I suppose a gossip check could ensure that all of the builder indices are valid \u0026 active, but that feels like a lot of extra work and errorprone.",
        "created_at": "2025-12-15T20:06:01.925000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah, let's just keep the three endpoints, it's a rather trivial approach",
        "created_at": "2025-12-15T20:31:16.185000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "These three",
        "created_at": "2025-12-15T20:31:27.338000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "that's good with me, client can reuse some logic with submit regstration today which is nice",
        "created_at": "2025-12-15T20:32:39.439000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@592004585506340885\u003e is there currently no way for a proposer to signal that it accepts trusted payments over p2p, even at a global level?\n\nHave you considered adding a simple boolean flag to indicate that a proposer is globally ok with trusted payments, so builders without RPC and only want to use P2P can discover this preference?",
        "created_at": "2025-12-15T20:46:55.053000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "So in the proposer preferences PR, I did add a `trusted_payments_accepted: boolean` field, but quickly removed it after some pushback (https://discord.com/channels/595666850260713488/874767108809031740/1450134935737208994).",
        "created_at": "2025-12-15T20:58:38.800000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "i dont feel strongly either, i just think it may be useful for p2p builder that want trusted payment. We can open this up to discuss at the break out. The good thing is this is easy to add or remove later on even later in the process so it doesnt have any surface area",
        "created_at": "2025-12-15T21:29:19.137000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "P2P builder cannot have trusted payments",
        "created_at": "2025-12-15T22:34:29.038000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "We will not propagate that on P2P of course",
        "created_at": "2025-12-15T22:34:43.320000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh we even have a REJECT for that, excuse what i said then, it's no longer a valid proposition",
        "created_at": "2025-12-15T22:41:52.480000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@425572898787426305\u003e Please review this PR I made: https://github.com/ethereum/consensus-specs/pull/4792",
        "created_at": "2025-12-15T22:55:53.370000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Mechanism to onboard builders at the fork:\n\n1. Existing 0x03 validators at the fork are exited (if active)\n2. If the validator was active. A builder with the exact same pubkey and withdrawal credential is put in the builder slice. \n3. 1 ETH is transferred from the validator to the builder. The remaining ETH is scheduled for withdrawal as usual. \n4. Builder is active immediately. \n\nAt any given time for a deposit for a pubkey with a withdrawal credential 0x03... the following can happen:\n\n1. No active validator has this pubkey: create the builder, deposit.\n2. One active validator has this pubkey. If it is a 0x01 or 0x02 validator, deposit to it, ignore the withdrawal credential. \n3. One active validator has this pubkey. If it is a 0x03, it has to be a builder by the above, so just deposit to it. \n\nAt no point there can be two active validators with the exact same pubkey",
        "created_at": "2025-12-15T23:26:56.281000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The question here is how important it is to have builders already onboarded at the fork: 15 minutes of Defi seems to be a hell lot. I doubt activity will move to gas price auctions on the mempool",
        "created_at": "2025-12-15T23:28:50.893000+00:00",
        "attachments": null
    },
    {
        "author": "l03443",
        "category": "Cross-layer",
        "parent": "",
        "content": "iirc \u003c@911055007837720597\u003e shared some stats around this when the circuit breaker triggered after fusaka. Dont think much moved to the mempool",
        "created_at": "2025-12-15T23:29:43.462000+00:00",
        "attachments": null
    },
    {
        "author": "l03443",
        "category": "Cross-layer",
        "parent": "",
        "content": "so would be a similar situation i guess",
        "created_at": "2025-12-15T23:29:51.420000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah... and just to be clear, I haven't looked at the spec yet to judge here, but I assume that the finalization requirement is put in place for the same reason as for deposits: dealing with reorgs that change the order of the pubkey to index cache is a mess for clients, so we definitely want to onboard them after finalization",
        "created_at": "2025-12-15T23:32:25.880000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "hmm, then the problem of a reorg across the fork boundary has the same issue",
        "created_at": "2025-12-15T23:33:31.582000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "One issue with this. If there's 0x03 validator at the fork, it wouldn't be **immediately** exited. It would be queued for exit. So there would be an active builder \u0026 validator at the fork.",
        "created_at": "2025-12-15T23:33:33.424000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, this starts to creep into complexity that scares me",
        "created_at": "2025-12-15T23:33:40.309000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "this was with regards of reorgs at the fork, not that worried about exiting validators and active builders...",
        "created_at": "2025-12-15T23:35:30.287000+00:00",
        "attachments": null
    },
    {
        "author": "nc1234",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e 2. One active validator has this pubkey. If it is a 0x01 or 0x02 validator, deposit to it, ignore the withdrawal credential.\nWhy would this scenario deposit to the validator? I would take this as a signal to exit validator and convert into builder like the flow you said about onboarding builders at fork",
        "created_at": "2025-12-15T23:39:41.290000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Because that's how deposits work today: if you deposit to an existing validator you just add to it, doesn't matter your withdrawal credentials",
        "created_at": "2025-12-15T23:49:24.857000+00:00",
        "attachments": null
    }
]