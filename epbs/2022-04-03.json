[
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "ðŸ‘† is probably not going to be the final way; seems the delay might be an issue (`builder_getPayloadHeader` needs to give the relays sufficient time to build the payload), and we might want/need to cache the payload already at mev-boost ðŸ¤” any thoughts on this? \n\nHere's another thread about a polling approach: https://github.com/flashbots/mev-boost/issues/65",
        "created_at": "2022-04-03T14:16:54.489000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@!388610194608750595\u003e I'm not sure I understand the timing issue you're referring to. IMO the relays should begin building payloads for the next slot immediately after observing a new block. If there is a fork, it's up to the builder to decide how much of it's resources to expend on a fork vs. the canonical chain. It would be slightly more efficient for the builder to know at the beginning of the slot which fork the validator is on so they can focus all their resources on the chain they know the validator will propose on, however, as we begin using gossip networks to communicate this information the latency will increase. Generally, my preference is to push as much complexity onto builders/relays as possible (in this case, determine which fork to build on)",
        "created_at": "2022-04-03T15:47:30.696000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "Once the CL asks `mev-boost` for a header and `mev-boost` asks a relay for a header, the relay should have already had time to build a block",
        "created_at": "2022-04-03T15:48:55.121000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "The timing issue was about waiting for the slowest relay, but realistically we could just set a sufficient timeout. What would an acceptable timeout for `getPayloadHeader` to any one relay be -- 1-2 seconds perhaps?\n\nI think it would be great if we can assume the relays know about the validator for an upcoming slot and prepare a header only for that one. This would remove a lot of overhead and possible spam vectors. Not sure about the additional benefit we'd gain from polling. Especially considering that we might need to do another call to the relay on `getPayloadHeader` anyway, to avoid serving a slightly old cache entry.",
        "created_at": "2022-04-03T16:24:10.328000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Again out of curiosity, will builders be smart enough to ditch a proposer requesting a block that they know it will be orphaned? If there's a fork, knowing the current total effective balance you can more or less predict that the proposer hasn't seen all attestations if he's proposing on a fork that you have already discarded as impossible",
        "created_at": "2022-04-03T19:39:14.292000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Seems to me in a market that thrives in not showing a hand until it's too late, it is a risky business to send a payload to a validator building on top of a non-boosted, low-voted block",
        "created_at": "2022-04-03T20:08:00.339000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "There's some issue with mev-boost not finding `parentHash` properly in the response from \u003c@!607055410104500244\u003e 's `mock-relay`:\n```\nWARN[0012] Could not unmarshal response                  data=\"{\\\"message\\\":{\\\"feeRecipientDiff\\\":\\\"0x0\\\",\\\"payloadHeader\\\":{\\\"baseFeePerGas\\\":\\\"0x7\\\",\\\"blockHash\\\":\\\"0xbc53afb1a29a0da3d2988134f9931ddb8c954e71f0bc623304caef56e40bdafb\\\",\\\"blockNumber\\\":\\\"0x1\\\",\\\"extraData\\\":\\\"0x\\\",\\\"feeRecipient\\\":\\\"0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b\\\",\\\"gasLimit\\\":\\\"0x1c95111\\\",\\\"gasUsed\\\":\\\"0x0\\\",\\\"logsBloom\\\":\\\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\\\",\\\"parentHash\\\":\\\"0x3b8fb240d288781d4aac94d3fd16809ee413bc99294a085798a589dae51ddd4a\\\",\\\"prevRandao\\\":\\\"0x0000000000000000000000000000000000000000000000000000000000000000\\\",\\\"receiptsRoot\\\":\\\"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\\\",\\\"stateRoot\\\":\\\"0xca3149fa9e37db08d1cd49c9061db1002ef1cd58db2210f2115c8c989b2bdf45\\\",\\\"timestamp\\\":\\\"0xc\\\",\\\"transactionsRoot\\\":\\\"0x7ffe241ea60187fdb0187bfa22de35d1f9bed7ab061d9401fd47e34a54fbede1\\\"}},\\\"signature\\\":\\\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\\\"}\" error=\"missing required field 'parentHash' for ExecutionPayloadWithTxRootV1\" method=engine_getPayloadV1 prefix=lib/service\nERRO[0012] GetPayloadHeaderV1: no valid response from relay  method=engine_getPayloadV1 payloadID=0x194067506516f5d9 prefix=lib/service\n```",
        "created_at": "2022-04-03T22:00:10.438000+00:00",
        "attachments": []
    }
]