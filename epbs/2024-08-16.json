[
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Breakout Room in 2 hours \n- August 16th (Fri), 2024 , **14:00 UTC** In \u003ct:1723816800\u003e \n- Zoom link: https://ethereumfoundation.zoom.us/j/87569210985?pwd=3Cv1hDh7If4cq9IMXvNln1CtqQ72MR.1\n- Agenda: https://github.com/ethereum/pm/issues/1133\n\nWe will discuss the above potential deciding factor on block auctions",
        "created_at": "2024-08-16T11:57:34.186000+00:00",
        "attachments": []
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hi, I am on the move and wouldn't be able to join. From Teku perspective, I am making decent progress on the specs implementation on Enrico's branch: https://github.com/Consensys/teku/pull/8497 .Enrico is returning from a holiday the week after the next, so for the moment It is only me working on it.",
        "created_at": "2024-08-16T14:04:04.183000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "nice!",
        "created_at": "2024-08-16T14:55:58.039000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Notes of today's talk here https://x.com/potuz_eth/status/1824459943300272268",
        "created_at": "2024-08-16T14:56:06.077000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I would want to hear from people involved regarding the issue above \u003c@504202741933932544\u003e \u003c@486501030046203915\u003e \u003c@654267572107083777\u003e \u003c@520034910149410861\u003e \u003c@641548687813902336\u003e. I've already heard others oppinion, I'll open a PR in the consensus-repo hopefully today/tomorrow with the changes for slot auctions, they are simple. Also I'm inclined to move withdrawal processing to the execution payload as it is much simpler (no checking and committing of the withrawal root) but would want to hear first if anyone has analyzeed the difference (I did and found the change acceptable).",
        "created_at": "2024-08-16T14:58:50.775000+00:00",
        "attachments": []
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "Oh shoot totally missed the call",
        "created_at": "2024-08-16T15:00:16.086000+00:00",
        "attachments": []
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "The blockhash is pretty small though, what is the difference between free DA from that and eg the graffiti?",
        "created_at": "2024-08-16T15:00:44.456000+00:00",
        "attachments": []
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ah ok I got it, and before asking more dumb questions iâ€™ll just check out the recording",
        "created_at": "2024-08-16T15:01:31.401000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "One key point here is you can prove kzg commitments using block hash",
        "created_at": "2024-08-16T15:11:16.032000+00:00",
        "attachments": []
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess if you had the PTC do validation too this is not a problem, but then you lose the pipelining",
        "created_at": "2024-08-16T15:11:34.752000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Oh no, the point here is the block hash (invalid execution block) from the valid consensus block still gets included on the chain. And you could commit large offchain data with it",
        "created_at": "2024-08-16T15:14:01.703000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "Unless I am misunderstanding something, it's just 32 \"free\" (but not really) bytes?",
        "created_at": "2024-08-16T15:43:45.157000+00:00",
        "attachments": []
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "Think the point is that you can deliver a payload that is invalid (doesn't make it on-chain) but still attested as available by the PTC, and rollups could use the blockhash to prove that some KZG commitments were part of the block data",
        "created_at": "2024-08-16T15:44:53.227000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "no \u003c@520034910149410861\u003e Take a look at my twitter thread",
        "created_at": "2024-08-16T15:48:01.255000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://x.com/potuz_eth/status/1824417162808729869",
        "created_at": "2024-08-16T15:48:14.848000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "That's an explanation of the attack",
        "created_at": "2024-08-16T15:48:20.030000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think it's severe enough to kill blockauctions",
        "created_at": "2024-08-16T15:48:32.820000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Lee Bousfield from offchainlabs proposed a way of fixing the problem, but then the tradeoffs start being bothersome enough that I think it's better to swallow the pill and go with slot auctions that are even simpler to specify and implement than block auction",
        "created_at": "2024-08-16T15:49:32.656000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Unless there's a blocker I'll write the PR",
        "created_at": "2024-08-16T15:49:47.667000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "you don't even need that, the KZG is also committed in the header",
        "created_at": "2024-08-16T15:50:13.454000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "so you get both calldata and blob data for free",
        "created_at": "2024-08-16T15:50:23.796000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I will move to not commit anything on the header",
        "created_at": "2024-08-16T15:50:31.509000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't understand in what way the PTC vote guarantees availability. How is this committee better than any external DA?",
        "created_at": "2024-08-16T15:52:19.901000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "The chain doesn't revert if the PTC lies about availability of a payload",
        "created_at": "2024-08-16T15:52:40.788000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The committee guarantees that the data \"was\" available to all honest nodes in the rollup",
        "created_at": "2024-08-16T15:53:02.575000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "honest nodes role is to save and keep the data",
        "created_at": "2024-08-16T15:53:11.353000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "So does any external DA?",
        "created_at": "2024-08-16T15:53:14.872000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "the trust assumption is that there is one honest node",
        "created_at": "2024-08-16T15:53:23.969000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "exactly as for usual rollups",
        "created_at": "2024-08-16T15:53:29.647000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "How is this better than putting the data on Celestia?",
        "created_at": "2024-08-16T15:53:40.939000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "an honest node consist of a modified CL that saves these invalid blocks",
        "created_at": "2024-08-16T15:53:45.018000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "that Celestia validators attesting to the data are not L1 validators",
        "created_at": "2024-08-16T15:54:01.281000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "here you get L1 validators attesting to it",
        "created_at": "2024-08-16T15:54:11.006000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "L1 validators are no better than any other validators, and this isn't a 1/N assumption, it's an honest majority assumption",
        "created_at": "2024-08-16T15:54:33.196000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's not an honest majority",
        "created_at": "2024-08-16T15:54:43.335000+00:00",
        "attachments": []
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "but just a sample, so maybe EigenDA is a better comparison here than celestia",
        "created_at": "2024-08-16T15:54:50.806000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's only one honest that needs to keep the data",
        "created_at": "2024-08-16T15:54:52.810000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "all rollups already assume honest majority of L1",
        "created_at": "2024-08-16T15:55:02.265000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and 1 of N of L2",
        "created_at": "2024-08-16T15:55:06.838000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "this doesn't change that",
        "created_at": "2024-08-16T15:55:11.389000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "They don't assume that for availability",
        "created_at": "2024-08-16T15:55:17.600000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "They assume that full nodes will complain if the data is not available",
        "created_at": "2024-08-16T15:55:30.748000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's a random sample, it's the same as all for all statistical purposes",
        "created_at": "2024-08-16T15:55:32.429000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "It's an honest majority assumption on the PTC, or the PTC saying something is available doesn't mean anything",
        "created_at": "2024-08-16T15:56:08.663000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is true, and it's definitely not the same as a full rollup in which any honest node for L2 can get the data from any L1 node, but still it's a severe attack IMO",
        "created_at": "2024-08-16T15:56:30.208000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "this assumption is anyway there on all rollups",
        "created_at": "2024-08-16T15:56:46.753000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and on L1",
        "created_at": "2024-08-16T15:57:11.586000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Harry from OCL put it right: the change in the trust assumption is that this rollup requires 1 honest validator being always online",
        "created_at": "2024-08-16T15:58:23.877000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "instead of just 1 honest validator",
        "created_at": "2024-08-16T15:58:29.783000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "For liveness, not for availability (and its downstream consequences). If the canonical chain (as determined by a majority of L1 validators) was unavailable, L1 full nodes would not follow that chain",
        "created_at": "2024-08-16T15:58:39.845000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "true",
        "created_at": "2024-08-16T15:59:23.824000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "This just doesn't seem true. If a majority of the PTC signs off on something unavailable, how is this \"rollup\" going to defend itself from it?",
        "created_at": "2024-08-16T15:59:30.744000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "The way I see it (and I could be off) is that with block auctions, you could turn Ethereum's DA into something like EigenDA if the incentives are right. That would involve committing to a 32-byte block hash on-chain but proving against it later on.",
        "created_at": "2024-08-16T15:59:39.916000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "it can't but rollups already can't defend from a majority dishonest in L1.",
        "created_at": "2024-08-16T16:00:10.935000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "for different issues",
        "created_at": "2024-08-16T16:00:15.640000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "this you can do paying only the 32 bytes calldata. I think here the point is that the PTC attested to it, and statistically this means the majority of validators saw the data",
        "created_at": "2024-08-16T16:01:03.309000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "Availability failures are a lot worse because they can even imply invalid state transitions, at least for optimistic rollups",
        "created_at": "2024-08-16T16:01:06.658000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah I think we both understood the problem itself, probably have different meassures of the gravity of it.",
        "created_at": "2024-08-16T16:01:41.699000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "If there's consensus to keep the PoC on block auctions I don't really mind much, it's always easy to switch as it's not much change. But I can see how for teams that are starting to implement, it would be better to get a definition earlier than later.",
        "created_at": "2024-08-16T16:03:59.734000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "It is a funamental change though that you can commit to data in the exact same was as if it were available or not, that is, the KZG commitments root is committed in the beacon block, without the data being proven available",
        "created_at": "2024-08-16T16:05:05.236000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "so this should anyway be moved outside of the header I think",
        "created_at": "2024-08-16T16:05:24.512000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and the blockhash is not much more different than this semantically",
        "created_at": "2024-08-16T16:05:38.684000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "To be clear I don't want to express an opinion on the broader question, just on how much of an issue I perceive this to be",
        "created_at": "2024-08-16T16:05:52.247000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah I get this, I do think this is an instance of free DA though",
        "created_at": "2024-08-16T16:06:23.817000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "if instead of the PTC it would be an entire beacon committee I think we wouldn't have that much argument for example",
        "created_at": "2024-08-16T16:06:46.819000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and I think I can show that the PTC statistically is just as good",
        "created_at": "2024-08-16T16:07:05.417000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "the state transition of the rollup can consider thresholds of 90%",
        "created_at": "2024-08-16T16:07:16.558000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "It's an instance of a kind of free DA, but it's not the same as allowing invalid txs in a block for example. That's a much stronger form of DA, because it doesn't rely on any committee. Even if the PTC was replaced by the beacon committee I would still maintain that this is a much weaker form of DA and should be \"worth\" much less",
        "created_at": "2024-08-16T16:09:15.189000+00:00",
        "attachments": []
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "If that wasn't the case, we might as well just rely on honest majority assumptions and never have full nodes bother with downloading any data",
        "created_at": "2024-08-16T16:10:11.878000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I agree that is less because the data does not need to stay in nodes. I am not arguing that",
        "created_at": "2024-08-16T16:10:12.521000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I am not trying to argue that this rollup will have the same guarantees as Arbitrum",
        "created_at": "2024-08-16T16:10:24.534000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I am trying to argue that it's a bad attack nonetheless, that these blocks can certainly be worth more than the single MEV or execution that you would get from a block as a builder, as you are proving for that value that you have some data of very large size, that the Ethereum network (it really doesn't matter that it's a committee) has seen it",
        "created_at": "2024-08-16T16:11:30.983000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "the question here is if the value of proving that is more or less than the value of building a block, if it happens to be more, then a rational builder would execute this attack",
        "created_at": "2024-08-16T16:12:21.692000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "So I'm not sure what's the best way forward here, during the meeting it was signaled a move to slot auctions, but we were only \u003c@792822129019584562\u003e and I essentially, it would be nice to make a decision early rather than later to see what people believe. From the point of view of implementation it doesn't change much in the core processing, but it does introduce changes in the engine API and the way we interact specifically with the Engine to produce blocks. So it would be nice to get some signal as to what is more likely to be accepted",
        "created_at": "2024-08-16T16:29:23.512000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't mind continuing working on block auctions to get the poc running",
        "created_at": "2024-08-16T16:29:40.189000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think it'll be a nice to move to a confident spot before more clients start prototyping. Could there be a universe which we move from slot auction back to block auction?",
        "created_at": "2024-08-16T16:34:52.110000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "was/still am traveling today",
        "created_at": "2024-08-16T17:03:27.723000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "will look",
        "created_at": "2024-08-16T17:03:37.074000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "thanks, would be good to get some feedback on this, since the only ones with a rush to have a full PoC before devcon are the Prysm crowd, perhaps it's best if we continue developing on block auctions and let people discuss more, if people decide this is a serious attack enough, then we can always move to slot auctions easily",
        "created_at": "2024-08-16T17:04:38.441000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@363800010518822915\u003e does it look good to you?",
        "created_at": "2024-08-16T17:04:48.552000+00:00",
        "attachments": []
    }
]