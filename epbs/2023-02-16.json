[
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Congrats on the release \u003c@539495253418180618\u003e for \nhttps://github.com/ralexstokes/mev-rs/releases/tag/v0.3.0 . If I wanted to use a version of mev-rs which supports the minimal config, would I have to compile it from source with the appropriate build flag ? Or is it something configurable in runtime",
        "created_at": "2023-02-16T04:59:56.480000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "thanks! right now it is hardcoded to use `mainnet`\n\nill open an issue to support `minimal` although it is not a super high prio for me (unless you can convince me otherwise üòâ )",
        "created_at": "2023-02-16T05:15:21.492000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "No worries, not a big requirement for us. Would just make it easier for testing üôÇ Mainnet works too for us",
        "created_at": "2023-02-16T05:16:14.343000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "if it happened to work right now, it would be by accident and just shows that none of the builder specs touch any types that change across presets",
        "created_at": "2023-02-16T05:16:37.250000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "good to know -- what are you looking to test?",
        "created_at": "2023-02-16T05:16:55.724000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is super experimental *but* i just got an instance of the \"mempool builder\" up at https://zhejiang.relay.pbs.dev",
        "created_at": "2023-02-16T05:17:23.847000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "the backing CL and EL are still syncing so it is not even building yet lol",
        "created_at": "2023-02-16T05:17:40.666000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "i'm going to put some validator load through it tomorrow assuming i can get some sizeable stake on zhejiang",
        "created_at": "2023-02-16T05:18:07.570000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Basically all our builder paths in prysm, we have end to end tests for almost all our components. The big thing missing so far has been E2E tests for validators running via relays. With this, we should hopefully be able to finally be able to test this out in our CI for every build",
        "created_at": "2023-02-16T05:20:18.035000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh awesome",
        "created_at": "2023-02-16T05:20:40.799000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, id be very happy to help w/ this use case",
        "created_at": "2023-02-16T05:23:46.721000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "you'd want to use the minimal preset, and im assuming you want a valid builder flow, and also that you'd have a prysm and some kind of EL running in the test env?",
        "created_at": "2023-02-16T05:24:36.188000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Minimal preset would be nice as it requires a shorter time to run for each test run. But we can also make it work with mainnet, it isn't a big blocker for us.\n\n\u003e and also that you'd have a prysm and some kind of EL running in the test env?\nYeap we have prysm and geth running in a test environment with the respective validators connected to prysm. From how I understand `mev-rs` , we would just need to run it as a sidecar and have it connected to geth and it should feed us valid payloads that we can use when proposing blocks.",
        "created_at": "2023-02-16T05:28:30.670000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, the \"mempool builder\" could be run from `mev-rs` in that environment although it also has to man-in-the-middle the engine api so it can't just run as a vanilla sidecar -- you'd have to change your EL and CL configuration for the Engine API endpoint",
        "created_at": "2023-02-16T05:32:16.090000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "another thing i ran into when testing w/ the same EL (rather than a separate one) was that the CL (lighthouse in this case) would see the same block and default to the local one, regardless of what the remote one was",
        "created_at": "2023-02-16T05:33:04.771000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "the way i got around this was running a second EL with a non-peered mempool that i could inject \"private orderflow\" into and you'd prolly want to do something like this for your testing although it starts to become a big infra lift",
        "created_at": "2023-02-16T05:33:59.704000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "interesting, didn't know it was meant to be run like a piece of middleware. That is good to know, will keep it in mind when testing it out. I can have a separate CL + EL for this if required. Having a non-peered EL to inject private transactions into sounds cool, would be nice to test that out once we get this working properly",
        "created_at": "2023-02-16T05:41:46.460000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah the MITM strategy avoids having to run custom forks of CL+EL\n\nthere is some work underway to expose standardized endpoints from the beacon-apis so the required data can be consumed via user-facing API and we won't have to worry about eavesdropping the Engine API",
        "created_at": "2023-02-16T05:46:07.201000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@539495253418180618\u003e I get this when running the compiled binary locally:\n```\n./mev: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.32' not found (required by ./mev)\n./mev: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.34' not found (required by ./mev)\n./mev: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.33' not found (required by ./mev)\n```",
        "created_at": "2023-02-16T10:55:11.879000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Is it possible to build this with an earlier version of libc, so that it is compatible with distro's running older kernels",
        "created_at": "2023-02-16T10:56:21.128000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "hmm ill take a look, i usually just build from source so haven't tested the built binaries at all really",
        "created_at": "2023-02-16T15:11:49.621000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Cross-layer",
        "parent": "",
        "content": "You can try adding `-tags osusergo,netgo -ldflags=\"-extldflags=-static\"` to the `go build` command, that should avoid use of glibc.",
        "created_at": "2023-02-16T15:15:17.027000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "hopefully there is no go anywhere in the build process üôÉ",
        "created_at": "2023-02-16T15:24:02.446000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "hello everyone, i'll be hosting a community call in just under one week to discuss the next steps with `mev-boost`, relays and builders for the upcoming `capella` fork and some other fun stuff\n\nhere's a link to the call details, please join if you can üôÇ\n\nhttps://collective.flashbots.net/t/toward-an-open-research-and-development-process-for-mev-boost/464/19?u=ralexstokes",
        "created_at": "2023-02-16T19:46:16.318000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Cross-layer",
        "parent": "",
        "content": "for Lighthouse we build with `cross` on an old Ubuntu version to get a binary that works across many distros",
        "created_at": "2023-02-16T21:07:03.446000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "**CL clients** -- after the Capella upgrade, some mev-boost relays could still send bellatrix bids on getHeader (if they haven't updated properly). The way to distinguish that would be a missing `withdrawals_root` field in the getHeader response. \n\nIt's important that CLs don't accept that as a valid response after the Capella fork, because the payload won't include any withdrawals and it'd lead to missed slots.\n\nI guess CLs could/should also verify whether the `withdrawals_root` is actually correct, because it can be computed locally too, and this would give the user another layer of security.\n\n(just wanted to make sure y'all do it that way, and flag it to double-check to avoid any potential issues! üôè )e",
        "created_at": "2023-02-16T21:39:50.137000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e I guess CLs could also verify whether the `withdrawals_root` is actually correct, because it can be computed locally too, and this would give the user another layer of security.\n\nThis seems to be the general, plan, yes",
        "created_at": "2023-02-16T21:41:15.226000+00:00",
        "attachments": []
    }
]