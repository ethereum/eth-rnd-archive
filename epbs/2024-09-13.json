[
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Breakout call now",
        "created_at": "2024-09-13T14:00:43.017000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Zoom link https://ethereumfoundation.zoom.us/j/87569210985?pwd=3Cv1hDh7If4cq9IMXvNln1CtqQ72MR.1",
        "created_at": "2024-09-13T14:01:23.231000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Quick recap before someone (usually \u003c@363800010518822915\u003e ) posts a good analysis. \n- \u003c@981249983196041218\u003e presented an analysis pretty much showing that on slot auctions there's a \"trusted advantage\" that does not seem to be possible to avoid. This seems like a serious problem on slot auctions and it'd be nice to weigh against the known problems of block auctions. We decided to keep building on block auctions for the time being cause it's an easy switch to slot auctions if they are decided later. \n- \u003c@554799849288105986\u003e proposed a new method in the Engine API to requests payloads by range. We agreed that it was sensible to have this method. I raised that we shouldn't even need to have the payload to sync. Would like to talk to \u003c@425572898787426305\u003e about this, Perhaps we can schedule an informal call Misha? I think once the requests are sent outside of the payload and the block is hashed as SSZ, we should not need to get the payloads ever on the CL, and would only need to have the payload HTR. \n-  \u003c@363800010518822915\u003e proposed that we moved the processing of withdrawals to the execution phase. Mark seemed to strongly prefer it, I don't oppose it and even like it, but acknowledge that it's different on the beacon chain and would want someone else besides me vouching for it. We decided to requests here for signals from teams if they rather want to move this to the EL payload processing. \n\nHeads-up it was not said in the fork, but ePBS in the CL spec was already changed by Lucas's PR https://github.com/ethereum/consensus-specs/pull/3875. I am in the process of rebasing https://github.com/ethereum/consensus-specs/pull/3854 which will be very very painful. If you guys want to move withdrawals to the EL processing please signal this right now cause I won't make these changes twice üôÇ",
        "created_at": "2024-09-13T15:11:53.226000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "Here is my notes: https://hackmd.io/@ttsao/epbs-breakout-9\n\nAlings with what Potuz said",
        "created_at": "2024-09-13T15:19:43.328000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e \u003c@981249983196041218\u003e \n\nI think same slot unbundling is much more dangerous running out of protocol market in slot auction. Does this look right to you?\n- Proposer `n` commits to `consensus_block` at 0\n- Relayer waits until `consensus_block` has `40%` weight (`x + 0.4 \u003e 1-x + 0.2 =\u003e x=0.4`) then reveal `execution_block`\n- Proposer `n` sees `execution_block` and release `execution_block'` at the shortly after hoping to win\n- Payload attestation just votes for timeliness of the block, it doesn't care which block it is\n- Proposer is not required to release `consensus_block'` which is to recommit again\n- Proposer `n+1` chooses to build upon `execution_block'` with `consensus_block_1`, if `consensus_block_1` remains canonical then same slot unbundling is successful",
        "created_at": "2024-09-13T15:49:31.753000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is a non-issue if the secondary marget is that the proposer commits to the relay address and submits a block. The relay pays later off-protocol",
        "created_at": "2024-09-13T15:58:12.185000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e i think the scenario you mention is actually worse in the current spec that processes withdrawals early",
        "created_at": "2024-09-13T16:00:04.894000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "I understand that. All I'm saying is that same-slot unbundling intuitively feels easier if you commit to yourself and go through a secondary market to get the block. Since it's yourself, you can unbundle it. If you don't commit to yourself and instead commit to someone else, it's a different story.",
        "created_at": "2024-09-13T16:01:38.752000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "actually i think they're exactly the same",
        "created_at": "2024-09-13T16:08:07.385000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "",
        "created_at": "2024-09-13T16:08:08.428000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "f3f9829aebaa2a4e021b80af7350d871111e190a17c11f153e094ef1aeef1c7b"
            }
        ]
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "in both scenarios, the attacker (who has control over execution payloads being skipped), stops revealing payloads the moment their withdrawal is guaranteed:\n- in the current design that's after producing payload E1\n- in the alternative design that's after producing payload E2",
        "created_at": "2024-09-13T16:10:06.116000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't understand that graph with this context, can you walk me through the situations?",
        "created_at": "2024-09-13T16:12:10.618000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "suppose an attacker can cause a bunch of missed execution payloads but they want their withdrawal to be guaranteed before they begin the attack",
        "created_at": "2024-09-13T16:13:16.588000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "their withdrawal is guaranteed only once B2 is processed by the beacon chain",
        "created_at": "2024-09-13T16:13:59.404000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "the red line shows when they will begin the attack in both scenarios",
        "created_at": "2024-09-13T16:14:14.245000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "the top row is the current spec",
        "created_at": "2024-09-13T16:14:34.085000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "bottom is after moving `process_withdrawals()` to `process_execution_payload()`",
        "created_at": "2024-09-13T16:15:07.816000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "in the current spec, attacker begins their attack after producing payload with withdrawals E1",
        "created_at": "2024-09-13T16:15:51.740000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "in the modification, they cannot begin the attack until after they've produced a payload with withdrawals E2",
        "created_at": "2024-09-13T16:16:13.640000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "E0, E1, E2 is the state of the execution withdrawals and B0, B1, B2 is the state of the beacon chain withdrawals",
        "created_at": "2024-09-13T16:19:26.498000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "if you want i can hop on a call",
        "created_at": "2024-09-13T16:22:35.098000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "So what's the highight here?",
        "created_at": "2024-09-13T16:25:55.432000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The attacker starts at the same point in both cases, right after the execution payload honors the withdrawal",
        "created_at": "2024-09-13T16:26:28.071000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "We can use this server's audio channel if you want",
        "created_at": "2024-09-13T16:27:04.552000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@554799849288105986\u003e",
        "created_at": "2024-09-13T16:27:19.735000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e oh sorry i didn't see till now üò¶",
        "created_at": "2024-09-13T16:45:14.041000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "okay sorry i fixed my notifications",
        "created_at": "2024-09-13T16:46:16.243000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah that's basically the highlight; there's no real difference",
        "created_at": "2024-09-13T16:47:22.792000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah for this attack there isn't, but the point is that there is a difference in the effective balance of validators in one or the other method under large Liveness issues",
        "created_at": "2024-09-13T16:49:18.443000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Question is if this matters or not. I believe it doesn't",
        "created_at": "2024-09-13T16:49:36.463000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@\u0026595685821026271242\u003e",
        "created_at": "2024-09-13T16:49:53.450000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ha, that spammer is auto-moderating üôÇ",
        "created_at": "2024-09-13T16:50:22.120000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "there isn't a real difference though since this queue is continuous",
        "created_at": "2024-09-13T16:51:57.592000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't understand",
        "created_at": "2024-09-13T16:52:16.392000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "‚àû + 1 = ‚àû",
        "created_at": "2024-09-13T16:52:17.704000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "sorry, still don't understand, probably better to move to a thread cause this is burying the post to have a poll on the main issue here which is to move or not üòÑ",
        "created_at": "2024-09-13T16:52:56.407000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Starting a poll, react with ‚úÖ  if we should move the withdrawal processing to the payload and ‚ùå  if we shouldn't... I am leaning yes, will vote tomorrow after talking to \u003c@363800010518822915\u003e",
        "created_at": "2024-09-13T17:37:21.834000+00:00",
        "attachments": null
    }
]