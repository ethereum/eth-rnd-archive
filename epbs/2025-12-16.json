[
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "So reorgs at the fork are only a problem if we're already not finalizing correct?",
        "created_at": "2025-12-16T00:10:33.128000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Cross-layer",
        "parent": "",
        "content": "so, at its simplest, is it bad if local builders had to do a few blocks at the fork? like if builders had to register at the fork and until they're registered some local builders need to propose...",
        "created_at": "2025-12-16T02:44:14.502000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "hey folks, i have a question:\nin `process_execution_payload_bid` , we don't validate whether the fee recipient the proposer prefers to receive their rewards: https://github.com/ethereum/consensus-specs/blob/master/specs/gloas/beacon-chain.md?plain=1#L946\ni m thinking if there is a chance that a builder can spoof the fee recipient to be an address they own to get all the mev rewards? \ntoday relays check if the builder is submitting a bid to the correct fee recipient or not. \ni don't see such checks while we process the execution payload bid or when we receive the bid from the p2p gossip topic? i assume this should be easy to check when directly querying the builder for the bid from the builder-api.",
        "created_at": "2025-12-16T11:20:25.908000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "could the builder put any fee recipient they desire and get away with it?",
        "created_at": "2025-12-16T11:21:01.122000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "i didnt know ethereum has customer support now üôè",
        "created_at": "2025-12-16T11:21:23.752000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "I believe The proposer should be checking if the bid.fee_recipient matches the one they expect while conducting the auction. This can‚Äôt be checked by consensus.",
        "created_at": "2025-12-16T12:00:48.605000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "that's what we currently do for the gas limit (there is a [note in the builder spec](https://github.com/nflaig/builder-specs/blob/db7c5ee0363c6449997e2a1d5bc9481ed87ba223/specs/bellatrix/builder.md?plain=1#L285)), we cache gaslimit/fee recipient info, in gloas we would check fee recipieint as well (if trustless bid), same as the rule added to p2p if you receive bid there https://github.com/ethereum/consensus-specs/pull/4777",
        "created_at": "2025-12-16T13:36:26.313000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, today we trust the relay to ensure that the fee recipient is correct. we have specs here in the builder-specs to validate the bid. I believe this logic can live in the consensus specs today?",
        "created_at": "2025-12-16T14:16:17.456000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_2025-12-16_at_19.46.02.png",
                "content": "cf3323eb35d6bbeee7431c22f917fe0e2cc247032c557d5e4eb8c3bc06958448"
            }
        ]
    },
    {
        "author": "tomi0x",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@\u0026595685821026271242\u003e",
        "created_at": "2025-12-16T14:17:15.756000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is insane spam",
        "created_at": "2025-12-16T14:17:23.717000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "or i m just unaware that the EF has created a ticketing system for core-devs",
        "created_at": "2025-12-16T14:17:40.800000+00:00",
        "attachments": null
    },
    {
        "author": "tomi0x",
        "category": "Cross-layer",
        "parent": "",
        "content": "Xrazily insanne",
        "created_at": "2025-12-16T14:17:54.658000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "the current spec seems wrong to me, it states\n\u003e `fee_recipient` corresponds to the validator's most recently registered fee recipient address\nand then it asserts\n```python\nassert header.fee_recipient == fee_recipient\n```\nbut this will always fail since `fee_recipient` is the coinbase address which is not used nowadays to pay MEV rewards to proposer\n\n\u003e I believe this logic can live in the consensus specs today?\nwe have `process_execution_payload_bid` but that doesn't cover the fee recipient or gas limit checks based on previous preference from the proposer, might be fine to keep the http validation/processing on the builder-spec",
        "created_at": "2025-12-16T14:32:44.639000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah you are right, i missed this. if we do trusted payments, the fee recipient today will be the builders fee recipient and there is no way to check whether the payment tx is being done to the proposer with the bid",
        "created_at": "2025-12-16T14:34:27.289000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "ensuring that the fee recipient is right only matters when we do trustless payments i believe",
        "created_at": "2025-12-16T14:35:17.744000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "with trustless payments, it should be the proposer's fee recipient",
        "created_at": "2025-12-16T14:35:49.079000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "but I think you still want the `fee_recipient` to match the proposer fee recipient with trusted payments, I believe there was an idea already to verify the payment on the EL side if `execution_payment` is used, you still lose the payment for that block since you can only do that after the payload is revealed/processed but the builder could be blocked",
        "created_at": "2025-12-16T14:37:46.042000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "do you have more context on the idea to verify the payment on the EL side? how could we verfy the whether the payment is happening based on the jsut the bid?",
        "created_at": "2025-12-16T14:42:11.220000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "you can't do it with just the bid, but after processing the execution payload you could block the builder if the payment didn't happen",
        "created_at": "2025-12-16T14:43:09.253000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes that makes sense. but i think the problem is that, we assume that `execution_payment` means the payment will happen via the last tx. what if there is an off-chain settlement b/w a validator and a proposer here?",
        "created_at": "2025-12-16T14:43:50.327000+00:00",
        "attachments": null
    },
    {
        "author": "l03443",
        "category": "Cross-layer",
        "parent": "",
        "content": "could also be that a proposer has an incoming transfer in the same block for unrelated reasons. similar issue was discussed here: https://github.com/flashbots/mev-boost/issues/708",
        "created_at": "2025-12-16T14:45:40.451000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "will read this! thanks for pointing it out!",
        "created_at": "2025-12-16T14:49:10.628000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Cross-layer",
        "parent": "",
        "content": "coming back to that, I think it still makes sense with gloas to always set the proposer address as `fee_recipient` in the bid, it's just different today because it's the execution payload header where it needs to match the coinbase address",
        "created_at": "2025-12-16T14:54:06.208000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah that makes sense. i wonder if there is any value setting the `fee_recipient` in the bid if it is a pure trusted payment",
        "created_at": "2025-12-16T14:59:37.109000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "also had a question on this p2p validation for `execution_payload_bid`, do we want to enforce here that:\n`bid.parent_block_hash == state.latest_block_hash` and similar for `bid.parent_block_root`",
        "created_at": "2025-12-16T15:12:41.794000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_2025-12-16_at_20.41.48.png",
                "content": "495ad6ee45a806407db53bcd72486f98cb88506dab8f9f2ae4ecc78e35276bec"
            }
        ]
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "i would assume its undesirable for the `bid.parent_block_hash` and `bid.parent_block_root` to be some random blocks from the past in the fork choice store?",
        "created_at": "2025-12-16T15:15:07.909000+00:00",
        "attachments": null
    },
    {
        "author": "data.always",
        "category": "Cross-layer",
        "parent": "",
        "content": "user txs shifted back (or were rerouted) to the public mempool, but searchers etc. don't seem to have. need to look a bit deeper.",
        "created_at": "2025-12-16T15:45:54.230000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "no, the proposer's view of the head may be different than your current view of the head",
        "created_at": "2025-12-16T15:50:42.884000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "unsure if this PR makes sense: https://github.com/ethereum/consensus-specs/pull/4793 i tried to specify the conditions that a bid must fulfill before the proposer tries to include it in the block.",
        "created_at": "2025-12-16T16:04:21.149000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Can we make these optional? I am uncertain if these need to be specified, other than making sure that the bid will pass `process_execution_payload_bid`",
        "created_at": "2025-12-16T16:06:41.626000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "i think we can. in my mind, these checks are only run by the proposer who is building the block for the given slot. it is for them to know whether the bid is valid to be included in the block. i guess client implementations will have these checks while considering a `SignedExecutionPayloadBid`",
        "created_at": "2025-12-16T16:17:18.887000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "in my mind, its analogous to this check in the builder-specs: https://github.com/ethereum/builder-specs/blob/main/specs/bellatrix/validator.md?plain=1#L132  except we need to have it in the consensus-specs because `SignedExecutionPayloadBid` is defined in the consensus-specs",
        "created_at": "2025-12-16T16:19:14.611000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "I dont see this as something critical to have right now, but seems like a good to have to me",
        "created_at": "2025-12-16T16:19:54.177000+00:00",
        "attachments": null
    },
    {
        "author": "l03443",
        "category": "Cross-layer",
        "parent": "",
        "content": "probably because it was an unexpected event and short lived?",
        "created_at": "2025-12-16T21:16:06.024000+00:00",
        "attachments": null
    },
    {
        "author": "data.always",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes. and in the middle of the night.",
        "created_at": "2025-12-16T21:20:10.671000+00:00",
        "attachments": null
    }
]