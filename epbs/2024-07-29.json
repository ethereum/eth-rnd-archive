[
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This Friday's breakout, again I expect this to be very short, only got some feedback from \u003c@881905303011086387\u003e on the spec PR and we're revamping implementation on Prysm, hoping to hear other clients are working. https://github.com/ethereum/pm/issues/1120",
        "created_at": "2024-07-29T12:31:34.665000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hi! If there was interest in specifying slot auction ePBS, are there already notes or some early work on it somewhere? Feeling more and more like it would be a useful exercise to go through it in parallel, it's not really blocked by 7732 work and in fact benefits from it, so having the two done concurrently could be nice. I wouldn't expect the same maintainers to do both however (unless they want to), think it would be nice to find people interested in the slot auction version who wouldn't interfere too much with the progress on 7732.",
        "created_at": "2024-07-29T14:08:56.788000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm interested in this as well. Potuz has done some thinking here. I believe most of the complexity lies in understanding fork choice implications, particularly regarding payload equivocation. The rest of the mechanism seems well understood (no hard blocker), replacing the proposer committing to a header with committing to a builder ID",
        "created_at": "2024-07-29T14:17:14.409000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "hey \u003c@755590043632140352\u003e \u003c@363800010518822915\u003e have you guys thought about using a VDF instead of commit reveal",
        "created_at": "2024-07-29T16:27:58.162000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "not really, and \u003c@486501030046203915\u003e slot auctions would be a trivial change on top of 7732",
        "created_at": "2024-07-29T16:32:39.162000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "if you want I can open a separate PR based on 7732 to show the differences, It's so small that I think it's not worth the effort and instead we can switch to it if it becomes preferred",
        "created_at": "2024-07-29T16:34:59.540000+00:00",
        "attachments": null
    },
    {
        "author": "l_guy",
        "category": "Cross-layer",
        "parent": "",
        "content": "what are some primary difference between block and slot auctions? afaik for slot-auction, it is auctioned well in advance, right?",
        "created_at": "2024-07-29T16:35:03.967000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I haven't, there were some bad news about VDFs that were kinda considered for Ethereum before",
        "created_at": "2024-07-29T16:35:47.205000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "not that kind of auctions, jit slot auctions: that means simply not committing the hash in the bid, it's just as simple as that from 7732",
        "created_at": "2024-07-29T16:40:30.259000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "that version of slot auctions is essentially a 3 liner over 7732",
        "created_at": "2024-07-29T16:42:06.229000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm just not happy with some bad incentives for timing that it generates",
        "created_at": "2024-07-29T16:42:34.001000+00:00",
        "attachments": null
    },
    {
        "author": "l_guy",
        "category": "Cross-layer",
        "parent": "",
        "content": "got it, thanks!",
        "created_at": "2024-07-29T16:43:41.696000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think there is some new developments in VDF implementations let me ask around and see if there is new stuff",
        "created_at": "2024-07-29T16:46:15.743000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "also what would really be the benefit? the earlier availability of the payload right? but then how would you satisfy builder safety?",
        "created_at": "2024-07-29T16:49:31.730000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "it also seems to be inherently incompatible with slot auctions, I wouldn't know how to use VDFs for any of this",
        "created_at": "2024-07-29T16:50:01.061000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "the benefit is you don't have to deal with the not reveal games",
        "created_at": "2024-07-29T16:55:42.795000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "which IMO are a significant issue",
        "created_at": "2024-07-29T16:55:54.476000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://arxiv.org/abs/2301.12532",
        "created_at": "2024-07-29T16:56:02.367000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "problem is that the builder has the right to not reveal",
        "created_at": "2024-07-29T16:56:21.335000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah",
        "created_at": "2024-07-29T16:56:28.269000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "otherwise how do you guarantee it's safety",
        "created_at": "2024-07-29T16:56:31.580000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "just add a slot expiry option to txs",
        "created_at": "2024-07-29T16:57:07.387000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "so they are not valid after a certain slot",
        "created_at": "2024-07-29T16:57:18.560000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "that doesn't protect the builder",
        "created_at": "2024-07-29T16:57:26.370000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "the issue is if the block is weak, and has a commitment to a block that will be decrypted, the builder does not have any option to not show it's information",
        "created_at": "2024-07-29T16:58:09.547000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "protect the builder from what",
        "created_at": "2024-07-29T16:58:10.025000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah",
        "created_at": "2024-07-29T16:58:17.903000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "if the block gets reorged out then the proposer should get a missed slot penalty",
        "created_at": "2024-07-29T16:58:37.670000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "and the builder should not have to pay",
        "created_at": "2024-07-29T16:58:43.394000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, but the problem is that the payload is out there and everyone has seen information that was private to the builder",
        "created_at": "2024-07-29T16:59:09.577000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "in the current design is the builder supposed to monitor the status of the commitment by the leader?",
        "created_at": "2024-07-29T16:59:10.986000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and that he did not want to expose for free",
        "created_at": "2024-07-29T16:59:15.786000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, in the current design the builder knows before reveal time how likely the block is to be canonical",
        "created_at": "2024-07-29T16:59:42.644000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "how long is their option to reveal/",
        "created_at": "2024-07-29T17:00:03.301000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't expect any serious builder to like a system without this safety",
        "created_at": "2024-07-29T17:00:05.366000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "they have currently a minimum of 3 seconds to decide and a maximum of about 8",
        "created_at": "2024-07-29T17:00:43.016000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "those numbers are about to change",
        "created_at": "2024-07-29T17:01:01.877000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "8 seconds is a really long time",
        "created_at": "2024-07-29T17:01:44.774000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, that's why we will try to enforce it to be 3",
        "created_at": "2024-07-29T17:02:03.750000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://x.com/specialmech/status/1744494308466798953",
        "created_at": "2024-07-29T17:02:26.460000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "this block would have been missed",
        "created_at": "2024-07-29T17:02:40.491000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "no",
        "created_at": "2024-07-29T17:02:44.189000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "in the optimal non reveal",
        "created_at": "2024-07-29T17:02:46.371000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "because the time is dependent on the proposer, in real life the proposer will not send their block at 0 seconds",
        "created_at": "2024-07-29T17:03:05.257000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "look at the price",
        "created_at": "2024-07-29T17:03:14.394000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "will still send them late as today, attestations won't happen until 3 seconds",
        "created_at": "2024-07-29T17:03:19.196000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "",
        "created_at": "2024-07-29T17:03:23.394000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "GDWwWHdbEAAxQAT.png",
                "content": "f1c8a87667f87ec57d3de303be8b2d55356893a756709f37e0a517ab513ed84d"
            }
        ]
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "this block would've been missed",
        "created_at": "2024-07-29T17:03:43.587000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't see the relevance of these charts with regards to how the commit-reveal mechanism is",
        "created_at": "2024-07-29T17:03:46.351000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "...",
        "created_at": "2024-07-29T17:03:54.967000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "the commit-reveal mechanism gives the builder the option",
        "created_at": "2024-07-29T17:04:12.293000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "to not reveal",
        "created_at": "2024-07-29T17:04:14.694000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "if the price moves against them after they submit their block",
        "created_at": "2024-07-29T17:04:21.067000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "their trades are all underwater",
        "created_at": "2024-07-29T17:04:25.391000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, this is something that may happen",
        "created_at": "2024-07-29T17:05:02.926000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's discussed above",
        "created_at": "2024-07-29T17:05:07.304000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok i'm just showing an example block where they lost \u003e1m $",
        "created_at": "2024-07-29T17:05:37.480000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "and they wouldve not revealed",
        "created_at": "2024-07-29T17:05:43.050000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "if they lose more money than the bid then they will not reveal,",
        "created_at": "2024-07-29T17:05:43.377000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes this is not good",
        "created_at": "2024-07-29T17:05:52.993000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "bc we lose the whole execution block",
        "created_at": "2024-07-29T17:06:06.363000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "and if you play this out to its logical conclusion, they will trade in larger size than they do right now",
        "created_at": "2024-07-29T17:06:21.030000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "you can also trade on assymetric signals",
        "created_at": "2024-07-29T17:06:37.402000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, it would be good to know how often this is expected to happen and which solution is there if this is deemed to be an actual problem. \u003c@981249983196041218\u003e  posted something about this already.",
        "created_at": "2024-07-29T17:07:02.996000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is not a problem with slot auctions by the way",
        "created_at": "2024-07-29T17:08:23.165000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Seems to me if we can do slot auction then we really should go for it",
        "created_at": "2024-07-29T17:11:21.551000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I would love if the research team can quantify the problem of builders delaying their payload",
        "created_at": "2024-07-29T17:13:10.984000+00:00",
        "attachments": null
    },
    {
        "author": "soispoke",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah this was mentioned before but I agree having a time delta between the commit (to the execution payload content) and reveal time is an issue, would be nice to have some data to back it up. By definition we canâ€™t really know when builders decided not to trade but we can at least easily check:\n* The frequency at which MEV rewards exceed issuance rewards\n* Bid cancellations' max/median/average values over `3sec` might also be interesting\u2028\nAlso agree slot auctions solves it.",
        "created_at": "2024-07-29T17:30:56.794000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "We can look at the markouts and see which ones retraced",
        "created_at": "2024-07-29T17:31:48.169000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "One naive solution here is to move PTC deadline to 6s mark\n- 2s attestation\n- 4s builder reveal\n- 6s PTC\n\nMy current node is able to see most of attestations under 800ms",
        "created_at": "2024-07-29T17:51:48.917000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'd be against setting these numbers without hard evidence of forkchoice security. 2s attestation was not possible pre merge so that won't really happen. 2 seconds for attestation propagation also I think is not good for nodes outside the US and Europe. I agree that the reveal time to PTC time can be shortened as \u003c@486501030046203915\u003e has been requesting, but I don't think we can move much the others",
        "created_at": "2024-07-29T17:55:52.005000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e 2 seconds for attestation propagation also I think is not good for nodes outside the US and Europe\n\nThis constraint only applies to the winning builder though. For aggregation you still have 4s. For solo proposer, it's the same as today 4s cutoff\n\n\u003e 2s attestation was not possible pre merge\n\nI agree this point is likely the main blocker",
        "created_at": "2024-07-29T17:59:40.611000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "For slot auctions the critical time is also the time between reveal and PTC deadline imo, for the problem above that \u003c@135497428882292736\u003e was referring to it would be great if there's any incentive (besides less likely to be reorged) to reveal early but I don't think anyone knows how to do that",
        "created_at": "2024-07-29T18:02:18.190000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yea but timing game will just push that to the boundary which realistically reveal time == ptc deadline. What is worse is PTC dead line only votes for timeliness and block hash so builders will try to sequeeze down to the last ms",
        "created_at": "2024-07-29T18:04:38.398000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "Working on some timing game gadgets",
        "created_at": "2024-07-29T18:48:29.134000+00:00",
        "attachments": null
    },
    {
        "author": "maxr2415",
        "category": "Cross-layer",
        "parent": "",
        "content": "Can do some weird stuff with random end time and scaling penalties but it's kinda messy",
        "created_at": "2024-07-29T18:48:49.421000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The problem I see today with the current forkchoice is that there's no incentive to reorg a late Payload that didn't achieve PTC threshold. We won't really know how much of a problem this is until we get to test this and it's not trivial to tweak much",
        "created_at": "2024-07-29T21:11:01.166000+00:00",
        "attachments": null
    }
]