[
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "thx for the api specs!\nI've hooked up the new endpoints to dora. I've also seen teku is already emitting the new event - nice work üôÇ\n\nI'm not gonna push the latest dora changes to the eip7732-support branch yet to not break it. \nThe beacon api to load execution envelopes from seems not supported by teku/prysm yet. that breaks the finalization in dora as it repeatedly tries to fetch the missing information (canonical finalized blocks normally must have a execution payload)\nPlease ping me if any of you have implemented the api üôÇ",
        "created_at": "2025-02-09T00:02:26.507000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hmmm, we better schedule this to the agenda in the next call, I can quickly implement an endpoint, but the canonical checkpoint may not have a payload",
        "created_at": "2025-02-09T10:14:43.935000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hi \u003c@808969530608451584\u003e I added the API and refreshed the `ethpandaops/teku:epbs` image",
        "created_at": "2025-02-09T11:40:28.164000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah, probably 404 makes sense in that case, but let's add to agenda for discussion",
        "created_at": "2025-02-09T11:41:24.693000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm confused,  how is it possible that a canonical block does not have a payload?\nYou can't build on a parent block that does not have a payload, right? \nSo all blocks without payloads will be orphaned, which means they cannot be part of the canonical chain and can't be finalized too?",
        "created_at": "2025-02-09T12:16:41.607000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "No, that's a feature of ePBS, that the chain can continue without payloads and can even finalize without a single payload",
        "created_at": "2025-02-09T12:18:05.741000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh, interesting. \nBut why does your chain look like this when missing a lot of payloads?\nIf missing payloads are allowed, there shouldn't be any forks,  just \"empty\" blocks?",
        "created_at": "2025-02-09T12:42:11.082000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "That's a bug in prysm after justification: the chain was fine without payloads up until the new epoch, at this point the forkchoice bug makes any block that comes not be head so regardless of payload or not, the next proposer reorgs it",
        "created_at": "2025-02-09T12:44:27.203000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm focusing now in trying to understand the Teku/Prysm mismatch in the happy case before trying to finalize an unhappy one",
        "created_at": "2025-02-09T12:45:01.480000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Will get back to that forkchoice bug later on",
        "created_at": "2025-02-09T12:45:15.579000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "Aaah, got it üôÇ Thx for clarification. \nGonna rework the dora implementation then üòÑ\n\nOne question left:\nHow can I be sure that a missing payload is really missing and not just missing due to an RPC issue or so?\nIs there any indication in the next block that tells me if the parent had a payload?",
        "created_at": "2025-02-09T12:49:41.506000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ah yea, I can use the `parent_block_hash` of the `ExecutionPayloadHeader` for it üôÇ",
        "created_at": "2025-02-09T12:50:54.204000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "can we have \"orphaned payloads\" in beacon blocks? \nie. a payload that builds on top of the payload from 2 blocks ago, skipping the payload from the last block",
        "created_at": "2025-02-09T13:07:15.839000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://github.com/Consensys/teku/commit/7f6dd791f32106476470566a9937ae66581d5b4f#diff-91a59667fddaaf9ebf519e7e9c262c2b6192a9cb5a250e10ea3357aa5845ef47R46\nshould be `/eth/v1/...` üôÇ   works fine besides of that üëç",
        "created_at": "2025-02-09T14:36:15.055000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "Oh yes, I used getBlockV2 as template haha",
        "created_at": "2025-02-09T17:31:42.810000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "Will fix tomorrow",
        "created_at": "2025-02-09T17:31:47.479000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Sorry, sporadically reading. Yes precisely, that's how we check if the Payload was there. Notice that a Payload can be orphaned, this is the essentially new feature for Dora and Forky: that orphaned now can be both block and payload or just the Payload",
        "created_at": "2025-02-09T17:51:13.724000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Oh you already had answered this lol",
        "created_at": "2025-02-09T17:51:32.072000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "But no, this can't really happen: a Payload is committed to a beacon block and the beacon block is committed to a Payload",
        "created_at": "2025-02-09T17:52:15.315000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "So a Payload can only be based on the parent Payload of the beacon block",
        "created_at": "2025-02-09T17:52:40.123000+00:00",
        "attachments": null
    }
]