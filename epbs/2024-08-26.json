[
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hello, this Friday we have a breakout that may have some discussions about the free DA issue on block auctions again. \u003c@981249983196041218\u003e was going to also raise an issue regarding payload equivocations on slot auctions perhaps. Unfortunately I am giving an important lecture exactly at that time so I won't be able to attend. \u003c@363800010518822915\u003e (or anyone willing to) will you be there to host it?",
        "created_at": "2024-08-26T14:40:39.582000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'll be there. I can help hosting it",
        "created_at": "2024-08-26T14:51:42.659000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Just recording here something that has to appear in the spec and/or the PM issue, this seemed to be a confusion that at least two people had. \n When a beacon block is proposed, we check on gossipsub that the parent block root is known before processing but we do not require anything about execution. This aligns with optimistic sync today.  However the current behavior of `on_block` on forkchoice is that if the block is arriving and we haven't seen the parent block hash, then we will declare the block as invalid\n```\n    if is_parent_node_full(store, block):\n        assert block.parent_root in store.execution_payload_states  \u003c------ This assert fails\n        state = copy(store.execution_payload_states[block.parent_root])\n```\nIn order to deal graciously with this case block valdiation should be delayed in this case and we should request the `signed_payload_execution_envelope`  by RPC.",
        "created_at": "2024-08-26T16:01:16.881000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "We might also want to add that to the p2p spec. Like\n```\nThe `block.parent` is full (defined by `is_parent_node_full(block)`) and the execution payload `block.parent.header.block_hash` has been seen (via both gossip and non-gossip sources) (a client MAY queue blocks for processing once the execution payload envelope is retrieved).\n```",
        "created_at": "2024-08-26T16:16:44.076000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, probably that's the easiest as then you don't need to deal with this on the processing pipeline",
        "created_at": "2024-08-26T16:18:12.366000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and proably even more correct as i then you don't even need to gossip it if you haven't seen the parent hash",
        "created_at": "2024-08-26T16:18:46.106000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "in optimistic sync we gossip without validating, but we at least check that we've seen the parent",
        "created_at": "2024-08-26T16:19:07.140000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "agree, if you want to open a conseuss spec PR, I can approve it but we need hsiao wei to merge it : )",
        "created_at": "2024-08-26T16:26:46.402000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "I’ve been thinking about block proposal in epbs, I think it’s slower than today which I dont like. I wrote about it here: https://hackmd.io/@ttsao/epbs-block-proposal Feedback is welcome",
        "created_at": "2024-08-26T18:05:49.163000+00:00",
        "attachments": null
    }
]