[
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Re the builder payment quorum:\nRight now it requires **60% of total active balance**, thus, if we ever go below 60% participation, proposers wouldn't receive their payments anymore and would have no incentive to use the mechanism (everyone would switch to local building). Essentially, honest proposers would be penalized for network conditions beyond their control (=beacon block timing).\nI assume this is a bug and we should actually base that decision on the total active balance of validators that were actually active:\n\n```python\n# Instead of get_total_active_balance(state)\n  participating_balance = get_total_balance(\n      state,\n      get_unslashed_participating_indices(\n          state, TIMELY_TARGET_FLAG_INDEX, get_previous_epoch(state)\n      )\n  )\n```",
        "created_at": "2025-07-28T06:46:26.551000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Cross-layer",
        "parent": "",
        "content": "Re the builder payment quorum:",
        "created_at": "2025-07-28T07:07:26.568000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think you're missing the point of that threshold Toni: proposers get paid if the Payload is included, no matter the threshold, so they are still incentivized to use builders. Builders are also incentivized to produce their blocks cause they make money from them. The 60% only affects missing payloads",
        "created_at": "2025-07-28T10:55:21.241000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah, right. But this doesn't solve the underlying problem I described above. When we go below 60% participation, builders can bid as much as they got the balance for. Since we cannot reach the 60%, those max-bidding builders can just not reveal and thereby halt transaction processing.",
        "created_at": "2025-07-28T11:50:36.380000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "At \u003c60% participation, builders can execute the free option free of charge",
        "created_at": "2025-07-28T11:58:04.489000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, if builders decide not to reveal under 60% of participation they won't pay, correct.",
        "created_at": "2025-07-28T19:19:02.029000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Right, so we should fix it in the specs and don't use the total active balance but the balance of those with correct target votes in the prev epoch.",
        "created_at": "2025-07-28T19:20:33.629000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't think this needs to be fixed",
        "created_at": "2025-07-28T19:20:47.876000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "1. It's not different in this regard than any of the alternatives. \n2. Incentives are aligned so that proposers do not request bids from these builders if we are under 60% of participation.",
        "created_at": "2025-07-28T19:21:30.893000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Otherwise, under low participation, a builder could outbid others but then don't actually pay?",
        "created_at": "2025-07-28T19:21:47.743000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "today if the relay decides not to produce blocks they also don't need to pay, and we will simply start self-building",
        "created_at": "2025-07-28T19:22:04.297000+00:00",
        "attachments": null
    },
    {
        "author": "fradamt",
        "category": "Cross-layer",
        "parent": "",
        "content": "We can decide to change this but it doesn't make sense as a single fix, e.g. proposer boost is also an absolute value",
        "created_at": "2025-07-28T20:47:41.904000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "But also it doesn't make sense to lower security to honest builders here IMO if a block is weak it's weak.",
        "created_at": "2025-07-28T21:40:16.129000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think this is a bug to process withdrawals: https://github.com/ethereum/consensus-specs/pull/4470\nit  stood out while writing unit tests for that line",
        "created_at": "2025-07-28T22:38:24.907000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "here are a list of spec tests open today, and they are all green, I'll add more once potuz add signals for payload attestation DA or else conflicts will bruta\n\n1. [process header](https://github.com/ethereum/consensus-specs/pull/4457)\n2. [process payload](https://github.com/ethereum/consensus-specs/pull/4458)\n3. [process payload att](https://github.com/ethereum/consensus-specs/pull/4463)\n4. [process withdrawal](https://github.com/ethereum/consensus-specs/pull/4468)",
        "created_at": "2025-07-28T22:54:31.564000+00:00",
        "attachments": null
    }
]