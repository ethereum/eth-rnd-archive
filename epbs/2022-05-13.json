[
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@388610194608750595\u003e , was trying to get block  header, but got this: ```\nEph 0/2 0.052[NODE-A NODE-A API] error: Req req-1d produceBlockV2 error  Bad Request: Cannot get unknown payload\n\nError: Bad Request: Cannot get unknown payload\n\n    at HttpClient.request (/mnt/code/mintsugi/lodestar/packages/api/src/client/utils/httpClient.ts:109:15)\n    at runMicrotasks (\u003canonymous\u003e)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at HttpClient.json \n```",
        "created_at": "2022-05-13T13:24:42.794000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "do i have to issue an fcU with  to the relay on the engine endpoint with `payloadAttributes` before hand?",
        "created_at": "2022-05-13T13:27:02.328000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "relays don't have fcU?",
        "created_at": "2022-05-13T13:27:22.111000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "or not in their role as relays at least",
        "created_at": "2022-05-13T13:27:50.866000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes thats what i have inferred, but i haven't seen the mergemock log talking about any block production",
        "created_at": "2022-05-13T13:28:17.585000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "mergemock log: ```bash\nEL 359744: time=\"2022-05-13T18:46:59+05:30\" level=\"info\" msg=\"getHeader\" parentHash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" pubkey=\"0xb245d63d3f9d8ea1807a629fcb1b328cb4d542f35a3d5bc478be0df389dddd712fc4c816ba3fede9a96320ae6b24a7d8\" slot=\"2\"\ntime=\"2022-05-13T18:46:59+05:30\" level=\"warning\" msg=\"Cannot get unknown payload\" parentHash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" pubkey=\"0xb245d63d3f9d8ea1807a629fcb1b328cb4d542f35a3d5bc478be0df389dddd712fc4c816ba3fede9a96320ae6b24a7d8\" slot=\"2\"\ntime=\"2022-05-13T18:46:59+05:30\" level=\"info\" msg=\"http: POST /eth/v1/builder/validators 200\" durationMs=\"3\" method=\"POST\" path=\"/eth/v1/builder/validators\" status=\"200\"\n```",
        "created_at": "2022-05-13T13:29:05.800000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is the genesis block: ```typescript\n{\n  genesisBlock: {\n    baseFeePerGas: '0x7',\n    difficulty: '0x0',\n    extraData: '0x0000000000000000000000000000000000000000000000000000000000000000a94f5374fce5edbc8e2a8697c15331677e6ebf0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',\n    gasLimit: '0x1c9c380',\n    gasUsed: '0x0',\n    hash: '0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f',\n    logsBloom: '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',\n    miner: '0x0000000000000000000000000000000000000000',\n    mixHash: '0x0000000000000000000000000000000000000000000000000000000000000000',\n    nonce: '0x0000000000000042',\n    number: '0x0',\n    parentHash: '0x0000000000000000000000000000000000000000000000000000000000000000',\n    receiptsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',\n    sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',\n    size: '0x270',\n    stateRoot: '0xca3149fa9e37db08d1cd49c9061db1002ef1cd58db2210f2115c8c989b2bdf45',\n    timestamp: '0x0',\n    totalDifficulty: '0x0',\n    transactions: [],\n    transactionsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',\n    uncles: []\n  }\n}\n```",
        "created_at": "2022-05-13T13:31:17.538000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so parentHash is correctly pointing to it",
        "created_at": "2022-05-13T13:31:35.031000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "did you `submitBlindedBlock`? I can see a reasonable relay [don't know what `mergemock` does here] in general not acknowledging it otherwise",
        "created_at": "2022-05-13T13:31:54.384000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ummm no this is to get SignedBuilderBid to extract execution payload header",
        "created_at": "2022-05-13T13:32:42.474000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah, oops, indeed",
        "created_at": "2022-05-13T13:32:52.104000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, weird",
        "created_at": "2022-05-13T13:32:53.944000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is the first block  header being extracted out , so... ü§î ?",
        "created_at": "2022-05-13T13:33:48.743000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "is it possible that you requested the header before initial slot ended + small delta for adding the next block?",
        "created_at": "2022-05-13T13:34:55.150000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "no this is being requested on slot 1's productBlock call, which is the beginning of the slot",
        "created_at": "2022-05-13T13:37:49.877000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Using the mergemock relay in the flashbots `beta1` branch, i was able to use `getHeader` by using the blockhash from `eth_getBlockByNumber`, as explained here: https://github.com/flashbots/mev-boost/wiki#using-mergemock",
        "created_at": "2022-05-13T13:46:52.833000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok i was running my beacon node at 2 seconds per slot, but i changed it to standard 12 seconds still the same error",
        "created_at": "2022-05-13T13:47:12.084000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok , let me look at this",
        "created_at": "2022-05-13T13:47:20.178000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "```curl 127.0.0.1:28545/eth/v1/builder/header/1/PREVIOUS_BLOCKHASH/0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000``` (only blockhash is really required)",
        "created_at": "2022-05-13T13:50:22.632000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "isn't working ```\ncurl http://127.0.0.1:8661/eth/v1/builder/header/1/0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f/0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\nCannot get unknown payload\n```",
        "created_at": "2022-05-13T13:58:03.615000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "and this is genesis: ```typescript\ncurl --header 'Content-Type: application/json' --request POST 'http://127.0.0.1:8551' --data-raw '{\n\u003e     \"jsonrpc\":\"2.0\",\n\u003e     \"method\":\"eth_getBlockByNumber\",\n\u003e     \"params\":[\"latest\", false],\n\u003e     \"id\":1\n\u003e }'\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":{\"baseFeePerGas\":\"0x7\",\"difficulty\":\"0x0\",\"extraData\":\"0x0000000000000000000000000000000000000000000000000000000000000000a94f5374fce5edbc8e2a8697c15331677e6ebf0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"gasLimit\":\"0x1c9c380\",\"gasUsed\":\"0x0\",\"hash\":\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\",\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"miner\":\"0x0000000000000000000000000000000000000000\",\"mixHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"nonce\":\"0x0000000000000042\",\"number\":\"0x0\",\"parentHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"receiptsRoot\":\"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\"sha3Uncles\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"size\":\"0x270\",\"stateRoot\":\"0xca3149fa9e37db08d1cd49c9061db1002ef1cd58db2210f2115c8c989b2bdf45\",\"timestamp\":\"0x0\",\"totalDifficulty\":\"0x0\",\"transactions\":[],\"transactionsRoot\":\"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\"uncles\":[]}}\n```",
        "created_at": "2022-05-13T13:59:17.573000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "is `mergemock relay` spitting out `Forkchoice updated` logs?",
        "created_at": "2022-05-13T14:01:06.672000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "no",
        "created_at": "2022-05-13T14:01:13.490000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "```bash\ngo run . relay --listen-addr 127.0.0.1:8661 --engine-listen-addr 127.0.0.1:8551 --log.level debug\nINFO   [2022-05-13T19:31:38+05:30] Loaded JWT secret                             val=\"dc6457099f127cf0bac78de8b297df04951281909db4f58b43def7c7151e765d\"\nINFO   [2022-05-13T19:31:38+05:30] Persisted trie from memory database           fields.time=\"7.85¬µs\" gcnodes=\"0\" gcsize=\"0.00 B\" gctime=\"0s\" livenodes=\"1\" livesize=\"0.00 B\" nodes=\"1\" size=\"151.00 B\"\nINFO   [2022-05-13T19:31:38+05:30] Loaded most recent local header               age=\"53y1mo2w\" hash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" number=\"0\" td=\"0\"\nINFO   [2022-05-13T19:31:38+05:30] Loaded most recent local full block           age=\"53y1mo2w\" hash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" number=\"0\" td=\"0\"\nINFO   [2022-05-13T19:31:38+05:30] Loaded most recent local fast block           age=\"53y1mo2w\" hash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" number=\"0\" td=\"0\"\nWARNING[2022-05-13T19:31:38+05:30] Failed to load snapshot, regenerating         err=\"missing or corrupted snapshot\"\nINFO   [2022-05-13T19:31:38+05:30] Rebuilding state snapshot                    \nINFO   [2022-05-13T19:31:38+05:30] Resuming state snapshot generation            accounts=\"0\" elapsed=\"330.242¬µs\" root=\"0xca3149fa9e37db08d1cd49c9061db1002ef1cd58db2210f2115c8c989b2bdf45\" slots=\"0\" storage=\"0.00 B\"\nINFO   [2022-05-13T19:31:38+05:30] Generated state snapshot                      accounts=\"1\" elapsed=\"567.104¬µs\" slots=\"0\" storage=\"50.00 B\"\nINFO   [2022-05-13T19:31:38+05:30] Engine started                                listenAddr=\"127.0.0.1:8551\"\nINFO   [2022-05-13T19:31:38+05:30] Relay started                                 listenAddr=\"127.0.0.1:8661\"\n\n```",
        "created_at": "2022-05-13T14:02:21.108000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "do i have to issue it fcUs?",
        "created_at": "2022-05-13T14:03:13.408000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "you have to issue fcus to the engine",
        "created_at": "2022-05-13T14:03:21.285000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "right, yeah you have to first call FCU, my bad for missing that ^^",
        "created_at": "2022-05-13T14:03:48.696000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "first question i asked üòâ",
        "created_at": "2022-05-13T14:04:01.282000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "sorry, missed that üôÇ",
        "created_at": "2022-05-13T14:04:17.910000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok cool! should this have payload attributes  too? or just an normal fcU will be good?",
        "created_at": "2022-05-13T14:05:14.574000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "it should have payload attributes when it expects to propose (right now, the relay simply returns the same block as its engine will return)",
        "created_at": "2022-05-13T14:08:39.662000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok sounds good",
        "created_at": "2022-05-13T14:10:36.070000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "do we will have to issue fcU to relay in the  production relay as well?",
        "created_at": "2022-05-13T14:11:19.037000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok cool, yes now getting the block üëç  (though some other issue might be my side) ```bash\nfinalized=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" head=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" safe=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\"\nEL 395100: time=\"2022-05-13T19:47:12+05:30\" level=\"info\" msg=\"Preparing new payload\" attributes=\"\u0026{1652451432 0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f 0x0000000000000000000000000000000000000000}\" payload_id=\"[0 0 0 0 0 0 0 1]\"\nEL 395100: time=\"2022-05-13T19:47:12+05:30\" level=\"info\" msg=\"getHeader\" parentHash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" pubkey=\"0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d\" slot=\"1\"\nEL 395100: time=\"2022-05-13T19:47:12+05:30\" level=\"info\" msg=\"Consensus client retrieved prepared payload header\" parentHash=\"0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f\" pubkey=\"0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d\" slot=\"1\"\nEL 395100: 2022/05/13 19:47:12 http: superfluous response.WriteHeader call from main.(*responseWriter).WriteHeader (utils.go:34)\nEL 395100: time=\"2022-05-13T19:47:12+05:30\" level=\"info\" msg=\"http: GET /eth/v1/builder/header/1/0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f/0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d 200\" durationMs=\"1\" method=\"GET\" path=\"/eth/v1/builder/header/1/0xccaf66b50e791f95d4b50bae4de28af9396824e7c29f99aeba19414fdf72673f/0xaec922bd7a9b7b1dc21993133b586b0c3041c1e2e04b513e862227b9d7aecaf9444222f7e78282a449622ffc6278915d\" status=\"200\"\n```",
        "created_at": "2022-05-13T14:19:48.590000+00:00",
        "attachments": []
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "thanks for the help üôè",
        "created_at": "2022-05-13T14:20:06.140000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "no, right now it‚Äôs just a simplification for testing that the relay has its engine driven by the tester",
        "created_at": "2022-05-13T14:42:26.086000+00:00",
        "attachments": []
    }
]