[
    {
        "author": "dv8s",
        "category": "Cross-layer",
        "parent": "",
        "content": "Does anyone know if the current design w/ mev-boost allows the builders to possibly influence attestations (inclusion itself and inclusion distance)? Say there are only a few builders (which is expected due to closed source nature, competitiveness, hardware requirements(??) to finding/realizing MEV) --- so easier to collude --- could they somehow influence attestation inclusion and therefore influence consensus? Has this been discussed at all? I mean, I'm new to the design, so I could be totally wrong. Seems like the part where attestations are included really should be a proposer thing and not a builder thing, but the way the mev-boost seems to be designed now, I think builder controls that too and it is part of the blind-signing the proposer is required to do before the full block is emitted.",
        "created_at": "2022-06-23T00:32:27.479000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "not attestations, the consensus client prepares the whole block except the execution payload, the builder only includes the execution payload",
        "created_at": "2022-06-23T00:34:59.425000+00:00",
        "attachments": []
    },
    {
        "author": "dv8s",
        "category": "Cross-layer",
        "parent": "",
        "content": "ahhhhhh ok that makes more sense. thanks",
        "created_at": "2022-06-23T00:35:20.939000+00:00",
        "attachments": []
    },
    {
        "author": "dv8s",
        "category": "Cross-layer",
        "parent": "",
        "content": "hmm but I thought the beacon block header was signed https://github.com/flashbots/mev-boost#request-sequence after it is sent back from the builder https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#beaconblockheader which contains (other than slot and validator index) only merkle roots.  One of those being body root which includes attestations?",
        "created_at": "2022-06-23T00:39:23.504000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The proposer only needs the merkle root of the `ExecutionPayload` object to compute the HTR of the full block he's proposing, so he gets this Root from the builder, signs a blind block that has everything in the CL side verified by himself and only has the Merkle Root of the execution payload. The builder fills in the execution payload and the relay reassembles the full block and broadcasts it. If there is any change in the CL side of the block, the signature will be invalid.",
        "created_at": "2022-06-23T00:42:02.473000+00:00",
        "attachments": []
    },
    {
        "author": "dv8s",
        "category": "Cross-layer",
        "parent": "",
        "content": "Okay thanks. that makes sense. I think what happened is I got fooled because the picture has it where proposer \"getHeader\" from the builder and I thought that was the full block header (and not just the root of execution payload). What you're saying makes perfect sense and would work. Diagram is just keeping it simple.",
        "created_at": "2022-06-23T00:52:20.698000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah builders are silo'd to just the transaction vector with weak control over some other knobs in the execution payload -- a lot of the work we want to do on the `builder-specs` (https://github.com/ethereum/builder-specs) is to ensure that it becomes very hard for builders to abuse the degrees of freedom they do have\n\nseparately, it is worth pointing out you can imagine both on-chain and off-chain channels for attestation collusion and MEV does sometimes subsidize such a thing. i'd say this last point is a bit of an open-ended research question around how we best minimize this attack vector",
        "created_at": "2022-06-23T01:09:11.205000+00:00",
        "attachments": []
    },
    {
        "author": "dv8s",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@539495253418180618\u003e thanks! will take a look",
        "created_at": "2022-06-23T01:10:43.447000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Working on the first version of our Relay API spec, and wanted to share the draft here to get some more eyes on it. Feedback is be much appreciated! üôè \nhttps://flashbots.notion.site/Relay-API-Spec-5fb0819366954962bc02e81cb33840f5",
        "created_at": "2022-06-23T10:06:21.127000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "Probably, \"Block received from builder\" message in data transparency API would benefit from including blind block message from builder (with payload replaced with its root or header) including builder's signature. Then produced block could be attributed to a certain builder without the need of leaking builder's signature to CL",
        "created_at": "2022-06-23T10:18:13.174000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Good point! Although the original builder signature is over the body with transactions, so there'd be no way to verify the builder signature in the event entry, unless the block was mined and tx become visible ü§î maybe that's still valuable though",
        "created_at": "2022-06-23T10:21:02.741000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "If the signature is over a merkle root, then you may replace transactions with its root in the same way as proposers signs a blind block which can be further unblind bu replacing the root with a transaction list.",
        "created_at": "2022-06-23T10:23:19.310000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "Btw, does relay hold a registry of builders where public key is attributed to IP addresses or something like that? Cause one builder may induce a sybil attack by masking under multiple identities and sending slightly different but similar payloads from multiple IP addresses - not sure that this attack is beneficial though",
        "created_at": "2022-06-23T10:24:41.707000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "There may need to be some pubkey whitelisting to prevent spam ü§î Simulating blocks is expensive for the relay too, if anyone can submit as many blocks as they want it would be an easy DoS vector.",
        "created_at": "2022-06-23T10:26:09.612000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Perhaps high/low prio keys could also work, like at the current Flashbots relay",
        "created_at": "2022-06-23T10:26:46.275000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "Interesting how could this registration process moderated. Should depend on relay I guess",
        "created_at": "2022-06-23T10:32:14.825000+00:00",
        "attachments": []
    }
]