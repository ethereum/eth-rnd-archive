[
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Thanks \u003c@504202741933932544\u003e and \u003c@641548687813902336\u003e, working now in getting our branch usable but will review them afterwards",
        "created_at": "2025-02-06T08:40:48.910000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "wait how do you do that? I need to change my config file to grab a specific image? I am now working at home cause my office desktop never manages to run kurtosis",
        "created_at": "2025-02-06T12:13:12.864000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "I've added a couple of fixes,  but the latest `eip7732-support` image should work now ðŸ™‚",
        "created_at": "2025-02-06T12:14:56.141000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "so I need to use that explicitly?",
        "created_at": "2025-02-06T13:35:29.645000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's the default image when setting a eip7732_fork_epoch in the network_params.\nso you don't need to explicitly set it in your config.  But also don't set it to the master image or anything else ðŸ˜‰\n\nthis is my kt config (prysm image is probably outdated by now):\n```\nparticipants:\n  - el_type: geth\n    el_image: ethpandaops/geth:prague-devnet-6-c070db6\n    cl_type: prysm\n    cl_image: ethpandaops/prysm-beacon-chain:epbs\n    vc_image: ethpandaops/prysm-validator:epbs\n    count: 2\nnetwork_params:\n  electra_fork_epoch: 1\n  eip7732_fork_epoch: 2\n  min_validator_withdrawability_delay: 1\n  shard_committee_period: 1\n  churn_limit_quotient: 16\n  seconds_per_slot: 6\n#snooper_enabled: true\nglobal_log_level: info\nadditional_services:\n  - dora\n```\n\nyou might need to add `--image-download always` to your `kurtosis run` command to avoid using outdated cached images.",
        "created_at": "2025-02-06T13:52:28.615000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "to double check:  \nif dora shows \"Powered by ethpandaops/dora | git-3c911be\" in the footer,  you're running the latest epbs image",
        "created_at": "2025-02-06T13:55:28.218000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ahh thanks, that's probably the issue with the cached image",
        "created_at": "2025-02-06T14:07:36.616000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e you guys have implemented the VC changes since I see it on the config?",
        "created_at": "2025-02-06T14:12:49.317000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "what do you mean vc changes?",
        "created_at": "2025-02-06T14:14:04.122000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "I mean the remote apis to reveal the execution payload and send a signed one",
        "created_at": "2025-02-06T14:15:28.132000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "like web3 signer or something like this? no",
        "created_at": "2025-02-06T14:26:24.760000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "we are locally producing the block and payload",
        "created_at": "2025-02-06T14:26:40.420000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and signing the envelope locally",
        "created_at": "2025-02-06T14:26:47.848000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "we're finalizing now in the happy case, all payloads are present. No blobs. Will test payloads missing and then blobs and then give you an image",
        "created_at": "2025-02-06T14:27:45.374000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "already implemented a pending queue for payloads but I'm not sure if it's working",
        "created_at": "2025-02-06T14:28:10.572000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "same here, but we have a clear interface separation between the validator and the beacon node, so at the moment we can run ePBS only as both BN and VC in one process",
        "created_at": "2025-02-06T14:32:06.056000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "awesome!",
        "created_at": "2025-02-06T14:32:43.642000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't understand here, we have this separation too, the validator is getting the payload from the engine with the same engine method as always",
        "created_at": "2025-02-06T14:33:28.433000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and then making the envelope",
        "created_at": "2025-02-06T14:33:35.451000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "well, sorry \u003c@641548687813902336\u003e what we do is an endpoint on the beacon, that returns a payload envelope for the validator to sign",
        "created_at": "2025-02-06T14:36:34.409000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "we have a `GetExecutionPayloadEnvelope` that the validator calls and then signs",
        "created_at": "2025-02-06T14:36:49.868000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "I assume you have the same for the bid and also endpoints for publishing?",
        "created_at": "2025-02-06T14:37:28.123000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "we do have endpoints for publishing the envelope, but we are not broadcasting bids yet",
        "created_at": "2025-02-06T14:38:04.675000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "got it, we don't have these endpoints yet, so can only run in a single BN process, but fine for an interop",
        "created_at": "2025-02-06T14:39:31.977000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "as long as you give me images we're good, I'm pretty sure we'llbe completely broken the first try. I want to at least make sure that we don't break if the payload is missing.",
        "created_at": "2025-02-06T14:40:20.925000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "But I don't care about blobs and withdrawals yet",
        "created_at": "2025-02-06T14:40:34.122000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "we can run with BLS addresses and no txs for a while",
        "created_at": "2025-02-06T14:41:08.342000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "will create an image after the ACD",
        "created_at": "2025-02-06T14:43:40.242000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "found another bug, it doesn't show finalization on 7732 epochs",
        "created_at": "2025-02-06T14:57:45.035000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "the latest prysm branch will finalize if you run on mainnet parameters with 16384 validators (can't be less)",
        "created_at": "2025-02-06T14:58:33.013000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I haven't dared yet to run minimal, I may try lol",
        "created_at": "2025-02-06T15:00:03.451000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "testing now with some missing payloads",
        "created_at": "2025-02-06T15:00:17.309000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "I have some bug on the fork when running kurtosis, so will fix those before sharing the image",
        "created_at": "2025-02-06T16:22:50.386000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "just in case you guys hit the same, found a very cool bug in which we justified an electra epoch and the justified checkpoint was empty,  the FCU calls were failing cause we were sending an inexistent hash (the hash of the header included in the beacon block, that never made it to the EL)",
        "created_at": "2025-02-06T16:29:19.243000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm forking at the justified checkpoint ðŸ™‚",
        "created_at": "2025-02-06T16:35:52.736000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "when I miss a lot of payloads",
        "created_at": "2025-02-06T16:36:28.063000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "fo.jpg",
                "content": "0d5818fd9d7a3920d9d4d26c4f1c7c8463cbf35cf74532cf44722a3b461b737f"
            }
        ]
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah made some changes to forkchoice will need to check, by the way this view is awesome \u003c@808969530608451584\u003e",
        "created_at": "2025-02-06T16:38:14.473000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "our bug was funny, when we produce a bid with value of 0, we reject it ourselves when validating it, fixing",
        "created_at": "2025-02-06T17:15:17.842000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah nice, we are producing bids with zero value",
        "created_at": "2025-02-06T17:15:54.494000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e do you know if I can get a forkchoice dump from the node running in kurtosis?",
        "created_at": "2025-02-06T17:20:13.178000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "uhm, what is a forkchoice dump? ðŸ˜…  how would you get that when running the client locally?",
        "created_at": "2025-02-06T17:21:28.142000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'd call a beacon API endpoint with curl",
        "created_at": "2025-02-06T17:21:45.576000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "forky support for ePBS would be super major",
        "created_at": "2025-02-06T17:22:17.639000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah yea,  that's easy ðŸ™‚\n`kurtosis enclave inspect \u003cenclave-name\u003e`  gives you all the ports that clients expose.\nfind the rpc port for prysm and call the api locally,  each port is mapped to a local port on your machine",
        "created_at": "2025-02-06T17:23:36.281000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ahh very nice thanks!",
        "created_at": "2025-02-06T17:24:00.164000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e getting these errors on dora, is this Teku issue?\n\n```\ntime=\"2025-02-06T18:00:27Z\" level=error msg=\"failed processing head 70 (0x3b7f5ea8ecfa13a9155625916c3f2dac347c48cb5287d8b154152d8160955084): failed to parse consensus version\\nfailed to parse consensus version\\nunrecognised data version \\\"eip7732\\\"\" client=2-geth-teku service=cl-indexer\n```",
        "created_at": "2025-02-06T18:03:38.094000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "hahaha, that's great ðŸ˜„   yea, I had used `eip7732` as block version before,  but prysm uses `epbs`, so I changed it ðŸ˜„\nwe need to agree on one  (cc \u003c@755590043632140352\u003e)",
        "created_at": "2025-02-06T18:04:39.660000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh it's our bad then, bettter to use eip7732 where do you want them to be fixed?",
        "created_at": "2025-02-06T18:31:58.964000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "It's the version reported via the beacon API.\neg. in the getBlock response: https://ethereum.github.io/beacon-APIs/#/Beacon/getBlockV2",
        "created_at": "2025-02-06T18:33:43.432000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah I think I can fix that to be eip7732 that's probably the best",
        "created_at": "2025-02-06T18:34:42.090000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "should be an one line fix: https://github.com/prysmaticlabs/prysm/blob/2ef1e712de199a807de2778d513b6dcf8c44f622/runtime/version/fork.go#L26\nchange that from `epbs` to `eip7732` then we are good to go",
        "created_at": "2025-02-06T18:36:57.274000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "probably want it `eip7732` without the dash right?",
        "created_at": "2025-02-06T18:37:33.161000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e \u003c@363800010518822915\u003e I suppose you can try `ethpandaops/teku:epbs-8ad5132` and see what breaks. It finalizes on Kurtosis with only teku nodes.",
        "created_at": "2025-02-06T19:39:49.914000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "nice! which el are you pairing with?",
        "created_at": "2025-02-06T19:42:25.660000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@641548687813902336\u003e can you post your kurtosis conf?",
        "created_at": "2025-02-06T19:44:23.809000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "```\nparticipants:\n  - el_type: geth\n    el_image: ethpandaops/geth:prague-devnet-6-c070db6\n    cl_type: teku\n    cl_image: ethpandaops/teku:epbs-8ad5132\n    count: 2\nnetwork_params:\n  electra_fork_epoch: 1\n  eip7732_fork_epoch: 2\n  min_validator_withdrawability_delay: 1\n  shard_committee_period: 1\n  churn_limit_quotient: 16\n  seconds_per_slot: 12\n  num_validator_keys_per_node: 8192    \nsnooper_enabled: true\nglobal_log_level: info\nadditional_services:\n  - dora\n```",
        "created_at": "2025-02-06T19:47:28.114000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "hmm for some reason I can't run that one like this\n```\nparticipants:\n  # Prysm\n  - cl_type: prysm\n    cl_image: prysm-bn-custom-image:latest\n    vc_image: prysm-vc-custom-image:latest\n    count: 1\n    cl_max_mem: 8192\n    cl_extra_params:\n      - --minimum-peers-per-subnet=1\n      - --log-format=json\n\n  # Teku\n  - cl_type: teku\n    cl_image: ethpandaops/teku:epbs-8ad5132\n    count: 1\n    cl_max_mem: 8192\n    cl_extra_params:\n\n\nglobal_log_level: debug\n\nnetwork_params:\n  electra_fork_epoch: 1\n  eip7732_fork_epoch: 2\n  min_validator_withdrawability_delay: 1\n  shard_committee_period: 1\n  seconds_per_slot: 12\n  churn_limit_quotient: 16\n  preregistered_validator_count: 16384\n  num_validator_keys_per_node: 8192 # replace this with validaor count per node\n\nadditional_services:\n  - dora\n  - prometheus_grafana\n#  - spamoor_blob\n#  - tx_spammer\n#  - assertoor\n```",
        "created_at": "2025-02-06T19:48:42.128000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah probably the empty extra params",
        "created_at": "2025-02-06T19:49:26.318000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok running, will see if it finalizes in 4 epochs",
        "created_at": "2025-02-06T19:49:47.086000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "or if it breaks entirely in the first slot",
        "created_at": "2025-02-06T19:50:13.883000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "lol",
        "created_at": "2025-02-06T19:50:14.735000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "ohh wait by the way this is with `slot` and without `payload_withheld` in the envelope",
        "created_at": "2025-02-06T19:50:23.450000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm already at 23Gb memory before starting",
        "created_at": "2025-02-06T19:50:35.727000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yep same order as we said last time",
        "created_at": "2025-02-06T19:50:49.309000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "also right?",
        "created_at": "2025-02-06T19:50:52.593000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh lol",
        "created_at": "2025-02-06T19:52:06.985000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "prysm can't run with one node",
        "created_at": "2025-02-06T19:52:16.699000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "running 16K keys, let's see if it holds",
        "created_at": "2025-02-06T19:53:36.298000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I need to buy a machine",
        "created_at": "2025-02-06T19:56:20.867000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "just out of curiosity,  why does it need exactly 16k keys? ðŸ˜„",
        "created_at": "2025-02-06T19:57:34.710000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ok, definitely not reading Teku logs live!",
        "created_at": "2025-02-06T20:01:55.907000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's a stily bound on the number of committees and members per committee to be able to extract 512 PTC members. To guarantee 512 members in the way we do them now, you need to have at least 512 * 32  validators",
        "created_at": "2025-02-06T20:03:26.131000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "we could introduce a different method to select the PTC, or allow the members to be repeated, but this is the simplest form and it's guaranteed on mainnet so I didn't bother",
        "created_at": "2025-02-06T20:04:24.769000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@641548687813902336\u003e Teku should come with a banner for epileptic people not to run with debug logs",
        "created_at": "2025-02-06T20:04:55.798000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@641548687813902336\u003e Prysm can't validate the signature on the first block \n```\n[2025-02-06 20:07:05]  DEBUG sync: Could not validate beacon block error=signature did not verify graffiti=3-geth-teku TK8ad51326GE0ad0966c proposerIndex=10508 slot=65 version=7\n```",
        "created_at": "2025-02-06T20:07:38.053000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah we're rejecting all your blocks",
        "created_at": "2025-02-06T20:08:28.975000+00:00",
        "attachments": null
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "interesting hmmm, I will have a look tomorrow",
        "created_at": "2025-02-06T20:08:54.572000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think it's something with the withdfrawals",
        "created_at": "2025-02-06T20:09:04.668000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah no not that",
        "created_at": "2025-02-06T20:10:22.328000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "maybe we can generate ssz_static spec tests for eip7732 and run them beforehand",
        "created_at": "2025-02-06T20:10:30.402000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "ssz format seems fine, as dora can parse ssz encoded blocks from both clients",
        "created_at": "2025-02-06T20:10:57.930000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "good point",
        "created_at": "2025-02-06T20:11:13.118000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah we could but Hsiao Wei never approved my CL spec PR to merge and now is up to \u003c@592004585506340885\u003e... I spent several full days to get that one green, not rebasing that PR at all until other clients implement the spec",
        "created_at": "2025-02-06T20:11:24.009000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "my dora instance does not see any block from Teku",
        "created_at": "2025-02-06T20:11:49.461000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "only Prysm-geth appearing",
        "created_at": "2025-02-06T20:11:59.176000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Cross-layer",
        "parent": "",
        "content": "I've changed the block version label ~20mins ago. Does prysm also use \"eip7732\" already?",
        "created_at": "2025-02-06T20:13:06.308000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok, I got a printout of the block that seems to be invalid",
        "created_at": "2025-02-06T20:13:10.188000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "no but I didn't update the dora image",
        "created_at": "2025-02-06T20:13:24.390000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ahh but Teku does",
        "created_at": "2025-02-06T20:13:31.402000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "that's the reason",
        "created_at": "2025-02-06T20:13:33.256000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I get \n```\n2025-02-06 20:06:53.069 DEBUG - Checking if block SlotAndBlockRoot{slot=59, blockRoot=0xa9b64f3c6bb3bc854c87ef58409f3a4c8ba6f58ee788ac27c61dd8e0929fee8d} is in historic block roots \n```\nAnd then a huge list from the state",
        "created_at": "2025-02-06T20:15:14.720000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ok, not comes the actual fun part of debugging, have been waiting since Capella to get back to work in something interesting ðŸ˜„",
        "created_at": "2025-02-06T20:16:36.460000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "```\n2025-02-06 20:06:53.614 DEBUG - Block 0xf34af799105e18276788d67691ae4d19e25bd4253cab750e67721c9b4695e6b2:64 arrived at 584 ms into slot 64, timeliness limit is 4000 ms. result: true\n```\nThis is the block, but the HTR is different, we log this:\n```\n[2025-02-06 20:06:53]  DEBUG blockchain: Synced new block block=0xaae0b920... chainServiceProcessedTime=0.072396s dataAvailabilityWaitedTime=0.000000s deposits=0 epoch=2 finalizedEpoch=0 finalizedRoot=0x00000000... justifiedEpoch=0 justifiedRoot=0x00000000...\nparentHash=0x51e29d14... parentRoot=0x6676ec0d... sinceSlotStartTime=0.656771s slot=64 slotInEpoch=0 version=epbs\n```\nSo it seems that \u003c@363800010518822915\u003e is right that SSZ static tests would be useful, we're hashing the block differently",
        "created_at": "2025-02-06T20:20:29.682000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "given that \u003c@504202741933932544\u003e said that the proofs depth were different than what we had computed, perhaps we have a different layout for the block, let's schedule a quick sync tomorrow",
        "created_at": "2025-02-06T20:21:34.728000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "when you guys are up",
        "created_at": "2025-02-06T20:21:38.955000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is Teku saying that the block is invalid",
        "created_at": "2025-02-06T20:22:19.952000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "c823909db4b6a8c3c4c02f8784bbf23b1f3b7cdf0b3afab5a2b4b0b4b13a7978"
            }
        ]
    },
    {
        "author": "stefanbratanov",
        "category": "Cross-layer",
        "parent": "",
        "content": "ðŸ˜‚ it does get overwhelming to be fair",
        "created_at": "2025-02-06T20:50:50.720000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Cross-layer",
        "parent": "",
        "content": "I've skimmed your PR (https://github.com/ethereum/consensus-specs/pull/3854) and it looks reasonable to me. I'll look into the conflicts with dev later.",
        "created_at": "2025-02-06T21:14:51.039000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "My objective for the end of this week: finalize the happy case with Teku. \nFor the end of next week: agree on both your PRs and have a functioning RPC to request pending payload envelopes when an incoming block is based on full and we have seen the parent block but not the Payload",
        "created_at": "2025-02-06T22:24:41.551000+00:00",
        "attachments": null
    }
]