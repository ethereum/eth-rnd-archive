[
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "There is no particular reason to require the Ubuntu upgrade, we just noticed that the prebuilt binaries are leading to this GLIBC error. Not sure why that's suddenly the case, they're built with goreleaser (https://github.com/flashbots/mev-boost/blob/main/.goreleaser-linux_windows.yaml) but this hasn't changed from previous versions (other than using Go 1.20).\n\nYou can still run it on previous Ubuntu versions by installing with `go install github.com/flashbots/mev-boost@latest` or building from source, or running the docker images.\n\n\u003c@388751025789468672\u003e mev-boost includes geth as dependency for some of the utils, which - as you mention - requires CGO",
        "created_at": "2023-03-15T08:06:07.295000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Added more information to the release notes. Not sure if there's a way to make the prebuilt binaries work with older Ubuntu versions.",
        "created_at": "2023-03-15T08:23:04.117000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Cross-layer",
        "parent": "",
        "content": "```\ngo build -tags osusergo,netgo -ldflags='-extldflags=-static -w -s' -trimpath\nldd mev-boost\n        not a dynamic executable\n```\n\nShould be possible to put those parameters in to the releaser for linux.",
        "created_at": "2023-03-15T08:35:17.700000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't think goreleaser is the issue, the error comes up based on which host machine the binaries are built in. If you run goreleaser on an older distro(20.04), it should work as it did before.",
        "created_at": "2023-03-15T08:54:07.235000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh i see! then it's probably the ubuntu version that's set here: https://github.com/flashbots/mev-boost/blob/main/.github/workflows/release.yaml#L84-L85",
        "created_at": "2023-03-15T11:12:04.646000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "You could probably pin it on 20.04 in that case :), would solve the issue",
        "created_at": "2023-03-15T11:14:59.517000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "correct, these flags are working to produce a statically linked binary",
        "created_at": "2023-03-15T11:16:14.155000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "actually producing a static binary seems even better",
        "created_at": "2023-03-15T11:16:24.842000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "can confirm, these work",
        "created_at": "2023-03-15T11:16:58.830000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "now the question is, how to get the tags and ldflags into the goreleaser setup at https://github.com/flashbots/mev-boost/blob/main/.goreleaser-linux_windows.yaml",
        "created_at": "2023-03-15T11:17:51.099000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "what's the `-w` ldflag doing?",
        "created_at": "2023-03-15T11:24:11.074000+00:00",
        "attachments": null
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://github.com/flashbots/mev-boost/pull/473",
        "created_at": "2023-03-15T11:53:26.644000+00:00",
        "attachments": null
    }
]