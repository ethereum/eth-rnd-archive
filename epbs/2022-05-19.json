[
    {
        "author": "tbenr",
        "category": "Cross-layer",
        "parent": "",
        "content": "good news from Teku. We did a successful first test with `mergemock`! Producing blocks!\na couple of things:\n1. we hit the signature validation error in handleGetPayload, so we commented it out to make it.\n2. we havent yet tested the ValidatorRegistration flow",
        "created_at": "2022-05-19T10:54:24.009000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "AFAICT `mergemock` doesn't really have a `ValidatorRegistration` flow? https://github.com/protolambda/mergemock/blob/master/relay.go#L196",
        "created_at": "2022-05-19T10:55:32.881000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "It will sanity-check the message it receives, and just do nothing.",
        "created_at": "2022-05-19T10:56:01.303000+00:00",
        "attachments": []
    },
    {
        "author": "tbenr",
        "category": "Cross-layer",
        "parent": "",
        "content": "fair enough, they simply consider the last validator that has called getHeader. https://github.com/protolambda/mergemock/blob/master/relay.go#L136\nBut I want to do that sanity check ðŸ™‚",
        "created_at": "2022-05-19T11:11:08.434000+00:00",
        "attachments": []
    },
    {
        "author": "tbenr",
        "category": "Cross-layer",
        "parent": "",
        "content": "just a double-check: is the signature validation in `handleGetPayload` still have issues on the `mergemock` side? or has been fixed and we have a problem on `teku` side?",
        "created_at": "2022-05-19T11:19:34.643000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "still has a problem on the `mergemock` side: https://github.com/protolambda/mergemock/issues/41",
        "created_at": "2022-05-19T11:20:21.172000+00:00",
        "attachments": []
    },
    {
        "author": "metachris_",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah there's still a few remaining BLS signing and domain issues. \u003c@543900561460822016\u003e and \u003c@861612909854588938\u003e are independently working on fixing them atm. once this is resolved, we can all implement the finalised signing and verifications logic. (the specific domain is also still in discussion, but that's a semi-independent issue https://github.com/ethereum/builder-specs/pull/15 + https://github.com/ethereum/builder-specs/issues/14)",
        "created_at": "2022-05-19T11:33:08.004000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I got the flow as far as the `handleGetPayload` issue last night, looked at the code, and found that there weren't any more significant checks that I could see. I guess I could just disable the BLS verification, but that's a major part of what I want to verify working. Hopefully I'll have Nimbus integration soon after that's fixed",
        "created_at": "2022-05-19T11:34:45.753000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "(it checks parent hash too, and then considers the block correct enough to go with)",
        "created_at": "2022-05-19T11:35:11.635000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "Sorry about the hashing issues everyone. I'm still working on it - was able to get the HTRs to match, but now the json marshaling has been broken while trying to get the types right. Probably will have this resolved today, you can track here: https://github.com/protolambda/mergemock/pull/43",
        "created_at": "2022-05-19T14:46:19.974000+00:00",
        "attachments": []
    }
]