[
    {
        "author": "julianma_",
        "category": "Cross-layer",
        "parent": "",
        "content": "Made a post with the same argument I presented in the 9th breakout call on Trusted Advantage in Slot Auction ePBS\n\nhttps://ethresear.ch/t/trusted-advantage-in-slot-auction-epbs/20456",
        "created_at": "2024-09-19T11:55:47.561000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "Can we make a PR for this? I'm happy to do it.",
        "created_at": "2024-09-19T12:38:28.223000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is not so easy, the markdown is trivial, I can open it right now if you want. The problem is all the tests in my follow up PR",
        "created_at": "2024-09-19T12:40:30.029000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "If you just want the markdown change I can open up one after ACD, or glad if you do it ðŸ™‚",
        "created_at": "2024-09-19T12:40:55.722000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I can review it",
        "created_at": "2024-09-19T12:41:01.401000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "ping Mark, do you want to do it or do you want me to open it? I can do it in about 1 hour after I'm free from a call",
        "created_at": "2024-09-19T15:56:27.959000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'll let you do it then. Thanks ðŸ˜Š",
        "created_at": "2024-09-19T16:15:54.134000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Here's a quick shot at it, will read it when the call ends https://github.com/ethereum/consensus-specs/pull/3932",
        "created_at": "2024-09-19T16:36:08.251000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ahh crap",
        "created_at": "2024-09-19T16:38:36.062000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is not possible",
        "created_at": "2024-09-19T16:38:39.493000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "lol",
        "created_at": "2024-09-19T16:38:41.227000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "There's a bad bug with this, will close that PR and add it to the agenda",
        "created_at": "2024-09-19T16:38:54.216000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think we'll have to stick with the current design, the fix for this is convoluted",
        "created_at": "2024-09-19T16:40:05.867000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "so probably we need this \u003c@641548687813902336\u003e ðŸ™‚",
        "created_at": "2024-09-19T16:40:55.218000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Here's the problem, there's no really nice way of solving this on block auctions\n- Withdrawals are part of the payload hash\n- Payload hash is committed in the payload\n- Beacon block is not known at the time the payload is built and committed\n- Some withdrawals may be invalidated by the beacon block\n\nSo either we make some withdrawals a no-op, or we keep as we are. There are some other options, all are a little uglier.",
        "created_at": "2024-09-19T17:05:04.692000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm looking at this and I can't find anything wrong. Could you clarify what you mean by `Beacon block is not known at the time the payload is built and committed` and why is this an issue? When builders submit bids today, the builders also dont know the beacon block that will commit to the bid anyway. Do you mean there's less time now because withdrawals is consumed on the consensus statge gives more time for builder vs withdrawals is consumed on the execution stage",
        "created_at": "2024-09-19T19:17:23.861000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm sorry I don't understand the question",
        "created_at": "2024-09-19T19:18:37.366000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "Sorry, I dont understand why we mean by `Beacon block is not known at the time the payload is built and committed` Say the setup is\n- `n-1` : builder wants to submit a bid on top of head `a`, it calls `get_exepcted_wd(state_a)`, then submit a bid `b` based on head `a`\n- `n, t=0`, proposer includes `b`'s payload hash in block\n- `n, t=6`, builder reveals payload that commits to `b`, which should contains the withdrawal `get_exepcted_wd(state_a)`\n\nCurious what specific edge case you are thinking about?",
        "created_at": "2024-09-19T19:21:42.959000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm taking about why you can't move withdrawals to the Payload",
        "created_at": "2024-09-19T23:08:47.021000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "If you don't want to charge the process withdrawals function which is the whole purpose, the withdrawals have to be on top of the post state of the block",
        "created_at": "2024-09-19T23:10:15.501000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Not the pre state",
        "created_at": "2024-09-19T23:10:21.426000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "Sorry, I see it now. It just clicked to me that builder will need to commit to consensus pre state but when nodes process withdrawals it will have to use consensus's post state and things can easily go wrong there",
        "created_at": "2024-09-19T23:19:54.718000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "(irrelevant to the discussion: dont think this is an issue for slot auction)",
        "created_at": "2024-09-19T23:20:57.955000+00:00",
        "attachments": null
    }
]