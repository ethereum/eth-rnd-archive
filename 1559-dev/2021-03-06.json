[
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Can we add a minimum gas_target of 1024? In the extremely unrealistic scenario that for some reason we get a gas target below 1024, we are then stuck, because we `gas_target // 1024` is then 0, so we are unable to change the gas target.",
        "created_at": "2021-03-06T14:17:45.237000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "At the fork block, I should use the gas limit of the previous block and use that as gas target?",
        "created_at": "2021-03-06T14:18:38.478000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There is a `min(...)` that prevents getting stuck.",
        "created_at": "2021-03-06T14:18:40.710000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes.",
        "created_at": "2021-03-06T14:18:48.124000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In fact, it is the same field in the block header, just renamed colloquially.  ðŸ™‚",
        "created_at": "2021-03-06T14:19:04.960000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah I assumed that was the case",
        "created_at": "2021-03-06T14:19:11.828000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't see this `min`? It is only in the transactions, not at block level",
        "created_at": "2021-03-06T14:19:25.599000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sorry, I meant `max`.",
        "created_at": "2021-03-06T14:19:33.969000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\nexpected_base_fee_per_gas = max(parent_base_fee_per_gas - base_fee_per_gas_delta, 0)\n```",
        "created_at": "2021-03-06T14:19:53.059000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is on the way down.",
        "created_at": "2021-03-06T14:20:00.766000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah right",
        "created_at": "2021-03-06T14:20:08.080000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\nbase_fee_per_gas_delta = max(parent_base_fee_per_gas * gas_used_delta // parent_gas_target // BASE_FEE_MAX_CHANGE_DENOMINATOR, 1)\n```",
        "created_at": "2021-03-06T14:20:08.490000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is on the way up.",
        "created_at": "2021-03-06T14:20:10.765000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks ðŸ˜„",
        "created_at": "2021-03-06T14:20:14.345000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It ensures that we can always increment by *at least* one, even if we are below 8.",
        "created_at": "2021-03-06T14:20:23.200000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, sorry.  You were talking about the gas target...",
        "created_at": "2021-03-06T14:21:07.838000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ðŸ¤”",
        "created_at": "2021-03-06T14:21:10.119000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Currently, the gas target formula should be unchanged from before 1559.",
        "created_at": "2021-03-06T14:21:22.185000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So I *think* we already have this problem right now?",
        "created_at": "2021-03-06T14:21:28.848000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Okay maybe it is actually the case. We can set a gas target of 1023 right? Then we are stuck",
        "created_at": "2021-03-06T14:21:43.910000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Because of that, I would suggest someone create a separate EIP for it.",
        "created_at": "2021-03-06T14:21:57.463000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "FWIW, a gas target below 10,500 will result in zero transactions being able to go through.",
        "created_at": "2021-03-06T14:22:21.388000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Presumably, before that point the core devs would step in and push out a hard fork.  The gas target doesn't change too fast.",
        "created_at": "2021-03-06T14:22:40.568000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It is an extremely unrealistic situation",
        "created_at": "2021-03-06T14:22:53.722000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Maybe there is actually a minimum gas limit, I'll check",
        "created_at": "2021-03-06T14:23:16.389000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah yes there is. The minimum gas limit is 5k, so there won't be a problem (otherwise we'd have this problem as well as in the miners adjusting the gas limit)",
        "created_at": "2021-03-06T14:24:05.095000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2021-03-06T14:25:28.428000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "i4yZIIEAEiUCEJkJiqkGGlSREBIkAEiAARIAKlRYDEVGmRpn6IABEgAkSACBCBCkmAxFSFDCtNiggQASJABIgAESgtAv8DhPkxot.png",
                "content": "36d01df40fe013c79fb0e7bcdedf2768e36839349c97d460814f490386eb57eb"
            }
        ]
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, someone should probably update the 1559 spec to make it clear that the block size code shouldn't change.",
        "created_at": "2021-03-06T14:52:51.243000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "PRs welcome.  ðŸ˜¬",
        "created_at": "2021-03-06T14:52:59.569000+00:00",
        "attachments": null
    }
]