[
    {
        "author": "mvis.79",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've noticed that under EIP-1559, replacement txs need to have both `maxPriorityFeePerGas` (minerTip) *and* `maxFeePerGas` (feeCap) be 10% greater.  I was wondering, why both?  In my application currently, I occasionally issue one or more *speed-up* txs with a higher gasPrice, especially when there is a spike in tx volume, but I only go so high, based on what the tx is worth to me.  This is all automated in code.\n\nAfter London HF, what I was planning to do was set the feeCap to represent the most I am willing to pay, and set the minerTip to some reasonable value.  I guess we all hope there won't be as many gas spikes, but I can imagine I still might want to  issue speed-up txs, which I would do by increasing the minerTip.  Why would I need to increase  the feeCap as well, assuming it was initially set with enough headroom above the baseFee?",
        "created_at": "2021-07-23T05:25:19.872000+00:00",
        "attachments": []
    },
    {
        "author": "perama",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So the situation is that you submitted a tx and is has not been included yet. The likely scenario is that you unluckily met a series of 6 sequential full (~30mil gas) blocks. Now your max fee is below the base fee, which is double what it was.\n\nSo if the max fee you set before is too low, and needs to be higher. Also, there is a moderate chance the mempool will forget your transaction, so maybe you don't need to raise the max fee relative to your previous transaction.\n\nIf it is still in mempool, raising it by 10% is not really a useful requirement in that situation. It is more useful to prevent spamming by micro-raises of the max fee.\n\nI think the heuristic that is being applied with \"raise both\" rule, is that it is 1) simple 2) likely that you are competing (raise priority fee), and 3) likely that the basefee is rising (raise max fee)\n\nMaybe the raiseBoth it prevents a vector present in the raiseEither situation where you can: alternate raise max lower priority, then lower max and raise priority etc, bypassing the check to effectively get a micro raise included every second time \n\nJust some thoughts",
        "created_at": "2021-07-23T06:54:21.914000+00:00",
        "attachments": []
    },
    {
        "author": "mvis.79",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!743395542196944977\u003e  Thanks for responding.  In general, I think there might be a good argument to reject replacements where only the max-fee is increased, but I think replacements where only the miner-tip is increased should be allowed, as they have a strong utility from the user's point of view (either faster execution, or possibly competing with other txs in the mempool), and they really don't fit into the 'spam' category since they actually cost the user more money.  It's certainly not free.\n\n\u003e *So the situation is that you submitted a tx and is has not been included yet. The likely scenario is that you unluckily met a series of 6 sequential full (~30mil gas) blocks. Now your max fee is below the base fee, which is double what it was.*\n\nI'm not sure what you are referring to with *'6 blocks'*, and max fee being '*double*' the base fee.  With EIP-1559, there is no requirement that the max fee be 2x the baseFee. Maybe you're thinking of the defaults that Geth uses when someone submits a legacy transaction?  \n\n\u003e *So if the max fee you set before is too low, and needs to be higher.*\n\nAs I mentioned before, I know ahead of time how much the transaction is worth to me, and how high I want to go with the base fee, so I set the max fee with the first submission.  If I later want to increase the miner tip, I don't want to also have to increase the max fee.  It doesn't make any sense, assuming that there is still enough headroom between the (probably rising) base fee and my original max fee.",
        "created_at": "2021-07-23T18:36:32.398000+00:00",
        "attachments": []
    },
    {
        "author": "mvis.79",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e *I think the heuristic that is being applied with \"raise both\" rule, is that it is 1) simple 2) likely that you are competing (raise priority fee), and 3) likely that the basefee is rising (raise max fee)*\n\nRegarding 1), I think what I am proposing would be just as simple.  The current logic is: reject if miner tip increase is insufficient OR max fee increase is insufficient.\n\nWhat I propose is almost identical in terms of logical expression complexity: reject if minerTip increase is insufficient OR max fee is lower.\n\nOr, to reverse the logic (just to make sure I've got it right): accept a replacement if minerTip increase is sufficient AND max fee has not decreased.\n\nI'm not sure what you're saying with 2) and 3).  Could you explain a bit more?\n\n\u003e *Maybe the raiseBoth it prevents a vector present in the raiseEither situation where you can: alternate raise max lower priority, then lower max and raise priority etc, bypassing the check to effectively get a micro raise included every second time* \n\nI am certainly not advocating that it should ever be possible to lower either the miner tip or the max fee.  It was never possible to lower the gasPrice in the past.",
        "created_at": "2021-07-23T18:38:13.206000+00:00",
        "attachments": []
    }
]