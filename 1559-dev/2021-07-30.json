[
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2021-07-30T16:21:21.678000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "SGV5IGFsbCBJ4oCZbSB0cnlpbmcgdG8gbG9hZCBhIGNvbmZpcm1lZCBFSVAxNTU5IEdvZXJsaSB0eCBpbnRvIGV0aGVycy5qcyAgYW5kIGFtIGhhdmluZyBzb21lIGlzc3Vlc+KApgoKVGhpcyBpcyB0aGUgdHg6IGh0dHBzOi8vZ29lcmxpLmV0aGVyc2Nhbi5pby90eC8weGQxMDIxMGVhOGRiYmQ0YTVhY2IxNDM5NGQ3MTdjMzQwNDFmYzg5NTY0ZWFkYzE2NzAyNDMxOGJiMDJkMDMzNjQKCldoZW4gSSBmZXRjaCBpdCB2aWEgUlBDIEkgZ2V0IHRoaXMgcGF5bG9hZDoKCnsKICAianNvbnJwYyI6ICIyLjAiLAogICJpZCI6IDAsCiAgInJlc3VsdCI6IHsKICAgICJhY2Nlc3NMaXN0IjogW10sCiAgICAiYmxvY2tIYXNoIjogIjB4YzgwODdiOGQ2ZTNlZDY2MzhiYzM5NDc2ZGE1YmUyNzkzYmM5NDBmMDMzYmY3ODFlNTVjY2MxNzMxOThmM2E5ZSIsCiAgICAiYmxvY2tOdW1iZXIiOiAiMHg0ZjhmZTciLAogICAgImNoYWluSWQiOiAiMHg1IiwKICAgICJmcm9tIjogIjB4MjRmZmI4Yzk3Y2U0NDNmOGQzMjY1YmEzMzE2ZGVmY2ZjMDdjNjU5YyIsCiAgICAiZ2FzIjogIjB4ZjQyNDEiLAogICAgImdhc1ByaWNlIjogIjB4Yjc5ZTc1YzkiLAogICAgImhhc2giOiAiMHhkMTAyMTBlYThkYmJkNGE1YWNiMTQzOTRkNzE3YzM0MDQxZmM4OTU2NGVhZGMxNjcwMjQzMThiYjAyZDAzMzY0IiwKICAgICJpbnB1dCI6ICIweGRjYjQ2MDAwNjAwMDNiNTM3Zjc1NjVhOTgyZTE5ZGU1N2UzY2Y1MzgwMDBiMzk5MGNhZmE3MDMyOTdhZDFjM2Y4OWI0MzRlYmVkYmNlN2UzMWI2M2UzMTY0NDZjNTI2MDdkNjNlMzE2NDQ4YzUzNjA0ZTYzZTMxNjQ0OGQ1MzYwNmU2M2UzMTY0NDhlNTM2MDc4NjNlMzE2NDQ4ZjUzNjA1OTYzZTMxNjQ0OTA1MzYwNzA2M2UzMTY0NDkxNTM2MDlhNjNlMzE2NDQ5MjUzNjA1YjYzZTMxNjQ0OTM1MzYwYjQ2M2UzMTY0NDk0NTM2MGM1NjNlMzE2NDQ5NTUzNjAiLAogICAgIm1heEZlZVBlckdhcyI6ICIweGVlNmIyODAwIiwKICAgICJtYXhQcmlvcml0eUZlZVBlckdhcyI6ICIweGIyZDA1ZTAwIiwKICAgICJub25jZSI6ICIweGRjOCIsCiAgICAiciI6ICIweGQxOTc3NDdiZGM3ZjkxYThiNjQzMWIwOWZhMGQ0OGI2YjFiNTdkNDc0YjgxMGViYTA4MWRhZmYwMjk1NWRhZWQiLAogICAgInMiOiAiMHg1MmVhNWFlZmVhN2I5YTA2YTdkZjBlZWZhZTFjMDY0MGEzZmE1N2M4NThiZDYyZTI2MGU2YmI5ODBmN2FkNGQyIiwKICAgICJ0byI6IG51bGwsCiAgICAidHJhbnNhY3Rpb25JbmRleCI6ICIweDFiIiwKICAgICJ0eXBlIjogIjB4MiIsCiAgICAidiI6ICIweDEiLAogICAgInZhbHVlIjogIjB4MCIKICB9Cn0KCkNsZWFuaW5nIHRoZSBmaWVsZHMgSSBsb2FkIHRoZSBmb2xsb3dpbmc6Cgo+IGV0aGVyc1R4ID0gcmVxdWlyZSgnQGV0aGVyc3Byb2plY3QvdHJhbnNhY3Rpb25zJykKPiBldGhlcnNUeC5zZXJpYWxpemUoewouLi4gICAgICJjaGFpbklkIjogNSwKLi4uICAgICAiZ2FzIjogMTAwMDAwMSwKLi4uICAgICAiZ2FzUHJpY2UiOiAzMDgwNjE1MzY5LAouLi4gICAgICJkYXRhIjogIjB4ZGNiNDYwMDA2MDAwM2I1MzdmNzU2NWE5ODJlMTlkZTU3ZTNjZjUzODAwMGIzOTkwY2FmYTcwMzI5N2FkMWMzZjg5YjQzNGViZWRiY2U3ZTMxYjYzZTMxNjQ0NmM1MjYwN2Q2M2UzMTY0NDhjNTM2MDRlNjNlMzE2NDQ4ZDUzNjA2ZTYzZTMxNjQ0OGU1MzYwNzg2M2UzMTY0NDhmNTM2MDU5NjNlMzE2NDQ5MDUzNjA3MDYzZTMxNjQ0OTE1MzYwOWE2M2UzMTY0NDkyNTM2MDViNjNlMzE2NDQ5MzUzNjBiNDYzZTMxNjQ0OTQ1MzYwYzU2M2UzMTY0NDk1NTM2MCIsCi4uLiAgICAgIm1heEZlZVBlckdhcyI6IDQwMDAwMDAwMDAsCi4uLiAgICAgIm1heFByaW9yaXR5RmVlUGVyR2FzIjogMzAwMDAwMDAwMCwKLi4uICAgICAibm9uY2UiOiAzNTI4LAouLi4gICAgICJyIjogIjB4ZDE5Nzc0N2JkYzdmOTFhOGI2NDMxYjA5ZmEwZDQ4YjZiMWI1N2Q0NzRiODEwZWJhMDgxZGFmZjAyOTU1ZGFlZCIsCi4uLiAgICAgInMiOiAiMHg1MmVhNWFlZmVhN2I5YTA2YTdkZjBlZWZhZTFjMDY0MGEzZmE1N2M4NThiZDYyZTI2MGU2YmI5ODBmN2FkNGQyIiwKLi4uICAgICAidG8iOiBudWxsLAouLi4gICAgICJ0eXBlIjogMiwKLi4uICAgICAidiI6IDEsCi4uLiAgICAgInZhbHVlIjogMAouLi4gfSkKCldoaWNoIHRocm93cyBhbiBlcnJvcjoKCkVycm9yOiBtaXNtYXRjaCBFSVAtMTU1OSBnYXNQcmljZSAhPSBtYXhGZWVQZXJHYXMgKGFyZ3VtZW50PSJ0eCIsIHZhbHVlPXsiZ2FzUHJpY2UiOnsidHlwZSI6IkJpZ051bWJlciIsImhleCI6IjB4Yjc5ZTc1YzkifSwibWF4RmVlUGVyR2FzIjp7InR5cGUiOiJCaWdOdW1iZXIiLCJoZXgiOiIweGVlNmIyODAwIn19LCBjb2RlPUlOVkFMSURfQVJHVU1FTlQsIHZlcnNpb249dHJhbnNhY3Rpb25zLzUuNC4wKQoKV2hlbiBsb29raW5nIGF0IHRoZSBldGhlcnMuanMgc291cmNlLCBFSVAxNTU5IHNlcmlhbGl6YXRpb24gZG9lc27igJl0IGV2ZW4gdXNlIGdhc1ByaWNlIDogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVycy1pby9ldGhlcnMuanMvYmxvYi9tYXN0ZXIvcGFja2FnZXMvdHJhbnNhY3Rpb25zL3NyYy50cy9pbmRleC50cyNMMTY2CgpTbyB0aGF04oCZcyB0aGUgZmlyc3QgcXVlc3Rpb27igKYgd2h5IHdvdWxkIHRoaXMgdHJhbnNhY3Rpb24gc2hvdyBnYXNQcmljZSB3aGVuIHRoYXQgZmllbGQgaXNu4oCZdCBpbmNsdWRlZCBpbiB0aGUgUkxQIHBheWxvYWQ/IEFuZCB3aHkgaXMgaXQgZGlmZmVyZW50IHRoYW4gYm90aCBtYXhGZWVQZXJHYXMgYW5kIG1heFByaW9yaXR5RmVlUGVyR2FzCgpPa2F5IHNvIHdlaXJkLCB3ZWxsIGlmIEkgc3RyaXAgb3V0IGdhc1ByaWNlIEkgY2FuIGxvYWQgaXQgaW50byBldGhlcnM6Cgo+IGV0aGVyc1R4LnNlcmlhbGl6ZSh7Ci4uLiAgICAgImNoYWluSWQiOiA1LAouLi4gICAgICJnYXMiOiAxMDAwMDAxLAouLi4gICAgIC8vImdhc1ByaWNlIjogMzA4MDYxNTM2OSwKLi4uICAgICAiZGF0YSI6ICIweGRjYjQ2MDAwNjAwMDNiNTM3Zjc1NjVhOTgyZTE5ZGU1N2UzY2Y1MzgwMDBiMzk5MGNhZmE3MDMyOTdhZDFjM2Y4OWI0MzRlYmVkYmNlN2UzMWI2M2UzMTY0NDZjNTI2MDdkNjNlMzE2NDQ4YzUzNjA0ZTYzZTMxNjQ0OGQ1MzYwNmU2M2UzMTY0NDhlNTM2MDc4NjNlMzE2NDQ4ZjUzNjA1OTYzZTMxNjQ0OTA1MzYwNzA2M2UzMTY0NDkxNTM2MDlhNjNlMzE2NDQ5MjUzNjA1YjYzZTMxNjQ0OTM1MzYwYjQ2M2UzMTY0NDk0NTM2MGM1NjNlMzE2NDQ5NTUzNjAiLAouLi4gICAgICJtYXhGZWVQZXJHYXMiOiA0MDAwMDAwMDAwLAouLi4gICAgICJtYXhQcmlvcml0eUZlZVBlckdhcyI6IDMwMDAwMDAwMDAsCi4uLiAgICAgIm5vbmNlIjogMzUyOCwKLi4uICAgICAiciI6ICIweGQxOTc3NDdiZGM3ZjkxYThiNjQzMWIwOWZhMGQ0OGI2YjFiNTdkNDc0YjgxMGViYTA4MWRhZmYwMjk1NWRhZWQiLAouLi4gICAgICJzIjogIjB4NTJlYTVhZWZlYTdiOWEwNmE3ZGYwZWVmYWUxYzA2NDBhM2ZhNTdjODU4YmQ2MmUyNjBlNmJiOTgwZjdhZDRkMiIsCi4uLiAgICAgInRvIjogbnVsbCwKLi4uICAgICAidHlwZSI6IDIsCi4uLiAgICAgInYiOiAxLAouLi4gICAgICJ2YWx1ZSI6IDAKLi4uIH0pCicweDAyZjg5NDA1ODIwZGM4ODRiMmQwNWUwMDg0ZWU2YjI4MDA4MDgwODBiODgwZGNiNDYwMDA2MDAwM2I1MzdmNzU2NWE5ODJlMTlkZTU3ZTNjZjUzODAwMGIzOTkwY2FmYTcwMzI5N2FkMWMzZjg5YjQzNGViZWRiY2U3ZTMxYjYzZTMxNjQ0NmM1MjYwN2Q2M2UzMTY0NDhjNTM2MDRlNjNlMzE2NDQ4ZDUzNjA2ZTYzZTMxNjQ0OGU1MzYwNzg2M2UzMTY0NDhmNTM2MDU5NjNlMzE2NDQ5MDUzNjA3MDYzZTMxNjQ0OTE1MzYwOWE2M2UzMTY0NDkyNTM2MDViNjNlMzE2NDQ5MzUzNjBiNDYzZTMxNjQ0OTQ1MzYwYzU2M2UzMTY0NDk1NTM2MGMwJwoKQnV0IHRoZSBoYXNoIGRvZXNu4oCZdCBtYXRjaDsKCj4ga2VjY2FrMjU2KCcweDAyZjg5NDA1ODIwZGM4ODRiMmQwNWUwMDg0ZWU2YjI4MDA4MDgwODBiODgwZGNiNDYwMDA2MDAwM2I1MzdmNzU2NWE5ODJlMTlkZTU3ZTNjZjUzODAwMGIzOTkwY2FmYTcwMzI5N2FkMWMzZjg5YjQzNGViZWRiY2U3ZTMxYjYzZTMxNjQ0NmM1MjYwN2Q2M2UzMTY0NDhjNTM2MDRlNjNlMzE2NDQ4ZDUzNjA2ZTYzZTMxNjQ0OGU1MzYwNzg2M2UzMTY0NDhmNTM2MDU5NjNlMzE2NDQ5MDUzNjA3MDYzZTMxNjQ0OTE1MzYwOWE2M2UzMTY0NDkyNTM2MDViNjNlMzE2NDQ5MzUzNjBiNDYzZTMxNjQ0OTQ1MzYwYzU2M2UzMTY0NDk1NTM2MGMwJykKJzc5OTBhZGUzZTBjNzllYWNjMTI1Y2NmN2JiZWRiYWM4N2FjZGRkOTA5OTI0Y2ExMDM3OTc5ODJhNDhiOWIwYWInCgpUaGUgY29ycmVjdCBoYXNoIChwZXIgbmV0d29yayBjb25maXJtYXRpb24pIGlzOiAweGQxMDIxMGVhOGRiYmQ0YTVhY2IxNDM5NGQ3MTdjMzQwNDFmYzg5NTY0ZWFkYzE2NzAyNDMxOGJiMDJkMDMzNjQKCkNhbiBhbnlvbmUgaGVscCByZWFzb24gYWJvdXQgdGhpcz8="
            }
        ]
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "^ Also if anyone has an example of a raw tx payload that has been confirmed on network that would be super helpful.",
        "created_at": "2021-07-30T16:24:18.076000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I get back the same hash as etherscan using my own 1559 parsing library: https://play.golang.org/p/Wu2pIKR0gom\n\nIf I try to use my lib to decode your result from `.serialize` above I get this error: https://play.golang.org/p/YZrnefU-IGn\n\n`panic: could not decode RLP components: expected 12 items but only received 9`\n\nSo I think ethers `.serialize` is returning the wrong result, not sure which fields are missing but my first guess would be that it's returning an unsigned tx w/o the `r,s,v` fields.",
        "created_at": "2021-07-30T16:58:14+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If I decode the RLP (after stripping the 02 type header) I get back these 9 fields: https://play.golang.org/p/QAGAjLqmezZ. gotta run to a meeting but hope that helps",
        "created_at": "2021-07-30T17:00:47.481000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oops! I was misusing the `serialize` API on my console. Here's the proper serialization:\n\n```\n\u003e ethersTx.serialize({\n...     \"chainId\": 5,\n...     \"gasLimit\": 1000001,\n...     //\"gasPrice\": 3080615369,\n...     \"data\": \"0xdcb4600060003b537f7565a982e19de57e3cf538000b3990cafa703297ad1c3f89b434ebedbce7e31b63e316446c52607d63e316448c53604e63e316448d53606e63e316448e53607863e316448f53605963e316449053607063e316449153609a63e316449253605b63e31644935360b463e31644945360c563e31644955360\",\n...     \"maxFeePerGas\": 4000000000,\n...     \"maxPriorityFeePerGas\": 3000000000,\n...     \"nonce\": 3528,\n...     \"to\": null,\n...     \"type\": 2,\n...     \"value\": 0\n... }, {\n...     \"r\": \"0xd197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daed\",\n...     \"s\": \"0x52ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2\",\n...     \"v\": 1,\n... })\n'0x02f8da05820dc884b2d05e0084ee6b2800830f42418080b880dcb4600060003b537f7565a982e19de57e3cf538000b3990cafa703297ad1c3f89b434ebedbce7e31b63e316446c52607d63e316448c53604e63e316448d53606e63e316448e53607863e316448f53605963e316449053607063e316449153609a63e316449253605b63e31644935360b463e31644945360c563e31644955360c001a0d197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daeda052ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2'\n```\n\nWhich still yields the wrong hash:\n\n```\n\u003e keccak256('0x02f8da05820dc884b2d05e0084ee6b2800830f42418080b880dcb4600060003b537f7565a982e19de57e3cf538000b3990cafa703297ad1c3f89b434ebedbce7e31b63e316446c52607d63e316448c53604e63e316448d53606e63e316448e53607863e316448f53605963e316449053607063e316449153609a63e316449253605b63e31644935360b463e31644945360c563e31644955360c001a0d197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daeda052ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2')\n'67ea7b6442cb05ae2373d9b4440d05a39678f80f47b8d2519b8180ab5981ca19'\n```",
        "created_at": "2021-07-30T17:04:38.347000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It looks like my hash from the above updated code ^ matches yours, but this is still the wrong hash right?",
        "created_at": "2021-07-30T17:11:41.507000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "maybe your `keccak256` function expects bytes rather than a hex-encoded string?",
        "created_at": "2021-07-30T18:04:55.778000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Just running through a few scenarios since I'm now not sure what the actual hash should be. It does look like the raw payload is correct: https://goerli.etherscan.io/getRawTx?tx=0xd10210ea8dbbd4a5acb14394d717c34041fc89564eadc167024318bb02d03364\n\nThe sender should be: `0x24ffb8c97ce443f8d3265ba3316defcfc07c659c`\n\nBut I can't seem to ecrecover that from either hash using the r,s,v I got back from RPC. I'm assuming `v` should be `28` here since `recoveryParam=1`, but idk\n\n```\n\u003e ethUtil.publicToAddress(ethUtil.ecrecover(Buffer.from('67ea7b6442cb05ae2373d9b4440d05a39678f80f47b8d2519b8180ab5981ca19', 'hex'),  28, Buffer.from('d197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daed', 'hex'), Buffer.from('52ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2', 'hex'), 5)).toString('hex')\n'9273e34365dc5148a25485d3e26478702bc26bf6'\n\u003e ethUtil.publicToAddress(ethUtil.ecrecover(Buffer.from('d10210ea8dbbd4a5acb14394d717c34041fc89564eadc167024318bb02d03364', 'hex'),  28, Buffer.from('d197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daed', 'hex'), Buffer.from('52ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2', 'hex'), 5)).toString('hex')\n'3ad9b6e0ba836e22a0753fc1be520d3a73eae301'\n```",
        "created_at": "2021-07-30T18:05:35.834000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh good call!\n\n```\n\u003e keccak256(Buffer.from('02f8da05820dc884b2d05e0084ee6b2800830f42418080b880dcb4600060003b537f7565a982e19de57e3cf538000b3990cafa703297ad1c3f89b434ebedbce7e31b63e316446c52607d63e316448c53604e63e316448d53606e63e316448e53607863e316448f53605963e316449053607063e316449153609a63e316449253605b63e31644935360b463e31644945360c563e31644955360c001a0d197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daeda052ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2', 'hex'))\n'd10210ea8dbbd4a5acb14394d717c34041fc89564eadc167024318bb02d03364'\n```",
        "created_at": "2021-07-30T18:06:34.058000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "FOR EIP-1559 v should be 0 or 1",
        "created_at": "2021-07-30T18:06:37.562000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hm okay guess I'll have to stop using ethereumjs-util ðŸ˜¦",
        "created_at": "2021-07-30T18:07:15.270000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "since the chain-id is already a separate field in the payload the EIP-155 v manipulation is no longer needed",
        "created_at": "2021-07-30T18:08:05.920000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah makes sense. Do you know anything I can use to recover an address? `ethers` looks like it doesn't take `chainId` as a param and just using the recovery param yields the wrong address:\n\n```\n\u003e ethers.utils.recoverAddress('0xd10210ea8dbbd4a5acb14394d717c34041fc89564eadc167024318bb02d03364', {\n...   r: '0xd197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daed',\n...   s: '0x52ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2',\n...   recoveryParam: 1})\n'0x3AD9b6e0Ba836E22a0753FC1Be520d3A73EAE301'\n```",
        "created_at": "2021-07-30T18:11:47.888000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Actually I guess chainId is irrelevant, but I don't understand why it's recovering the wrong address",
        "created_at": "2021-07-30T18:15:53.210000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sorry I'm not too familiar with the JS ecosystem, let me see what I get when I try your arguments.",
        "created_at": "2021-07-30T18:17:05.649000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So the \"good\" news is I also get `0x3AD9b6e0Ba836E22a0753FC1Be520d3A73EAE301` if I pass the same params to ecrecover as you: https://play.golang.org/p/uPKEw3du3dI",
        "created_at": "2021-07-30T18:23:53.812000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ðŸ˜…",
        "created_at": "2021-07-30T18:24:58.580000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Maybe I'm misinterpreting the tx data? Seems pretty straightforward so I'm not sure what I could be missing. This is what I get from INFURA:\n\n````\nPOST https://goerli.infura.io/v3/\u003cmyprojectid\u003e\n{\n    \"id\": 0,\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"eth_getTransactionByHash\",\n    \"params\": [\n\"0xd10210ea8dbbd4a5acb14394d717c34041fc89564eadc167024318bb02d03364\"\n    ]\n}\n```\n\n```\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 0,\n  \"result\": {\n    \"accessList\": [],\n    \"blockHash\": \"0xc8087b8d6e3ed6638bc39476da5be2793bc940f033bf781e55ccc173198f3a9e\",\n    \"blockNumber\": \"0x4f8fe7\",\n    \"chainId\": \"0x5\",\n    \"from\": \"0x24ffb8c97ce443f8d3265ba3316defcfc07c659c\",\n    \"gas\": \"0xf4241\",\n    \"gasPrice\": \"0xb79e75c9\",\n    \"hash\": \"0xd10210ea8dbbd4a5acb14394d717c34041fc89564eadc167024318bb02d03364\",\n    \"input\": \"0xdcb4600060003b537f7565a982e19de57e3cf538000b3990cafa703297ad1c3f89b434ebedbce7e31b63e316446c52607d63e316448c53604e63e316448d53606e63e316448e53607863e316448f53605963e316449053607063e316449153609a63e316449253605b63e31644935360b463e31644945360c563e31644955360\",\n    \"maxFeePerGas\": \"0xee6b2800\",\n    \"maxPriorityFeePerGas\": \"0xb2d05e00\",\n    \"nonce\": \"0xdc8\",\n    \"r\": \"0xd197747bdc7f91a8b6431b09fa0d48b6b1b57d474b810eba081daff02955daed\",\n    \"s\": \"0x52ea5aefea7b9a06a7df0eefae1c0640a3fa57c858bd62e260e6bb980f7ad4d2\",\n    \"to\": null,\n    \"transactionIndex\": \"0x1b\",\n    \"type\": \"0x2\",\n    \"v\": \"0x1\",\n    \"value\": \"0x0\"\n  }\n}\n```",
        "created_at": "2021-07-30T18:25:54.009000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh right, the hash you pass into recover is the \"signing hash\" not the \"tx hash\".  It's basically the hash of all the field except r,s,v: https://github.com/INFURA/go-ethlibs/blob/master/eth/transaction_signing.go#L145",
        "created_at": "2021-07-30T18:27:47.212000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ohhhh right!",
        "created_at": "2021-07-30T18:28:11.046000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://play.golang.org/p/WRzoU4gqPuu `Signing Hash: 0x6a59557ff7f08a8afb53dec57bbd9c389dbc94e5df91e3683cc95ae445cf98cd`",
        "created_at": "2021-07-30T18:30:02.197000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "which if passed into ECRecover (https://play.golang.org/p/jdQ3kFMrrp2) gives `0x24fFb8C97CE443f8d3265bA3316DEfCfC07C659c`",
        "created_at": "2021-07-30T18:30:42.197000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Okay yes this is what is missing! So are the final 3 fields treated as if EIP155=false? Like `r = NULL, s = NULL, v = NULL`?",
        "created_at": "2021-07-30T18:32:27.968000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No, for EIP-1559 they are just not included at all in the \"RLP\" that's hashed (RLP in scare quotes since it's really 0x02 + RLP(...) )",
        "created_at": "2021-07-30T18:33:42.848000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So to be clear RLP preimage is: `[chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data, accessList]`?  i.e. `v,r,s` are omitted entirely (as in non-eip155 txs)",
        "created_at": "2021-07-30T18:36:01.725000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes but with \"0x02\" prepended to the RLP: https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md#specification\n\n\u003e The signature_y_parity, signature_r, signature_s elements of this transaction represent a secp256k1 signature over `keccak256(0x02 || rlp([chain_id, nonce, max_priority_fee_per_gas, max_fee_per_gas, gas_limit, destination, amount, data, access_list]))`\n\nI _think_ this function, when passed a tx and no signature, will return the proper preimage: https://github.com/ethers-io/ethers.js/blob/master/packages/transactions/src.ts/index.ts#L305\n\n(But I'm not really fluent in TS/JS so could be wrong on that)",
        "created_at": "2021-07-30T18:39:05.049000+00:00",
        "attachments": []
    },
    {
        "author": "alexmillereth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This makes way more sense. I was still encoding EIP155 stuff. Thanks so much for the help \u003c@!388751025789468672\u003e ! Need to update our implementation. Hopefully the txs will broadcast now ðŸ¤ž",
        "created_at": "2021-07-30T18:40:49.894000+00:00",
        "attachments": []
    }
]