[
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "All nodes are stuck. The Geth consensus failure is blocking all nodes",
        "created_at": "2020-09-28T07:42:59.660000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2020-09-28T07:43:11.567000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "Screenshot_2020-09-28_at_09.42.39.png",
                "content": "44012ae0ceba3176dec1619d89b0e9f0e1c7d22b62962eb31e8c3fbf65cfa612"
            }
        ]
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We will restart the testnet from scratch without Geth nodes. Only with the 3 Besu nodes. To reproduce the 2 issues you just have to start one Geth miner node and one Geth node on your machine. You will reproduce easily the mining issue. The other bug will appear after a certain period of time on the non miner node.",
        "created_at": "2020-09-28T07:45:54.158000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The information of the testnet nodes are available here: https://docs.google.com/document/d/1EQ5vPukluHfDisUWrOxB4EuzDbFBCY05iOSSgCvkKwA/edit?usp=sharing",
        "created_at": "2020-09-28T07:47:13.260000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The testnet is back and running (3 Besu nodes). \u003c@!543900561460822016\u003e if you want to run a validator on your machine please give us your public key.",
        "created_at": "2020-09-28T09:14:32.212000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@574864862338088960\u003e did the error appear when there only 2 geth nodes? (one miner and one validator)",
        "created_at": "2020-09-28T12:59:28.296000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In your testnet setup, was Besu and geth mining blocks?",
        "created_at": "2020-09-28T13:01:54.836000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "also, if you could share your genesis files that would be helpful ðŸ™‚",
        "created_at": "2020-09-28T13:13:35.680000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e \u003c@!574864862338088960\u003e did the error appear when there only 2 geth nodes? (one miner and one validator)\n\u003c@!543900561460822016\u003e One Geth validator is enough. Sorry when i said miners i meant validator. This is a PoA network so there are no miners",
        "created_at": "2020-09-28T15:18:38.400000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/PegaSysEng/eip1559-testnet/blob/master/config/geth/genesis.json",
        "created_at": "2020-09-28T15:19:31.046000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/PegaSysEng/eip1559-testnet/blob/master/config/geth/config.toml",
        "created_at": "2020-09-28T15:19:45.214000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I will check if they are up to date",
        "created_at": "2020-09-28T15:20:32.791000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e In your testnet setup, was Besu and geth mining blocks?\n\u003c@!543900561460822016\u003e yes both were mining blocks. And Geth was validating Besu mined blocks.",
        "created_at": "2020-09-28T15:24:46.255000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But Geth and Besu were rejecting Geth mined blocks",
        "created_at": "2020-09-28T15:24:58.466000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "RLP of the invalid block:",
        "created_at": "2020-09-28T16:28:15.612000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "message.txt",
                "content": "d00e10142040fe30e948afba04d8aeb422ebb41f6f42c208bf4a4bf9ff6619c2"
            }
        ]
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah awesome, thank you \u003c@!574864862338088960\u003e!",
        "created_at": "2020-09-28T16:28:43.450000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The wrong block is the #1651\nAll Besu nodes and the non-validator Geth node reject it and are stuck at #1650",
        "created_at": "2020-09-28T16:28:53.981000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "Screenshot_2020-09-28_at_18.09.06.png",
                "content": "63f0cbcbec23219c0806d801ba6aaab2f6c01aa65c9331be0dbe4bcbcb850479"
            }
        ]
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Geth log",
        "created_at": "2020-09-28T16:29:43.803000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "Untitled",
                "content": "af3e472e9806c4dfd6ddb127d40229b98266de139bcdfc02f1b4883bad461cc4"
            }
        ]
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!574864862338088960\u003e this is great info. I'm going to try and load the block into a script and see if I can figure out what's going on. Do you happen to have the commit hash that you ran the testnet against? I'm launching a couple nodes now, but the `config.toml` from the testnet repo is failing to load",
        "created_at": "2020-09-28T17:21:16.795000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`Fatal: config.toml, line 30: field 'CachesLockMmap' is not defined in ethash.Config, see https://godoc.org/github.com/ethereum/go-ethereum/consensus/ethash#Config for available fields`",
        "created_at": "2020-09-28T17:21:25.183000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "in fact, that genesis file is crashing geth",
        "created_at": "2020-09-28T17:23:42.858000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/vulcanize/go-ethereum/commit/af1c71046405ac18f41510a529c47542c35ae697",
        "created_at": "2020-09-28T17:24:50.877000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "okay got it, i was testing against this one https://github.com/vulcanize/go-ethereum-EIP1559/commit/215c210ddfbb3ed86de8dadd50a3a7da9b8a71d3",
        "created_at": "2020-09-28T17:25:37.614000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Try this config tile",
        "created_at": "2020-09-28T17:26:34.249000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "config.toml",
                "content": "5fda99ea9362e57a0c03b841de42c56cd09f8dda6434b5b0f92f7cf7bcf002c4"
            }
        ]
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "same problem, it has that `CachesLockMmap` field",
        "created_at": "2020-09-28T17:28:20.041000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Weird, this config file is working on our testnet",
        "created_at": "2020-09-28T17:30:21.480000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It is not an important field anyway so you can try to remove it",
        "created_at": "2020-09-28T17:30:37.098000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i guess it makes sense, that field was remove between the commits we were looking at",
        "created_at": "2020-09-28T17:33:34.225000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm thinking it makes the most sense to put that bug on the back burner until we're able to reproduce it with the latest version. Since we've been able to maintain a geth only testnet for ~25k blocks, its possible that the bug is no longer an issue. Unfortunately, I wasn't able to sync the besu node to the geth chain at all",
        "created_at": "2020-09-28T17:35:38.738000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it's not clear to me if it is a configuration issue on my end or if it is a geth issue",
        "created_at": "2020-09-28T17:36:03.804000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!574864862338088960\u003e do you have any idea how to best figure that out? Or do you think it is better to focus on the old commit hash and attempt to resolve the consensus bug there?",
        "created_at": "2020-09-28T17:36:43.105000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I will try to reproduce the issue with the same hash you are using tomorrow. I will let you know.",
        "created_at": "2020-09-28T17:38:17.343000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Okay great! I'll continue fiddling with it today to see if I come up with anything",
        "created_at": "2020-09-28T17:38:50.034000+00:00",
        "attachments": null
    },
    {
        "author": "abdel.stark",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Awesome, thanks",
        "created_at": "2020-09-28T17:38:59.598000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ðŸ™‚",
        "created_at": "2020-09-28T17:39:02.094000+00:00",
        "attachments": null
    }
]