[
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "How the clients (other than geth) achieve append-only mining mode mentioned here: https://hackmd.io/@adietrichs/1559-transaction-sorting-part2\nAs i understand, if you create a block for mining, and in meantime receive an includable transaction in the tx pool, you should not wait for the next block to include it, instead you should recreate current block with new transaction and basically create new mining job?",
        "created_at": "2021-03-24T18:14:31.290000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!439883507406340126\u003e that's correct: you are always better off \"re-creating\" the most profitable block because the PoW search happens via independent events. In other words, the fact that you searched with a different block does not change the likelihood of finding a solution.",
        "created_at": "2021-03-24T18:57:17.919000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do we have a list of active locations where EIP-1559 development is taking place for the different clients?  I'm aware of https://github.com/openethereum/openethereum/tree/sunce86/eip-1559 and https://github.com/quilt/go-ethereum/pull/37 \n\nSomewhat related, have we settled on the terms \"Max Inclusion Fee\", \"Max Fee\" and \"Base Fee\" as used in the EIP?",
        "created_at": "2021-03-24T19:34:29.895000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/ethereumjs/ethereumjs-monorepo/pull/1148 is JS",
        "created_at": "2021-03-24T20:17:26.568000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Nethermind is here https://github.com/NethermindEth/nethermind/pull/2341",
        "created_at": "2021-03-24T20:17:48.913000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Besu https://github.com/hyperledger/besu/pull/1407",
        "created_at": "2021-03-24T20:18:19.931000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`base_fee_per_gas_delta = max(parent_base_fee_per_gas * gas_used_delta // parent_gas_target // BASE_FEE_MAX_CHANGE_DENOMINATOR, 1)`\n\nClearly the order of these operations matters. I'm assuming here that I should first do the multiplication, then divide by parent_gas_target and then by the max change denominator? I should also floor these divisions every time I calculate them - correct?",
        "created_at": "2021-03-24T20:43:35.678000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Could someone from besu explain this test to me? https://github.com/abdelhamidbakhta/besu/blob/bf54b6c0b40d3015fc85ff9b078fbc26592d80c0/ethereum/core/src/test/resources/org/hyperledger/besu/ethereum/core/fees/basefee-test.json#L708\n\n```\n{\n    \"parentBaseFee\":1,\n    \"parentGasUsed\":0,\n    \"parentTargetGasUsed\":9000000,\n    \"expectedBaseFee\": 0\n  },\n```\n\nGas used is less than gas target. So we calculate the gas used delta which is 9000000. So then we calculate base fee per gas delta ((1 * 9000000) // 9000000) // 8 -\u003e 1 // 8 = 0. Then we take max(1 - 0, 0), which is 1? Why does Besu expect 0 base fee here? Am I missing something?\n\nCC \u003c@!574864862338088960\u003e",
        "created_at": "2021-03-24T21:36:32.710000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Or am I applying the arithmetic in the wrong order?",
        "created_at": "2021-03-24T21:39:36.281000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I find this very confusing in the EIP, I don't know what order I should calculate it.",
        "created_at": "2021-03-24T21:39:59.839000+00:00",
        "attachments": []
    },
    {
        "author": "pietjepuk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The order in which to calculate it is just that of Python afaik. Also, the minimum _delta_ is 1, but the minimum base fee is not.",
        "created_at": "2021-03-24T22:10:58.137000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```python\n        # check if the base fee is correct\n        if parent_gas_used == parent_gas_target:\n            expected_base_fee_per_gas = parent_base_fee_per_gas\n        elif parent_gas_used \u003e parent_gas_target:\n            gas_used_delta = parent_gas_used - parent_gas_target\n            base_fee_per_gas_delta = max(parent_base_fee_per_gas * gas_used_delta // parent_gas_target // BASE_FEE_MAX_CHANGE_DENOMINATOR, 1)\n            expected_base_fee_per_gas = parent_base_fee_per_gas + base_fee_per_gas_delta\n        else:\n            gas_used_delta = parent_gas_target - parent_gas_used\n            base_fee_per_gas_delta = parent_base_fee_per_gas * gas_used_delta // parent_gas_target // BASE_FEE_MAX_CHANGE_DENOMINATOR\n            expected_base_fee_per_gas = max(parent_base_fee_per_gas - base_fee_per_gas_delta, 0)\n```\n\nI am in the `else` clause here, there is no enforcement here.",
        "created_at": "2021-03-24T22:12:01.198000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is the spec wrong?",
        "created_at": "2021-03-24T22:12:44.219000+00:00",
        "attachments": []
    },
    {
        "author": "pietjepuk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm",
        "created_at": "2021-03-24T22:15:18.203000+00:00",
        "attachments": []
    },
    {
        "author": "pietjepuk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Seems like we can never get below (BASE_FEE_MAX_CHANGE_DENOMINATOR - 1) Wei. And if you start below this threshold (which mainnet won't, but the test does), then you just stay where you are for the \"else\".",
        "created_at": "2021-03-24T22:21:46.242000+00:00",
        "attachments": []
    },
    {
        "author": "pietjepuk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I would say we definitely want to be able to drop to zero though. So where the increment is a minimum of 1 wei, the decrement also has to have a minimum of 1. The code becomes almost exactly the same as the \"elif\" branch (except for the sign flip):\n```python\n        else:\n            gas_used_delta = parent_gas_target - parent_gas_used\n            base_fee_per_gas_delta = max(parent_base_fee_per_gas * gas_used_delta // parent_gas_target // BASE_FEE_MAX_CHANGE_DENOMINATOR, 1)\n            expected_base_fee_per_gas = max(parent_base_fee_per_gas - base_fee_per_gas_delta, 0)\n```",
        "created_at": "2021-03-24T22:27:24.826000+00:00",
        "attachments": []
    }
]