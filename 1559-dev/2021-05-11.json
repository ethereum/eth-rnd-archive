[
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "How about Nethermind, \u003c@!489256758989029405\u003e ?",
        "created_at": "2021-05-11T07:12:48.751000+00:00",
        "attachments": []
    },
    {
        "author": "marekm3498",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!211091239112671234\u003e We implemented EIP3529 and today I will apply the last 1559 changes (gas limit). So we should be ready today/tomorrow",
        "created_at": "2021-05-11T07:18:50.318000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just restarted our sealer with the some requried additions to the miner and txpool ( by \u003c@!415548822983278593\u003e and \u003c@!543900561460822016\u003e ), so blocks are progressing again",
        "created_at": "2021-05-11T07:20:34.685000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hiya, I sent a handful of txs yesterday to Baikal; I tried sending 1559 tx (rejected), I deployed a contract started with 0xEF, and I checked if BASEFEE was invalid pre-fork",
        "created_at": "2021-05-11T07:47:53.801000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah yeah and I selfdestructed a contract to ensure that the refund disable EIP was not yet active üôÇ",
        "created_at": "2021-05-11T07:52:56.917000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "BESU : \nenode://39eb08bbfad87481553c471a63ff2a4b4885fffa4ff50f1cf46744d9ad6e2f764ede146fe4df563fa9ccda1a46b9b1a88fb08135e1bf1d71b320912499da773d@3.21.156.138:30303",
        "created_at": "2021-05-11T08:13:49.544000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Stopped it again -- we need to hash out this block gas limit validation. The current geth miner will produce wrong blocks",
        "created_at": "2021-05-11T08:30:55.667000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We have some difficulties to produce a block : \n\u003e Invalid block header: gas target decreased too much\",\"throwable\":\"\"}\n\u003e {\"timestamp\":\"2021-05-11T08:26:08,675\",\"level\":\"ERROR\",\"thread\":\"pool-7-thread-44\",\"class\":\"BlockMiner\",\"message\":\"Illegal block mined, could not be imported to local chain.\",\"throwable\":\"\"}",
        "created_at": "2021-05-11T08:31:50.556000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is this the problem where we have not yet agreed on? https://github.com/ethereum/EIPs/pull/3560#issuecomment-835862318",
        "created_at": "2021-05-11T08:38:28.258000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that doesn't seem to be the case . I added logs and I get\n\nparentGasTarget = 5998519 (is fork block)\ngasTarget = 2999259 (block.gas_limit // ELASTICITY_MULTIPLIER)\n\n(parentGasTarget - (parentGasTarget / GAS_LIMIT_BOUND_DIVISOR)) = 5992662\n\nand so 2999259\u003c5992662",
        "created_at": "2021-05-11T08:50:48.498000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is that a block sealed by geth or is it a block you're sealing yourself and getting error when trying to import?",
        "created_at": "2021-05-11T09:23:07.061000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think geth sealed `499`, so should be one of your own blocks",
        "created_at": "2021-05-11T09:23:29.888000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My own block I sealed and it's when i'm trying to import yes",
        "created_at": "2021-05-11T09:24:11.456000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Well it seems like your miner didn't bump x2 the gasLimit on fork block?",
        "created_at": "2021-05-11T09:26:27.050000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "By \"miner\" i mean a module that prepares a block for sealing",
        "created_at": "2021-05-11T09:27:51.179000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes this seems to be the case, I'll try to fix that.",
        "created_at": "2021-05-11T09:29:30.455000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I fixed the issue we sealed the block 500 and quilt seems to be agree with Besu",
        "created_at": "2021-05-11T10:02:17.871000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just opened this: https://github.com/ethereum/EIPs/pull/3566",
        "created_at": "2021-05-11T10:07:36.735000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Would be great to resolve this before we continue mining. I think it won't affect the already sealed blocks, but it would affect upcoming blocks",
        "created_at": "2021-05-11T10:55:24.067000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!439883507406340126\u003e and \u003c@!508125616940515329\u003e signalled that the original behaviour was preferrable, and geth also prefers the original behaviour. So besu and Nethermind... ?",
        "created_at": "2021-05-11T10:56:15.383000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "to reduce the complexity of the code I am for the original behaviour",
        "created_at": "2021-05-11T11:13:27.138000+00:00",
        "attachments": []
    },
    {
        "author": "marekm3498",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am for the original behaviour too",
        "created_at": "2021-05-11T11:14:21.964000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Great, please thumb up https://github.com/ethereum/EIPs/pull/3566 then, and hopefully we can get this fixed and running before the next ACD",
        "created_at": "2021-05-11T11:21:22.114000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Commenting here for the benefit of those who don't read the EIP.  This is a behavior change relative to legacy behavior.  It reduces the effectiveness of the miner gas throttle by half.",
        "created_at": "2021-05-11T11:28:33.629000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't particularly care one way or another about how strong the miner throttle is, but we shouldn't be changing it as a side effect.",
        "created_at": "2021-05-11T11:29:06.385000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think a good question to ask is, if someone would have proposed changing to `/1024` to `/2048` in Berlin, would everyone have been for it?  If not then we should not do this.",
        "created_at": "2021-05-11T11:29:55.568000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If we want to maintain existing behavior without touching that code too heavily, then we should change the `/1024` to `/512`.",
        "created_at": "2021-05-11T11:30:34.545000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Already commented on your comment -- it's not, it's basically no change at all, aside from marginal rounding errors",
        "created_at": "2021-05-11T11:38:05.992000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think you've just miscalculated it. The factors even out (but I admit I had to generate the test-table to be certain myself üôÇ )",
        "created_at": "2021-05-11T11:40:15.167000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do you disagree that the current thing miners control is throughput (perhaps your perspective is that the thing the miners control is the limit)?",
        "created_at": "2021-05-11T11:41:51.601000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Currently, miners control both the gas throughput of Ethereum **and** the maximum gas allowed in a single block.",
        "created_at": "2021-05-11T11:42:19.359000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "With the introduction of 1559, we need to double or half the rate at which miners can change *one of* those two things.",
        "created_at": "2021-05-11T11:42:31.413000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The EIP as published right now doubles the rate at which miners can increase the maximum block size, while retaining the rate at which miners can adjust Ethereum's gas throughput.",
        "created_at": "2021-05-11T11:43:47.546000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The EIP with the changes you have proposed I believe will leave the rate at which miners can change the maximum block size the same, while halving the rate at which they can change the chain's throughput.",
        "created_at": "2021-05-11T11:44:21.059000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The more I think about it, the less I care *which* of these two variables we change.  I do want to make sure we are making an intentional choice between them though.",
        "created_at": "2021-05-11T11:47:17.465000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The EIP as published right now makes it so that if the parent `gasLimit` is `40000000`, then the next block can bump it to `40039063`. With the changes I proposed, they can bump it to `40039061`",
        "created_at": "2021-05-11T11:47:31.554000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm... that doesn't make sense to me.",
        "created_at": "2021-05-11T11:48:33.180000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The `\u003c=` to `\u003c` change I get and agree with.",
        "created_at": "2021-05-11T11:49:08.389000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It is the change of `gas_target` to `block.gas_limit` that makes me question that. ü§î",
        "created_at": "2021-05-11T11:49:29.061000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Previously they could bump `(gasLimit/2)` by a factor of `/1024`, but it was the taken `x2` to make up the gasLimit. Now they can bump `gasLimit/1024`, but it's directly the gasLimit, not the target",
        "created_at": "2021-05-11T11:49:39.383000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "They could bump the thing which was half the gaslimit, now they bump it directly",
        "created_at": "2021-05-11T11:49:51.615000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ü§î (I think I am starting to get it... wheels are turning ‚öôÔ∏è)",
        "created_at": "2021-05-11T11:50:17.967000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "OK, I believe you!",
        "created_at": "2021-05-11T11:51:16.959000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Would still be nice to get an official answer to the question of which behavior we want to change (throughput or block size).",
        "created_at": "2021-05-11T11:51:33.205000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah I haven't been able to formulate it in words very well, hence why I've been trying to examplify with testcases instead üôÇ",
        "created_at": "2021-05-11T11:51:33.831000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`assert((a \u003c b) == (a/2 \u003c b/2) == (a*2 \u003c b*2))`",
        "created_at": "2021-05-11T11:52:08.388000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, once you get it already, intuitively that makes sense, but it doesn't help when explaining to someone who hasn't internalized it yet  üôÇ",
        "created_at": "2021-05-11T11:53:31.613000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Unrelated to your PR then, do you have thoughts on whether we should be changing the rate at which miners can change the block size, or the rate at which miners can change the throughput?",
        "created_at": "2021-05-11T11:54:16.976000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't have an opinion, really, I think",
        "created_at": "2021-05-11T11:55:17.102000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why did we introduced the first change:\n \"1. Checks based on limit, not target\n 2. Checks use \u003c,\u003e rather than \u003c=, \u003e=\"?\nIs it because of the mentioned asymmetry?",
        "created_at": "2021-05-11T12:30:38.334000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The `\u003c` vs `\u003c=` I think was just an accident.",
        "created_at": "2021-05-11T12:35:17.161000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think the first change was more or less accidental aswell (as in, I don't think there was an intention in 1559 to change it, just the py ref implementation happened to do that)",
        "created_at": "2021-05-11T12:45:55.105000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I also assume this was an accident",
        "created_at": "2021-05-11T12:47:24.659000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess we are waiting until these EIP changes get merged and then we can launch Geth again with the \"new\" consensus for 1559?",
        "created_at": "2021-05-11T12:48:45.404000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've updated the geth base PR, but the txpool PR needs a rebase, then the miner PR needs a rebase. And besu needs an update aswell",
        "created_at": "2021-05-11T12:49:49.564000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There is a PR for Besu and the tests are ok. I am waiting for  your PR to be merged to update the node",
        "created_at": "2021-05-11T12:52:57.956000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think the geth code is kind of ready to start up again, but let's wait until the EIP is officially updated",
        "created_at": "2021-05-11T14:15:17.342000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You may want to ping some of the authors in here.  That EIP has really struggled historically with getting timely reviews.",
        "created_at": "2021-05-11T14:20:56.100000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Gotcha, done (off-channel)",
        "created_at": "2021-05-11T14:23:21.804000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Well, I guess cc \u003c@!273808422753796097\u003e here too, discussion is above ^",
        "created_at": "2021-05-11T14:23:59.405000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/ethereum/EIPs/pull/3560 This one also",
        "created_at": "2021-05-11T15:17:41.006000+00:00",
        "attachments": []
    }
]