[
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There was a reason we chose gasTarget instead of gasLimit... I don't remember why now though.  ðŸ˜¢",
        "created_at": "2021-05-06T00:17:09.740000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It may be worth going through the history of discussion to see if anyone wrote it down.",
        "created_at": "2021-05-06T00:17:21.476000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Though, maybe that decision was made back when we had the transition period between legacy and 1559 transactions?",
        "created_at": "2021-05-06T00:25:25.036000+00:00",
        "attachments": []
    },
    {
        "author": "madeof_tin7509",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There was a time we thought about removing the miner say in the limit. Lots is a blur though",
        "created_at": "2021-05-06T00:26:02.462000+00:00",
        "attachments": []
    },
    {
        "author": "madeof_tin7509",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "when was talked about why. lots to try and remember lol",
        "created_at": "2021-05-06T00:26:30.025000+00:00",
        "attachments": []
    },
    {
        "author": "oripomerantz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Miners are allowed to raise or lower `gasTarget`, but only by 1/1024'th of the current value.",
        "created_at": "2021-05-06T00:28:36.187000+00:00",
        "attachments": []
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The only advantage I see wrt the original gasTarget vs gasLimit is that there's no need for miners to adjust. Whereas going with the gasLimit idea, the network capacity would \"halve\" at the fork, hiking prices up until miners readjust",
        "created_at": "2021-05-06T04:35:14.656000+00:00",
        "attachments": []
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If we can somehow fix that seamlessly, it would be grand. Otherwise we need to coordinate with miners to bump the limit on crossover",
        "created_at": "2021-05-06T04:38:36.842000+00:00",
        "attachments": []
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah, I see \u003c@!543900561460822016\u003e updated the spec to omit the \"halving\". That solves it from the consensus perspective, but we still need some miner collaboration, otherwise they will push the gas limit down (since by default they have a target baseline gas limit and a cap, at least in geth)",
        "created_at": "2021-05-06T04:43:05.985000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Weâ€™ll need miner collaboration so they donâ€™t keep targeting the current gas limit, correct?",
        "created_at": "2021-05-06T04:46:00.696000+00:00",
        "attachments": []
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Wrote in onto the EIP PR too",
        "created_at": "2021-05-06T04:50:03.268000+00:00",
        "attachments": []
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, essentially we need to either auto-2x the miner targets from client code, or have them manually 2x after the fork. Both is a bit murky, but the latter is at least clean from a \"governance\" perspective, as in we're not tweaking their setting on their behalf",
        "created_at": "2021-05-06T04:50:57.205000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I have a pretty strong preference for the latter (miners manually increase).  I have faith that \u003c@552133098075193354\u003e can solve that problem.  ðŸ˜„",
        "created_at": "2021-05-06T06:42:20.271000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@508125616940515329\u003e can you check the GASPRICE opcode as you already checked the GASLIMIT opcode? Maybe try to include a 1559 tx with maxFeePerGas != maxPriorityFeePerGas in order to force the effective_gas_price to be different from the legacy gas_price.",
        "created_at": "2021-05-06T08:14:14.316000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've sent these txs in the past ðŸ™‚ Also with your maxFeePerGas != maxPriorityFeePerGas and also did a test with block baseFee != 7 (floor of basefee)",
        "created_at": "2021-05-06T08:15:49.021000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Nice!",
        "created_at": "2021-05-06T08:16:19.878000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Aleut also has BASEFEE right? I've also sent those",
        "created_at": "2021-05-06T08:16:22.206000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "how about sending BASEFEE opcode before 1559 activation block? could add this as a test",
        "created_at": "2021-05-06T08:36:36.052000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Cool yeah lets do that. Maybe we should allocate more pre-1559 blocks in order to test pre-fork",
        "created_at": "2021-05-06T09:19:43.216000+00:00",
        "attachments": []
    },
    {
        "author": "matkt0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yes it's present",
        "created_at": "2021-05-06T09:46:43.464000+00:00",
        "attachments": []
    },
    {
        "author": "marekm3498",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do you plan to reject transactions from TxPool that have lower (or significantly lower) MaxFeePerGas than the current head BaseFee in your clients?",
        "created_at": "2021-05-06T10:06:54.951000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "OE currently does not have such a verification, and i don't see why would.",
        "created_at": "2021-05-06T10:15:01.405000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why not? It does not make much sense if the base fee is 1 GWei and you keep txs with 10 wei as base fee in your mempool",
        "created_at": "2021-05-06T10:15:43.178000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Those low price txs would get dropped if they become a burden after some time right...",
        "created_at": "2021-05-06T10:18:30.149000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, we still have that min_gas_price config that miners can set",
        "created_at": "2021-05-06T10:19:21.200000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "which now becomes actually min_effective_gas_price",
        "created_at": "2021-05-06T10:20:14.237000+00:00",
        "attachments": []
    },
    {
        "author": "sunce86.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If we dont allow txs with lower MaxFeePerGas than BaseFee to enter pool, then txPool will always contain half block of txs inside it. I guess we want txPool with a lot of txs, but only half block of txs among them that satisfy the \"includable in block\" criteria, meaning MaxFeePerGas \u003e= BaseFee.",
        "created_at": "2021-05-06T10:25:39.451000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Dropping things with a maxFeePerGas significantly under baseFee is reasonable I think.  You do want to keep a few blocks worth of transactions though.",
        "created_at": "2021-05-06T10:27:15.345000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In a perfect world with infinite computational resources we would probably do something like pre-fill `n` blocks into the future and drop anything that doesn't land in one of them.",
        "created_at": "2021-05-06T10:28:07.622000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Maybe I misunderstand, but doesn't this mean that miners have to either restart their clients (not seeing any RPC endpoint to update gas limit or gas target) at the moment of the fork block? Is that something they can do and are willing to do? I would think they'd want this done programmatically. What if there was a temporary flag for them to explicitly opt in to a gas limit ramp at the point of the fork?",
        "created_at": "2021-05-06T13:25:32.627000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, good point about needing to restart their clients.  ðŸ¤”",
        "created_at": "2021-05-06T13:25:58.786000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I like the idea of a temp flag.",
        "created_at": "2021-05-06T13:26:13.477000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Something that says, \"interpret the gas limit as 2x after 1559 fork block\".",
        "created_at": "2021-05-06T13:26:29.247000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Then on next restart they can remove that flag and update their gas limit target flag.",
        "created_at": "2021-05-06T13:26:46.489000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Then in a patch sometime after 1559 hard fork the second flag can be removed (so no long term tech debt).",
        "created_at": "2021-05-06T13:27:20.038000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hahah! Glad to see the high confidence. I can definitely email miners ahead of time, but it's not clear we will get responses + support. We should definitely make it clear to miners exactly how to do that in blog posts/release notes/etc.",
        "created_at": "2021-05-06T14:54:36.871000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Reading this, +1 for a flag, that's ideally on by default.",
        "created_at": "2021-05-06T14:56:09.358000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The challenge is what \"a few blocks\" means: the base fee can go up/down 10x in 5 minutes if blocks are full/empty, so assuming you keep 5 minutes of blocks, you are looking at a 100x range. This may be something that's easier to do once 1559 is live and we have data about what fees are being sent on the network relative to the base fee.",
        "created_at": "2021-05-06T14:57:41.717000+00:00",
        "attachments": []
    },
    {
        "author": "cf0009",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No it's not. If I want to make a low priority transaction and the BaseFee is 400 gwei at 6pm, I shouldn't need to wake up at 4 am to make the transaction at 30 gwei (https://www.gasnow.org/)",
        "created_at": "2021-05-06T20:21:22.548000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "FYI, I have a small write up in the PR discussing the philosophy of the tx pool changes I made. TLDR; I think gasFeeCap is a good metric to signal how likely a tx is going to be included in a block in the near future. By ordering the txs by gasFeeCap, you can drop txs that are less likely to be included in the near future. The amount of txs held is up to users and configurable.\nhttps://github.com/ethereum/go-ethereum/pull/22791#issue-628151835",
        "created_at": "2021-05-06T20:32:45.414000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The network's global pending queue isn't the appropriate place for long term storage.  Your local node can hold that transaction until the base fee goes down and then submit.",
        "created_at": "2021-05-06T21:29:14.518000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e i think users should be able to choose how many txs their client holds, i don't think tx pools should arbitrarily discard valid txs",
        "created_at": "2021-05-06T21:39:01.009000+00:00",
        "attachments": []
    },
    {
        "author": "cf0009",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't think users want to worry about any of that. They just want to click send and see it go",
        "created_at": "2021-05-06T21:46:10.195000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Clients already hold all local transactions indefinitely, often even across restarts.",
        "created_at": "2021-05-06T21:50:35.961000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The question here is what should the default behavior be when holding *someone else's* transactions.  We want the network to be healthy, meaning that when we have fast blocks there are transactions readily available to be included, but we also want defaults that are low so memory requirements (using default values) for clients are low.",
        "created_at": "2021-05-06T21:51:54.202000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Memory in clients is a scarce resource, especially for people running on commodity hardware.",
        "created_at": "2021-05-06T21:52:24.399000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I agree this should be configurable.  However, I think the default should target minimizing memory footprint while maintaining a healthy network.",
        "created_at": "2021-05-06T21:52:57.545000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I believe that target would be `n` blocks worth of transactions.",
        "created_at": "2021-05-06T21:53:15.445000+00:00",
        "attachments": []
    }
]