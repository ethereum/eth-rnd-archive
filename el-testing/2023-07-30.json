[
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "We should definitely clarify it as it's a consensus issue (storage feeds into EL block's state root). My view is that the empty account rule should be extended to require empty storage, meaning that the storage of address 0xb is not deleted at the end of the block. cc \u003c@\u0026688090867927482525\u003e \u003c@\u0026652918665943056397\u003e \u003c@\u0026836981603216654336\u003e",
        "created_at": "2023-07-30T11:39:52.949000+00:00",
        "attachments": []
    },
    {
        "author": "peter.davies",
        "category": "Testing",
        "parent": "",
        "content": "All empty accounts were deleted before the merge. If we change anything, we should just declare that merged networks cannot have empty accounts. They are a historical and test suite only artifact at this point.",
        "created_at": "2023-07-30T11:58:28.484000+00:00",
        "attachments": []
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "If we don't change the empty rule, the behaviour of EIP-4788 is different depending on whether address 0xb has any ether or not (both are valid cases), which is a bug to my mind.",
        "created_at": "2023-07-30T12:00:32.741000+00:00",
        "attachments": []
    },
    {
        "author": "dimitry8570",
        "category": "Testing",
        "parent": "",
        "content": "I tried to include latest cancun, but there are too many spec changes. We have accumulated enough updates for a release. \n\nhttps://github.com/ethereum/tests/releases/tag/v12.3",
        "created_at": "2023-07-30T12:58:24.766000+00:00",
        "attachments": []
    },
    {
        "author": "dimitry8570",
        "category": "Testing",
        "parent": "",
        "content": "I vote for still coding the case of empty account in state just in case (even if it not supposed to happen in the state)\nIf any bug happen and an empty account appear in the state in the future, the eips will have a handle. Thats why i vote to keep tests with this issues.",
        "created_at": "2023-07-30T13:02:01.464000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Ha, funky!",
        "created_at": "2023-07-30T16:27:46.334000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "I would be interested in knowing: can we retroactively add storage-empty as a condition for emptiness? \n\nThe only difference I can think of are contracts which store data in ctor, but does not return any code. However, they have non-empty nonce since a long way back.",
        "created_at": "2023-07-30T16:31:20.440000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "With the current definition of things, geth is Correct, imo. Def not desired though",
        "created_at": "2023-07-30T16:32:12.638000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "I would prefer a general rule rather than one more special-case-precompile rule. And even more preferrable: something which works retroactively",
        "created_at": "2023-07-30T16:44:02.488000+00:00",
        "attachments": []
    },
    {
        "author": "peter.davies",
        "category": "Testing",
        "parent": "",
        "content": "Prior to Homestead, running out of gas during contract creation results in an empty account (rather than no effect)  in some circumstances. This created quite a few empty accounts with storage.",
        "created_at": "2023-07-30T20:06:29.254000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Sounds strange. Running OOG should revert the storage-changes. Or do you mean insufficient gas to deploy the final bytecode, but successful ctor execution?",
        "created_at": "2023-07-30T20:24:02.843000+00:00",
        "attachments": []
    },
    {
        "author": "peter.davies",
        "category": "Testing",
        "parent": "",
        "content": "Yes, running out of gas during final bytecode deployment was a weird edgecase in Frontier.",
        "created_at": "2023-07-30T20:26:33.740000+00:00",
        "attachments": []
    },
    {
        "author": "peter.davies",
        "category": "Testing",
        "parent": "",
        "content": "I bulk deleted every remaining empty account in https://etherscan.io/tx/0xf955834bfa097458a9cf6b719705a443d32e7f43f20b9b0294098c205b4bcc3d . Most of them were from Frontier OOG issues.",
        "created_at": "2023-07-30T20:28:16.121000+00:00",
        "attachments": []
    }
]