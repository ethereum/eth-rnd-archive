[
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "for the 7702 tests `test_invalid_tx_invalid_auth_signature`, the current fixtures expect the tx to fail, however the intention is that the tx succeeds, it's just that the set code fails",
        "created_at": "2024-09-06T15:46:15.813000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "this PR clarifies the intention: https://github.com/ethereum/EIPs/pull/8845",
        "created_at": "2024-09-06T15:53:20.202000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "I think this is an easy change in the tests, but I think this can wait until devnet-4, whenever the PR lands in the EIP we will update the tests then and clients can test the changes using the devnet-4 tests release ðŸ™‚",
        "created_at": "2024-09-06T16:05:42.265000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "sg i can implement the tests as they are currently",
        "created_at": "2024-09-06T16:06:52.836000+00:00",
        "attachments": null
    },
    {
        "author": "gumb00",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@892053833121923094\u003e I think I discovered a couple not covered cases, all tests still pass for me when I change this behavior.\n\n1. Transaction into account that delegates to a precompile - this should not execute the precompile, can be checked by targeting some precompile that validates input and fails/consumes all gas when invalid. If it's a delegation, transaction should succeed.\n\n2. This is a bit evmone-specific, but may be still worth checking. We had a bug when \"delegation\" mode was propagated to a deeper CALL frames (and it shouldn't), so the test should call a delegated account, the delegate code executes a call to precompile, expectation is precompile is executed.",
        "created_at": "2024-09-06T16:40:41.942000+00:00",
        "attachments": null
    },
    {
        "author": "gumb00",
        "category": "Testing",
        "parent": "",
        "content": "Also seems uncovered:\n\n3. Set code transaction should be invalid before Prague\n\n4. Set code transaction with empty `to` is invalid\n\n5. OOG when charging for access to delegate account (arguably this is checked already by checking how much gas is spent in total)",
        "created_at": "2024-09-06T16:51:28.388000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "For (1) did `test_set_code_to_precompile` not hit the issue here? Or do you mean that specifically the `to` of the transaction is a delegated-to-precompile account?",
        "created_at": "2024-09-06T16:54:17.856000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Added the rest to an open tracker for missing test cases, thanks for the suggestions: https://github.com/ethereum/execution-spec-tests/issues/703",
        "created_at": "2024-09-06T16:56:50.666000+00:00",
        "attachments": null
    },
    {
        "author": "gumb00",
        "category": "Testing",
        "parent": "",
        "content": "yes, `to` of a transaction is an account that delegates to precompile",
        "created_at": "2024-09-06T16:58:02.805000+00:00",
        "attachments": null
    }
]