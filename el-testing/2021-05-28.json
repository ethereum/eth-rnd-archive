[
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!393119312350543872\u003e \nBlockchainTests/TransitionTests/bcBerlinToLondon/BerlinToLondonTransition.json doesn't look right to me. Block #4 has gasLimit=3141592, while block #5 has gasLimit=12500000. But per EIP-1559 at the transition block `parent_gas_limit = self.parent(block).gas_limit * ELASTICITY_MULTIPLIER` , i.e. 3141592*2 = 6283184, which leads to failure of  `assert block.gas_limit \u003c parent_gas_limit + parent_gas_limit // 1024`.",
        "created_at": "2021-05-28T08:33:34.712000+00:00",
        "attachments": null
    },
    {
        "author": "dimitry8570",
        "category": "Testing",
        "parent": "",
        "content": "The test was based on outdated EIP",
        "created_at": "2021-05-28T12:48:01.716000+00:00",
        "attachments": null
    },
    {
        "author": "dimitry8570",
        "category": "Testing",
        "parent": "",
        "content": "Im preparing all tests update now. All Berlin env headers would get a basefee of 10 and all tests we have will be a legacy transaction on 1559 header while on London",
        "created_at": "2021-05-28T12:49:24.402000+00:00",
        "attachments": null
    },
    {
        "author": "oripomerantz",
        "category": "Testing",
        "parent": "",
        "content": "The EIP got updated. I'll update the test to correspond.",
        "created_at": "2021-05-28T13:08:32.272000+00:00",
        "attachments": null
    },
    {
        "author": "oripomerantz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!583892532644151312\u003e , what client did you use to get the failure? Is there a version of geth that already checks gasLimit based on the changed EIP?",
        "created_at": "2021-05-28T13:20:42.062000+00:00",
        "attachments": null
    },
    {
        "author": "oripomerantz",
        "category": "Testing",
        "parent": "",
        "content": "The problem isn't in the filler (which doesn't specify the gasLimit for that block), only in the filled version. So all we need to do is regenerate and it will be fine. However, that requires geth with the change. However, I do specify it in the other transition test, `initialVals`, so I'll fix that.",
        "created_at": "2021-05-28T13:34:19.038000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "I used our client Silkworm (https://github.com/torquem-ch/silkworm), which is a new C++ client under development.",
        "created_at": "2021-05-28T13:34:53.814000+00:00",
        "attachments": null
    },
    {
        "author": "oripomerantz",
        "category": "Testing",
        "parent": "",
        "content": "How does it get controlled by retesteth? Does it use t8ntool or RPC?",
        "created_at": "2021-05-28T13:36:04.112000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "It's doesn't play with retesteth yet, it uses a custom consensus test runner.",
        "created_at": "2021-05-28T13:50:22.920000+00:00",
        "attachments": null
    },
    {
        "author": "oripomerantz",
        "category": "Testing",
        "parent": "",
        "content": "Then I'll wait to fix this until geth gets updated. In the meanwhile you can manually change the JSON file. Sorry I don't have a great solution.",
        "created_at": "2021-05-28T14:29:15.828000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "that's fine, no worries",
        "created_at": "2021-05-28T14:31:25.016000+00:00",
        "attachments": null
    }
]