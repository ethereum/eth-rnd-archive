[
    {
        "author": "chfast",
        "category": "Testing",
        "parent": "",
        "content": "We are investigating the only BLS test failure of `tests/prague/eip2537_bls_12_381_precompiles/test_bls12_g1add.py::test_invalid[fork_Prague-state_test--bls_g1add_large_input-]`. Is this maybe a known issue? \u003c@450651770243252225\u003e \u003c@508125616940515329\u003e",
        "created_at": "2025-01-15T14:16:36.686000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "All pass for EthJS",
        "created_at": "2025-01-15T14:17:05.080000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Testing",
        "parent": "",
        "content": "And no update to EEST is expected?",
        "created_at": "2025-01-15T14:17:27.002000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Wdym? We pass 1.2.0 tests",
        "created_at": "2025-01-15T14:17:59.352000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Testing",
        "parent": "",
        "content": "Just checking because not everything is in sync... e.g. https://github.com/ethereum/EIPs/pull/9217",
        "created_at": "2025-01-15T14:19:07.191000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "This one should be up to date now (or I might have messed up). It changes gas used of those files",
        "created_at": "2025-01-15T14:19:55.283000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "Testing",
        "parent": "",
        "content": "This test for G1 ADD has wrong gas cost. The old one 500\nhttps://github.com/ethereum/execution-spec-tests/blob/pectra-devnet-5%40v1.2.0/tests/prague/eip2537_bls_12_381_precompiles/vectors/add_G1_bls.json#L6",
        "created_at": "2025-01-15T14:20:31.050000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "This is from the EEST fixture releases right?",
        "created_at": "2025-01-15T14:23:14.571000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Testing",
        "parent": "",
        "content": "I'm not sure if EEST actually uses this value from JSON. It rather only takes inputs.",
        "created_at": "2025-01-15T14:24:54.666000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "Testing",
        "parent": "",
        "content": "Yes from this release https://github.com/ethereum/execution-spec-tests/releases/tag/pectra-devnet-5%40v1.2.0",
        "created_at": "2025-01-15T14:28:18.121000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Ok, EthJS passes those, but if there is a problem with the fixture then there is (obviously) something wrong at our side ðŸ˜…",
        "created_at": "2025-01-15T14:28:56.383000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "Testing",
        "parent": "",
        "content": "Not sure that this \"Gas\" means in this case. Maybe it's not updated beacuse it's not used by EEST.",
        "created_at": "2025-01-15T14:29:59.848000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "Testing",
        "parent": "",
        "content": "Ok after applying changes related to 7623 these tests pass on evmone. (thanks \u003c@425274498732916736\u003e )But the question if \"Gas\" needs to be updated too remains.",
        "created_at": "2025-01-15T14:36:58.249000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "EthJS has a runner for those specific JSON files. What it does is: it calls the relevant precompile with `Input`, it then checks if the `Output` (so the RETURNDATA) of the call is this output, and checks if the gas used matches the `Gas` field. \nIf an `ExpectedError` field is present in the json entry, the call with the `Input` is supposed to fail, i.e. the returndata is empty and the call output puts 0 on the stack.\n\nSo note: these tests are not txs, they are rather raw inputs to the precompiles (and thus do not interact with 7623). One can see this as an EVM `CALL` operation to the precompile where we check here if the input/output/gas matches",
        "created_at": "2025-01-15T14:38:58.306000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "So for clarity: those https://github.com/ethereum/EIPs/pull/9217 and https://github.com/ethereum/EIPs/tree/master/assets/eip-2537",
        "created_at": "2025-01-15T14:39:36.295000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "These are also linked in the EIP 2537 https://eips.ethereum.org/EIPS/eip-2537#test-cases",
        "created_at": "2025-01-15T14:40:03.629000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "(but: the files linked in the eip right now are of the old gas schedule and thus incorrect, hence my EIP pull above to fix these cases)",
        "created_at": "2025-01-15T14:40:30.446000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Oh! This might be relevant! See this comment: https://github.com/ethereum/EIPs/pull/9217#issuecomment-2578891301\n\nThe `Gas` field is ignored in EEST, so updating the files did not change any\n\nFrom \u003c@892053833121923094\u003e \n\n\u003e The gas in our JSON files was outdated, but this was a no-op because EEST has the formulas built-in and disregarded the value in the JSON.",
        "created_at": "2025-01-15T14:41:15.235000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Yes exactly, these values are ignored, we re-calculate everything on the fly, and those should be correct",
        "created_at": "2025-01-15T14:41:40.870000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "Testing",
        "parent": "",
        "content": "So EEST takes the vectors from the EIPs?",
        "created_at": "2025-01-15T14:42:20.383000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Yes, it just ignores the gas, we actually have a PR to update to the correct gas value in the JSON files, but it's a no-op since we ignore them when filling, it's just for correctness of the files",
        "created_at": "2025-01-15T14:50:55.735000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "Testing",
        "parent": "",
        "content": "Just wanted to clarify this",
        "created_at": "2025-01-15T14:51:19.578000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "I also generated the tests before and after changing the JSON files and the generated tests are exactly the same",
        "created_at": "2025-01-15T14:51:32.486000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Could you (if time allows) maybe re-check the files I generated in https://github.com/ethereum/EIPs/pull/9217 ? I added the `mul`files back (deleted them previously). If those are good we can merge such that those test files are correct in the EIP ðŸ™‚",
        "created_at": "2025-01-15T14:55:37.034000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "It all looks good, I added a cross-check and updated the vectors in this PR: https://github.com/ethereum/execution-spec-tests/pull/1063 \nPls also approve if possible ðŸ™‚",
        "created_at": "2025-01-15T15:36:33.244000+00:00",
        "attachments": null
    }
]