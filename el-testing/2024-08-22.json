[
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "okay im running these and it looks like there is an error in the gas accounting when doing extcodesize on a delegated address.\n\nin test `test-single_valid_authorization_single_signer` of `account_warming`, i pass the test when the first extcodesize only costs 100 and the second costs 2600\n\nhowever the first should cost 2700 because although the auth signer is warm, the account they delegate to is not. since extcodesize returns the size of the delegated account (`0x8a0a19589531694250d570040a0c4b74576919b8` in this case), it needs to access the delegated account and warm it. then the second extcodesize is now directly to `0x8a0a19589531694250d570040a0c4b74576919b8` and should only cost 100 since it is warm. this means the total gas cost is off by 100",
        "created_at": "2024-08-22T02:21:41.992000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Interesting, I thought I added this code! I will check tomorrow, will not be at desk today",
        "created_at": "2024-08-22T06:47:43.738000+00:00",
        "attachments": null
    },
    {
        "author": "spencer_tb",
        "category": "Testing",
        "parent": "",
        "content": "While we are still on the t8n tool sentiment I wanted to chime in! I'm super happy we have EthJS t8n support now within EEST (`execution-spec-tests`), and without it we wouldn't be able to fill the 7702 tests üòÑ\n\nOne of the biggest bottlenecks for our test releases (including this one with 7702) is simply not being able to fill the tests in the first place, where client implementations don't yet support t8n for specific EIPs. Supporting the t8n tool for multiple clients has huge advantages, like this case here where we only need 1 client to support filling for a specific EIP.  Our sentiment for a long time was that we should optimize for the latter. Although now that we can fill tests with an EELS (`execution-spec`) t8n we have the opportunity to remove the forcing function of EL client t8n tools for the test release loop\n\nIn the future we want to ideally be filling tests entirely with an EELS t8n. This becomes extremely powerful when we enforce a spec definition within EELS and basic tests within EEST before EIPs can be CFI'd. Assuming the latter we truly unlock TDD for EL clients where tests are available before implementations have even started (best case), allowing client devs to keep dev-ing, and not have to maintain or support a t8n tool for each fork. This is not to say we would stop supporting t8n's from other EL clients just that the latter is the path we want to move towards",
        "created_at": "2024-08-22T11:16:24.447000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "So set-code proxies effectively have to charge twice the warming fee?",
        "created_at": "2024-08-22T17:01:30.800000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "as of now, yeah. i think we could be fine just warming once and paying the relevant cold access fee",
        "created_at": "2024-08-22T18:39:58.341000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah it makes to me, I need to add more tests for this, mainly we are not covering an already-delegated account warm state",
        "created_at": "2024-08-22T18:41:04.039000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "does the issue i mentioned above make sense btw? or am i possibly misunderstanding?",
        "created_at": "2024-08-22T18:41:35.252000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "It makes sense yes, it was an oversight in the tests, I'll revisit and update üëç",
        "created_at": "2024-08-22T18:43:18.313000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "If the delegated account is also already warm, then the EXTCODESIZE should be 200? (100 accessing the warm set-code account + 100 accessing the warm delegated account) \u003c@543900561460822016\u003e \u003c@508125616940515329\u003e",
        "created_at": "2024-08-22T22:15:00.300000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "that‚Äôs how i expect",
        "created_at": "2024-08-22T22:19:18.260000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "okay I pushed a fix to the tests branch now: https://github.com/ethereum/execution-spec-tests/tree/eip-7702-devnet-3",
        "created_at": "2024-08-22T22:21:20.372000+00:00",
        "attachments": null
    }
]