[
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "For the fuzz trace-based testing, what components of the JSON trace do we need to support? Are there any sample test vectors to ensure that our JSON traces are formatted correctly (and report the correct data)? To ensure that if a divergence is found, it is in the EOF implementation, and not in the trace specification",
        "created_at": "2025-04-03T16:36:58.811000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Testing",
        "parent": "",
        "content": "EIP-7756 is the tracing spec that we are using for EOF.  Essential fields for fuzzing are:\n* `depth`\n* `pc` (zero is container start, across all sections)\n* `section` (for all contracts in an EOF container, even if section=0)\n* `functionDepth` (for all lines covering code in an EOF container, even if depth=1)\n* `gas` (this is gas remaining)\n* `op`\n* `opName`\n* `stack` (at least 7 entries deep)",
        "created_at": "2025-04-03T20:37:26.363000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Testing",
        "parent": "",
        "content": "I would like to add memorySize to the list, but there are some outstanding issues with how Nethermind calculates it's memory expansion that are blocking that.",
        "created_at": "2025-04-03T20:39:17.740000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Yes we also have problems with memorySize but we can get around it by caching the value before calculating the gas",
        "created_at": "2025-04-03T21:54:33.404000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Alright thanks a lot. \u003c@403636673914863626\u003e here are the fields ðŸ™‚",
        "created_at": "2025-04-03T21:54:55.576000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I see `gasCost` is not part of this?",
        "created_at": "2025-04-03T21:55:04.830000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Testing",
        "parent": "",
        "content": "No, what is consensus critical is how much gas there is to spend.  The same issues around memory size also impact gas cost.",
        "created_at": "2025-04-03T21:56:40.676000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Call depth starts at 1?",
        "created_at": "2025-04-03T22:01:53.869000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "And `pc` thus does not start at 0, but at something like 20 (first op in first code section)",
        "created_at": "2025-04-03T22:02:32.471000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Testing",
        "parent": "",
        "content": "Yes, as does function depth.  and yes, section zero tends to be around 20 or so.  Depending on the contract",
        "created_at": "2025-04-03T22:02:57.222000+00:00",
        "attachments": null
    }
]