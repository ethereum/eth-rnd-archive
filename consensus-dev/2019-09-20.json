[
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "re attestations, we process any incoming attestations the same, regardless of their provenance (block, gossip) - notably, the ones in the block seem good to have during startup when the pool is not yet seeded from gossip since we don't sync attestations",
        "created_at": "2019-09-20T03:08:55.169000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "^ \u003c@363800010518822915\u003e",
        "created_at": "2019-09-20T03:09:09.655000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "general",
        "parent": "",
        "content": "that makes sense, I'm updating our beacon node to do the same. It does feel better to have the attestations in the block during start up (initial sync) to be accounted for fork choice",
        "created_at": "2019-09-20T03:10:52.734000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "we apply the same logic to blocks actually: doesn't matter where they come from (gossip, sync): they all go into a slush area until they've been linked to a parent and validated. at some point (we're at the gut-feeling stage still, so no well-researched algorithm, but happy to listen to ideas) it would be interesting to compare notes on strategies for managing these yet-to-be-validated blocks - though I suspect it's fine that we don't all do it the same way",
        "created_at": "2019-09-20T03:14:05.889000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "and same for attestations: they only count if they've been validated, but we keep unvalidated attestations around \"for a while\" in case we manage to validate their parent block",
        "created_at": "2019-09-20T03:15:18.583000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "(and consequently the attestation itself)",
        "created_at": "2019-09-20T03:15:34.373000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "We do it nearly same. Both attestations from blocks and gossip are counted by fork choice after they've been validated, it means that blocks should have parent and state root should match when block is applied to the state of previous slot which effectively the same as block inserted to the chain. \n\nAlthough, fork choice spec doesn't do full attestation verification, it only runs checks against those parts which have meaning to finality, we think that only attestations that are valid enough to be included on chain should go to the fork choice.",
        "created_at": "2019-09-20T05:40:58.280000+00:00",
        "attachments": null
    }
]