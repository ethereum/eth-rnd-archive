[
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "we (geth) are considering including a change which may, in very rare cases, construct payloads which do not have all the withdrawals that are requested by the CL.  I'm wondering if this breaks any assumptions by CL clients?",
        "created_at": "2025-06-10T11:25:03.979000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "the context for this change, is that we are implementing EIP-7934 which caps the size of blocks as part of the protocol.  So we can reach a situation where we cannot fit all the requested withdrawals and fit the resulting block within the protocol limit.",
        "created_at": "2025-06-10T11:26:46.489000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You can't calculate the withdraw size first, and then limit the rest of the block based on that?",
        "created_at": "2025-06-10T11:41:50.141000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Can someone construct a block that hits the size limit in under half of the gas limit?",
        "created_at": "2025-06-10T11:42:54.012000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "we could, but we also wanted to understand if all requested withdrawals being included in the produced block is an assumption that CLs currently have.",
        "created_at": "2025-06-10T11:42:56.726000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "i don't think so.  at 100 mil gas, it would cost the entire gas limit to construct a block that hits the limit using calldata to bloat the size.",
        "created_at": "2025-06-10T11:44:55.895000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Hopefully when the gas limit bumps to 200M people remember that an attacker can indefinitely pause withdraws.  ðŸ˜¬",
        "created_at": "2025-06-10T11:45:57.129000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "like i said, we will probably (definitely) take the safe route.  This was more a question if breaking the aformentioned assumption would cause some catastrophic error in the CL.",
        "created_at": "2025-06-10T11:51:22.117000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "This makes the payload invalid",
        "created_at": "2025-06-10T13:11:05+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Technically it will make the consensus block that contains that payload invalid.",
        "created_at": "2025-06-10T13:12:14.700000+00:00",
        "attachments": null
    }
]