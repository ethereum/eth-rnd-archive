[
    {
        "author": "jtraglia",
        "category": "general",
        "parent": "",
        "content": "Regarding changes to `compute_proposer_index` and `get_next_sync_committee_indices` for EIP-7251, I don't believe simply changing `MAX_EFFECTIVE_BALANCE` to `MAX_EFFECTIVE_BALANCE_ELECTRA` is enough. Currently, a validator with an effective balance of 40 ETH and a validator with 33 ETH have the same likelihood as being selected as proposer / sync committee participant. And the likelihood of being selected is slightly lower than it should be for validators with lower effective balances.\n\nThis is because we use an 8-bit random value in the validator filter, which was previously used to penalize validators with less than 32 ETH effective balance. A simple solution would be to use a 32-bit random value instead. This would provide enough \"buckets\" so that each effective balance increment adds the same likelihood increase. This wasn't a problem before because practically all validators were expected to have the same effective balance, so the filter was never that important.\n\nSee `compute_proposer_index` here: https://github.com/ethereum/consensus-specs/blob/abbfef5b3786b4ba6f0500da13be53a4caf6fcbe/specs/electra/beacon-chain.md?plain=1#L429\n\nSee a spreadsheet which explains the issue with numbers: https://docs.google.com/spreadsheets/d/18VeMVLO1jbP8xHkT4faGEb5SyrWQhQLcU-BtsL9pTss",
        "created_at": "2024-11-22T13:38:30.253000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "general",
        "parent": "",
        "content": "ah yes ðŸ™‚",
        "created_at": "2024-11-22T16:29:50.059000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "general",
        "parent": "",
        "content": "I am a bit scared of introducing yet another change to our attestation code though :/",
        "created_at": "2024-11-22T16:30:23.561000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "general",
        "parent": "",
        "content": "I think it could be added to devnet-6, if there is one",
        "created_at": "2024-11-22T16:31:04.381000+00:00",
        "attachments": null
    }
]