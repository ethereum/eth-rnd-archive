[
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "btw \u003c@755590043632140352\u003e - perhaps a weird question, but have you compared the perf of hashtree vs a plain hash of the data without generating a merkle tree? ie the cases are:\n* generate a merkle root of data\n* generate sha256(data) without tree\n\nsay we have 100 mb, for the sake of argument ðŸ™‚",
        "created_at": "2023-05-15T16:18:31.674000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "in general, I imagine hash_tree_root should have something like `O(N log N)` perf over N = bytes while the latter is `O(N)` but I wonder how the constant factor comes into play here",
        "created_at": "2023-05-15T16:19:48.379000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "specially when you're able to parallelize much of the tree processing whereas in a straight hash you don't have that luxury",
        "created_at": "2023-05-15T16:20:31.233000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Perhaps I didn't understand correctly but hashtree will not hash buffers. You can't even modify it to hash buffers. It only hashes 64 bytes. Of course if the question is hash  100mb/64b chunks vs running them though openssl then yes, that's the standard bench I'm doing",
        "created_at": "2023-05-15T16:40:17.440000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "so, hashtree will hash a bunch of 64-byte chunks that each is independent whereas a \"linear\" sha256 has a dependency on the previous block so it can't be parallelised..\n\nso the question can be reformulated as the performance of `hash_tree_root(data)` vs `sha256(data)`",
        "created_at": "2023-05-15T16:41:43.922000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "the question is relevant if you want to check integrity of the data without doing any merkle-tree-magic - ie if you don't care about the chunks but only about the integrity of the full blob",
        "created_at": "2023-05-15T16:42:50.264000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "is it faster / what's the relative cost to generate a merkle root using hashtree vs simply hash the data (as the command line utility `sha256sum` does)",
        "created_at": "2023-05-15T16:43:51.093000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "my initial thinking was that the benchmark against openssl was to generate the tree root, not a flat hash of all data (but I admit I didn't read the code)",
        "created_at": "2023-05-15T16:45:20.683000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "ah but `hashtree` will not produce 32 bytes from a buffer of `2N` chunks `data`,  `hashtree` will give you back `32*N` bytes from it. The benches I am doing on `gohashtree` are linear benches of `400 000` chunks against OpenSSL doing the same, on `hashtree` I'm only doing 32 chunks (which is more beneficial to OpenSSL).",
        "created_at": "2023-05-15T18:40:17.386000+00:00",
        "attachments": null
    }
]