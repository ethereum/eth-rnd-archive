[
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "Looking for feedback on this proposal for coordinating starts of testnets for interop testing. I know there are various ways that everyone does this internally, but it'll be useful to conform on a standard as we begin playing together\nThanks @jonnyrhea and \u003c@361447803194441738\u003e for input and feedback on this\n\nhttps://github.com/ethereum/eth2.0-pm/issues/60",
        "created_at": "2019-07-16T00:00:18.284000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "general",
        "parent": "",
        "content": "How come index in DepositEvent is not indexed? Would really help to obtain missing past deposits when beacon node is started.",
        "created_at": "2019-07-16T08:03:27.506000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "\u003c@545555441518772225\u003e in what sense are they not indexed ? Each deposit logged's index is the merkle tree index of that deposit",
        "created_at": "2019-07-16T08:05:25.183000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "general",
        "parent": "",
        "content": "Like contract event param is not indexed",
        "created_at": "2019-07-16T08:06:15.177000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "general",
        "parent": "",
        "content": "I mean , I know it saves some tiny gas but is it that important?",
        "created_at": "2019-07-16T08:06:49.587000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "general",
        "parent": "",
        "content": "When node is started I know last  deposit I've obtained and his index and would like to search DepositEvent logs just from that index onward and not from contract deployment block",
        "created_at": "2019-07-16T08:07:47.869000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "when the node starts up , we would still need to request all the logs from the contract from the start, I guess you can then store the deposit logs in the node and sort them by the index.",
        "created_at": "2019-07-16T08:14:10.095000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "or for your usecase, if you know the last deposit you have received",
        "created_at": "2019-07-16T08:14:30.161000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "you can just request for deposits from that eth1Block onward",
        "created_at": "2019-07-16T08:14:45.920000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "you wouldnt need to retrieve deposit logs all the way from the contract deployment of the deposit contract",
        "created_at": "2019-07-16T08:15:22.155000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "general",
        "parent": "",
        "content": "Hmm ok, yeah, that makes sense. It would still be useful  if we find a missing deposit in sequence of deposits because of connectivity/bug whatever",
        "created_at": "2019-07-16T08:19:23.481000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "general",
        "parent": "",
        "content": "But I guess we can work around it",
        "created_at": "2019-07-16T08:19:30.583000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "yeah it is annoying to do it this way, but I guess it makes the deposit contract simpler",
        "created_at": "2019-07-16T08:21:06.627000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "Since with deposits, you are tracking the latest Eth1 block containing said deposits already, can you not just use the eth1 block number as query filter? I.e. fromBlock and toBlock?",
        "created_at": "2019-07-16T11:39:58.668000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "general",
        "parent": "",
        "content": "yeah, I can, forgot about that and code was organized wierd so didn't have access to latest eth1 block. But my point still stands when you lose/skip deposit accidentally. ðŸ˜ƒ",
        "created_at": "2019-07-16T11:42:57.425000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "If you know the block number for surrounding deposits it can still work. But agree that indexing the log field makes sense, will bring it up with the contract maintainers.",
        "created_at": "2019-07-16T11:45:19.699000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "what's a good ssz paritials into?",
        "created_at": "2019-07-16T11:46:54.173000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "*intro?",
        "created_at": "2019-07-16T11:49:32.089000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "There's a doc on the specs repo that introduces generalized indices and multi proofs",
        "created_at": "2019-07-16T11:50:18.274000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "Really just think of it as a subset of the leaves from any hash tree root, with corresponding branches to the root. Leafs don't move (yay static generalized indices), so you get to specify a matching subset (fields/ranges corresponding to hash tree root leaves) of the container normally representing the data (complete hash tree), to just run proofs on whatever subset you're interested in. This can be a specific state property, or a particular validator state in the registry.",
        "created_at": "2019-07-16T11:55:35.802000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "Also, many of the ssz types are transparent: you can replace root fields with their full field type corresponding to that field root. E.g. block body root in block header. Now, do that with historical roots, or other big data types, and hashing the complete object would blow up. But with partials, you can limit it to exactly what you like, and proof data behind such transparent roots. E.g. proof a block with property xyz existed at a specific time long, long ago in history. Or proof a certain validator could have proposed some time ago, using active indices root.",
        "created_at": "2019-07-16T12:02:51.971000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cbenjaminion\u003e \u003c@449019668296892420\u003e Matt Garnett did a nice write up on partials as well: https://hackmd.io/@matt/SJE_v6Qer",
        "created_at": "2019-07-16T12:41:02.057000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctvanepps\u003e \u003c@291925846556540928\u003e can we get your input on this? \n\nhttps://twitter.com/JonnyRhea/status/1151116577850503168",
        "created_at": "2019-07-16T13:35:47.485000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**JonnyRhea** (in reply to **eth2_gitter_bot**)",
        "created_at": "2019-07-16T13:54:33.906000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "It don't think it is on Danny to reply.  The comment was for Vitalik or whoever is really in charge at the EF.",
        "created_at": "2019-07-16T13:54:39.130000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctvanepps\u003e @jrhea gotcha",
        "created_at": "2019-07-16T15:18:33.277000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "\u003c@291925846556540928\u003e, we are seeing different penalty calculations with: https://github.com/ethereum/eth2.0-specs/pull/1286",
        "created_at": "2019-07-16T16:22:00.448000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "is that expected?",
        "created_at": "2019-07-16T16:22:02.775000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "we were thinking it was just an overflow fix, not a difference in penality values",
        "created_at": "2019-07-16T16:22:42.243000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "This should be exactly the same. The reason this works is that `validator.effective_balance` is always guaranteed to be a multiple of `EFFECTIVE_BALANCE_INCREMENT`",
        "created_at": "2019-07-16T16:24:51.173000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "I'm checking it over once more though",
        "created_at": "2019-07-16T16:25:08.564000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "hmm we are implementing it exactly as in the spec and getting different values than before. We had hard coded numbers from python calculations and the new implementation fails existing unit tests",
        "created_at": "2019-07-16T16:25:36.469000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "Are you seeding validator balances directly with values that are not multiples of `effective_balance`?",
        "created_at": "2019-07-16T16:26:11.176000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "no",
        "created_at": "2019-07-16T16:26:47.393000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "its always max effective balance",
        "created_at": "2019-07-16T16:26:50.740000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "https://github.com/prysmaticlabs/prysm/pull/2977/files#diff-d00788a30b2b85085fd4cb09a50a7f75R423",
        "created_at": "2019-07-16T16:26:56.205000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "you can see that shay had to change tests here, but now we fail spec tests",
        "created_at": "2019-07-16T16:27:12.434000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "outputs are different",
        "created_at": "2019-07-16T16:27:19.700000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "You are using a non multiple of `EFFECTIVE_BALANCE_INCREMENT` in this test -- https://github.com/prysmaticlabs/prysm/pull/2977/files#diff-1f1585b87f035cff95c3110d93a619a3R779\n\nis that the one that was failing?",
        "created_at": "2019-07-16T16:30:06.713000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "ah yes, i see, that was under the fold and i didnt see it",
        "created_at": "2019-07-16T16:31:49.900000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "so there is an expected difference in output",
        "created_at": "2019-07-16T16:32:00.115000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "yes, but in practice, validator effective balance can only be multiples of `EFFECTIVE_BALANCE_INCREMENT`",
        "created_at": "2019-07-16T16:32:42.130000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "lower penalties for most",
        "created_at": "2019-07-16T16:32:53.488000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "so in any case that you would run into in the wild, the math results in the same",
        "created_at": "2019-07-16T16:32:54.666000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "ah",
        "created_at": "2019-07-16T16:33:00.134000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "ok i didnt realize that constraint, it's a non-issue then",
        "created_at": "2019-07-16T16:33:07.162000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "so it is non-substantive in the context of real state transitions. It is substantive for arbitrary inputs",
        "created_at": "2019-07-16T16:33:26.263000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "got it, thanks for clarifying, we'll update our test data and merge in latest spec tests",
        "created_at": "2019-07-16T16:34:56.454000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**protolambda**\nNoticed the pinned telegram message still contained the old expired invite link. Updated it. Link is: http://discord.gg/dtqe2TR",
        "created_at": "2019-07-16T17:57:36.162000+00:00",
        "attachments": null
    }
]