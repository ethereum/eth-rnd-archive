[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "~~If the block in slot 5 has a parent of the block in slot 4, and the block in slot 6 also has a parent of the block in slot 4, which has fork choice preference?  The block in slot 5 (because it came first) or the block in slot 6 (because it is the most recent)?~~",
        "created_at": "2022-08-14T15:48:17.217000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "~~I assumed slot 5's block is the fork choice, but a Twitter discussion is making me validate this assumption.~~",
        "created_at": "2022-08-14T15:48:39.559000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Answered by \u003c@486501030046203915\u003e.  Thanks!",
        "created_at": "2022-08-14T16:03:55.666000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "general",
        "parent": "",
        "content": "what was the anwer ðŸ¤”",
        "created_at": "2022-08-14T16:33:38.092000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Block 5 will receive 66% of votes, and block 6 (which is the same height as block 5) will receive 34% of votes.  So fork choice for an honest participant will favor block 5 over block 6.  If block 7 producer is honest, they will build on top of block 5 because it is \"heavier\" than block 6.",
        "created_at": "2022-08-14T17:53:20.944000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "This is not necessarily true. In a good network block 5 will get 100% of the votes. But there are other factors like proposer boost that can tip the network to 6 in some circumstances",
        "created_at": "2022-08-14T18:11:29.162000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I don't know where these numbers 66-34 came from",
        "created_at": "2022-08-14T18:12:24.029000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Sorry, the context of the conversation was what happens if 34% of validators are censoring and refusing to build on top of a block that includes a censored transaction.",
        "created_at": "2022-08-14T18:18:02.316000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The question was whether the network would partition, or if the 34% could influence things such that their censorship was followed by the 66% of honest users.",
        "created_at": "2022-08-14T18:18:38.604000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Do censoring validators also not attest to blocks that contain those transactions?",
        "created_at": "2022-08-14T18:19:03.781000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That is the assumption yes.  They essentially have a rule that says any block with transaction to/from X is invalid.",
        "created_at": "2022-08-14T18:19:41.844000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Which means their ruleset is a strict superset of the honest validator ruleset.",
        "created_at": "2022-08-14T18:19:57.808000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So what happens if such block is finalized?",
        "created_at": "2022-08-14T18:20:11.690000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So honest validators will attest to censorious validator blocks, but censorious validators will not attest to honest validator blocks.",
        "created_at": "2022-08-14T18:20:31.659000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Which lead to the question of whether it is possible in such a world for the chain to become censored with less than 50% of validators being censorious.",
        "created_at": "2022-08-14T18:21:07.871000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "By attesting to a descendant of such a block they need to consider the block as valid",
        "created_at": "2022-08-14T18:21:19.304000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Any idea what percentage of validators need to be censorious in order for them to be able to control the chain (accounting for proposer boost)?",
        "created_at": "2022-08-14T18:23:11.873000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So with 34% already the chain will not justify so I'd say it's \"controlled\"",
        "created_at": "2022-08-14T18:23:50.598000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Not finalizing is fine, because that leads to a partition and inactivity leak and eventual healing.",
        "created_at": "2022-08-14T18:28:10.124000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The thing to avoid is honest validators following the censored chain, and I'm curious what percentage of validators need to be censorious in order for honest validators to follow the censored chain.",
        "created_at": "2022-08-14T18:28:53.440000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So for the 1-slot fork of your example in block 6, the honest validators will follow a 30% attacker",
        "created_at": "2022-08-14T19:09:44.670000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "In reality the attacker will need less because he's likely to get consecutive blocks",
        "created_at": "2022-08-14T19:10:09.764000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Hmm, that is *way* lower than I expected.",
        "created_at": "2022-08-14T19:13:30.595000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This means that if a large pool has 30% stake and they come after a block that had a large amount of MEV available, they can simply reorg away the block before them and take the MEV?",
        "created_at": "2022-08-14T19:14:23.211000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yes",
        "created_at": "2022-08-14T19:22:40.861000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "But I wouldn't trust my calculation today with such a hangover",
        "created_at": "2022-08-14T19:25:39.720000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That seems problematic no?  It feels like the older block should be strongly preferred over the newer block.  What is the reasoning for preferring the newer block?",
        "created_at": "2022-08-14T19:25:42.293000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I guess if you strongly prefer the older block, it incentivizes the following block producer to wait as long as possible to see the preceding block before building, which increases the chance that their block will show up late for the next proposer.  ðŸ¤”",
        "created_at": "2022-08-14T19:27:12.356000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "It's the sandwich described in the first section of this note by Caspar \u003chttps://notes.ethereum.org/@casparschwa/H1T0k7b85\u003e were it's explained that with PB of 70% a 10% attacker would be successful",
        "created_at": "2022-08-14T19:38:22.200000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This further reinforces my belief that the consensus core devs need to publicly commit to being willing to write code and support clients that fork away from and penalize censorious validators.",
        "created_at": "2022-08-14T19:43:55.629000+00:00",
        "attachments": null
    },
    {
        "author": "bbuddha.xyz",
        "category": "general",
        "parent": "",
        "content": "What's the best way to learn how merklization works on the beacon chain? specifically, trying to figure out how to do proofs against state roots in beacon block headers",
        "created_at": "2022-08-14T20:25:49.837000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "ssz spec",
        "created_at": "2022-08-14T20:27:01.009000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/tree/dev/ssz",
        "created_at": "2022-08-14T20:27:12.979000+00:00",
        "attachments": null
    },
    {
        "author": "bbuddha.xyz",
        "category": "general",
        "parent": "",
        "content": "ty",
        "created_at": "2022-08-14T20:28:23.304000+00:00",
        "attachments": null
    }
]