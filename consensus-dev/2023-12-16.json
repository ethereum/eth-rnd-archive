[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "this is fine, and it was not the first time that something was speced in anticipation of somethng that never happened. But the events are that:\n1. We added this field to the engine API thinking well, we don't have this mechanism at the merge, but surely is a silly problem to solve, we won't delay the merge for this, better, to just add it to the API and not have breaking changes later. \n2. Oh no, we have a proble, the CL spec needs to specify what to do with this field when we send an FCU call.  That's fine, let's just put \"this is a stopgag\", everyone will understand when we have the final mechanism. \n3, The stopgag stayed and now we have issues raised because people expect clients to follow this as if it had any consequences for the network. \n\nThere are some things that need to be specified because otherwise there will be a consensus failure. \nThere are others that need to be specified because the first rules don't enforce enough (think on honest behavior). \nThere are others that need to be specified to protect the network from DOS and the such.\nAnd then there are some that don't need to be specified at all, like this one, or (now that Danny is here) how we account for justification if either using bits or balances ðŸ¤£",
        "created_at": "2023-12-16T02:37:45.187000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "In PoW `latest` could be \"more confirmed\" than in PoS, this is because of the PoW seal attached to a block. The desire was to have a replacement to that in PoS accompanying `latest` with something similar to a block with the PoW seal, moreover there was a promising research on the way to move the `safe` as close to the head as the protocol allows to and it was supposed to happen soon after the merge.",
        "created_at": "2023-12-16T03:25:02.302000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I think we can do the following:\n1. Expose the following: `finalized` (I think it can be set to unrealized finalization), `justified` (filled with unrealized justification), `confirmed` (the most recent confirmed block as per the confirmation rule), `latest` (the head), `safe` should be an alias to `justified` by default. \n2. Clients can allow to alias `safe` to any of the above. I personally don't see any value of that because an app devs will rather make this alias in their code. Because that would make switching between different nodes easier -- they simply don't have to ensure that `safe` is properly configured on a node\n\nSo the minimal change would be:\nRename `safe` to `justified` in the Engine API + alias `safe` to `justified` in the EL clients code.\n\nOnce the confirmation rule is supported by most of the clients it would make sense to add `confirmed` to the Engine API and JSON-RPC.\n\nAnd the above makes sense is if we want to expose block confirmation data via JSON-RPC. cc \u003c@301186049323958275\u003e \u003c@755590043632140352\u003e",
        "created_at": "2023-12-16T03:34:14.491000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Agreed. With (1), disagree with (2) for the reason you stated.",
        "created_at": "2023-12-16T03:41:56.076000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think having safe == justified is fine for now, maybe in the future we'll come up with something we can move it to.",
        "created_at": "2023-12-16T03:42:23.668000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I disagree, I  think it's fine to expose finalized, justified or whatever else you want to expose. But I think the notion of safe should be user configurable and not enforced by the spec",
        "created_at": "2023-12-16T05:39:31.308000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The problem is that the application author is often not the same \"user\" as the client operator.",
        "created_at": "2023-12-16T06:01:29.102000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "And the specific application is what determines what is \"safe\" as I described here https://discord.com/channels/595666850260713488/598292067260825641/1185117972310798356",
        "created_at": "2023-12-16T06:02:38.221000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "that's part of the point, for a payment operator, it's fine for them to chose finalized as safe and act upon them. For  the backend server of a dapp, it may make more sense to use unrealized justified or even something more aggressive (admittedly I don't know anything reasonable less than unrealized justified at the moment). The user of such dapp may not consider this to be safe, or even better, the dapp itself may provide different options to their users. Whatever it is, diversity and flexibility here is a feature, not a network wide security risk, and we should not be restricting our users choices without any strong reason to do it.",
        "created_at": "2023-12-16T20:14:17.999000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The argument I'm making here isn't that users/dapp shouldn't be able to choose.  It is that the operator of Ethereum clients is very often not the user/dapp.",
        "created_at": "2023-12-16T20:15:44.980000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "In fact, it is quite rare (sadly) that users/dapps run their own Ethereum Clients.",
        "created_at": "2023-12-16T20:16:04.665000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So any EL/CL configuration would be made by the client operator, not by the people who have the information necessary to make a decision on what is \"safe\".",
        "created_at": "2023-12-16T20:16:30.836000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "well and here is why default options have to be safe enough. If the node operator is evil enough to change them well, they can do much worse things.",
        "created_at": "2023-12-16T20:24:15.499000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I don't see the advantage of the node operator being able to change them.  It will just make it so people can't rely on safe meaning something consistent, which will result in no one using it.",
        "created_at": "2023-12-16T21:04:24.939000+00:00",
        "attachments": null
    }
]