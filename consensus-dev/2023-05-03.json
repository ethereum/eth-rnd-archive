[
    {
        "author": "matt.nelson",
        "category": "general",
        "parent": "",
        "content": "Hi CLs team - Besu users are seeing some whacky instances where the CL is requesting huge reorgs (19k slots plus) at the end of syncs or after being offline for a small time. Often the EL + CL behave strangely between the pivot block and the head of the chain. some CLs spam FCUs to close this gap or others walk through the blocks in order but can confuse our sync pipeline. We even see malformed FCUs creating these giant reorgs. \n\nMy question - how would the CLs behave if we ignored reorg events outside of the finality period (or maybe finality*2 depth)? Would they attempt another FCU? break? \n\nWe are seeing bugs that we cant decide if we should patch out on our side since the behavior is different on every CL. Thanks!",
        "created_at": "2023-05-03T18:49:11.423000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "I thought it was invalid to send an FCU that tried to change the finalized block?",
        "created_at": "2023-05-03T21:29:00.541000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "If I'm reading things right https://github.com/ethereum/go-ethereum/blob/d0fbb10658a85f0b2bd4466892747758bacddaf7/eth/catalyst/api.go#L314 is where geth would reject a FCU where the new finalized block is not in the current canonical chain (ie you can't revert finality)",
        "created_at": "2023-05-03T21:32:58.095000+00:00",
        "attachments": null
    }
]