[
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "What CL devs are thinking on EL restarting payload build process every time the `fcU` happens despite of no changes to payload attributes? How often it is the case when CL client replays `fcU` with the same arguments? Related PR discussion https://github.com/ethereum/execution-apis/pull/401",
        "created_at": "2023-04-17T11:12:40.955000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I can speak for prysm and even more lighthouse, this is a bad idea. Lighthouse will send several times FCU, many times it will be repeated. Prysm I think does this less often but it happens. It will be very very difficult to change this",
        "created_at": "2023-04-17T11:35:29.208000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "It's also a centralizing force cause the builder is able to deduplicate so this increases the difference between builders blocks and local ones",
        "created_at": "2023-04-17T11:36:29.467000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "+1 to what \u003c@755590043632140352\u003e said, Lighthouse will often send the same fcU call with the same payload attributes, and it would be unfortunate if payload building had to restart with each one. We run fork choice frequently to re-assess what the head is, and will send payload attributes each time if we are due to propose.\n\nWe could modify Lighthouse to remedy this by de-duplicating, but _if_ we were to do this I think it would be better to coordinate it around a hard fork to prevent issues.\n\nIs the benefit of restarting payload building mainly for the specification's sake, or the implementation's simplicity? I think the ideal thing for the CL (at present) would be a (hash)map from payload attributes to IDs, which AFAIK is what Geth implements.",
        "created_at": "2023-04-17T12:08:58.037000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "The benefit would be in implementation simplicity. It seems natural to handle deduplication on EL side as EL is a server in this interaction. The question is more about should we deduplicate or not",
        "created_at": "2023-04-17T12:22:45.606000+00:00",
        "attachments": null
    }
]