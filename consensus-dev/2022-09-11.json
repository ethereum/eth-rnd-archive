[
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "As discussed on the CL call, here is a PR to the Engine API which requires clients use a fixed `jwt-secret` when the API is bound to `127.0.0.1`: https://github.com/ethereum/execution-apis/pull/302",
        "created_at": "2022-09-11T00:41:22.365000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Automatic reorgs cannot happen after finality.  The only way to reorg after finality is to download a new client with code that does that, so someone else cannot cause you to reorg past finality if you run your own node.",
        "created_at": "2022-09-11T04:34:55.848000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Re: client diversity: it is incredibly dangerous to run a majority client.  You may witness incorrect finality.  If you are doing any kind of off-chain settlement, you should absolutely not run a majority client.",
        "created_at": "2022-09-11T04:36:14.341000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "On a running node this will not happen unless there's a bug in the protocol that allows for this, even if there's a malicious player willing to slash 1/3 of the total stake. However, a client in the presence of such a bad actor that is willing to slash 1/3 of the total stake, you can have two contending finalized  branches and if you resync from any finalized state before those two (like genesis) there's no telling where you'll end up",
        "created_at": "2022-09-11T12:59:52.135000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Regarding 2. Can't really know what's the minimum stake that can ruin the merge as this could leverage on knowledge of client bugs and protocol bugs.  Also as far as I know we haven't tested at scale the client behavior in presence of mass slashings so in principle we can all break with a simple 1% of the stake. But I don't think any attacker can dare to test the protocol/clients by slashing 1% of the total stake without any certainty that it will succeed. In principle we should be able to handle up to 33% without any trouble, but already 10% of the stake is 72 million dollars at current prices and you'll need to be short off chain since such an attack is attributable and we can come after the attacker retroactively",
        "created_at": "2022-09-11T13:17:32.244000+00:00",
        "attachments": null
    },
    {
        "author": "ekryski",
        "category": "general",
        "parent": "",
        "content": "Totally. This was my thinking as well. Not out of the realm of possibility which is a bit concerning, but the game theory encourages everyone to behave and from all the discussions I've been involved with seems everyone is wanting this to go well. That being said, we run node across 9 different chains and anyone that does knows that main net is always a whole different beast due to the variable and economic incentives.",
        "created_at": "2022-09-11T23:10:24.381000+00:00",
        "attachments": null
    },
    {
        "author": "ekryski",
        "category": "general",
        "parent": "",
        "content": "We're running the Lighthouse client (which isn't ideal if you ask Micah) but I took a look at how they are determining a valid next block in the merkle tree after Micah mentioned it's not possible to reorg after a block in finalized epoch, and while I'm far from a Rust expert, the logic (and the code) looked pretty solid.",
        "created_at": "2022-09-11T23:11:51.375000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I can't speak for sigma prime devs, but we all think our code is pretty solid until it isn't. I wouldn't bet against the merge, but saying that it's infallible would be naive",
        "created_at": "2022-09-11T23:13:56.682000+00:00",
        "attachments": null
    },
    {
        "author": "ekryski",
        "category": "general",
        "parent": "",
        "content": "One of the concerns that popped into my head late yesterday was that because the \"safe\" finality time is significantly larger (~12.8 min) than what a lot of platforms were using on PoW (12-30 blocks - 3-6 min), if they don't change their logic I think there is a much higher possibility of seeing a reorg, flash loan, or replay attack **before** an epoch is finalized.\n\nThis is why we're changing ours logic at Bidali.\n\nI've been trying to ask our exchange contacts but they've all been pretty tight lipped on what they are doing and my gut is because they aren't exactly sure either. ðŸ˜…",
        "created_at": "2022-09-11T23:17:03.478000+00:00",
        "attachments": null
    },
    {
        "author": "ekryski",
        "category": "general",
        "parent": "",
        "content": "Has this been discussed before? If not, might make sense to document how best to determine \"safe\" transactions publicly. We looked in the public docs and then started asking around because it wasn't super clear (also came at this later than we wanted due to resources ðŸ˜… )",
        "created_at": "2022-09-11T23:21:06.003000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Users can query for finalized or \"safe\" block and the execution client will provide those. I think this was communicated well",
        "created_at": "2022-09-11T23:45:46.231000+00:00",
        "attachments": null
    },
    {
        "author": "ekryski",
        "category": "general",
        "parent": "",
        "content": "Hope so. Whenever we asked how people were determining \"safe\" blocks we got a \"that's a good question\" response.",
        "created_at": "2022-09-11T23:52:26.642000+00:00",
        "attachments": null
    },
    {
        "author": "ekryski",
        "category": "general",
        "parent": "",
        "content": "It's not an insignificant change for us tbh and I know for a fact we built our system to be more flexible than most due to the types of networks we support. So I will not be surprised if some platforms try and just say \"we're waiting for more blocks than before\" because that's how a lot of their systems work. Kraken and Coinbase actually hinted at this in emails to customers...",
        "created_at": "2022-09-11T23:53:41.895000+00:00",
        "attachments": null
    },
    {
        "author": "ekryski",
        "category": "general",
        "parent": "",
        "content": "In any case... don't want to pollute this channel. Thanks for the confirmation \u003c@755590043632140352\u003e and \u003c@301186049323958275\u003e. We feel confident in how we're handling it now and will have Eth payments paused until we see how the chain state looks during and post merge, like everyone else.",
        "created_at": "2022-09-11T23:56:39.276000+00:00",
        "attachments": null
    }
]