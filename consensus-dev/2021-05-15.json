[
    {
        "author": "tes1207",
        "category": "general",
        "parent": "",
        "content": "How is rewriting transaction history prevented in the POS system? (ex. Someone making up data for all the RANDAO + VDF processes and then signing off alternative blocks?)",
        "created_at": "2021-05-15T17:25:45.964000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "The execution layer performs the same checks they are performed today on the execution payload. If they fail then the consensus block is rendered invalid. During nocturne a node started sending blocks intending to rewrite history and the other nodes did not include these blocks in the canonical chain, so this is already working fine",
        "created_at": "2021-05-15T20:13:27.917000+00:00",
        "attachments": null
    },
    {
        "author": "tes1207",
        "category": "general",
        "parent": "",
        "content": "\"During nocturne a node started sending blocks intending to rewrite history and the other nodes did not include these blocks in the canonical chain, so this is already working fine\"\n\nWhat do you mean by this? The nodes only accept the earliest submitted reasonable history?\n\nIf so, someone could fake a history where most RANDAO + VDF validators drop out so that the process would select his/her own addresses as the future block producers. And he/she can then submit these blocks before the canonical submissions.",
        "created_at": "2021-05-15T22:13:09.938000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "The example I gave wasn't about trying to trick the eth2 side, so no faking RANDAO (which I wouldn't know how to do and if it were possible I would probably save that knowledge for after the merge)",
        "created_at": "2021-05-15T22:15:35.526000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "this was about an actual validator during it's turn to propose a block, embed an eth1 block rewriting history",
        "created_at": "2021-05-15T22:16:21.569000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "and the other eth2 nodes did not accept this",
        "created_at": "2021-05-15T22:16:30.890000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "I'm not sure why you're bringing RANDAO/VDF into this. It seems that you're hinting at long range attacks (weak subjectivity), which boils down to taking (partial) control of the validator set (while making sure not to get slashed, or not as much). See https://notes.ethereum.org/@adiasg/weak-subjectvity-eth2 (and the links and references it contains) for more details.",
        "created_at": "2021-05-15T22:22:07.760000+00:00",
        "attachments": null
    },
    {
        "author": "tes1207",
        "category": "general",
        "parent": "",
        "content": "I mean, if it's just about one turn, the block producer surely can't make a block contradicting the previous blocks, hence no rewriting here. If it proposes two conflicting blocks at the same block height, there would be slashing.\n\nHowever, RANDAO, from what I read, is about validators giving their own numbers in sequence and then some evaluators combining these numbers to calculate the VDF results as seeds for selecting next block producers. Someone could pretend to be offline during the 'giving numbers' period and let the canonical chain do its work. However, he/she could make up and use a number later to make up his/her own fake chain where he/she is online during the 'giving numbers' period and where the VDF results would point to his/her own addresses to be the next block producers. Thus, he/she could rewrite a history different than what is going on in the canonical chain.",
        "created_at": "2021-05-15T22:30:07.726000+00:00",
        "attachments": null
    },
    {
        "author": "tes1207",
        "category": "general",
        "parent": "",
        "content": "I read about check points, that, along with trusted third parties, could solve 'long range attacks'. But what about 'short range attacks' between check points? I wrote an example above.",
        "created_at": "2021-05-15T22:31:44.219000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "But who is attesting to these blocks? Unless you control 66% this chain would not finalize",
        "created_at": "2021-05-15T22:33:51.438000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "You can make your own private chain, and if you control 1% of the validators you have 1% of the staked balance attesting to it. Even if you propose every block on your private chain, everyone would just ignore you when you publish it because 99% of the validators did not attest to them (i.e. they already have their finalized chain).",
        "created_at": "2021-05-15T22:36:07.009000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "If you bring VDF into the mix (again, not there yet), you need one online VDF evaluator (orthogonal to proposers/validators) to provide the randomness. This is an even stronger guarantee than RANDAO (which requires at least one honest validator).",
        "created_at": "2021-05-15T22:37:55.718000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "In that example above, other eth2 nodes will just ignore any blocks proposed by you since you were out of turn according to their view of the world",
        "created_at": "2021-05-15T22:40:29.821000+00:00",
        "attachments": null
    },
    {
        "author": "tes1207",
        "category": "general",
        "parent": "",
        "content": "In that made up example, an attacker could actually publish the VDF results before the canonical, honest evaluators by using better ASICs than the standard ones.",
        "created_at": "2021-05-15T22:46:24.153000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "What VDF results? There is no VDF in eth2. And even if there would be an attack based on manipulating the VDF (I doubt it), just include some other source of randomness as well (like the current RANDAO)",
        "created_at": "2021-05-15T22:48:13.810000+00:00",
        "attachments": null
    },
    {
        "author": "tes1207",
        "category": "general",
        "parent": "",
        "content": "Hmm, you are talking about this? https://notes.ethereum.org/@djrtwo/Bkn3zpwxB?type=view#RANDAO\n\nSo the participants first give a number in hash format, then they give the numbers in normal format to be used. If one of the participant doesn't give the number in normal format, the process fails and restart? So the last one (or several ones if they collude) to submit the numbers in normal format could choose to submit the numbers or not to bias the results.\n\nVDFs are supposedly to be used to solve this problem. The Ethereum foundation seems to be developing standard VDF hardware to give to people. Anyway, if VDF is not used, it seems some validators could keep clogging up the network by restarting the RANDAO process again and again. If VDF is used, the thing I mentioned could happen, and using something like the current RANDAO should have its own problems.",
        "created_at": "2021-05-15T23:10:09.466000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "Yes, biasing is possible with RANDAO, but with so many validators online it becomes rather difficult. I still have a hard time understanding what your \"short range attack\" is though. Is it a short-term re-org of a couple blocks/slots, a couple epochs?",
        "created_at": "2021-05-15T23:11:56.851000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "It'd be great if you could write it out a bit more (maybe on ethresear.ch), but if you do you probably also want to be really sure you understand the fork-choice rules (LMD-GHOST iirc) and how validator committees and block proposers are assigned. I think block proposers are assigned at the start of an epoch (i.e. known only for the current epoch), and validator roles are assigned/known for the current epoch and the next. I'm definitely not an expert on all this though, and you're much more likely to get a proper detailed answer there if you work out your attack referring to documentation on Ethereum's PoS internals.",
        "created_at": "2021-05-15T23:18:50.056000+00:00",
        "attachments": null
    }
]