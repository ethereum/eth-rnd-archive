[
    {
        "author": "nflaig",
        "category": "general",
        "parent": "",
        "content": "Hey, when implementing slashing protection on the VC side based on https://github.com/protolambda/eth2-surround#min-max-surround. What is the required epoch lookback when tracking min-span to check for surrounding attestations? Based on https://hackmd.io/@n0ble/By897a5sH#Scanning-for-surrounding-votes looks like it needs to be the number of epochs in weak subjectivity period?",
        "created_at": "2023-04-28T17:19:51.943000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "The protocol doesn't need more history than the weak subjectivity period because it doesn't mind if there are slashable attestations created outside that period. Somebody _could_ still collect slashable attestations over a longer period though, which is why I would say using the min-max approach for slashing protection is a bit risky. Slashers default to a period of 4096 epochs but can be configured to collect over a longer period (\u003chttps://lighthouse-book.sigmaprime.io/slasher.html#history-length\u003e).\n\nIMO the best slashing protection strategy is the \"minimal\"/high-watermark strategy, as used by Teku. You just need to track the max source and max target of attestations signed by each validator, and never sign any attestation with `source \u003c max_source` or `target \u003c= max_target`. These are conditions 4 and 5 from EIP-3076 (\u003chttps://eips.ethereum.org/EIPS/eip-3076#conditions\u003e), and I've formally proved that this strategy is safe in this repo: \u003chttps://github.com/michaelsproul/slashing-proofs\u003e.",
        "created_at": "2023-04-28T23:11:32.710000+00:00",
        "attachments": null
    }
]