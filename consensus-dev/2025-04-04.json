[
    {
        "author": "francis.li",
        "category": "general",
        "parent": "",
        "content": "To be honest, this feels like an design \u0026 implementation defect, go is a strongly typed language, and  implementing api \u0026 structs with `BeaconStateFulu`, `BeaconStateElectra` with slightly different fields every hard fork feels anti pattern to how we should evolve and upgrade our APIs \u0026 core data structures, I've gone through this pain trying to implement cell proof computation with all the beacon API changes.\n\nAdding this to the extra grpc bn / vc api prysm's implemented, everything is doubly hard now, but imho these could and should be fixed.\n\nOn another note, agree that BPO change currently is not simple in terms of implementation in prysm, however from your description, it does seem like straightfoward and could be done with no more than a few days which seems acceptable?",
        "created_at": "2025-04-04T01:04:20.422000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "If i am not mistaken EIP-7917 will also affect VC that keeps a proposer lookahead to know when to propose. Not sure how much engineering and testing efforts this part involves",
        "created_at": "2025-04-04T05:35:32.851000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "general",
        "parent": "",
        "content": "I can't speak to Prysm's design, but can say that Nimbus has specific `phase0.BeaconState`, `altair.BeaconState`, `bellatrix.BeaconState`, `capella.BeaconState`, et cetera objects. These are not variant or similar objects (and similarly for `BeaconBlock`s), they represent exactly that one fork, because it captures so many useful constraints, e.g., blocks from fork $FOO apply to states of fork $FOO. Nim is a statically typed language (it has generics, so it's fairly painless and scalable for us to do this; Go has some sort of generics too, though, so maybe it can do similar things, I don't know). It also means that the state transition function itself is specialized/monomorphized in each case -- the entire set of codepaths knows, statically, in a typesafe way, that it's dealiing with matching and specific forks and enables further compile-time tricks along these lines. These all get statically type-checked.",
        "created_at": "2025-04-04T05:50:44.636000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "general",
        "parent": "",
        "content": "This is why BPOs would be currently a bit alien to the Nimbus codebase -- when Nimbus sees, say, an Electra or Fulu block, it knows, _at compile time_, that the (yes, runtime, but of `_ELECTRA`, `_FULU`, etc), config value it should use is the one from whatever specific fork. But it's feasible anyway, those lookups would have to check this separate runtime structure first. They would absolutely not be treated as \"forks\" in any meaningful sense, in terms of the internal logic",
        "created_at": "2025-04-04T05:53:52.386000+00:00",
        "attachments": null
    },
    {
        "author": "linoscope",
        "category": "general",
        "parent": "",
        "content": "EIP-7917 won't change the beacon chain's external interfaces, so I don't expect it to affect the VC logic used to fetch proposer lookahead information.  If anything, this EIP may simplify things by allowing VCs to remove some corner-case handling around epoch boundaries, as they'll have guaranteed certainty about the next epoch's proposer duties, rather than the near-certainty they currently have. But such simplifications are optional, and don't need to be made right away.",
        "created_at": "2025-04-04T06:05:57.905000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I don't think it would affect the VC much, the beacon would respond faster to the same duties requests",
        "created_at": "2025-04-04T10:57:50.845000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Oh I should have continued reading lol",
        "created_at": "2025-04-04T10:59:45.857000+00:00",
        "attachments": null
    },
    {
        "author": "ladidan",
        "category": "general",
        "parent": "",
        "content": "starting in ~1 hour: beam call #3 - p2p networking\nCurious to join? Please DM for a calendar invite ðŸ™‚",
        "created_at": "2025-04-04T12:59:27.584000+00:00",
        "attachments": null
    }
]