[
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "There was some recent discussion around timing for the API `block` event, which varied significantly from team to team (is this event emitted when the block is received over P2P, validated enough so that it may be used in fork choice, fully validated including execution payload, etc.)  The difference in selection points made me wonder: with proposer boost, there is a 4s cut-off for proposer boost, but where is that time measured?\n\nThe specs have:\n\n```\ntime_into_slot = (store.time - store.genesis_time) % SECONDS_PER_SLOT\n```\n\nwhere I assume that `store.time` is the current wall time, and\n\n```\n`on_block(store, block)` whenever a block `block: SignedBeaconBlock` is received\n```\n\nbut we have already seen that `received` is a bit of a fluffy concept.  Do teams have an agreed point in the block import process that allows for a general consensus as to if a block is within the 4s window?",
        "created_at": "2023-10-19T08:24:11.719000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "That `on_block` is the point where the block is being imported I believe.  Small differences in the point where the time is taken don't matter (ie one client might do it right at the start of block processing, others at the end) - that's just another little variance like network delays or clocks being imperfect which the system already has to deal with.\nI would say though that its important not to apply the boost before you can actually import it though. Particularly if you haven't received the parent yet.  I'm pretty sure you couldn't actually attack that but it opens a lot of complexity around publishing the child block before the parent.",
        "created_at": "2023-10-19T19:08:26.107000+00:00",
        "attachments": null
    }
]