[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I think we all queue these attestations, the difference is in when we process them. At prysm we process these attestations twice per slot, we had a PR to insert them in the pool as soon as the block arrived but we tested in on Prater and it didn't make any positive impact so it wasn't merged.",
        "created_at": "2023-06-16T00:08:39.278000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "a notable point here is that the window where clients have the block but have not yet validated it has grown considerably since the merge due to the EL now validating the block - we could introduce the following rule in the spec to work around this: allow gossip propagation of attestations for a block that has been observed to be gossip-valid (without waiting for state transition / EL verification - this slightly loosens the rule but also allows attestation propagation to happen in parallel with block validation - obviously, these attestations would have to wait for block verification to finish before they are admitted into fork choice",
        "created_at": "2023-06-16T07:15:54.781000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "we already do this for the blocks themselves so adding attestations/syncmessages to this flow is not a considerable departure",
        "created_at": "2023-06-16T07:16:44.914000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "nimbus was somewhere in-between - we have a queue for this but there are a few special cases in the pipeline where an attestation might still be dropped - this used to work well practically but we'll likely plug those gaps since the method is less efficient now with ever larger blocks",
        "created_at": "2023-06-16T07:23:01.758000+00:00",
        "attachments": null
    }
]