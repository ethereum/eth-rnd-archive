[
    {
        "author": "fradamt",
        "category": "general",
        "parent": "",
        "content": "Would an increase in `BALANCE_PER_ADDITIONAL_CUSTODY_GROUPS` actually be problematic given that the spec already says this?\n\n\u003e If a node's custody requirements decrease, it SHOULD NOT update the custody_group_count to reflect this reduction. The node SHOULD continue to custody and advertise the previous (highest) `custody_group_count`. The node SHOULD continue to respond to any `DataColumnSidecar` request corresponding to the previous (highest) `custody_group_count`. The previous (highest) `custody_group_count` SHOULD persist across node restarts.",
        "created_at": "2026-01-19T11:12:45.975000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "general",
        "parent": "",
        "content": "why would that be problematic? also this all-time-high aspect of the spec was always problematic, more broadly, for exactly this reason, but that's a different topic",
        "created_at": "2026-01-19T11:14:54.720000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Hi, in the context of an ePBS PR I'm interested in confirming this: what is the status of the snappy encoder, version and settings that is being used in the CL? is this enforced/specified to be the same?",
        "created_at": "2026-01-19T12:15:53.495000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "general",
        "parent": "",
        "content": "it is not, no",
        "created_at": "2026-01-19T12:16:13.208000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "general",
        "parent": "",
        "content": "For example, Nimbus uses its own implementation",
        "created_at": "2026-01-19T12:16:41.572000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "general",
        "parent": "",
        "content": "and I've never seen anywhere in the specs which disallow or discourage that",
        "created_at": "2026-01-19T12:17:01.923000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "cc \u003c@520034910149410861\u003e I think keeping the compressed size on Prysm will not be trivial at all, we use a generic function to decompress all gossip objects, and in addition to this there's the problem that I am pointing out in this channel: different clients will encode differently the payload",
        "created_at": "2026-01-19T12:17:20.128000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "so the size over the wire will be different depending on the proposer, probably not an issue at all assuming clients do not decompress/compress and resend",
        "created_at": "2026-01-19T12:17:49.069000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "but in principle clients can be receiving the exact same SSZ object with different sizes over the wire. Can we use the SSZ size instead as a mid term compromize?",
        "created_at": "2026-01-19T12:18:15.754000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yeah I don't think that'll be trivial to enforce at all. I think adding compressed size to forkchoice can bite us back. I'll add a note to this thread in the PR",
        "created_at": "2026-01-19T12:19:02.512000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "general",
        "parent": "",
        "content": "I brought this up in ACDT when we initially discussed to decrease custody requirements for Fusaka already as an argument to already do it now since custody can't be decreased later on but I think \u003c@412614104222531604\u003e brought up that people can just delete their db and I would assume this is fine",
        "created_at": "2026-01-19T12:23:22.939000+00:00",
        "attachments": null
    },
    {
        "author": "fradamt",
        "category": "general",
        "parent": "",
        "content": "We removed snappy from it",
        "created_at": "2026-01-19T12:24:38.631000+00:00",
        "attachments": null
    },
    {
        "author": "fradamt",
        "category": "general",
        "parent": "",
        "content": "The reason was in part a mismatch with the `MAX_PAYLOAD_SIZE`, which is uncompressed, and would mean that the deadline ends up always much tighter than necessary (or would require us to have a constant for `MAX_COMPRESSED_PAYLOAD_SIZE` or something), and in part things along the line of your concerns",
        "created_at": "2026-01-19T12:26:43.787000+00:00",
        "attachments": null
    },
    {
        "author": "fradamt",
        "category": "general",
        "parent": "",
        "content": "One consideration here is that there's an EIP to increase the calldata floor gas cost to 60, and there's some interest in potentially making this 60 even for 0 byte, making the worst case pricing uniform. In that case, using the uncompressed size would work perfectly, as we'd have the guarantee that a large uncompressed block uses a lot of gas for calldata and thus does not need a lot of time for execution",
        "created_at": "2026-01-19T12:28:41.751000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Oh lol, I just addded the comment to the function with the previous implementation!",
        "created_at": "2026-01-19T12:32:23.054000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Well, anyway will stay there for documentation, I left one extra comment about a missing field in the payload attestation data being constructed",
        "created_at": "2026-01-19T12:32:48.567000+00:00",
        "attachments": null
    }
]