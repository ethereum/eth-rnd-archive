[
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "We just store the justification information for each block in the database so we can reload it without recreating the whole state.",
        "created_at": "2022-05-29T01:59:42.668000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "And theyâ€™re small and only stored for non finalised blocks so itâ€™s not a concern for storage size.",
        "created_at": "2022-05-29T02:00:01.465000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "When you say that they are only stored for non finalized blocks, you actively remove this from dbase when the blocks are finalized?",
        "created_at": "2022-05-29T10:23:41.729000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "Yep as part of the pruning process when finalising.",
        "created_at": "2022-05-29T11:06:08.744000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "thanks, this does work, and we need to fix our pruning of non-canonical nodes anyway ðŸ˜„",
        "created_at": "2022-05-29T11:07:08.785000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "We moved to this model as part of the follow up to the medalla chaos. We used to wind up replaying non finalised blocks and it didnâ€™t go well for medalla.",
        "created_at": "2022-05-29T11:08:06.219000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I started lurking just when Medalla blew out, but I remember Victor at Prysmatic going crazy with the init-sync code at the time refactoring this, I suspect it was the same cause RAM was exploding so probably they were loading everything to forkchoice. I know very little about database handling so not sure how painful it would be adding the justified info, I suppose it should be fine",
        "created_at": "2022-05-29T11:10:21.651000+00:00",
        "attachments": null
    }
]