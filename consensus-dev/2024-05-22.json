[
    {
        "author": "shrevespringer",
        "category": "general",
        "parent": "",
        "content": "I was looking at how caching works for the balances: List[Gwei, VALIDATOR_REGISTRY_LIMIT] list in the BeaconState container. From what I understand, this is how the hash tree root of the balances list is calculated:\n\n1) balances list is first serialized, where each of the Gwei is serialized as uint64(8 bytes), and the length of the list is also prefixed as uint64(8 bytes). All these serialized elements are concatenated in sequence with the length prefix.\n2) merkleize_chunks(pack(X)) calculates the hash tree root, where X is the SSZ list described in this first point. The pack function breaks X into 32-byte chunks.\n\na) When we talk about caching here, are we talking about the hash of all the 32-byte chunks (essentially the leaves) and all the intermediate hash until the root hash?\nb) Since we are caching 32-byte chunks hash (leaves), we are indirectly caching 4 consecutive Gwei (8 bytes * 4) in the list right?\n\n\u003c@755590043632140352\u003e",
        "created_at": "2024-05-22T04:15:24.292000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yes, typically clients would cache every intermediate hash on the head state, so if only a few balances change for example, you only need to rehash a few leaves and intermediate hashes instead of the whole tree again",
        "created_at": "2024-05-22T07:27:54.256000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "per earlier discussions (https://github.com/eth-clients/eth2-networks/issues/84), mainnet metadata can now be found here: https://github.com/eth-clients/mainnet",
        "created_at": "2024-05-22T07:30:03.196000+00:00",
        "attachments": null
    }
]