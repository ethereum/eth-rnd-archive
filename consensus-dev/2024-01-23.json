[
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "on the flip side, the exit queue length and activation queue length is pretty easily accessible info, you could tell if its a bad time to churn pretty easily...",
        "created_at": "2024-01-23T06:57:47.942000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/issues/3449 this is the best list I could find but Im not fully across all the SSZ features yet to answer your question directly...",
        "created_at": "2024-01-23T06:58:59.217000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "activation queue may unexpectedly grow after you have submitted an exit. There is still a plenty of space for uncerstainty because of that",
        "created_at": "2024-01-23T12:04:31.485000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "what's the problem with making these messages part of block processing and immediately transferring and exiting the corresponding validator?",
        "created_at": "2024-01-23T12:40:27.452000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "These have their own churn by block process and operators won't have downtime",
        "created_at": "2024-01-23T12:41:02.234000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "if exiting is immediate they can escape slashing",
        "created_at": "2024-01-23T12:41:57.960000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "i am (also) of the opinion that maxEB be done without inbuild consolidation, those who wanna consolidate will by withdrawing etc",
        "created_at": "2024-01-23T12:43:04.676000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "this allows us to make minimum assumptions about staker's intend",
        "created_at": "2024-01-23T12:44:31.678000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "How so? hese can be checked at block processing the message if they were already slashed, and the churn can be made as slow as you want (say 16 vals per block) to make any attack on consensus unfeasible.",
        "created_at": "2024-01-23T13:15:19.777000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Why would someone like Coinbase consolidate thousands of keys, leaking weeks for their users and showing less rewards than its competitors?",
        "created_at": "2024-01-23T13:19:11.249000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "you're talking about a separate consolidation churn and immediate transfer after validator passes through this churn? This is actually what the most recent design is proposing (consolidation does also respect the min withdrawability delay). In this design the activation churn is bypassed making potential rewards loss limited and well predictable",
        "created_at": "2024-01-23T13:28:53.323000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I think I'm talking about a much simpler design: the churn is just because blocks can only include 16 of these messages per block max. You just check that the validator is not slashed at this time, exit it immediately and transfer its balance. It's true that this validator can commit a slashable offense after being exited, but this is irrelevant for the protocol and there's nothing to gain as there can't be a correlated attack by the small number of validators that can carry this attack at the same time",
        "created_at": "2024-01-23T13:44:18.335000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "then have a 7002 design for withdrawal signed validator consolidation with instant switch per limited (16) validators and obviously charge slashings to the consolidated validator, so track another field inside beacon state for consolidatedTo[validatorIndex] so as to not modify original validator stuct",
        "created_at": "2024-01-23T13:54:46.118000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "with consolidations bypassing the churn (even if there is just 1 per block) an adversary will be able to create divergent validator sets and finalize conflicting checkpoints without being slashed much sooner than the WS period",
        "created_at": "2024-01-23T14:16:21.985000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "how so?",
        "created_at": "2024-01-23T14:20:27.717000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Consider two forks: one without consolidation, another one where consolidation has happened. After consolidation the source on the former and the target on the latter can vote on conflicting checkpoints without neither of them being slashed (it is required that the target doesn't vote on the fork where consolidation did not happen)",
        "created_at": "2024-01-23T14:30:12.377000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I don't understand, in the fork where there's consolidation, the exited validator cannot attest (only very few can, because only very few can be included per block, so only very little stake that is exited can attest). So in the consolidation fork, only the consolidated stake can attest. In the other fork, only the non-consolidated stake can attest.",
        "created_at": "2024-01-23T14:45:43.387000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "imagine a stake per consolidation is (2048-32) ETH, so after one epoch of consolidations 32*(2048-32) = 64,512 ETH can start voting on conflicting checkpoints",
        "created_at": "2024-01-23T14:56:04.452000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "this is an easy solution to the above problem",
        "created_at": "2024-01-23T15:49:28.834000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "general",
        "parent": "",
        "content": "i guess the concern would be if you get to vote in first slot, consolidate second slot, vote x2 in third slot, consolidate to another in 4th, vote in 5th.... rinse repeat... worst case could greatly amplify your voting power, unless any attestations made were somehow accounted for, and that does sound painful...\nSome kind of simpler approach though is attractive if we can find one\nI'd be in favour of making ppl just wait, its not a huge inconvenience in the scheme of things... ppl. waited through a queue of over 1 month happily (relatively)",
        "created_at": "2024-01-23T19:53:26.671000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "yes, I proposed the exact same thing when Max EB was discussed in ACD,  I thought at the time that there was broad consensus over this, but since I didn' t see any of the writers including these and keeping 7002 alone I assumed there wasn' t interest. One possible reason may be scope: it could well be that we have agreement on 7002 to be in while not Max EB, in which case we would want to scope 7002 to the minimum",
        "created_at": "2024-01-23T20:14:06.987000+00:00",
        "attachments": null
    },
    {
        "author": "__kasey__",
        "category": "general",
        "parent": "",
        "content": "That list was what prompted my question - on inspection of the ssz-related EIPs on the table, I think only 6404 and 7549 have the potential to use Optionals. If Electra does not include 6404, or option 3 of 7549, I don't see a reason to implement 7495 for Electra.",
        "created_at": "2024-01-23T21:12:58.882000+00:00",
        "attachments": null
    }
]