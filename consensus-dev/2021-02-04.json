[
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "I meant a different philosophical question. One may argue that Weak Subjectivity itself is a way to influence nodes to support a particular fork. So in this case introducing more features like syncing the chains with a help of trusted artifacts (checkpoints, snapshots, etc.) influences the freedom of nodes, because in practice different parties will try to promote their fork, and trusted artifacts make it easier. But the contra position would be that these trusted artifacts will help to maintain a single main chain and this is exactly what the community wants. So this is a philosophical question and it will be very interesting to see after validators will be allowed to exit and make coordinated long-range attacks.",
        "created_at": "2021-02-04T10:40:16.852000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "I‚Äôm not sure how snapshot sync makes any real difference to the likelihood of a fork. People generally know what chain they‚Äôre trying to sync and if they wind up on the wrong one take, whether that‚Äôs syncing from genesis or a snapshot, they take action to fix it and get onto the chain they wanted. \n\nAlso note that all clients support weak subjectivity checkpoints which has the same effect of a trusted source ensuring your on a specific chain but without the benefit of near instant sync.",
        "created_at": "2021-02-04T10:44:21.329000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "I guess I just don‚Äôt follow your initial statement that weak subjectivity is a way to influence support for a fork.",
        "created_at": "2021-02-04T10:45:35.371000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "How in practice nodes will know about the available forks?",
        "created_at": "2021-02-04T10:50:09.265000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The user will notice when they have no balance because their exchange withdraw was sent to chain X and they are on chain Y.",
        "created_at": "2021-02-04T10:51:06.219000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "They may have to do a bit of troubleshooting to figure out the root cause, but they are unlikely to \"accidentally\" use the wrong chain.",
        "created_at": "2021-02-04T10:51:22.690000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I believe this is fundamentally what makes long range attacks non-viable.  Even if you execute a long range attack successfully, it just means you'll have a fork that started years ago and people will be unlikely to sync to it, and if they do sync to it they are unlikely to actually use it, and if they actually use it it will be unlikely that it is an accident.",
        "created_at": "2021-02-04T10:52:17.365000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "My point is that trusted artifacts increase the attack surface. Different parties may use it in order to influence nodes (for example, some party corrupts the source you trust or make a campaign that changes nodes' opinion on what is the community chain). So instead of just promoting trusted artifacts usage, we could give more information for nodes to decide. For example - scan the network for available forks and give more information, such as what volumes of validators voted on each chain, what is the percentage of double votes in each fork, etc. This information would be trustless information collected from the network. It's probably possible to come with some user-friendly scoring that is way harder to trick than corrupting a trusted source. But I understand your position that the trusted artifacts may work very well in reality, the future will show.",
        "created_at": "2021-02-04T12:23:46.649000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "No matter what, there are trusted artifacts.  Whether that is the genesis block hash or block hash 100,000,000, you still have to get that from *somewhere*.",
        "created_at": "2021-02-04T12:27:09.673000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "\u003e \"My point is that trusted artifacts increase the attack surface\"\n\u003e \"some party corrupts the source you trust\"\nI hope you see the irony in that üòâ \nEither way you already have to trust e.g. the clients to do what you expect them to do, and not do anything nefarious (be it changing the genesis block, the weak subjectivity point, or taking your money and running with it). You can trust them \"once\", and then keep up with head until an upgrade is required. I don't see how the trust model substantially changes from what we currently have to be honest.\n\n\u003e For example - scan the network for available forks and give more information, such as what volumes of validators voted on each chain, what is the percentage of double votes in each fork, etc\nWhat is stopping me from making my own chain where I give myself a whole bunch of validators for free?",
        "created_at": "2021-02-04T12:33:26.510000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "In my understanding, calculating 100,000,000th block hash using trusted genesis is a way trustless than getting that hash from _somewhere_",
        "created_at": "2021-02-04T12:36:21.645000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "a.o. you're still trusting your client to do the correct thing though, and to end up at the correct head. Just as an example, ETH and ETC have a common ancestor. The 100,000,000 block hash for ETC is not the same as the one for ETH.",
        "created_at": "2021-02-04T12:42:29.682000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "ETH/ETC is embedded in the client. However, my latest knowledge was that trusted artifacts on ETH 2.0 will not be embedded in the clients and instead passed as parameters. So this comparison with ETH/ETC isn't very good.",
        "created_at": "2021-02-04T12:47:57.272000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "So you're saying that what you want is that the clients grab the trusted state from their GitHub repo automatically?",
        "created_at": "2021-02-04T12:49:42.973000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Calculating the 100,000,001th block hash from a trusted genesis vs a trusted 100,000,000th block is equivalent.",
        "created_at": "2021-02-04T12:50:34.317000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "In both cases you trust the starting point and the code that executes transitions.",
        "created_at": "2021-02-04T12:50:49.757000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "*When* the starting point is doesn't matter (block 0 or block 10 or block 100,000,000).",
        "created_at": "2021-02-04T12:51:12.448000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "You cited my words and I expressed that I would like to avoid fetching trusted states completely.",
        "created_at": "2021-02-04T12:52:18.880000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "In my understanding it's much harder to fake genesis after 100,000,000 blocks than to fake _somewhere_ the hash of 100,000,000 block",
        "created_at": "2021-02-04T12:53:12.898000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I don't see why that would be the case.  Both are trusted roots, and both trusted roots can be compressed to a 32-byte trust assertion.",
        "created_at": "2021-02-04T12:53:52.616000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "Also, isn't the genesis root still provably part of a newer weak subjectivity checkpoint?",
        "created_at": "2021-02-04T12:56:29.787000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "What is harder to corrupt - the majority of places that mention Ethereum 1.0 genesis or the majority of places that mention 100,000,000th block hash?",
        "created_at": "2021-02-04T12:56:45.181000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "There is absolutely no guarantee that you end up at the \"correct\" 100M block hash by _just_ trusting the genesis block hash. As \u003c@!301186049323958275\u003e said, you have to trust execution as well.",
        "created_at": "2021-02-04T12:58:43.752000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "The genesis block hash is part of the weak subjectivity point afaik (with the historical root accumulator), so then what you are trusting is the execution to get from there to the weak subjectivity point.",
        "created_at": "2021-02-04T12:59:43.804000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "Well, I hear what you saying, you are saying that trust more because you can't avoid trusting anyway (genesis, client implementation etc.). However, I say - trust less if it's possible as this may help to be more secure. Yes, you can always win this trust/trustless debate as you can always point to client implementation as obviously one can't sync the chain in the head üôÇ",
        "created_at": "2021-02-04T13:05:37.843000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "Also, I'm not arguing that there aren't differences in attack vectors between PoW and PoS. The latter has e.g. this disadvantage of long range attacks (that we're discussing), but in turn has advantages like being able to kick out offenders. With PoW this would be impossible, as they can just keep coming back disrupting your chain. It's all trade-offs.",
        "created_at": "2021-02-04T13:12:51.868000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I don't believe you have to trust more.  I assert that the trust requirements are the same.",
        "created_at": "2021-02-04T13:23:24.613000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You must trust your starting point plus the execution engine/ruleset.  There is no known way around that.  All starting points can be reduced to a 32 byte trust assertion, so genesis vs regenesis or whatever both require trusting 32 bytes of data plus the execution engine.",
        "created_at": "2021-02-04T13:24:34.821000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "No doubt PoS is a major innovation and let's hope it will work fantastic in the future. However, we could somehow try to inform users more. Just an example, we could leverage the current success of the Eth 2.0 mainnet. It has an extremely high participation rate. So instead of allowing blindly trust artifacts from _somewhere_ we could maybe make clients throw warnings if user actually wants a community chain but for some reason the user specified checkpoints are of some other chain with low participation.",
        "created_at": "2021-02-04T13:36:51.191000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "What is a \"community chain\"?",
        "created_at": "2021-02-04T13:37:36.400000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "The one that is attacked by offenders mentioned by \u003c@!397389662085185547\u003e üôÇ",
        "created_at": "2021-02-04T13:38:52.486000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "There is no guaranteed way of knowing this \"low participation\". That's the whole point of long range attacks. As long as you stay on head or reasonably close (lagging at most a few days/weeks), you're fine anyway. And this is what most validators seem to be doing.",
        "created_at": "2021-02-04T13:39:07.741000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "Well, that's why I told \"throw warnings\" instead of dropping the chain. I may be missing something, but with such a high participation rate it should not be possible to make an alternative chain via long-range attack that is similarly highly participated during the entire chain.",
        "created_at": "2021-02-04T13:47:24.084000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "Someone more knowledgeable should probably weigh in on this. I can't seem to poke holes in this, but I'm fairly certain it is not secure.",
        "created_at": "2021-02-04T14:01:23.140000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "I think this is the key misunderstanding that's leading you astray.  It doesn't matter what the participation level is, if you're starting your sync from outside the weak subjectivity period, it is absolutely possible for someone to make an alternative chain via long-range attack and it can have 100% participation.  https://www.symphonious.net/2019/11/27/exploring-ethereum-2-weak-subjectivity-period/ goes through this in a bit more detail (and links to Vitalik's post which has *all* the detail), but let's look at a simple case.\n\nLet's say (for simplicity) that all of the original genesis validators from MainNet have exited and withdrawn their funds.  MainNet has plenty of validators that joined after genesis so its ticking along fine. But those genesis validators can no longer be slashed because they've withdrawn their funds.  So they go back and create a different block 1 on top of the original genesis, then a new block two on that and so creating a chain that's just as long as the \"real\" MainNet.  They also attest to these new blocks and they're the only validators so participation is high.  They also vote for fake Eth1 blocks and include deposits that add more validators that they control so the number of validators goes up. So you wind up with a chain that's just as long as MainNet, has just as many different validators as MainNet, has the same or higher participation than MainNet but has different content.  They also create a lot of nodes (or perform an eclipse attack) so you have as many or more peers on the alternative chain now as the real one.\n\nThere is absolutely no way to tell which of those chains are valid without having some trusted source tell you. That's the core fact here - you can not differentiate the attack chain from the real one.",
        "created_at": "2021-02-04T20:11:16.360000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "Now the attack doesn't have to be all the genesis validators, it can be any significantly large set of exited validators. And it doesn't have to start from genesis - it could fork off the \"real\" chain 5 million slots in and then diverge from there. It still creates an indistinguishable chain - your node has no chance of knowing which one is the right chain unless you tell it because they both perfectly follow the state transition rules.",
        "created_at": "2021-02-04T20:13:21.467000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Impressive, and the links are even better üëè",
        "created_at": "2021-02-04T21:22:20.082000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I wish I had an evil mind, people come up with impressive constructions",
        "created_at": "2021-02-04T21:23:27.072000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "I missed repeating again that you still need to analyze available chains etc. (I wrote about it above), basically all available information that could help to decide what chain to follow. Even in the original Vitalik's article, he provided an example of a subjective scoring function. So for your given example, a node would need to sync available chains (including ETH1) and try to get a better view of who is trying to cheat. So if the genesis validators exited and double voted on the other chain - the node can score it accordingly. If the other chain has fake validators that actually didn't deposit on the ETH1 chain that the node sees - the node can score it accordingly. It becomes a bit more tricky if there is low participation as the node doesn't know what non-participating validators are hiding, but if the participation is high it becomes easier to analyze the situation. Just to note, you seem to ignore any outside data and focus only on the fact that it's possible to have conflicting chains that \"both perfectly follow the state transition rules\".  However, my point is that you can do the analysis of the available information (even ETH1 chain) and have a much better view of which chain to follow. So in your example, the fake chain can be easily detected using outside information, if you have a more sophisticated example - I would love to hear it.",
        "created_at": "2021-02-04T23:52:51.708000+00:00",
        "attachments": null
    }
]