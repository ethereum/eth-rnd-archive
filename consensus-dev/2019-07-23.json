[
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "has anyone thought about node architecture w/ \"shard nodes\"",
        "created_at": "2019-07-23T00:37:20.614000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "for example, does the \"beacon node\" just suddenly get more stuff in it?",
        "created_at": "2019-07-23T00:37:55.487000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "i'd be curious to explore \"shard nodes\" separate from beacon nodes but defining a notion of 'separation' that makes sense could be tricky",
        "created_at": "2019-07-23T00:38:37.829000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "In Lighthouse we have some vague plans to build out a separate versions of our `types` and `state_processing` modules for shard nodes, and then have them share the same networking/syncing logic as the beacon chain client. We're going to try to enforce quite clear separation so that we can have our Phase 0 code audited without there being Phase 1 stuff mixed up in it",
        "created_at": "2019-07-23T00:41:27.431000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "and then ultimately have a multi-process thing going on?",
        "created_at": "2019-07-23T00:41:55.133000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "it seems like having shard nodes separate from beacon nodes is \"cleanest\" -- it does imply some kind of orchestration layer tho",
        "created_at": "2019-07-23T00:43:11.872000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "general",
        "parent": "",
        "content": "I think beacon node and shard node should be separated with different architecture given different state transitions and different network domains (beacon chain and shard chain)",
        "created_at": "2019-07-23T00:43:39.434000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "general",
        "parent": "",
        "content": "But this does add complexity where a validator client need to talk to beacon node and shard node simultaneously",
        "created_at": "2019-07-23T00:43:45.521000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "right",
        "created_at": "2019-07-23T00:43:50.022000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "general",
        "parent": "",
        "content": "an orchestration layer makes sense to me",
        "created_at": "2019-07-23T00:44:08.926000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "i guess at the minimum, you have your validator client driving which shards you have local, ya",
        "created_at": "2019-07-23T00:44:21.576000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**decanus**\nNot sure if this is the chat to dump anything, but https://github.com/decanus/swarm-adaptive-node/blob/master/user-stories/user_adaptive.md the concepts behind adaptive nodes might be worth looking at and potentially taking into consideration for eth2.0 nodes",
        "created_at": "2019-07-23T00:52:51.573000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "I think a logical separation here makes sense but keeping in mind that a shard always needs a beacon master. In terms of the API endpoint (for validators and other user applications), you should keep this all generally as one unit rather than splitting it up and talking to multiple endpoints imo. `get_beacon_block_candidate`, `sync_shard`, `drop_shard`, `get_shard_chain_head(shard_id)`, etc would all sit behind one logical controller imo. The cool thing is that the beacon chain and shard chains could all be on one server or load balanced across multliple servers but the endpoint makes it seem to the user a single entity. At the end of the day the protocol is a beacon chain + some amount of shard chains and the endpoint should expose the protocol to the user",
        "created_at": "2019-07-23T01:58:14.595000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "with restful interfaces, it's kind of easy to hide such a load-balanced solution behind a unified proxy",
        "created_at": "2019-07-23T07:54:12.534000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "Anyone have a fix for `ModuleNotFoundError: No module named 'eth2spec'` while running the pyspec tests? I have a virtualenv and I've followed the instructions in the `pyspec/README.md` but it's failing when it tries to load the config in `eth2spec/test/conftest.py`. I'm using the v0.8.1 and used to have this working on v0.6.3",
        "created_at": "2019-07-23T09:22:07.007000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e You have to set your python path to include the directory containing the eth2spec mod, like the makefile does.",
        "created_at": "2019-07-23T09:24:42.720000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "I think the coverage pytest plugin broke it, or maybe xdist (parallel tests). It somehow needs that path information now, but easy to do (and most python IDEs should do it already anyway)",
        "created_at": "2019-07-23T09:27:09.913000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "Wonderful, that worked, thank you",
        "created_at": "2019-07-23T09:28:06.262000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nI'm a bit confused by one of the methods in Merkleization of SSZ v0.8.1:\n\nbitfield_bytes(bits): return the bits of the bitlist or bitvector, packed in bytes, aligned to the start. Exclusive length-delimiting bit for bitlists.\n\nWhile I certainly understand how to pack the bits of the bitX in bytes and align it at the start, I have no clue what the line \"Exclusive length-delimiting bit for bitlists\" means. What's the expected behavior of that function?",
        "created_at": "2019-07-23T18:41:25.425000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nBecause that method is part of the recursive defintion of merklization, I think it's important that its behavior is well defined as a part of the SSZ spec.",
        "created_at": "2019-07-23T18:43:05.786000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "If you have a bitlist or bitvector, pack the data into bytes (little endian)",
        "created_at": "2019-07-23T18:54:17.430000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "W/ a bit vector you know the length of the set of Boolean values so you can proceed",
        "created_at": "2019-07-23T18:54:47.489000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "W/ a bitlist, you donâ€™t know the length of the set of Boolean values from the serialized data so you communicate this by setting the bit corresponding to the length of the serialized set",
        "created_at": "2019-07-23T18:56:13.428000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "..... if that makes sense",
        "created_at": "2019-07-23T18:56:22.153000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "You have to make the length of the bitlist so you know where in the byte is the end of the lost",
        "created_at": "2019-07-23T18:56:40.414000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "* list",
        "created_at": "2019-07-23T18:56:43.182000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "The highest set bit is the length of the list and the rest of the data in the serialized bit list is the bitlist data",
        "created_at": "2019-07-23T18:57:18.269000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nAh, so just like serializing them works.",
        "created_at": "2019-07-23T18:59:16.975000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Yep, you serialize on the way to merkelization",
        "created_at": "2019-07-23T18:59:35.829000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "This comment was just to make it clear, it seems",
        "created_at": "2019-07-23T18:59:48.530000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nI must've missed that bitfield_bytes instead of pack handled serializing in the bitlist/vector case.",
        "created_at": "2019-07-23T18:59:56.296000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "P sure you pack the bitfield_bytes",
        "created_at": "2019-07-23T19:00:27.040000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nI was under the impression that it would've followed the pattern bitfield_bytes(pack(bitlistvecObj)). My bad.",
        "created_at": "2019-07-23T19:00:30.271000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nEh, by pack I mean the pack helper method. Naming is confusing.",
        "created_at": "2019-07-23T19:00:45.206000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Oh you donâ€™t but itâ€™s the identity in the case",
        "created_at": "2019-07-23T19:00:53.301000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "So you can skip it",
        "created_at": "2019-07-23T19:00:57.125000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Yeah the helper... in this case bitfield_bytes is just a specialization of pack",
        "created_at": "2019-07-23T19:01:31.711000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nYeah, makes sense. I was just thinking it already had all that done, then there was another mystery \"exclusive length delimiting bit\" being added somewhere for something.",
        "created_at": "2019-07-23T19:02:00.339000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Itâ€™s the same one ðŸ˜ƒ",
        "created_at": "2019-07-23T19:03:09.526000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nI'm just relieved that I'm not losing it (yet).",
        "created_at": "2019-07-23T19:04:14.182000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nOne more clarification. merkleize expects orderd BYTES_PER_CHUNK-byte chunks (i.e. a 32-byte chunk). bitfield_bytes just says \"packed in bytes\", should it really say \"pack in BYTES_PER_CHUNK-bytes\"?",
        "created_at": "2019-07-23T19:10:22.410000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**protolambda**\n@schroedingerscode the pack function is defined to return the data in chunks. This is done because a real implementation may not really copy the actual data into an output, and just return a chunkified view of the data, if possible as optimization.\n\nAlso, bitlists are merkleized without the lenght delimiting bit in the last byte, as they already have a length mix in anyway. Whereas in serialization it is necessary to tell the difference in bitlength of two equal size byte arrays.",
        "created_at": "2019-07-23T20:00:30.525000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "So there is a difference then â€” I at least was reading that the wrong way",
        "created_at": "2019-07-23T20:13:48.365000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "To clarify, when you merkelize a bitlist, you donâ€™t include the leading length bit",
        "created_at": "2019-07-23T20:14:34.312000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**schroedingerscode**\nOhh, ok. Yeah perhaps that wording can be improved. \"Exclusive of the length-delimiting bit for bitlists.\" or \"Exclude the length-delimiting bit for bitlists.\" might make more sense. The current wording made it sound as if there was a bit used exclusively for merklization purposes.",
        "created_at": "2019-07-23T20:19:11.650000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**protolambda**\nbrevity vs clarity, ehh :(",
        "created_at": "2019-07-23T20:21:01.169000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_bridge_bot",
        "category": "general",
        "parent": "",
        "content": "**protolambda**\nYou're welcome to submit a mini PR though, get your feet wet in ssz spec :)",
        "created_at": "2019-07-23T20:21:28.433000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "For client implementers working with  the spec tests: @everyone I made a long form description of issues we are facing, needs we have, and I invite you to answer some survey questions: https://github.com/ethereum/eth2.0-specs/issues/1311",
        "created_at": "2019-07-23T21:12:33.429000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "\u003c@203220829473996800\u003e what does this mean? `Is compression difficult with your test loader?`",
        "created_at": "2019-07-23T21:32:12.526000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "What it entails for you to handle compressed files during test runs.",
        "created_at": "2019-07-23T21:33:33.795000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "Will add it to the post, thx",
        "created_at": "2019-07-23T21:33:43.638000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "Sure, working on answers for you now",
        "created_at": "2019-07-23T21:34:00.517000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "awesome",
        "created_at": "2019-07-23T21:34:43.225000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "the numbers are also off in your issue",
        "created_at": "2019-07-23T21:39:53.082000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "there are two 14, 15",
        "created_at": "2019-07-23T21:39:55.732000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "ah, markdown, never lets you down. Changing it to all 1. again, then it should auto format",
        "created_at": "2019-07-23T21:40:18.879000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "ðŸ˜ƒ",
        "created_at": "2019-07-23T21:40:23.180000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "general",
        "parent": "",
        "content": "fixed those numbers, thanks. Blame hackmd auto list formatting ðŸ˜…",
        "created_at": "2019-07-23T21:41:59.371000+00:00",
        "attachments": null
    }
]