[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Hey \u003c@425572898787426305\u003e are you around? we keep the `latest_execution_payload_header` in the beacon state, and it's only used to check that the incoming payload parent hash is a descendant of the latest execution block, is this right? Why do we need to keep the full header instead of just the blockhash? This was useful for the merge but it's not used ever since am I right?",
        "created_at": "2024-02-29T12:21:30.962000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Initially there were other validations on top of checking the parent hash. I think keeping the full header is fine considering its small size comparing to the state and it might be useful for some additional processing in the future.",
        "created_at": "2024-02-29T12:29:20.801000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "There were validations for the merge, but not after it",
        "created_at": "2024-02-29T12:31:11.160000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I want to get rid of it in ePBS",
        "created_at": "2024-02-29T12:31:21.184000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "why?",
        "created_at": "2024-02-29T12:32:27.989000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "This also forces the CL to deal with types that we don't care about at all, we are importing uint256 libraries to deal with gas values and a bunch of other things that are completely useless",
        "created_at": "2024-02-29T12:32:29.347000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "we have had countless bugs of marshalling/unmarshalling because of Big Endiann/ Little Endian, and every time the header changes we need to deal with this change in the beacon state as well. I don't see any reason to be keeping a structure that is not used at all",
        "created_at": "2024-02-29T12:33:24.545000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I'll open an issue in the CL repo about this",
        "created_at": "2024-02-29T12:33:33.727000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/issues/3612",
        "created_at": "2024-02-29T12:36:44.982000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "some CLs were building empty EL blocks, not sure if this is still the case",
        "created_at": "2024-02-29T13:07:56.465000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "tbh, i don't see marshalling issue as a problem anymore as we have tests for this",
        "created_at": "2024-02-29T13:09:34.205000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I take the opposite view: if something is not used at all, it should not be included in the state, it's tech debt and we keep adding new structures to our protobufs `ExecutionPayloadHeaderForkXYZ` for no reason whatsoever",
        "created_at": "2024-02-29T13:12:56.447000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Even the tests are useless, they use our CI time for no reason whatsover, and each fork needs to add new testvectors for something we don't use.",
        "created_at": "2024-02-29T13:13:53.375000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "from my perspective this is a small engineering and spec writing overhead as test generation automatically extends the structure. i am not 100% sure that this data won't be needed in the future. thinking about stateless payload validation with the following params: (parent_header, payload)",
        "created_at": "2024-02-29T13:34:46.820000+00:00",
        "attachments": null
    }
]