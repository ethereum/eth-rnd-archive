[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "We want to run FC early because if we were betting on reorging the current head and we're wrong (we find this out when running forkchoice) then we still get 2 seconds to build a block. Sure in a world where everyone uses external builders this is useless, but one can still hope",
        "created_at": "2023-06-02T00:44:41.836000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Optimistic blob availability is absolutely crazy",
        "created_at": "2023-06-02T03:53:05.929000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "The builder is likely to be the only one with the blobs",
        "created_at": "2023-06-02T03:53:25.599000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I would really want to have the discussion to separate the payload from the blobs, I don't know who to bribe to do this. It's a no brainer to me that we need something like this",
        "created_at": "2023-06-02T03:55:14.409000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "\u003c@688748669268132001\u003e could you please expand on `dependant_root` pattern (re: https://github.com/ethereum/consensus-specs/pull/3371#discussion_r1214144350) what is it about?",
        "created_at": "2023-06-02T09:38:55.334000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I am wondering how bad is 1 second of local block building process vs it lasts for 2 seconds, cc \u003c@360491619402776577\u003e",
        "created_at": "2023-06-02T09:41:39.183000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "general",
        "parent": "",
        "content": "Sure, please check this specs for the API route for polling duties. https://github.com/ethereum/beacon-APIs/blob/master/apis/validator/duties/proposer.yaml",
        "created_at": "2023-06-02T09:49:45.487000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "general",
        "parent": "",
        "content": "`dependant_root` is used as a unique identifier where the validator client assumes duties are unchanged if the dependant root is the same. The validator client can then subscribe to an event stream where the beacon node alerts the validator client of re-orgs. If the dependant_root changes then it re-polls beacon duties and might trigger block production routine",
        "created_at": "2023-06-02T09:51:52.838000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "general",
        "parent": "",
        "content": "validator_client then can assume to poll duties once per epoch unless there's a re-org of enough depth. With EIP-6988 the validator client must poll more frequently, at least once per slot. If it's subscribed to events, it can poll in response to any head change which might alter the proposer for the next slot.",
        "created_at": "2023-06-02T09:53:29.547000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "It depends on which transactions are in the txpool. It is possible that the rate of empty blocks will increase a lot if we only have 1s to build the block. We can only return a block, if we have enough time to execute all potential transactions that fit into the gaslimit, otherwise we return an empty block",
        "created_at": "2023-06-02T09:53:54.456000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "The problem might be that there is no event that will tell VC that it has to propose next slot because a validator that supposed to propose in this slot has been slashed recently",
        "created_at": "2023-06-02T09:58:06.435000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "general",
        "parent": "",
        "content": "Right, so the VC has to assume that the next proposer changes on every block",
        "created_at": "2023-06-02T09:59:08.669000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Thanks for the input! I will think on the potential path forward with this change",
        "created_at": "2023-06-02T10:00:22.368000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "the optimistic part refers to validity and not availability, although the relays could move to this regime as well",
        "created_at": "2023-06-02T17:34:27.756000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "\u003e separate the payload from the blobs\nwhat exactly do you mean here?",
        "created_at": "2023-06-02T17:36:00.038000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "this would be a much more invasive change but we could retain the current semantics by batching the processing of slashings to epoch boundaries -- i haven't thought if there would be any unintended consequences of this w/in a given epoch though",
        "created_at": "2023-06-02T17:39:44.920000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "https://ethereum-magicians.org/t/uncouple-blobs-from-the-execution-payload/13059",
        "created_at": "2023-06-02T17:40:09.807000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "i would be against 6988 as is if it means the shufflings could change every slot, i'd rather go the other direction and fix the shufflings with more lookahead like the attestation shufflings",
        "created_at": "2023-06-02T17:40:36.691000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "gotcha, thanks, i do see you call this out but home stakers can always just not include blob transactions",
        "created_at": "2023-06-02T17:42:18.622000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "they could also outsource *just* blob handling while still building the rest of the block locally as another intermediate step before just stopping ops altogether",
        "created_at": "2023-06-02T17:42:57.660000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "my current disposition here is that we dont know enough about how things will look in 2,3,5(?) years to say what the biggest problems will be",
        "created_at": "2023-06-02T17:43:38.131000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Cc \u003c@363800010518822915\u003e we're also suffering with this proposal \u003c@425572898787426305\u003e, it does start to look like a lot of complexity for little current gain",
        "created_at": "2023-06-02T17:52:48.718000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yes, but this is nonetheless an unnecessary centralizing design. If the mev boost blocks didn't pay much more than local constructed ones we wouldn't see that many validators running through the relayer (eg Lido forcing operators) and we are seeing on mainnet the consequences of this design decision in that there are many more missing slots since the unbundling attack, that is, latency on a few nodes being run by relayers is affecting almost all blocks in mainnet. If there's any market for blob space and validators can monetize this, then the difference between local construction and the builder's one increases. I don't agree with these centralizing designs unless they're unavoidable.",
        "created_at": "2023-06-02T18:13:56.192000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Ah this was reply to this",
        "created_at": "2023-06-02T18:14:16.976000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "the margin comes from exclusive order flow tho, so until some kind of miracle happens (i’m being a little facetious) there isn’t a good way to get solo staking with “good” block building",
        "created_at": "2023-06-02T20:02:45.772000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "SUAVE et al are research directions that address this",
        "created_at": "2023-06-02T20:03:09.329000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "the point is that by decoupling some home stakers may choose to outsource blob building and not forfeit those gains, while guaranteeing that other transactions are not censored and decentralized by building their own payload",
        "created_at": "2023-06-02T21:32:34.911000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "it's a net better than not having this, so unless there is noticeable specification or implementation complexity I don' t understand why not to consider it",
        "created_at": "2023-06-02T21:33:14.941000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "from what i recall it did put blob handling wrt the protocol's state transition in a bit of an odd place",
        "created_at": "2023-06-02T21:58:16.421000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "if you trust a blobber, you can still build locally and just have them send you the transaction/commits/proofs in clear text",
        "created_at": "2023-06-02T21:58:41.504000+00:00",
        "attachments": null
    }
]