[
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "One question. There are \u003e400K validators, and there are 32 slots per epoch. Then do we have around 400K / (32 x 128)  = ~100 committees of size 128 per block / slot?",
        "created_at": "2022-10-11T07:58:45.341000+00:00",
        "attachments": null
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "Q2. Suppose we store all 400K of  the validator public keys, and we know the slot to committees assignment and committees to validators assignment, and we have a relayer passing the Eth2 blocks to us, then we can validate this block. Correct? Any catch here?",
        "created_at": "2022-10-11T08:03:42.726000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "```\ncurl http://localhost:5051/eth/v1/beacon/states/head/committees | jq '.data[].validators | length' | sort -n | uniq -c\n    207 215\n   1841 216\n```\n\nSo in the current epoch there are 207 committees with 215 members each and 1841 committees with 216 members each.\n\nThis is because there is a maximum number of committees per slot of 64.",
        "created_at": "2022-10-11T08:08:24.299000+00:00",
        "attachments": null
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "Thank you \u003c@144468805697929216\u003e for the quick response. \n1A. Which beacon APIs to use to get these committees and the set of validators, and the block proposers for an upcoming epoch?\n1B. Do we need 2/3 of the each of the committees on a block to consider it attested?",
        "created_at": "2022-10-11T08:36:36.941000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "The beacon API documentation can be found at https://ethereum.github.io/beacon-APIs/",
        "created_at": "2022-10-11T09:00:04.764000+00:00",
        "attachments": null
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "Thanks. I see that there are APIs for GetValidatorDuties and GetProposerDuties. I hope they give out the full set of validators for any invocation.",
        "created_at": "2022-10-11T10:09:01.923000+00:00",
        "attachments": null
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "\u003c@144468805697929216\u003e Can you also answer Q2 and Q1B?",
        "created_at": "2022-10-11T10:09:21.398000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "1B is a bit nuanced, _usually_ a block will get 2/3+ of votes in the slot that it is proposed, but a block can still become part of the canonical chain even when this doesn't happen. e.g. it could be late, get 50% of the votes, and then the next proposer would still usually choose to build upon it\n\nthe 2/3 threshold is most relevant on the timescale of a whole epoch, where the first block of the epoch will be _justified_ after 2/3+ of all validators vote atop it, and then _finalized_ once one of its descendants is justified (i.e. confirmed twice by 2/3 of validators, like in a regular BFT protocol)\n\nfor digging into the details the annotated spec is a good place to start: https://eth2book.info/altair/part3",
        "created_at": "2022-10-11T11:05:31.825000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "you could do this, yeah, although it sounds like you might want a \"proper\" light client so you can easily handle changes to the validator set. There are several beacon chain light clients in development:\n\nLodestar: https://lodestar-lightclient.chainsafe.io/\nNimbus: https://nimbus.guide/el-light-client.html\n\nErigon \u0026 Geth are also working on it",
        "created_at": "2022-10-11T11:09:31.441000+00:00",
        "attachments": null
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "Thanks. Do we need separate Execution Layer light clients as well? I ask this because Beacon block header itself will have the state root. Perhaps a separate Execution light client is not necessary",
        "created_at": "2022-10-11T11:19:55.848000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "I'd like to know if other consensus clients plan to support the Era file format for history?",
        "created_at": "2022-10-11T19:25:29.782000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "I've looked into supporting it for Lighthouse. I decided against _only_ storing Era riles when overhauling our freezer database recently, because they would limit our ability to de-duplicate historic data. This is mostly relevant when storing a `BeaconState` more often than every 8192 slots, e.g. every 32 slots for a block explorer. At this point it becomes wasteful to duplicate all of the linear arrays of block roots/randao mixes/etc, as well as the validator public keys.\n\nGiven this constraint, I think we could support Era files with a separate import/export command, although I can't give a timeline for this yet (some external pressure for EIP-4444 might help ðŸ˜‰ )",
        "created_at": "2022-10-11T19:54:35.205000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "Era spec for reference: https://github.com/status-im/nimbus-eth2/blob/unstable/docs/e2store.md#era-files",
        "created_at": "2022-10-11T19:54:50.790000+00:00",
        "attachments": null
    }
]