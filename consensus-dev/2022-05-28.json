[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I've a question for other teams. Here is how prysm deals with a Medalla-like chaos in the event that the operator restarts the node. The node will only repopulate the forkchoice branch of the current head starting from the finalized node. If it syncs a block in a different branch it will repopulate them as needed by loading the corresponding blocks from DB. The issue is that the forkchoice nodes may not have accurate justification information: we only have the justification information of the tip of that branch and we repopulate fork choice with every node having that justified checkpoint. Now this is perfectly fine now since the only thing that matters is the justification of each tip of the tree. But Bellatrix includes an extra complication: we may have parts of the head branch (or any other for that matter) optimistically synced. Now suppose that node receives an INVALID from the EL. It subsequently proceeds to prune the bad nodes up to the LVH. But now this node may have the wrong justification since we assigned it the justification of the head of that branch. \n\nNow how are other teams dealing with this? The reason it's not realistic (nor useful at all) to populate the tree with the right justification information is that we don't have access to the state when we load from DB. But now I'm wondering if we should keep two sets of checkpoints, those of the head and those of the last VALID head.",
        "created_at": "2022-05-28T22:33:39.648000+00:00",
        "attachments": null
    }
]