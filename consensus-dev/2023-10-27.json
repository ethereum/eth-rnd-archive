[
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "After discussions with \u003c@755590043632140352\u003e and \u003c@363800010518822915\u003e about the complexities of the conditional anti-dos conditions around blobsidecars and the various edge cases, \u003c@520034910149410861\u003e suggested an alternative approach that embeds the BeaconBlockHeader within the BlobSideCar along with a merkle-proof to the committed to KZGProof. \n\nThis allows the Sidecar to leverage the existing proposer signature (simplifying signing logic), allows for stronger p2p gossip conditions (no race condition between seeing a valid signed block/header and the forwarding of blobs), and allows for the blob p2p messages to inherent the accountability of beaconblock slashing conditions (no blob can be forwarded without a valid signed header, thus to send blobs beyond those of a single block in slot N, a proposer must create two conflicting blocks and be slashable)\n\nAdditionally, the simplification of the gossip conditions here is likely to remove some reliance on tough-to-get-right p2p caches (cc: \u003c@360491619402776577\u003e) and other error prone areas in the domain of problems we've seen on recent devnets.\n\nThe limited number of client devs that have looked at this so far are excited about the simplifications and want to make the change. I personally think this is a far superior design and although will take some time to implement, is purely simplifying, easier to get right, and likely to deliver a safer mainnet protocol (if not saving us time eventually due to it being easier to get right between now and then).\n\n ***We'd like clients to take this under quick consideration and provide feedback by the end Monday*** in an attempt for a quick inclusion and spec release.\n\nhttps://github.com/ethereum/consensus-specs/pull/3531",
        "created_at": "2023-10-27T16:02:11.145000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "(note, we are still doing review  on this PR, so while the overall strategy is as-expected, there might be a bit of iteration and clean-up today)",
        "created_at": "2023-10-27T16:03:18.013000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I support this change, just want to mention that the relay code will most likely be a bottleneck",
        "created_at": "2023-10-27T16:12:08.559000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "in the current design or change?",
        "created_at": "2023-10-27T16:14:57.967000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "or just in general",
        "created_at": "2023-10-27T16:15:03.156000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I think with this change, the relayer may want to build the blobs adding the signed header, cause they will only be able to start building those when they get the signature from the proposer, I doubt they'll want to send that back to the builder to make them",
        "created_at": "2023-10-27T16:15:55.442000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So I think they'll have to build the blob sidecars and broadcast",
        "created_at": "2023-10-27T16:16:08.387000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "cc \u003c@388610194608750595\u003e what do you think?",
        "created_at": "2023-10-27T16:16:51.545000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "general",
        "parent": "",
        "content": "I think we should take it to the https://github.com/ethereum/builder-specs, first that needs to be updated",
        "created_at": "2023-10-27T16:17:44.087000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "I'm confused -- isn't this purely simplifying?\n\nnow, the builder/relay have the go-ahead with just the signed-header and don't need all these signed sidecars",
        "created_at": "2023-10-27T16:18:13.829000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "you  mean the relayer does not need to get the validator to sign the sidecars? yeah, I agree that this actually is simplifying, but it does look like a bit of a refactor though in their side, before they sent the blobs and will get back the sidecars or even the validator could start broadcasting them. Now  it seems a likely path would be for relayer to send the bid to validator, proposer sending back the signed header, relayer preparing all the sidecars and block and broadcasting all",
        "created_at": "2023-10-27T16:24:29.268000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "general",
        "parent": "",
        "content": "Would this change only affect CL or would it also have impact on how the EL represents blobs (either on chain or during tx submission)?",
        "created_at": "2023-10-27T22:58:03.759000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "only affects CL afaik",
        "created_at": "2023-10-27T23:02:46.885000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yes, it only affects how the CL broadcasts the blob sidecars.",
        "created_at": "2023-10-27T23:22:41.513000+00:00",
        "attachments": null
    }
]