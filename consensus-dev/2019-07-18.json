[
    {
        "author": "paulhauner",
        "category": "general",
        "parent": "",
        "content": "Michael pointed me towards a CLI tool called `yq`, based off `jq` that allows one to easily inspect fields of the testing YAML files. I thought it might be useful to others.\n\nFor example., `$ yq \".test_cases[519]\" ssz_minimal_random_chaos.yaml` prints:\n\n```json\n{\n  \"PendingAttestation\": {\n    \"value\": {\n      \"aggregation_bits\": \"0x0001\",\n      \"data\": {\n        \"beacon_block_root\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n        \"source\": {\n          \"epoch\": 18446744073709552000,\n          \"root\": \"0x14edce60f828c12e32ebec6475c5a61d1f5d28cc8228aaa2bd0e8e2199d437c8\"\n        },\n        \"target\": {\n          \"epoch\": 17737696210276320000,\n          \"root\": \"0xe2a6095f4a2daac031a53a8ed49cd7c0d95f8b8cb2c9f91e90bdcc1e306fb3c8\"\n        },\n        \"crosslink\": {\n          \"shard\": 0,\n          \"parent_root\": \"0x70a54e76468c0bcf1e1553669f8115173b5f93981665f0b2999eca1f07658dbc\",\n          \"start_epoch\": 6639395679523466000,\n          \"end_epoch\": 4562722735072564700,\n          \"data_root\": \"0xac4fb0cf5f2bb1c666d3da009196ac0a319b24cdc54f45cee320ccbd90428076\"\n        }\n      },\n      \"inclusion_delay\": 18270192699403454000,\n      \"proposer_index\": 12199144111329942000\n    },\n    \"serialized\": \"0xdc0000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffff14edce60f828c12e32ebec6475c5a61d1f5d28cc8228aaa2bd0e8e2199d437c85bff4f93b9f428f6e2a6095f4a2daac031a53a8ed49cd7c0d95f8b8cb2c9f91e90bdcc1e306fb3c8000000000000000070a54e76468c0bcf1e1553669f8115173b5f93981665f0b2999eca1f07658dbcbb6c428931df235cc0569938270c523fac4fb0cf5f2bb1c666d3da009196ac0a319b24cdc54f45cee320ccbd90428076b0c4e0e175c38cfd8d9b9e77ef104ca90001\",\n    \"root\": \"0x67bc5bda978b35d45c3fe0579f01f6885e24c4790f92cf29d9718fa256541c08\"\n  }\n}\n```",
        "created_at": "2019-07-18T08:38:04.041000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "general",
        "parent": "",
        "content": "Additionally, I'm pretty sure that leading `0x00` on the `aggregation_bits` is illegal. Is that right?",
        "created_at": "2019-07-18T08:40:46.620000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "general",
        "parent": "",
        "content": "wouldnt that be used to determine the size of the bitlist ?",
        "created_at": "2019-07-18T08:43:44.743000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cpaulhauner\u003e I thought you need a set bit to indicate length?",
        "created_at": "2019-07-18T08:45:12.820000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "general",
        "parent": "",
        "content": "Oh I think I just have endianness confused -- it's much clearer in the v0.8.1 spec",
        "created_at": "2019-07-18T09:11:33.442000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e Is there a reason get_epoch_signature requires the block? To me it seems like you can just increment the slot of beaconState, and use that as your slot value. That way you can parallelize block creation and epoch signature signing.",
        "created_at": "2019-07-18T14:12:12.606000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "looks like the block isn't needed at all, only `block.slot`",
        "created_at": "2019-07-18T14:30:44.069000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "i think that's an implementation detail",
        "created_at": "2019-07-18T14:32:08.384000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "Yeah, you can pass in slot there. The idea would be that you've partially constructed a block and want to get the value (signature of the epoch) to insert into the block. You can certainly pass the slot in or even the epoch depending on how you choose to split things up",
        "created_at": "2019-07-18T15:04:15.774000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e Alright, all of this makes sense. Thanks guys",
        "created_at": "2019-07-18T15:52:44.378000+00:00",
        "attachments": null
    },
    {
        "author": "sorpaas",
        "category": "general",
        "parent": "",
        "content": "Have we changed anything in BLS signing from v0.7 to v0.8?",
        "created_at": "2019-07-18T16:37:50.024000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e One thing I noticed was the domain argument was now a Domain object instead of a Uint64",
        "created_at": "2019-07-18T16:38:33.135000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e and a Domain object is basically a Bytes8",
        "created_at": "2019-07-18T16:38:41.467000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e is MAX_INDICES_PER_ATTESTATION defined anywhere? I can’t see it",
        "created_at": "2019-07-18T16:46:53.782000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e I only see it used",
        "created_at": "2019-07-18T16:46:58.030000+00:00",
        "attachments": null
    },
    {
        "author": "sorpaas",
        "category": "general",
        "parent": "",
        "content": "Thanks!",
        "created_at": "2019-07-18T16:47:00.906000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e Yeah, I checked the whole Eth 2.0 repository, it’s not set anywhere. Someone might wanna make a PR for that",
        "created_at": "2019-07-18T16:51:58.740000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "I think it was renamed to  MAX_VALIDATORS_PER_COMMITTEE",
        "created_at": "2019-07-18T16:54:05.292000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "we are using that value anyway",
        "created_at": "2019-07-18T16:55:49.278000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "4096",
        "created_at": "2019-07-18T16:55:51.607000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e yeah using that makes sense",
        "created_at": "2019-07-18T16:57:55.353000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "can confirm `MAX_INDICES_PER_ATTESTATION` ~\u003e `MAX_VALIDATORS_PER_COMMITTEE` (which is what this number was really getting at)",
        "created_at": "2019-07-18T17:20:58.999000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ccemozerr\u003e awesome",
        "created_at": "2019-07-18T17:53:08.495000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "general",
        "parent": "",
        "content": "Hey all in the https://github.com/ethereum/eth2.0-specs/blob/v0.8.0/specs/validator/0_beacon-chain-validator.md#eth1-data section of the validator doc",
        "created_at": "2019-07-18T20:44:19.671000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "general",
        "parent": "",
        "content": "theres a blurb that says \n```\nLet get_eth1_data(distance: uint64) -\u003e Eth1Data be the (subjective) function that returns the Eth 1.0 data at distance distance relative to the Eth 1.0 head at the start of the current Eth 1.0 voting period. \n```",
        "created_at": "2019-07-18T20:44:32.984000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "general",
        "parent": "",
        "content": "can someone clarify what this means?",
        "created_at": "2019-07-18T20:44:43.959000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "general",
        "parent": "",
        "content": "`head at the start of the current eth1.0 voting period`, so we shouldnt be using the latest eth1 height we've observed?",
        "created_at": "2019-07-18T20:45:04.880000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "That is how it reads",
        "created_at": "2019-07-18T20:45:32.498000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "It would imply faster convergence if everyone is voting for the same value, rather than voting for head + slot_in_period",
        "created_at": "2019-07-18T20:46:17.853000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Otherwise what would really make it in is head + slots_per_eth1_period // 2",
        "created_at": "2019-07-18T20:49:29.745000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "So the first half votes are in some sense wasted",
        "created_at": "2019-07-18T20:49:45.067000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "You can trade off some progress for faster convergence",
        "created_at": "2019-07-18T20:49:58.526000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "general",
        "parent": "",
        "content": "should we be able to do latesteth1height - distance?",
        "created_at": "2019-07-18T20:50:46.758000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "And when I say head here I mean tip of the chain - the follow distance",
        "created_at": "2019-07-18T20:50:50.126000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "TIP - follow_distance seems reasonable other than potentially wasting early votes",
        "created_at": "2019-07-18T20:52:02.931000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "What is in the spec essentially does the same thing and just doesn’t make progress as quickly",
        "created_at": "2019-07-18T20:52:25.579000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "But I’m not sure there is a substantial difference",
        "created_at": "2019-07-18T20:52:34.575000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "what is the start of the voting period, in that spec definition? start = current time?",
        "created_at": "2019-07-18T20:53:19.680000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "or time of slot?",
        "created_at": "2019-07-18T20:53:37.450000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "I read it as seconds per slot * current slot // slots per eth1 voting period",
        "created_at": "2019-07-18T20:55:03.578000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Wait no",
        "created_at": "2019-07-18T20:55:18.969000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Round down to the most recent slot that divides slots per blah blah",
        "created_at": "2019-07-18T20:55:38.161000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "general",
        "parent": "",
        "content": "?",
        "created_at": "2019-07-18T20:56:21.943000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Take the current slot and subtract slots until the result divides slots per eth1 voting period",
        "created_at": "2019-07-18T20:57:06.700000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "That slot has a time stamp based on slots per second",
        "created_at": "2019-07-18T20:57:32.269000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "Find the eth1.0 block with this time stamp or the closest one on-chain before this time stamp",
        "created_at": "2019-07-18T20:58:05.416000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "That is the “head at the start of the current eth1.0 voting period”",
        "created_at": "2019-07-18T20:58:29.941000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "iirc you then consider blocks that are eth1_follow_distance or greater behind that head",
        "created_at": "2019-07-18T20:59:10.569000+00:00",
        "attachments": null
    }
]