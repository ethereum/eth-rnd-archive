[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Hi is there any literature on block timings in mainnet? I'm interested in the following statistics: if the block hasn't arrived by second x, what are the chances that it never does? I myself gathered a lot of data during pyrmont, so did \u003c@144468805697929216\u003e  but that's pretty outdated. Are there some studies on this? Perhaps \u003c@291925846556540928\u003e or \u003c@486501030046203915\u003e know something",
        "created_at": "2022-09-09T00:30:44.102000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "We have histograms for this but the granularity is not good enough",
        "created_at": "2022-09-09T02:33:29.957000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "I'm not familiar with a particular data-set. I know \u003c@361447803194441738\u003e and \u003c@602753420033785856\u003e were monitoring block times for a while. maybe they  hvae a data dump",
        "created_at": "2022-09-09T03:13:20.309000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "general",
        "parent": "",
        "content": "I don't have anything concrete, I was just doing some ad-hoc analysis of our logs",
        "created_at": "2022-09-09T03:14:46.990000+00:00",
        "attachments": null
    },
    {
        "author": "ctrl_alt_lulz",
        "category": "general",
        "parent": "",
        "content": "hi all, is this RFP still accepting proposals? https://github.com/ethereum/requests-for-proposals/blob/master/open-rfps/das.md\n\"Proposals must be submitted by July 1, 2022.\"\nwould be highly interested in submitting a design overview/dev plan (within a few days) if the deadline has been extended",
        "created_at": "2022-09-09T03:18:29.892000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Here's a distribution up to 12 seconds (intervals in ms):\n```\ninterval          midpt   frequency    rel.     cum.\n0.0000 -  1000.0     500.00    463371     80.05%   80.05%\n1000.0 -  2000.0     1500.0     72981     12.61%   92.65%\n2000.0 -  3000.0     2500.0     24700      4.27%   96.92%\n3000.0 -  4000.0     3500.0      7688      1.33%   98.25%\n4000.0 -  5000.0     4500.0      1655      0.29%   98.53%\n5000.0 -  6000.0     5500.0      1139      0.20%   98.73%\n6000.0 -  7000.0     6500.0       425      0.07%   98.80%\n7000.0 -  8000.0     7500.0       265      0.05%   98.85%\n8000.0 -  9000.0     8500.0       193      0.03%   98.88%\n9000.0 -  10000.     9500.0       143      0.02%   98.91%\n10000. -  11000.     10500.       118      0.02%   98.93%\n11000. -  12000.     11500.        97      0.02%   98.94%\n```\n\n(and yes there are plenty of blocks that turn up after 12 seconds, but I figure they aren't interesting to you given your question.)\n\nData is from slot 4078013 up to 4656897 (so 578885 slots).  These are the per-slot minimum delays across our nodes until our probe receives a `block` event.  If a block is never seen for a slot it's been noted as coming in at 999 seconds for the purposes of providing accurate %s.",
        "created_at": "2022-09-09T07:09:03.754000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Thanks a lot Jim",
        "created_at": "2022-09-09T08:47:39.958000+00:00",
        "attachments": null
    },
    {
        "author": "cheerful_piglet_95568",
        "category": "general",
        "parent": "",
        "content": "Hi team, quick question. Currently we run several nodes (with geth/lighthouse) behind a load balancer. We use the age of the latest block that a node has as a criterion for the load balancer health checks. i.e if the age of the latest block on a  node is  \u003e 20mins, load balancer will consider the node unhealthy , not send traffic to it and evict that node. This is to ensure traffic goes to the nodes that are at the tip or close to it. Now, during the actual merge on the 13th/15th,** is there any expectation that blocks would not generated for a period of time?** If that happens, our ALBs may evict all the nodes from the cluster because the block age on all nodes may exceed the threshold. If it is the case that no blocks may be generated for a period of time, we may have to make some changes at our infra level to prevent such a situation ..Appreciate the help. thank you",
        "created_at": "2022-09-09T09:35:03.562000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "There's no such expectation.",
        "created_at": "2022-09-09T09:53:12.248000+00:00",
        "attachments": null
    },
    {
        "author": "cheerful_piglet_95568",
        "category": "general",
        "parent": "",
        "content": "Thank you !",
        "created_at": "2022-09-09T09:54:14.239000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@425572898787426305\u003e We should discuss here.  ðŸ™‚",
        "created_at": "2022-09-09T14:21:45.944000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Sure",
        "created_at": "2022-09-09T14:22:09.705000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You are saying that a non-validating client doesn't need to track deposits/balances?",
        "created_at": "2022-09-09T14:23:31.516000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "So, ppl that aren't using CLs to serve their validator should still be able to run Nethermind with option to prune historical data and be able to verify all blocks as deposit verification requires only onchain information",
        "created_at": "2022-09-09T14:23:32.656000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It *feels* like that should be necessary to validate that the people who are staking are actually staked?",
        "created_at": "2022-09-09T14:24:18.337000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Deposits are provided with merkle proofs linked to the deposit tree root that is also provided onchain. Validators need deposit data to do `Eth1Data` poll which is a part of block proposal",
        "created_at": "2022-09-09T14:24:33.345000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I see.  So perhaps the right question then is: Do any/all CLs support syncing without that, or will they fail to sync if deposit events aren't available from the EL?",
        "created_at": "2022-09-09T14:25:29.141000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I was under the impression that CLs required it to sync, but maybe I'm misinformed, or maybe some do and some don't.",
        "created_at": "2022-09-09T14:25:50.195000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The public messaging has been \"you need the deposit contract history\".",
        "created_at": "2022-09-09T14:26:15.001000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I have recently been syncing Teku and it caught up with the head even without EL that is has been connected to",
        "created_at": "2022-09-09T14:26:19.216000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "And once the CL connects to an EL, it is OK if it gets no receipts when it queries for deposit history?",
        "created_at": "2022-09-09T14:28:41.991000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Or perhaps Teku only requests those receipts if it has a connected validator?",
        "created_at": "2022-09-09T14:29:05.539000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "A question to client developers. Does your CL client require historical deposit data to catch up with the head *if it doesn't suppose to propose a block (a non-validating node setup)*?",
        "created_at": "2022-09-09T14:31:26.739000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It is trying to query this data and logs warnings about inability to retrieve deposit data and ask to fix the problem if any validator client is served by the node",
        "created_at": "2022-09-09T14:32:47.634000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "we have a bn flag `--eth1 false` to turn this off in lodestar",
        "created_at": "2022-09-09T14:34:17.189000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "For non-validators, they will have an attached EL node, it just may not have history.",
        "created_at": "2022-09-09T14:35:55.669000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Also, can we get that flag renamed to `--execution-layer false`?  ðŸ˜¬",
        "created_at": "2022-09-09T14:36:07.191000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It's called `Eth1Data` in the spec, this is probably what the flag is referring to",
        "created_at": "2022-09-09T14:36:44.767000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes EL node attached (to verify payloads) and with this flag off lodestar won't fetch deposits",
        "created_at": "2022-09-09T14:36:48.405000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "So, a better name could be `--eth1-data false`",
        "created_at": "2022-09-09T14:37:14.566000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes we can rename this flag",
        "created_at": "2022-09-09T14:37:34.108000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "The problem is that users that aren't having staking experience might not know that they should explicitly set any flag to remove a requirement on EL's historical data. Probably, it can be address by the documentation",
        "created_at": "2022-09-09T14:38:20.692000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "i don't think it would be good idea to dynamically infer if this data needs to be build or not as user might attach validator at any point, its better for the user to expressively declare his/her intentions",
        "created_at": "2022-09-09T14:40:00.145000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "updating guides would be the better way to address this",
        "created_at": "2022-09-09T14:40:29.254000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think it is reasonable to wonder whether the defaults should be for validators or regular users.",
        "created_at": "2022-09-09T14:41:14.673000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is not obvious to me that default parameter set should be optimized for stakers.",
        "created_at": "2022-09-09T14:41:24.752000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "only if there %age of non validators is huge",
        "created_at": "2022-09-09T14:42:04.751000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "non validators should run light clients ðŸ˜†",
        "created_at": "2022-09-09T14:42:18.970000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Do those exist in a production ready form yet?",
        "created_at": "2022-09-09T14:43:33.072000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "And are they fully trustless (I haven't followed CL light client work)?",
        "created_at": "2022-09-09T14:43:53.213000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes, lodestar light client can be used to follow the chain, which emits `header`/`finalized` for a period, as well as lodestar light client server provides a verifiable `snapshot` to startup with",
        "created_at": "2022-09-09T14:45:30.801000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "nimbus also has done something like this i think",
        "created_at": "2022-09-09T14:46:12.472000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but production ready is the subject matter of usage imho",
        "created_at": "2022-09-09T14:46:31.378000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So to run a lightclient you need a light client server to connect to, you can't connect to the regular gossip network like a regular node?",
        "created_at": "2022-09-09T14:47:35.130000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "nimbus can, even lodestar light client can be hooked (a little dev is required) to p2p to look for sync committee updates on p2p",
        "created_at": "2022-09-09T14:48:38.846000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "apart from where (or rather which protocol) lodestar light client sources sync committee updates from, it doesnot make any trust assumptions (one has to obviously provide a trustworthy checkpoint to start off with)",
        "created_at": "2022-09-09T14:49:56.148000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You need trustworthy checkpoint state, or just checkpoint slot root?",
        "created_at": "2022-09-09T14:55:55.745000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "checkpoint epoch:root, then lodestar light client can download/verify the snapshot (so in essense yes this snapshot state) and then use the incoming sync committee updates to follow the chain",
        "created_at": "2022-09-09T14:57:16.994000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but trust is hinged on the checkpoint (epoch,root)",
        "created_at": "2022-09-09T14:58:10.981000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So same as checkpoint syncing a full client is going to hopefully be eventually; you need a trustworthy epoch:root, but from there you can trustlessly validate everything.",
        "created_at": "2022-09-09T14:58:59.869000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It sounds like there is also a requirement that you are connected to a light client server, as at the moment you cannot (easily) just use the normal gossip network?",
        "created_at": "2022-09-09T14:59:36.885000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes, since it would need to know who are the current sync committee members (for 27 hour period i think)",
        "created_at": "2022-09-09T14:59:49.648000+00:00",
        "attachments": null
    },
    {
        "author": "cheerful_piglet_95568",
        "category": "general",
        "parent": "",
        "content": "Hello, Is this understanding correct? In POS, when the network finality is reached after 2 epochs, then re-org becomes highly improbable compared to POW where we may have to wait for a larger number of blocks to ensure no - reorg occurs?",
        "created_at": "2022-09-09T15:00:46.466000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "i think nimbus has done something p2p (with nimbus peer clients)",
        "created_at": "2022-09-09T15:01:29.340000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "the snapshot is really light, so it should be doable p2p",
        "created_at": "2022-09-09T15:01:43.080000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "lodestar uses client server model for ease of development of the client, but with some dev effort we can move it p2p",
        "created_at": "2022-09-09T15:02:37.294000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "also our focus has been `browser` where libp2p protocol would work over websockets since udp/tcp access is not available",
        "created_at": "2022-09-09T15:04:02.163000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but \u003c@403636673914863626\u003e has developed a way to proxy udp data to browser via websocket",
        "created_at": "2022-09-09T15:04:49.630000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This is correct.  The only way to reorg after finality is through a user activated fork.  The system will not automatically reorg past finality.",
        "created_at": "2022-09-09T15:05:42.295000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "To be clear, I'm fine with having a *separate* P2P network.  Ideally full clients would connect to both networks, and the light clients would only connect to the light client P2P network or something.",
        "created_at": "2022-09-09T15:06:52.641000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "What I want to avoid is a dependence on some centralized provider for your light client to work.  I want to have confidence that the light client won't go offline because *one* other node went offline.",
        "created_at": "2022-09-09T15:07:21.649000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Also, Geth had a light client a while back that really struggled because it required light client servers and no one ran one.  ðŸ˜¢",
        "created_at": "2022-09-09T15:07:39.643000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes light-client can just subscribe to only those gossip topics  (so a sub network in itself)",
        "created_at": "2022-09-09T15:07:59.313000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "I will get back to you on how easy/difficult it would be for lodestar to refactor its client/server model (mostly dependent on fetching the initialization snapshot)",
        "created_at": "2022-09-09T15:09:41.458000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but thats the similar experience on the starting the BN also from a checkpoint",
        "created_at": "2022-09-09T15:10:21.838000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but once started off on the current period's snapshot, then p2p committee updates should be good enough to follow the chain",
        "created_at": "2022-09-09T15:11:19.578000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Circling back to *today*.  If I launch lodestar with `--eth1 false` and connect it to my EL, then everything will work even if my EL has no history?",
        "created_at": "2022-09-09T15:11:33.144000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2022-09-09T15:11:40.849000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Would be great to find out if other CLs have a similar feature or not!",
        "created_at": "2022-09-09T15:25:13.245000+00:00",
        "attachments": null
    }
]