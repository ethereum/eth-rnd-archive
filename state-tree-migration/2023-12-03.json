[
    {
        "author": "philogy",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I received a transfer (with value) on the Verkle testnet to an empty account at a gas cost of `34,300` and I'm trying to understand how it's arriving at that cost based on EIP-4762 but I don't fully get get how it arrives at 13.3k + intrinsic cost (21k).\n\n```\nAccording to EIP-4762 a transaction has:\n10x access events (version, balance, nonce, code size, code hash for origin and target)\n 3x write events (origin.nonce, origin.balance, target.balance)\n\nFor the origin (since non-empty):\n1x WITNESS_BRANCH_COST + 5x WITNESS_CHUNK_COST + 1x SUBTREE_EDIT_COST + 2x CHUNK_EDIT_COST = 6,900\n\nFor the target (since empty):\n1x WITNESS_BRANCH_COST + 5x WITNESS_CHUNK_COST + 1x SUBTREE_EDIT_COST + 1x CHUNK_EDIT_COST + 1x CHUNK_FILL_COST = 12,600\n```\n\nFor a total of `19,500` above intrinsic, together it should've cost 40,500? Reading EIP-4762 it's also unclear what it means by \"If `leaf_key` is not `None` [...]\" in different places as `leaf_key` is part of the tree key and an integer? Maybe it means the tree key but excluding access/write events for empty keys as it says also seems to yield an incorrect result. Any help understanding the metering is appreciated!",
        "created_at": "2023-12-03T15:13:49.826000+00:00",
        "attachments": null
    },
    {
        "author": "philogy",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The combination I found that seems to add up is without the `CHUNK_FILL_COST`, but that seems to violate the spec?",
        "created_at": "2023-12-03T15:18:28.329000+00:00",
        "attachments": null
    },
    {
        "author": "philogy",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Or are balance tree keys assumed to be set to zero already?",
        "created_at": "2023-12-03T15:20:41.016000+00:00",
        "attachments": null
    }
]