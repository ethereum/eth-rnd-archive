[
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@427491045308235776\u003e It seems to me that for the PrecomputedWeights in the ref impl https://github.com/crate-crypto/verkle-trie-ref/blob/master/polynomial/precomputed_weights.py#L9\nwe can pick anything for the domain right?\n\nIn the tests it's [0, 255] that is used (https://github.com/crate-crypto/verkle-trie-ref/blob/2332ab82a77c17024861eb47fd140301c27de980/multiproof/multiproof_test.py#L32-L33)\nbut we could use the roots of unity so we can reuse the same code as EIP4844 KZG right?\n\ni.e. replace https://github.com/crate-crypto/verkle-trie-ref/blob/master/multiproof/quotient.py#L6-L35\nwith quotient polynomial eval\nhttps://github.com/ethereum/consensus-specs/blob/dev/specs/deneb/polynomial-commitments.md#compute_quotient_eval_within_domain\nand the same outside the domain.",
        "created_at": "2024-06-07T17:29:39.681000+00:00",
        "attachments": []
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "cc \u003c@785811170387951616\u003e ^",
        "created_at": "2024-06-07T17:29:52.994000+00:00",
        "attachments": []
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e It seems to me that for the PrecomputedWeights in the ref impl https://github.com/crate-crypto/verkle-trie-ref/blob/master/polynomial/precomputed_weights.py#L9\n\u003e we can pick anything for the domain right?\n\nYep the equations are generic over the domain being used, so you can use any domain\n\n\u003e In the tests it's [0, 255] that is used (https://github.com/crate-crypto/verkle-trie-ref/blob/2332ab82a77c17024861eb47fd140301c27de980/multiproof/multiproof_test.py#L32-L33)\n\u003e but we could use the roots of unity so we can reuse the same code as EIP4844 KZG right?\n\nWe would not be able to re-use that because the order of the multiplicative subgroup of the scalar field of bandersnatch does not factor into a large enough power of 2, ie it does not have a high enough 2-adicity",
        "created_at": "2024-06-07T21:08:31.852000+00:00",
        "attachments": []
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "sage gives:\n\n\u003e factor(13108968793781547619861935127046491459309155893440570251786403306729687672800) = 2^5 * 3 * 5^2 * 48407612962807291 * 2038476065687664805409 * 55352597255927763854484663053009063\n\nSo best you can get is a subgroup of size 2^5 for 2n'th roots of unity -- 48407612962807291 does form another group but its way too large and even if it was not I'd stick with 2n'th roots of unity given that the domain in question is linked to the width/branhing factor of the verkle trie",
        "created_at": "2024-06-07T21:14:21.366000+00:00",
        "attachments": []
    }
]