[
    {
        "author": "phabc",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is a reasonable guess for estimating the gas cost of accessing code just taking the `byte_size_code_accessed_by_tx / 40 * 6.25`?\n\nUsing the assumption here that chunks will be roughly 40 bytes in average.",
        "created_at": "2021-05-08T15:20:50.706000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "chunks will be 31 bytes",
        "created_at": "2021-05-08T15:42:51.433000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The average 40 bytes is because of the fact that sometimes you'll need not just the chunk but also the Kate commitment",
        "created_at": "2021-05-08T15:43:09.295000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And sometimes code won't cleanly access a full chunk, eg. it could jump to a place near the end of one chunk, then jump somewhere else in the middle of the next chunk, and that's 2 chunks accessed even if it's like 10 bytes between where you jumped in vs jumped out",
        "created_at": "2021-05-08T15:43:55.220000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "have posted a question /clarification/confusion regarding the  state verkel tree. just bringing to the notice if anyone could help in understanding.",
        "created_at": "2021-05-08T17:16:29.587000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "c8bc7185e3b1e1bc87e6bed2b3ebce8ff13a6b72b625a1b3aee701ccc964aa4d"
            }
        ]
    },
    {
        "author": "phabc",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Makes sense, and what's the relationship between number of chunks touched vs transaction complexity? Trying to come up with a quick heuristic to calculate the increased in cost for contract calls once we move to verkle tries.",
        "created_at": "2021-05-08T18:30:38.671000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I once checked a uniswap tx manually and it touched something like 16 chunks as I recall",
        "created_at": "2021-05-08T18:31:14.137000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Current code is waaaay underoptimized for witness sizes, hopefully future code will be better",
        "created_at": "2021-05-08T18:31:37.468000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can do it yourself, check the tx on uniswap, look at the geth trace, grab all the PCs, do some awk magic to convert them into a python list, and then do `len(set(x//31 for x in PCs))`",
        "created_at": "2021-05-08T18:32:37.173000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's not perfect because it misses pushdata and codecopy but it's close",
        "created_at": "2021-05-08T18:32:49.560000+00:00",
        "attachments": null
    },
    {
        "author": "phabc",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Nice, i'll try that this week. Seems like this latest proposal is pretty polished so devs would benefit from understanding how to write witness friendly contracts early on.",
        "created_at": "2021-05-08T18:37:22.828000+00:00",
        "attachments": null
    }
]