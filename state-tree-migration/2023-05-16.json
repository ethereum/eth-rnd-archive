[
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I got a Q about Kaustinen, but since this is the channel regarding the verkle trie migration I don't think this is the right place, anyone has a pointer?",
        "created_at": "2023-05-16T09:28:58.231000+00:00",
        "attachments": null
    },
    {
        "author": "gballet",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no it's the right place",
        "created_at": "2023-05-16T09:29:33.686000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah ok ðŸ™‚",
        "created_at": "2023-05-16T09:38:31.099000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At JS we have this Kaustinen block: https://github.com/ethereumjs/ethereumjs-monorepo/blob/stateManager/stateless-verkle-stateManager/packages/vm/test/api/testdata/verkleKaustinenBlock.json\n\nIf we run it, the block fails to run. The reason is that we decode transaction senders wrong. It seems that there is some change to the JSON format. For instance, legacy + access list txs now have `maxPriorityFeePerGas` instead of `gasPrice` and it also seems that `tx.to` if this is `0x`, it is meant that this is to the `null` address (i.e. this transaction is a CREATE transaction).\n\nI fixed this and we now have 2 txs failing.\n\nFor instance, this one:\n\n```\n{\n  blockHash: '0x3606c8bf399c20a09058551eea1f1b4f7df9973f6fc390afbaef80df16bb8a81',\n  blockNumber: '0x12306',\n  from: '0x9791ded6e5d3d5dafca71bb7bb2a14187d17e32e',\n  gasLimit: '0x186a0',\n  maxFeePerGas: '0x3b9b1368',\n  maxPriorityFeePerGas: '0x3b9b1368',\n  hash: '0xd2cdf63bb15eb4bbc655e4cca198c92305f2c6d057ac993ef6f7bacf1c518b2f',\n  input: '0x2c377f89e8b86b5ab3f0a42d7de72abf0e36236b0f8b3808413eed75adbd18f704382c60d6527f2e2ae515f197908fe9a752498882a14fbef2c8c1b7cc1067635c466a85958e6360f6527fcba24c994bc47b3b2acda7f774254170e125720a726e10ceda22855f856696b9610116527fce789b987b5942fa40de0809968c8bc7',\n  nonce: '0xaa595',\n  to: '0x2665c0a20514cdc3fd5e18173d7b6d7ba125e5c0',\n  transactionIndex: '0x2',\n  value: '0x0',\n  type: '0x2',\n  accessList: [],\n  chainId: '0x10f2c',\n  v: '0x0',\n  r: '0x2e6e55a09bbc97e0bb6f80d54c5e63a4604dcaa5bffadb991669792553e075b4',\n  s: '0x601a59743e1704bced353df169c1bd1af188ddd6738a7032b4a6f7f9c52c3143'\n}\n```\n\nIf I dump the JSON of how we have decoded this specific tx, all values look fine, but the sender address itself is still wrong. Is there anything special about this transaction which I am missing? ðŸ¤”",
        "created_at": "2023-05-16T09:41:16.363000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It would be helpful if I could get a raw RLP of this tx, then I can compare whatever gets decoded wrong ðŸ™‚",
        "created_at": "2023-05-16T09:42:16.989000+00:00",
        "attachments": null
    },
    {
        "author": "gballet",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we no longer use RLP, we pass the proof data in the `ExecutionPayload` as specified here: https://github.com/ethereum/consensus-specs/pull/3230 I would check with \u003c@436244295544995840\u003e because you should have more recent code. I don't think it makes sense to debug old code.\n\nIn any case, to answer your question: no, the tx format should be exactly the same. It is possble that, somehow, there was a bug in the version of kaustinen that generated this block, or in the json transcription.",
        "created_at": "2023-05-16T09:50:00.202000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ok, great, thanks ðŸ™‚",
        "created_at": "2023-05-16T09:51:20.893000+00:00",
        "attachments": null
    }
]