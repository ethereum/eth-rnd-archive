[
    {
        "author": "proxima424",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I was just reading this paper on Verkle Trees that sending proof sizes in the network for larger trees increases `bandwidth consumption.`\nWhat is this bandwidth consumption we're talking about?\n( gas usage maybe? )",
        "created_at": "2023-11-28T11:43:41.933000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003casqyzeron\u003e that's network bandwidth",
        "created_at": "2023-11-28T11:58:58.711000+00:00",
        "attachments": null
    },
    {
        "author": "rudolf6",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Comment added from Holger on the topic of BLOCKHASH: \nhttps://github.com/ethereum/pm/issues/902#issuecomment-1829699020 \n\nhttps://ethresear.ch/t/the-curious-case-of-blockhash-and-stateless-ethereum/7304/4",
        "created_at": "2023-11-28T13:23:46.878000+00:00",
        "attachments": null
    },
    {
        "author": "rudolf6",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "VIC starting in 10 min: \nhttps://meet.google.com/odf-tghm-ttu\n\nAgenda:\nhttps://github.com/ethereum/pm/issues/902",
        "created_at": "2023-11-28T13:49:25.605000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yea BLOBHASH accesses within the same block (within the current executing tx) so that shouldn't be an issue",
        "created_at": "2023-11-28T15:01:43.258000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The sublte point is that then a stateless EL is actually trusting the CL (stateful) to provide that data (blob hash).",
        "created_at": "2023-11-28T15:17:01.466000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To extend a bit more on my point: if you have an EL client and want to statelessly verify a block that uses this opcode -- then how you can resolve that opcode result if you don't have a CL? (i.e: mostly thinking about the block witness giving you (in theory) a self-contained execution unit, which isn't the case if these opcodes are used?)",
        "created_at": "2023-11-28T15:21:51.477000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This situation appears on any opcode that relies on history or \"state\" that isn't part of the tree (which its validity gets resolved with the witness verif)",
        "created_at": "2023-11-28T15:22:43.792000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "versioned hashes are part of the txs in the block and hence can be extracted from there, CL hashes are for verifying the commitments in the CL block match with those in the transactions",
        "created_at": "2023-11-28T16:40:53.373000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the dependance on the CL is already there for stateless client because the witnesses are not part of the blockhash right now and totally fed by the CL to the stateless client, so that is a more concerning problem imo",
        "created_at": "2023-11-28T16:42:11.994000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i think we should include witness root in the blockheader and also provision to sync witnesses through peers via may be a extended get body api or via a totally new endpoint in case we want to keep it optional for ELs to serve it",
        "created_at": "2023-11-28T16:43:21.603000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I see the CL role there as a medium to get the witness -- but from where the stateless EL gets the witness is somewhat irrelevant, as far as the witness is valid.",
        "created_at": "2023-11-28T16:49:37.883000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "right, how do we know witnesses are correct?",
        "created_at": "2023-11-28T16:50:03.009000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "By verifying the proof against the previous block state root",
        "created_at": "2023-11-28T16:50:15.154000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ahh .. that module is not currently ingesting the witness in the current format and hence is being skipped... (so yea not a design problem ... just impl problem)",
        "created_at": "2023-11-28T16:51:46.531000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So technically you don't depend on a trusted CL, since the EL can verify that witness proof.\nNow the point I wanted to stress, is that if the stateless EL needs to ask some external party to provide some result for an opcode execution -- then that's quite unfortunate.",
        "created_at": "2023-11-28T16:52:37.559000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You mean that for blobhash that isn't the case?",
        "created_at": "2023-11-28T16:52:55.872000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yup blobhashes are in the  block txs itself so thats not the case for this opcode",
        "created_at": "2023-11-28T16:53:12.199000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But the witness doesn't prove data in the block in general, only in the state tree.",
        "created_at": "2023-11-28T16:53:39.053000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Who gave you those txns? the CL, right?",
        "created_at": "2023-11-28T16:53:54.976000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes, but these txs are part of block hash",
        "created_at": "2023-11-28T16:54:18.225000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The hash of the block you're currently trying to verify",
        "created_at": "2023-11-28T16:54:36.950000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2023-11-28T16:54:47.070000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "anyway EL depends on CL for feeding it the correct block of the canonical chain, so that depedance is still there",
        "created_at": "2023-11-28T16:55:47.221000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As a CL I can fake the blob hashes, giving you a state root for this block that will match wahtever the stateless client will calculate.",
        "created_at": "2023-11-28T16:56:09.557000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So the stateless client will consider this block valid",
        "created_at": "2023-11-28T16:56:16.406000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "When the blob hashes are completely forged. Or am I missing something?",
        "created_at": "2023-11-28T16:56:25.661000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "that is true for any block... i don't understand",
        "created_at": "2023-11-28T16:56:46.696000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "EL can feed it any \"VALID\" block ... so CL is anyway trusted in that sense for the canonicality of the block",
        "created_at": "2023-11-28T16:57:28.109000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, the CL can actually invent a block with whatever transactions. My point is mostly around that for these cases in which you need to trust the CL to give you \"EVM data\" to execute the block, that's simply another door to manipulate the resulting calculated state root. If the EVM only depends on state tree data, then that's not an open door",
        "created_at": "2023-11-28T17:03:19.069000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess you can bite the bullet and not be concerned... just a bit \"annoying\"",
        "created_at": "2023-11-28T17:03:40.894000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As in, the \"witness\" isn't self-contained with all the data needed to execute the block -- so some data escapes the proof validation.",
        "created_at": "2023-11-28T17:04:14.703000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In your argument of \"CL is trusted anyways\" doesn't lead to the conclusion of: then why have witness proofs? (i.e: if the witness was provided by the CL)",
        "created_at": "2023-11-28T17:09:56.714000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "witness proofs are important because witness is not part of block hash so no where to know if they belong to this particular block",
        "created_at": "2023-11-28T17:11:50.845000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A proof is a claim about some data being part of a defined state root -- it's not tied to any kind of block-hash claim.",
        "created_at": "2023-11-28T17:13:23.488000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You mean if we add the witness as part of the block hash, taht solves the same problem?",
        "created_at": "2023-11-28T17:14:16.142000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it solves tampering problem, not correct state transition problem",
        "created_at": "2023-11-28T17:14:42.246000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "to verify state transition is correct, one need proofs linking them to pre state",
        "created_at": "2023-11-28T17:15:23.279000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but blobhashes comes in block txs so i don't understand what issue is there w.r.t. trusting CL to provide you a valid block",
        "created_at": "2023-11-28T17:16:47.621000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You need the proof, and trust the CL for this extra data if you use this opcodes that read data outside of the tree.",
        "created_at": "2023-11-28T17:20:15.793000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in that way txs are this extra data used for block execution",
        "created_at": "2023-11-28T17:20:39.485000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and i agree you need proof to verify correct state transition to verify against pre state that you already trust (recursively)",
        "created_at": "2023-11-28T17:23:40.886000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but the blobhashes are extracted from actual serialized block txs so , blobhashes trust === block txs trust",
        "created_at": "2023-11-28T17:24:56.204000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The thing you're trusting the CL for is that you're following the \"right chain\". At least that is true if the EVM execution only depends on tree state.",
        "created_at": "2023-11-28T17:25:19.227000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you also turst the CL to give you _data_ to do the EVM execution, then you're also trusting it for something else.",
        "created_at": "2023-11-28T17:25:37.596000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So your EVM required data is 99% proved by the witness, but 1% not",
        "created_at": "2023-11-28T17:25:49.794000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "txs are the EVM data",
        "created_at": "2023-11-28T17:25:52.139000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "right chain == txs === blobhashes",
        "created_at": "2023-11-28T17:26:53.103000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To follow the right chain -- not to calculate the correct state root for those txns (if you only depend on the state tree)",
        "created_at": "2023-11-28T17:26:55.107000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "txs is what determine the state root no?",
        "created_at": "2023-11-28T17:27:18.938000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "txns + all the data you need for EVM exec",
        "created_at": "2023-11-28T17:27:36.178000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Let's say you don't care about following the right chain.",
        "created_at": "2023-11-28T17:28:02.646000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If the EVM only depends on state tree data, then with witness proofs you know the state transition is correct.",
        "created_at": "2023-11-28T17:28:21.520000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you need CL data to execute some EVM opcode, then you're not",
        "created_at": "2023-11-28T17:28:36.328000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe this discussion is purely semantic",
        "created_at": "2023-11-28T17:28:49.527000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "blob txs directly give blobhashes",
        "created_at": "2023-11-28T17:28:53.087000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes that's fine",
        "created_at": "2023-11-28T17:29:41.853000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can interpret this as \"advisory data\"",
        "created_at": "2023-11-28T17:31:16.720000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yea the entire block as a unit is CL data, one just needs to verify that the data is not tempered with which is what the blockhash is there for, so if a CL wants to alter data and put in a new stateroot and also replace the blockhash there isn't anything EL can do to detect it (blobhashes or not)",
        "created_at": "2023-11-28T17:31:51.458000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so the entire block verification is with reference to this particular blockhash and you can't do anything much than to trust it and validate everything against it",
        "created_at": "2023-11-28T17:33:45.149000+00:00",
        "attachments": null
    },
    {
        "author": "jsign",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, that's fine... which block is the correct one is a consensus prob",
        "created_at": "2023-11-28T17:34:26.855000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yup excatly, so if you trust blockhash canonicality then you can trust blob hashes",
        "created_at": "2023-11-28T17:34:55.579000+00:00",
        "attachments": null
    }
]