[
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We should also be compatible with IPv6 everywhere. However if an ENR has IPv4 and IPv6 we prioritise IPv4.",
        "created_at": "2020-08-12T02:20:51.412000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "anyone has good statistics tools for running on blocks? anecdotally, I've seen a few epoch blocks getting orphaned (https://medalla.beaconcha.in/block/46336, https://medalla.beaconcha.in/block/15008) , wonder if the orphan rate for epoch blocks (that require more processing) is visibly higher",
        "created_at": "2020-08-12T05:39:50.267000+00:00",
        "attachments": null
    },
    {
        "author": "p_bitfly",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\n blockinepoch |  status  | count \n--------------+----------+-------\n            0 | orphaned |    35\n            1 | orphaned |    34\n            2 | orphaned |    26\n            3 | orphaned |    21\n            4 | orphaned |    19\n            5 | orphaned |    25\n            6 | orphaned |    17\n            7 | orphaned |    19\n            8 | orphaned |    17\n            9 | orphaned |    15\n           10 | orphaned |    23\n           11 | orphaned |    16\n           12 | orphaned |    12\n           13 | orphaned |    13\n           14 | orphaned |    17\n           15 | orphaned |    19\n           16 | orphaned |    19\n           17 | orphaned |    16\n           18 | orphaned |    22\n           19 | orphaned |    12\n           20 | orphaned |    21\n           21 | orphaned |    18\n           22 | orphaned |    18\n           23 | orphaned |    18\n           24 | orphaned |    18\n           25 | orphaned |    15\n           26 | orphaned |    11\n           27 | orphaned |    11\n           28 | orphaned |    12\n           29 | orphaned |     9\n           30 | orphaned |    16\n           31 | orphaned |    15\n```",
        "created_at": "2020-08-12T05:47:52.471000+00:00",
        "attachments": null
    },
    {
        "author": "p_bitfly",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hope that helps, blockinepoch is slot % 32",
        "created_at": "2020-08-12T05:48:04.091000+00:00",
        "attachments": null
    },
    {
        "author": "p_bitfly",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!449019668296892420\u003e",
        "created_at": "2020-08-12T05:48:26.065000+00:00",
        "attachments": null
    },
    {
        "author": "p_bitfly",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "for me it looks like that blocks at the beginning of the epoch have a higher chance of being orphaned",
        "created_at": "2020-08-12T05:49:46.311000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!471975503859810316\u003e fantastic, thanks - interesting, so the first 2 slots have much higher rates, as clients are recovering from epoch processing",
        "created_at": "2020-08-12T05:49:53.163000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "slot 29 mod 32 is where it's at!",
        "created_at": "2020-08-12T06:15:48.616000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "General trend downwards as the slot-in-epoch number increases, although the first two slots are the obvious culprits for that.\n\n\u003c@!471975503859810316\u003e over how many epochs was this data generated?  Wondering what the %s look like.",
        "created_at": "2020-08-12T06:42:27.266000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "orphans.png",
                "content": "8f6f755508d83258add228a71ab350e91a680bc912f4b048eed588606414d05a"
            }
        ]
    },
    {
        "author": "p_bitfly",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "over all epochs on medalla",
        "created_at": "2020-08-12T06:43:08.855000+00:00",
        "attachments": null
    },
    {
        "author": "p_bitfly",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\n blockinepoch |  status  | count \n--------------+----------+-------\n            0 | orphaned |    13\n            1 | orphaned |    11\n            2 | orphaned |    12\n            3 | orphaned |     8\n            4 | orphaned |     8\n            5 | orphaned |     7\n            6 | orphaned |     2\n            7 | orphaned |    12\n            8 | orphaned |    10\n            9 | orphaned |     5\n           10 | orphaned |    12\n           11 | orphaned |     8\n           12 | orphaned |     3\n           13 | orphaned |     4\n           14 | orphaned |     7\n           15 | orphaned |     7\n           16 | orphaned |     9\n           17 | orphaned |     7\n           18 | orphaned |    11\n           19 | orphaned |     7\n           20 | orphaned |     8\n           21 | orphaned |     7\n           22 | orphaned |     9\n           23 | orphaned |     9\n           24 | orphaned |     8\n           25 | orphaned |     6\n           26 | orphaned |     4\n           27 | orphaned |     3\n           28 | orphaned |     4\n           29 | orphaned |     2\n           30 | orphaned |     9\n           31 | orphaned |     6\n```\nis over the last 740 epochs",
        "created_at": "2020-08-12T06:44:10.928000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "my lighthouse client talks to 720 unique ipv4 addresses, not sure what the 2k outgoing to US means on the right side ðŸ¤”",
        "created_at": "2020-08-12T09:01:16.933000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "5e712a583077bdb0d69dba7e8597e18a421e53a25a118ecf8c50d51b34e3c5a2"
            }
        ]
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Connection count maybe? Can be multiple per ip?",
        "created_at": "2020-08-12T09:09:47.250000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "syncing prysm now, lets see what i achieve there ðŸ˜„",
        "created_at": "2020-08-12T09:11:18.256000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is this checking UDP also?",
        "created_at": "2020-08-12T09:31:38.786000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i dont think so, the UI is very limited. Tool is called LittleSnitch on macOS",
        "created_at": "2020-08-12T09:33:34.959000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ok thanks. As a fun aside if you port forward (settings in your router) port 9000 is expect you'd see a lot more incoming. We have an update soon that will do this automatically for you if your router supports it.",
        "created_at": "2020-08-12T09:34:55.649000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "edit: yes it is checking UDP",
        "created_at": "2020-08-12T09:35:00.038000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "someone staking on a boat?",
        "created_at": "2020-08-12T09:35:56.044000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "9b51d05882e35b703b1fa691815bfa5355519d2471766fa3167eee791ce2767c"
            }
        ]
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah awesome. That makes a lot of sense. The UDP protocol is very chatty and likes to talk to everyone.",
        "created_at": "2020-08-12T09:36:03.944000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "has anyone digged into this deeper?",
        "created_at": "2020-08-12T10:28:28.892000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "firefox_2020-08-12_12-28-16.png",
                "content": "617cae2df91e8021057e901b362c0fa2a6d2eb46fb4eeaa40fa7da1093153ae0"
            }
        ]
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "is this because many validators are offline or? since we are stable around ~75% participation rate, shouldn't more validators be at least positive?",
        "created_at": "2020-08-12T10:29:23.410000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003chttps://beaconcha.in/charts/performance_distribution_365d\u003e",
        "created_at": "2020-08-12T10:29:35.728000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!471975503859810316\u003e so if the orphans are higher, what about counting missing blocks + orphans? this will be higher than orphans because the offline validators will of course make their mark, but this should be uniform, so any differences should be blocks that were orphaned-but-seen or not seen at all",
        "created_at": "2020-08-12T11:09:49.138000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'd be curious to see benchmarks on epoch transition times\niirc, many months ago  on optimized clients the addition of epoch processing was still a fraction of time of normal high-load blocks",
        "created_at": "2020-08-12T14:35:59.595000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I would go for more native optimizations first, but one thing clients can consider doing is to do the `process_slots` (including the epoch) transition for the next slot `N` immediately upon receiving the parent block for slot `N - 1`.  Then, at the start of the slot `N`, apply the block you've created or received\n\nthis would also give a slightly better lookahead on the start slot proposal role",
        "created_at": "2020-08-12T14:39:00.315000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've been keeping an eye on the time between slot start and receipt of the relevant slot's block at my validator.  This isn't complete data (any blocks that arrive much after 4s aren't included in the output) but does give an idea that the spread is pretty big.\n\nI'm also looking at some optimisations for prysm that may speed up proposals, which I guess is relevant given the number of prysm nodes out there.\n\n(I also think I bumped into a DOS attack against prysm; where can I claim my reward? ðŸ˜ˆ )",
        "created_at": "2020-08-12T17:50:54.013000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "screenshot_2020-08-12-184551.png",
                "content": "866ec37bfc8a25c312a263235f2a5bb03d90870525c9adfc25c460fb7ab33c8c"
            }
        ]
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(The above is a heatmap; darker colors indicate a higher number of blocks in that bucket)",
        "created_at": "2020-08-12T17:51:27.105000+00:00",
        "attachments": null
    },
    {
        "author": "ryg9705",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!144468805697929216\u003e There is a lot of cool data science that can be done on the testnet. I proposed an idea to analyze validators that never went online here: https://github.com/gobitfly/eth2-beaconchain-explorer/issues/192",
        "created_at": "2020-08-12T18:47:47.423000+00:00",
        "attachments": null
    },
    {
        "author": "ryg9705",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Would be great if this data would be more easily accessible (maybe as a BigQuery dataset) without running your own node and dumping it into a SQL database over time.",
        "created_at": "2020-08-12T18:48:57.459000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e I also think I bumped into a DOS attack against prysm; where can I claim my reward?\n\n$5k bounties for single client dos attacks are still up for the beta-0 nets. You can write up the issue without actually attacking the prysm-attack-0 net if you are confident in it",
        "created_at": "2020-08-12T18:50:08.060000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@134118181710200833\u003e you may be interested in this previous project of mine. It pulls blocks via a client API, then transitions them with optimized python spec implementation, and pushes all state changes and block data into a postgres database. It may need some dependency version updates, but should otherwise work.\n\nhttps://github.com/protolambda/e2db",
        "created_at": "2020-08-12T18:55:45.476000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If more people are interested we can run it somewhere and try and publish the data. Either with public read credentials, or export as file or something like bigquery",
        "created_at": "2020-08-12T18:58:22.606000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And feedback on the DB model would be appreciated. Data that can reorg is difficult to maintain in neat indexed tables. Maybe we should just keep it to finalized data, to simplify the datascience queries",
        "created_at": "2020-08-12T18:59:42.345000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e \n\u003e \n\u003e I'm also looking at some optimisations for prysm that may speed up proposals, which I guess is relevant given the number of prysm nodes out there.\n\u003e \n\n\u003c@!144468805697929216\u003e re: optimization. If not running on latest master, I'd recommend try out `dev` flag. The majority of block proposal bottleneck is packing attestations in the block. There's great optimizations in `dev` and now in default with latest master. We switched from a naive greedy algo to max cov algo",
        "created_at": "2020-08-12T19:26:16.703000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!363800010518822915\u003e thanks, this is a specific issue around eth1data that I spoke to Nishant about.  He's aware of it, but there are interactions with potential Ethereum 1 chain reorgs that make caching the result non-trivial.\n\nPacking the attestations is the second most expensive part of proposing the block, though, so if that goes faster it will be a great help.",
        "created_at": "2020-08-12T19:31:42.546000+00:00",
        "attachments": null
    }
]