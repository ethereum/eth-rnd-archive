[
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@551157969367334912\u003e it is dependant on a lot of things. The biggest thing that affects attestation penalties during non finality would be your inclusion distance. If a validator skips proposing a block, unfortunately your attestation gets included one slot later and with that you receive a slight penalty",
        "created_at": "2020-10-13T00:25:43.859000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You can try bumping up your peer count, so as to vote better on the current head",
        "created_at": "2020-10-13T00:26:18.405000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am always connected to 79 peers, using Nimbus.",
        "created_at": "2020-10-13T00:26:59.051000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What is your inclusion distance for your attestations ?",
        "created_at": "2020-10-13T00:27:24.835000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Usually 0",
        "created_at": "2020-10-13T00:27:36.923000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, 0 ?",
        "created_at": "2020-10-13T00:27:47.559000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In that case you wont be penalised",
        "created_at": "2020-10-13T00:27:57.282000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Unless you are voting on the wrong head",
        "created_at": "2020-10-13T00:28:06.749000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://medalla.beaconcha.in/validator/a40237ae62e6cbf4f65d82ea90ea7862346da553543d00466b655de5e655a0ca2e8a4fede966762bc12f268266da1f7a",
        "created_at": "2020-10-13T00:28:19.896000+00:00",
        "attachments": null
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't think that you lose out if you're included in the first block that you could. It doesn't really make sense to lose eth if you're node is running properly.",
        "created_at": "2020-10-13T00:28:25.315000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Don't mind that I deposited twice xD",
        "created_at": "2020-10-13T00:28:27.249000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@762775515244265472\u003e yeah that is a gap that should be fixed",
        "created_at": "2020-10-13T00:28:51.670000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Since that is very much outside the average validators control",
        "created_at": "2020-10-13T00:29:09.917000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@551157969367334912\u003e i think beaconcha.in is stuck",
        "created_at": "2020-10-13T00:29:51.637000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2020-10-13T00:29:57.702000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "fb991fb7a1c9ca945baa15c95baa776e8c3ec96d580e4f56ecc0083fddf5d6ef"
            }
        ]
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Its 3 hours behind",
        "created_at": "2020-10-13T00:30:10.354000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but I can check the epoch 15545-15525, e.g.",
        "created_at": "2020-10-13T00:31:21.635000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "1891ea92372ae0e260b7a1686a91127498e4a1cfd49af51f8bf82694c241f364"
            }
        ]
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think the calculation is a coefficient of ( first possible inclusion slot - attestation slot ) / ( actual inclusion slot - attestation slot ) with a coefficient of 1 being the full reward.",
        "created_at": "2020-10-13T00:31:29.123000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "all my attestations are at 0 distance, but still decreased balance",
        "created_at": "2020-10-13T00:31:33.732000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are you voting for the correct head ?",
        "created_at": "2020-10-13T00:33:53.434000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There's an important difference between the inclusion difference that Beaconcha.in shows and what is used for paying rewards.  Rewards are paid strictly on how many slots after the attestation slot it was included in a block. There's no allowance for empty slots.  Beaconcha.in *does* give an allowance for empty slots so reports 0 inclusion distance even when the actual inclusion distance is higher and so rewards are lower.",
        "created_at": "2020-10-13T00:34:24.574000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2020-10-13T00:34:49.184000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "1ea4089bb5dddb10cf518b5beebd1a8432f31cc16c1ac63cf02117e115d8a4d2"
            }
        ]
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!476250636548308992\u003e I have no idea on how to verify that.",
        "created_at": "2020-10-13T00:35:14.644000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Beaconcha.in's value is useful for determining if your validator is doing the best it can, but it does mean you can have perfect 0s on beaconcha.in and still lose money because attestations weren't included in the next block (because it was not created).",
        "created_at": "2020-10-13T00:35:21.306000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That sounds confusing, why does it deviate from the spec here ? For beaconcha.in",
        "created_at": "2020-10-13T00:35:28.113000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah k, but in times like this it does the opposite",
        "created_at": "2020-10-13T00:36:05.888000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It shows a validator as stable and running normally when its actually being penalised",
        "created_at": "2020-10-13T00:36:30.439000+00:00",
        "attachments": null
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "At any rate your balance increases albeit by a small amount. It shouldn't decrease.",
        "created_at": "2020-10-13T00:36:41.995000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so perhaps Nimbus should detect its voting in the wrong head? Maybe I should rise an issue with Nimbus team? cc \u003c@\u0026595681804422479873\u003e",
        "created_at": "2020-10-13T00:36:50.021000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Bear in mind that your earnings are never completely in your control and beaconcha.in is only compensating for one part of that.  You are dependent on other nodes not just to create the next block, but also to propagate your individual attestation, include it in an aggregate and propagate that aggregate.",
        "created_at": "2020-10-13T00:36:55.024000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@551157969367334912\u003e i think its the issue \u003c@340345049063882753\u003e has described above",
        "created_at": "2020-10-13T00:37:29.774000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Beaconcha.in provides an allowance for skip slots, but the protocol doesnt take that into account",
        "created_at": "2020-10-13T00:37:59.229000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just want my balance to increase",
        "created_at": "2020-10-13T00:38:21.961000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In a period of non-finality the best outcome is that they are neutral so you arent penalised.",
        "created_at": "2020-10-13T00:40:31.268000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't think this is sole an issue in beaconcha.in, as my concern is the penalizations I am having, even though I am running an honest node connected to many other honest nodes.",
        "created_at": "2020-10-13T00:41:28.075000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah there is no direct solution for this since this is out of your control",
        "created_at": "2020-10-13T00:42:05.198000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If a block proposer is offline your attestation gets delayed",
        "created_at": "2020-10-13T00:42:21.684000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I see that there is an issue happening in the protocol when the blocks are not finalizing, and perhaps the node clients need a better strategy when this is happening, however, its not possible to tell that a block would'nt finalize.",
        "created_at": "2020-10-13T00:42:38.835000+00:00",
        "attachments": null
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Here https://www.attestant.io/posts/defining-attestation-effectiveness/ it gives the formula that I put above, which indicates that you shouldn't lose from delays if no blocks were proposed. Anyway looking over that validator which you posted it doesn't look like the inclusion times, even the actual ones, are that bad.",
        "created_at": "2020-10-13T00:42:43.703000+00:00",
        "attachments": null
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Beaconcha.in links to it in the validator overview under attn affectiveness",
        "created_at": "2020-10-13T00:43:31.278000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!762775515244265472\u003e That's the calculation beaconcha.in uses, but it's not what's in the spec.",
        "created_at": "2020-10-13T00:44:01.635000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Seems like I am not the only one with this issue, as the overall reward graph seems to be like that",
        "created_at": "2020-10-13T00:44:09.898000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Can we call this a chain split?",
        "created_at": "2020-10-13T00:44:23.014000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There's definitely no chain split. All clients are implementing the spec accurately.  beaconcha.in's reporting is confusing in this case because it deliberately differs from the spec.",
        "created_at": "2020-10-13T00:44:56.460000+00:00",
        "attachments": null
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!340345049063882753\u003e Does the actual reward go down, or the coefficient? And anyways you can't get your balance deducted in any case, can you?",
        "created_at": "2020-10-13T00:45:44.200000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2020-10-13T00:47:11.625000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "4391560fe877911f0df8e45542ca2ae3fd61504b078e913c9cae435288e4001b"
            }
        ]
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!762775515244265472\u003e During periods of non-finality the quadratic leak comes in - basically there's a penalty applied to validators to accelerate the rate that offline validators are exited (it's still takes about a month).  If your validator had perfect inclusion rates (which is impossible when blocks are missed) then the penalty is exactly offset by rewards so the balance stays neutral.  But since the network is not going to include attestations effectively when a lot of nodes are offline, all validator balances will drop to some extent but the offline nodes will drop much faster.",
        "created_at": "2020-10-13T00:47:57.592000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@551157969367334912\u003e any fix to this would have to be reflected in the eth2 specifications. There is nothing much that clients can do here",
        "created_at": "2020-10-13T00:47:58.491000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "my balance decrease matches this liveness chart",
        "created_at": "2020-10-13T00:48:29.346000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!476250636548308992\u003e Is this issue documented somewhere?",
        "created_at": "2020-10-13T00:48:49.963000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Bear in mind that this is a very unusual (and bad) state for the network to be in.  It's happening on medalla because there's no real money so no incentive for users to keep their nodes online and monitor them well.  On MainNet people will be much more incentivised to keep their node up and participation rates will be much higher.",
        "created_at": "2020-10-13T00:49:20.723000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Let me link an issue, i dont think its directly related but also touches on inactivity leaks.",
        "created_at": "2020-10-13T00:50:02.901000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Even on a good day Medalla is only about 75% participation so about a quarter of validators have just abandoned their funds which doesn't leave a lot of wiggle room for people having issues before we lose finalization.  Pretty sure a quarter of validators won't walk away from real money on MainNet.",
        "created_at": "2020-10-13T00:50:09.810000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!340345049063882753\u003e I agree with that, it would be just unlikely to happen, but still, if happens, it will be a bigger problem as honest validators would be being penalized.",
        "created_at": "2020-10-13T00:50:10.961000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There should be a technical limitation for not solving this",
        "created_at": "2020-10-13T00:50:46.577000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Otherwise I think it should be fixed",
        "created_at": "2020-10-13T00:50:55.857000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Again, your attestation inclusion distance is mostly out of control of your node, even when the network is finalizing.  You are always dependent on other nodes to earn maximum rewards.",
        "created_at": "2020-10-13T00:51:34.022000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There's no way around that because the network has imperfect information - if the attestation isn't propagated it can't know if that's because you didn't produce it or it just wasn't gossiped through the network effectively.",
        "created_at": "2020-10-13T00:52:17.296000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, in the matters of \"unlikely\", this can happen in some cases, for example, intercontinental internet cable breaking, worldwide natural disasters, war, etc.",
        "created_at": "2020-10-13T00:53:05.013000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@551157969367334912\u003e there is no open issue at the moment. This is a tangentially related issue:\nhttps://github.com/ethereum/eth2.0-specs/issues/2098\n\nAlthough this deals with increasing penalties for offline validators",
        "created_at": "2020-10-13T00:53:24.393000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks. Should I mind creating an issue in this repository, or just commenting in this issue #2098?",
        "created_at": "2020-10-13T00:54:35.947000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "A new issue might be better since they arent directly related",
        "created_at": "2020-10-13T00:55:07.898000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah, no problem than, I can open an issue in the 2.0-specs repo explaining my problem!",
        "created_at": "2020-10-13T00:55:43.020000+00:00",
        "attachments": null
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!340345049063882753\u003e Ah I see. Thanks.",
        "created_at": "2020-10-13T00:56:18.923000+00:00",
        "attachments": null
    },
    {
        "author": "randomuser9550",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But I could still see that you should not lose if you got into the next available slot, and then you should break even. The loss would then occur only in the case where you don't get into the next available slot, in which case you wouldn't break even. That would work pretty well, since on average the same proportion of blocks are being produced as attestations, so there wouldn't be to much overflow. The algorithm that they say there could still work. Is that how it goes?",
        "created_at": "2020-10-13T01:05:40.499000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e There's definitely no chain split. All clients are implementing the spec accurately.  beaconcha.in's reporting is confusing in this case because it deliberately differs from the spec.\n\u003c@!340345049063882753\u003e Worth pointing out that effectiveness != reward, so \"differs from the spec\" isn't really accurate.  Attestation effectiveness is a derived value, useful for some purposes as you mentioned above, but not so useful for others (calculating the Ether reward).",
        "created_at": "2020-10-13T06:20:12.870000+00:00",
        "attachments": null
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Here you are https://github.com/ethereum/eth2.0-specs/issues/2100 !",
        "created_at": "2020-10-13T07:12:20.825000+00:00",
        "attachments": null
    }
]