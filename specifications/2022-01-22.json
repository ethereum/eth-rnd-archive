[
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "\u003c@!243183686562873344\u003e if you do a CREATE inside of initcode, and an SLOAD, then STOP, does that persist?",
        "created_at": "2022-01-22T19:48:54.677000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "I'm confused what you mean",
        "created_at": "2022-01-22T20:45:29.278000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "can you leave storage in an account with no code by calling CREATE in init code so the nonce gets bumped?",
        "created_at": "2022-01-22T21:54:50.012000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "`SSTORE` not `SLOAD`",
        "created_at": "2022-01-22T21:55:30.352000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "I think the account persists as long as there was no execution error and at least one property (value, code, nonce, storage) is not empty.",
        "created_at": "2022-01-22T21:56:13.799000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "If you create a contract, set some storage keys in initcode, then return empty code (such as `STOP`) the result depends on protocol version.",
        "created_at": "2022-01-22T22:12:33.891000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Prior to Spurious Dragon you get an empty contract (no nonce, no balance, no code) that has storage. They can be deleted by EIP 161 if touched.",
        "created_at": "2022-01-22T22:15:05.494000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "After Spurious Dragon, you get an account with nonce of 1 (because nonce incremented before initcode starts by EIP 161), so not empty and storage persist regardless.",
        "created_at": "2022-01-22T22:16:53.672000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Ah, okay, thanks for clearing that up",
        "created_at": "2022-01-22T22:19:50.522000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "I always forget that pesky nonce+1 before initcode",
        "created_at": "2022-01-22T22:20:09.831000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Storage is not a property that prevents deletion by EIP 161. So empty accounts with storage could be created prior to Spurious Dragon and then get deleted when touched (this creates mindbending edge cases).",
        "created_at": "2022-01-22T22:21:34.474000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Could you deploy a contract to an account with storage but was otherwise empty, and keep that storage?",
        "created_at": "2022-01-22T22:28:31.614000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Because that sounds fun",
        "created_at": "2022-01-22T22:28:36.448000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Because `CREATE2` didn't exist prior to Spurious Dragon you who need a Keccak hash collision.",
        "created_at": "2022-01-22T22:30:01.606000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Ah, right.",
        "created_at": "2022-01-22T22:30:20.900000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Different clients would behave differently in that (fortunately impossible) situation.",
        "created_at": "2022-01-22T22:30:52.032000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "Yeah I see EIP-161 doesn't mention storage. Could this be simplified? I'd vote for getting any changes in which reduce edge cases.",
        "created_at": "2022-01-22T22:36:20.781000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Peter killed the last empty accounts on Friday",
        "created_at": "2022-01-22T22:37:12.605000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "general",
        "parent": "",
        "content": "I know, I was on the call ðŸ™‚",
        "created_at": "2022-01-22T22:37:21.683000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Deserves a POAP or something.",
        "created_at": "2022-01-22T22:37:48.887000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "I plan to write an EIP to reduce the complexity of EIP 161 by undefining a bunch impossible behaviour that has never happened and can never happen (which is why I killed the remaining empty accounts).",
        "created_at": "2022-01-22T22:39:01.211000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "As a heads up, if someone finds a consensus issue involving empty accounts it is probably still expoitable on Ethereum Classic, so be discreet.",
        "created_at": "2022-01-22T22:42:05.042000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "I've looked into all the edgecases I could think of and haven't found anything",
        "created_at": "2022-01-22T22:42:58.278000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Good to know, thanks",
        "created_at": "2022-01-22T22:43:11.707000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "What clients do they run? Besu?",
        "created_at": "2022-01-22T22:43:19.602000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Besu and a port of Geth called CoreGeth are the two I know",
        "created_at": "2022-01-22T22:43:44.074000+00:00",
        "attachments": null
    }
]