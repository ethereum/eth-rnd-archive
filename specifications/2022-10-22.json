[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I'm not aware of any safe way of doing that without breaking sync. I'm looking forward for the time that we can just ditch completely old blocks and have a way of checking proofs. But in the current status quo I'm afraid there's very little we can actually remove. We got rid of the optimistic sync logic around forkchoice poisoning, and that was it essentially. We still need to check every single block if it's execution enabled or not. Which is ridiculous",
        "created_at": "2022-10-22T00:19:57.179000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Why would it break syncing?  EL syncs up to fork block, then CL takes over.",
        "created_at": "2022-10-22T06:44:31.471000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Why does it matter *how* the fork block is determined by the EL?",
        "created_at": "2022-10-22T06:44:39.667000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Oh, to be clear, this change would be for the EL only.  The CL can still use TTD if that makes more sense to them (though it seems odd to me that it is necessary at this point).",
        "created_at": "2022-10-22T06:44:56.630000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e We still need to check every single block if it's execution enabled or not.\nWhy?",
        "created_at": "2022-10-22T06:45:27.081000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "because we may be synging from genesis",
        "created_at": "2022-10-22T08:00:46.844000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Right, but I don't see why that matters.",
        "created_at": "2022-10-22T08:01:14.300000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Sync with EL up to block `n`, then sync with CL after block `n`.",
        "created_at": "2022-10-22T08:01:25.525000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Rather than sync with EL up to block with difficulty `m`, then sync with CL after block with difficulty `m`.",
        "created_at": "2022-10-22T08:01:43.681000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "it's mostly that the execution payload is a black box to us that we want to parse the absolute minimum of it. The same thing with the engine API is minimal so as to have a sucessful merge. What you are suggesting is not getting rid of the merge code but rather change it for something else equivalent so that the EL can keep a block number logic for the fork.",
        "created_at": "2022-10-22T08:05:37.086000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I'd like to get rid of the merge code at all since it doesn't make sense to keep it, just don't accept any blocks that are not merged",
        "created_at": "2022-10-22T08:06:22.319000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "This change wouldn’t affect the CL at all. You still don’t need to parse the payload in a new way etc. it’s a small change to the fork scheduling logic in the EL which is mostly only easier if you haven’t already implemented TTD based forks.",
        "created_at": "2022-10-22T08:06:58.731000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "There isn’t much we can ditch on the CL side because we used the usual epoch based fork scheduling. We could remove the code that polls the EL to see if ttd has been reached now but that’s about it.",
        "created_at": "2022-10-22T08:07:59.390000+00:00",
        "attachments": []
    }
]