[
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "I think I figured it out. I applied the genesis block, then replaced the state object with the persisted one.\n\nSince the unoptimized state isn't persistent, that had no effect. With the optimized state, however, the genesis accounts had double the intended balances...",
        "created_at": "2021-10-13T03:48:20.696000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "State Sync #23\n - \u003c@!689161464829050960\u003e state sync tool\n - \u003c@!564718359304863744\u003e frontier state tests done, homestead nearly all tests passing (about 200 left)\n - \u003c@!243183686562873344\u003e fixing issues is the optimized state implementation",
        "created_at": "2021-10-13T14:35:03.010000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "\u003c@!243183686562873344\u003e \u003c@!564718359304863744\u003e here's the PR for the state sync tool: https://github.com/ethereum/execution-specs/pull/372",
        "created_at": "2021-10-13T15:22:54.384000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "https://etherscan.io/block/62102 is the block that isn't syncing currently.",
        "created_at": "2021-10-13T15:25:20.059000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "So comparing the sstores to etherscan, this seems correct...",
        "created_at": "2021-10-13T18:50:25.231000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "I'll try to take a look at this tomorrow. I'm currently focussed on the homestead tests.",
        "created_at": "2021-10-13T18:51:21.650000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "No rush whatsoever",
        "created_at": "2021-10-13T18:51:43.638000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "FWIW, Here's how I debug consensus issues:\n I implement my own trace. I store info that I'm interested in a global variable before and after executing a opcode and then I compare with the trace of another implementation.",
        "created_at": "2021-10-13T18:53:57.071000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Yeah, that's basically what I've been doing. I have a patch that dumps out the opcode trace from the sync tool and I compare it against etherscan.",
        "created_at": "2021-10-13T18:54:39.100000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "As far as I can tell, the opcodes and gas line up, and the sstores seem to write the same data.",
        "created_at": "2021-10-13T18:54:57.568000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Now I'm looking at the account diff",
        "created_at": "2021-10-13T18:55:03.456000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Having suspend/resume makes it _way_ faster.",
        "created_at": "2021-10-13T18:55:16.042000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "how do you suspend and resume? I use python's debugger(pdb)",
        "created_at": "2021-10-13T18:56:04.309000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "```bash\nethereum-spec-sync --optimized --persist ~/debug\n```",
        "created_at": "2021-10-13T18:56:46.976000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Saves every 1000 blocks, and rolls back when it crashes",
        "created_at": "2021-10-13T18:57:11.464000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "wow nice. I didn't know that existed",
        "created_at": "2021-10-13T18:57:14.409000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Just finished it today ðŸ˜„",
        "created_at": "2021-10-13T18:57:24.954000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Are we double-checking the `sender_balance` in the call instruction?",
        "created_at": "2021-10-13T19:30:10.419000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Should probably avoid that if we can.",
        "created_at": "2021-10-13T19:30:16.689000+00:00",
        "attachments": null
    }
]