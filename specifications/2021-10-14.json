[
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "The bug seems to be that `BLOCKHASH 61201` returns `0x42f99a65a1d74086f4e8b25e5bc2bc07d43404c5c2c28c4b4f349d1d2fb75a49` in the specs , but it should be `0xe1caa300f4c6e63efe53e76265ba74bf1b4ccf2bd27d253593920b2576912319`.",
        "created_at": "2021-10-14T12:15:13.120000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Found it, `most_recent_block_hash = crypto.keccak256(rlp.encode(chain.blocks[-1]))`. It should be `chain.blocks[-1].header`.",
        "created_at": "2021-10-14T12:39:46.742000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "With that fixed we get an error on 62509.",
        "created_at": "2021-10-14T12:43:39.809000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "I have fixed a bug in blockhash in the homestead hardfork",
        "created_at": "2021-10-14T12:48:56.960000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "not sure if it's related.",
        "created_at": "2021-10-14T12:49:14.790000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "I can open an ugly looking PR WIP PR that has the fix. You can apply it your local branch and check if it works",
        "created_at": "2021-10-14T12:50:23.622000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Just link your git branch on github, I'll look.",
        "created_at": "2021-10-14T12:51:06.023000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "I've fixed it locally already.",
        "created_at": "2021-10-14T12:51:25.387000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ethereum/execution-specs/commit/2a2e085c0f5980e32bf7126d479bb13b32fdf586",
        "created_at": "2021-10-14T12:52:43.863000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "There are several more fixes in other opcodes. I've applied these fixes only to Homestead  for now. I'll apply them to frontier as well.\nThis is the branch, if you want to look at other bug fixes: https://github.com/voith/eth1.0-specs/tree/homestead",
        "created_at": "2021-10-14T12:54:36.678000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "We now get to block 146675, where https://etherscan.io/tx/0x0fac4168103638e3a7e74362db2bbb0dd3095c6d26259a61debf164a9f616d05 calls the `ECRECOVER` precompile directly. We fail to notice that address 1 is a precompile and don't charge the 3000 gas for ECRECOVER.",
        "created_at": "2021-10-14T13:48:59.455000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "This is fixed on my branch.\n\u003c@!243183686562873344\u003e This commit should fix it.\nhttps://github.com/ethereum/execution-specs/commit/6a790f859f1fd1ce906cbd8f1659ed28db7265a8\nCan you try?",
        "created_at": "2021-10-14T13:59:35.151000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Fixed it, thanks.",
        "created_at": "2021-10-14T14:10:03.639000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "you guys are killing it",
        "created_at": "2021-10-14T14:47:52.352000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "Can I suggest that you (any or all) consider writing up a blog post on this project?  There's plenty of interesting angles to choose from, but I'll suggest something along the lines of laying out a little bit of yellow paper history, maybe some of the other efforts that have tried to replace the YP, and then digging into the py-spec effort and including some of your best examples to show off what's been done (actual code, render'd docs, showing it run the fixture tests, etc)",
        "created_at": "2021-10-14T14:50:46.174000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Just backported the difficulty bomb code from voith's homestead work. This gets us past 200000.",
        "created_at": "2021-10-14T15:26:36.685000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "sweet! did you encounter another consensus bug?",
        "created_at": "2021-10-14T15:28:00.552000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Yeah, the difficulty bomb exists in Frontier, but isn't mentioned in the yellow paper so it got missed. It think it may have been added in a stealth retroactive hardfork between Frontier and Homestead, but I am confused about the history.",
        "created_at": "2021-10-14T15:30:20.659000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "great find! I can investigate.",
        "created_at": "2021-10-14T15:31:06.268000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "not much info on it, but was introduced starting at block 200,000 in the \"Frontier Thawing\" https://blog.ethereum.org/2015/08/04/ethereum-protocol-update-1/",
        "created_at": "2021-10-14T15:39:09.992000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Ugh, so is that technically a hardfork?",
        "created_at": "2021-10-14T15:39:40.507000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "yes appears so",
        "created_at": "2021-10-14T15:39:52.379000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "aight. guess we'll need a `frontier_thawing` directory?",
        "created_at": "2021-10-14T15:40:12.417000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "We have got to https://etherscan.io/block/283008",
        "created_at": "2021-10-14T15:40:16.713000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "It's retroactive, so we can pretend it was implemented from the Genesis. Like https://eips.ethereum.org/EIPS/eip-3541.",
        "created_at": "2021-10-14T15:41:28.510000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Oh, so it doesn't have a \"start block\"?",
        "created_at": "2021-10-14T15:41:48.860000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "That's perfect then.",
        "created_at": "2021-10-14T15:41:59.940000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "The bomb is every block add `x` to the difficulty, but `x = 0` prior to block 200000.",
        "created_at": "2021-10-14T15:42:56.721000+00:00",
        "attachments": null
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "my implementation of the difficulty logic has some annotation that might be useful: https://github.com/norswap/nanoeth/blob/master/src/com/norswap/nanoeth/blocks/Difficulty.java",
        "created_at": "2021-10-14T15:44:25.110000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "I guess I'm okay with that. Seems small enough to avoid a whole fork directory.",
        "created_at": "2021-10-14T15:44:56.352000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "But \"has no effect before block X\" is very much how every hardfork works ðŸ˜›",
        "created_at": "2021-10-14T15:45:18.929000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "yep - makes sense in this case to do it retroactively",
        "created_at": "2021-10-14T15:46:49.055000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "\u003c@!218397452309495809\u003e are you interested in porting some of your annotations over to the pyspec at some point? Looks like you've got a lot of good info in your repo",
        "created_at": "2021-10-14T15:49:45.884000+00:00",
        "attachments": null
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "yes, definitely, though I'll need to find the time ðŸ˜… \nbut also feel free to pilfer whatever ðŸ™‚",
        "created_at": "2021-10-14T15:50:22.546000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "what are you up to these days?",
        "created_at": "2021-10-14T15:50:34.411000+00:00",
        "attachments": null
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "trying to implement Verkle trees â€” trudging through the cryptographic side of things",
        "created_at": "2021-10-14T15:51:09.308000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "oh nice! good luck with that ðŸ™‚",
        "created_at": "2021-10-14T15:51:20.927000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "\u003c@!564718359304863744\u003e I'm going to plough on with these bug fixes and make a PR (probably tomorrow). Everything so far has been either trivial or you already fixed it in homestead.",
        "created_at": "2021-10-14T15:55:12.555000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "sure go ahead!",
        "created_at": "2021-10-14T15:56:38.211000+00:00",
        "attachments": null
    }
]