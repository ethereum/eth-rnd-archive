[
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "Did y'all ever make a call on whether forks live together in a repo or if you \"lock in\" a fork in prior releases and then just build from there?\nLooks like the former here -- https://github.com/ethereum/execution-specs/tree/master/src/ethereum\n\nright?",
        "created_at": "2022-02-04T15:31:10.483000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Yep, they all live side by side",
        "created_at": "2022-02-04T15:31:31.985000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "and if you do that -- do you copy pasta the who lespec and then mod it in the new directory? or do you just specify the diff",
        "created_at": "2022-02-04T15:31:39.639000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "It's a copy-then-modify",
        "created_at": "2022-02-04T15:31:56.696000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "And for each PR, we review the diff to the previous fork",
        "created_at": "2022-02-04T15:32:12.043000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "interesting\n\nhave you run into issues where you end up wanting to change something in a previous fork (maybe modularize a function or optimize something) that then has to be rippled forward manually to many forks in the future?",
        "created_at": "2022-02-04T15:32:43.483000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Yep",
        "created_at": "2022-02-04T15:32:53.068000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "painful? not so bad?",
        "created_at": "2022-02-04T15:33:03.549000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "You can write it once, make a patch, then apply it to the other forks",
        "created_at": "2022-02-04T15:33:33.905000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "copy *entire* spec, then modify?\n\nor copy sub-set, then modify",
        "created_at": "2022-02-04T15:33:37.238000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Pretty painful to review",
        "created_at": "2022-02-04T15:33:38.336000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "The entire spec",
        "created_at": "2022-02-04T15:33:43.653000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "got it",
        "created_at": "2022-02-04T15:33:46.016000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Well, not _exactly_",
        "created_at": "2022-02-04T15:33:52.808000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "There are some common bits (like `U256`)",
        "created_at": "2022-02-04T15:34:02.581000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Here's a good example of a backport PR: https://github.com/ethereum/execution-specs/pull/441",
        "created_at": "2022-02-04T15:35:06.803000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "right\n\nwe only bring forward functions/types/etc that we need to mod/extend and then dynamically build the full for each spec\n\nI like that this allows us to be very clear to contributors what changes, but it has it's own complexities spurring from the fact that mutating things is evil.",
        "created_at": "2022-02-04T15:39:53.234000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "general",
        "parent": "",
        "content": "unfortunately each of the approaches has drawbacks if different settings",
        "created_at": "2022-02-04T15:40:24.746000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "We do some mutating of types to implement the \"optimized\" module (to sync mainnet), and it's arguably worse",
        "created_at": "2022-02-04T15:41:28.263000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Just because of how careful you have to be monkey patching in python",
        "created_at": "2022-02-04T15:41:41.016000+00:00",
        "attachments": []
    }
]