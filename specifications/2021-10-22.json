[
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "RLP encode/decode is probably the only remaining low hanging optimization fruit.",
        "created_at": "2021-10-22T10:15:03.695000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "The only hard part of this is exporting the data out of the clients (we probably need a custom RPC endpoint?). Importing it is really easy.",
        "created_at": "2021-10-22T10:18:56.681000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I would look into whether `eth_getProof` gets you what you need: https://eips.ethereum.org/EIPS/eip-1186",
        "created_at": "2021-10-22T13:39:54.846000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I can get you access to an archive node, but you can validate the idea by trying to execute blocks near the tip of the chain on a regular client that is fully synced.",
        "created_at": "2021-10-22T13:40:26.266000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Actually `debug_accountRange` and `debug_storageRangeAt` exist, so we can use those.",
        "created_at": "2021-10-22T14:19:47.921000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "I have an Erigon archive node. I have no access at all to a geth node, so I have to rely on other people to catch geth specific bugs like the hex number format one you fixed.",
        "created_at": "2021-10-22T14:21:51.272000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I assume that you guys would like me to open these as bugs in the `executions-specs` repository?\n\n```\nINFO:ethereum_spec_tools.sync:block 1149999 applied (took 0.00902197090908885s)\nTraceback (most recent call last):\n  File \"/home/pipermerriam/.virtualenvs/pyspec/bin/ethereum-spec-sync\", line 33, in \u003cmodule\u003e\n    sys.exit(load_entry_point('ethereum', 'console_scripts', 'ethereum-spec-sync')())\n  File \"/home/pipermerriam/projects/execution-specs/src/ethereum_spec_tools/sync.py\", line 572, in main\n    sync.process_blocks()\n  File \"/home/pipermerriam/projects/execution-specs/src/ethereum_spec_tools/sync.py\", line 548, in process_blocks\n    self.module(\"spec\").state_transition(self.chain, block)\n  File \"/home/pipermerriam/projects/execution-specs/src/ethereum/frontier/spec.py\", line 174, in state_transition\n    validate_header(block.header, parent_header)\n  File \"/home/pipermerriam/projects/execution-specs/src/ethereum/frontier/spec.py\", line 221, in validate_header\n    ensure(header.difficulty == block_difficulty)\n  File \"/home/pipermerriam/projects/execution-specs/src/ethereum/utils/ensure.py\", line 42, in ensure\n    raise exception_class()\nethereum.utils.ensure.EnsureError\n```",
        "created_at": "2021-10-22T15:10:04.411000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Is that the fork block? I remember it's somewhere around 1.1 million blocks.",
        "created_at": "2021-10-22T15:10:39.066000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "looks a lot like a fork block to me",
        "created_at": "2021-10-22T15:10:50.589000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "I don't think we've put up the homestead fork yet",
        "created_at": "2021-10-22T15:11:08.532000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "well, looks like I successfully synced all of Frontier!?",
        "created_at": "2021-10-22T15:11:33.384000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Rather I know we haven't put it in `ethereum/execution-specs` but if you're running voith's branch then it's a bug.",
        "created_at": "2021-10-22T15:11:46.831000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Looks like!",
        "created_at": "2021-10-22T15:11:51.450000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Here is pypy profile of a sync of all of frontier: https://pastebin.com/tSVdjv8J.",
        "created_at": "2021-10-22T16:37:23.500000+00:00",
        "attachments": null
    },
    {
        "author": "peter.davies",
        "category": "general",
        "parent": "",
        "content": "Rough breakdown is:\n33% calculating state roots\n28% processing transactions\n19% checking POWs\n11% persisting stuff to disk (this is on HDD)",
        "created_at": "2021-10-22T16:45:14.723000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "I _still_ haven't been able to sync frontier after a couple days",
        "created_at": "2021-10-22T16:45:38.882000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "I have persist disabled",
        "created_at": "2021-10-22T16:45:51.208000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "But you and Piper have done it.",
        "created_at": "2021-10-22T16:46:06.181000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Bloody weird.",
        "created_at": "2021-10-22T16:46:50.429000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "My laptop isn't _that_ bad.",
        "created_at": "2021-10-22T16:46:55.769000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Under 10% memory used, the rest of my machine is totally usable.",
        "created_at": "2021-10-22T16:47:49.628000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "I don't think it's trashing or anything ðŸ¤ª",
        "created_at": "2021-10-22T16:48:21.083000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "how does the project maintain parity between the optimized and non-optimized implementations?",
        "created_at": "2021-10-22T17:36:21.145000+00:00",
        "attachments": null
    },
    {
        "author": "voith",
        "category": "general",
        "parent": "",
        "content": "I don't think we are running the test suite with both the optimized and non-optimized implementations. \nI think we should create separate jobs on CI for this.",
        "created_at": "2021-10-22T17:37:46.169000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "Assuming the APIs are the same, this may also be a good place for hypothesis/fuzz-testing/property-based-testing",
        "created_at": "2021-10-22T17:39:55.298000+00:00",
        "attachments": null
    }
]