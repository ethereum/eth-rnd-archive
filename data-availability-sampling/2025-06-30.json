[
    {
        "author": "jimmygchen",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I agree this is quite confusing.\n`SAMPLES` is the number of columns a full node must sample, so it's not number of groups I think.\n\n`CUSTODY_REQUIREMENT` and `VALIDATOR_CUSTODY_REQUIREMENT` are number of custody groups - and i think it make sense to clarify it.",
        "created_at": "2025-06-30T00:33:37.632000+00:00",
        "attachments": null
    },
    {
        "author": "fradamt",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For custody sampling, `SAMPLES_PER_SLOT` is also a number of custody groups, since that's what you're sampling. In general it could be any \"vertical unit\" that you're able to sample",
        "created_at": "2025-06-30T05:25:06.030000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ah i might have misunderstood it, in my mind `SAMPLES_PER_SLOT` is the number of samples a node need to verify - for 1D its the entire column and for 2D its a cell - regardless of how we group the nodes in the network.",
        "created_at": "2025-06-30T06:18:05.537000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah in that case i feel like it's worth the clarification - in LH we currently use `SAMPLES_PER_SLOT` as number of columns, so we'll need to fix that",
        "created_at": "2025-06-30T06:35:45.823000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "lets say if we decide to make columns smaller and increase number of columns to 512,  how would the change look like?\n\nI assume we have to also increase the number of custody groups - otherwise, if `SAMPLES_PER_SLOT` is the number of custody groups, then we'd end up sampling more columns and requiring the same bandwidth",
        "created_at": "2025-06-30T06:38:59.061000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I guess we'd have to also tweak the number of custody group and custody requirements. (Sorry, going off-topic a bit ðŸ˜… )",
        "created_at": "2025-06-30T06:55:34.632000+00:00",
        "attachments": null
    },
    {
        "author": "fradamt",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e lets say if we decide to make columns smaller and increase number of columns to 512,  how would the change look like?\n\u003e \n\u003e I assume we have to also increase the number of custody groups - otherwise, if SAMPLES_PER_SLOT is the number of custody groups, then we'd end up sampling more columns and requiring the same bandwidth\n\nIf we don't increase the number of subnets as well, there would anyway not be a way to \"subnet sample\" columns individually. We could say that columns are the sampling unit, but effectively you'd still be downloading whole custody groups. And for peer sampling, which definitely should have columns as the sampling unit, the selection of samples is very different, so regardless we don't have a way to say \"this is the set of samples you care about, up to you how you get them (subnet sampling, peer sampling...)\"\n\nSee the discussion [here](https://github.com/ethereum/consensus-specs/pull/4251#discussion_r2045001427).",
        "created_at": "2025-06-30T07:21:09.293000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah make sense, thanks for linking the PR, i missed this one!",
        "created_at": "2025-06-30T07:30:03.185000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ah ok and the reason here (discussion in the above PR, cc \u003c@425907307621122049\u003e) but may no longer be relevant with the removal of peer sampling\n\u003e I would consider changing SAMPLES_PER_SLOT to not specify the units, so that it can be used by both custody sampling (sample = custody group) and the separate peer sampling spec (sample = column)",
        "created_at": "2025-06-30T07:35:56.202000+00:00",
        "attachments": null
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It sounds even more strange for me.  Especially if we want to have 2 differrent sampling we'd better have 2 separate constants for such case: GROUP_SAMPLES_PER_SLOT and PEER_SAMPLE_COLUMNS_PER_SLOT for example",
        "created_at": "2025-06-30T16:01:11.796000+00:00",
        "attachments": null
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But as far as we dropped peer sampling, it's not needed now. Everything is about groups (which is not clear)",
        "created_at": "2025-06-30T16:02:39.584000+00:00",
        "attachments": null
    }
]