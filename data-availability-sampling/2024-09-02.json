[
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Even after allowing for multiple cores on each node, the improvement on cell and proof computation time is minor\n\nIt takes up 70% of the CPU's time",
        "created_at": "2024-09-02T11:18:15.712000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "61f77709398bba4beae842de63c0357da4506e573ba896148832d36abcff75ec"
            }
        ]
    },
    {
        "author": "barnabasbusa",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "can you check with pre peerdas metrics, if blob kzg computation is still high?",
        "created_at": "2024-09-02T11:21:54.554000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thats one big difference vs mainnet. For the CL, blob kzg proofs are already computed when retrieving it from the EL via the engine",
        "created_at": "2024-09-02T11:28:47.158000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Could we not create a more realistic test by using precomputed kzg proofs on kurtosis?",
        "created_at": "2024-09-02T11:34:18.911000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "How does that work ? The CL only knows what the blobs are at the time of block building",
        "created_at": "2024-09-02T11:38:53.847000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Just to check I'm reading this right; it takes 7.3 seconds to compute the cells and proofs needed for a block and 100% of that time is spent in the C function call to c-kzg?",
        "created_at": "2024-09-02T11:40:31.459000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Also is this showing the accumulated time for calling computeCellsAndProofs, so assuming there are 7 blobs, the 7 seconds indicates that computeCellsAndProofs is taking 1 second each and was called 7 times for example",
        "created_at": "2024-09-02T11:42:14.284000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So this is for the whole process and not just block building. But yeah from a 10s snapshot 7.3s is spent on the call to ckzg",
        "created_at": "2024-09-02T11:42:21.215000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah that would make sense",
        "created_at": "2024-09-02T11:43:07.039000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Is it possible to show cpu usage?",
        "created_at": "2024-09-02T11:45:39.383000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For a time of 7 seconds, I would expect the input to be 35 blobs computed sequentially",
        "created_at": "2024-09-02T11:49:35.508000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "What particular usage are you looking for ?",
        "created_at": "2024-09-02T11:52:16.239000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah but it appears to only be 6 blob txs",
        "created_at": "2024-09-02T11:52:36.080000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "How many threads are being used for the computeCellsAndProofs section -- ie are we actually using N threads to call computeCellsAndProofs or is it all still being locked to one thread",
        "created_at": "2024-09-02T11:53:31.012000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@476250636548308992\u003e what branch of prysm are you using (for kurtosis)?",
        "created_at": "2024-09-02T11:56:52.653000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Each call for each blob is on its own thread",
        "created_at": "2024-09-02T11:59:13.819000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The branch is `peerDAS`",
        "created_at": "2024-09-02T11:59:27.790000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/prysmaticlabs/prysm/tree/peerDAS",
        "created_at": "2024-09-02T11:59:45.620000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "wdym by this? isn't the CL computing proofs the same way on mainnet? Or is the difference mev-related?",
        "created_at": "2024-09-02T12:07:43.026000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "its not, blob kzg proofs are retrieved from the EL as the El already verifies it along with the commitment in the particular blob bundle",
        "created_at": "2024-09-02T12:12:13.649000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "in peerDAS the big difference is that cell proofs are generated in the CL during the critical path",
        "created_at": "2024-09-02T12:12:37.019000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ahh got it, i forgot this was the peerDAS chat. i thought something was off on local vs mainnet devnets ðŸ˜…",
        "created_at": "2024-09-02T12:14:32.487000+00:00",
        "attachments": null
    }
]