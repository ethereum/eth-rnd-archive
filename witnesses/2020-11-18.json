[
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e \u003c@!482518216019542016\u003e would you be able to tell which nodes are missing?\n\u003c@!489256758989029405\u003e not easily, but I guess you already found out what is causing that?",
        "created_at": "2020-11-18T08:08:10.756000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not seeing many VM pauses because of missing data now. Was able to keep up with the tip for a little while but then got a `Import starved for 199.6s, waiting for \u003cBlockHeader #11281110 203b71d6\u003e body` and started lagging behind ðŸ˜¦",
        "created_at": "2020-11-18T09:38:15.892000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!425615769280315392\u003e ^",
        "created_at": "2020-11-18T09:38:21.745000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "on my machine, block imports are taking 10-15s without VM pauses so once I start lagging behind it's hard to catch up",
        "created_at": "2020-11-18T09:39:51.659000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "oh",
        "created_at": "2020-11-18T12:54:22.180000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Not seeing many VM pauses because of missing data now. Was able to keep up with the tip for a little while but then got a `Import starved for 199.6s, waiting for \u003cBlockHeader #11281110 203b71d6\u003e body` and started lagging behind ðŸ˜¦\n\u003c@!482518216019542016\u003e did it only get better after you synced much state in the background?",
        "created_at": "2020-11-18T12:57:40.047000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "was the 'import starved' due to missing state or something else?",
        "created_at": "2020-11-18T12:57:52.551000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in Nethermind we skip blocks in beam sync if they fail to sync in 15 seconds",
        "created_at": "2020-11-18T12:58:13.707000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we simply discard them and move to head",
        "created_at": "2020-11-18T12:58:21.722000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the log says it was waiting for a block body. I suppose that was because we use a very long timeout when waiting for a block body",
        "created_at": "2020-11-18T13:19:34.193000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if we'd given up earlier and asked another peer it probably would have taken a lot less than 199s",
        "created_at": "2020-11-18T13:20:07.681000+00:00",
        "attachments": null
    },
    {
        "author": "tkstanczak",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah, I see, yes we use 3 seconds",
        "created_at": "2020-11-18T13:20:48.394000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e did it only get better after you synced much state in the background?\nthis was actually with a fresh state DB. all witnesses seemed to have all the necessary nodes",
        "created_at": "2020-11-18T13:22:00.814000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That \"Import starved\" message isn't about state, it's either headers or block bodies.",
        "created_at": "2020-11-18T15:18:31.271000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!425615769280315392\u003e is 10-15s to import a mainnet block normal?",
        "created_at": "2020-11-18T16:02:19.647000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No, that sounds high",
        "created_at": "2020-11-18T16:03:20.347000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "that's what I was seeing when there were no vm pauses, and I believe my NVMe SSD has decent performance",
        "created_at": "2020-11-18T16:05:34.430000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Looking over my logs, more like 7s (Using the `BeamImport` log, \"total time\" * \"exec %\"). If you're not pausing, then exec% should be 100%.",
        "created_at": "2020-11-18T16:27:31.950000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah, I have exec% at 100% on all. some were under 10s, but most are above 10s",
        "created_at": "2020-11-18T16:38:10.419000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "small sample, though. only 50 or so blocks",
        "created_at": "2020-11-18T16:38:52.280000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I've got a monster machine running it, with 128GB RAM, so it's plausible that I'm getting 30% faster speeds on having most of the relevant disk files in the OS buffer.",
        "created_at": "2020-11-18T16:45:16.025000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You have the `rlp[rust-backend]` installed, right?",
        "created_at": "2020-11-18T16:46:23.090000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At those processing times, it seems worthwhile to do another round of performance improvements",
        "created_at": "2020-11-18T16:48:37.197000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah, with rusty-rlp",
        "created_at": "2020-11-18T17:00:20.683000+00:00",
        "attachments": null
    },
    {
        "author": "guilhermesalgado9479",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "maybe my AMD Ryzen processor is to blame",
        "created_at": "2020-11-18T17:00:55.517000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Jason's laptop is hilariously beefy",
        "created_at": "2020-11-18T20:11:23.858000+00:00",
        "attachments": null
    }
]