[
    {
        "author": "80raghavendra",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@520564582196969472\u003e \u003c@682078300234973185\u003e Suppose the state of only one  contract is changed in a block. Then the witness should have the multi MP for its updated elements of its storage trie, as well as the MP of the updated contract account in the state trie, unless the entire contract data is passed. Am I right?",
        "created_at": "2020-04-17T14:15:23.578000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There is actually an example of such witness, from the mainnet, for block https://etherscan.io/block/5790929",
        "created_at": "2020-04-17T14:35:54.625000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "here is how the witness looks like",
        "created_at": "2020-04-17T14:36:00.381000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/ledgerwatch/ledgerwatch.github.io/blob/master/state_hex_5790928.dot.png",
        "created_at": "2020-04-17T14:36:07.209000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there is also a binary tree version of it: https://github.com/ledgerwatch/ledgerwatch.github.io/blob/master/state_bin_5790928.dot.png",
        "created_at": "2020-04-17T14:37:07.039000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks. This example block has 2 ether transfer transactions. No contract state updates. So there is no MP for storage tries here. Can you point me to an example with contract updates?",
        "created_at": "2020-04-17T15:03:30.471000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there are MP for storage tries. The second transaction modifies state in a contract: https://etherscan.io/tx/0xa309ebd90b42c0503930be8e000125cf7fa8b0b2b70731ea43d3a1faffb15b13#statechange",
        "created_at": "2020-04-17T15:04:33.829000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in the picture, MP for storage tries are below the large rectangle, which is the contract code",
        "created_at": "2020-04-17T15:05:01.913000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks. What exactly is that large rectangle?",
        "created_at": "2020-04-17T15:24:58.163000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the bytecode of the contract that has been invoked",
        "created_at": "2020-04-17T15:43:59.719000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it needs to be part of the witness too",
        "created_at": "2020-04-17T15:44:39+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Did you get this from eth_getProof API?",
        "created_at": "2020-04-17T16:18:00.096000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no, I generated it in turbo-geth + some visualisation code that I wrote",
        "created_at": "2020-04-17T16:18:39.755000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there are some subtleties that eth_getProof would not handle",
        "created_at": "2020-04-17T16:19:40.843000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "like merging multiple accounts, and unrolling sibling nodes when necessary",
        "created_at": "2020-04-17T16:20:17.827000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Got it",
        "created_at": "2020-04-17T16:20:57.109000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks",
        "created_at": "2020-04-17T16:21:08.002000+00:00",
        "attachments": []
    }
]