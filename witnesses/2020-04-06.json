[
    {
        "author": "mandrigin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/wiki/wiki/Design-Rationale",
        "created_at": "2020-04-06T16:39:36.443000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Using sha3(k) as the key in the \"secure tree\" (used in the state and account storage tries): this makes it much more difficult to DoS the trie by setting up maximally unfavorable chains of diverge nodes 64 levels deep and repeatedly calling SLOAD and SSTORE on them. Note that this makes it more difficult to enumerate the tree; if you want to have enumeration capability in your client, the simplest approach is to maintain a database mapping sha3(k) -\u003e k.",
        "created_at": "2020-04-06T16:39:42.759000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is ETH 2.0 actually switching to sha3, or are we still calling keccak256 sha3?",
        "created_at": "2020-04-06T19:19:58.359000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wrong channel?",
        "created_at": "2020-04-06T19:21:00.678000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no, I think it is related to what Igor posted above, which is in turn related to what we discussed on the voice channel earlier",
        "created_at": "2020-04-06T19:27:22.607000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the question was",
        "created_at": "2020-04-06T19:27:40.569000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if the addresses in Ethereum are just results of keccak256, chopped to 20 bytes, why did we need to hash them again before inserting into the trie?",
        "created_at": "2020-04-06T19:28:18.298000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the only answer I had was that grinding through public key computation and 2 keccaks is harder than grinding through public key computation and 1 keccak",
        "created_at": "2020-04-06T19:29:20.469000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In other words, we understand the justification behind hashing storage locations. But is hashing the addresses of accounts really justified?",
        "created_at": "2020-04-06T19:30:17.372000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e no, I think it is related to what Igor posted above\n\nSomething happened to my discord because the last I see is what I wrote on the 3rd",
        "created_at": "2020-04-06T19:31:02.686000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A restart fixed it.",
        "created_at": "2020-04-06T19:32:15.969000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@456226577798135808\u003e Yes, it makes it expensive to do targeted account proof attacks.",
        "created_at": "2020-04-06T19:34:07.424000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you just use the address as the merkle-patritia trie path, then someone can send 1 attoeth to each of 64 addresses to ensure that the target account has the largest proofs possible.",
        "created_at": "2020-04-06T19:34:59.459000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I get that. But addresses themselves are kind of product of hashing too",
        "created_at": "2020-04-06T19:35:37.192000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "By hashing the address, the attacker needs to grind 2^256 addresses to achieve that.",
        "created_at": "2020-04-06T19:35:38.594000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the question was - why single hashing is enough for storage items but not enough for accounts",
        "created_at": "2020-04-06T19:36:17.323000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The issue is that you can send to an address without knowing the secret that generates that address.",
        "created_at": "2020-04-06T19:36:17.991000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Because you can't attack someone else's storage.",
        "created_at": "2020-04-06T19:36:34.911000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah, I got you",
        "created_at": "2020-04-06T19:36:40.763000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If some contract wants to blow up their own trie, then whatever.",
        "created_at": "2020-04-06T19:36:51.464000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "now it is all clear to me",
        "created_at": "2020-04-06T19:36:54.577000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thank you very much",
        "created_at": "2020-04-06T19:37:06.174000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Though, I suppose in terms of blowing up storage state (not attacking a specific account), you do get the most bang for your buck by doing 64 sstore operations with targeted paths in a single contract.",
        "created_at": "2020-04-06T19:39:17.857000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah, maybe not since it is a hash of the slot.",
        "created_at": "2020-04-06T19:40:13.671000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e  Is ETH 2.0 actually switching to sha3, or are we still calling keccak256 sha3?\n\nBack to this though. Did anyone consider switching the hashing algorithm as part of the binary switch? (It would also , among others, mean addition of a new opcode to the EVM.)\n\nAs far as I know everything stays keccak256 so it would be advisable to not call it \"sha3\".",
        "created_at": "2020-04-06T19:41:25.828000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we did consider that, yes",
        "created_at": "2020-04-06T19:41:53.231000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and it is totally possible, of course",
        "created_at": "2020-04-06T19:42:02.813000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm fine with either, but if we are staying with keccak256 I think we should take care to not call it sha3.  That naming issue has caused a ton of headache for me and others over the years.",
        "created_at": "2020-04-06T19:42:25.069000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e we did consider that, yes\n\nIs there any short writeup of pros/cons?",
        "created_at": "2020-04-06T19:43:00.146000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The only realistic change I could see is hashing change in the trie itself, but it would be harder to change storage and perhaps very impractical to change addresses. The main downside is that now a mixture of hashing algorithms are used and all have to be well supported in the EVM.",
        "created_at": "2020-04-06T19:44:36.686000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there is no writeup, because we don't know what hash function we would change to üôÇ",
        "created_at": "2020-04-06T19:45:38.317000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think it is important that the EVM can validate proofs, which means we would need a new EVM instruction in that case.",
        "created_at": "2020-04-06T19:45:50.082000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there is BLAKE2 üôÇ",
        "created_at": "2020-04-06T19:46:41.111000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "One reasonable change could be considering sha2 as eth2.0 relies on that heavily and in a merged future that would mean a single algorithm for a lot of things.",
        "created_at": "2020-04-06T19:46:54.205000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this is going to be good for bitcoin, of course üòÅ",
        "created_at": "2020-04-06T19:47:51.730000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Need to merge bitcoin into eth2, as well.",
        "created_at": "2020-04-06T19:48:19.741000+00:00",
        "attachments": null
    },
    {
        "author": "pauld.9606",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A scan through the yellow paper shows that Keccak256 is used for many things: computing addresses, computing tree paths, merkle hashing, computing codeHash, transactions, blocks, and mining. Pretty much everywhere. And devp2p too.",
        "created_at": "2020-04-06T20:28:20.481000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And in ethash too üòâ",
        "created_at": "2020-04-06T20:30:58.291000+00:00",
        "attachments": null
    }
]