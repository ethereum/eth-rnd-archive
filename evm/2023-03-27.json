[
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Question regarding EOF:\nWhat happens to all the contracts that contain these opcodes after they're deprecated?\nWill those contracts just stop working or does this change only effect contracts deployed after the upgrade?\nSurely there has to be some sort of backwards compatibility.\nCould someone please explain this to me?\n(Image source: https://notes.ethereum.org/@ipsilon/B1nnZ1fl3)",
        "created_at": "2023-03-27T10:10:40.719000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "0acbe2f307b93f0fefbb335e07af428e1a78a89c4958aa44a9bb6cec0f526040"
            }
        ]
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(also pls ping if you answer. thanks in advance)",
        "created_at": "2023-03-27T10:11:10.004000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is related to new EOF contracts only. And you simply cannot deploy an EOF contract with any of these instructions. You took it from twitter, right?",
        "created_at": "2023-03-27T10:17:36.539000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also changed that to \"rejected by validation\" as that is the clearer term.",
        "created_at": "2023-03-27T13:45:00.536000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@403707149043105803\u003e just remembered the other question we had about the hashing for address determination of `create3`/`create4`: if `aux_data` is not included then addresses are better predictable for factory contracts using immutables. Still need to remember the exact case better.",
        "created_at": "2023-03-27T14:04:54.344000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think not including aux-data is fine.  Since we are going from the initcode to the deployed code a known value would help.  Also, we are not adding code, so the issues found with polymprohic contract addresses in create2 won't be as easily seen (all code must be present, just triggering logic changes by auxdata).  Also polymorphic contracts depend on selfdestruct, so we can be doubly sure.",
        "created_at": "2023-03-27T14:43:23.149000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would still prefer data at the end of the container, as DATACOPY/DATALOAD[N] across the aux-data boundaries will present a prime place for implementation bugs.",
        "created_at": "2023-03-27T14:44:17.740000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes",
        "created_at": "2023-03-27T15:16:19.423000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm, good points, that this is data and not code, so the behaviour cannot change.",
        "created_at": "2023-03-27T15:54:04.219000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "pendatically, all possible behaviors are part of the contract.  The data unlocking behaviors can change.",
        "created_at": "2023-03-27T15:55:01.418000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well supposedly all potential paths are in the code, the immutables can just restrict the paths.",
        "created_at": "2023-03-27T15:55:38.406000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Exactly.",
        "created_at": "2023-03-27T15:55:45.740000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do you mean not to update the `data` size field, just allow trailing data, which is then considered part of the original data?",
        "created_at": "2023-03-27T15:56:21.176000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not exactly.  by putting the data at the end of the container it can be stored so that auxiliary data, when stored next to the contianer, will create a seamless query.  So it has the effect if trailing data but is only added via the auxdata parts of the create call.",
        "created_at": "2023-03-27T15:57:34.666000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not sure I understand, but do you mean anything different than what the megaspec says?",
        "created_at": "2023-03-27T15:59:10.618000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not anything different, but by re-arranging the container order we can have implementations that will avoid a whole class of bugs.",
        "created_at": "2023-03-27T15:59:43.052000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do you mean having an order like code,type,embedded_container,data ?",
        "created_at": "2023-03-27T16:00:01.386000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "exactly.",
        "created_at": "2023-03-27T16:00:06.852000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and always have data be the last type.  As long as DATACOPY and friends can query from both embedded and auxiliary data in the same call.",
        "created_at": "2023-03-27T16:00:34.538000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We did arrive to similar conclusions but did not do anything yet. We definitely only want to append and not insert.",
        "created_at": "2023-03-27T16:00:35.453000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Albeit the insertion code is fairly simple in C++ as it is implemented in evmone.",
        "created_at": "2023-03-27T16:01:02.055000+00:00",
        "attachments": null
    }
]