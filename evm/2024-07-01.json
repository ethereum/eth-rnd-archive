[
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In the context of the last call (where I wasn't present) I updated the https://github.com/ipsilon/eof/issues/40",
        "created_at": "2024-07-01T11:22:00.976000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What happens if RETURNCONTRACT does not return valid auxdata and the container validation fails? In my opinion the gas of the eofcreate should be consumed, but it looks like its not?",
        "created_at": "2024-07-01T13:34:06.837000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is the second test here https://github.com/ethereum/execution-spec-tests/blob/main/tests/prague/eip7692_eof_v1/eip7620_eof_create/test_eofcreate.py#L143",
        "created_at": "2024-07-01T13:35:04.448000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "26d8449ea962c16080a64940887b5c6c03dd58c2ca0e11b9248dfbcb39bbbb45"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also I have not found that case in the spec anywhere",
        "created_at": "2024-07-01T13:35:20.135000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`instruction exceptionally aborts if after the appending, data section size would overflow the maximum data section size or underflow (i.e. be less than data section size declared in the header)` \n\nThis maybe? https://eips.ethereum.org/EIPS/eip-7620",
        "created_at": "2024-07-01T14:02:51.958000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But reading your trace and the test it does not seem to match what the spec says, it indeed seems that it should consume all gas ðŸ¤”  But this is \"always\" a definition thing, I keep asking around in EIPs if \"exceptionally aborts\" means consume all gas, or that it \"just\" aborts (like REVERT)",
        "created_at": "2024-07-01T14:05:31.569000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I also interpreted exceptionally aborts as consuming all the gas",
        "created_at": "2024-07-01T14:11:20.215000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Exceptional abort is correct.  It appears that EOFCRATE is missing charging keccak hashing for the subcontainer.  92 bytes for subcontainer zero, -\u003e 6 gas per 256-bit-words -\u003e 18 more gas.",
        "created_at": "2024-07-01T15:41:40.958000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Besu trace",
        "created_at": "2024-07-01T15:43:22.664000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "scratch.txt",
                "content": "533dc6252a787f29c8c788a31647967bbed1a261ec9f1087cd852ce90cbf14dc"
            }
        ]
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the accout at contract_a has an empy code hash until the initcode returns.  So when contract_b calls back to contract_a it will act as thought there is no code.  Ether will be transferred and the call will immediately return.  \n\nTo say that \"it fails\" depends on what level you are looking for the failure.  Solidity will write in code using EXTCODESIZE as a part of the call to AnotherRandomFunction, and if it comes back as zero then solidity will call REVERT with a relevent code.  If you code the call in assembly directly and do no such checks it will succeed.\n\nI don't think your assembly trick could ever meaningfully be used.  The code would be zero length, nonce would be 1, and you would have inaccessible storage.  You could not re-create over the address because of the 1 nonce.",
        "created_at": "2024-07-01T19:27:03.259000+00:00",
        "attachments": null
    }
]