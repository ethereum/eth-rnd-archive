[
    {
        "author": "monkeyontheloose.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Q: i'v successfully called blockhash(block.number) from within a contract, and seems weird that this is even possible, since the state root is in the blockhash",
        "created_at": "2021-12-01T13:53:37.416000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!840207942581747712\u003e  \u003c@!427903869226582018\u003e \n\u003e  EVM does not support garbage collection.\nIt doesn't even support malloc/free.  And memory is so expensive as to be not a lot of use anyway.  At current prices 32K costs about $500, and a 1MB costs about about $200,000.",
        "created_at": "2021-12-01T19:54:41.371000+00:00",
        "attachments": null
    },
    {
        "author": "pcaversaccio",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ok thx for the explanation üôè",
        "created_at": "2021-12-01T20:02:08.925000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A simple malloc/free isn't very hard to do for a user, but would be nice to have built-in.  I'd also like to see an in-memory frame stack.  But the price has to come down to something reasonable, which requires measuring how much memory pressure there actually is.",
        "created_at": "2021-12-01T20:04:21.202000+00:00",
        "attachments": null
    },
    {
        "author": "pcaversaccio",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah that are my thoughts as well, why not simply built-in? I guess it's a security and complexity trade-off re the in-memory frame stack.",
        "created_at": "2021-12-01T20:17:49.887000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The stack is very easy.",
        "created_at": "2021-12-01T20:18:19.712000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "why is memory as expensive as it is if it's ephemeral?",
        "created_at": "2021-12-01T20:18:24.956000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have no idea.",
        "created_at": "2021-12-01T20:18:36.246000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "or, what is the pricing based on?",
        "created_at": "2021-12-01T20:18:38.448000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Looks like it's meant to fit in L1 cache?",
        "created_at": "2021-12-01T20:19:02.708000+00:00",
        "attachments": null
    },
    {
        "author": "pcaversaccio",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But apparently has not been considered since 6 years due to the simplicity reason.",
        "created_at": "2021-12-01T20:25:55.400000+00:00",
        "attachments": null
    },
    {
        "author": "pcaversaccio",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I will reread the yellow paper again - maybe some arguments there",
        "created_at": "2021-12-01T20:26:45.478000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "L2/3/4 caches are megabytes in size these days, so I'd guess more is justified.  Unless measurement shows they are already spilling.",
        "created_at": "2021-12-01T20:27:27.989000+00:00",
        "attachments": null
    },
    {
        "author": "pcaversaccio",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, but maybe we miss an important piece here. I first need to gather all the information before I can judge tbh.",
        "created_at": "2021-12-01T20:29:36.017000+00:00",
        "attachments": null
    },
    {
        "author": "pcaversaccio",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But maybe it's a good timing rn to have this discussion, in particular before the merge",
        "created_at": "2021-12-01T20:31:19.026000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the security considerations outweigh the cache spilling concerns.",
        "created_at": "2021-12-01T21:31:33.523000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Check out https://github.com/ethereum/execution-specs/blob/master/src/ethereum/frontier/vm/instructions/block.py#L43",
        "created_at": "2021-12-01T22:32:06.889000+00:00",
        "attachments": null
    }
]