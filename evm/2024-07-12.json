[
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It parses more than what is valid.  Section headers must be ordered, and only type 3 (subcontainers) can be skipped.  And the content of the body correlates to the header data.  I don't think a context-free grammer can express the exact validity rules, but it appears that all valid containers would parse by those rules.",
        "created_at": "2024-07-12T04:10:45.815000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is section order mentioned in 3540? I didn't see it.",
        "created_at": "2024-07-12T13:43:22.904000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wait a second, the entire EOF sequence is called a container **and** there are container sections? That is some confusing terminology.",
        "created_at": "2024-07-12T13:45:05.735000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes :D",
        "created_at": "2024-07-12T13:53:42.632000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's unrolled in the container specification:  https://eips.ethereum.org/EIPS/eip-3540#container\nbesu's code calls the container section and header subcontainer section and header.",
        "created_at": "2024-07-12T14:07:32.682000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's fully recursive.  While it cannot contain itself the only limit to what it can contain is size.",
        "created_at": "2024-07-12T14:08:34.336000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e It's unrolled in the container specification:  https://eips.ethereum.org/EIPS/eip-3540#container\n\nIs the section you're linking to the top-level EOF container, or the container section?\n\n\u003e While it cannot contain itself\n\nWhat is \"it\" referring to here?",
        "created_at": "2024-07-12T14:32:12.445000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The code block starting with `container := header, body`.  The header has an explicit ordering.",
        "created_at": "2024-07-12T14:33:07.814000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is the container.  An EOF container can contain other EOF containers.  I don't think we can do Quine containers as there is only references to sub-contained containers, and with each EOFCREATE or RETURNCONTRACT the total depth of subcontainers always reduces by one.  To be a quine we would need to be able to keep the total depth of subcontainers constant.",
        "created_at": "2024-07-12T14:34:47.014000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So all containers (whether top-level or as a section) need to begin with `0xEF000101????02`?",
        "created_at": "2024-07-12T14:54:02.634000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As currently speced, yes.",
        "created_at": "2024-07-12T14:54:16.319000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes I think the minimum container size is something like 15 bytes",
        "created_at": "2024-07-12T19:18:03.503000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You have mandatory rules, such as one code section, code section cannot be empty",
        "created_at": "2024-07-12T19:18:17.857000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So it will be something like `0xEF00010100040200010400000000`",
        "created_at": "2024-07-12T19:18:53.457000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Splitted `0xEF0001 010004 020001 040000 00 00`",
        "created_at": "2024-07-12T19:19:09.074000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ok this is 14 bytes but it's something like that",
        "created_at": "2024-07-12T19:19:30.047000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh wait, I forgot the type section ðŸ˜¹",
        "created_at": "2024-07-12T19:19:41.275000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`0xEF0001 010004 020001 040000 00 00000000 00`\n`MAGIC    TYPE_S  CODE_S DATA_S TM TYPES   CODE`",
        "created_at": "2024-07-12T19:21:14.825000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Section 0 must be non returning. After the number of tests I had to hand fix in Besu I will never forget this rule.\n```0xEF0001 010004 020001 040000 00 00800000 00\nMAGIC    TYPE_S CODE_S DATA_S TM TYPES   CODE```",
        "created_at": "2024-07-12T20:23:19.524000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah right ðŸ™‚ I almost got it corrects ðŸ˜„",
        "created_at": "2024-07-12T20:58:45.942000+00:00",
        "attachments": null
    }
]