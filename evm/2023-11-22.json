[
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hey I'm building a formal model of the EVM. Is there a good place to ask questions on the spec? And which tests should I am to comply with to gain confidence in my model?",
        "created_at": "2023-11-22T10:37:15.122000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if this is the place for questions, I have one regarding the call stipend for positive value calls - it seems like this is refunded even if the call immediately reverts due to insufficient sender balance or depth limit exceeded",
        "created_at": "2023-11-22T10:38:32.509000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "which would imply an increase in gas_left (by 2300). however I think this doesn't actually lead to extra gas being available because of the 9000 cost for making the call in the first place. is that right? or is it the case that gas_left can increase above the user-specified gas limit sometimes?",
        "created_at": "2023-11-22T10:39:37.578000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hi \u003c@851524243861536819\u003e you can ask EVM questions here or in \u003c#856943705209569291\u003e. I believe people in the later one may be more competent in all EVM quirks.\nanyway, answering your question: you are right. the additional cost is 9000 but it includes the stipend which can be returned in the cases you mentioned (also in the case when the caller will not execute anything). You can think of it also as: the additional cost is 6700 and 2300 extra gas is added to the callee gas limit. The unused callee gas is returned to the caller (the cases mentioned all of it is).",
        "created_at": "2023-11-22T10:49:30.405000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thanks!",
        "created_at": "2023-11-22T10:52:50.101000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and tests?",
        "created_at": "2023-11-22T10:52:52.871000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm building my model in higher-order logic and want to use it for proofs. But also want to be confident that it accurately models the real evm.",
        "created_at": "2023-11-22T10:53:12.265000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "- \u003c#753271902520213625\u003e \n- https://github.com/ethereum/tests\n- https://github.com/ethereum/execution-spec-tests",
        "created_at": "2023-11-22T10:56:21.784000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is the sum of SSTORE refunds for clearing slots always gonna be less than the total gas paid (so it can always safely be subtracted from that)?",
        "created_at": "2023-11-22T15:10:01.163000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "or can someone make money on a transaction by clearing a lot of slots?",
        "created_at": "2023-11-22T15:10:43.722000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Always less.  Currently capped at 20% of transaction amount by eip-3529",
        "created_at": "2023-11-22T16:36:17.909000+00:00",
        "attachments": null
    },
    {
        "author": "racytech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Was the `RETURNCONTRACT` recently changed? Now it pops 2 values instead of 1?",
        "created_at": "2023-11-22T17:24:55.927000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Btw would anyone be interested in working on the EVM model in HOL with me? It's at \u003chttps://github.com/xrchz/verifereum\u003e",
        "created_at": "2023-11-22T17:26:01.040000+00:00",
        "attachments": null
    },
    {
        "author": "racytech",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I wonder how will you do 256-bit math if you will... is this in plans yet?",
        "created_at": "2023-11-22T17:40:03.542000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it's already there",
        "created_at": "2023-11-22T17:40:39.192000+00:00",
        "attachments": null
    }
]