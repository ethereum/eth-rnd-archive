[
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Just thinking out loud a bit, this forward/backward jump is only specified for RJUMPs in the spec (?) so only within the code section itself. Can't we also do the same for CALLF / JUMPF ?",
        "created_at": "2024-05-30T12:20:07.524000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The forward jump requirement for the code sections (RJUMPs), I think this was added as requirement to the spec at some point? This makes the verification of unreachable code sections easier - right? (I remember before we had this requirement we had a somewhat complex branching-like algorithm to check this?)",
        "created_at": "2024-05-30T12:43:22.175000+00:00",
        "attachments": null
    },
    {
        "author": "big_tech_sux",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i think if you allow backwards only jumps then you need to re-traverse the same code during validation, maybe it can blow up the algorithm",
        "created_at": "2024-05-30T13:37:13.065000+00:00",
        "attachments": null
    },
    {
        "author": "big_tech_sux",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(maybe! i'm not sure, haven't thought about this in awhile)",
        "created_at": "2024-05-30T13:37:27.477000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah no, in an older version of the EIP the algorithm was described (it was more complex with some branching) but still only checked each opcode once",
        "created_at": "2024-05-30T13:38:34.005000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/EIPs/blob/ce9748cc0881632974943ad55f67518dde8a8de1/EIPS/eip-5450.md",
        "created_at": "2024-05-30T13:40:18.164000+00:00",
        "attachments": null
    },
    {
        "author": "big_tech_sux",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hm yea i'm not sure why backwards jump is not allowed for code reachability check. maybe \u003c@425274498732916736\u003e knows?",
        "created_at": "2024-05-30T13:40:59.014000+00:00",
        "attachments": null
    },
    {
        "author": "big_tech_sux",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "btw, spec nit: i noticed that `INVALID` is not actually explicitly defined in eof spec",
        "created_at": "2024-05-30T13:42:45.277000+00:00",
        "attachments": null
    },
    {
        "author": "big_tech_sux",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "maybe it should have explicit carveout, otherwise it's not clear that INVALID is an \"assigned\" instruction https://github.com/ipsilon/eof/blob/ac91da4f6b4cbe03a423a7d6737ba99f9bc21950/spec/eof.md#code-validation",
        "created_at": "2024-05-30T13:43:19.023000+00:00",
        "attachments": null
    },
    {
        "author": "big_tech_sux",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in legacy evm, `INVALID` behavior is implicit (same behavior as any unassigned instruction, i.e. exceptional halt). but there are no unassigned instructions in EOF, so it needs definition",
        "created_at": "2024-05-30T13:44:10.497000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm rather sure it is in the spec",
        "created_at": "2024-05-30T13:47:52.289000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://eips.ethereum.org/EIPS/eip-3670 its here",
        "created_at": "2024-05-30T13:48:12.467000+00:00",
        "attachments": null
    },
    {
        "author": "big_tech_sux",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "aha -- i was looking at the mega spec",
        "created_at": "2024-05-30T13:59:02.551000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes it is not explicit in the mega spec that's true",
        "created_at": "2024-05-30T14:02:42.581000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Forward reference is only a rule in-section.  The code sections have no such restriction, so you will need a work list to detect dead code there",
        "created_at": "2024-05-30T14:03:51.385000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i.e. you can CALLF section 3 and it can then CALLF section 2 and that can be the only call to section 2.",
        "created_at": "2024-05-30T14:04:36.887000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "is there any opcode ranges that are safe to assume won't be assigned in the L1 EVM and could be defined in a rollup's EVM?",
        "created_at": "2024-05-30T15:59:47.517000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I see C0..F0 is completely unassigned",
        "created_at": "2024-05-30T16:00:20.088000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but for something like a snark-friendly hash function we'd want to expose like SHA3 is, would it be more reasonable to define that in the 21..30 range?",
        "created_at": "2024-05-30T18:02:01.884000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "EOF has opcodes in the 0xDx range and 0xEx range, so only 0xB0-0xCF is fully open.",
        "created_at": "2024-05-30T18:37:55.083000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think this is a good subject for the RollCall.  Also, I think EOF would be well suited to this because we can signal capabilities in the header.  I was going to write this on the way back from kenya but chose sleep instead ðŸ˜‰",
        "created_at": "2024-05-30T18:38:55.171000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My main concern with opcode experimentation is inadvertent collisions, so singaling what you are doing would be essential.  What I have envisioned is another section like subcontainers, except instead of containing EOF they contain signals about what EIPs are enabled.  Each capability would be readable text similar to \"EIP-7692/1.0.0/...\" where the first item is the EIP, the second is the EIP-7577 version number (https://github.com/ethereum/EIPs/pull/8034/files), and anything after that is EIP dependent.  Dropped if it doesn't matter.",
        "created_at": "2024-05-30T18:42:33.645000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "With such a header, mainnet will always reject experimental containers, and rollups can write code to make informed decisions about wether or not to accept such containers.",
        "created_at": "2024-05-30T18:44:26.753000+00:00",
        "attachments": null
    }
]