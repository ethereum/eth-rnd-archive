[
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is an irregular state change needed?  I thought the appeal of the EF namespace was that for non EOF it will terminate. As long as they are easily verifiable as not EOF objects (by the version ID or another magic byte they don't match) conformant EVMs would be fine.",
        "created_at": "2021-10-25T00:10:48.521000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Or a special rule, like was done for precompile 0x3, could be put in for mainnet to explicitly calling those contract hashes invalid EOF objects.",
        "created_at": "2021-10-25T00:11:16.626000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It isn't *needed* but I think it would be cleaner long term than the alternative solutions.",
        "created_at": "2021-10-25T06:39:45.484000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We effectively have 3 contracts on mainnet and no contracts on other major networks that violate the general rule of \"anything starting with 0xEF is an EOF contract\".  If those 3 contracts didn't exist we could simply make that the entire rule.  With those 3 contracts, there are a few ways we can work around this, like making the EOF mark `0xEF00` or special casing those contracts or something.",
        "created_at": "2021-10-25T06:41:11.382000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Given that I mildly suspect all 3 contracts are attempted attacks (trolls) against this EIP, I am inclined to just delete those contracts rather than putting in the small but permanent code required to work around them.",
        "created_at": "2021-10-25T06:41:47.549000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The difference won't make or break this EIP, it is just a question of which solution results in the least complexity long term.",
        "created_at": "2021-10-25T06:42:28.368000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I thought the point of banning EF prefix was so that we could then pick a slightly longer prefix that definitely wasn‚Äôt deployed and couldn‚Äôt be deployed prior to the next fork activating. Ie it was expected we‚Äôd get some that start with EF and can deal with it without any new code. But maybe I have my wires crossed somewhere. \n\nI do wonder if it‚Äôs useful to use a longer prefix regardless so any future scheme that needs a marker at the start of code could pick from the EF range and know it‚Äôs reserved without having to do this two step approach to reserve another range.",
        "created_at": "2021-10-25T07:16:24.235000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is correct, the system was designed to be resilient against attacks of this sort.  However, given that there were only 3 such attacks and 2 of them are *obviously* attacks and the third one we can hopefully reach out to (well known deployer), we may not need to lean on the built-in resilience and save ourselves some bytes going forward.",
        "created_at": "2021-10-25T07:20:50.438000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The prefix is pre-versioning.  Presumably, the \"version\" comes as the next byte *after* the prefix IIUC.",
        "created_at": "2021-10-25T07:21:17.487000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If the prefix is `0xfe00`, then the first standard may be something like `0xfe0000`.",
        "created_at": "2021-10-25T07:21:45.297000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "+1 for irregular state transition",
        "created_at": "2021-10-25T11:34:07.172000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We shouldn‚Äôt bloat contracts with longer magic if we can just delete the 3 faulty ones",
        "created_at": "2021-10-25T11:34:32.181000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "FWIW, I think this sets a pretty bad precedent and ~~also if we decide to do it, someone could just create another 0xEFXX contract right before the fork, put funds in it, and then claim that \"eth core devs froze my funds\"~~ No, that can't happen, my bad.",
        "created_at": "2021-10-25T16:08:56.307000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "obviously attacks in what way - were they deployed only recently?",
        "created_at": "2021-10-25T16:30:52.657000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Can we get a link to the three contracts?",
        "created_at": "2021-10-25T16:32:01.853000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://notes.ethereum.org/@ipsilon/eof-prefix-selection",
        "created_at": "2021-10-25T17:03:22.329000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Deployed after the EIP was created and:\nTwo only have the: `0xFE` (a single byte)\nThe third is `0xFE` üëã üü© (author acknowledges it was just a wave goodbye to 0xFE).",
        "created_at": "2021-10-25T17:04:21.357000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e so that third contract was deployed by me, and it‚Äôs just a ‚Äúfarewell‚Äù message to 0xef before EIP-3541 took effect. Definitely did not intend to cause any problems with it and would have no qualms whatsoever with the contract being removed if it makes things easier / cleaner.\n```\nf09f918b =\u003e :wave:\nf09f9fa9 =\u003e :green_square:\n```",
        "created_at": "2021-10-25T17:04:44.552000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't think it sets a bad precedent given what we are deleting.  If we were deleting someone's useful thing, I would agree with the precedent worry.",
        "created_at": "2021-10-25T17:05:23.551000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Agree to disagree then üôÇ It seems like the technical overhead of using `0xEFXX` vs `0xEF` is negligible and the potential backlash of an irregular state transition is quite large. Just seems like very bad ROI in this case, but perhaps I'm missing something.",
        "created_at": "2021-10-25T17:28:09.111000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also, if that's what we wanted to do, IMO we should have done a better job of articulating it in EIP-3541, e.g. \"Block 0xEF contract when this goes live. None exist now, and reserve the right to remove contracts which are deployed simply with the purpose of breaking this EIP\"",
        "created_at": "2021-10-25T17:29:03.645000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If we would have said that prior to the hard fork that blocked 0xEF, many more people would have created troll contract addresses.  üòÑ",
        "created_at": "2021-10-25T17:34:45.477000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "By saying, \"we'll find something downstream of 0xFE\", it resulted in almost no one \"attacking\" 0xFE because the attack space was too large (expensive).",
        "created_at": "2021-10-25T17:35:28.964000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "People would have said \"I didn't get the memo, this is critical to my infrastructure!\"  As it is, we can provably assert that none of the 3 contracts are critical to anything, and in fact it is trivially easy to show that they are all specifically attacks against the 0xFE space because the \"attackers\" didn't bother trying to craft an actual attack due to the signal we gave in advance.",
        "created_at": "2021-10-25T17:37:00.929000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Treat it like precomplie 0x3 - special erratta - https://github.com/ethereum/EIPs/issues/716",
        "created_at": "2021-10-25T17:37:14.053000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Those 3 contracts are not EOF contracts, by hash or account or whatever.",
        "created_at": "2021-10-25T17:37:50.930000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I suspect that's worse, client code-wise, than just using extra bytes, no?",
        "created_at": "2021-10-25T17:38:41.318000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I feel worse about putting in weird pre-compile things",
        "created_at": "2021-10-25T17:38:49.782000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There also needs to be a versioning byte, so until version #F0 is deployed there won't be a conflict.",
        "created_at": "2021-10-25T17:39:31.833000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm onboard with proceeding with exploring the irregular state change approach.  I do have concerns about publicity and FUD but these three contracts are so obviously *NOT* anything real that we should be able to effectively combat the FUD.",
        "created_at": "2021-10-25T17:39:50.735000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And *if* there is some unforseen and significant backlash, we have the easy fallback of just accepting the extra byte and leaving the contracts alone.",
        "created_at": "2021-10-25T17:41:10.680000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There are two concerns I have with irregular state change, one is the backlash of a \"dao pt 2\" but the more real concern is that if a ISC happens a second time there will be many people marshaling for a third and further ISC, and long discussions about shelling points and what is a justifiable reason, and so on. The safest path in my opinion is to not go there ever again, we all know what some of the destinations are.",
        "created_at": "2021-10-25T17:44:35.363000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This argument feels very valid.  There is something to be said about establishing precedent that we don't wish to establish.",
        "created_at": "2021-10-25T17:46:04.984000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Perhaps a better option is to put in a section on what to do when an EOF fails validations: revert the transaction/message frame.",
        "created_at": "2021-10-25T17:47:02.348000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And clients that cache EOF parsing violations can seed it with those three contracts.",
        "created_at": "2021-10-25T17:47:48.859000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Related question: would ISC-like behavior (e.g. replacing an opcode with two equivalent ones) or similar versioning be possible and/or acceptable with the hypothetical epoch-based state expiry?",
        "created_at": "2021-10-25T18:19:14.103000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e \"anything starting with 0xEF is an EOF contract\".\nI think it's \"anything starting with 0xEF followed by the magic number is an EOF contract.\"  These contracts merely constrain the magic number, which I think has yet to be chosen.  \u003c@!425279588009246720\u003e?",
        "created_at": "2021-10-25T18:54:27.971000+00:00",
        "attachments": null
    }
]