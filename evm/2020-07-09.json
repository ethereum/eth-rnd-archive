[
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@456226577798135808\u003e if it is possible to have less interactive API for EVMC, that would be great. But I don't get how it suppose to work. I need to do some research I guess.",
        "created_at": "2020-07-09T12:16:49.949000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!425274498732916736\u003e here is how it is done in Sputnik: https://github.com/ETCDEVTeam/sputnikvm/blob/master/src/lib.rs#L192",
        "created_at": "2020-07-09T12:19:14.361000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the main thing to look into is `commit_...` functions",
        "created_at": "2020-07-09T12:19:40.276000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "they essentially obviate the need for the host interface",
        "created_at": "2020-07-09T12:19:53.454000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As a host, you call `fire` function, and it either runs to completion, or it stops with `RequireError`, which inside it contains the address of the thing that is needed to continue the execution",
        "created_at": "2020-07-09T12:20:45.400000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "you then provide this piece of data (or you can provide more), and call `fire` again. And so on",
        "created_at": "2020-07-09T12:21:04.997000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it is not less interactive, but it contains only one interface, as opposed to 2 interfaces in EVMC",
        "created_at": "2020-07-09T12:22:04.559000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I do not say that EVMC needs to look exactly like that, but it might take inspiration from Sputnik",
        "created_at": "2020-07-09T12:23:06.530000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1. Expressing this in C API looks like a big change.\n2. Does SputnikVM implements state snaphots and state reverts?",
        "created_at": "2020-07-09T13:06:59.803000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, that is a big change. I did not suggest it is a minor tweak, it is a major change in the API's architecture. Of course, there is no need in `Result\u003c(), RequireError\u003e` being what it is in Rust, it can be just an enum or something. Yes, Sputnik implements state reverts, but they are not part of API, and why should they be?",
        "created_at": "2020-07-09T15:06:59.131000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To my understanding Sputnik-like API enforces that EVM is responsible for keeping state change journal and reverting. It is rather not great to move any state maintaining responsibility to EVM.\n\nBesides, I mostly see problem pushing \"structured data\" through C API without too many copies and horrible complicated memory management.",
        "created_at": "2020-07-09T15:34:05.071000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Cannot this be implemented as a tool on top fo the EVMC API?",
        "created_at": "2020-07-09T15:34:50.323000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hmm, that is an interesting point of view. And yes, it can be implemented on top of EVMC API",
        "created_at": "2020-07-09T15:35:08.299000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it seems to me that there is a different understanding of what EVM is, and where are the boundaries",
        "created_at": "2020-07-09T15:35:42.539000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I can totally see your point though",
        "created_at": "2020-07-09T15:36:11.337000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At least it would be faster for experimentation to write a small wrapper and if it turns out to be a useful direction the API could be changed, but trying to change the API directly has quite a few implications: changing EVMC, evmone, go bindings (geth/turbo-geth) *at the same time*",
        "created_at": "2020-07-09T15:36:12.708000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I agree",
        "created_at": "2020-07-09T15:43:35.752000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And if this is written in C/C++ then you don't have the bottleneck of the go-c boundary, right? (Which is one of the motivators for this.)",
        "created_at": "2020-07-09T16:05:17.075000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes. another motivator is to make it easy to plug into other languages, like python",
        "created_at": "2020-07-09T16:06:12.151000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we are actually working on something like this",
        "created_at": "2020-07-09T16:06:29.616000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do you have anything to share yet?",
        "created_at": "2020-07-09T16:07:09.145000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "not at this point, but soon ðŸ™‚",
        "created_at": "2020-07-09T16:07:58.669000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "need to do some reviewing",
        "created_at": "2020-07-09T16:08:15.947000+00:00",
        "attachments": null
    }
]