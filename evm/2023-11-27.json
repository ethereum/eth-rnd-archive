[
    {
        "author": "whileydave",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@851524243861536819\u003e The DafnyEVM provides a formal model in Dafny which you might find helpful.  Its not 100% complete, but it covers many things and passes a large proportion of the common tests.  See here: https://github.com/ConsenSys/evm-dafny",
        "created_at": "2023-11-27T22:00:11.886000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks! Is there any more official source for full trace tests than your repo? Would you recommend just using your repo as a source of tests if I can make use of full trace tests?",
        "created_at": "2023-11-27T22:28:50.471000+00:00",
        "attachments": null
    },
    {
        "author": "whileydave",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmmmm, how do you mean exactly?  The [Ethereum common tests](https://github.com/ethereum/tests) repository is the source of truth we base our testing from.",
        "created_at": "2023-11-27T22:30:22.134000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah but their test format isn't well documented, and doesn't usually include full traces as far as I've seen?",
        "created_at": "2023-11-27T22:30:52.025000+00:00",
        "attachments": null
    },
    {
        "author": "whileydave",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right,  for a large number of the GeneralStateTests, we have executed them with Geth and converted the trace output into JSON.  That is what we drive our testing from.  Yes, the JSON we generate includes intermediate steps, not just the end result.  For example, intermediate stack values, memory, gas, etc.  However, storage is not included at this time.",
        "created_at": "2023-11-27T22:32:07.027000+00:00",
        "attachments": null
    },
    {
        "author": "whileydave",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To generate the JSON files I use a special purpose [tool](https://github.com/DavePearce/EvmTools).",
        "created_at": "2023-11-27T22:32:49.585000+00:00",
        "attachments": null
    },
    {
        "author": "whileydave",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In principle, you can run that tool yourself. I should add that it is a work in progress and may contain mistakes, etc ðŸ™‚",
        "created_at": "2023-11-27T22:33:41.928000+00:00",
        "attachments": null
    },
    {
        "author": "xrchz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hmm. ok I think I'll try to use the official repo then, but will probably use some of your traces if i need to for debugging ðŸ™‚",
        "created_at": "2023-11-27T22:36:35.259000+00:00",
        "attachments": null
    },
    {
        "author": "whileydave",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You are welcome to use them.  i'm happy to answer questions.  If you look at the EvmTool you can see how it parses the original tests and then runs Geth.",
        "created_at": "2023-11-27T22:37:12.972000+00:00",
        "attachments": null
    }
]