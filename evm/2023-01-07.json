[
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hey guys, I have not yet checked in-depth, but I think there might be a problem when we introduce 3540 in our code. What should happen if we have NOT activated 3540 (but we have 3541 active) and we try to CREATE a contract which starts with 0xEF? This should consume ALL gas right? If we would activate 3540 and the container is invalid, this now changes CREATE gas to just push 0 to stack, and NOT consume all gas. So this is a new change to 3541..?",
        "created_at": "2023-01-07T19:01:44.965000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is a bit more complex.\n1. If the deploy code starts with `EF00` and is invalid EOF → OOG\n2. If the deploy code starts with `EF` → OOG\n3. If initcode starts with `EF00` and is invalid EOF → return 0\n4. If initcode starts with `EF` → return 0 (this is how EVM works forever)",
        "created_at": "2023-01-07T19:05:56.031000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But geth had a bug where it considered `EF` prefix as a EOF candidate. It should be `EF00`.",
        "created_at": "2023-01-07T19:08:27.757000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1. -\u003e I am talking if we use CREATE opcode here. Then it should in case of code starting with `0xEF00` do the \"light check\" right, and not go OOG? (I can try to figure this rule in the EIPs)",
        "created_at": "2023-01-07T19:09:04.302000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is only possible for initcode. For deploy code (i.e. after initcode has finished) it should follow other checks like code size not bigger than 0x6000. They do OOG I believe.",
        "created_at": "2023-01-07T19:12:35.786000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is it easy to produce these by yourself? How much time does it take?",
        "created_at": "2023-01-07T19:23:41.879000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It’s really easy, it uses lightclient’s geth branch and then just grab the branch from the link I shared and follow the instructions in the readme, it takes less than a minute to produce them all",
        "created_at": "2023-01-07T19:44:53.482000+00:00",
        "attachments": null
    }
]