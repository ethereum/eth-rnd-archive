[
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "things are contentious only because certain individuals make them contentious\n\nin other words, if someone wants to make a fuss about something, they'll make it anyway",
        "created_at": "2021-10-28T09:20:17.397000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think this ship has sailed with DAO in 2016, \"consensus is social\" stigma has forever stuck to Ethereum, might as well take advantage of it",
        "created_at": "2021-10-28T09:22:47.124000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, exactly. If we do ISC, EOF contract invocation code becomes simpler",
        "created_at": "2021-10-28T09:29:28.246000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Huh lot of discussion here. I will not try to reply to the exact places the questions were asked, and most of them were resolved I think. \n\nHowever here is a summary for most of the questions asked:",
        "created_at": "2021-10-28T09:48:47.128000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1) Was 3541/3540 prepared to handle the situation?\n\nYes. It was designed exactly to handle this situation. The prefix is followed by a version number, and these two constitute as the fixed header. https://notes.ethereum.org/@ipsilon/eof-prefix-selection explains two options how we can choose the prefix/version.",
        "created_at": "2021-10-28T09:48:50.965000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "2) Code validation.\n\n3540 specifies that code is validated at deploy time, and any code in the state starting with the prefix has been validated. 3670 introduces further validation beyond what 3540 does. (The reason of separation is to keep 3540 specific to the format.)",
        "created_at": "2021-10-28T09:49:10.803000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "3) The three contracts in the state.\n\nThe author of the longest code responded on twitter/magicians explaining it was meant as a farewell. One of the short codes was deployed with an ENS name (kristof.eth/gazso.eth). The last code is an unknown account.\n\nWhile the extra byte doesn‚Äôt hurt anyone (apart from aesthetics and wasting an extra byte), I can see the point from \u003c@!301186049323958275\u003e and also others. I think if the authors of all three contracts can be identified and give consent, such an ISC is a different ballpark than anything else. It however could reopen the door for discussions affecting other user accounts.",
        "created_at": "2021-10-28T09:49:55.513000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No need to keep these contract identifiers. There is a way to do this in the EOF implementation by some increased complexity. The already mentioned document describes this option: https://notes.ethereum.org/@ipsilon/eof-prefix-selection#One-byte-prefix-EF-no-magic.",
        "created_at": "2021-10-28T11:00:33.550000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You are referring to this part \u003c@425274498732916736\u003e?\n```py\nknown_versions = [0x01]  # version 0xf0 must never be assigned\n\ndef is_eof(code):\n    return len(code) \u003e= 2 \u0026\u0026 code[0] == 0xEF \u0026\u0026 code[1] in known_versions\n\ndef get_eof_version(code):\n    assert is_eof(code)\n    return code[1]\n```",
        "created_at": "2021-10-28T11:03:01.649000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!263407155019907072\u003e if you're kristof.eth/gazso.eth, you could chime in here with your view üëã",
        "created_at": "2021-10-28T11:06:25.572000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It does seem likely that is them...",
        "created_at": "2021-10-28T11:06:46.556000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, I'm on your side here. There exists safer change though: replace `0xEF` with `0xFE` (`ABORT`). First of all we don't want to delete whole accounts because this would affect funds at these addresses. Secondly, we want to keep a code that fails on a call for the reason above.",
        "created_at": "2021-10-28T11:08:01.743000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes. In words: you lookahead and check if the version byte is present (this eliminates the single-byte `0xEF` contracts) and also make sure that version `0xF0` is never used. The biggest downside is that there is no clear separation between \"prefix\" and \"version\" in EOF anymore.",
        "created_at": "2021-10-28T11:11:29.615000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "are you guys asking whether what i think of deleting the contract i deployed from the state?",
        "created_at": "2021-10-28T11:11:30.244000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Assuming you were the deployer of one of the two `0xFE` contracts, then yes.",
        "created_at": "2021-10-28T11:12:22.485000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003chttps://etherscan.io/address/0xca7bf67ab492b49806e24b6e2e4ec105183caa01\u003e this one to be specific.",
        "created_at": "2021-10-28T11:13:17.354000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Unless you happen to also be the signer of this transaction, in which case you can answer for both.  üòÑ\n\u003chttps://etherscan.io/address/0x897da0f23ccc5e939ec7a53032c5e80fd1a947ec\u003e",
        "created_at": "2021-10-28T11:13:52.938000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "one of them was me, hope i didn't cause too much chaos. assumed you guys would were just going to do a \u003e= blocknumber check anyway to make use of the prefix",
        "created_at": "2021-10-28T11:14:54.873000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i'm totally cool with you guys deleting it from state if it makes things easier",
        "created_at": "2021-10-28T11:15:02.303000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the other one isn't me unfortunately :/",
        "created_at": "2021-10-28T11:15:14.379000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In this context we can't.  The idea with the leading byte is that it signals at runtime whether the contract has undergone some deploy time static analysis.  The 3 existing contracts will not have undergone such analysis, so code will need to be added to clients \"deal\" with those 3 outliers in some way.",
        "created_at": "2021-10-28T11:16:06.524000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There are a number of solutions to the problem, one of which is to just delete them in the next hard fork.  If we don't do that, there are other options that have different trade offs (all minor).",
        "created_at": "2021-10-28T11:16:43.131000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "you have my total consent to delete it from the state, why do you need permission tho from everyone else?",
        "created_at": "2021-10-28T11:25:09.223000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "its not like their contract could every be used for anything useful",
        "created_at": "2021-10-28T11:25:18.020000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The argument posited above is that it is a slippery slope.  If we delete these contracts, there may be an expectation in the future that core devs making state changes as part of a hard fork is generally acceptable behavior.",
        "created_at": "2021-10-28T11:31:24.393000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't think the account can be deleted, but we may have the following two options:\n1) Delete the code. This means the account remains, and so its current/future balance. Due to the reasons outlined in EIP-3607 it is unlikely it would be ever used as an EOA though (but it won't be prevented by EIP-3607).\n\n2) Replace the code with something else, like `0xFE`. I think is a more reasonable idea, and I also proposed this for selfdestructed code back months ago. There was one caveat there, instead of replacing the entire code, changing a single (first) byte is more desirable for things like verkle trees.",
        "created_at": "2021-10-28T11:34:22.369000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "by the way, i would love to help you out with the eip to change/delete the contracts, either research or writup, to add to the situational irony",
        "created_at": "2021-10-28T11:48:16.326000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e 2) Replace the code with something else, like 0xFE. I think is a more reasonable idea, and I also proposed this for selfdestructed code back months ago. There was one caveat there, instead of replacing the entire code, changing a single (first) byte is more desirable for things like verkle trees. \nthis sounds the least destructive so far, (other than the fact that its still a state change) are there any downsides to this?",
        "created_at": "2021-10-28T11:50:08.017000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I believe the primary argument is just the governance side of things (slippery slope, state changes, etc.)  Until such time as we have some form of regenesis, there is also technical debt in the form of every client needing that state transition in their codebase.",
        "created_at": "2021-10-28T11:59:27.686000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And I suspect that the state transition code probably adds more complexity than the \"work around\" code quoted above.  If you think we will never have any form of regenesis, then I can appreciate that the tech debt of an irregular state transition could be higher.",
        "created_at": "2021-10-28T12:00:30.921000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The transition code is executed once, the others are executed constantly.",
        "created_at": "2021-10-28T12:01:51.517000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That being said I'm not a fan of the ISC due to the risk of it opening up other hornet nest's.",
        "created_at": "2021-10-28T12:02:17.683000+00:00",
        "attachments": null
    },
    {
        "author": "albusdompeldorius",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If we want to avoid a ISC, we could make \"EF\" an alias for SELFDESTEUCT in the cases where it is the first byte in the code (joke)",
        "created_at": "2021-10-28T12:02:35.500000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "EF is currently an unassigned opcode?",
        "created_at": "2021-10-28T12:04:24.193000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2021-10-28T12:05:02.396000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`0xEF - Selfdestruct, burn ETH in account.`",
        "created_at": "2021-10-28T12:05:05.644000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Problem solved.  üòÑ",
        "created_at": "2021-10-28T12:05:12.623000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1. Hard fork with 0xEF becoming selfdestruct + burn when it is the first byte.\n2. Next hard fork remove that logic and introduce EOF.",
        "created_at": "2021-10-28T12:06:22.293000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Eh, doesn't solve the third one though.  üò¢  Oh well, was a good attempt.  üòÑ",
        "created_at": "2021-10-28T12:06:42.872000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Dragging this out for 2 more hardforks does not seem to be worth it üôÇ",
        "created_at": "2021-10-28T12:07:38.139000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And the technical debt is quite big for the above ^^",
        "created_at": "2021-10-28T12:07:45.550000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But yes, technically you could argue it is not a direct ISC, but a backdoor way for it.",
        "created_at": "2021-10-28T12:08:08.077000+00:00",
        "attachments": null
    },
    {
        "author": "kristofgazso",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "isn't the loose consensus right now to do a regenesis sometime after the cleanup fork of the merge?",
        "created_at": "2021-10-28T13:56:49.009000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't believe there is any consensus on any form of regenesis on any timeline.  I don't even think we have consensus on whether we *should* do it *ever*.",
        "created_at": "2021-10-28T13:58:31.157000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Doesn't have to be two hard forks. The new SELFDESTRUCT logic could simply only be active for some predetermined range of blocks and then deactivate and activate EOF .",
        "created_at": "2021-10-28T14:39:28.139000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "strongly against regardless - that logic will still have to be implemented and stay on forever, or until regenesis",
        "created_at": "2021-10-28T14:48:05.951000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I find this argument funny given the existence of Ethereum DRM mechanism",
        "created_at": "2021-10-28T14:49:14.147000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "DRM?",
        "created_at": "2021-10-28T15:04:21.885000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You also either need to rely on someone managing get the transaction(s) in, or also hardcode that in the transition.",
        "created_at": "2021-10-28T15:11:53.385000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "difficulty bomb",
        "created_at": "2021-10-28T15:39:11.861000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "basically, said governance already has stranglehold over the network, so the argument against ISC is moot",
        "created_at": "2021-10-28T15:41:04.780000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not sure I understand this?",
        "created_at": "2021-10-28T15:42:48.245000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "besides, unlike DAO, there is clear technical advantage to doing this, _and_ there is no wealth redistribution in deleting these three accounts",
        "created_at": "2021-10-28T15:42:49.209000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the purpose of difficulty bomb is to make sure only \"authorized core developers\" decide the future of the network, and that the rest of the network obeys this Discord",
        "created_at": "2021-10-28T15:43:30.691000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this is a DRM mechanism, in plain speak",
        "created_at": "2021-10-28T15:44:37.208000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The technical advantage is really minimal, though: you're saving 1 byte per call at the cost of making a straightforward technical change into a contentious political one which will be dragged out in debates for a long time. I don't have a strong opinion on the technicals of this, but I think advocating for an ISC risks making EOF, which seems super valuable, into a ProgPow-like debate.",
        "created_at": "2021-10-28T15:45:37.155000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "‚òùÔ∏è",
        "created_at": "2021-10-28T15:46:31.422000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, but what I'm saying is you can _avoid_ all this fuss at a fairly low technical cost",
        "created_at": "2021-10-28T15:47:25.729000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes, let's add yet another quick fix",
        "created_at": "2021-10-28T15:47:43.719000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "make the EVM glue even more bloated than it is today",
        "created_at": "2021-10-28T15:47:54.965000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I assume the answer to this is \"no\", but could you simplify the logic post-regenesis if those contracts aren't used?",
        "created_at": "2021-10-28T15:48:39.574000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Guess not because anyone could revive them",
        "created_at": "2021-10-28T15:48:46.502000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Technical debt is similar to a slippery slope.  It very rarely comes in big doses, it usually builds up due to 1000s of little decisions over a long period of time.  When considering the long term viability of a codebase (or a protocol in the case of Ethereum), one needs to keep in mind that there is virtually never a single piece of technical debt that broke the system, it is all of them added together that did it (drop in the bucket analogy).",
        "created_at": "2021-10-28T15:49:05.158000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Regenesis doesn't remove any state (including contracts), it only removes *history* (block headers, receipts, block bodies).  You may be thinking of state expiry, but the contracts can be revived at any time like you suggested.",
        "created_at": "2021-10-28T15:49:39.541000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right, sorry, I meant regenesis",
        "created_at": "2021-10-28T15:50:20.021000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "as far as I know, _all_ major consensus failures happened in the EVM glue",
        "created_at": "2021-10-28T15:51:07.994000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "not EVM, not P2P - the glue",
        "created_at": "2021-10-28T15:51:17.542000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ü§î It would be interesting to see a more formal/thorough analysis of all Ethereum consensus failures and the areas of code they were in.",
        "created_at": "2021-10-28T15:51:43.549000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the one with underspecified EVM resources like state slot cache and access lists",
        "created_at": "2021-10-28T15:51:46.951000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think Alexey had a presentation on it IIRC",
        "created_at": "2021-10-28T15:51:59.794000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Would be nice to include public testnet consensus failures as well if we have that data.",
        "created_at": "2021-10-28T15:52:00.842000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Those are consensus failures that occurred, but were caught before they caused damage.",
        "created_at": "2021-10-28T15:52:27.298000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I agree this is a problem, but wouldn't the original 3540 avoid \"glue\"? The check is only `0xEFXX` instead of `0xEF`, which is 100% constrained in the EVM, AIUI",
        "created_at": "2021-10-28T15:55:01.368000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the check code is still slightly longer, depending on the solution",
        "created_at": "2021-10-28T15:59:15.393000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the ideal outcome is still `0xEF` + version, without any provisions for these three contracts",
        "created_at": "2021-10-28T15:59:45.887000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it may seem silly, but I'd fight against every extra if clause in this critical section of code if it can be avoided",
        "created_at": "2021-10-28T16:00:58.798000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't find it silly to fight against conditionals in code.  They are well studied to be the source of most bugs.  üôÇ",
        "created_at": "2021-10-28T16:01:34.144000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and besides, *how on earth* can we do reGenesis if this Discord doesn't have the balls on this rather miniscule matter",
        "created_at": "2021-10-28T16:02:02.223000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We cannot do useful things without conditionals, but I agree that the fewer conditionals we can use to do useful things the better (all else being equal).",
        "created_at": "2021-10-28T16:02:06.792000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if you want to talk about the \"contentiousness\" of the matter, here's the litmus test\n\nis there wealth redistribution connected with this ISC?",
        "created_at": "2021-10-28T16:04:03.904000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the answer is 'no'",
        "created_at": "2021-10-28T16:04:09.985000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But is it a conditional? Maybe I'm missing something, but it seems like a slightly longer check?",
        "created_at": "2021-10-28T16:04:33.669000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "these contracts _cannot_ be used anyway",
        "created_at": "2021-10-28T16:05:00.576000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think reGenesis is a huge initiative which will take months of outreach to the community to get infra/tooling/etc. setup, kind of like the merge.",
        "created_at": "2021-10-28T16:05:02.328000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think different people have different litmus tests on this.",
        "created_at": "2021-10-28T16:05:16.989000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There are 3 options:\n1. Irregular state change.\n2. Increase technical debt/code complexity.\n3. Waste an extra byte for all EOF contracts.",
        "created_at": "2021-10-28T16:05:32.974000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(1) and (3) don't increase complexity, only (2) increases complexity.",
        "created_at": "2021-10-28T16:05:44.614000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, and (3) was the original proposal, right?",
        "created_at": "2021-10-28T16:05:57.116000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, though given there are only 3 0xFE contracts (2) was proposed.",
        "created_at": "2021-10-28T16:06:01.348000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, I guess I don't really see a lot of value in straying from that, and a lot of potential risks.",
        "created_at": "2021-10-28T16:06:16.454000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "risks like?",
        "created_at": "2021-10-28T16:06:29.232000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "debating this for 6 months because it's an ISC and then potentially not including 3540 in some fork, or delaying it, because it's not a straightforward technical change but a \"big political topic\"",
        "created_at": "2021-10-28T16:07:12.985000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At the very least, I think if someone wants to advocate for the ISC, it'd be valuble to gather data much beyond client devs that the community is on board.",
        "created_at": "2021-10-28T16:07:45.812000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And again, at that point it becomes pretty political rather than straightforward \u0026 technical",
        "created_at": "2021-10-28T16:08:05.348000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I wonder if anyone of core devs is against this very solution",
        "created_at": "2021-10-28T16:08:05.541000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But you need more than core devs",
        "created_at": "2021-10-28T16:08:12.390000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "or do you suggest debating with Twitter?",
        "created_at": "2021-10-28T16:08:19.730000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think, for example, during ProgPow, most core devs were on board",
        "created_at": "2021-10-28T16:08:27.726000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I wasn't \u003c_\u003c \u003e_\u003e",
        "created_at": "2021-10-28T16:08:45.273000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\"most\"",
        "created_at": "2021-10-28T16:08:51.776000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Sorry what is an ISC here?",
        "created_at": "2021-10-28T16:09:25.057000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Irregular State Change",
        "created_at": "2021-10-28T16:09:31.163000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "aha",
        "created_at": "2021-10-28T16:09:33.211000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Trying to scroll up and find the original proposal that's being debated here....",
        "created_at": "2021-10-28T16:09:46.768000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(First I thought it is the ISC license ü§ì )",
        "created_at": "2021-10-28T16:09:49.117000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "well, if there is no opposition among us on the proposal's own merits (except \"it's contentious\"), then there is nothing to debate really",
        "created_at": "2021-10-28T16:09:49.452000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "TL;DR: 3 contracts use `0xEF` already and are \"useless\". We could clear them from the state to make EIP-3540 a bit cleaner (use `0xEF` directly as an identifier vs. `0xEFXX`). We could also do something weird like have a rule that we use `0xEF`  as the 3540 identifier for all other contracts than these three.",
        "created_at": "2021-10-28T16:10:14.399000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The 3 contracts and 2 options outlined for dealing with them: \u003chttps://notes.ethereum.org/@ipsilon/eof-prefix-selection\u003e\nThe third option for dealing with them: \u003chttps://ethereum-magicians.org/t/evm-object-format-eof/5727/20?u=micahzoltu\u003e",
        "created_at": "2021-10-28T16:11:35.431000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "aha",
        "created_at": "2021-10-28T16:11:48.285000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We can't do that because 3540's motivation is pre-validating all contracts that start with \u003cmagic\u003e.",
        "created_at": "2021-10-28T16:12:00.462000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Or rather, we can but it requires even more complexity.",
        "created_at": "2021-10-28T16:12:15.619000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is \"that\" referring to the \"special case for 3 contracts\"? (shemnon's proposal)",
        "created_at": "2021-10-28T16:12:37.193000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Sorry, yes.  Specifically replying to:\n\u003e We could also do something weird like have a rule that we use 0xEF  as the 3540 identifier for all other contracts than these three.",
        "created_at": "2021-10-28T16:12:58.479000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e I think next steps here would be to try and get in touch with the 3rd contract deployer (IIUC we are already in contact with the first two deployers)",
        "created_at": "2021-10-28T16:13:16.498000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah ok, I must have misunderstood shemnon's proposal in that case. My bad!",
        "created_at": "2021-10-28T16:13:19.190000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "gaaaaah this is such a tiny issue, it's not worth wasting cycles to debate when we should be using our cycles to push an unconditional SELFDESTRUCT ban/neutering through ü§£",
        "created_at": "2021-10-28T16:13:36.141000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Unfortunately the third one is less easy to track down.  üò¢",
        "created_at": "2021-10-28T16:13:38.999000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Why not just 0xEFXX",
        "created_at": "2021-10-28T16:13:47.464000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is one of the options (the original plan in fact).",
        "created_at": "2021-10-28T16:13:58.604000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Here is a summary of the downside to each of the 3 options.  ‚òùÔ∏è",
        "created_at": "2021-10-28T16:14:18.605000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes, but it's an empty waste that can be avoided",
        "created_at": "2021-10-28T16:14:20.688000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "All 3 are tiny effect size.",
        "created_at": "2021-10-28T16:14:25.929000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm fine with 0xEFXX btw or the ISC.  I lean slightly towards the ISC but not strong enough to try and argue for it.",
        "created_at": "2021-10-28T16:14:56.665000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is mildly worrisome (but not alarming) when coming to agreement on changes is so difficult that we have to start politicking \"I'll drop my contention with 3540 if you drop your contention for SELFDESTRUCT removal\".",
        "created_at": "2021-10-28T16:15:20.610000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It would be *nice* if we could come to agreement on all issues, and we didn't have to resort to negotiating across issues.",
        "created_at": "2021-10-28T16:15:41.393000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This may not be realistic, but I think it is a worthy goal to strive for.",
        "created_at": "2021-10-28T16:15:54.416000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "one does not preclude the other",
        "created_at": "2021-10-28T16:16:11.482000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I do agree though, this is a very tiny issue.  All 3 options have a downside, and arguably that downside is tiny in all 3 cases.  So it is an argument over epsilons, where everyone who is passionate in the argument believes their epsilon is significantly bigger than the others.",
        "created_at": "2021-10-28T16:16:57.641000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I feel 90% of the time on debates is spent overcoming the \"it's contentious\" prison that only exists in people's minds",
        "created_at": "2021-10-28T16:17:07.774000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I suspect, for example, that Tim believes the effect of an ISC (politics) is significantly bigger than the effect of either of the others, and I suspect that Artem believes that the effect of introducing code complexity is significantly bigger than the others.",
        "created_at": "2021-10-28T16:17:46.014000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm definitely against (2); long-term technical debt is worse than minor inefficiency or a non-economically-meaningful ISC",
        "created_at": "2021-10-28T16:18:25.235000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I do suspect that (2) has the fewest supporters, though I could steel man (2) if someone wanted me to heat things up.  üòõ",
        "created_at": "2021-10-28T16:19:05.251000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so we could just agree to never use the three problematic version numbers?",
        "created_at": "2021-10-28T16:20:31.505000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, but without deleting those contracts we cannot assert \"all contracts with 0xFE first byte 100% will have a second byte\".",
        "created_at": "2021-10-28T16:20:31.924000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`prefix, version, sections, data` is the general layout, where the prefix proposed is `EF00` to avoid clashesh",
        "created_at": "2021-10-28T16:20:33.852000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the second option proposed in the document is using `EF` as a prefix and excluding `F0` as a potential version",
        "created_at": "2021-10-28T16:20:57.495000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, the ones that are one byte long make things awkward",
        "created_at": "2021-10-28T16:21:00.652000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "my issue is mostly with the `0xEF` contracts which do not have the second byte at all",
        "created_at": "2021-10-28T16:21:08.626000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Isn't it standard to pretend all contracts come attached with an infinite right tail of zero bytes?",
        "created_at": "2021-10-28T16:21:50.141000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If it was only the bigger of the three contracts then we could just declare that second byte a version and we wouldn't need any additional complexity in code, just to avoid reusing it in future EIPs.",
        "created_at": "2021-10-28T16:21:52.479000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it would mean code parsing EOF still need to check for length, as it can't assume it is properly validated üôÇ\n\nat least this edge case just means checking the first 2 bytes also includes a length check",
        "created_at": "2021-10-28T16:22:17.987000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would be surprised if this is true, but I'll leave it to client devs to assert.",
        "created_at": "2021-10-28T16:22:20.700000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the goal is though that after validation no such checks are needed of course",
        "created_at": "2021-10-28T16:22:34.995000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I still kind of like the special case SELFDESTRUCT idea for cleaning these up without an ISC and ended up with minimal debt (that I'm confident enough would get cleaned up with state-expiry/regenesis)",
        "created_at": "2021-10-28T16:23:22.047000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "personally, I think nobody will notice this ISC because nothing of value is going to change hands",
        "created_at": "2021-10-28T16:23:58.364000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think those against the ISC were Greg, Danno?  who else has spoken out against.  Trying to gauge level of opposition.",
        "created_at": "2021-10-28T16:24:37.940000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I did a quick check, it appears the third contract was created by what I *think* is a bot operator.  They don't have any clear footprint that would let me identify them without some hardcore doxxing analysis.",
        "created_at": "2021-10-28T16:27:04.074000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "On of the motivations is to try and only ever do validation when create is called. I don't think that is a guarantee.  Consider two clients, one does correct validation one does incorrect.  A bad contract is deployed by the bad client.  The chain splits.  Both chains grow.  A third client tries a fast or snap sync the chain. Unless they pick a pivot block before the bad deploy they won't be able to tell which chain has the valid contracts and which one has a bad contract, unless each contract that is EOF formatted is then validated at sync time.  If you want to ensure the chain has only EOF formatted contracts on chain you must validate them all at sync time to ensure you aren't getting a buggy chain.",
        "created_at": "2021-10-28T16:32:25.926000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The three deployers spent $25 on this at the time of the transactions. That is a well spent $25 to cause this much effort spent on it ü§ì",
        "created_at": "2021-10-28T16:33:26.108000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(Also they still had 30 gwei prices üò¢ )",
        "created_at": "2021-10-28T16:34:10.903000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the problem you are describing is not unique to this situation, you are just describing the fallout of a consensus failure?",
        "created_at": "2021-10-28T16:34:18.329000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also consider the wider EVM ecosystem.  Testnets, Layer 2s (Arbitrum, Optimism), Alt and quasi chains (BSC, AVX).  Any requirements on chain cleanliness will similary need to be enforced by any other EVM using chain, including ISCs and audits to determine where the ISC needs to be done. The alternative is they use a forked EVM variant (which to some people may be a desirable outcome, but not to me).",
        "created_at": "2021-10-28T16:35:05.178000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If we could guarantee EF on chain always means validated that would be great, but there are too many vectors to break that assumption IMHO.",
        "created_at": "2021-10-28T16:35:48.714000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right, and the impact of that consensus failure is that clients will need to validate EOF bytecode at some time other than the execution of the CREATE[2] opcodes or an initcode TX.",
        "created_at": "2021-10-28T16:36:44.374000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My two cents: 0xEFXX (option 3) is the easiest and simplest. 1 or 2 extra bytes is immaterial. Irregular State Change can be done (like it was done for DAO), but it entails some work. Namely coordination, coding/technical debt (not hard, but not trivial), potential ideological arguments, etc.",
        "created_at": "2021-10-28T16:39:35.637000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For anyone interested in this conversation, I would suggest to consider reading this short doc about other chains and the prefixes themselves, as it has relevant information: https://notes.ethereum.org/@ipsilon/eof-prefix-selection",
        "created_at": "2021-10-28T16:39:51.254000+00:00",
        "attachments": null
    }
]