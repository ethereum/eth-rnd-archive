[
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://lukeplant.me.uk/blog/posts/less-powerful-languages/\n\nInteresting article; relevant to our EVM discussions",
        "created_at": "2023-02-02T06:19:05.624000+00:00",
        "attachments": null
    },
    {
        "author": "demiurgos_23",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "can we get a bit more details about the second approach ? what happens in the case of Create Transaction ?",
        "created_at": "2023-02-02T11:05:24.926000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A create transaction with invalid initcode is invalid. I.e. must not be included in a block and this must be handled on the tx pool level.",
        "created_at": "2023-02-02T11:16:42.760000+00:00",
        "attachments": null
    },
    {
        "author": "demiurgos_23",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this option seems better to me as well then",
        "created_at": "2023-02-02T11:25:22.597000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Adding a transaction filter to the TxPool could be costly on performance side, is the impact small?",
        "created_at": "2023-02-02T11:38:07.213000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wanting to ask the same, is initcode validation algorithm one pass over data? If it is, I am in favor of not including tx that we know are invalid.",
        "created_at": "2023-02-02T11:44:57.603000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The validation is linear and will be forever. This case seems to be 10x simpler than any other tx validation like nonce or balance checks. EOF validation does not depend on state so you can attribute an received invalid tx to a network peer. To my understanding \u003c@211091239112671234\u003e does not have issues with it. We were mostly (cc \u003c@543900561460822016\u003e) concern by separation of concerns ðŸ™‚ The tx pool will need to understand EOF. With option #1 all behaves as if execution failed.",
        "created_at": "2023-02-02T12:02:16.336000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In the 'general case', the eof validation might be 'harder' than a balance-check -- if the sender is already cached. However, in the 'attack case', an attacker submitting a (bunch of) transaction to DoS the txpool, it makes a lot more sense for an attacker to use non-existing senders, since those will force a full state-lookup before they can be rejected. And that lookup is a lot more expensive than the eof calculation.",
        "created_at": "2023-02-02T12:31:49.880000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Nice, thank you both for explanation!",
        "created_at": "2023-02-02T12:59:21.843000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Still need a decision on this though ðŸ™‚",
        "created_at": "2023-02-02T13:03:43.718000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My only other thought on this is that it does place a constraint on how expensive we can make validation in the future. Maybe / probably validation will never be 1-2 orders of magnitude more expensive, but if we tie ourselves to the check in the p2p now, it constrains our ability to this a bit later on",
        "created_at": "2023-02-02T14:07:10.261000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If needed we could always reverse the decision in future and do validation at execution, or even have two types od validations one in txpool/before that would make tx invalid and one at execution that would spend gas.",
        "created_at": "2023-02-02T14:14:10.807000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "definitely - but ultimately i don't see much value in the check in the first place, the sender can just pay for the failure and hopefully do better next time",
        "created_at": "2023-02-02T14:15:10.133000+00:00",
        "attachments": null
    },
    {
        "author": "demiurgos_23",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "would embedded DSLs in \"Powerful\" languages answer this ?",
        "created_at": "2023-02-02T14:17:35.948000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I see it as small overall benefit, as with it we would have more strict requirement on what is inside the block.",
        "created_at": "2023-02-02T14:20:37.915000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "interesting, i actually see this as a small drawback - it i) adds a little more complexity than just relying on the validation during the create logic (it needs to be done as part of block validation, not tx execution) and ii) adds more considerations on the p2p layer",
        "created_at": "2023-02-02T14:22:48.588000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the only benefit is that we minimize the junk in the block, but imo that is the point of fees",
        "created_at": "2023-02-02T14:23:14.228000+00:00",
        "attachments": null
    }
]