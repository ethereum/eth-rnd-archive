[
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have a question about this test: `ID: EOF1V0004 check that valid EOF1 can include 0xFE, the designated \"invalid opcode\"`\nDoes this mean a section can end with 0xFE?\nAre the rules around which opcodes a section can end on still valid and if so is there a writeup of them?",
        "created_at": "2024-04-22T09:06:40.063000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "quickly: a code section must \"end\" with one of the terminating instructions: STOP, RETURN,REVERT, INVALID, ...",
        "created_at": "2024-04-22T09:21:34.752000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not found here: https://github.com/ipsilon/eof/blob/main/spec/eof.md",
        "created_at": "2024-04-22T09:23:52.690000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't get container test 1 here:\nhttps://github.com/ethereum/tests/blob/develop/EOFTests/efValidation/EOF1_embedded_container_.json\n\n`./eofdump eofdump --hex 0xef00010100040200010006030001001404000200008000016000e0000000ef000101000402000100010400000000800000fe`\nproduces `invalid container size: have 50, want 52`, so the container is expected to be 52 bytes but is only 50.\n\nI get the following output when unmarshalling (and disabling the size check) it:\n```\nHeader\n-----------\nEOFMagic: [239 0]\nEOFVersion: 1\nKindType: 1\nTypesSize: 4\nKindCode: 2\nCodeSize: 1\nCode 0 length: 6\nKindContainer: 3\nContainerSize: 1\nContainer 0 length: 20\nKindData: 4\nDataSize: 2\nTerminator: 0\n-----------\nBody\n-----------\nType 0: 00800001\nCode 0: 6000e0000000\nSection 0: ef000101000402000100010400000000800000fe\nData: 3030\n```\n\nWhich looks a bit weird to me. The data size is 2, but since the container size is 0x14 (or 20 decimal), the data is missing from the test.\n\nThere is another test (EOF_embedded_container_2) 0xef00010100040200010006030001001404000200008000016000e0000000ef000101000402000100010400000000800000feaabb\nWhich does the correct thing in my opinion (add 2 bytes of data to the test)",
        "created_at": "2024-04-22T09:50:50.878000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "```\n./eofdump eofdump --hex 0xef00010100040200010006030001001404000200008000016000e0000000ef000101000402000100010400000000800000feaabb\nHeader\n-----------\nEOFMagic: [239 0]\nEOFVersion: 1\nKindType: 1\nTypesSize: 4\nKindCode: 2\nCodeSize: 1\nCode 0 length: 6\nKindContainer: 3\nContainerSize: 1\nContainer 0 length: 20\nKindData: 4\nDataSize: 2\nTerminator: 0\n-----------\nBody\n-----------\nType 0: 00800001\nCode 0: 6000e0000000\nSection 0: ef000101000402000100010400000000800000fe\nData: aabb\n```\n^ just as an addition, the correct test looks like this imo",
        "created_at": "2024-04-22T09:52:32.805000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e the total size of not yet deployed container might be up to data_size lower than the above values due to how the data section is rewritten and resized during deployment\n\u003e \nMaybe its this?",
        "created_at": "2024-04-22T10:14:19.971000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Terminating instructions: STOP, INVALID, RETURN, REVERT, RETURNCONTRACT, RETF, JUMPF.\n\n?",
        "created_at": "2024-04-22T10:52:41.851000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ahh sry",
        "created_at": "2024-04-22T10:53:34.034000+00:00",
        "attachments": null
    },
    {
        "author": "gumb00",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, this is the rule that explains that test, data section is allowed to be shorter than declared",
        "created_at": "2024-04-22T15:52:04.116000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Reviewing this now üëç",
        "created_at": "2024-04-22T16:27:57.956000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hey \u003c@360491619402776577\u003e, what's your branch for EOF?",
        "created_at": "2024-04-22T16:28:21.604000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/go-ethereum/pull/29518\nIt's still very buggy though",
        "created_at": "2024-04-22T16:32:45.546000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No worries I just want to fill the basic tests for now",
        "created_at": "2024-04-22T16:33:18.087000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah I now see what you meant, hit a panic really fast üòÖ",
        "created_at": "2024-04-22T16:52:27.177000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@403707149043105803\u003e I've reviewed and left some comments on #518, let me know what you think üëç",
        "created_at": "2024-04-22T17:25:17.802000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Comments merged.  Can we also get #517 reviewed and merged?  They were written before we introduced non-returning sections and a few other minor changes.  The EOF tests as merged do not reflect the mega-eof  EIPs without these changes.",
        "created_at": "2024-04-22T21:45:59.568000+00:00",
        "attachments": null
    }
]