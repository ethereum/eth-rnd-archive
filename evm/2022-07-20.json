[
    {
        "author": "ryanleeschneider",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have a somewhat basic question about opcodes and gas costs, are the rationales for the gas costs explained somewhere?  For non-storage opcodes I would expect the gas costs to scale roughly with the CPU effort needed to execute those opcodes.  As such, I was actually surprised to see that the `SHA3` opcode is as cheap as it is in comparison to say the `ADD` opcode.  keccak hashing two words costs 48 gas, while adding two words costs 3 gas, or a 16x cost differential, but adding two uint256 is much more than 16x faster than sha3 of 64 bytes of data on modern hardware.  As a contrived example using some geth code (but eliding the EVM overhead) see the two benchmark methods in this gist:\n\nhttps://gist.github.com/ryanschneider/4e602387db8740a90c1f3714abc5712d\n\nThe benchmark results:\n\n```\nBenchmarkRawKeccak256-8        3443341           335.4 ns/op\nBenchmarkRawAdd-8       1000000000             0.3316 ns/op\n```\n\nThat implies to me that if the two opcodes are meant to be priced wrt to how much CPU they consume then the `SHA3` opcode is way underpriced (in this case sha3 is roughly 1000x less performant than adding), which leads me back to trying to better understand the rationale of the opcode pricings in the yellow paper.",
        "created_at": "2022-07-20T20:41:50.007000+00:00",
        "attachments": null
    }
]