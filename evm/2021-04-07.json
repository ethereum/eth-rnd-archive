[
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!273808422753796097\u003e Running over lots of contracts on the blockchain with the Go profiler showed SLOAD to be far-and-away the most expensive opcode.  The attached is a detailed profile of where the turbo-geth interpreter spends its time.",
        "created_at": "2021-04-07T01:16:33.279000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "profile002-48B9655D-E0CE-44F4-8CE6-15401844D39B.png",
                "content": "84a47541beed68ce0a4e2cab97179e0772e0b7d82da3eca684d715d18c653908"
            }
        ]
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!777935002263617576\u003e You might find this helpful:\nhttps://github.com/ethereum/evmone/issues/71",
        "created_at": "2021-04-07T01:21:47.015000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks, very helpful, I assume those numbers are still relevant in 2021. A few more questions:\n1) Is there any comparision with https://github.com/openethereum/openethereum/tree/main/crates/vm ? Seems it's the second largest client and written in Rust, so would be interesting to know the performance.\n2) Evmone exposes EVMC, however seems that major clients are lagging with EVMC support. How much battle-testing Evmone had on the mainnet?\n3) Roughly how much of the time/resources are spent in EVM on the mainnet comparing to the other components such as state store management, fork choice etc. excluding PoW.",
        "created_at": "2021-04-07T08:38:29.097000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!777935002263617576\u003e  The numbers are old enough and the clients have made enough progress that the tests need to be rerun but the overall ratios are probably the same.  aleth is deprecated, geth has been improved, I'm working turbo-geth, and openethereum I didn't test. evmone is rock-solid, \u003c@!425274498732916736\u003e might have more to say.  Pure computation is not where most clients spend their time - state access is.",
        "created_at": "2021-04-07T15:04:38.549000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/ewasm/benchmarking/tree/report",
        "created_at": "2021-04-07T15:22:20.105000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "According to this https://gist.github.com/chfast/d303d15d151620d23bba617cd79097af, some contracts were using up to 1MB of memory.",
        "created_at": "2021-04-07T15:36:43.043000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For EVM memory: it is probably the most overpriced feature, but also memory instructions are relatively slow because they mostly compute the gas cost and check bounds or fill zeros... I strongly believe some small research of EVM memory design would be nice.",
        "created_at": "2021-04-07T15:39:51.129000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "page allocated memory (as in wasm) would be big improvement",
        "created_at": "2021-04-07T15:40:29.447000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks, very helpful!",
        "created_at": "2021-04-07T19:09:34.227000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Does this include the recent geth improvements that add an on-disk state map?",
        "created_at": "2021-04-07T19:09:44.554000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah turbo-geth, I see; but surely turbo-geth would have a similar feature?",
        "created_at": "2021-04-07T19:10:17.320000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "anyway, this makes me really glad EIP 2929 is going live in a week",
        "created_at": "2021-04-07T19:11:25.435000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks \u003c@!683653554631868440\u003e \u003c@!425274498732916736\u003e , how do you run evmone in a more integerated environment (state management, consensus etc.)? https://github.com/ewasm/go-ethereum/releases seems too outdated.",
        "created_at": "2021-04-07T19:18:05.506000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/torquem-ch/silkworm",
        "created_at": "2021-04-07T19:35:45.032000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Looks good, will check silkworm a bit more, but if I understand correctly it's not a full client yet?",
        "created_at": "2021-04-07T19:54:50.880000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is if combined with some turbogeth parts.",
        "created_at": "2021-04-07T20:36:17.260000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I stopped updating the geth fork because there is little interest in this work",
        "created_at": "2021-04-07T20:37:10.523000+00:00",
        "attachments": null
    }
]