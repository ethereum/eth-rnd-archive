[
    {
        "author": "enchantress3669",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hi everyone, I have been looking at using the state override feature provided for geth. I have a doubt and I was hoping that someone here could point me in the right direction.\n\nAdvanced geth feature state override allows us to query RPC methods in Geth by providing fake slot values for state variables.\nplease see this example to fake an ERC20 approval before making an eth_call -  https://www.libevm.com/2022/01/12/advance-geth-pt-2-stateoverrides/\nIn the above example, they use const slot = 3; for the DAI contract allowance mapping. How can I find the slot number for allowance mapping for other ERC20s?\nWe tried doing this for USDT, and via trial and error got a valid output for slot 5 (allowance mapping in USDT). So itâ€™s not the same for all tokens and it depends on the order of the variable in the deployed contract.\n\nWeb3js and ethersjs libraries provide a function called getStorageAt(), which takes a contract address and a slot number to return a Bytes32 representation of the value stored at that slot. We need a method to retrieve the slot number given the contract address and name of the state variable.\n\nReference to this question posted on Ethereum stack exchange - https://ethereum.stackexchange.com/questions/158785/how-to-find-the-slot-number-for-state-variable-overrides-in-eth-call-eth-estima",
        "created_at": "2024-01-04T09:19:07.566000+00:00",
        "attachments": null
    }
]