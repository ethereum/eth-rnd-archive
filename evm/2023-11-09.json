[
    {
        "author": "wjmelements",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is there a reason for having `BLOCKHASH` limited to 256 blocks? For more gas, could it be the entire history?",
        "created_at": "2023-11-09T22:19:54.523000+00:00",
        "attachments": null
    },
    {
        "author": "wjmelements",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "should have been `XCHG`",
        "created_at": "2023-11-09T22:21:31.136000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A limitation since the dawn of time.  With 256 block look-back they only need to keep recent blocks in-memory, otherwise the EVM would need to charge a \"cold block\" fee like \"cold account\" fees vis a vis EIP-2929.",
        "created_at": "2023-11-09T22:23:16.389000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A precompile-with-storage like 4788 has been discussed for it.  No one has been championing a specific form of it and I think it would probably want to ride in the slip-stream of verkle.",
        "created_at": "2023-11-09T22:25:03.776000+00:00",
        "attachments": null
    },
    {
        "author": "wjmelements",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think it could be useful for proofs but I'm not building such a thing myself.",
        "created_at": "2023-11-09T22:32:28.657000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think things start to break down when it involves adding ~500MB to the state to put each block in memory.  A merkelized list would be a better option as it would have on the order of tens of storage slots instead of millions. The provers would need to bring their own merkle proof for most of the trie, about 300 bytes or so.",
        "created_at": "2023-11-09T22:36:57.062000+00:00",
        "attachments": null
    },
    {
        "author": "wjmelements",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would prefer to augment the BLOCKHASH opcode than to create a precompile. I don't think anyone should be depending on the \u003e256 behavior",
        "created_at": "2023-11-09T22:46:14.689000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That also runs straight into EIP-4444, which aims to eliminate required block history storage.  A merklelized list I think is what is durable.",
        "created_at": "2023-11-09T22:53:58.104000+00:00",
        "attachments": null
    }
]