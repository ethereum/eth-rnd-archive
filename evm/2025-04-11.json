[
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Conceptually you are right: we need code section offsets.\n\nUsing sizes instead of offsets works as [delta encoding](https://en.wikipedia.org/wiki/Delta_encoding) and saves space by using the fact the offsets are sorted. However, this requires additional preprocessing before execution (specifically computing the prefix sum, which is SIMD-parallelizable).\n\nUsing just offsets, we are wasting more space (likely need 3 or 4 byte values). But we have random access straight-away.\n\n\u003c@403707149043105803\u003e VLQ defeats the purpose of the random access. So you would need to decode the array of values into their plain form. Classic VLQ is also not SIMD-parallelizable.",
        "created_at": "2025-04-11T09:22:38.831000+00:00",
        "attachments": null
    }
]