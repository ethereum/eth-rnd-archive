[
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e \u003c@211091239112671234\u003e \u003c@450651770243252225\u003e \u003c@275684146658148352\u003e Clarification for nonce behavior in EIP-3540: https://github.com/ethereum/EIPs/pull/6328",
        "created_at": "2023-01-13T12:42:06.616000+00:00",
        "attachments": null
    },
    {
        "author": "hritzdorf",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@427011130318389248\u003e What are the possible examples for code duplication?\n\nIt seems that for something like `PUSH 0 PUSH 0 REVERT` it would be better to have it in a separate code section so that you can call it from all other code sections and thereby avoid duplication across code sections.\n\nIf many such duplicated snippets had 0 inputs you could even introduce. `CALLFI` a conditional `CALLF`. It works like `CALLF` but only calls if the top-stack element is != 0. (So the same relation as `RJUMPI` to `RJUMP`.) `CALLFI` would only be allowed to call functions with 0 inputs and 0 outputs though (which could of course be checked statically).\n\nI am asking about examples, because `PUSH 0 PUSH 0 REVERT` will soon become `PUSH0 PUSH0 REVERT` and thereby only be 3 bytes long. So as long as a `CALLF` or `RJUMP`.",
        "created_at": "2023-01-13T14:50:53.717000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e CALLFI would only be allowed to call functions with 0 inputs and 0 outputs though (which could of course be checked statically).\nCould that be expanded to inputs==outputs?",
        "created_at": "2023-01-13T17:46:44.218000+00:00",
        "attachments": null
    },
    {
        "author": "hritzdorf",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh yes, I think it could. That would be quite nice.",
        "created_at": "2023-01-13T19:35:50.557000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "After spending a couple of hours attemting to get the Besu errors to align with the Geth errors I think there are too may errors tied too deeply to the particualrs of the Geth implementation.  Especially when it comes to header parsing... should an EOF be considered before any other errors, like kind 1 not being divisible by 4? ... `0xEF0001010001020001` ... What's the correct error?",
        "created_at": "2023-01-13T21:45:19.851000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think we should instead start with 5 errors, one per EIP (maybe 3).  EOFContainerError, EOFCodeValidationError, EOFJumpValidationError, EOFFunctionValidationError, and EOFStackValidationError.  Functions may have a lot of overlap with code validation, so function would apply to non-existant code sections and invalid input/output mappings in code validaiton, and stack height would be stack validation only.",
        "created_at": "2023-01-13T21:47:22.670000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'll start doing a redline of the exiting corpus with those errors in mind.",
        "created_at": "2023-01-13T21:47:50.461000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We still run into multiple failure scenarios, however.  1001 is the first multi on the reduced set: a well formed container with SDIV / JUMPV [table].  It lacks a terminating operation and it also has a jump table error (jumping out of code).",
        "created_at": "2023-01-13T23:54:15.317000+00:00",
        "attachments": null
    }
]