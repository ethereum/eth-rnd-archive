[
    {
        "author": "marekm3498",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, I agree. Let us know when you have new tests generated. We will be happy to try them just after the generation ðŸ™‚",
        "created_at": "2022-12-22T08:14:29.409000+00:00",
        "attachments": null
    },
    {
        "author": "dimitry8570",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "also one way to check is here \nin test header \n`evm version 1.11.0-unstable-e2fa55a4-20221108`\nthis is from geth ipsilon branch.  in Merge+3540+3670   \n\n\u003c@275684146658148352\u003e \nwas the tests filled with 3860 ? \nit looks like we need to refill it with Merge+3540+3670+3860  explicitly",
        "created_at": "2022-12-22T09:21:37.565000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is true, but it is very hard/impossible to find these revisions.",
        "created_at": "2022-12-22T09:28:49.600000+00:00",
        "attachments": null
    },
    {
        "author": "dimitry8570",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah no. it is ewasm:eip-3540\nbut thats outdated.\n\u003c@275684146658148352\u003e",
        "created_at": "2022-12-22T09:50:04.889000+00:00",
        "attachments": null
    },
    {
        "author": "gumb00",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "All currently existing EOF tests were filled with 3860 disabled",
        "created_at": "2022-12-22T10:35:16.323000+00:00",
        "attachments": null
    },
    {
        "author": "gumb00",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is better to include it in EOF tests, but for that would be very nice for geth team to merge its implementation",
        "created_at": "2022-12-22T10:35:53.880000+00:00",
        "attachments": null
    },
    {
        "author": "gumb00",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@758579010027782144\u003e as already answered, EOF tests yet need to be updated, with tests we're a bit lagging behind spec changes\n\nbut you should also check latest EIP changes against your implementation, header format was finalized and merged yesterday https://github.com/ethereum/EIPs/pull/6156",
        "created_at": "2022-12-22T10:39:22.735000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thx for the answer ðŸ™‚ \nYes, we are aware of this change, and we're working on it ðŸ˜‰",
        "created_at": "2022-12-22T11:07:04.960000+00:00",
        "attachments": null
    },
    {
        "author": "rodiazet",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have to check it once again but I as far as I remember now 3860 is **disabled** in the test generated by geth rev `e2fa55a4`.",
        "created_at": "2022-12-22T11:15:27.566000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@425279588009246720\u003e \u003c@543900561460822016\u003e \u003c@425274498732916736\u003e Can we clarify whether `PC` is invalid in EOF or not? I don't see that it's deprecated by the EIPs (EIP-4200 only says \"We do not see any significant downside to relative addressing, but it also opens possibility to the deprecation of the PC instruction.\"), but `PC` is marked as invalid in the unified spec.",
        "created_at": "2022-12-22T13:06:50.506000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The current spec leaves `PC` as it was. This is because I thought this was the decision. But maybe I'm wrong and people are in favor of removing it (which I'm too).",
        "created_at": "2022-12-22T13:13:01.333000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What is your preference?",
        "created_at": "2022-12-22T13:13:43.496000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess marking `PC` invalid chimes well with \u003c@273808422753796097\u003e 's idea of disabling introspection of EOF code. And IMO it's fine to mark it as invalid unless someone presents a legit use case for it even in EOF. Perhaps somebody from Solidity can opine.",
        "created_at": "2022-12-22T13:17:23.949000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But, in any case, the EIPs should agree with the unified spec on the matter.",
        "created_at": "2022-12-22T13:17:55.493000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'd also like to see PC go.  Without dynamic jumps I'm not sure it's of much use.",
        "created_at": "2022-12-22T13:23:09.380000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's late in the game, but are we going to need a Meta EIP to officially tie this all together?",
        "created_at": "2022-12-22T13:23:20.503000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Late for the current deadline. The unified spec is the current solution. https://notes.ethereum.org/@ipsilon/eof1-unified-specification",
        "created_at": "2022-12-22T13:25:45.046000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes.  It would have to come later.",
        "created_at": "2022-12-22T13:26:25.365000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is, the unified spec does not meet the standards of an EIP, and without it will be difficult to understand how this collection of EIPs work togther.",
        "created_at": "2022-12-22T13:34:37.449000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I've mentioned this before, but  EIP-4750 specifies that there will be an exceptional halt for a number of conditions that I think cannot happen in valid code.  I think these should be replaced with MUST clauses.",
        "created_at": "2022-12-22T13:35:33.275000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I plan to replace them with asserts. But it has low priority :/",
        "created_at": "2022-12-22T13:37:20.552000+00:00",
        "attachments": null
    },
    {
        "author": "gcolvin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "OK, thanks.",
        "created_at": "2022-12-22T13:37:37.526000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Guys, i have a question. If initcode is invalid , should the gas metering for 3860 still be deducted or not?\nBasically should the metering happen before the initcode is check for EOF compliance or before?",
        "created_at": "2022-12-22T16:09:37.820000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'd say EOF validation should happen after because the 3860 fee is to cover validation cost.",
        "created_at": "2022-12-22T16:32:14.083000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thank you",
        "created_at": "2022-12-22T16:32:45.087000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But we constantly have issues with order of these checks.",
        "created_at": "2022-12-22T16:33:39.851000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is the reason i wanted to confirm. We should probably add it to EIP-3540",
        "created_at": "2022-12-22T16:34:29.661000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e can you add it in your PR please?",
        "created_at": "2022-12-22T16:35:31.294000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Late to the PC discussion, but one huge optimization of not keeping the PC (and ditching absolute jumps) is that the notion of \"PC=0\" at each code section goes away.  We can treat all code sections as one contiguous block of code and just set the PC to the start of the code section for each CALLF.  Less code array slices to juggle.  So while I was initially in the \"Keep PC\" camp I see this as a compelling reason (along with Vitalik's anti-introspection proposal) as good reason to remove it.",
        "created_at": "2022-12-22T17:41:14.511000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we still need to guard against relative jumps outside of code sections, but code validation should have that covered.",
        "created_at": "2022-12-22T17:41:42.779000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "remove PC from EOF: https://github.com/ethereum/EIPs/pull/6209\nclarification on initcode metering: https://github.com/ethereum/EIPs/pull/6210",
        "created_at": "2022-12-22T22:35:13.708000+00:00",
        "attachments": null
    }
]