[
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I really don't like the idea of blocking tests on a PR based on a single implementation.  What if we are fixing a bug in that implementation, how do we (a) merge it before the implementation in tox is fixed and (b) make it available to all the other implementations so they can test?  This is can be very problematic when the gating impl is the lagging or buggy implementation.",
        "created_at": "2024-05-28T00:57:50.371000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I understand itâ€™s not ideal, but this is basically the same process we have for the normal tests we fill. Having a CI process is imo very helpful to catch things before merging, so some delays to merge due to some bug might not be a big issue if it saves us some hassle of merging incorrect tests, Iâ€™m open to making this optional though",
        "created_at": "2024-05-28T03:22:13.271000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But then all the other clients are gating on that client.  This was the situation in the constantinople era, everyone waiting on the C++ client because they filled the reference tests, and it sucked.",
        "created_at": "2024-05-28T03:46:16.943000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If it was a different step in the merge checks rather than jammed in with the other tox tests we can see that it is _only_ the fill failing, then we could make intelligent decisions about force merging.  But if it's a part of every tox test it will, in my opinion, degrade the utility of the test cases.",
        "created_at": "2024-05-28T03:47:44.426000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Another alternative is to only require it to fill for _published_ forks, such as up to cancun, and the Prague+ tests are only advisory in the github action.",
        "created_at": "2024-05-28T03:48:12.620000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Perhaps once we are in the world where EELS is the filler and we stick to the rule where features don't go CFI until there is an EELS implementation, it may work.  But I don't see a world where EELS is the first implementation for every possible EIP.",
        "created_at": "2024-05-28T03:49:48.981000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I also have some concerns with binding this with evmone, but we can give it a go.",
        "created_at": "2024-05-28T06:53:15.604000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Sounds good, I'll remove the check from CI, but you can still use `tox -e tests-eof` and it will run all eof tests with evmone to verify locally",
        "created_at": "2024-05-28T15:16:45.437000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A code section should end with a terminating opcode. Is this list complete?: \n\nSTOP / RETURN / REVERT / INVALID / RETURNCONTRACT / RETF / JUMPF / RJUMP\n?",
        "created_at": "2024-05-28T15:34:51.626000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And for 0x80 outputs this is the list above except RETF / JUMPF / RJUMP ?",
        "created_at": "2024-05-28T15:35:25.775000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "for 0x80 RJUMP is an acceptable \"terminator\" as control stays in the section.",
        "created_at": "2024-05-28T15:36:32.300000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think JUMPF is fine too, it just can only target an 0x80 section.",
        "created_at": "2024-05-28T15:36:50.639000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah right",
        "created_at": "2024-05-28T15:36:56.433000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, makes sense ðŸ™‚ Thanks",
        "created_at": "2024-05-28T15:37:12.289000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In a 0x80 code section is RETF allowed at all?",
        "created_at": "2024-05-28T15:37:46.846000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh wait, its in the spec nvm",
        "created_at": "2024-05-28T15:38:23.556000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In the latest eof fixtures release in the `eof_tests` folder there are tests for 3540, but there do not seem to be any tests for 5450 (stack validation)?",
        "created_at": "2024-05-28T16:11:27.556000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Should I use: https://github.com/ethereum/tests/tree/develop/EOFTests ?",
        "created_at": "2024-05-28T16:12:27.699000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Does someone have a list of stack requirements for each opcode in EOF? I tried finding it in evmone but could not find it",
        "created_at": "2024-05-28T16:36:33.725000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(for 5450 validation)",
        "created_at": "2024-05-28T16:36:39.841000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have a manually generated one but there seems to be a lot of errors in it ðŸ˜…",
        "created_at": "2024-05-28T16:36:48.629000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Here's Besu's list - https://github.com/hyperledger/besu/blob/mega-eof/evm/src/main/java/org/hyperledger/besu/evm/code/OpcodeInfo.java#L79",
        "created_at": "2024-05-28T16:37:35.098000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "name, opcode, inputs, outputs, operation size",
        "created_at": "2024-05-28T16:37:59.030000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Great, thanks ðŸ˜„",
        "created_at": "2024-05-28T16:38:06.465000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "How does Besu handle RJUMPV? `OpcodeInfo.validOpcode(\"RJUMPV\", 0xe2, 1, 0, 2),` The operation size would be dynamic, right? (Depending upon the table size?)",
        "created_at": "2024-05-28T16:39:05.282000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, so 2 is the minimum size and we special case it in the validator based off of the size byte",
        "created_at": "2024-05-28T16:39:28.187000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah ok, I see",
        "created_at": "2024-05-28T16:39:38.414000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right RJUMPV is the only opcode with a non-constant operation size",
        "created_at": "2024-05-28T16:39:55.166000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Actually 4 is the minimum legal rjumpv opcode, but we work off of the opcode and table size.",
        "created_at": "2024-05-28T16:40:10.626000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right now yes, rjumpv is the only variable size opcode.",
        "created_at": "2024-05-28T16:40:20.914000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003cVLQ has entered the chat\u003e ðŸ˜„",
        "created_at": "2024-05-28T16:40:54.550000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Am I right regarding this and should I use `ethereum/tests` for those container tests?",
        "created_at": "2024-05-28T16:41:39.423000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And https://github.com/ipsilon/execution-spec-tests - EEST is going to be the standard in the next couple fo forks.  There are fixtures in https://github.com/ipsilon/execution-spec-tests/releases/tag/eof-20240515",
        "created_at": "2024-05-28T16:43:10.222000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the ipsilon fork has all the EOF prs speculatively merged",
        "created_at": "2024-05-28T16:43:35.201000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes we are migrating to EEST ðŸ™‚",
        "created_at": "2024-05-28T16:44:18.310000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah ok upon re-checking the fixtures in the eof folder it seems that I can maybe use the 7692 (meta EOF) tests",
        "created_at": "2024-05-28T16:44:40.128000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(for container validation)",
        "created_at": "2024-05-28T16:44:48.255000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2024-05-28T16:44:53.131000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah ok oversight of me, thanks ðŸ˜„",
        "created_at": "2024-05-28T16:45:00.221000+00:00",
        "attachments": null
    }
]