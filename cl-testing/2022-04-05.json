[
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Ran a successful checkpoint sync with teku+geth on goerli-shadow-fork-2. Took geth about a day to finish syncing and it was regularly hitting 10 second time outs for execution engine calls during the process but everything carried on making slow but steady progress.  It's running in docker on a mac so likely had less ram than it would have liked and potentially slower disk than normal as well because of the emulation layer.",
        "created_at": "2022-04-05T02:59:08.923000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "What was the operation that has been timed out?",
        "created_at": "2022-04-05T07:27:54.217000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Both new payload and fcu I believe. If I had to guess Iâ€™d say there were just too many requests and it wound up building up a queue of requests to process.",
        "created_at": "2022-04-05T07:51:14.917000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Itâ€™s been fine once sync completed though. Probably should do a normal goerli sync to get a perf baseline for the setup as well",
        "created_at": "2022-04-05T07:52:35.796000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!360491619402776577\u003e what operations are time consumers during the sync process? I am curious about block hash verification in particular",
        "created_at": "2022-04-05T08:36:23.713000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Depends on the sync mode. During full sync the bottleneck is transaction execution. Fast sync (not available on geth anymore) is RTT and Snap sync is usually I/O bound (downloading and storing all blocks and state to the disk). Blockhash verification is not really an issue. We construct the reverse header chain (from the head given to us by CL down to genesis) which is pretty quick and then start fetching the blocks and state",
        "created_at": "2022-04-05T08:44:00.800000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Teku uses a lot of I/O afair, which impacts our ability to store data",
        "created_at": "2022-04-05T08:44:35.109000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I see, i would expect that during the sync `newPayload` and `fcU` return `SYNCING` almost immediately and just downstreaming the data to the sync process",
        "created_at": "2022-04-05T08:48:15.053000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "On `newPayload` we need to derive the TxHash which is a bit painful.\nFor both `nPl` and `fcu` we need to query the db for the block/parent block. \nIf we have a lot of other accesses to the db already lined up, these can take very long. \nAnd if they are extensions of the current chain, we need to update the sync thread with this new information\nI need to do some more benchmarking here",
        "created_at": "2022-04-05T08:54:18.539000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Cool, it is interesting to get more information on what is the bottleneck and how we can approach timeout issues",
        "created_at": "2022-04-05T09:26:16.845000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I strongly suspect my setup had quite slow IO which is probably where all the problems stem from then.  It was definitely timing out a lot more often when geth was compacting it's db as well (unsurprisingly).",
        "created_at": "2022-04-05T09:35:50.244000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003e On newPayload we need to derive the TxHash which is a bit painful.\nBtw, this is required by block hash verification. \nEverything else seems to be possible to be handled in the background.",
        "created_at": "2022-04-05T09:39:50.278000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "^ Calling TestingTheMerge people ðŸ˜„\nIt'd be great if you can help us benchmark sync of various clients on the goerli shadow forks, I doubt we'd be making guides for this. But if you enjoyed setting up clients on Kiln, then this might be an interesting next step! We're looking for how long sync took, if you tried syncing in a weird way (EL or CL offline during sync), irregular disk use and so on\n\nThe configs for the shadow forks can be found here: https://github.com/eth-clients/merge-testnets/tree/main/goerli-shadow-fork-3",
        "created_at": "2022-04-05T10:08:47.247000+00:00",
        "attachments": null
    },
    {
        "author": "tlou8882",
        "category": "Testing",
        "parent": "",
        "content": "Hi guys, I want to deploy smart contracts on Kiln testnet, but I can't find any docs about that. Can anyone help me?",
        "created_at": "2022-04-05T14:03:49.598000+00:00",
        "attachments": null
    },
    {
        "author": "ryg9705",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!889118410254975008\u003e  Easiest way would be to use: https://remix.ethereum.org/ Then in the settings select as environment \"Injected Web3\" to use Metamask after adding the network to it with a simple click here: https://kiln.themerge.dev/",
        "created_at": "2022-04-05T16:01:47.722000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "what prysm branch should I use for goerli shadow fork merge testing",
        "created_at": "2022-04-05T20:28:30.442000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "and is master okay for geth",
        "created_at": "2022-04-05T20:28:35.042000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "and are the flags to run geth with the same as with kiln other than --goerli instead of the networkid ?  feel like must be missing some config or maybe wrong branch",
        "created_at": "2022-04-05T20:38:07.576000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I'm using this image: gcr.io/prysmaticlabs/prysm/beacon-chain:kiln-b9ffd6\nI guess its from their kiln branch?\n\nYou wouldn't use a `--goerli` flag, but rather specify a custom network config: \n```\n  --chain-config-file=\"/custom_config_data/config.yaml\"\n  --genesis-state=\"/custom_config_data/genesis.ssz\"\n```",
        "created_at": "2022-04-05T20:45:56.307000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "ty",
        "created_at": "2022-04-05T20:47:41.488000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "ah right crap was forgetting in initial step reading the directions lol.",
        "created_at": "2022-04-05T20:49:11.403000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "was talking about geth -- I did the geth init genesis.json (which is a step I was forgetting...) and then ran it just like the kiln instructions except from geth master branch (not sure if that will be an issue) and with -networkid=5",
        "created_at": "2022-04-05T21:04:33.073000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "looks good for now",
        "created_at": "2022-04-05T21:12:06.182000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Ah ya, geth master should be fine :D",
        "created_at": "2022-04-05T21:19:51.009000+00:00",
        "attachments": null
    },
    {
        "author": "tlou8882",
        "category": "Testing",
        "parent": "",
        "content": "thank you \u003c@!134118181710200833\u003e ! i will try that",
        "created_at": "2022-04-05T22:52:29.994000+00:00",
        "attachments": null
    }
]