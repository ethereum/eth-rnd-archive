[
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e Before shutting down, could you run \n`eth.getBalance()` and `eth.getNonce()` for these accounts: `0xf97e180c050e5ab072211ad2c213eb5aee4df134, 0xa5317ba28c72ea9f6f95166d9bcf750ff3ec1364`",
        "created_at": "2022-05-09T09:42:21.478000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Then you could shutdown the node and run \n`geth snapshot verify-state`",
        "created_at": "2022-05-09T09:42:39.841000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "not `eth.getNonce()`, but `eth.getTransactionCount()`. And also `eth.getBlock(\"latest\")` so we know exactly where the node is at",
        "created_at": "2022-05-09T09:48:57.977000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "```\neth.getBlock(\"latest\")\neth.getBalance(\"0xf97e180c050e5ab072211ad2c213eb5aee4df134\")\neth.getTransactionCount(\"0xf97e180c050e5ab072211ad2c213eb5aee4df134\")\neth.getBalance(\"0xa5317ba28c72ea9f6f95166d9bcf750ff3ec1364\")\neth.getTransactionCount(\"0xa5317ba28c72ea9f6f95166d9bcf750ff3ec1364\")\neth.getBalance(\"0x0000000000000000000000000000000000000000\")\n```\nEdited to add `0x00..`",
        "created_at": "2022-05-09T09:50:20.245000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "returned values:  https://nopaste.net/zCra03czwP",
        "created_at": "2022-05-09T11:57:19.722000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "``geth snapshot verify-state`` returns an error:\nhttps://nopaste.net/1xY3NznvCe",
        "created_at": "2022-05-09T12:01:32.977000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "could you also run `geth snapshot traverse-state`",
        "created_at": "2022-05-09T12:02:32.285000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Do you have unclean shutdowns?",
        "created_at": "2022-05-09T12:02:55.709000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Please do `eth.getBlock(\"402572\", true)` also",
        "created_at": "2022-05-09T12:03:58.028000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "So we can see which `402572` your node ended up using",
        "created_at": "2022-05-09T12:04:11.639000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "traverse-state:\nhttps://nopaste.net/gmxw7EGtbB\n\nno unclean shutdowns... VM has an uptime of 80 days now... so it hasn't been restarted",
        "created_at": "2022-05-09T12:06:05.371000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "stopped the geth node now..  shall i start it again for this?",
        "created_at": "2022-05-09T12:06:40.288000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Wait a minute...",
        "created_at": "2022-05-09T12:07:25.950000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "So there is data missing, both in trie and snapshot. I'm starting to suspect that there's something wonky with the disk. But it's strange that you haven't seen  any error messages from leveldb about checksums being wrong, in that case",
        "created_at": "2022-05-09T12:09:29.213000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Did it ever go out of disk, by any chance?",
        "created_at": "2022-05-09T12:09:38.927000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, there is enough space left on the disk (64G of 300G in use).\nDisk is a NVMe SSD, that is used for prater / mainnnet, too.\nI don't see any issues on the prater / mainnet nodes.",
        "created_at": "2022-05-09T12:12:11.264000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "(2x2TB NVMe SSDs on RAID 1...)",
        "created_at": "2022-05-09T12:13:15.297000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "instead of this, you can do `geth db get 0x68000000000006248c6e`, which should spit out the hash for that header/block",
        "created_at": "2022-05-09T12:15:39.210000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "``key 0x68000000000006248c6e: 0xe9899d34b8ac30ae0151bb55a4b73bacce72da66e04ecf6a474e7b9ac97e9bd1``",
        "created_at": "2022-05-09T12:16:22.361000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Funky. `0xe9899d34b8ac30ae0151bb55a4b73bacce72da66e04ecf6a474e7b9ac97e9bd1` doesn't exist on the kiln explorer, so it must have went off on some sidechain",
        "created_at": "2022-05-09T12:19:06.078000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "In a classic PoW testnet, that's not so strange, but I'm not sure how that can happen on a merged testnet. It means some proposer(s) also rejected the `0xfe52f07bd961987f7dc8666dbd24e3056ce53e6e7787250fd9a4c2ce7ce41b3b`, no? cc \u003c@360491619402776577\u003e",
        "created_at": "2022-05-09T12:20:43.949000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I guess",
        "created_at": "2022-05-09T12:23:21.578000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Looks like there is a participation rate of ~ 90% on Kiln atm: https://beaconchain.kiln.themerge.dev/",
        "created_at": "2022-05-09T12:24:03.262000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Kiln isn't _that_ large. Is it possible for us to either download the chaindata folder (we don't need the ancient dir though), or get access to rpc which has `debug` enabled?",
        "created_at": "2022-05-09T12:27:02.826000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "yea, sure, both is possible ğŸ˜„  what do you prefer?",
        "created_at": "2022-05-09T12:28:02.324000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "datadir/geth/chaindata  size is 1.3G",
        "created_at": "2022-05-09T12:29:04.064000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "https://beaconchain.kiln.themerge.dev/block/401042",
        "created_at": "2022-05-09T12:30:04.115000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "If it's only 1.3G, then my preferrred option would be download. How should we do it -- one of us ssh in, or can you put it on some temporary http  share?",
        "created_at": "2022-05-09T12:32:41.512000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "I'm just packing it into a tar gz and will move it to a webserver ğŸ‘  give me a minute or two ğŸ˜‰",
        "created_at": "2022-05-09T12:33:26.769000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "Thanks a lot, it's very helpful when we're able to investigate these types of error in depth! ğŸ™",
        "created_at": "2022-05-09T12:34:13.983000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Yea, sure ğŸ‘  Thats what a testnet is for - so hopefully such things don't happen on mainnet ğŸ˜‰",
        "created_at": "2022-05-09T12:35:23.195000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "http://135.181.140.168/geth-datadir.tar.gz\nhope there isn't anything sensitive inside ğŸ˜„",
        "created_at": "2022-05-09T12:39:58.244000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "tell me when you got it then I'll remove it from the webserver again ğŸ˜‰",
        "created_at": "2022-05-09T12:42:31.761000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Do you guys know what was the CL block that included that payload? prysm does not prune non-canonical blocks, perhaps you can grab it from such a node",
        "created_at": "2022-05-09T12:48:55.840000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "https://beaconchain.kiln.themerge.dev/block/401042 this is the block that contains the canonical el block",
        "created_at": "2022-05-09T12:50:48.808000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I meant `0xe9899d34b8ac30ae0151bb55a4b73bacce72da66e04ecf6a474e7b9ac97e9bd1`",
        "created_at": "2022-05-09T12:51:45.264000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "I have it",
        "created_at": "2022-05-09T12:54:15.378000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "I have to leave again. If you need anything more from the VM just tell me I'll add it this afternoon ğŸ˜‰",
        "created_at": "2022-05-09T13:04:11.934000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Circling back to this: should I raise an issue for besu on having a single port for both JSON-RPC and WS requests, or is this being tracked elsewhere?",
        "created_at": "2022-05-09T13:10:11.090000+00:00",
        "attachments": []
    },
    {
        "author": "suburbandad_",
        "category": "Testing",
        "parent": "",
        "content": "It looks like \u003c@219015859182632960\u003e already opened an issue for us:\nhttps://github.com/hyperledger/besu/issues/3619",
        "created_at": "2022-05-09T17:09:33.696000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, my geth node on goerli got stuck 3h ago, too. No error message, no crash.. It seems It's just not getting blocks anymore ğŸ˜®\nMaybe there's really something broken on hardware level (disk?)....",
        "created_at": "2022-05-09T18:24:16.935000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No goerli is down atm",
        "created_at": "2022-05-09T18:24:51.575000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "aah, great ğŸ¤£",
        "created_at": "2022-05-09T18:25:07.017000+00:00",
        "attachments": []
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "well not great,  but at least it wasn't me ğŸ˜…ğŸ˜…",
        "created_at": "2022-05-09T18:25:22.883000+00:00",
        "attachments": []
    }
]