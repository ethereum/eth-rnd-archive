[
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "I know most of the focus is on the goerli shadow fork now, but just to give an update, I'm now down to only two client pairs that are not fully synced and attesting on Kiln, and those are lighthouse-ethereumjs and nimbus-ethereumjs.  lighthouse-ethereumjs gets stuck at slot 62106 and nimbus-ethereumjs gets stuck at 36031.",
        "created_at": "2022-03-28T03:31:53.514000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "investigating nimbus-ethereumjs",
        "created_at": "2022-03-28T08:13:44.239000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "checking LH now",
        "created_at": "2022-03-28T08:48:19.619000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "It looks like nimbus is still progressing, though very slowly and with a lot of rewinds.  It's now hopping between 36767 and 36703.",
        "created_at": "2022-03-28T09:26:31.118000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!476250636548308992\u003e \u003c@!491624610215886849\u003e, seems like both LH\u0026Prysm are only seeing `engine_exchangeTransitionConfigurationV1` messages on geth and no fcu's and eventually lists the eth1 node as still syncing/too far behind. \n\nJust wanted to tag you two since you're both debugging seemingly similar issues",
        "created_at": "2022-03-28T11:26:47.116000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "seeing similar rewinding begin as soon as merge happens",
        "created_at": "2022-03-28T11:30:37.653000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "root cause appears to be that \n```INF 2022-03-28 11:28:05.710+00:00 newExecutionPayload failed                 msg=\"{\\\"code\\\":-32601,\\\"message\\\":\\\"Method not found\\\"}\"  peers: 17 ‚ùØ finalized: 4db6b255:909 ‚ùØ head: 176310da:911:17 ‚ùØ time: 3800:15 (121615) ‚ùØ sync: 00h00m (23.92%) 1537228672809129216.0000```",
        "created_at": "2022-03-28T11:31:04.331000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "BTW we found and fixed (not merged yet) two issues in geth, one where we would panic during sync",
        "created_at": "2022-03-28T11:31:44.847000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "but I'm not sure I've configured EthereumJS properly -- that error suggests it just doesn't have the `engine_` namespace available in that config. used the kiln launchpad setup",
        "created_at": "2022-03-28T11:31:53.641000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "`newExecutionPayload`?",
        "created_at": "2022-03-28T11:32:00.397000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "is it merged to geth master?",
        "created_at": "2022-03-28T11:32:15.473000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "that's the error message, presumably it's using `newPayload` though, should fix the error message",
        "created_at": "2022-03-28T11:32:29.841000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "no",
        "created_at": "2022-03-28T11:32:30.385000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "We are not sure about the root cause yet, thus don't want to merge the fix to hastly",
        "created_at": "2022-03-28T11:32:58.337000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "yeah having some difficulties with syncing prysm",
        "created_at": "2022-03-28T11:35:10.798000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!474451342094499868\u003e the JWT auth isn't interoping for me. I'm getting a 401 Unauthorized from EthereumJS",
        "created_at": "2022-03-28T11:49:22.332000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "checking the lighthouse logs, its looking like all non `exchangeTransitionConfig` engine api calls to geth are timing out. Consequently, LH block production routine is erroring because getPayload calls are failing",
        "created_at": "2022-03-28T13:33:30.172000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!360491619402776577\u003e any idea why engine api calls to geth are timing out?",
        "created_at": "2022-03-28T13:40:54.455000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The node is working on stuff pretty hard probably and cls hammer the node with lots and lots of calls, so timeouts should be expected. Thats why I wanted to have shadow forks asap, as we can see how the performance post merge looks like. I am currently trying to sync a lh-geth combo, so I'll take a look at uts performance",
        "created_at": "2022-03-28T14:11:54.934000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Whats the timeout btw?",
        "created_at": "2022-03-28T14:12:12.781000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "2 secs for getPayload and newPayload, 500ms for fcu",
        "created_at": "2022-03-28T14:13:16.153000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Get payload should not timeout (just a lookup in a map) fcu might execute blocks and sethead",
        "created_at": "2022-03-28T14:15:08.392000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "So 500ms are way to short",
        "created_at": "2022-03-28T14:15:21.007000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "2 sec should be ok for new payload, weird that it times out",
        "created_at": "2022-03-28T14:15:45.413000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "haven't seen newPayload time out actually because haven't received a block since forever. I'll increase fcu timeout",
        "created_at": "2022-03-28T14:16:52.030000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Fcu also needs to construct the block which can take 2sec",
        "created_at": "2022-03-28T14:17:28.132000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "even in the canonical chain if it has the parent?",
        "created_at": "2022-03-28T14:18:26.087000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Block construction is currently synchronous, might make it async in the future (not really relevant though)",
        "created_at": "2022-03-28T14:18:26.273000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yes",
        "created_at": "2022-03-28T14:18:37.949000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "You need to apply all transactions",
        "created_at": "2022-03-28T14:18:47.431000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "It is kinda io constraint. And since cl clients are using **alot** of io, 2 secs are not unheard of (especially on smaller machines)",
        "created_at": "2022-03-28T14:20:24.347000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "The existing shadow fork seems to be just what we needed to find edge cases, but I feel like its current state + resource constraints on every node isn't letting us actually patch fixes.\n\nPerhaps we can relaunch it tomorrow(~this time?) if there are enough patches put in?\n\nI'd say we can vote on the following options:\n1. Destroy existing shadow fork, Relaunch tomorrow with patched versions + more resources(8c/16gb)\n2. Leave existing net up, Launch new shadow fork tomorrow with patched versions + more resources(8c/16gb)\n3. We need more time, do nothing and redo poll on Wednesday - use the existing net to patch more issues. Perhaps a relaunch on thursday.",
        "created_at": "2022-03-28T14:26:35.914000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Guys \u003c@!360491619402776577\u003e \u003c@!425572898787426305\u003e. Correct me if I'm wrong, but I think EL shouldn't do it in this way. IMO, EL shouldn't block fcU for full block preparation, because of the same reasons as for getPayload. If CL calls fcU and getPayload very quickly we should return an empty block. That is my spec understanding, so it will be good to confirm with you.",
        "created_at": "2022-03-28T14:34:46.453000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Yes, you're right. EL should respond to `fcU` and start payload build process asynchronously.",
        "created_at": "2022-03-28T15:01:19.590000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yes, thats what the spec says :) i just didn't implement it that way",
        "created_at": "2022-03-28T15:01:32.898000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Ok, ok thx! :)üëç üôè",
        "created_at": "2022-03-28T15:06:28.327000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "I run with auth disabled.\n`npm run-script client:start -- --datadir ~/eth/kiln-nimbus-ethereumjs --gethGenesis ../../../genesis.json --saveReceipts --rpc --rpcport=8591 --ws --wsPort=8591 --bootnodes=165.232.180.230:30303 --port=13479 --extIP \"1.2.3.4\" --multiaddrs=/ip4/127.0.0.1/tcp/50585/ws --rpcEngine --rpcEnginePort=8591 --rpcEngineAuth=false --logging debug --rpcDebug`",
        "created_at": "2022-03-28T16:24:16.678000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "re-linking for visibility, opinions and votes",
        "created_at": "2022-03-28T18:00:31.332000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "voted for (1) because once fixed, semi-arbitrary JVM memory limitations aren't that interesting",
        "created_at": "2022-03-28T18:05:48.767000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yea I'd tend to agree. The only reason i'd see to keep the existing one around is if we have unanswered questions.",
        "created_at": "2022-03-28T18:12:01.674000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Got my first block proposal with prysm-ethereumjs.\nhttps://beaconchain.kiln.themerge.dev/block/a6bae13238d3ad6791da5cb69cb8e75d16724f0e89e10fcf89f12428384a71a6",
        "created_at": "2022-03-28T22:59:16.430000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!360491619402776577\u003e, we've increased the timeout for newPayload and fcU to 6 seconds to give some headroom. I figure anything above that is interesting and worth knowing about now. It's running through our CI now, will be in unstable in 1-2hrs.",
        "created_at": "2022-03-28T23:32:29.308000+00:00",
        "attachments": null
    }
]