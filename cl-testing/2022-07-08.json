[
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Invalid block hash in prysm-besu\n```\n2022-07-08 12:31:48.385-04:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | New payload: number: 12552175, hash: 0x1ca8224f084e91262b69fa53906b1b4c312435b2f8c2697dab10f30526ea2411, parentHash: 0xfdaffa571f8e8bb25f4e9ea84b85d5cfa778ebe48f3f7b600bf425b586e5ef93, latestValidHash: null, status: INVALID_BLOCK_HASH\n```\n```\n[2022-07-08 12:31:48] ERROR sync: Could not handle p2p pubsub error=could not verify new payload: received an INVALID_BLOCK_HASH payload from execution engine\ncould not process block\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).ReceiveBlock\n        beacon-chain/blockchain/receive_block.go:46\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).beaconBlockSubscriber\n        beacon-chain/sync/subscriber_beacon_blocks.go:32\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).subscribeWithBase.func1\n        beacon-chain/sync/subscriber.go:190\nruntime.goexit\n        GOROOT/src/runtime/asm_amd64.s:1571 topic=/eth2/3cfa3bac/beacon_block/ssz_snappy\n```",
        "created_at": "2022-07-08T16:34:19.844000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "What network \u003c@474451342094499868\u003e ?",
        "created_at": "2022-07-08T16:35:30.744000+00:00",
        "attachments": []
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "ropsten",
        "created_at": "2022-07-08T16:35:36.845000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "Could this be caused by the Besu DB issue that was mentioned on ACD today?",
        "created_at": "2022-07-08T16:36:00.560000+00:00",
        "attachments": []
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Hey Folks, have a question of the CLs: what is currently being used for `SafeBlockHash` ? I thought I would find the last block of the justified epoch, but I'm getting some other hash",
        "created_at": "2022-07-08T17:43:36.557000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "try the first block?",
        "created_at": "2022-07-08T18:14:53.884000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "the way we assemble checkpoints of epoch boundary blocks it is the first block of an epoch, not the last",
        "created_at": "2022-07-08T18:15:21.799000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "i also am not sure the status of `safe block hash == justified`",
        "created_at": "2022-07-08T18:15:51.849000+00:00",
        "attachments": []
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "yes, sorry, it's not the last block (I assumed it was), it's the execution payload on the roots returned by `/eth/v1/beacon/states/head/finality_checkpoints`",
        "created_at": "2022-07-08T18:17:55.428000+00:00",
        "attachments": []
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "then compare `finalized` to `FinalizedBlockHash`, and `current_justified` to `SafeBlockHash`",
        "created_at": "2022-07-08T18:18:42.727000+00:00",
        "attachments": []
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "it's working for Teku for example, but not for Lighthouse",
        "created_at": "2022-07-08T18:19:08.808000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "its a minor gotcha in the protocol ðŸ˜…",
        "created_at": "2022-07-08T18:20:36.800000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "yeah im not sure all clients have implemented the `current_justified` for that field",
        "created_at": "2022-07-08T18:21:09.698000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "some may have but i can't recall if we landed on this being a blocker for the merge or not",
        "created_at": "2022-07-08T18:21:26.910000+00:00",
        "attachments": []
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "I understand, it's not set in the spec so I think I cannot verify this in the tests, finalized is working ok though",
        "created_at": "2022-07-08T18:23:37.232000+00:00",
        "attachments": []
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "It just says `the \"safe\" block hash of the canonical chain under certain synchrony and honesty assumptions` ðŸ¤”",
        "created_at": "2022-07-08T18:25:33.537000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "yeah there is some research into what these assumptions should be to provide pareto-style re-org safety\n\nin the mean time i think think we were either gonna return an empty hash or just the latest justified hash",
        "created_at": "2022-07-08T18:47:33.321000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "There were some discussions about this a while ago and Mikhail pointed out that whatever conditions we choose, they will at the very minimum assume synchrony and honesty assumptions that were the initial case in the safe head idea, so that the justified checkpoint could not be reorged. So we return the current justified checkpoint (although internally I tried to get to return finalized here instead)",
        "created_at": "2022-07-08T18:59:46.784000+00:00",
        "attachments": []
    }
]