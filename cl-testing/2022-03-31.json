[
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "teku looking much better now.",
        "created_at": "2022-03-31T00:42:15.356000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "25c4771e3c9e02e29e2888319dfd24bef4fdba0e37c3d67237d4e55111785301"
            }
        ]
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "lighthouse is still throwing a lot of errors and I just happened to catch it missing a proposal.",
        "created_at": "2022-03-31T00:51:25.465000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "b1f3d2fcff66a67bec937fb349e8b84ea582ff7a09c390d4be50d943c8cfed50"
            }
        ]
    },
    {
        "author": "r.alxz",
        "category": "Testing",
        "parent": "",
        "content": "ethereumjs",
        "created_at": "2022-03-31T01:07:03.409000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "the errors are not serious, i'm working on removing them now. basically, our old \"eth1\" service is still complaining when the EL is still syncing. after the merge it needs to be quiet because it's our job to sync it and there's no point complaining to the users.\n\nit's not missing a proposal here, it's missing a proposal *preparation* message going from VC-\u003eBN because the BN hasn't seen a new block for 36 slots. the VC stops doing non-critical things when it thinks the BN isn't healthy, this avoids burdening it when it might be resource constrained.",
        "created_at": "2022-03-31T04:32:18.487000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "which EE is connected to the BN in those examples? from those \"Malformed response...\" messages it looks like the EE is deviating from the API",
        "created_at": "2022-03-31T04:33:31.506000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "specifically, `latestValidHash` should always be `null` when `SYNCING` is returned",
        "created_at": "2022-03-31T04:36:51.064000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "ethereumjs.  Clearing the lighthouse db and resyncing got rid of the `Malformed response` messages, but as soon as it's fully synced, it gets stuck at\n```\nMar 31 05:15:35.805 ERRO Failed to update eth1 cache             error: Failed to update eth1 deposit cache: \"FailedToInsertDeposit(NonConsecutive { log_index: 3075, expected: 3001 })\", retry_millis: 60000, service: eth1_rpc\n```",
        "created_at": "2022-03-31T05:15:46.059000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I would guess that the \"Malformed response...\" message stopped because ethjs stopped syncing and isn't giving us the same message again. I could be wrong though.\n\nThat `NonConsecutive` logs message indicates that either:\n\n- ethjs has a gap in it's deposit logs (i.e., it's missing some logs from the history of the chain). we used to see this a bit with nethermind, the had to fix it on their end.\n- there was an execution-chain re-org deeper than the protocol allows for and there are two conflicting versions of the deposit contract logs.",
        "created_at": "2022-03-31T05:18:29.782000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I'd suggest restarting LH with `--eth1-purge-cache` and seeing if that `NonConsecutive` log comes back. If it comes back (without re-syncing ethjs) then that would indicate an issue with the consistency of logs in ethjs.",
        "created_at": "2022-03-31T05:19:50.027000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Tried this and got the same error.",
        "created_at": "2022-03-31T05:21:47.316000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Hmm... I think it would be worth ethereumjs checking to ensure they have *all* of the deposit contract logs (i.e. the LOG opcode) available, with no gaps. That might involve grabbing a copy of your DB.\n\nI would also suggest they ensure that a SYNCING response always has `null` for `latestValidHash`.We'll accept the response and ignore the LVH if it's present, but we added a warning log to try and help find any inconsistencies between EEs.\n\nI'll tag \u003c@!263093996044156938\u003e since he's on the ethereumjs team ðŸ™‚",
        "created_at": "2022-03-31T05:27:21.142000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "He's aware.  Further discussion in the thread up above.",
        "created_at": "2022-03-31T05:27:57.840000+00:00",
        "attachments": null
    }
]