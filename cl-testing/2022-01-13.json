[
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Most of my client pairs are back on track now, but lighthouse-nethermind is still showing unverified even after clearing both databases and syncing from scratch.",
        "created_at": "2022-01-13T04:49:53.310000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "and prysm-nethermind is now throwing\n`ERROR powchain: Could not process deposit log: received incorrect merkle index: wanted 12 but got 13`",
        "created_at": "2022-01-13T04:54:54.032000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "same here with lighthouse-nethermind and lighthouse-besu. it is stuck at \n`Jan 13 08:30:42.001 WARN Syncing eth1 block cache                est_blocks_remaining: initializing deposits, service: slot_notifier`\nNoticed this warning a few days before we started finalizing so I think it broke before that. But it was displaying a number in the thousands for me for est_blocks_remaining. But doing a fresh sync (on both EL and CL) it got stuck at initializing deposits.\n\nlighthouse-geth works for you?",
        "created_at": "2022-01-13T08:41:15.973000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "also \u003c@!340345049063882753\u003e i tried attaching my lighthouse validator client to teku, while lighthouse beacon was giving me trouble. it is attesting fine, but fails to produce blocks. Does this generally work?\n\n`Jan 13 05:21:48.066 CRIT Error whilst producing block            message: All endpoints failed http://localhost:64002/ =\u003e RequestFailed(\"Error from beacon node when producing block: ServerMessage(ErrorMessage { code: 500, message: \\\"An u\nnexpected error occurred\\\", stacktraces: [] })\"), service: block`",
        "created_at": "2022-01-13T08:52:35.397000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "teku.txt",
                "content": "dba88d14799e4810a994e18cb0b4c7adbb8536731a2273aba69da845372bfd1f"
            }
        ]
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Looks like Teku wasn't able to get a payload ID that was suitable from the EL client.  Not entirely sure why but we tried to call `preparePayload` on the EL and return that but for some reason it still couldn't return one.  Not sure if there's more in the logs above that - it's quite a surprisingly complex bit of code to get all the interactions right which also means unfortunately it can be hard to give clear logging without upping the level to trace and being very noisy so we might not have a huge amount to go on.",
        "created_at": "2022-01-13T08:59:33.716000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "It might be that we hadn't yet been told by the lighthouse VC that it was running that validator and needed us to call preparePayload for it, or possibly an incompatibility in that REST API between us, I'm not sure what the state of standardisation for that new API is.",
        "created_at": "2022-01-13T09:01:44.155000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "nothing interesting above that. if it helps i can increase the loglevel, just tell me which one you need.",
        "created_at": "2022-01-13T09:14:42.768000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "hmm, debug level is probably enough to get a better idea of what teku is doing.",
        "created_at": "2022-01-13T09:40:55.821000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "My lighthouse-nethermind is also stuck at `initializing deposits`.  lighthouse-geth is fully synced and not throwing any warns or errors.",
        "created_at": "2022-01-13T09:42:04.568000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Though what I don't quite understand is that while there are no errors and lighthouse shows slot  ~200603 and verified, geth shows the chain head at ~151974 with both seeming to steadily increase at the same rate.",
        "created_at": "2022-01-13T09:46:50.578000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "I just double-checked my config to verify that it's not pointing at another eth1 endpoint too.",
        "created_at": "2022-01-13T09:51:05.746000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "even proposed a block 10 hours ago\nhttps://beaconchain.kintsugi.themerge.dev/block/c1f4a01a97cf496442ebc025e2d0190bb8a6c086809e9532dd7ba8d27280d42e",
        "created_at": "2022-01-13T09:53:34.585000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Not every slot is populated by a block. There can be slots without a block",
        "created_at": "2022-01-13T09:54:28.573000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "That's why theres a difference between geth and lighthouse",
        "created_at": "2022-01-13T09:54:44.456000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "Interesting. Just had a look at the lighthouse logfile. while running against besu it said\n`DEBG Eth1 cache sync status, ready: false`\nswitched to geth and it said\n`DEBG Eth1 cache sync status, ready: true`\nand synced the cache",
        "created_at": "2022-01-13T10:13:23.938000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "but i don't see any indication what the problem is",
        "created_at": "2022-01-13T10:13:50.572000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "ok teku is running with debug loglevel. i will get back to you when i (fail to) produce a block",
        "created_at": "2022-01-13T10:15:45.858000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "you should have a log like `CRIT Could not connect to a suitable eth1 node` on lighthouse which should indicate the problem on besu",
        "created_at": "2022-01-13T11:04:38.578000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "that is what i am seeing\n`Jan 13 08:47:46.022 WARN Eth1 endpoint is not synced, action: trying fallback, last_seen_block_unix_timestamp: 1641239676, endpoint: http://127.0.0.1:63003/, service: eth1_rpc, module: eth1::service:265\nJan 13 08:47:46.022 CRIT Could not connect to a suitable eth1 node. Please ensure that you have an eth1 http server running locally on http://localhost:8545 or specify one or more (remote) endpoints using `--eth1-endpoints \u003cCOMMA-SEPARATED-SERVER-ADDRESSES\u003e`. Also ensure that `eth` and `net` apis are enabled on the eth1 http server, warning: BLOCK PROPOSALS WILL FAIL WITHOUT VALID, SYNCED ETH1 CONNECTION, service: eth1_rpc, module: eth1::service:697\nJan 13 08:47:46.022 ERRO Failed to update eth1 cache, error: Failed to update Eth1 service: \"All fallback errored: http://127.0.0.1:63003/ =\u003e EndpointError(FarBehind)\", retry_millis: 60000, service: eth1_rpc, module: eth1::service:816`",
        "created_at": "2022-01-13T11:13:36.825000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!612776905380200459\u003e \u003c@!474451342094499868\u003e docker or building Nethermind from source code? could you DM me nethermind logs? ðŸ™‚",
        "created_at": "2022-01-13T13:53:34.649000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Testing",
        "parent": "",
        "content": "How robust the network is currently if one were to DOS the current proposer? As I think that's still known in advance?",
        "created_at": "2022-01-13T14:39:52.247000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "It is known in advance, for at any given time between `SLOTS_PER_EPOCH` and `2*SLOTS_PER_EPOCH` slots. It's a real concern -- at one point I saw it called the \"validator privacy\" problem. Don't know its current status though.",
        "created_at": "2022-01-13T14:44:41.285000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Testing",
        "parent": "",
        "content": "I assume Kintsugi is vulnerable to it?",
        "created_at": "2022-01-13T14:46:12.482000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yes, but you need to find out which pk corresponds to which IP",
        "created_at": "2022-01-13T14:49:44.143000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Testing",
        "parent": "",
        "content": "That doesn't hard like a super hard problem, I would assume they tend to maintain quite consistent IP's too",
        "created_at": "2022-01-13T14:51:33.770000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yup, testnets tend to be a lot more centralized and if you listen for long enough you'd be able to build a list of IPs and DoS them. This would be harder on mainnet, but not impossible. \n\nafaik this is in the works to remedy this problem? https://ethresear.ch/t/whisk-a-practical-shuffle-based-ssle-protocol-for-ethereum/11763",
        "created_at": "2022-01-13T14:58:15.608000+00:00",
        "attachments": null
    },
    {
        "author": "experience_",
        "category": "Testing",
        "parent": "",
        "content": "It's my understanding that Algorand already solves this particular problem, they have a system wherein validators *privately* compute a function to determine whether they are the current leaders.",
        "created_at": "2022-01-13T14:59:31.138000+00:00",
        "attachments": null
    },
    {
        "author": "experience_",
        "category": "Testing",
        "parent": "",
        "content": "So they are the first to know, and other nodes only become aware of it after the block is proposed.",
        "created_at": "2022-01-13T14:59:46.901000+00:00",
        "attachments": null
    },
    {
        "author": "experience_",
        "category": "Testing",
        "parent": "",
        "content": "Not sure if ETH researchers have looked into this implementation and evaluated it?",
        "created_at": "2022-01-13T15:00:10.389000+00:00",
        "attachments": null
    },
    {
        "author": "experience_",
        "category": "Testing",
        "parent": "",
        "content": "Because if there is some solution working and already deployed on another mainnet while having been running smoothly for a while, it seems that we might as well use it if possible instead of expending resources re-inventing another solution",
        "created_at": "2022-01-13T15:01:08.917000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Tagging \u003c@!862973562243252234\u003e  as he's probably the relevant person for this discussion",
        "created_at": "2022-01-13T15:03:06.419000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Testing",
        "parent": "",
        "content": "https://www.reddit.com/r/ethfinance/comments/rd1tmi/comment/hnzaii9/",
        "created_at": "2022-01-13T15:06:57.135000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Testing",
        "parent": "",
        "content": "Post by Justin Drake on that question.",
        "created_at": "2022-01-13T15:07:18.051000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Testing",
        "parent": "",
        "content": "It sounds bit risky to me to move to PoS without that defence",
        "created_at": "2022-01-13T15:13:41.492000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Testing",
        "parent": "",
        "content": "I guess it wouldn't add that much to demostrate the attack on the testnet?",
        "created_at": "2022-01-13T15:14:20.120000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Another mitigation could be if the proposals to switch to fewer slots per epoch, to finalize more often, go through. The issue now is that proposers (and everything else, more or less) get determined based on an epoch-wide shuffling. Smaller epochs =\u003e less lookahead or preparation time to find any given proposer. Not up to almost 13 minutes, but potentially a small fraction of that.",
        "created_at": "2022-01-13T15:56:13.796000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(Those affect the whole protocol balance, so it's not just a question of reducing `SLOTS_PER_EPOCH` in isolation)",
        "created_at": "2022-01-13T15:56:48.549000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Testing",
        "parent": "",
        "content": "Or hope for the best after the minimal viable merge, and otherwise use ddos protection if things do go south? For home stakers I hope a VPN like mullvad will suffice, and most hosted solutions will already have anti-ddos in place.",
        "created_at": "2022-01-13T16:00:20.731000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Partly, it's just not that valuable an attack, against one proposer in isolation. To undermine liveness, one has to be able to keep retargeting it, and consistently knock out proposer after proposer's ability to propose.",
        "created_at": "2022-01-13T16:01:20.682000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "It'd be useful for efforts such as MEV, or other scenarios where one wants to allow only specific proposers to do so, but there should be so many that it'd amount to something similar -- with almost 300k validators, even an attacker with thousands of validators would have to be pretty aggressive in their DoSes.",
        "created_at": "2022-01-13T16:03:12.052000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Testing",
        "parent": "",
        "content": "300k validators are not running behind 300k ips but way less",
        "created_at": "2022-01-13T16:17:48.981000+00:00",
        "attachments": null
    }
]