[
    {
        "author": "phi.go",
        "category": "Testing",
        "parent": "",
        "content": "i've just got geth and lighthouse up and running and some of the pre-requisites (https://notes.ethereum.org/@launchpad/kiln) are a bit unclear, or it's not immediately clear how to install them. I'm on ubuntu and the lighthouse make failed a few times - firstly because it didn't like the apt-installed rustc (`curl https://sh.rustup.rs -sSf | sh` worked fine) and also you need to install clang",
        "created_at": "2022-03-24T00:12:45.791000+00:00",
        "attachments": null
    },
    {
        "author": "phi.go",
        "category": "Testing",
        "parent": "",
        "content": "oh, and go for the geth build",
        "created_at": "2022-03-24T00:13:57.817000+00:00",
        "attachments": null
    },
    {
        "author": "phi.go",
        "category": "Testing",
        "parent": "",
        "content": "idk if it's in the package manager but downloading the tar.gz worked",
        "created_at": "2022-03-24T00:14:33.834000+00:00",
        "attachments": null
    },
    {
        "author": "phi.go",
        "category": "Testing",
        "parent": "",
        "content": "i appreciate it's difficult to cater for every os though",
        "created_at": "2022-03-24T00:15:23.106000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "yeah you need to install clang. maybe the webpage linking to https://lighthouse-book.sigmaprime.io/installation-source.html#dependencies might be easier/more complete",
        "created_at": "2022-03-24T00:54:33.414000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "I think on Ubuntu if you have the `build-essential` metapackage then you only need clang (and rust of course) on top of it to build Lighthouse.",
        "created_at": "2022-03-24T00:55:39.371000+00:00",
        "attachments": null
    },
    {
        "author": "dv8s",
        "category": "Testing",
        "parent": "",
        "content": "It does mention Go being required for geth, I'm sure you could get it successfully installed variety of ways.",
        "created_at": "2022-03-24T00:57:51.522000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "Why is the shadow fork prior to TTD?  It feels like the shadow fork should occur *at* TTD, but the chain remains in sync up until that point.",
        "created_at": "2022-03-24T06:04:58.256000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "You can create a tiny little bridge app that just ports transactions from mainnet to shadow-mainnet.",
        "created_at": "2022-03-24T06:06:30.085000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "So both production client and shadow client would follow the same chain up to TTD, then the shadow client and production clients would split off at that point into separate networks.  You have a bridge app that ports every pending transaction it sees from the production network over to the shadow network from then on.",
        "created_at": "2022-03-24T06:08:44.868000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "On mainnet, I suspect state will diverge relatively quickly because of flashbots (these transactions don't show up in pending pool and they execute out of order so shadow network would end up with different AMM state, which would likely result in failed swaps pretty quickly across the board as prices diverge).",
        "created_at": "2022-03-24T06:09:52.699000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "You're right, the graphic is just a bit misleading",
        "created_at": "2022-03-24T06:20:28.213000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yes, I wanted to create a node that can be on two forkid's. But that is not that easy and I had a lot of other stuff to do.\nBut we will probably create something like this soon",
        "created_at": "2022-03-24T06:21:33.633000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "I don't think a custom client is required.  Just an app that receives pending pool over JSON-RPC from mainnet and submits all of those transactions to shadow-mainnet over JSON-RPC.",
        "created_at": "2022-03-24T06:22:07.799000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "The only requirement is that the chain ID is the same for mainnet and shadow-mainnet.",
        "created_at": "2022-03-24T06:22:28.508000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "Script could just be a little node/python app.",
        "created_at": "2022-03-24T06:22:38.811000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Kintusgi will be deprecated in a few hours, last chance to pay your respects ðŸ™‚",
        "created_at": "2022-03-24T08:37:27.944000+00:00",
        "attachments": null
    },
    {
        "author": "aaron7674",
        "category": "Testing",
        "parent": "",
        "content": "If I'm already running mainnet validators and EL node behind my router, can I help testing with the merge or will I have problems with port forwarding?",
        "created_at": "2022-03-24T09:25:34.994000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Shadow fork should be happening in the next hour or so ðŸ˜„\nLinks to explorers to see how things go are linked in the message",
        "created_at": "2022-03-24T12:29:58.796000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "You should be able to run multiple nodes in the same network ðŸ™‚",
        "created_at": "2022-03-24T12:30:19.086000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "test goerli shadow fork with lodestar: https://github.com/ChainSafe/lodestar/pull/3870",
        "created_at": "2022-03-24T13:31:10.688000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "question regarding merge-fuzz: when trying to run the differential fuzzer should it be hitting 2 EL clients that also have corresponding CLs, or is the fuzzer acting like a CL for each EL?",
        "created_at": "2022-03-24T14:26:53.754000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The fuzzer is acting like a cl for each el",
        "created_at": "2022-03-24T14:27:19.955000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "when you ran it recently and reported a geth/besu failure, were both of them setup on kiln?",
        "created_at": "2022-03-24T14:28:32.920000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "They were both setup on the same genesis (not kiln)",
        "created_at": "2022-03-24T14:29:50.091000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "And the issue is that besu allows for block.timestamp == parent.timestamp via fcu which all other clients forbid",
        "created_at": "2022-03-24T14:30:46.526000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "yeah, i fixed that. trying to verify. can you send me that genesis?",
        "created_at": "2022-03-24T14:31:47.751000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Also I kept thinking about it and the non-differential fuzzer did not crash. This means that besu might accept blocks where block.timestamp == parent.timestamp via newPayload",
        "created_at": "2022-03-24T14:31:49.190000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "now that is interesting because the check was not in newPayload, so I added it there",
        "created_at": "2022-03-24T14:33:25.435000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n{\n\"config\": {\n\"chainId\":1,\n\"homesteadBlock\":0,\n\"eip150Block\":0,\n\"eip155Block\":0,\n\"eip158Block\":0,\n\"byzantiumBlock\":0,\n\"constantinopleBlock\":0,\n\"petersburgBlock\":0,\n\"istanbulBlock\":0,\n\"muirGlacierBlock\":0,\n\"berlinBlock\":0,\n\"londonBlock\":0,\n\"clique\": {\n\"blockperiodseconds\": 5,\n\"epochlength\": 30000\n},\n\"terminalTotalDifficulty\":0\n},\n\"nonce\":\"0x42\",\n\"timestamp\":\"0x0\",\n\"extraData\":\"0x0000000000000000000000000000000000000000000000000000000000000000a94f5374fce5edbc8e2a8697c15331677e6ebf0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\n\"gasLimit\":\"0x1C9C380\",\n\"difficulty\":\"0x400000000\",\n\"mixHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\n\"coinbase\":\"0x0000000000000000000000000000000000000000\",\n\"alloc\":{\n\"0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b\":{\"balance\":\"0x6d6172697573766477000000\"} \n},\n\"number\":\"0x0\",\n\"gasUsed\":\"0x0\",\n\"parentHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\n\"baseFeePerGas\":\"0x7\"\n}\n```\nThis is the geth genesis, the besu genesis was very very similar iirc",
        "created_at": "2022-03-24T14:35:15.435000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "thx, can port that",
        "created_at": "2022-03-24T14:35:47.357000+00:00",
        "attachments": null
    },
    {
        "author": "andrew051894",
        "category": "Testing",
        "parent": "",
        "content": "Hi, has the Goerli Shadow Fork happened? Was it successful?",
        "created_at": "2022-03-24T15:21:10.147000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Hasn't happened yet. There's like ~4400 difficulty left and goerli fluctuates between 1\u00262 difficulty per block. Unfortunately its been 1 more often than 2 so that put off our timing.",
        "created_at": "2022-03-24T15:45:20.129000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n\u003e 9692860 - eth.getBlock(\"latest\").totalDifficulty\n4444\n```\ngeth console ftw",
        "created_at": "2022-03-24T15:48:12.814000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "how is the fuzzer supposed to get a jwt secret for authenticating to the engine api?",
        "created_at": "2022-03-24T17:27:02.936000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "It can't, can only be used on the unauthenticated atm",
        "created_at": "2022-03-24T17:27:39.427000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "welp, that explains besus failure then. we only have authenticated engine api",
        "created_at": "2022-03-24T17:28:10.258000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Are you sure? It worked when I tested it",
        "created_at": "2022-03-24T17:31:57.028000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I might have used an old version though...",
        "created_at": "2022-03-24T17:32:25.729000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "commit 0d182b80ae629711ddaff9ad4d0e3f5fe68a7a7d (HEAD -\u003e main, origin/main, origin/HEAD)\nAuthor: matkt \u003ckarim.t2am@gmail.com\u003e\nDate:   Tue Mar 22 12:21:07 2022 +0100",
        "created_at": "2022-03-24T17:32:57.912000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Not that old",
        "created_at": "2022-03-24T17:33:15.737000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "ðŸ¤”",
        "created_at": "2022-03-24T17:33:17.658000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "which fuzz function was that?",
        "created_at": "2022-03-24T17:33:40.264000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "FuzzRandom for fuzzing a single client and FuzzDifferential for multiple",
        "created_at": "2022-03-24T17:39:40.548000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "merge-fuzz halp",
        "created_at": "2022-03-24T18:11:16.789000+00:00",
        "attachments": null
    },
    {
        "author": "a35u",
        "category": "Testing",
        "parent": "",
        "content": "anyone know why the kiln beacon explorer is missing a bunch of random blocks right after the merge but I can query them from the LH api? for example: https://beaconchain.kiln.themerge.dev/block/29151 vs \n```    \"root\": \"0xb50671cd259aba840135b54200c9727f456b11e32378ead14e7e7daec43d4b49\",\n    \"canonical\": true,\n    \"header\": {\n      \"message\": {\n        \"slot\": \"29151\",\n        \"proposer_index\": \"94022\",\n        \"parent_root\": \"0x38548940e7fb08579b5ae46be764c9a3db6aba275330658cd27771c55c4c463f\",\n        \"state_root\": \"0x73a42480576e340333cc4e9cb4d78297187ca4b7e7002bd372c07575a2301378\",\n        \"body_root\": \"0x177a09cd4ee02aff8afc094f8306d8a52d6a13a942da071c54c1c9198ae616bc\"```",
        "created_at": "2022-03-24T23:52:04.193000+00:00",
        "attachments": null
    }
]