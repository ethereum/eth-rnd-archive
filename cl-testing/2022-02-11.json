[
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I've seen this error three times and in the three different occasions it was my fault: not initializing the chain, not enabling engine in the API, not running the right branch",
        "created_at": "2022-02-11T00:38:35.971000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Startup commands for geth and lodestar remain unchanged.  I've been using the master branch for lodestar.  Rebuilding and restarting lodestar after `git reset --hard HEAD~1` has yielded no additional errors in geth.  That said, it isn't doing anything at all yet because lodestar takes a painfully long time to peer.",
        "created_at": "2022-02-11T00:56:59.346000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "...even with `--enr.ip`, `--enr.udp`, and `--enr.tcp` explicitly defined and forwarded.",
        "created_at": "2022-02-11T00:59:28.439000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Hmm.  Still happening with the previous commit as well.  Both lodestar-geth and lodestar-besu are showing the same error.\n```\nFeb-10 21:03:16.289 [CHAIN]           error: Block error slot=403969, errCode=BLOCK_ERROR_EXECUTION_ERROR code=BLOCK_ERROR_EXECUTION_ERROR, errorMessage=JSON RPC error: Method not found, engine_newPayloadV1\nError: BLOCK_ERROR_EXECUTION_ERROR\n    at verifyBlockStateTransition (/home/seamonkey/Downloads/merge-testnets/kintsugi/lodestar/packages/lodestar/src/chain/blocks/verifyBlock.ts:265:15)\n    at runMicrotasks (\u003canonymous\u003e)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at verifyBlock (/home/seamonkey/Downloads/merge-testnets/kintsugi/lodestar/packages/lodestar/src/chain/blocks/verifyBlock.ts:46:40)\n    at processChainSegment (/home/seamonkey/Downloads/merge-testnets/kintsugi/lodestar/packages/lodestar/src/chain/blocks/index.ts:101:34)\n    at Timeout.JobItemQueue.runJob [as _onTimeout] (/home/seamonkey/Downloads/merge-testnets/kintsugi/lodestar/packages/lodestar/src/util/queue/itemQueue.ts:85:22)\n```",
        "created_at": "2022-02-11T02:03:51.695000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Wait, in Kintsugi you shouldn't be using `newPayload` you should be using `executePayloadV1` perhaps you're using kiln branches of the EL clients?",
        "created_at": "2022-02-11T02:56:02.218000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Or rather perhaps you're using kiln CL with Kintsugi EL",
        "created_at": "2022-02-11T03:06:02.436000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Looks like the kiln spec was recently merged into lodestar master, so I guess I have to stay on one prior for kintsugi.\nhttps://github.com/ChainSafe/lodestar/pull/3736",
        "created_at": "2022-02-11T04:21:51.687000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "I just noticed that the instructions for besu on the hackmd kintsugi doc use a `kintsugi` branch, which doesn't exist.  There is only `merge` and `merge-kintsugi-v3`.  I've been using `merge`.",
        "created_at": "2022-02-11T04:36:40.678000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Switching to `merge-kintsugi-v3` appears to have fixed most besu issues.  However, teku-besu is throwing \n```\n2022-02-11 00:00:12.279 ERROR - PLEASE FIX OR REPORT | Unexpected exception thrown for beaconchain-async-11\njava.util.concurrent.CompletionException: java.lang.IllegalArgumentException: Invalid remote response: -32000: Parent block not found\n```",
        "created_at": "2022-02-11T05:06:10.610000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "So teku is being too noisy about that (I may have managed to tone it down a bit but it's probably still not right) but I'm not sure why besu would be returning that - if it doesn't have the parent block it should trigger a sync and return SYNCING.  The only other time I've seen that reported besu had no peers and so couldn't ever reach the TTD block and the errors stopped happening once the networking issue was fixed.",
        "created_at": "2022-02-11T05:18:31.305000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "besu shows continuous `Consensus fork-choice-update` messages while teku repeats that error.",
        "created_at": "2022-02-11T05:33:08.477000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "```\n2022-02-11 00:37:00.239 INFO  - Epoch Event *** Epoch: 12755, Justified checkpoint: 12753, Finalized checkpoint: 12752, Finalized root: e58beb432baf56de3adb43406a6c9736823653bc417bf64152bdf1662ddf4cfd\n2022-02-11 00:37:00.466 INFO  - Execution Client is back online\n2022-02-11 00:37:02.554 ERROR - Execution Client is offline\n```",
        "created_at": "2022-02-11T05:37:25.643000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I think besu is returning an error from ever fork choice updated message we send.",
        "created_at": "2022-02-11T05:40:47.289000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "`mergemock` doesn't seem to implement `eth_getBlockByNumber`? So far I'm having to hardcode the eth1 genesis block hash for it to be willing to create payloads.",
        "created_at": "2022-02-11T10:53:20.706000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(Well, and then execute them successfully)",
        "created_at": "2022-02-11T10:53:43.080000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!360491619402776577\u003e  What's the difference between your `engine-api-new` branch of geth (referenced in the engine API test vectors, which oddly also say they're on \"v1.0.0.alpha.5+\" instead of \"v1.0.0.alpha.6\") and the `kintsugi-v2-sync` branch?",
        "created_at": "2022-02-11T16:01:55.762000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Doesn't matter, you should use merge-kiln. Updated the test vectors accordingly",
        "created_at": "2022-02-11T16:03:36.401000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I made the vectors before the spec was released, thus 5+",
        "created_at": "2022-02-11T16:03:56.744000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "```\n$ scripts/check_merge_test_vectors.sh \nengine_forkchoiceUpdatedV1 response: {\"jsonrpc\":\"2.0\",\"id\":67,\"result\":{\"payloadStatus\":{\"status\":\"VALID\",\"latestValidHash\":null,\"validationError\":null},\"payloadId\":\"0xa247243752eb10b4\"}}\nUnexpected response to engine_forkchoiceUpdatedV1\n```",
        "created_at": "2022-02-11T17:20:04.591000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "i.e. it's `null`, not whatever other representation of 0 or a null-ish value, as the test vectors would suggest",
        "created_at": "2022-02-11T17:20:34.749000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Also\n\u003e ERROR[02-11|18:19:01.479] Impossible reorg, please file an issue   oldnum=0 oldhash=3b8fb2..1ddd4a oldblocks=0 newnum=0 newhash=3b8fb2..1ddd4a newblocks=0",
        "created_at": "2022-02-11T17:21:07.681000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!360491619402776577\u003e likewise for the \"execute the payload\" step, it's returning\n\u003e {\"jsonrpc\":\"2.0\",\"id\":67,\"result\":{\"status\":\"VALID\",\"latestValidHash\":\"0x3559e851470f6e7bbed1db474980683e8c315bfce99b2a6ef47c057c04de7858\",\"validationError\":null}}\ninstead of the stated:\n\u003e {\"jsonrpc\":\"2.0\",\"id\":67,\"result\":{\"status\":\"VALID\",\"latestValidHash\":\"0x3559e851470f6e7bbed1db474980683e8c315bfce99b2a6ef47c057c04de7858\",\"validationError\":\"\"}}",
        "created_at": "2022-02-11T17:46:00.973000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, the real behavior is correct, the stated one is outdated",
        "created_at": "2022-02-11T17:48:27.109000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I'm on vacation. Will fix on monday",
        "created_at": "2022-02-11T17:48:43.057000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Alright",
        "created_at": "2022-02-11T17:48:52.092000+00:00",
        "attachments": null
    }
]