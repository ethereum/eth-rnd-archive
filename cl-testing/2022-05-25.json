[
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Has anyone tried overriding the TTD on ropsten?  I know it's weird to do so now w/o the beacon chain even launched yet, but I just tried overriding to upcoming TTD and geth seems to get a bit confused.  In this case I'm using a geth/teku pair.  I overrode the TTD on both to be about 5 blocks in the future.  At first everything looked ok, but after a couple seconds or so geth started spamming \"Legacy sync reached merge threshold\" at a rate of about 100 logs per second (!).\n\nNot sure if this is a corner case since the ropsten beacon chain hasn't even launched yet but figured I'd mention it.\n\nI can provide logs if needed but so far I've been able to reproduce the issue twice.",
        "created_at": "2022-05-25T00:30:46.759000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I'm running a geth and besu from before they had the TTD embedded so I'm using the override and it seems to be working (not getting any complaints about configuration mismatch with Teku anymore).",
        "created_at": "2022-05-25T00:34:56.797000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "And I'm not getting those logs from geth.",
        "created_at": "2022-05-25T00:35:39.055000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Sorry I to be clear I used the override to set TTD to an _arbitrary_ TTD a couple blocks in the future from now, that's when the issue started (when the TTD was reached).  I wanted to make sure the override option actually worked in case we need to hotfix our nodes at the last minute, so used a test value just to be able to confirm the effect.",
        "created_at": "2022-05-25T00:37:51.811000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "oh, did the CL have the same low override or just geth? I'd expect it to complain if it had reached TTD and the CL wasn't taking over.",
        "created_at": "2022-05-25T00:39:00.531000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Ya they both had the same TTD.  Explaining future events that happened in the past is hard.  Basically at the time current total difficulty was X.  I overrode the TTD to X + (5 * latest.diffulty) on both and restarted them.  After 5 blocks geth logged \"Local chain is post-merge, waiting for beacon client sync switch-over..\" as expected, but then a couple seconds later it started logging the \"Legacy sync reached merge threshold\" message at a rate of about 100/s.  I left it running for a minute or two just to see what would happen but it didn't look to be \"recovering\".\n\nAfterwards I remove the TTD override and restarted both and everything is back to normal now, so it's not a \"fatal\" error.",
        "created_at": "2022-05-25T00:42:17.217000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "(aside: I can confirm both TTDs matched, previous testing showed that if for some reason the two TTDs mismatch the configuration exchange RPC does a very good job at complaining loudly. ðŸ™‚. )",
        "created_at": "2022-05-25T00:42:59.033000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Looks like that line is logged in two spots in geth's downloader, that makes me think that geth reverted to \"syncing\" maybe that's what happens if the CL doesn't offer something after the merge?  With the ropsten beacon chain not even started yet I wouldn't be surprised if teku isn't in a good state to handle the engine API flow.  Anyways just mentioned it as potential test case since the results were interesting.",
        "created_at": "2022-05-25T00:46:50.521000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "I'll definitely try it again next week after the ropsten beacon chain starts.",
        "created_at": "2022-05-25T00:47:31.400000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Yeah it's possible Geth is still getting PoW blocks and not getting anything from the CL because it isn't proposing blocks so the transition block never occurs.  But I'm really speculating here. Would be interesting to hear from the Geth folk.",
        "created_at": "2022-05-25T00:56:10.294000+00:00",
        "attachments": null
    },
    {
        "author": "noizxxx",
        "category": "Testing",
        "parent": "",
        "content": "Oh hey, Just setting up everything sorry I'm late. Anyone run a validator in a VM?",
        "created_at": "2022-05-25T03:15:27.912000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Is your node fully synced? I'll take a look into reducing the amount of logs",
        "created_at": "2022-05-25T04:56:24.022000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Which syncmode do you use? Looking at the code the logs should stop after a while (it's only logged on header and block requests that we send before the transition afaict)",
        "created_at": "2022-05-25T05:44:18.177000+00:00",
        "attachments": null
    },
    {
        "author": "fab_10",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@892053833121923094\u003e opening a thread about the test *Invalid Ancestor Chain Re-Org, Invalid StateRoot, Invalid P1', Reveal using newPayload*",
        "created_at": "2022-05-25T07:41:42.358000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2022-05-25T15:29:44.424000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "be3da98a0e0fccd11f12ccf60e1d884ea42a19c5b92e679f74c76c6919332a0d"
            }
        ]
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "lighthouse-besu\n````\n2022-05-25 11:33:16.795-04:00 | vert.x-worker-thread-2 | ERROR | JsonRpcExecutorHandler | Error streaming JSON-RPC response\nio.netty.channel.StacklessClosedChannelException\n        at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)\n```\n```\nMay 25 15:33:15.126 ERRO Error fetching block for peer           error: ExecutionLayerErrorPayloadReconstruction(ExecutionBlockHash(0xf51971b2c3320ed5329354bee48e516359d0c77cfbff0abf26c691c6a5bda5ef), EngineErrors([Offline { id: \"http://127.0.0.1:8572/\" }, Offline { id: \"http://127.0.0.1:8572/\" }])), block_root: 0x8379dfbf0323df1153fbe4f2772d2e83dfe20ef846023302ef1a2cf7281a017e\n```",
        "created_at": "2022-05-25T15:35:40.222000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "this was a full sync/archive node.  It was also using a master version from a couple days ago, I'll try again w/ 1.10.18 now that it's released.",
        "created_at": "2022-05-25T16:46:22.305000+00:00",
        "attachments": null
    },
    {
        "author": "dcbuilder",
        "category": "Testing",
        "parent": "",
        "content": "It's my first time running a node. I have just finished syncing Erigon on Kiln and I have Lighthouse saying that I have no synced execution engine. I think I have a networking issue, can anyone help, please?",
        "created_at": "2022-05-25T17:30:48.882000+00:00",
        "attachments": null
    },
    {
        "author": "tokey1475",
        "category": "Testing",
        "parent": "",
        "content": "https://discord.gg/DUsCucGv is a great server for help getting setup",
        "created_at": "2022-05-25T17:43:58.667000+00:00",
        "attachments": null
    }
]