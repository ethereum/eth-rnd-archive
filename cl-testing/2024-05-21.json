[
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e Copying these from TG for followup here:\n\nBelow copied from my original TG messages -\n\nHow do I interpret these assertoor logs?\n```\n[assertoor] time=\"2024-05-17T17:33:52Z\" level=info msg=\"received cl block 124 [0x6a4e8abeb4022ae4dcec0b22c5037fd07cbfcdacc6b1c8f337c77d81b111fa1a] streamed\" client=2-ethereumjs-lighthouse module=consensus\n[assertoor] time=\"2024-05-17T17:33:52Z\" level=info msg=\"received el block 124 [0xf233b1e56559c84357e26d03f2401173742faa7bba066dc60faf4db266ca7103] notified\" client=2-ethereumjs-lighthouse module=execution\n[assertoor] time=\"2024-05-17T17:33:53Z\" level=info msg=\"transaction 0xb032dcde7fa2eecd4114b86eb7cec91d3e20c554d20b239262aedb1c8ef8dc74 confirmed (nonce: 4, status: 0)\" RunID=12 TestID=blockhash-test module=test task=generate_transaction taskidx=2\n[assertoor] time=\"2024-05-17T17:33:53Z\" level=error msg=\"task execution returned error: transaction rejected, but expected success\" RunID=12 TestID=blockhash-test module=test task=generate_transaction taskidx=2\n[assertoor] time=\"2024-05-17T17:33:53Z\" level=warning msg=\"task failed with failure result: transaction rejected, but expected success\" RunID=12 TestID=blockhash-test module=test task=generate_transaction taskidx=2\n```\nI'm trying to run the 2935 blockhash test for Pectra with the ethereumjs client and it's failing on the second step saying the deployment transaction was rejected. Above are the related logs from the assertoor container in my local kurtosis devnet\n\nI inspected the EthereumJS output and it looks like the deployment transaction is succeeding and the contract is deployed",
        "created_at": "2024-05-21T13:36:40.480000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "I have similar issues with the assertoor EL triggered exit test\n\n```\n17-05-2024 17:43:41  INFO  0 Fields  starting task\n17-05-2024 17:43:41  INFO  0 Fields  wallet: 0x65D08a056c17Ae13370565B04cF77D2AfA1cB9FA [nonce: 5] 999997498.501481278 ETH\n17-05-2024 17:43:41  INFO  1 Fields  sending tx: 0x24f74352d511974ad7150f043fcedbe75438b7baf37f27821f1f607716af9c8a\n17-05-2024 17:43:47  INFO  0 Fields  transaction 0x24f74352d511974ad7150f043fcedbe75438b7baf37f27821f1f607716af9c8a confirmed (nonce: 5, status: 0)\n17-05-2024 17:43:47  ERROR  0 Fields  task execution returned error: transaction rejected, but expected success\n17-05-2024 17:43:47  WARN  0 Fields  task failed with failure result: transaction rejected, but expected success\n```\nI found this transaction in the EthereumJS logs and confirmed it was mined, validated the exit request was included as a request in the block and sent to CL and then see the pending exit request in Dora yet Assertoor thinks the transaction was rejected",
        "created_at": "2024-05-21T13:36:43.076000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Heya \u003c@403636673914863626\u003e, Sorry, I didn't have time to debug it yet. \nI'll take a look at it now. Can you send me your kurtosis config?",
        "created_at": "2024-05-21T13:59:35.717000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "sure, no worries, lemme find it",
        "created_at": "2024-05-21T14:00:23.304000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "```\nparticipants:\n  - el_type: ethereumjs\n    el_image: ethereumjs:local\n    el_log_level: debug\n    el_extra_params: [\n      \"--logLevel=debug\",\n      \"--rpcDebug=true\"\n    ]\n    el_extra_env_vars: {\n      \"DEBUG\":\"ethjs,vm:*,evm:*\"\n    }\n    cl_type: grandine\n    cl_image: ethpandaops/grandine:feature-electra\n\n  - el_type: ethereumjs\n    el_image: ethereumjs:local\n    el_log_level: debug\n    el_extra_params: [\n      \"--logLevel=debug\",\n      \"--rpcDebug=true\"\n    ]\n    el_extra_env_vars: {\n      \"DEBUG\":\"ethjs,vm:*,evm:*\"\n    }\n    cl_type: lighthouse\n    cl_image: ethpandaops/lighthouse:ef-tests-electra\n\nnetwork_params:\n  electra_fork_epoch: 1\n  electra_fork_version: \"0x50000038\"\n  global_log_level: debug\n  seconds_per_slot: 6\n  shard_committee_period: 4\n\nadditional_services:\n  - dora\n  - assertoor\n```",
        "created_at": "2024-05-21T14:01:21.907000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "Here's the basic one.  lemme track down which assertoor tests I was using",
        "created_at": "2024-05-21T14:01:42.863000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "You don't necessarily need those extra env vars/params.  I was just trying to get maximal debug info from our client",
        "created_at": "2024-05-21T14:02:01.982000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "`ethereumjs:local` seems to be a local image?  Is there some public image I can refer to?",
        "created_at": "2024-05-21T14:02:11.160000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "oh, yes, that should be the same as the pandops one",
        "created_at": "2024-05-21T14:02:21.789000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "I think anyway.  I had just built our master branch locally",
        "created_at": "2024-05-21T14:02:36.635000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@792822129019584562\u003e isn't the pandops one updated directly from our master ?",
        "created_at": "2024-05-21T14:02:50.695000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "alright,  I'll use latest master ðŸ™‚  I think it's RPC related, so probably not too critical if not exactly the same image",
        "created_at": "2024-05-21T14:03:10.613000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes master tag from pandaops is auto build",
        "created_at": "2024-05-21T14:03:13.678000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "ok, that should work then.  I didn't do any local hacks or anything",
        "created_at": "2024-05-21T14:03:22.948000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "it was the 2935 test and the the last part of the 7002 tests (the el triggered exit)",
        "created_at": "2024-05-21T14:03:42.405000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "ah, yea,  can you send the list of tests too?",
        "created_at": "2024-05-21T14:05:41.493000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "```\nassertoor_params:\n  run_stability_check: false\n  run_block_proposal_check: false\n  tests:\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/wait-for-slot.yaml\", id: \"wait1\", config: { slot: 34 }}\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/bls-changes.yaml\", config: { validatorCount: 300 }}\n    \n    # EIP-6110\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/wait-for-slot.yaml\", id: \"wait2\", config: { slot: 38 }}\n    - https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/massive-deposit.yaml\n\n    # EIP-2935\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/wait-for-slot.yaml\", id: \"wait3\", config: { slot: 42 }}\n    - https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/blockhash-test.yaml\n    \n    # EIP-7002\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/wait-for-slot.yaml\", id: \"wait4\", config: { slot: 46 }}\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/voluntary-exits.yaml\", config: { validatorCount: 10 }}\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/wait-for-slot.yaml\", id: \"wait5\", config: { slot: 50 }}\n    - { file: \"https://raw.githubusercontent.com/ethpandaops/assertoor-test/master/assertoor-tests/pectra-dev/el-triggered-exit.yaml\", config: { validatorIndex: 20 }}\n```",
        "created_at": "2024-05-21T14:06:42.393000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@403636673914863626\u003e \nthere's no `status` field in the `eth_getTransactionReceipt` response from ethereumjs ðŸ˜„\nhow to determinate if a transaction reverted or not?",
        "created_at": "2024-05-21T14:29:59.334000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "Lemme look in a bit. Wouldn't surprise me if we just aren't 100% compliant with the spec",
        "created_at": "2024-05-21T14:34:00.539000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "Wouldn't be the first time",
        "created_at": "2024-05-21T14:34:17.188000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "This is interesting.  I'll have to look at it locally because it's \"in our code\"",
        "created_at": "2024-05-21T19:31:04.555000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "have found the bug and now testing a fix locally.  Thanks for identifying this!",
        "created_at": "2024-05-21T19:42:26.717000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "cool ðŸ™‚ let's see if assertoor likes it too ðŸ˜„\ndo you have a branch name? can build an image via our image builder too ðŸ™‚",
        "created_at": "2024-05-21T20:06:35.968000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "We just merged the fix so you can run off latest master",
        "created_at": "2024-05-21T22:00:33.184000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Testing",
        "parent": "",
        "content": "I verified that both tests now pass locally",
        "created_at": "2024-05-21T22:00:42.738000+00:00",
        "attachments": null
    },
    {
        "author": "jameshe5018",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@415109946682769408\u003e you may know already but process_registry_updates(state) and these\n```\n//        process_pending_balance_deposits(state)  # New in EIP7251\n//        process_pending_consolidations(state)  # New in EIP7251\n//        process_effective_balance_updates(state)\n```\nfunctions don't seem to be covered in spectests under `sanity/slots/pyspec_tests` I think right now",
        "created_at": "2024-05-21T23:15:09.889000+00:00",
        "attachments": null
    }
]