[
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!199561711278227457\u003e can you please change the port to 8551 for nethermind-nimbus? same problem here as with geth. https://hackmd.io/dFzKxB3ISWO8juUqPpJFfw#Connect-Nethermind-Nimbus",
        "created_at": "2021-12-29T07:52:49.874000+00:00",
        "attachments": null
    },
    {
        "author": "davlee",
        "category": "Testing",
        "parent": "",
        "content": "I have successfully started the test net",
        "created_at": "2021-12-29T09:31:17.601000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "1e3818e584ccddc182901d33d8fbc0f83f851e60b739e0c21f83e6dc58867802"
            }
        ]
    },
    {
        "author": "davlee",
        "category": "Testing",
        "parent": "",
        "content": "how do I find my local RPC address?",
        "created_at": "2021-12-29T09:32:00.371000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "db04da9d60633825f5c4f0e346850424fe7f59453854a807c5185bb52c9a822a"
            }
        ]
    },
    {
        "author": "davlee",
        "category": "Testing",
        "parent": "",
        "content": "My current metamask settings as follows.\nFrom the tutorial, it seems that I need to change the one indicated by top arrow to my local RPC\nBut how about the scan address? keep it the same?",
        "created_at": "2021-12-29T09:33:35.661000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "e6bf26adeaed81c6e3550ef8123ce640561fb7bf16d7e7d6e22c42c108f7aa42"
            }
        ]
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "Did anyone get nimbus to work properly? nimbus-geth loses sync every few hours for me",
        "created_at": "2021-12-29T09:43:27.181000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "nimbus-geth.txt",
                "content": "5b480f31f9cf7fff7ef321ef28f5f0e8a9fb057fdbc0cf86fd1e11f09c450bf2"
            }
        ]
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "nimbus-nethermind does not sync past block 85966",
        "created_at": "2021-12-29T09:46:02.489000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "netmind.txt",
                "content": "05ca828bf76dd767626fcafc81752bafa0cc7e396a27eb5a24e70e8dce6234b3"
            },
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "nimbus.txt",
                "content": "6edcc6a18390168ba1a2d20b856f0926ca151f6ffc0ce2b6f9fa4eb29171684c"
            }
        ]
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "connecting nimbus to a synced nethermind instance seems to also break nethermind",
        "created_at": "2021-12-29T09:48:14.354000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "8d210d24b6b0653cee2a1bd441bdef0940d7851f1023978506030e93584fb5b1"
            }
        ]
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "it is probably http://127.0.0.1:8545",
        "created_at": "2021-12-29T09:50:14.308000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "good catch. I changed the port for Nethermind. Thank you üôè",
        "created_at": "2021-12-29T10:22:51.478000+00:00",
        "attachments": null
    },
    {
        "author": "davlee",
        "category": "Testing",
        "parent": "",
        "content": "it doesn't work. I also tried my public IP as well.",
        "created_at": "2021-12-29T10:27:16.044000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "418bb8f0ccb1c69803dc8c78687ea1bb62b80cc350034503dfc5d4ae0a92b989"
            }
        ]
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "you are using https, can you try it with http please?",
        "created_at": "2021-12-29T11:03:35.499000+00:00",
        "attachments": null
    },
    {
        "author": "davlee",
        "category": "Testing",
        "parent": "",
        "content": "tried http also the same error",
        "created_at": "2021-12-29T13:04:51.916000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "interesting",
        "created_at": "2021-12-29T13:53:59.704000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "those time remaining estimates are sort of secondary -- the important part is whether it otherwise works. And, in general, the model being currently prioritized is for 1:1 CL \u003c-\u003e EL pairing, so anything else is effectively undefined behavior as far as Nimbus is concerned",
        "created_at": "2021-12-29T13:56:07.267000+00:00",
        "attachments": null
    },
    {
        "author": "muddlebee",
        "category": "Testing",
        "parent": "",
        "content": "\u003e mac has some issues with docker host networking,\n\nIm facing this issue with mac. let me try with the given solution here. üëç  thanks\n\nworks fine in linux env though.",
        "created_at": "2021-12-29T15:18:31.080000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!612776905380200459\u003e are you using the git branch directly or a Docker image for Nimbus?",
        "created_at": "2021-12-29T15:59:58.364000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!612776905380200459\u003e nimbus-geth stopped syncing at the same block (85966) and went into a loop.\n```\nINFO [12-28|21:36:01.218] Ignoring already processed block         number=85966 hash=326fad..94b9e3\nINFO [12-28|21:36:01.615] Setting head                             head=726f91..e9eba9\nINFO [12-28|22:12:27.364] Writing clean trie cache to disk         path=/home/seamonkey/eth/kintsugi-nimbus-geth/geth/triecache threads=1\nINFO [12-28|22:12:27.364] Regenerated local transaction journal    transactions=0 accounts=0\nINFO [12-28|22:12:27.370] Persisted the clean trie cache           path=/home/seamonkey/eth/kintsugi-nimbus-geth/geth/triecache elapsed=5.694ms\n\u003e INFO [12-28|23:12:27.364] Writing clean trie cache to disk         path=/home/seamonkey/eth/kintsugi-nimbus-geth/geth/triecache threads=1\nINFO [12-28|23:12:27.364] Regenerated local transaction journal    transactions=0 accounts=0\nINFO [12-28|23:12:27.370] Persisted the clean trie cache           path=/home/seamonkey/eth/kintsugi-nimbus-geth/geth/triecache elapsed=5.666ms\n```",
        "created_at": "2021-12-29T17:06:54.781000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "same question, docker image or git branch directly?",
        "created_at": "2021-12-29T17:09:07.477000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "The Kintsugi Nimbus/Geth nodes don't seem to have that particular issue, but they aren't trying to sync through it. They're still proposing blocks, et cetera.",
        "created_at": "2021-12-29T17:15:23.040000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "Are there any tools that can generate genesis states for the merge fork?",
        "created_at": "2021-12-29T19:00:05.518000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "git branch directly",
        "created_at": "2021-12-29T19:29:57.666000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "syncing from genesis in a new setup, so will see soon if the same thing happens, in which case it's something I can look at more closely. if it doesn't, that's interesting too, in different ways",
        "created_at": "2021-12-29T19:37:14.100000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "nimbus-nethermind appears to be stuck at `headslot=90427` and repeating `Received invalid sequence of blocks`",
        "created_at": "2021-12-29T20:19:20.633000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Oh, that's an indirect issue. The problem is that the blocks are being (presumably invalidly) marked as invalid, which is a process driven by the part of the code which emits that warning. The interesting part is why they're being marked as invalid -- do you have any further logs on the issue?",
        "created_at": "2021-12-29T20:38:24.909000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Do you know which block is marked invalid?",
        "created_at": "2021-12-29T20:53:24.681000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Okay, I see the block 85966 issue. it's a timeout in the executepayload",
        "created_at": "2021-12-29T20:56:40.813000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "* which blocknumber/hash on the EL",
        "created_at": "2021-12-29T20:56:44.160000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Okay, I see the block 85966 issue. it's a timeout in the executepayload",
        "created_at": "2021-12-29T20:56:59.502000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "it's not finishing within 650ms (Discord reordered messages, fixing)",
        "created_at": "2021-12-29T20:57:20.865000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "85966 looks empty to me",
        "created_at": "2021-12-29T20:57:51.111000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "yeah I noticed that",
        "created_at": "2021-12-29T20:58:20.953000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Why would an empty block time out?",
        "created_at": "2021-12-29T20:58:22.974000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "duration=2m59.8etc seconds from Geth",
        "created_at": "2021-12-29T20:58:42.344000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "for `Served engine_executePayloadV1`",
        "created_at": "2021-12-29T20:58:57.949000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "and yes, it is minutes",
        "created_at": "2021-12-29T20:59:11.633000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "INFO [12-29|09:25:52.804] Inserted block                           number=85966                      hash=326fad..94b9e3 txs=0   elapsed=\"79.77¬µs\"",
        "created_at": "2021-12-29T21:01:08.450000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Do you know the proposerIndex of this block?",
        "created_at": "2021-12-29T21:01:46.887000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "it's looping locally at (CL head slot) 90427",
        "created_at": "2021-12-29T21:02:19.811000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "looking in Nimbus logs to see if that's the same place this occurred",
        "created_at": "2021-12-29T21:02:50.029000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "i.e. I'm also seeing this. I think they're the same issue",
        "created_at": "2021-12-29T21:04:46.241000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003e {\"lvl\":\"DBG\",\"ts\":\"2021-12-29 20:54:11.044+00:00\",\"msg\":\"executePayload: inserting block into execution engine\",\"parentHash\":\"3dc1f013\",\"blockHash\":\"726f91c8\",\"stateRoot\":\"13c6ff88\",\"receiptsRoot\":\"c1a247c7\",\"random\":\"b076680b\",\"blockNumber\":85966,\"gasLimit\":9390592,\"gasUsed\":611050,\"timestamp\":1640745360,\"extraDataLen\":0,\"baseFeePerGas\":{\"data\":{\"lo\":{\"lo\":7,\"hi\":0},\"hi\":{\"lo\":0,\"hi\":0}}},\"numTransactions\":22}",
        "created_at": "2021-12-29T21:08:48.490000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "The block explorer hasn't caught up",
        "created_at": "2021-12-29T21:09:55.908000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "so I can't link to this block/slot",
        "created_at": "2021-12-29T21:10:07.278000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n\u003e eth.getBlock(\"85966\")\n{\n  baseFeePerGas: 7,\n  difficulty: 0,\n  extraData: \"0x3dc1f013a9192ce7060408eded968e6e069987d79819e2b62c7377ca03e5e44c\",\n  gasLimit: 9390592,\n  gasUsed: 0,\n  hash: \"0x326fad7350baabd41a61d06863428d241f79641e598b9b87dddd4e189694b9e3\",\n  logsBloom: \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\n  miner: \"0x0000000000000000000000000000000000000001\",\n  mixHash: \"0xb076680b1f7403216d6f8d50269db89bcdef651d7ac45ee49a2a70806f8257df\",\n  nonce: \"0x0000000000000000\",\n  number: 85966,\n  parentHash: \"0x3dc1f013a9192ce7060408eded968e6e069987d79819e2b62c7377ca03e5e44c\",\n  receiptsRoot: \"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\n  sha3Uncles: \"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\n  size: 544,\n  stateRoot: \"0xa931af8be194548b46f9371aba6f2dbc1501fcf944daf02be5cc3e6d32d21904\",\n  timestamp: 1640745036,\n  totalDifficulty: 5000588874,\n  transactions: [],\n  transactionsRoot: \"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\",\n  uncles: []\n}\n```",
        "created_at": "2021-12-29T21:10:18.342000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "This is the block in my local chain, seems like the network split?",
        "created_at": "2021-12-29T21:10:43.459000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "My node was shut down when the block actually happened",
        "created_at": "2021-12-29T21:11:30.679000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "* or the block you have was forked off",
        "created_at": "2021-12-29T21:11:42.644000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "maybe, https://consensusmonitor.kintsugi.themerge.dev/ is just a bit dysfunctional anyway at the moment, so hard to tell. either that or the network's breaking down",
        "created_at": "2021-12-29T21:12:23.311000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "and, one thing with sync is that at least the nodes it's syncing from think it's real. which could, of course, involve a network split. but would this explain the executePayload timeout?",
        "created_at": "2021-12-29T21:13:22.635000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "```\n{\"lvl\":\"DBG\",\"ts\":\"2021-12-29 20:54:11.696+00:00\",\"msg\":\"newExecutionPayload failed\",\"msg\":\"Future operation cancelled!\"}\n{\"lvl\":\"INF\",\"ts\":\"2021-12-29 20:54:11.696+00:00\",\"msg\":\"runQueueProcessingLoop: newExecutionPayload timed out\"}\n```",
        "created_at": "2021-12-29T21:13:38.888000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, the parenthash looks correct to me, so the EL wouldn't go and start a sync",
        "created_at": "2021-12-29T21:15:07.635000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "I can of course just increase the timeout, and there's a better approach anyway that it should use so it doesn't executePayload on all the blocks, but if there is a network fork, that's exactly where it's hazardous to do so (obviously, if the EL says VALID on a decendent executionpayload, then all ancestorpayloads =\u003e VALID, in EL already, don't bother executePayload'ing, don't run into this issue), so in a more optimized implementation, it wouldn't be a problem to have a larger timeout",
        "created_at": "2021-12-29T21:16:17.033000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The extradata and parenthash are the same in my block, but not set in yours, also my bock is earlier (timestamp) than yours",
        "created_at": "2021-12-29T21:16:32.088000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The extradata and parenthash being the same might be a modification that my bad block node does btw",
        "created_at": "2021-12-29T21:17:17.678000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Is that the first EL block to do anything particularly exotic?",
        "created_at": "2021-12-29T21:19:10.109000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No, there have been a few bad blocks before that",
        "created_at": "2021-12-29T21:19:57.875000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "because even if there is a split, the specific failure mode of an executePayload timeout is odd",
        "created_at": "2021-12-29T21:20:15.726000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Geth is typically doing that operation in microseconds, not even milliseconds",
        "created_at": "2021-12-29T21:20:34.959000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "So how did you repro? Just synced a geth-nimbus from scratch?",
        "created_at": "2021-12-29T21:21:08.518000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "yeah",
        "created_at": "2021-12-29T21:21:12.043000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "just followed the instructions",
        "created_at": "2021-12-29T21:21:27.234000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "on https://hackmd.io/dFzKxB3ISWO8juUqPpJFfw#Connect-Geth-Nimbus",
        "created_at": "2021-12-29T21:21:47.502000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "As a Nimbus bug, maybe, it then unconditionally fcU's, and gets\n\u003e {\"lvl\":\"INF\",\"ts\":\"2021-12-29 20:54:11.700+00:00\",\"msg\":\"runQueueProcessingLoop: forkchoiceUpdated failed\",\"err\":\"{\\\"code\\\":-32000,\\\"message\\\":\\\"Server error\\\"}\"}\n\nfrom Geth",
        "created_at": "2021-12-29T21:25:18.175000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "I am only using 1:1 CL\u003c-\u003eEL",
        "created_at": "2021-12-29T21:43:31.874000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "It is a fork, maybe, or at least a consensus issue:\n\u003e {\"lvl\":\"INF\",\"ts\":\"2021-12-29 20:53:09.818+00:00\",\"msg\":\"Invalid block\",\"blockRoot\":\"a0621a32\",\"blck\":{\"slot\":90428,\"proposer_index\":25898,\"parent_root\":\"6b10345a\",\"state_root\":\"cef822d4\",\"eth1data\":{\"deposit_root\":\"0c079abe878c78c7f56bc4975bfa5ac737102d7a92b40a991737f772ad1799a8\",\"deposit_count\":253,\"block_hash\":\"fda52dadbd92d938a9ce248d0b15c8b90b7fe11aee28349ae93f48965fbb47df\"},\"graffiti\":\"lighthouse-geth\",\"proposer_slashings_len\":0,\"attester_slashings_len\":0,\"attestations_len\":19,\"deposits_len\":0,\"voluntary_exits_len\":0,\"sync_committee_participants\":430}}\nbecause\n\u003e {\"lvl\":\"NOT\",\"ts\":\"2021-12-29 20:53:09.814+00:00\",\"msg\":\"Block: root verification failed\",\"block_state_root\":\"cef822d4\",\"state_root\":\"c00bc709\"}",
        "created_at": "2021-12-29T21:43:34.572000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "git branch",
        "created_at": "2021-12-29T21:44:08.391000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "so (deterministically) Nimbus is rejecting, on the CL side, slot 90428, and finding an alternate fork (which maybe another Nimbus created) which had no blocks it had a CL problem with. After already finding an executionpayload at that block height valid:\n\u003e {\"lvl\":\"INF\",\"ts\":\"2021-12-29 20:53:09.818+00:00\",\"msg\":\"runQueueProcessingLoop: running forkchoiceUpdated\",\"headBlockRoot\":\"326fad73\",\"finalizedBlockRoot\":\"68eb9c1b\",\"block_hash\":\"326fad73\",\"parent_hash\":\"3dc1f013\",\"executionPayloadStatus\":\"VALID\"}\nthe CL-side rejection (which explains why it happens with both Nimbus + Geth and Nimbus + Nethermind) is a kind of root cause.\n\nIt then starts down executepayload'ing the other branch:\n```\n{\"lvl\":\"DBG\",\"ts\":\"2021-12-29 20:53:15.207+00:00\",\"msg\":\"executePayload: inserting block into execution engine\",\"parentHash\":\"e6c00496\",\"blockHash\":\"d7a48837\",\"stateRoot\":\"1226088d\",\"receiptsRoot\":\"a6565eaa\",\"random\":\"39588ae3\",\"blockNumber\":85943,\"gasLimit\":9390592,\"gasUsed\":55550,\"timestamp\":1640744700,\"extraDataLen\":0,\"baseFeePerGas\":{\"data\":{\"lo\":{\"lo\":7,\"hi\":0},\"hi\":{\"lo\":0,\"hi\":0}}},\"numTransactions\":2}\n```\n(blockNumber resets by about 20 blocks), until it reaches 85966 again. still not 100% certain why it has the issue there, but it's a downstream issue in this instance",
        "created_at": "2021-12-29T21:47:40.635000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I would suspect it has something to do with the extradata",
        "created_at": "2021-12-29T21:52:40.911000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Maybe during marshalling/unmarshalling",
        "created_at": "2021-12-29T21:53:07.574000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "seems likely, yeah. interesting that Geth is apparently okay with the roundtripping done here",
        "created_at": "2021-12-29T21:55:22.659000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003e {\"lvl\":\"INF\",\"ts\":\"2021-12-29 20:53:39.293+00:00\",\"msg\":\"runQueueProcessingLoop: running forkchoiceUpdated\",\"headBlockRoot\":\"5cfb79ec\",\"finalizedBlockRoot\":\"68eb9c1b\",\"block_hash\":\"326fad73\",\"parent_hash\":\"3dc1f013\",\"executionPayloadStatus\":\"VALID\"}",
        "created_at": "2021-12-29T21:55:37.235000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(that's the block rejected CL-side)",
        "created_at": "2021-12-29T21:55:52.630000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "https://beaconchain.kintsugi.themerge.dev/block/90428 is the triggering block",
        "created_at": "2021-12-29T22:18:02.120000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/status-im/nimbus-eth2/blob/6b60a774e0bb6b83cbbd0fa504c8809c8cf0fb7b/beacon_chain/spec/state_transition_block.nim#L514-L528 mystery solved, it didn't copy extra_data over to the cached version in beaconstate",
        "created_at": "2021-12-29T22:22:46.469000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!612776905380200459\u003e \u003c@!474451342094499868\u003e https://github.com/status-im/nimbus-eth2/pull/3093/commits/d5aefa15da3e6e504d96f73de80c3d40d6f6679e works for me at least",
        "created_at": "2021-12-29T22:36:49.619000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(I guess the main kintsugi Nimbus nodes also will need this update)",
        "created_at": "2021-12-29T22:38:14.105000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!654267572107083777\u003e Sorry, noob question here, but what's the git command for integrating these changes.",
        "created_at": "2021-12-29T22:45:53.964000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "if you're already in the `kintsugi` branch, `git pull` should suffice",
        "created_at": "2021-12-29T22:46:20.706000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "it will complain when you build about not having run `make update`, probably, unless you do so. it doesn't actually matter here, but harmless and suppresses a false-positive warning",
        "created_at": "2021-12-29T22:47:14.159000+00:00",
        "attachments": null
    },
    {
        "author": "seamonkey82",
        "category": "Testing",
        "parent": "",
        "content": "Heh, oh.  I thought there was more to it.",
        "created_at": "2021-12-29T22:47:31.352000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "if unsure, run `git log` and make sure that the commit linked above is the most recent",
        "created_at": "2021-12-29T22:48:02.061000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "I didn't have to reset my Nimbus database, at least. It recovered automatically",
        "created_at": "2021-12-29T22:49:27.090000+00:00",
        "attachments": null
    },
    {
        "author": "ohraemez",
        "category": "Testing",
        "parent": "",
        "content": "sync looks good for me so far (way past the problematic block now)",
        "created_at": "2021-12-29T22:50:30.330000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "good to know -- definitely curious if it continues working for everyone testing it",
        "created_at": "2021-12-29T22:51:19.242000+00:00",
        "attachments": null
    }
]