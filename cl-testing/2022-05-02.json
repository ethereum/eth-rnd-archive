[
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "so this is fun... we think that Besu isn't consistently discriminating between peers on mainnet-shadowfork-3 and the previous 2 shadowforks.",
        "created_at": "2022-05-02T16:29:14.317000+00:00",
        "attachments": []
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "anyone else run into it, and is adding a required block from mainnet proper post either shadownet TTD enough to filter out?",
        "created_at": "2022-05-02T16:30:28.351000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Geth also doesn't do that, we have peers from all shadow-forks and mainnet (otherwise we wouldn't get the transactions from mainnet). In the real world, the forkid change (mergeforkblock) will disconnect the two networks",
        "created_at": "2022-05-02T16:32:01.087000+00:00",
        "attachments": []
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "yes, we are configured with a modest 25 peers right now",
        "created_at": "2022-05-02T16:33:19.702000+00:00",
        "attachments": []
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "besu favors peers with higher block height too, which we think crowded out the mnsf3 peers",
        "created_at": "2022-05-02T16:35:49.520000+00:00",
        "attachments": []
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "Erigon seems to have the same problem as well",
        "created_at": "2022-05-02T17:35:34.380000+00:00",
        "attachments": []
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "that is the reason why we suddenly have intermittent problems syncing shadow forks but have no issue on kiln",
        "created_at": "2022-05-02T17:36:10.327000+00:00",
        "attachments": []
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Shouldn't peers from other shadowforks disconnect shadowfork-3 because of this? cc: \u003c@425572898787426305\u003e \nhttps://github.com/ethereum/EIPs/blob/d896145678bd65d3eafd8749690c1b5228875c39/EIPS/eip-3675.md#devp2p\n\n\"Peers that keep sending these messages after the handlers have been removed SHOULD be disconnected.\"? \n\nUpdated: in spec we have SHOULD which doesn't mean MUST ðŸ˜‰",
        "created_at": "2022-05-02T19:12:55.528000+00:00",
        "attachments": []
    },
    {
        "author": "lukaszrozmej",
        "category": "Testing",
        "parent": "",
        "content": "Also isn't following peers with highest block number an attack vector? I thought beacon chain should be considered source of truth and we should follow peers that are on same chain as beacon block? Otherwise it's easy to spam nodes that will say they have very high blocks and block the network.",
        "created_at": "2022-05-02T20:10:49.031000+00:00",
        "attachments": []
    },
    {
        "author": "lukaszrozmej",
        "category": "Testing",
        "parent": "",
        "content": "Basically beacon node and execution API is source of truth until proven wrong",
        "created_at": "2022-05-02T20:11:19.028000+00:00",
        "attachments": []
    },
    {
        "author": "lukaszrozmej",
        "category": "Testing",
        "parent": "",
        "content": "btw Nethermind has similar (but bit differetnt) problems, but I am currently on it, this was also why I was potentially asking about keeping block hash announcements in spec, would make a bit easier to track which peer has what",
        "created_at": "2022-05-02T20:22:19.866000+00:00",
        "attachments": []
    },
    {
        "author": "lukaszrozmej",
        "category": "Testing",
        "parent": "",
        "content": "but its not necessary",
        "created_at": "2022-05-02T20:22:33.737000+00:00",
        "attachments": []
    }
]