[
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e regarding your recent comment (https://github.com/ethereum/consensus-specs/pull/2982#issuecomment-1239225605) I would like to clarify one thing.\n\nIs test runner tries to apply a block if `valid: false` and then checks that the block hasn't been applied or it is not trying to apply invalid blocks at all?",
        "created_at": "2022-09-08T11:56:00.192000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Our test runner checks that `on_block` returns an error whenever `valid: false` and **does not** return an error whenever `valid: true`, so if we have `valid: true` for blocks that the EE deemed INVALID we're in trouble cause `on_block` errors out",
        "created_at": "2022-09-08T11:57:19.590000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "got it!",
        "created_at": "2022-09-08T11:58:11.895000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "and I think this is the right behavior: as far as the spec is concerned, the EE saying INVALID means the block is invalid for the CL side as well, so I find it weird that we will have `valid: true` for these cases",
        "created_at": "2022-09-08T11:58:20.266000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Yes, it does seem reasonable to me",
        "created_at": "2022-09-08T11:58:37.487000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "It's not a big deal, I don't mind changing the runner, as long as there's one fixed approach for both sync and forkchoice tests we should be fine",
        "created_at": "2022-09-08T11:58:49.891000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I don’t mind changing the behaviour either, because we do the same as Prysm and I had to special-case the EL error for the immediately invalid block\n\nso valid=true means “valid to be imported fully or optimistically” and false means “not valid to be imported at all, should error immediately on attempted import”",
        "created_at": "2022-09-08T12:00:32.387000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "My summary: https://github.com/ethereum/consensus-specs/pull/2982#issuecomment-1240631284",
        "created_at": "2022-09-08T12:13:52.134000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "perfect",
        "created_at": "2022-09-08T13:22:03.005000+00:00",
        "attachments": []
    }
]