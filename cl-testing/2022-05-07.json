[
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Yes, this is the intention. And we had rough agreement of client teams either on one of the calls or in discord, or even both venues",
        "created_at": "2022-05-07T06:49:44.837000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Heya,\nMy Kiln Geth got stuck somehow yesterday morning... It's repeating the following lines in a loop in the logs:\nhttps://pastebin.com/RzJq3G3h\n\nAnything I should capture before restarting geth?",
        "created_at": "2022-05-07T12:55:34.066000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "It's a bad block! It may be interesting to take a look into, I'd advise you to keep it running until geth team reaches you out. What CL client are you running?\ncc \u003c@360491619402776577\u003e",
        "created_at": "2022-05-07T13:04:32.609000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "lighthouse",
        "created_at": "2022-05-07T13:04:51.330000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "I'll keep it running üôÇ  \nJust analyzed the logs.. It first happened yesterday at 07:00:01 in the morning. But nothing more in the log around this time",
        "created_at": "2022-05-07T13:20:37.436000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "So, it got stuck to this block and isn't trying to move forward, right?",
        "created_at": "2022-05-07T13:27:04.516000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "yes, I don't see anything higher than number=402,572  in the logs. If you can tell me the api endpoint to get the chain head i can validate via the geth api, too üòâ",
        "created_at": "2022-05-07T13:30:15.612000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "You may use `GET /eth/v1/beacon/headers/head` to query your beacon node for the head",
        "created_at": "2022-05-07T13:33:12.604000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Giving me this:\n```{\n    \"data\": {\n        \"root\": \"0xd3d3272df0a854c8b3f397508b490a0b275db5dd0789c133cf7597885b7b22aa\",\n        \"canonical\": true,\n        \"header\": {\n            \"message\": {\n                \"slot\": \"402358\",\n                \"proposer_index\": \"107010\",\n                \"parent_root\": \"0x6d7a7915b0459f0edc586b15003dc4cd9efb0d2a56bd8257ffb2d814d629a441\",\n                \"state_root\": \"0x641d3dab0f18f4a2fa5ef783904ce317b09a3056cdc2951f5b9438ab388e82f6\",\n                \"body_root\": \"0xc75343414e8578bb99e8a160cc861335475127d95fa8e0a344ddeafa63305f6d\"\n            },\n            \"signature\": \"0x88ea6d9469e91022c306f43fb1ecc2ea71b0d5c83d31dd8e9389f7cd85ebac53a0f3e75a220be1b2c461166b83df9d6f09a167dac50b60c22a26ea3c62c1def61bb76d3cf284d243d7a8aac3ab91ac1e0d8bb4f3b9190c5c7da9e0b9a5fa5903\"\n        }\n    }\n}```",
        "created_at": "2022-05-07T13:37:45.637000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Could be that it's not the newest version of geth / lighthouse..  I didn't keep it up to date in the last weeks üòÖ\ngo-ethereum  (ref: refs/heads/merge-kiln-v2):  3abd590144392160264cce0c0f095c53cc1d5520    (built: 15.03.2022)\nlighthouse:   (ref: refs/heads/kiln):  972354a1788bb1d8a038d7647f44b72a2a36cc22     (built: 13.03.2022)\n\nI don't know if there was anything critical released in meantime... Maybe thats the reason for it...",
        "created_at": "2022-05-07T13:42:54.597000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Thanks for the info, let's wait for developers to chime in",
        "created_at": "2022-05-07T13:53:08.107000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "proposer_index is pointing to one of my own validators there, but according to the beaconchain explorer the proposer for slot 402358 was 77400  ü§î",
        "created_at": "2022-05-07T14:27:37.805000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, seems like something went wrong earlier.  I found some more BAD BLOCKS at 06:53:36 on slot 401043 / block 402572..  \nAfter that it looks like it was following another chain till it got stuck 7 minutes later (when it was trying to propose a block)\nI've collected all logs during this time: https://pastebin.com/x3VmD4AE (it's unfortunately quite much as there are 1024 validators running :D)",
        "created_at": "2022-05-07T15:00:12.864000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e Could you do a `debug_standardTraceBadBlockToFile`of the bad blocks?",
        "created_at": "2022-05-07T15:05:40.940000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "yea, if you tell me how? üòÑ  debug namespace is enabled via http api",
        "created_at": "2022-05-07T15:07:00.585000+00:00",
        "attachments": null
    },
    {
        "author": "andrei12750755",
        "category": "Testing",
        "parent": "",
        "content": "\u003c#910910348922589184\u003e",
        "created_at": "2022-05-07T15:07:37.748000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e \n```\ncurl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"debug_standardTraceBadBlockToFile\",\"params\":[\"0xBlockhash\"],\"id\":67}' http://localhost:8545\n```\nJust replace 0xBlockhash with the block you want to trace",
        "created_at": "2022-05-07T15:12:21.087000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ah wait, the bad block only has one transfer in it, so tracing it doesn't really matter",
        "created_at": "2022-05-07T15:14:22.701000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "just giving me:   {\"output\":\"\",\"gasUsed\":\"0x0\",\"time\":1944}  in the file",
        "created_at": "2022-05-07T15:14:51.246000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yeah, not really interesting üòÑ",
        "created_at": "2022-05-07T15:15:16.955000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No gas used inside the EVM",
        "created_at": "2022-05-07T15:15:29.581000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "is that line related to it?\n``WARN [05-06|06:53:36.109] Failed to load old bad blocks            error=\"leveldb: not found\"``\nit was printed just before the first bad block..",
        "created_at": "2022-05-07T15:17:19.046000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No, that is only because we have never stored a bad block before (and expected)",
        "created_at": "2022-05-07T15:18:48.159000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Can you leave the node running until monday? I will take a look at this then",
        "created_at": "2022-05-07T15:19:31.962000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Yea, sure üëç",
        "created_at": "2022-05-07T15:20:04.642000+00:00",
        "attachments": null
    },
    {
        "author": "andrei12750755",
        "category": "Testing",
        "parent": "",
        "content": "\u003c#910910348922589184\u003e",
        "created_at": "2022-05-07T15:28:23.618000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, I started a backup bn on another machine to get the validators up again while primary bn is stuck...\nWorks fine for I'd say 99.9% of the attestations/sync committee contributions, but I'm regularly reading this message from the validators:\n```ERRO Unable to publish signed contributions and proofs, error: All endpoints failed http://localhost:5052/ =\u003e Unavailable(NotSynced), http://10.16.97.2:5052/ =\u003e RequestFailed(ServerIndexedMessage(IndexedErrorMessage { code: 400, message: \"BAD_REQUEST: error processing contribution and proofs\", failures: [Failure { index: 0, message: \"Verification: AggregatorNotInCommittee { aggregator_index: 107049 }\" }] })), http://localhost:5052/ =\u003e RequestFailed(ServerMessage(ErrorMessage { code: 503, message: \"SERVICE_UNAVAILABLE: beacon node is syncing: head slot is 402358, current slot is 411707\", stacktraces: [] })), slot: 411707, service: sync_committee```\nWhat is that AggregatorNotInCommittee error about?  Maybe a timing issue due to latency? (backup bn is on an external machine) \nTime is in sync on both machines...",
        "created_at": "2022-05-07T18:34:28.372000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Testing",
        "parent": "",
        "content": "If you shut the node down, you can do a 'geth snapshot verify-state'. It might help pinpoint the problem",
        "created_at": "2022-05-07T18:41:15.593000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Primary Geth \u0026 Lighthouse BN are still up and in this stuck state. \nI'll keep them up for \u003c@360491619402776577\u003e",
        "created_at": "2022-05-07T18:44:01.864000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Running the validator client with the external bn only (without the stuck one) made the error disappear...\nMaybe lighthouse still polled some information from the out of sync bn before ü§î",
        "created_at": "2022-05-07T18:50:37.671000+00:00",
        "attachments": null
    }
]