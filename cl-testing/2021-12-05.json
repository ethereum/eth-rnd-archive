[
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "Hi I'm a bit stucked. I try the merge on docker (ubuntu) with geth + lighthouse on merge-devnet-2, and it works. But they are listening on 127.0.0.1 and I'd like to connect from Metamask from another computer in the same subnet.\nWhat is the best way to configure it in my localdomain ?\n1. Change `network_mode: host` the docker-compose files ? (if so, I'm not sure which ports to expose)\n2. redirect ingoing trafic with something like `iptables -t nat -A PREROUTING -p tcp --dport 8545 -j DNAT --to-destination 127.0.0.1:8545` (this one fails)\n3. other ?\nI you have a quick answer I'll take it, otherwise it's not a problem ; as a linux sysadmin I'm just starting to learn about nodes and the call about the merge test is a good opportunity for me to do something useful and maybe help.\nAnd I'll be grateful if you give me some links to dig in faster ðŸ˜‰",
        "created_at": "2021-12-05T19:08:22.410000+00:00",
        "attachments": null
    },
    {
        "author": "canbo3",
        "category": "Testing",
        "parent": "",
        "content": "i am using port forwarding of ssh command to access my EL client remotely\n```\nssh user@server -v -N -L 8545:127.0.0.1:8545\n```",
        "created_at": "2021-12-05T19:15:43.052000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "I get the following error when I run docker-compose:\n\nyuno@yuno-pc:~/git/consensus-deployment-ansible/scripts/quick-run/merge-devnets$ docker-compose --env-file merge-devnet-2.vars -f docker-compose.lighthouse.yml up  --remove-orphans\nRemoving orphan container \"geth\"\nRemoving orphan container \"geth_init\"\nStarting lighthouse_beacon ... done\nAttaching to lighthouse_beacon\nlighthouse_beacon    | Unable to open testnet dir at \"/custom_config_data\": Unable to open deploy_block.txt: Os { code: 2, kind: NotFound, message: \"No such file or directory\" }\nlighthouse_beacon exited with code 1",
        "created_at": "2021-12-05T19:15:45.587000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "What OS do most people use?",
        "created_at": "2021-12-05T19:26:32.727000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "Nice one ! I'll try it tomorrow",
        "created_at": "2021-12-05T19:28:05.353000+00:00",
        "attachments": null
    },
    {
        "author": "pettylabelle6729",
        "category": "Testing",
        "parent": "",
        "content": "I use win10.",
        "created_at": "2021-12-05T19:28:28.329000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "100%  wind10 with docker?",
        "created_at": "2021-12-05T19:32:14.161000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "I get the following\n\n```\nUnable to open testnet dir at \"/custom_config_data\": Unable to open deploy_block.txt: Os { code: 2, kind: NotFound, message: \"No such file or directory\" }\n```\nwhen I follow this tutorial:\nhttps://hackmd.io/dFzKxB3ISWO8juUqPpJFfw",
        "created_at": "2021-12-05T19:40:12.511000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "I've read something on windows while trying to solve my issue ; hope it helps :\nhttps://docs.docker.com/network/host/ \n`The host networking driver only works on Linux hosts, and is not supported on Docker Desktop for Mac, Docker Desktop for Windows, or Docker EE for Windows Server.`\nand the docker-compose I use defines `network_mode: host` (note that I'm on Linux)",
        "created_at": "2021-12-05T19:40:17.341000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Okay yeah I am on Linux Mint right now",
        "created_at": "2021-12-05T19:40:36.320000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "I thought it would be easier than Windows",
        "created_at": "2021-12-05T19:40:58.889000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "I think I am missing custom_config_data",
        "created_at": "2021-12-05T19:42:51.120000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "what says the command `ls -l consensus-deployment-ansible/merge-devnet-2/custom_config_data/deploy_block.txt` ?",
        "created_at": "2021-12-05T19:44:43.778000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "```\nls: cannot access 'consensus-deployment-ansible/merge-devnet-2/custom_config_data/deploy_block.txt': No such file or directory\n```",
        "created_at": "2021-12-05T19:45:12.806000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Hey I lied",
        "created_at": "2021-12-05T19:46:25.666000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "It exists",
        "created_at": "2021-12-05T19:46:27.390000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Its just a file with ```0``` in it",
        "created_at": "2021-12-05T19:47:12.543000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "I have the same here. from `[...]consensus-deployment-ansible/scripts/quick-run/merge-devnets` the one we should use is `../../../../consensus-deployment-ansible/merge-devnet-2/custom_config_data/deploy_block.txt`",
        "created_at": "2021-12-05T19:49:11.168000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "yeah that is where I was running the docker-compose commands",
        "created_at": "2021-12-05T19:49:52.426000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Do I need to edit my docker file?",
        "created_at": "2021-12-05T19:50:38.581000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "../../../$TESTNET_NAME/custom_config_data",
        "created_at": "2021-12-05T19:51:57.373000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Is that wrong?",
        "created_at": "2021-12-05T19:52:04.090000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "I had no need to modify it with xubuntu. Just ./merge-devnet-2.vars to set my external IP in  L2: IP_ADDRESS=",
        "created_at": "2021-12-05T19:52:16.281000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Which directory did you run the docker-compose commands from?",
        "created_at": "2021-12-05T19:52:49.496000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "first (just in case), are we following the same tutorial : https://hackmd.io/dFzKxB3ISWO8juUqPpJFfw ?",
        "created_at": "2021-12-05T19:53:37.024000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "```\nyuno@yuno-pc:~/git/consensus-deployment-ansible/merge-devnet-2/custom_config_data$ ls\nboot_enr.yaml               config.yaml                 deposit_contract.txt  nethermind_genesis.json\nbootstrap_nodes.txt         deploy_block.txt            genesis.json          README.md\ncompute_genesis_details.py  deposit_contract_block.txt  genesis.ssz           tranches\n```",
        "created_at": "2021-12-05T19:53:43.914000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Weird, I see the data there",
        "created_at": "2021-12-05T19:53:47.928000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Yep same tutorial",
        "created_at": "2021-12-05T19:54:03.431000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "you must be in `[...]/consensus-deployment-ansible/scripts/quick-run/merge-devnets\nâžœ  merge-devnets git:(master) âœ— ls -l\ntotal 40K\ndrwxrwxr-x 3 nick nick 4.0K Dez  4 19:12 beacon_data\n-rw-rw-r-- 1 nick nick  853 Dez  5 19:08 docker-compose.geth.yml\n-rw-rw-r-- 1 nick nick  715 Dez  5 16:17 docker-compose.lighthouse.yml\n-rw-rw-r-- 1 nick nick  787 Dez  4 18:50 docker-compose.lodestar.yml\n-rw-rw-r-- 1 nick nick  738 Dez  4 18:50 docker-compose.nethermind.yml\n-rw-rw-r-- 1 nick nick  594 Dez  4 18:50 docker-compose.nimbus.yml\n-rw-rw-r-- 1 nick nick  915 Dez  4 18:50 docker-compose.teku.yml\ndrwxrwxr-x 4 nick nick 4.0K Dez  5 19:00 execution_data\n-rw-rw-r-- 1 nick nick  482 Dez  4 18:50 merge-devnet-1.vars\n-rw-rw-r-- 1 nick nick  474 Dez  4 19:05 merge-devnet-2.vars `",
        "created_at": "2021-12-05T19:55:01.908000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Yep, that is where I am at",
        "created_at": "2021-12-05T19:55:28.114000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "K...I am making progress. I removed the \" in the merge-devnet-x",
        "created_at": "2021-12-05T19:58:00.796000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "```\nTESTNET_NAME=merge-devnet-2\n```\ninstead of\n```\nTESTNET_NAME=\"merge-devnet-2\"\n```",
        "created_at": "2021-12-05T19:58:35.029000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "on my side it works with the double-quotes",
        "created_at": "2021-12-05T20:01:05.598000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Hmm",
        "created_at": "2021-12-05T20:01:19.363000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "What version of docker are you using?",
        "created_at": "2021-12-05T20:01:27.863000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Are you using devnet-1 or devnet-2?",
        "created_at": "2021-12-05T20:01:52.239000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "This is what I get when I try to run geth\n```\nWARN [12-05|20:02:08.909] Catalyst mode enabled                    protocol=eth\npanic: Catalyst started without valid total difficulty\n\ngoroutine 1 [running]:\ngithub.com/ethereum/go-ethereum/eth/catalyst.NewConsensusAPI(0xc0003d5860, 0x0)\n    github.com/ethereum/go-ethereum/eth/catalyst/api.go:105 +0x2e7\ngithub.com/ethereum/go-ethereum/eth/catalyst.Register(0xc000135380, 0xc00031d100)\n    github.com/ethereum/go-ethereum/eth/catalyst/api.go:63 +0xa5\ngithub.com/ethereum/go-ethereum/cmd/utils.RegisterEthService(0x0, 0xc00031d100, 0x1)\n    github.com/ethereum/go-ethereum/cmd/utils/flags.go:1733 +0x2b1\nmain.makeFullNode(0x1)\n    github.com/ethereum/go-ethereum/cmd/geth/config.go:164 +0x2bc\nmain.geth(0xc000138160)\n    github.com/ethereum/go-ethereum/cmd/geth/main.go:318 +0xb8\ngopkg.in/urfave/cli%2ev1.HandleAction({0x12a2160, 0x15bc668}, 0xc0000c0000)\n    gopkg.in/urfave/cli.v1@v1.20.0/app.go:490 +0x5a\ngopkg.in/urfave/cli%2ev1.(*App).Run(0xc000103040, {0xc00003c0e0, 0xe, 0xe})\n    gopkg.in/urfave/cli.v1@v1.20.0/app.go:264 +0x5e6\nmain.main()\n```",
        "created_at": "2021-12-05T20:03:08.388000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "devnet-2 just like the tuto \nDocker version 20.10.11, build dea9396\ndocker-compose --version\ndocker-compose version 1.29.2, build 5becea4c",
        "created_at": "2021-12-05T20:04:21.574000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Oh yeah my docker is older than yours",
        "created_at": "2021-12-05T20:04:57.377000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Actually just docker compose",
        "created_at": "2021-12-05T20:05:14.161000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "docker is the same",
        "created_at": "2021-12-05T20:05:23.911000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "what says `docker logs geth_init ` ?",
        "created_at": "2021-12-05T20:13:03.839000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "https://gist.github.com/spardue/dcb2382fd4b04a9fcf468f4d1f24d3f6",
        "created_at": "2021-12-05T20:14:55.023000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "I had to post it in gist because discord doesn't like the length of the error message",
        "created_at": "2021-12-05T20:15:06.584000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "My docker-compose is up to date now.",
        "created_at": "2021-12-05T20:15:28.814000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "I'm not sure, but because of `Fatal: Failed to write genesis block: database contains incompatible genesis`\nI'll try to `rm  -rf [...]/consensus-deployment-ansible` and start again from the beginning, on a fresh `git clone ...`",
        "created_at": "2021-12-05T20:19:43.203000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "commit 1bce15be89dd522461cc89909a0869cfd22c7663 (HEAD -\u003e master, origin/master, origin/HEAD)\nMerge: 242fb1c 70b4aca\nAuthor: Parithosh Jayanthi \u003cparithosh.jayanthi@ethereum.org\u003e\nDate:   Fri Dec 3 11:38:21 2021 +0100\n\n    Merge pull request #14 from dv8silencer/nimbus_env_var_issue\n    \n    Fix nimbus docker-compose yml",
        "created_at": "2021-12-05T20:20:59.327000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "That is the commit I am on",
        "created_at": "2021-12-05T20:21:03.454000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!801522834023120919\u003e  should I run the `rm -rf` command or is that what you are doing?",
        "created_at": "2021-12-05T20:21:45.378000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "That's what I'll try if I were you, with my knowledge ^^ ; cleanup the data, so clear all and restart from the beginning. Be careful with rm -rf of course ; pass it with the only argument consensus-deployment-ansible",
        "created_at": "2021-12-05T20:24:05.630000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "So I shouldn't run ```rm -rf /``` ...jk",
        "created_at": "2021-12-05T20:28:59.151000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "NICE I got it to work \u003c@!801522834023120919\u003e",
        "created_at": "2021-12-05T20:34:48.609000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Thanks a lot",
        "created_at": "2021-12-05T20:34:52.014000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah ! nice!",
        "created_at": "2021-12-05T20:35:15.584000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "So I am a node now on the public devnet?",
        "created_at": "2021-12-05T20:37:38.661000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Or is this only local to my machine",
        "created_at": "2021-12-05T20:37:47.181000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Nice I guess it is public because I just got 100 ETH from doing the faucet",
        "created_at": "2021-12-05T20:46:00.593000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "\u003e Deposit into the deposit contract",
        "created_at": "2021-12-05T20:55:04.078000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "How do I do that?",
        "created_at": "2021-12-05T20:55:16.316000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "What is the \"deposit contract\"?",
        "created_at": "2021-12-05T20:55:24.628000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "I assume it is:\nhttps://explorer.merge-devnet-2.wenmerge.dev/address/0x4242424242424242424242424242424242424242/transactions",
        "created_at": "2021-12-05T21:08:17.589000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Anyone know why all my transactions in the link above failed? I got an out of gas exception so I increased the gas to way over the amount and then I see the other failures as \"execution: reverted\"\n\nI am 0x5e12d8a014a6537c157EfdF6Afa24aEa3633E1Db",
        "created_at": "2021-12-05T21:25:41.743000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "I'm not on this stage yet (so I cannot tell you how yet). You must not send ether, but interact with the contract by using the `deposit` function. Compare with other tx in https://explorer.merge-devnet-2.wenmerge.dev/address/0x4242424242424242424242424242424242424242/transactions",
        "created_at": "2021-12-05T22:21:43.977000+00:00",
        "attachments": null
    },
    {
        "author": "nico_sz",
        "category": "Testing",
        "parent": "",
        "content": "one way should be in the \"Write contract\" tab.",
        "created_at": "2021-12-05T22:23:37.586000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "Aha thank you",
        "created_at": "2021-12-05T22:29:49.430000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "I was sending eth",
        "created_at": "2021-12-05T22:29:55.415000+00:00",
        "attachments": null
    },
    {
        "author": "balkshamster",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!801522834023120919\u003e Would you mind sending me your public wallet address so I can send you some ETH? On the testnet",
        "created_at": "2021-12-05T23:06:30.617000+00:00",
        "attachments": null
    }
]