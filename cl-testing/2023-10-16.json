[
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I am gonna need some help on a specific hive test, namely: `Invalid PayloadAttributes: Missing BeaconRoot (Cancun)` (note: not the `(Syncing)` variant).\n\nWhat happens in hive is that:\n\n`INFO (Invalid PayloadAttributes: Missing BeaconRoot): Sending EngineForkchoiceUpdated (Syncing=false) with invalid payload attributes: Missing BeaconRoot`\n\n(it sends `forkchoiceUpdateV3` with `parentBlockBeaconRoot=null`)\n\nThis results in an error message:\n\n`{\"jsonrpc\":\"2.0\",\"id\":24,\"error\":{\"code\":-32602,\"message\":\"invalid argument 1 for key 'parentBeaconBlockRoot': argument must be a hex string\"}}`\n\nThen, it calls `eth_getBlockByNumber` to get the latest block. We return the previous head block (so have not updated), but this throws and fails the test.\n\nNethermind seems to pass this test: https://hivecancun.ethdevops.io/viewer.html?suiteid=1697425804-6cd4fd262221c2c5b25514bd190cdeb2.json\u0026suitename=engine-cancun\u0026testid=197\u0026showtestlog=1#L123\n\nIt does throw with same error code as we do, but it seems to update the latest block hash to the one provided by the faulty FCU. So, once `eth_getBlockByNumber` is called on latest block, it returns the block with the hash provided by the faulty FCU. (This seems wrong to me). \n\nCC \u003c@\u0026652918665943056397\u003e \u003c@892053833121923094\u003e \u003c@755913785620824175\u003e \n\n\u003c@\u0026688101493978562687\u003e seems to behave the same. https://hivecancun.ethdevops.io/viewer.html?suiteid=1697427763-608e891ea04220a12235f686f035a4db.json\u0026suitename=engine-cancun\u0026testid=197\u0026showtestlog=1\n\nIf no `parentBeaconBlockRoot` is provided this is is invalid FCU, right? So it should reject this hash?",
        "created_at": "2023-10-16T10:48:58.658000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "This is the problem that we have recently discussed in various channels (\u003c#892088344438255616\u003e  and \u003c#804019759934078987\u003e ). The spec doesn't say it explicitly but it is expected that the forkchoice state if valid is applied disregarding payloadAttributes validity. There is a pending fix to the Engine API spec",
        "created_at": "2023-10-16T14:00:17.103000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@508125616940515329\u003e https://github.com/ethereum/execution-apis/pull/476",
        "created_at": "2023-10-16T14:00:40.768000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Ah OK sorry I missed that discussion ðŸ™‚",
        "created_at": "2023-10-16T14:01:42.509000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "no worries!",
        "created_at": "2023-10-16T15:35:59.598000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "i also opened this PR to address this based on \u003c@425572898787426305\u003e's comment on 476: https://github.com/ethereum/execution-apis/pull/479",
        "created_at": "2023-10-16T15:38:06.106000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Thank you so much! I will review it tomorrow",
        "created_at": "2023-10-16T15:38:52.523000+00:00",
        "attachments": null
    },
    {
        "author": "thedarkjester.eth",
        "category": "Testing",
        "parent": "",
        "content": "remind me, what is the status regarding the block explorer? been getting 404s",
        "created_at": "2023-10-16T18:39:49.899000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Last we heard blockscout was working on it",
        "created_at": "2023-10-16T19:28:03.381000+00:00",
        "attachments": null
    }
]