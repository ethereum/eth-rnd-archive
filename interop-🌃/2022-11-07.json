[
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "üëã  Here is the hackmd to interop Prysm and Geth for withdrawals: https://hackmd.io/-7X3aN3KRvOcY2TsDbFcvQ\n\u003c@755590043632140352\u003e you have edit permission, feel free to edit anything as you see fit",
        "created_at": "2022-11-07T03:44:34.307000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Great Sunday (and Saturday) work everyone!",
        "created_at": "2022-11-07T04:49:27.302000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Yes, we were discussing starting to use V2 in advance to the fork. In this case EL should just ignore withdrawals. The ugly part of doing it this way is `ExecutionPayloadV2` which `blockHash` for the same payload with empty withdrawals right after and before Capella would be different",
        "created_at": "2022-11-07T04:52:38.286000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "But this is just inconsistency, I can't see any potential problem with it",
        "created_at": "2022-11-07T04:56:53.219000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I think anyway CL clients will have to do this in stages: we're forced anyways to call v1 before Capella and V2 after, or risk to have users that update the CL and leave the EL update for the last minute to be broken",
        "created_at": "2022-11-07T07:45:47.160000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "CL may switch gears to V2 as soon as it is presented in a list of capabilities (which is yet to define) without waiting for Capella block",
        "created_at": "2022-11-07T07:56:02.241000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Everything solved with the bad hash now?",
        "created_at": "2022-11-07T10:21:55.561000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "If you're able to interop, could you create some similar docs as prysm? \nIf so we could start the first devnet soonish",
        "created_at": "2022-11-07T10:22:59.960000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e I didn't check that balances went up in my interop, that's your problem if they don't üòõ I did check that the validators decreased balances in the beacon chain",
        "created_at": "2022-11-07T10:44:03.355000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I'll try out the instructions and verify :)",
        "created_at": "2022-11-07T10:46:29.323000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "What do people think about removing `INVALID_BLOCK_HASH` status in a `newPayloadV2`? https://github.com/ethereum/execution-apis/issues/270",
        "created_at": "2022-11-07T11:45:19.108000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e spec tests have been updated with the latest withdrawal process?",
        "created_at": "2022-11-07T11:48:51.244000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "want to have a go at it",
        "created_at": "2022-11-07T11:49:10.870000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i haven't looked back into ethereumjs stateroot/blockhash not matching but withdrawal functionality minus the timestamp based forking is mostly implemented, looking to get lodestar ready for muli node interop",
        "created_at": "2022-11-07T11:50:56.197000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "not yet, but you can run the generator in my PR's branch. I'm hoping that will be merged today-ish and \u003c@415109946682769408\u003e will be generating the test-vectors",
        "created_at": "2022-11-07T12:06:23.514000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I want to merge that before Danny comes back from vacations and starts requesting a bunch of changes, if it's already merged then it'll be someone else's problem üòÑ",
        "created_at": "2022-11-07T12:06:59.787000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I went over it and changed a couple of typos but also changed the command for prysmctl, take a look just in case. Thanks for writing this up",
        "created_at": "2022-11-07T12:07:44.394000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "why not start with shanghai at 0 with post merge genesis, would be really simple imho",
        "created_at": "2022-11-07T12:31:43.084000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "we can't start from a merged state",
        "created_at": "2022-11-07T12:33:17.315000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I think \u003c@833706406699073536\u003e is working on that",
        "created_at": "2022-11-07T12:33:32.244000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "k understood",
        "created_at": "2022-11-07T12:33:40.125000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e is MAX_WITHDRAWALS_PER_PAYLOAD for mainnet 8?",
        "created_at": "2022-11-07T12:51:09.526000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i think your PR missed that value for mainnet preset",
        "created_at": "2022-11-07T12:51:22.361000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ohh sorry its already there",
        "created_at": "2022-11-07T12:52:05.460000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "in the diff you changed value for minimal, so i didn't see any corresponding diff and assumed it was missing",
        "created_at": "2022-11-07T12:52:31.245000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Oh it was reduced? I thought I had it at 16",
        "created_at": "2022-11-07T12:58:13.906000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "minimal you reduced from 8 to 4",
        "created_at": "2022-11-07T12:58:30.676000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "yeah minimal was reduced because the max at 8 would be enforced and that would be more than the max per epoch that was proposed before I think",
        "created_at": "2022-11-07T12:59:03.043000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yea, thats ok, it got me confused about expecting a change for mainnet too üòÜ",
        "created_at": "2022-11-07T12:59:26.786000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "self sorted",
        "created_at": "2022-11-07T12:59:37.979000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "I think it does, although could be clearer. There are some distinctions like \n```\nIf withdrawal functionality is activated, client software MUST return an INVALID status with the appropriate latestValidHash if payload.withdrawals is null. Similarly, if the functionality is not activated, client software MUST return an INVALID status with the appropriate latestValidHash if payloadAttributes.withdrawals is not null. Blocks without withdrawals MUST be expressed with an explicit empty list [] value.\n```",
        "created_at": "2022-11-07T13:05:52.513000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I don't think we should abuse INVALID status in this case. An error suites better IMO. I guess this is a line of code on EL side, like `if Capella then assert withdrawals are not nil else assert withdrawals are nil`",
        "created_at": "2022-11-07T13:21:36.065000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I think invalid is good for us cause then we will mark the block as invalid and not allow continue on that branch. Also it doesn' t seem to change the semantics of it right? it's an invalid block from the pov of the EL",
        "created_at": "2022-11-07T13:27:38.428000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "Hmm yeah I think of it like \"if withdrawals is non-nil, the CL thinks it is in the block and if it is nil, the CL thinks withdrawals aren't enabled\" -- so it is less of an engine API error, rather, it's potentially telling the EL an invalid payload",
        "created_at": "2022-11-07T13:32:01.941000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I am treating it as rather a miscommunication error between clients.\n\nCL is not capable of processing a block containing withdrawals before Capella, right? This block will be discarded with corresponding penalties applied to the remote peer if applicable. If EL is syncing and someone in the network gives it an EL block containing withdrawals the same should happen. Actually, in the latter case INVALID will be the response I guess ü§î",
        "created_at": "2022-11-07T13:40:00.195000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I guess in the case that you're describing CL should start complaining before making any Engine API call",
        "created_at": "2022-11-07T13:43:32.290000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Considering a direct call to Engine API, an incorrect value for `withdrawals` field may only occur because of a bug in CL, and not because the payload was INVALID",
        "created_at": "2022-11-07T13:56:25.416000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "A bug in the CL may render the payload invalid. I mean I don't see much difference in the CL screwing up and sending an out of order withdrawal thus rendering the payload INVALID, vs the CL screwing up and sending a null withdrawal list.",
        "created_at": "2022-11-07T14:07:58.656000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "This is true, there could be endianness issue üòù  Or wei-gwei conversion issue. I am not insisting on the error, just trying to be sure that we don't abuse INVALID status for no reason",
        "created_at": "2022-11-07T14:32:12.554000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e the way validatorIndex will be initiaized (from 0) and then used in withdrawals loop, the first validator probe will be on 1 not on 0th",
        "created_at": "2022-11-07T14:42:13.397000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "do we want to change semantics of validatorIndex in state to next to be probed validator (and adjust the loop accordingly?)",
        "created_at": "2022-11-07T14:43:46.710000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "It's commented on my PR, I dislike this less than the change in the spec to start at 0, to start at 0 you have to move the sum to the end of the loop and have twice the ugly construction of having to mod out by the number of validators",
        "created_at": "2022-11-07T15:00:55.159000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ok, have been able to interop with geth on the without queue impl as well  üéâ",
        "created_at": "2022-11-07T17:28:16.428000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "0916239c6296903375b4e8dfc36189ce63ece67232af527d513472b617504f17"
            }
        ]
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e do you have some next setup where i can try to see if i can sync up the prysm nodes?",
        "created_at": "2022-11-07T17:29:14.443000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "that will sort of confirm if everything lines up, if no issues we can have multi client testnet",
        "created_at": "2022-11-07T17:30:40.203000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdannyryan\u003e \u003e \u003cdannyryan\u003e  ha, I just reviewed the PR and suggested we start at 0 and do the mod twice...\n\nconforming these two vars to the same convention will greatly reduce chance of off-by-one errors and make thinking and talking about the feature simpler (re @amphora_interop_bot: \u003cpotuz\u003e [reply]: It's commented on my PR, I dislike this less than the change in the spec to start at 0, to start at 0 you have to move the sum to the end of the loop and have twice the ugly construction of having to mod out by the number of validators)",
        "created_at": "2022-11-07T17:30:58.948000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "we talked about this with Alex, I don't feel strongly, but it is really awkward to have twice the moding out, I believe this approach is less prone to off-by-one errors, but I may be proven wrong. Wellcome back!",
        "created_at": "2022-11-07T17:35:32.397000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "not really, if you start with the same genesis.ssz I don't see why we shouldn't be able to launch a devnet today",
        "created_at": "2022-11-07T17:37:40.239000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "time to get \u003c@199561711278227457\u003e in?",
        "created_at": "2022-11-07T17:42:35.293000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Tomorrow",
        "created_at": "2022-11-07T17:43:34.116000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Or maybe \u003c@412614104222531604\u003e?",
        "created_at": "2022-11-07T17:44:17.210000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "start your nodes give me the enr + genesis.ssz + config.yaml + genesis.json i guess should be sufficient, let me sync it up, else gotta figure out the infra (need public ip/nat)",
        "created_at": "2022-11-07T17:46:34.245000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e \u003c@792822129019584562\u003e  Pari is on holiday. I‚Äôll try to be the short term replacement. I‚Äôll talk with Marius tomorrow to clarify details about what specifics we gonna need for the testnet, and share details afterwards.",
        "created_at": "2022-11-07T19:18:54.593000+00:00",
        "attachments": null
    }
]