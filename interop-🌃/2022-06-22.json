[
    {
        "author": "samcm",
        "category": "Testing",
        "parent": "",
        "content": "**Goerli Shadow Fork 4 ** has been deprecated",
        "created_at": "2022-06-22T04:12:34.773000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "Testing",
        "parent": "",
        "content": "I think we generally do support it but still working on scenarios where we have issues. So consider it WIP.",
        "created_at": "2022-06-22T08:09:31.984000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "In that event, I'm not sure how complete a replacement `eth_chainId` is for `net_version` for engine API purposes. A CL has to get a fair way into syncing before discovering something it could otherwise discover sooner.",
        "created_at": "2022-06-22T09:44:58.989000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "`chainId` is a part of network configuration, couldn't it be returned disregarding the eip155 activation?",
        "created_at": "2022-06-22T10:51:44.977000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "There is a minor clarification to the spec, please, put a comment if you have any concerns https://github.com/ethereum/execution-apis/pull/244",
        "created_at": "2022-06-22T11:03:04.426000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I am going to discuss the state of LVH support during the ACD on Friday, sharing a progress and difficulties if any on supporting this feature in your EL client would be very valuable during the call https://github.com/ethereum/pm/issues/551#issuecomment-1162955259",
        "created_at": "2022-06-22T11:05:39.146000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003e when BeaconBlock(B3) appeared to be invalid but the B3 itself is VALID\nHow did the EL receive B3 here if the beacon block that included it was invalid?",
        "created_at": "2022-06-22T11:41:16.678000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "It could be the case if beacon block and payload are processed in parallel",
        "created_at": "2022-06-22T11:43:27.931000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "So the EL got the block from its p2p layer but not from it's CL? Via a `notifyNewPayload`",
        "created_at": "2022-06-22T11:44:57.819000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "No, it got if from CL but before CL has completed `state_transition(BeaconBlock(B3))`, thus not all beacon block validation has been yet passed, for instance, `state_root` mismatch is still possible for the beacon block",
        "created_at": "2022-06-22T11:47:31.088000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Perhaps other teams can chime in here, this will never happen on prysm as we only send a `newPayload` after we executed the transition and verified the state root and the validity of all signatures. cc \u003c@363800010518822915\u003e",
        "created_at": "2022-06-22T12:37:50.072000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I would suggest that we poll CL clients, cause if all implement this already this way, then there's no need to add complexity (even if minor) and change behavior on ELs.",
        "created_at": "2022-06-22T12:39:07.385000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "fair, I would also poll EL clients, as if this small change doesn't break them then it should be fine to have it",
        "created_at": "2022-06-22T12:50:05.554000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Out of curiosity, what is the purpose of waiting for beacon state transition before sending a payload? Calling to EL can at least be done during the `process_execution_payload` call with the response handled asynchronously",
        "created_at": "2022-06-22T12:51:45.095000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The state transition is quite fast as we have most of it precomputed, the overhead of spinning a routine and wait and the complication of having to lock on both later would probably offset any gain, but I would want to see benchmarks showing otherwise. We can't even insert the block to forkchoice before both have been validated though. If there are good benchmarks on the async methods then I'd be happy to implement them, on a first look it does not look so hard, at least for regular sync (not in batches)",
        "created_at": "2022-06-22T12:55:03.606000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "This is definitely an optimisation but it was one of design considerations from the beginning",
        "created_at": "2022-06-22T13:42:48.444000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "We benchmarked last time, and it was just a few ms. The complexity vs. optimization doesn't seem to be worth it. I'd be happy to optimize it if someone comes back and tells us that it will be longer (seconds in the worst case?)",
        "created_at": "2022-06-22T13:45:44.549000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "We do the state transition (incl state root) and new_payload in parallel. It was the natural way to do it for our code and it seemed like it might have timing benefits. That being said, very rough benchmarks on Ropsten havenâ€™t shown tangible benefits. I thought it might have more effect on mainnet where the state transition is bigger and I assume EL verification is more intense.",
        "created_at": "2022-06-22T20:10:56.406000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Please if you do have benchmarks on the shadow forks on mainnet I'd be very grateful to see them",
        "created_at": "2022-06-22T21:44:53.884000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Yep, teku also executes the two in parallel. It would make things more complex for us to not do so.",
        "created_at": "2022-06-22T22:41:38.117000+00:00",
        "attachments": null
    }
]