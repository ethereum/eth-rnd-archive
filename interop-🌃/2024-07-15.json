[
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "sure will look at logs",
        "created_at": "2024-07-15T10:02:58.365000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "is there a kurtosis config to repro this too?",
        "created_at": "2024-07-15T10:04:54.547000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I'm 99% the config pinned is the one",
        "created_at": "2024-07-15T10:05:36.133000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "yes, the pinned config triggers it ðŸ™‚",
        "created_at": "2024-07-15T10:16:41.729000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "ok, will see if I can repro it",
        "created_at": "2024-07-15T10:20:56.287000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "where's a link to current docs on running Kurtosis? already have the current version of `kurtosis-cli` installed",
        "created_at": "2024-07-15T11:37:25.351000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(and docker etc)",
        "created_at": "2024-07-15T11:37:44.064000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethpandaops/ethereum-package",
        "created_at": "2024-07-15T11:38:02.228000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "check the readme here",
        "created_at": "2024-07-15T11:38:11.545000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "so far so good, will note that Nimbus passes all the consensus spec tests on this, so curious to see what's happening",
        "created_at": "2024-07-15T11:41:50.496000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "it's running but Nimbus is using info, not debug, logging. what's the best way to enable this? also none of the assertoor checks seem to fire at epoch 9 or 10",
        "created_at": "2024-07-15T12:09:16.619000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "if it's the massive-deposit-0x02 one, it looks like that's at slot 38?",
        "created_at": "2024-07-15T12:13:24.190000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "you can set global_log_level: debug",
        "created_at": "2024-07-15T12:15:59.176000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "but you have to restart a new enclave to change it",
        "created_at": "2024-07-15T12:17:51.816000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "yeah, doing that now, `kurtosis clean -a` enough?",
        "created_at": "2024-07-15T12:18:07.960000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2024-07-15T12:18:16.529000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "there's some issue already seeing with etherumjs blocks failing signature checks by slot 103 or so. but maybe that's unrelated, and/or I didn't check if it was happening with other ELs, that's just the one I happened to see first in logs.",
        "created_at": "2024-07-15T12:21:19.286000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "no idea yet if a Nimbus or something-else issue",
        "created_at": "2024-07-15T12:21:44.476000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Hey, can you send more logs, because we don't see this error.",
        "created_at": "2024-07-15T12:30:50.019000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "running the pinned config, is this expected, the blocks behind?",
        "created_at": "2024-07-15T12:35:37.730000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "2024-07-15T1234523940427320000.png",
                "content": "6c307b2c864bac43de44cdc4ea1681b1826d3ba910ad78a3b31a78be434b0a55"
            }
        ]
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "they come and go -- `nethermind-grandine` is fine now but `geth-grandine` still not for example",
        "created_at": "2024-07-15T12:43:32.502000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its probably related to this?",
        "created_at": "2024-07-15T12:43:54.092000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "well, we can't reproduce",
        "created_at": "2024-07-15T12:44:11.197000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "how to trigger those consolidations?",
        "created_at": "2024-07-15T12:44:18.883000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "you running the same assertoor tests?",
        "created_at": "2024-07-15T12:44:31.217000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "we run exactly pinned config",
        "created_at": "2024-07-15T12:44:41.500000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "it should be automatically triggered when running assertoor with the config above.\ncan check if assertoor is running?   it should have it's own UI",
        "created_at": "2024-07-15T12:45:20.657000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "just to make sure, are you running with `--image-download always` ?",
        "created_at": "2024-07-15T12:45:22.306000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "yes.",
        "created_at": "2024-07-15T12:45:52.794000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "yes, the grandine issue is unrelated ðŸ™‚   wait till epoch 10 and you'll see all nimbus clients forking off",
        "created_at": "2024-07-15T12:46:28.871000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "can you send me the assertoor logs via PM?",
        "created_at": "2024-07-15T12:50:24.615000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Can you try with the latest `electra` branch? We can only reproduce ethereum js problem, but not the rest.",
        "created_at": "2024-07-15T13:19:28.576000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2024-07-15T13:20:09.343000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "photo_2024-07-15_16-18-03.jpg",
                "content": "7d24c9ed072b1383de77826be068ebc3e6a3bb4a34342f5c6497646f639b0fb0"
            }
        ]
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "confirmed, at slot 320 exactly",
        "created_at": "2024-07-15T13:25:07.550000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "looks exactly the same on my side with latest electra branch image. ethereumjs-grandine is always optimistic?",
        "created_at": "2024-07-15T13:31:26.471000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e in Dora the block at slot 320 has no deposits, so it's a pre-existing one?",
        "created_at": "2024-07-15T13:33:13.953000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "oh, it's validator 768 for me, with 1000 ETH",
        "created_at": "2024-07-15T13:34:08.036000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "yea, exactly.   that validator activates in epoch 10.  As that's the only special thing happening at epoch 10, I assumed it's related ðŸ™‚",
        "created_at": "2024-07-15T13:36:31.631000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "the actual error in Nimbus is an `Invalid block` error, `state root verification failed`",
        "created_at": "2024-07-15T13:37:09.009000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "but it's presumably related yes",
        "created_at": "2024-07-15T13:37:35.731000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@654267572107083777\u003e thats exactly the bug that pk reported here.",
        "created_at": "2024-07-15T13:38:10.808000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "oops, indeed",
        "created_at": "2024-07-15T13:38:32.241000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "for reference, the state/block pair which triggers this in Nimbus",
        "created_at": "2024-07-15T15:33:43.095000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "block320.ssz",
                "content": "07ef77a0cd08f87b3ec4f4102da489fb08f088694af6a044dfd727a77a622e2e"
            },
            {
                "type": "",
                "origin_name": "state319.ssz",
                "content": "97ffcdd004da88ac74f9bcb1eecf39fbd1d2267b4a0c363c9e9b578e45e90c15"
            }
        ]
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(I'm not going to wait ~1 hour to reach the repro each time...)",
        "created_at": "2024-07-15T15:34:04.111000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "```\n$ diff -u good.json bad.json \n--- good.json    2024-07-15 15:44:11.642401815 +0000\n+++ bad.json    2024-07-15 15:44:00.110381928 +0000\n@@ -25304,7 +25304,7 @@\n       \"withdrawal_credentials\": \"0x02000000000000000000000065d08a056c17ae13370565b04cf77d2afa1cb9fa\",\n       \"effective_balance\": \"1000000000000\",\n       \"slashed\": false,\n-      \"activation_eligibility_epoch\": \"10\",\n+      \"activation_eligibility_epoch\": \"18446744073709551615\",\n       \"activation_epoch\": \"18446744073709551615\",\n       \"exit_epoch\": \"18446744073709551615\",\n       \"withdrawable_epoch\": \"18446744073709551615\"\n```\nbad is what Nimbus computes and good is what one of the CLs on the canonical chain computes",
        "created_at": "2024-07-15T15:45:46.198000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "can you not test with minimal preset ?",
        "created_at": "2024-07-15T16:04:34.422000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "I don't know if that'd help. but basically it looks like Nimbus never updated to use https://github.com/ethereum/consensus-specs/blob/v1.5.0-alpha.3/specs/electra/beacon-chain.md#updated-is_eligible_for_activation_queue",
        "created_at": "2024-07-15T16:06:04.255000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "i.e. changing to minimal would involve figuring out how to change the whole Kurtosis setup, including other clients",
        "created_at": "2024-07-15T16:06:33.475000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Kurtosis already supports minimal preset and we often tests clients without, or do you mean for some specific scenario?",
        "created_at": "2024-07-15T16:07:25.309000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its already done sir. ðŸ˜„",
        "created_at": "2024-07-15T16:10:21.851000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```yaml\nparticipants_matrix:\n  el:\n    - el_type: nethermind\n      el_image: nethermindeth/nethermind:pectra\n    - el_type: geth\n      el_image: ethpandaops/geth:lightclient-prague-devnet-1\n    - el_type: ethereumjs\n      el_image: ethpandaops/ethereumjs:master\n  cl:\n    - cl_type: teku\n      cl_image: ethpandaops/teku:master\n    - cl_type: nimbus\n      cl_image: ethpandaops/nimbus-eth2:unstable-minimal\n    - cl_type: lodestar\n      cl_image: ethpandaops/lodestar:electra-fork\nnetwork_params:\n  electra_fork_epoch: 1\n  min_validator_withdrawability_delay: 1\n  shard_committee_period: 1\n  preset: minimal\nadditional_services:\n  - dora\n```\n\nteku/lodestar will be able to automatically handle minimal preset, nimbus needs a -minimal after its image name and it should handle it too.",
        "created_at": "2024-07-15T16:12:36.204000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "(I have removed the assertoor tests, but you can keep those around, and it should still work)",
        "created_at": "2024-07-15T16:12:48.958000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "you gonna be getting 6s slot time with 8slots per epoch",
        "created_at": "2024-07-15T16:12:58.489000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "oh, nice",
        "created_at": "2024-07-15T16:31:14.014000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "the state/block thing I partly posted because it or something like it can be used as a test case in the consensus spec tests",
        "created_at": "2024-07-15T16:31:33.840000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "ideally this would have been caught/prevented before kurtosis",
        "created_at": "2024-07-15T16:32:10.575000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/status-im/nimbus-eth2/pull/6427 fixes this for me",
        "created_at": "2024-07-15T16:53:14.501000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "merged into `unstable`, should address this issue",
        "created_at": "2024-07-15T19:16:04.259000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "Small pectra devnet-1 update: \n\n* Lighthouse joined the game, ~~but unfortunately splits out at slot 54 (issue with consolidation requests)~~ fixed ðŸ™‚\n* Grandine issue with consolidation requests is resolved with latest image.\n* Nimbus issue with validator activation at epoch 10 is resolved too.",
        "created_at": "2024-07-15T22:14:26.750000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2024-07-15T22:14:42.084000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "d8a1b8cba9fe53833bfc9cb044703eae0c05ead7efba5762e3d546827ceaa110"
            }
        ]
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "I think we're fine for devnet-1 on the CL side (5 clients ready, only prysm missing), but we currently only have 3 clients on EL side.\nAny update from besu, erigon or reth?",
        "created_at": "2024-07-15T22:15:37.252000+00:00",
        "attachments": null
    }
]