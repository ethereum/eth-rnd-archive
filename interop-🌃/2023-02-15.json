[
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I would not change V1 in the spec but implementations can remove it from V1, as even in the context of V1 `INVALID` and `INVALID_BLOCK_HASH` are semantically equal (there were not initially but then there was a change to `INVALID` which made them equal). One potential issue are hive tests that expect `INVALID_BLOCK_HASH` to be returned to `newPayloadV1` call with payload having invalid `blockHash`.",
        "created_at": "2023-02-15T03:54:13.587000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Yes, the hive tests forced us into making V2 non-backwards compatible with V1 due to this change.",
        "created_at": "2023-02-15T04:18:40.706000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Similar thing (though can't remember if it's checked in hive) for the check about terminal PoW block https://github.com/ethereum/execution-apis/blob/main/src/engine/shanghai.md#specification  ...just realised that's a \"MAY NOT\" rather than \"MUST NOT\", but presumably it'll become a must not at some point",
        "created_at": "2023-02-15T04:19:06.726000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Here is the PR, https://github.com/ethereum/execution-apis/pull/338\n\nI don't think removing TTD check will eventually become mandatory. The only mandatory thing is `INVALID_BLOCK_HASH` deprecation. Would it be possible to turn off Hive tests checking `INVALID_BLOCK_HASH`, cc \u003c@892053833121923094\u003e ? I can't think of any adverse effects of them to be turned off",
        "created_at": "2023-02-15T04:36:58.604000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'm struggling to debug this, partly because the snooper logs are massive - there's a lot of `eth_getBlockByNumber` being sent. I don't have the snooper logs from when the error happened, wonder if they got rotated out of existence?",
        "created_at": "2023-02-15T06:20:11.163000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Not sure if this is normal but there's an array of eth_getBlockByNumber requests and this warning\n`Feb 15 02:08:19.786 2023 WARNING: request not formatted as JSON-RPC request [invalid type: map, expected u64 at line 2 column 2]:`",
        "created_at": "2023-02-15T06:20:57.617000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "Non-urgent request, but if the withdrawals-testnet configs renamed `boot_enr.txt` to `boot_enr.yaml` then they would work with Lighthouse without any manual `--bootstrap-nodes` plumbing (for reference: \u003chttps://github.com/sigp/lighthouse/tree/stable/common/eth2_network_config/built_in_network_configs/prater\u003e).\n\nDoes any CL client rely on `boot_enr.txt`? I thought we were only split between two formats: `boot_enr.yaml` (always YAML) and `bootstrap_nodes.txt` (always TXT)",
        "created_at": "2023-02-15T06:44:35.458000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@412614104222531604\u003e üôè",
        "created_at": "2023-02-15T06:45:31.399000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I think nimbus needs txt",
        "created_at": "2023-02-15T06:54:04.259000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e do you know the log limit of the snooper ?",
        "created_at": "2023-02-15T06:54:45.738000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "but not named `boot_enr.txt` I think? that would imply 3 filenames",
        "created_at": "2023-02-15T06:56:56.374000+00:00",
        "attachments": null
    },
    {
        "author": "samcm",
        "category": "Testing",
        "parent": "",
        "content": "We can probably support both going forward",
        "created_at": "2023-02-15T07:15:26.714000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "PR explicitly requiring CL clients to switch to V2 methods starting since Shanghai https://github.com/ethereum/execution-apis/pull/380. Sharing it for visibility and hope there is no opposition to it.",
        "created_at": "2023-02-15T07:19:45.392000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "500mb per log file, then it gets rotated",
        "created_at": "2023-02-15T07:37:22.491000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Ok yeh, it‚Äôs at least 1GB so would have been rotated ü•π",
        "created_at": "2023-02-15T08:13:46.262000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@792822129019584562\u003e is this amount of eth_getBlockByNumber requests normal for lodestar?",
        "created_at": "2023-02-15T09:00:00.817000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "they must be for deposit fetching",
        "created_at": "2023-02-15T09:00:27.034000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "but if deposit fetching is stuck, it will keep making requests again and again",
        "created_at": "2023-02-15T09:01:06.884000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "do you keep seeing same request or blocknumber is moving forward?",
        "created_at": "2023-02-15T09:01:23.046000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Moving forward from what I saw",
        "created_at": "2023-02-15T09:01:41.290000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "then it is normal i think, but if there is looping, then do let know",
        "created_at": "2023-02-15T09:02:28.012000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Do they get sent as batch requests? Actual number of requests on the wire may be smaller than I initially thought if so",
        "created_at": "2023-02-15T09:04:53.289000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes i think we batch it in 1000 (and scale down by 1/2 every time it fails)",
        "created_at": "2023-02-15T09:12:47.639000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "is someone playing with devnet 7 teku-besu-3 ?",
        "created_at": "2023-02-15T10:12:33.326000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "looks like the beacon node is started with a bad flag",
        "created_at": "2023-02-15T10:12:59.764000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "actually seems like its all teku-besu nodes",
        "created_at": "2023-02-15T10:13:32.094000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```To display full help:\nteku [COMMAND] --help\nUnknown option: '--Xmetrics-block-timing-tracking-enabled'```",
        "created_at": "2023-02-15T10:13:43.943000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "has a flag been deprecated ?",
        "created_at": "2023-02-15T10:14:14.623000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "`  --Xmetrics-block-timing-tracking-enabled`",
        "created_at": "2023-02-15T10:14:22.067000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "restarted all teku-besu nodes removing this flag",
        "created_at": "2023-02-15T10:16:01.420000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "ah yes, Paul did mention that flag was deprecated",
        "created_at": "2023-02-15T10:43:41.857000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Renamed to `--metrics-block-timing-tracking-enabled` actually...promoted from eXperimental by removing the 'X' I guess",
        "created_at": "2023-02-15T10:46:06.598000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ah so I should still have the flag just the one without x in it ?",
        "created_at": "2023-02-15T10:48:03.908000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "what about `  --Xprogressive-balances-mode=USED` ?",
        "created_at": "2023-02-15T10:48:48.709000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I don't see that one mentioned in the changelog: https://github.com/ConsenSys/teku/blob/master/CHANGELOG.md#breaking-changes",
        "created_at": "2023-02-15T10:50:32.674000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "They have some other modes, but for now you can remove the flag and let it default. there's nothing specific to the flag that we want to test.",
        "created_at": "2023-02-15T11:04:30.062000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "prepared 360k bls change, will have an 8k queue for deposits, and gonna make a 10k exit queue for devnet 7. Might worth keeping in eye on how things will work out during shanghai on it (tomorrow 9 am utc).",
        "created_at": "2023-02-15T11:59:37.527000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Same as I suspect all other clients have replied, INVALID and INVALID_BLOCK_HASH are the same for us",
        "created_at": "2023-02-15T13:12:34.618000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "The hive tests already pass with either method, but we could update them to only allow `INVALID`?",
        "created_at": "2023-02-15T14:38:26.721000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "That would break EL clients that still support `INVALID_BLOCK_HASH` for V1",
        "created_at": "2023-02-15T14:45:10.536000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I think allowing both is the best option",
        "created_at": "2023-02-15T14:49:48.478000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "This would allow for re-using the same test for both cases, right?",
        "created_at": "2023-02-15T14:50:38.027000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Yes that too üëç",
        "created_at": "2023-02-15T15:05:42.370000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "fyi we ran into an issue with blind block on capella, I think all clients will eventually run to this without some modifications. It's worth sharing: https://github.com/ethereum/builder-specs/issues/69\n\ncc \u003c@607055410104500244\u003e \u003c@539495253418180618\u003e \u003c@654267572107083777\u003e \u003c@688748669268132001\u003e \u003c@680234424037670912\u003e",
        "created_at": "2023-02-15T16:47:27.430000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "I never understood why the withdrawals were just a root in the blinded block, I must admit.  The point of making transactions a root rather than a full list was builder protection, no such protections apply for withdrawals.\n\nThere is an argument that the withdrawals should be able to be derived from any in-sync beacon node, but it's a pain to get the builder to have to map them.  One possibility is https://github.com/ethereum/beacon-APIs/issues/301 the other is to send a full withdrawal list rather than a root with the blinded block.",
        "created_at": "2023-02-15T16:51:55.700000+00:00",
        "attachments": null
    },
    {
        "author": "realbigsean",
        "category": "Testing",
        "parent": "",
        "content": "This PR solves it right? this is what we have implemented https://github.com/ethereum/consensus-specs/pull/3092/files",
        "created_at": "2023-02-15T17:12:10.350000+00:00",
        "attachments": null
    },
    {
        "author": "realbigsean",
        "category": "Testing",
        "parent": "",
        "content": "I think the point is so a blinded block contains an `ExecutionPayloadHeader` as opposed to a new type that is a hybrid of the header and full `ExecutionPayload`",
        "created_at": "2023-02-15T17:15:56.847000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, but `ExecutionPayloadHeader` isn't really a header, it's just an execution payload with the transactions replaced by their root.  At least, is was until capella when the withdrawals root turned up.",
        "created_at": "2023-02-15T17:19:22.043000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Well, if the ELs are already having trouble with their withdrawal handling (nil vs empty, etc), and there are no tests, and no testable relays, and no (I think still?) updated-to-capella mock relays, reduced technical risk is a good argument",
        "created_at": "2023-02-15T17:20:18.050000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "If FB wants to surprise people 3 days before Sepolia fork or something with a working relay, that is their business, but then, please, no additional complex fields",
        "created_at": "2023-02-15T17:20:52.282000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "ELs only ever deal with full execution payloads, though, so this wouldn't impact them.",
        "created_at": "2023-02-15T17:26:52.767000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "This particular issue, in detail, yes. It illustrates the nuances of dealing with full withdrawals in general.",
        "created_at": "2023-02-15T17:27:26.279000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "i don't understand the problem \u003c@363800010518822915\u003e ... are you saying that builders need to be aware of this?",
        "created_at": "2023-02-15T17:27:47.741000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "That, to me, is sort of the tradeoff. If this were two months ago, whatever. Try things, there is time. Now, delay on their end means artificial emergency/crisis for other people. No.",
        "created_at": "2023-02-15T17:28:19.316000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "im working on deploying one today, have a few other things to get out of the way though (mock relay/builder that is)",
        "created_at": "2023-02-15T17:28:28.065000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "And what I can is push back against suggestions such as yours, \u003c@144468805697929216\u003e to re-add complexity that heightens this artificial emergency/crisis",
        "created_at": "2023-02-15T17:28:54.556000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Sorry, I know I usually am not this blunt/direct",
        "created_at": "2023-02-15T17:29:21.530000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Well at the least there will need to be some way for external builders to obtain the list of next withdrawals for a given state.  The withdrawals root has to come from somewhere, if not the withdrawals themselves.",
        "created_at": "2023-02-15T17:30:39.795000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Maybe. Their problem to handle on their end.",
        "created_at": "2023-02-15T17:32:54.336000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "See time point above.",
        "created_at": "2023-02-15T17:33:04.278000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "i think we can extend the beacon-apis (like the issue you linked above jgm), either with a new endpoint or combine them somehow into one builder endpoint\n\ni expect in the limit that builders will run their own custom software anyway where they embed a consensus client that can yield withdrawals",
        "created_at": "2023-02-15T17:33:22.103000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "It would also be nice to have a similar endpoint to be able to allow validator clients to confirm that external builders are giving them valid payloads.",
        "created_at": "2023-02-15T17:34:42.837000+00:00",
        "attachments": null
    },
    {
        "author": "realbigsean",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@654267572107083777\u003e are you interested in testing this out? https://github.com/realbigsean/mock-relay/pull/6 I'm still working on testing it with lightohuse",
        "created_at": "2023-02-15T17:58:32.901000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Validator needs to be aware of it to process `ExecutionPayloadHeader` for the state root.  Relayer needs to be aware to verify `ExecutionPayloadHeader`",
        "created_at": "2023-02-15T17:59:27.706000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "yes, I am -- is it realistic in that it does not need separate fcUs, etc as some of the mock relays have (basically forking the builder protocol)?",
        "created_at": "2023-02-15T18:00:46.362000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(whether it gets that information from elsewhere, that's fine. but if it starts needing modification to the CL to work with a not-actually-builder-spec-relay, then it is not a real test)",
        "created_at": "2023-02-15T18:01:44.702000+00:00",
        "attachments": null
    },
    {
        "author": "realbigsean",
        "category": "Testing",
        "parent": "",
        "content": "from the CL's perspective it's meant to be exactly the same",
        "created_at": "2023-02-15T18:02:52.515000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "ah, nice.",
        "created_at": "2023-02-15T18:03:06.299000+00:00",
        "attachments": null
    },
    {
        "author": "realbigsean",
        "category": "Testing",
        "parent": "",
        "content": "it ends up sending an fcu to the EL on it's own, so the EL gets some duplicate requests",
        "created_at": "2023-02-15T18:03:27.154000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Sure, seems reasonable",
        "created_at": "2023-02-15T18:10:36.436000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "I'm working on the hive tests for the builder api too, and yes it's been kind of annoying to come up with the withdrawals list, but so far it's doable",
        "created_at": "2023-02-15T18:16:56.640000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Getting back to this. On `process_withdrawals(state: BeaconState, payload: ExecutionPayload)` how do you pass in `ExecutionPayloadHeader` instead of `ExecutionPayload`. That seems like it could be an implementation detail but not sure how to harmonize it in spec",
        "created_at": "2023-02-15T18:51:34.723000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "this is what we're doing too",
        "created_at": "2023-02-15T20:43:59.314000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "Basically yes for teku... sort of... we have an interface provided by ExecutionPayload and ExecutionPayloadHeader, and that allows us to fetch the root depending on the object passed in...\nSo regardless of whether a payload or header is passed, we just use the provided root, and use our own withdrawals list computed from our state when applying updates to the state as long as the root matched.",
        "created_at": "2023-02-15T20:51:34.293000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "zhejiang-testnet-lighthouse-geth-2 , zhejiang-testnet-lighthouse-besu-2  has been down for 5d. Can I nuke them and try to sync them again from scratch? Or is there any more troubleshooting gonna happen on them? \u003c@554799849288105986\u003e \u003c@341574016160497665\u003e \u003c@360491619402776577\u003e  ?",
        "created_at": "2023-02-15T21:27:23.210000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "for the Geth node I suspect we could fix it by updating Geth and restarting Lighthouse",
        "created_at": "2023-02-15T21:28:01.144000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I can do this today if you like",
        "created_at": "2023-02-15T21:28:09.196000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I can also update whatever you guys need, just let me know. Wouldn‚Äôt wanna get rid of useful logs.",
        "created_at": "2023-02-15T21:28:49.315000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I think we can fix it without deleting anything",
        "created_at": "2023-02-15T21:29:13.650000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "üëç",
        "created_at": "2023-02-15T21:29:28.130000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Gonna go for it? Or should I?",
        "created_at": "2023-02-15T21:30:02.024000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I‚Äôll give it a go",
        "created_at": "2023-02-15T21:30:48.380000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I grabbed the logs yday, I was planning to look in detail at zhejiang-testnet-lighthouse-besu-2 today, I can nuke the db and resync once I'm done.",
        "created_at": "2023-02-15T21:32:08.070000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "what was the change in geth?",
        "created_at": "2023-02-15T21:32:39.752000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ok sounds good. Would be nice to bring them back to head now.",
        "created_at": "2023-02-15T21:34:14.522000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I‚Äôm also curious as I don‚Äôt think we had a geth issue in a while.",
        "created_at": "2023-02-15T21:34:41.854000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "preventing the `nil` encoding for withdrawals from becoming an INVALID response to the CL: \u003chttps://github.com/ethereum/go-ethereum/pull/26675\u003e",
        "created_at": "2023-02-15T21:35:32.416000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e \u003c@792822129019584562\u003e I think I got mostly to the bottom of the issue on withdrawal-devnet-7-lodestar-besu-2: https://github.com/hyperledger/besu/issues/5094#issuecomment-1430834216\n\nIt's indirectly related to our misreporting/handling of *proposed* bad blocks and thus very unlikely to encounter anywhere but a devnet (where each node has a large share of the network's validators). I expect fixing the misreporting would have avoided this problem (fix is in review https://github.com/hyperledger/besu/pull/5082)",
        "created_at": "2023-02-15T21:41:46.438000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, Geth still remembers the bad block and won't re-process it `Skip duplicated bad block                number=62722 hash=4351f7..17dae1`",
        "created_at": "2023-02-15T21:55:16.104000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "it will forget about that after a while though, right?",
        "created_at": "2023-02-15T21:55:28.096000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "any way to prompt it, or should we just wipe the DB?",
        "created_at": "2023-02-15T21:55:39.216000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Thats really weird",
        "created_at": "2023-02-15T21:55:56.758000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "It shouldn't remember (the bad blocks are stored, but only ever accessed if we fail to verify it again).",
        "created_at": "2023-02-15T21:57:54.293000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "So we fail to verify it again",
        "created_at": "2023-02-15T21:58:07.297000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Are you sure you updated and restarted correctly?",
        "created_at": "2023-02-15T21:58:38.016000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I think I did, I've got this log on startup:\n\n```\nStarting peer-to-peer node               instance=Geth/v1.11.1-unstable-194b5c91-20230215/linux-amd64/go1.19.6\n```",
        "created_at": "2023-02-15T21:59:39.621000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "and that commit is indeed `origin/master`",
        "created_at": "2023-02-15T21:59:46.468000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Damn, do you have some more logs around the `Skip duplicated..`?",
        "created_at": "2023-02-15T22:00:28.997000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "looking now but also in a meeting so might be a bit delayed",
        "created_at": "2023-02-15T22:04:27.253000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "It's fine, I can take a look myself tomorrow",
        "created_at": "2023-02-15T22:05:15.030000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "here are some non-debug logs, doesn't show much AFAICT: \u003chttps://gist.github.com/michaelsproul/f95728c638b66cbc8abb688893274e19\u003e\n\nI'll try turning on debug logs",
        "created_at": "2023-02-15T22:07:51.681000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "seems to be:\n\n```\nINFO [02-15|22:16:33.184] Block synchronisation started \nDEBUG[02-15|22:16:33.185] Backfilling with the network             mode=full\nDEBUG[02-15|22:16:33.193] Downloading receipts                     origin=62722\nDEBUG[02-15|22:16:33.193] Downloading block bodies                 origin=62722\nDEBUG[02-15|22:16:33.229] Adding p2p peer                          peercount=4 id=c03c935eebe30c06 conn=inbound           addr=3.236.7.71:52378                name=bor/v0.3.3-stable/li...\nDEBUG[02-15|22:16:33.238] Fetching batch of block bodies           id=5e8bfe3bce7cd202 conn=inbound           count=1\nDEBUG[02-15|22:16:33.238] Fetching batch of block bodies           id=2f1d08b0dbfbe1b5 conn=inbound           count=1\nDEBUG[02-15|22:16:33.239] Fetching batch of block bodies           id=a41c1e2abb3ea311 conn=inbound           count=1\nINFO [02-15|22:16:33.239] Downloader queue stats                   receiptTasks=0 blockTasks=2044 itemSize=56.20B throttle=8192\nDEBUG[02-15|22:16:33.239] Inserting downloaded chain               items=1 firstnum=62722 firsthash=4351f7..17dae1 lastnum=62722 lasthash=4351f7..17dae1\nINFO [02-15|22:16:33.239] Skip duplicated bad block                number=62722 hash=4351f7..17dae1\n```\n\nfull logs: \u003chttps://gist.github.com/michaelsproul/f62e3e57b1cf2ef30350607919683781\u003e",
        "created_at": "2023-02-15T22:23:34.551000+00:00",
        "attachments": null
    }
]