[
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "We just had genesis of the chain, we're steady at ~83% participation and no surprises so far. \n\nGet some ether here: https://faucet.withdrawalsdevnet1.ethpandaops.io/ and feel free to play around. \n\nCapella should be in ~4h from now",
        "created_at": "2022-12-22T11:46:43.037000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "We plan to do some bls changes pre capella to see what happens. Expected behaviour should be the change doesn't get triggered till we hit capella, but the pool of bls changes should fill up.",
        "created_at": "2022-12-22T11:50:08.076000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I'm planning to do about 2000 BLS changes, so all pools should fill up.",
        "created_at": "2022-12-22T11:50:21.618000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "When capella hits, will there be populated withdrawals or empty arrays?",
        "created_at": "2022-12-22T12:08:55.040000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "This is what I'm trying to find out.",
        "created_at": "2022-12-22T12:09:11.292000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "When will tx fuzzing start?",
        "created_at": "2022-12-22T12:09:41.510000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e and \u003c@199561711278227457\u003e are working on it. Should begin shortly.",
        "created_at": "2022-12-22T12:10:01.935000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "ok thanks, might be offline but can check progress tomorrow. \u003c@386930523815149571\u003e might be able to look if anything goes bang though",
        "created_at": "2022-12-22T12:11:02.991000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "just cleaning up some things, tx-fuzz will be online in a few mins",
        "created_at": "2022-12-22T12:15:25.479000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its up and running, blocks are full",
        "created_at": "2022-12-22T12:21:07.580000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@792822129019584562\u003e could you have a look at `withdrawal-devnet-1-lodestar-ethereumjs-1`?",
        "created_at": "2022-12-22T12:22:49.967000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ok",
        "created_at": "2022-12-22T12:22:58.847000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "are we running blocks full with txs?",
        "created_at": "2022-12-22T12:25:21.887000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yup",
        "created_at": "2022-12-22T12:26:12.041000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2022-12-22T12:26:41.223000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_2022-12-22_at_13.26.35.png",
                "content": "b2c926b007cdfbd79600ad3fbcfb1fb175335808ed0191d62c1145033ea19828"
            }
        ]
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "hmmm ethereumjs can't handle that, its choking on cpu core",
        "created_at": "2022-12-22T12:26:43.358000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ðŸ˜…",
        "created_at": "2022-12-22T12:26:49.888000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "isn't the gas limit too low? `Gas Limit: 4,879,794` \u003c@360491619402776577\u003e ?",
        "created_at": "2022-12-22T12:27:27.695000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ah its still going up",
        "created_at": "2022-12-22T12:27:53.742000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Could be that the gas limit in the genesis is set very low and we're slowly voting up",
        "created_at": "2022-12-22T12:28:24.376000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yea you're right, its super low at genesis",
        "created_at": "2022-12-22T12:30:08.864000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "it is synced now, do we know what is the per core speed?",
        "created_at": "2022-12-22T12:30:26.158000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "they aren't super powerful machines",
        "created_at": "2022-12-22T12:30:40.472000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "to be fair we could bump up just lodestar-ethereumjs if it helps",
        "created_at": "2022-12-22T12:30:54.848000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "would more cores help or is it single threaded?",
        "created_at": "2022-12-22T12:31:05.826000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes it would help to bump up where single core performace is high, preferably some latest intel machine",
        "created_at": "2022-12-22T12:31:31.115000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```  [Created at cpu.465]\n  Unique ID: rdCR.j8NaKXDZtZ6\n  Hardware Class: cpu\n  Arch: X86-64\n  Vendor: \"AuthenticAMD\"\n  Model: 23.49.0 \"DO-Premium-AMD\"\n  Features: fpu,vme,de,pse,tsc,msr,pae,mce,cx8,apic,sep,mtrr,pge,mca,cmov,pat,pse36,clflush,mmx,fxsr,sse,sse2,ht,syscall,nx,mmxext,fxsr_opt,pdpe1gb,rdtscp,lm,rep_good,nopl,cpuid,extd_apicid,tsc_known_freq,pni,pclmulqdq,ssse3,fma,cx16,sse4_1,sse4_2,x2apic,movbe,popcnt,aes,xsave,avx,f16c,rdrand,hypervisor,lahf_lm,cmp_legacy,svm,cr8_legacy,abm,sse4a,misalignsse,3dnowprefetch,osvw,topoext,perfctr_core,ibpb,stibp,vmmcall,fsgsbase,bmi1,avx2,smep,bmi2,rdseed,adx,smap,clflushopt,clwb,sha_ni,xsaveopt,xsavec,xgetbv1,xsaves,clzero,xsaveerptr,wbnoinvd,arat,npt,nrip_save,umip,rdpid\n  Clock: 2300 MHz\n  BogoMips: 4599.99\n  Cache: 512 kb\n  Units/Processor: 4\n  Config Status: cfg=new, avail=yes, need=no, active=unknown```",
        "created_at": "2022-12-22T12:31:34.379000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "single threaded",
        "created_at": "2022-12-22T12:31:37.079000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its a 2.3Ghz",
        "created_at": "2022-12-22T12:31:39.243000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its probs just some vcore magic",
        "created_at": "2022-12-22T12:31:57.932000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "some machines can turbo single core to 4.5ghz",
        "created_at": "2022-12-22T12:32:08.884000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "we can upgrade it to a 8 core cpu-optimized machine if you liek",
        "created_at": "2022-12-22T12:38:14.749000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "what would be single core performance?",
        "created_at": "2022-12-22T12:38:33.916000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "make a hot fix to make ethereumjs multi threaded ðŸ˜‚",
        "created_at": "2022-12-22T12:38:57.696000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "this i guess: https://pcr.cloud-mercato.com/providers/digitalocean/flavors/c-16/performance",
        "created_at": "2022-12-22T12:40:29.033000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "they look all 2.7ghz cores",
        "created_at": "2022-12-22T12:42:48.013000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "whats the blockscout url for devnet?",
        "created_at": "2022-12-22T12:43:44.902000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "https://explorer.withdrawalsdevnet1.ethpandaops.io/",
        "created_at": "2022-12-22T12:46:40.273000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Think lighthouse is calling V2 methods pre-capella/shanghai, whereas teku, prysm, lodestar are calling V1...maybe not an issue but might explain some of the weirdness we were seeing with lighthouse-besu before, will have to dig in more tomorrow as heading offline",
        "created_at": "2022-12-22T12:51:44.312000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "could you restart ethereumjs with `--loglevel debug`  and is it possible to pass an env variable to ethereumjs docker via your ansible setup?",
        "created_at": "2022-12-22T12:57:09.814000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "want to pass `DEBUG=vm:*` env variable to see where/if vm execution is the choke point",
        "created_at": "2022-12-22T12:58:40.558000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e",
        "created_at": "2022-12-22T13:02:35.365000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "on it",
        "created_at": "2022-12-22T13:12:44.203000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "hmm, taking a long time to stop the container even",
        "created_at": "2022-12-22T13:12:57.583000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes container takes some time to stop normally even, mostly to make sure all modules do clean exit",
        "created_at": "2022-12-22T13:13:40.152000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i think if we can provide a 4ghz+ cpu core, ethereumjs will be able to follow along the network nicely, since it falls back on some particular block and then catches up back again",
        "created_at": "2022-12-22T13:14:52.778000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "so some kind of txes choke ethereumjs more than others",
        "created_at": "2022-12-22T13:15:22.066000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "check it now ðŸ˜„",
        "created_at": "2022-12-22T13:17:04.099000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "were you able to add env variable to the container: `DEBUG=vm:*`?",
        "created_at": "2022-12-22T13:19:31.705000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yup",
        "created_at": "2022-12-22T13:19:36.695000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "hmmm somehow vm run debug logs are not getting dumped",
        "created_at": "2022-12-22T13:21:40.987000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "though i can see the DEBUG variable having correct value inside container",
        "created_at": "2022-12-22T13:22:17.279000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e you sent the BLS changes signed with Capella fork or before?",
        "created_at": "2022-12-22T13:22:18.981000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Prysm will put them in its pool if they are signed with Capella, but I don't know if every client will do this, I suspect not",
        "created_at": "2022-12-22T13:23:03.603000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "```\n           \"Env\": [\n                \"DEBUG=vm:*\",\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"NODE_VERSION=16.17.0\",\n                \"YARN_VERSION=1.22.19\",\n                \"NODE_OPTIONS=--max_old_space_size=6144\"\n```",
        "created_at": "2022-12-22T13:23:52.265000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yea it has these vars",
        "created_at": "2022-12-22T13:23:56.594000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes it  can see it inside shell as well",
        "created_at": "2022-12-22T13:26:19.692000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I have so far only sent it with teku",
        "created_at": "2022-12-22T13:37:38.015000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "teku seems to have not put it in a pool",
        "created_at": "2022-12-22T13:37:43.871000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I'll give it a try with prysm right away",
        "created_at": "2022-12-22T13:37:54.716000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "prysm will take them in the pool if you sign them correctly with Capella, otherwise it will reject them",
        "created_at": "2022-12-22T13:46:11.492000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "you will need to pass the genesis validator root and the fork version to ethdo",
        "created_at": "2022-12-22T13:46:24.566000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Im using the newest version and it doesn't prompt me that anymore",
        "created_at": "2022-12-22T13:48:02.032000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Lodestar reports this: ```:\"Internal Server Error\",\"message\":\"Multiple errors on submitPoolBlsToExecutionChange\\nBLS_TO_EXECUTION_CHANGE_ERROR_INVALID_SIGNATURE```",
        "created_at": "2022-12-22T13:49:59.225000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Prysm reports this: ```{\"message\":\"Could not validate SignedBLSToExecutionChange: cannot process BLSToExecutionChange before Capella fork\",\"code\":400}```",
        "created_at": "2022-12-22T13:50:33.970000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Is it bc the genesis-validator-root and fork version missing?",
        "created_at": "2022-12-22T13:50:51.706000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "lighthouse reports: ```{\"code\":400,\"message\":\"BAD_REQUEST: some BLS to execution changes failed to verify\",\"failures\":[{\"index\":0,\"message\":\"invalid: BlsToExecutionChangeBadFork(Merge)\"}```",
        "created_at": "2022-12-22T13:51:32.570000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I have included in the ethdo call now the genesis_validators_root and fork-version, and even like that prysm reports that it can't process the change before capella",
        "created_at": "2022-12-22T14:03:04.567000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```curl -s 127.0.0.1:4000/eth/v1/beacon/pool/bls_to_execution_changes\n{\"message\":\"Method Not Allowed\",\"code\":501}%```",
        "created_at": "2022-12-22T14:03:21.948000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "and to verify that the pool is empty, its actually says that the method is not even allowed.",
        "created_at": "2022-12-22T14:03:39.753000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I guess capella will trigger the API to allow this call.",
        "created_at": "2022-12-22T14:03:49.683000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "This is how I generated the change : ```  ~/ethdo --connection 127.0.0.1:4000 validator credentials set --json \\\n          --path=\"m/12381/3600/1/0/0\" \\\n          --mnemonic=\"say ... wool\" \\\n          --withdrawal-address=0xE7c180eAdA8f60D63e9671867b2e0CA2649207A8 \\\n          --fork-version=0x40000041 \\\n          --genesis-validators-root=0xf306b3f8c766086aac88147a84f7fdeb224b080922cf653e479cc0dd04009d93\n```",
        "created_at": "2022-12-22T14:04:39.224000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e are you sure we supposed to be able to fill the pool even before capella is hit? We are using  `HEAD-29dfca` still.",
        "created_at": "2022-12-22T14:06:36.944000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ah crap that may be old. I'm changing money right now but will be at my computer in 40 minutes to check",
        "created_at": "2022-12-22T14:08:54.308000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ok, capella gonna hit in about 70 mins",
        "created_at": "2022-12-22T14:09:51.492000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "would like to fill a pool before that hits.",
        "created_at": "2022-12-22T14:10:01.191000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Let me check that head",
        "created_at": "2022-12-22T14:10:27.470000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@792822129019584562\u003e  is lodestar supposed to reject bls change before capella?",
        "created_at": "2022-12-22T14:17:17.585000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@554799849288105986\u003e is lighthouse supposed to reject bls change before capella?",
        "created_at": "2022-12-22T14:17:37.430000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@680234424037670912\u003e is teku supposed to reject bls change before capella?",
        "created_at": "2022-12-22T14:17:54.701000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i think we might accept it but it will be pruned out as soon as the fork changes to capella/next one as the signature will become stale as its domain will change",
        "created_at": "2022-12-22T14:21:30.082000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "also we will only accept it if its signed with the current fork's domain",
        "created_at": "2022-12-22T14:22:32.280000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "this is what I got \u003c@792822129019584562\u003e",
        "created_at": "2022-12-22T14:22:56.602000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "so if ethdo or any other tooling will sign it with future fork, the beacon node might reject it as signature will be invalid",
        "created_at": "2022-12-22T14:23:03.552000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ahh yes, see above explanation ^^^",
        "created_at": "2022-12-22T14:23:21.431000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "might make sense to fail with \"Capella is not yet triggered\" error message and not BLS invalid signature message",
        "created_at": "2022-12-22T14:24:23.628000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "it must have been signed with capella fork (which might be correct), but we only validate against the current fork which is not yet capella",
        "created_at": "2022-12-22T14:24:25.178000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yes, ideed. its been signed with a future fork id.",
        "created_at": "2022-12-22T14:25:00.997000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "hmmm will see how we can imprive the ux",
        "created_at": "2022-12-22T14:26:26.025000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "I had trouble with lighthouse and Teku on the hive tests signing the Bls changes with capella, while still on the bellatrix fork.\n\nAnother issue is that, will these signatures expire by 4844 fork then ?",
        "created_at": "2022-12-22T14:30:06.259000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Do we want people to be able to fill bls change pools before Capella?",
        "created_at": "2022-12-22T14:30:59.278000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "If yes, spec should define it imo.",
        "created_at": "2022-12-22T14:31:25.484000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The signature verification is against the fork of the head state. Prysm does something ad-hoc to allow them to be included in Bellatrix but only if they are signed correctly",
        "created_at": "2022-12-22T14:31:51.044000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I feel like bls change should work on any and all fork versions.",
        "created_at": "2022-12-22T14:34:01.880000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Otherwise there might gonna be people who forget to change bls keys after 4844 and it might say that sorry, this is no longer possible.",
        "created_at": "2022-12-22T14:34:49.407000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "It will work on all future fork versions after capella, just not those before capella.",
        "created_at": "2022-12-22T14:35:13.711000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e it seems that my PR never merged, I'll push it to the capella branch and will build you a new image",
        "created_at": "2022-12-22T14:35:25.111000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "no it wont,",
        "created_at": "2022-12-22T14:35:38.328000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "it needs to pass signature verification against the head state",
        "created_at": "2022-12-22T14:35:50+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "so we will prune the pool at future forks",
        "created_at": "2022-12-22T14:35:55.311000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Can I somewhere follow what the new image name gonna be?",
        "created_at": "2022-12-22T14:35:58.842000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Sure, but you could generate an operation when in deneb (or whatever) and it will work.",
        "created_at": "2022-12-22T14:36:16.185000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "So there's no \"no longer possible\".",
        "created_at": "2022-12-22T14:36:26.275000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "yeah I'll build for the first time so be patient, I'll upload them and ping you, need to install docker first",
        "created_at": "2022-12-22T14:36:26.735000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "If it's going to be significant effort for client teams to hold the BLS change operation for a future fork then perhaps it's simpler to keep it such that the operations are rejected until the Capella hard fork takes place.  It may result in a bit of a rush of messages, but I'm not sure that there are that many people who are desperate to change their credentials within the first few seconds of the fork.",
        "created_at": "2022-12-22T14:38:25.942000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "(And yes there's a rough edge around hard forks, but that doesn't seem like a major issue; worst case the user re-sends the request after the hard fork.)",
        "created_at": "2022-12-22T14:38:57.449000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "it's trivial to accept them before capella (or any fork) as long as they are signed with the right fork version",
        "created_at": "2022-12-22T14:42:52.949000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e here' s the tag in the usual place capella-6b2721",
        "created_at": "2022-12-22T14:56:23.782000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "`gcr.io/prysmaticlabs/prysm/beacon-chain:capella-6b2721`?",
        "created_at": "2022-12-22T14:56:52.546000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I'll try to streamline this so that I can give you a steady tag in the future, I can' t get docker to work yet",
        "created_at": "2022-12-22T14:57:04.625000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "none of us can ðŸ˜‚",
        "created_at": "2022-12-22T14:57:15.342000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I prefer hashed tags over steady tags, as this way we can ensure we run the correct image right away",
        "created_at": "2022-12-22T14:57:49.702000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yea, or versioned ðŸ˜„\nfar easier to know when we deployed the wrong image",
        "created_at": "2022-12-22T14:58:05.587000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "is there any change to the validator image?",
        "created_at": "2022-12-22T14:58:21.260000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "ok, I'll try to get Docker running and then I'll ask you how you want these images",
        "created_at": "2022-12-22T14:58:38.451000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "let me know if you can submit the bls changes to prysm before the fork \u003c@412614104222531604\u003e",
        "created_at": "2022-12-22T14:58:54.720000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Just deployed it on all prysm nodes \u003c@412614104222531604\u003e, go wild with the submissions",
        "created_at": "2022-12-22T15:01:20.128000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```{\"message\":\"Could not validate SignedBLSToExecutionChange: cannot process BLSToExecutionChange before Capella fork\",\"code\":400}%```",
        "created_at": "2022-12-22T15:01:28.856000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "could you give it a try? I might be doing something wrong?",
        "created_at": "2022-12-22T15:03:28.629000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we have a new mnemonic tho",
        "created_at": "2022-12-22T15:03:39.661000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "yeah give me a sec",
        "created_at": "2022-12-22T15:03:40.043000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "can you dm me that?",
        "created_at": "2022-12-22T15:03:52.769000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yup",
        "created_at": "2022-12-22T15:03:57.948000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I can try right now",
        "created_at": "2022-12-22T15:04:05.684000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ip of geth/prysm: `159.89.105.117`",
        "created_at": "2022-12-22T15:06:37.833000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "```\nssh -L 4000:127.0.0.1:4000 devops@159.89.105.117\n```\nThen you can submit whatever you want to the beacon api by targetting localhost:4000",
        "created_at": "2022-12-22T15:08:04.917000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "10 mins to go.",
        "created_at": "2022-12-22T15:08:41.391000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ohh crap I think we won't make it on time ðŸ˜¦",
        "created_at": "2022-12-22T15:09:22.912000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I may have merged something different in develop than capella, will try anyway",
        "created_at": "2022-12-22T15:09:35.126000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I can rollback if you like?",
        "created_at": "2022-12-22T15:10:05.763000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "nah, doesn' t make any sense, this is a very minor thing for a devnet",
        "created_at": "2022-12-22T15:10:26.076000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "we can test it anytime",
        "created_at": "2022-12-22T15:10:31.180000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I have tested it myself on interop so I know it works anyway",
        "created_at": "2022-12-22T15:10:48.834000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "okay",
        "created_at": "2022-12-22T15:10:53.977000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "We can test in the next devnet then.",
        "created_at": "2022-12-22T15:11:09.908000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Was just curious about how the pools fill up for other client teams before capella is hit.",
        "created_at": "2022-12-22T15:11:19.787000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "especially when there are a large amount of validator bls changes happening all before capella.",
        "created_at": "2022-12-22T15:11:51.440000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```2022-12-22 15:17:00.010 INFO  - Milestone   *** Epoch: 40, Activating network upgrade: CAPELLA\n2022-12-22 15:17:00.010 INFO  - Epoch Event *** Epoch: 40, Justified checkpoint: 39, Finalized checkpoint: 38, Finalized root: e903df13fb290c85ed35fdd0914b7d798f5d9a2308f47a8a97253854063c755d``` ðŸ”¥",
        "created_at": "2022-12-22T15:17:15.245000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "``` Rejecting invalid block at slot 1283 with root 0x8b924b2b9e6a14758efe2b2196d9ca14d9147ebc651d1e69eb445936657bed8d because FAILED_STATE_TRANSITION.```",
        "created_at": "2022-12-22T15:18:18.487000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "teku seems to be rejecting a bunch of gossip messages",
        "created_at": "2022-12-22T15:18:42.112000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "crap did we fork?",
        "created_at": "2022-12-22T15:18:42.335000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah we did.",
        "created_at": "2022-12-22T15:18:48.756000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I just sent the change ðŸ˜¦",
        "created_at": "2022-12-22T15:18:52.284000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yea ðŸ˜¦",
        "created_at": "2022-12-22T15:19:21.078000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "fork was a 15:17 not sure when you submitted it",
        "created_at": "2022-12-22T15:19:23.725000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "this wouldn' t happen anyway, prysm would not broadcast the changes, it will only add them to their pool",
        "created_at": "2022-12-22T15:19:26.657000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Their pool wouldn't gossip?",
        "created_at": "2022-12-22T15:19:40.611000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "So gossip would only happen at capella?",
        "created_at": "2022-12-22T15:19:46.461000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "exactly",
        "created_at": "2022-12-22T15:19:52.289000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "we would only start broadcasting the messages at capella",
        "created_at": "2022-12-22T15:20:05.702000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ahhh",
        "created_at": "2022-12-22T15:20:12.931000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "teku is rejecting gossip:\n```\nRejecting gossip message on topic /eth2/adb52b3f/beacon_block/ssz_snappy, reason: Block (or its parent) previously marked as invalid, decoded message\n```",
        "created_at": "2022-12-22T15:20:24.886000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "far too many empty blocks tbh",
        "created_at": "2022-12-22T15:21:15.650000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "prysm is too small a portion of the network to account for that",
        "created_at": "2022-12-22T15:21:27.067000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah something else is broken now, I'm checking",
        "created_at": "2022-12-22T15:22:05.590000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "geth logged a bad block: \n```\n########## BAD BLOCK #########\nBlock: 1125 (0xa53ee4f7151f09eda5959f970953625085b762314045963c4f5516f3731a5fa9)\nError: invalid gas used (remote: 7287283 local: 7287339)\n```\ncould be that made it to the other ELs",
        "created_at": "2022-12-22T15:24:41.890000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "what has prysm got to do with it? isn' t it Teku rejecting it?",
        "created_at": "2022-12-22T15:26:45.179000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah teku is our major validator set.",
        "created_at": "2022-12-22T15:27:19.346000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "why are you running different percentages?",
        "created_at": "2022-12-22T15:27:42.537000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "So if teku doesn't agree with smth right now, then we risk the whole chain",
        "created_at": "2022-12-22T15:27:45.817000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we wanted to have a \"stable\" chain.",
        "created_at": "2022-12-22T15:27:58.898000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "well, I guess there are advantages and dissadvantages",
        "created_at": "2022-12-22T15:28:03.739000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "without much hassle with finalization.",
        "created_at": "2022-12-22T15:28:09.330000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "but running a single client's as majority will not catch a bunch of bugs both in said client and on others",
        "created_at": "2022-12-22T15:28:24.350000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "so you'd need to rotate the supermajority",
        "created_at": "2022-12-22T15:28:44.100000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "and have 5 different devnets",
        "created_at": "2022-12-22T15:28:50.758000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "prysm is syncing fine the blocks produced by Teku",
        "created_at": "2022-12-22T15:29:25.781000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, we often have a stable chain early on to make sure there's a testing target. Teku has majority, but not super majority, so we'd still catch issues in it. It just helps tip the chain in favor of stability",
        "created_at": "2022-12-22T15:29:28.657000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "but prysm is also knocking peers out",
        "created_at": "2022-12-22T15:29:46.661000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "it could be EL related. Teku-geth and teku-nethermind are on different forks to begin with. I'll try and compare that to other geth/nethermind nodes.",
        "created_at": "2022-12-22T15:31:38.630000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Vouch is proposing blocks using geth/teku.",
        "created_at": "2022-12-22T15:32:08.101000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "we also got a bad payload \ntime=\"2022-12-22 15:17:36\" level=error msg=\"Could not handle p2p pubsub\" error=\"could not process block: could not validate new payload: received an INVALID payload from execution engine\" prefix=sync topic=\"/eth2/adb52b3f/beacon_block/ssz_snappy\"",
        "created_at": "2022-12-22T15:32:11.955000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "it was a prysm-nethermind block",
        "created_at": "2022-12-22T15:32:27.887000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "time=\"2022-12-22 15:17:36\" level=debug msg=\"Received block\" blockSlot=1283 graffiti=\"prysm-nethermind^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@\" prefix=sync proposerIndex=36288 sinceSlotStartTime=83.111173ms",
        "created_at": "2022-12-22T15:32:39.368000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "this block is bad",
        "created_at": "2022-12-22T15:32:43.060000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "So nethermind produced it and geth rejects it",
        "created_at": "2022-12-22T15:33:14.610000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yea seems to be a nethermind/geth split. LH\u0026Teku + nethermind are on the same fork, LH\u0026Teku+Geth are on a separate fork.",
        "created_at": "2022-12-22T15:33:20.320000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "will check on prysm-nethermind if it accepts it",
        "created_at": "2022-12-22T15:33:22.778000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "prysm-geth seems to be on the same as teku-geth",
        "created_at": "2022-12-22T15:33:50.801000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "is it possible that one of the forks on nethermind is broken?",
        "created_at": "2022-12-22T15:34:25.766000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we triggered 4 different EIP on the same time slot.",
        "created_at": "2022-12-22T15:34:34.789000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "previously we only did one .",
        "created_at": "2022-12-22T15:34:41.242000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "It could be, tagging \u003c@360491619402776577\u003e and \u003c@758579010027782144\u003e",
        "created_at": "2022-12-22T15:35:19.998000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeh ```2022-12-22 15:35:12.1844|FCU - block 1159 (0x9936c6...09b7b4) was processed.```",
        "created_at": "2022-12-22T15:35:55.686000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```INFO [12-22|15:33:12.202] Chain head was updated                   number=1159 hash=52ee91..731cd8 root=564812..e1a742 elapsed=\"85.179Âµs\"```",
        "created_at": "2022-12-22T15:36:01.460000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "block 1159 has different hashes on different ELs",
        "created_at": "2022-12-22T15:36:14.351000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Confirmed \u003c@758579010027782144\u003e \u003c@360491619402776577\u003e I got the block, slot 1283 is taken as valid by Nethermind, and geth rejects it",
        "created_at": "2022-12-22T15:36:39.771000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```    \"eip4895TransitionTimestamp\": \"0x63a474ec\",\n    \"eip3855TransitionTimestamp\": \"0x63a474ec\",\n    \"eip3651TransitionTimestamp\": \"0x63a474ec\",\n    \"eip3860TransitionTimestamp\": \"0x63a474ec\",```",
        "created_at": "2022-12-22T15:37:07.718000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```    \"shanghaiTime\": 1671722220```",
        "created_at": "2022-12-22T15:37:18.581000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yea fork seems to have happened here:\nNethermind responds to the engine_newPayloadV2 calls with:\n```\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"status\": \"INVALID\",\n    \"latestValidHash\": \"0xb1c2731ebeb77646f0305fd94dffc5cadee8e895ae06b5c5b38af4e0a1c05c8b\",\n    \"validationError\": \"Block 1125 (0xa53ee4f7151f09eda5959f970953625085b762314045963c4f5516f3731a5fa9) is known to be a part of an invalid chain.\"\n  },\n  \"id\": 1\n}\n```",
        "created_at": "2022-12-22T15:38:25.487000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "lodestar\u003c\u003eethereumjs and lodestar\u003c\u003egeth seems to agree on 1384, so are on the same fork",
        "created_at": "2022-12-22T15:38:33.559000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "it' s not an issue with timing \u003c@412614104222531604\u003e , nethermind accepts a few capella blocks before producing the bad one",
        "created_at": "2022-12-22T15:38:50.572000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "and netermind also takes as invalid the future geth blocks",
        "created_at": "2022-12-22T15:39:31.628000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "first instance of INVALID payload according to nethermind:\n```\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"status\": \"INVALID\",\n    \"latestValidHash\": \"0xb1c2731ebeb77646f0305fd94dffc5cadee8e895ae06b5c5b38af4e0a1c05c8b\",\n    \"validationError\": \"Block processing failed.\"\n  },\n  \"id\": 1\n}\n```",
        "created_at": "2022-12-22T15:40:12.328000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "docker logs snooper 2\u003e\u00261 | grep -A 20 -B 100 \"Block processing failed\" to print out the corresponding request",
        "created_at": "2022-12-22T15:40:50.342000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "oo, block number 1125 was the reason of the fork? what about besu?",
        "created_at": "2022-12-22T15:41:36.575000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "besu is with geth.",
        "created_at": "2022-12-22T15:42:20.992000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "besu seems to be on the same fork wtih geth",
        "created_at": "2022-12-22T15:42:25.261000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "` Imported #1,159 / 0 tx / base fee 126 wei / 0 (0.0%) gas / (0x52ee91f92494034f3acdf3240ea539e4f350a3d65846945f7d746f0968731cd8) in 0.001s. Peers: 12`",
        "created_at": "2022-12-22T15:42:25.389000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yeah",
        "created_at": "2022-12-22T15:42:28.644000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "So the first invalid block seen by any player is produced by nethermind, and right after that nethermind rejects all geth blocks",
        "created_at": "2022-12-22T15:43:18.487000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I'm at the gym, do you guys need me?",
        "created_at": "2022-12-22T15:43:33.953000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "don' t think it' s urgent, we need to figure out why geth+besu are not agreeing with nethermind",
        "created_at": "2022-12-22T15:44:02.087000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "I will debug it",
        "created_at": "2022-12-22T15:44:27.670000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "is it why geth+besu don't agree with nethermind or nethermind not agreeing with geth and besu.",
        "created_at": "2022-12-22T15:44:30.484000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Try debugtracebadblocks on geth",
        "created_at": "2022-12-22T15:44:33.044000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "That' s the first bad block",
        "created_at": "2022-12-22T15:45:28.964000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "558e0345a101440cc7bb8b97897933156ea1d480800aea37e7e959d0f0cc2ba2"
            }
        ]
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "those three transactions are the culprit",
        "created_at": "2022-12-22T15:45:50.675000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "no CL effects in that block",
        "created_at": "2022-12-22T15:45:56.112000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "and lodestar\u003c\u003enethermind isn't",
        "created_at": "2022-12-22T15:46:14.324000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e how can I attach to a geth console?",
        "created_at": "2022-12-22T15:48:14.468000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "already ssh'd in that server",
        "created_at": "2022-12-22T15:48:32.986000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "`docker exec -it execution /bin/sh`\n`geth attach eldata/geth.ipc`",
        "created_at": "2022-12-22T15:48:53.655000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "then you'll have the geth console",
        "created_at": "2022-12-22T15:49:00.745000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "and lodestar besu also agrees with lodestar\u003c\u003egeth/ethereumjs",
        "created_at": "2022-12-22T15:49:25.167000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "thanks!",
        "created_at": "2022-12-22T15:49:30.094000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "assuming this is what you were looking for \u003c@755590043632140352\u003e ?",
        "created_at": "2022-12-22T15:51:16.114000+00:00",
        "attachments": [
            {
                "type": "application/json; charset=utf-8",
                "origin_name": "bad_blocks.json",
                "content": "dd5c5068bf468c3ce90c10c034b512bc8c3223787eff5bbcb11f57887bf4ca60"
            }
        ]
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "It' s the third transaction that fails",
        "created_at": "2022-12-22T15:51:18.973000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "nope, the block I can get from the CL",
        "created_at": "2022-12-22T15:51:55.253000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "but this is what Marius asked for",
        "created_at": "2022-12-22T15:52:00.066000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "so this transaction: 0x01f8d7831469cd81e1843b9acafe830186a08080b88073666000604d556000603f557f7bb83c8c38ffc9400c4a9e083354ae9d28a945ab90e6a67640718c7c86c8c6e46002527f6d5cce5cbe965bc09a917f4832eab7a96315e5d9aeed82f4194fa2ee4597db00602252601c60425360c760435360ef6044536045604553604a6046536081604753606d604853609d6049536096604ac001a052f2dd5fb748e065d9e0fb38c7f21110ce410f2a63f37ca0f01d4c94cc05530ba06cd404a5cd5719c0743b8d940d1201782e4b6ee8c210964c345c702c1b29bb83",
        "created_at": "2022-12-22T15:52:02.310000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "```\n\u003e debug.traceBadBlock(\"0x4c803b65347319e223df8177cdcfd91122998c01bb731ca379d64df407335aeb\")\n[{\n    result: {\n      failed: false,\n      gas: 23036,\n      returnValue: \"\",\n      structLogs: []\n    }\n}, {\n    result: {\n      failed: false,\n      gas: 55074,\n      returnValue: \"\",\n      structLogs: [{...}, {...}, {...}, {...}, {...}, {...}, {...}, {...}, {...}, {...}, {...}]\n    }\n}, {\n    result: {\n      failed: true,\n      gas: 100000,\n      returnValue: \"\",\n      structLogs: [{...}, {...}]\n    }\n}]\n```",
        "created_at": "2022-12-22T15:52:12.191000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Can you grep for PUSH0",
        "created_at": "2022-12-22T15:52:55.840000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "And COINBASE",
        "created_at": "2022-12-22T15:53:01.374000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "And Create",
        "created_at": "2022-12-22T15:53:22.295000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e",
        "created_at": "2022-12-22T15:55:15.772000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "looking at the documentation right now, sorry I'm new to this ðŸ™‚ https://geth.ethereum.org/docs/rpc/ns-debug#traceconfig",
        "created_at": "2022-12-22T15:56:09.461000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Could you repost this with a .txt ending? Otherwise I can't open on my stupid phone",
        "created_at": "2022-12-22T15:58:31.559000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "renamed it for you too",
        "created_at": "2022-12-22T15:58:59.382000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "bad_blocks_for_marius_phone.txt",
                "content": "dd5c5068bf468c3ce90c10c034b512bc8c3223787eff5bbcb11f57887bf4ca60"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ah damn, no I want debug tracebadblocktofile which will give me the opcode trace",
        "created_at": "2022-12-22T15:59:59.700000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "{\"pc\":0,\"op\":115,\"gas\":\"0xafb4\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH20\"}\n{\"pc\":21,\"op\":12,\"gas\":\"0xafb1\",\"gasCost\":\"0x0\",\"memSize\":0,\"stack\":[\"0x666000604d556000603f557f7bb83c8c38ffc940\n\"],\"depth\":1,\"refund\":0,\"opName\":\"opcode 0xc not defined\"}\n{\"pc\":21,\"op\":12,\"gas\":\"0xafb1\",\"gasCost\":\"0x0\",\"memSize\":0,\"stack\":[\"0x666000604d556000603f557f7bb83c8c38ffc940\n\"],\"depth\":1,\"refund\":0,\"opName\":\"opcode 0xc not defined\",\"error\":\"invalid opcode: opcode 0xc not defined\"}\n{\"output\":\"\",\"gasUsed\":\"0xafb4\",\"time\":51691,\"error\":\"invalid opcode: opcode 0xc not defined\"}\n\n~",
        "created_at": "2022-12-22T16:00:47.705000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "opcode 0xc not defined",
        "created_at": "2022-12-22T16:00:59.138000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e and \u003c@758579010027782144\u003e",
        "created_at": "2022-12-22T16:01:12.703000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "that' s the trace of the third transaction",
        "created_at": "2022-12-22T16:01:25.841000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm that's not it I think",
        "created_at": "2022-12-22T16:02:49.043000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The block is rejected with invalid gas",
        "created_at": "2022-12-22T16:03:02.182000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "let me post all of them then",
        "created_at": "2022-12-22T16:03:16.559000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "{\"output\":\"\",\"gasUsed\":\"0x0\",\"time\":0}\nThat' s the first one",
        "created_at": "2022-12-22T16:03:38.750000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "{\"pc\":0,\"op\":127,\"gas\":\"0xafb4\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH32\"}\n{\"pc\":33,\"op\":96,\"gas\":\"0xafb1\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0xc3b8112e9c95449290bfab6cd718825c0043d817\n295cb5f8c5f6ec9c6a686105\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":35,\"op\":82,\"gas\":\"0xafae\",\"gasCost\":\"0x15\",\"memSize\":0,\"stack\":[\"0xc3b8112e9c95449290bfab6cd718825c0043d81\n7295cb5f8c5f6ec9c6a686105\",\"0x9b\"],\"depth\":1,\"refund\":0,\"opName\":\"MSTORE\"}\n{\"pc\":36,\"op\":127,\"gas\":\"0xaf99\",\"gasCost\":\"0x3\",\"memSize\":192,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH32\"\n}\n{\"pc\":69,\"op\":96,\"gas\":\"0xaf96\",\"gasCost\":\"0x3\",\"memSize\":192,\"stack\":[\"0x42e8565518a0909a9893dca90a3e1226328fa0\nb25a09fb00f31ff4794e125e72\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":71,\"op\":82,\"gas\":\"0xaf93\",\"gasCost\":\"0x6\",\"memSize\":192,\"stack\":[\"0x42e8565518a0909a9893dca90a3e1226328fa0\nb25a09fb00f31ff4794e125e72\",\"0xbb\"],\"depth\":1,\"refund\":0,\"opName\":\"MSTORE\"}\n{\"pc\":72,\"op\":127,\"gas\":\"0xaf8d\",\"gasCost\":\"0x3\",\"memSize\":224,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH32\"\n}\n{\"pc\":105,\"op\":96,\"gas\":\"0xaf8a\",\"gasCost\":\"0x3\",\"memSize\":224,\"stack\":[\"0xa32a6b08caa1fb9b675fd89213da9d0cfbd65\n600d3c2dfcfc52812bea65f5096\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":107,\"op\":82,\"gas\":\"0xaf87\",\"gasCost\":\"0x6\",\"memSize\":224,\"stack\":[\"0xa32a6b08caa1fb9b675fd89213da9d0cfbd65\n600d3c2dfcfc52812bea65f5096\",\"0xdb\"],\"depth\":1,\"refund\":0,\"opName\":\"MSTORE\"}\n{\"pc\":108,\"op\":127,\"gas\":\"0xaf81\",\"gasCost\":\"0x3\",\"memSize\":256,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH32\n\"}\n{\"pc\":141,\"op\":0,\"gas\":\"0xaf7e\",\"gasCost\":\"0x0\",\"memSize\":256,\"stack\":[\"0x9e88caec9819e76641297f7ec0f3df878d3ecb\n00000000000000000000000000\"],\"depth\":1,\"refund\":0,\"opName\":\"STOP\"}\n{\"output\":\"\",\"gasUsed\":\"0x36\",\"time\":117919}",
        "created_at": "2022-12-22T16:03:53.965000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "that' s the second one",
        "created_at": "2022-12-22T16:03:57.382000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "and already have up the third one",
        "created_at": "2022-12-22T16:04:08.879000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "I guess 3860",
        "created_at": "2022-12-22T16:04:28.014000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I also think that",
        "created_at": "2022-12-22T16:04:50.167000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "But we don't have a create",
        "created_at": "2022-12-22T16:05:07.792000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I don't see any PUSH0 here",
        "created_at": "2022-12-22T16:05:10.320000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Afaict",
        "created_at": "2022-12-22T16:05:12.182000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "nor create",
        "created_at": "2022-12-22T16:05:13.857000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The tx also doesn't seem super big looking at the block",
        "created_at": "2022-12-22T16:05:51.346000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ahh I think I remember the very old branch I merged this morning had some gas changes, the new one didn't. Maybe nethermind is on an older version of 3860?",
        "created_at": "2022-12-22T16:07:52.459000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "it is possible ðŸ™‚ I know that we were updating 3860 a few times because of some changes",
        "created_at": "2022-12-22T16:09:59.283000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I give up with your logs, these are the gas amounts reported in the third transaction that fails:\n```\n\u003e\u003e\u003e int(\"0xafb4\",16)\n44980\n\u003e\u003e\u003e int(\"0xafb1\",16)\n44977\n\u003e\u003e\u003e int(\"0xafb1\",16)\n44977\n\u003e\u003e\u003e int(\"0xafb4\",16)\n44980\n```\nAnd this is geth log:\n```\n   result: {\n      failed: true,\n      gas: 100000,\n```\nThere' s no way any combination of those numbers sums up to 100000",
        "created_at": "2022-12-22T16:10:31.167000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "this transaction was reverted so gasUsed = tx.GasLimit",
        "created_at": "2022-12-22T16:12:08.045000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "e4a362a7730235a48225e378c1ef43a0ba0ab985b120a4cd2494ce509794580c"
            }
        ]
    },
    {
        "author": "ethdreamer",
        "category": "Testing",
        "parent": "",
        "content": "Not sure, I'd have to test.",
        "created_at": "2022-12-22T16:13:26.765000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "thanks!",
        "created_at": "2022-12-22T16:14:13.824000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "devnet0 will be shut down in a few mins. Any objections?",
        "created_at": "2022-12-22T16:15:34.851000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "fine by prysm",
        "created_at": "2022-12-22T16:15:42.255000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Is that the one with the bad block?",
        "created_at": "2022-12-22T16:20:09.645000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "nope, thats devnet1",
        "created_at": "2022-12-22T16:20:28.435000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "no, devnet1",
        "created_at": "2022-12-22T16:20:30.344000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Okay, yeah kill 0 then",
        "created_at": "2022-12-22T16:20:55.103000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "devnet0 is now dead.",
        "created_at": "2022-12-22T16:29:55.092000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "I think I found the issue",
        "created_at": "2022-12-22T17:00:49.533000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "give me a couple more minutes",
        "created_at": "2022-12-22T17:00:57.664000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Okay, so it looks like it is the chainspec issue again.... damn we need to standardize this chainspec because Nethermind is using parity style chainspec. Of course, Nethermind should implement Geth \u0026 Besu style chainspec on our side. Adding these two parameters to the chainspec should fix it\n`    \"maxCodeSize\": \"0x6000\",\n    \"maxCodeSizeTransition\": \"0x0\",`",
        "created_at": "2022-12-22T17:13:32.154000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "after I changed chainspec I'm getting similar trace to geth",
        "created_at": "2022-12-22T17:24:04.260000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "f32610a95585b3c5c67c7d1fed3e89284ad5d35aca57e0b6d937ac4f620d94da"
            }
        ]
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "before, it was:\n{\"jsonrpc\":\"2.0\",\"result\":[{\"gas\":\"0x59fc\",\"failed\":false,\"returnValue\":\"0x\",\"structLogs\":[]},{\"gas\":\"0x0\",\"failed\":true,\"returnValue\":\"0x\",\"structLogs\":[]},{\"gas\":\"0x0\",\"failed\":true,\"returnValue\":\"0x\",\"structLogs\":[]}],\"id\":67}",
        "created_at": "2022-12-22T17:24:19.628000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Iâ€™ll add these to our generator for next time",
        "created_at": "2022-12-22T17:25:26.929000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Iâ€™m afk right now could you pls change the chainspec file for teku nethermind ones?",
        "created_at": "2022-12-22T17:26:43.148000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Then at least the chain will finalize again",
        "created_at": "2022-12-22T17:27:03.067000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Thx, sorry for troubles. Nonetheless, I will update the image, because we started passing all withdrawals hive tests ðŸ™‚",
        "created_at": "2022-12-22T17:30:24.407000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Afk as well, can help in a few hours",
        "created_at": "2022-12-22T17:36:52.400000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Lodestar-nethermind is on the correct chain again! ðŸ™‚",
        "created_at": "2022-12-22T17:50:42.576000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e \u003c@412614104222531604\u003e let me know guys once you're available, I can't apply updates on more than one node ðŸ™‚",
        "created_at": "2022-12-22T18:01:47.958000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "but Lodestar \u003c\u003e Nethermind is following the chain, so the issue is fixed",
        "created_at": "2022-12-22T18:02:14.269000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Does nethermind just have to be restarted after the chainspec is updated?",
        "created_at": "2022-12-22T18:02:52.315000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Could you maybe make a PR to our repo with the updated chainspec file?",
        "created_at": "2022-12-22T18:03:51.073000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "So I know what change has to be done.",
        "created_at": "2022-12-22T18:03:59.288000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "what I did for Lodestar\u003c\u003eNethermind:\n1. Update chainspec\n2. Update image, the same docker tag (we added some other not-related fixes and I want Nethermind to run on the latest image)\n3. I wiped both db CL \u0026 EL and restart\n\nI guess recovering without resync might be also possible, but I haven't tried it ðŸ˜‰",
        "created_at": "2022-12-22T18:09:55.589000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "on it",
        "created_at": "2022-12-22T18:10:00.590000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e https://github.com/ethpandaops/withdrawals-testnet/pull/9/files ðŸ™‚",
        "created_at": "2022-12-22T18:13:48.765000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Awesome thanks. Will merge this once Iâ€™m in front of a computer.",
        "created_at": "2022-12-22T18:15:08.735000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Thx man! ðŸ™",
        "created_at": "2022-12-22T18:15:30.300000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "In case you get to your computer before me, check the update_beacon_and_execution playbook. There's a commented section that wipes the remote testnet dir and uploads the changes + updates the node at the same time. You can just use that.",
        "created_at": "2022-12-22T18:21:26.571000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Updated.",
        "created_at": "2022-12-22T20:23:11.352000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "looks like we have quite some reorgs now",
        "created_at": "2022-12-22T20:28:11.456000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```2022-12-22 20:25:52.015 INFO  - Reorg Event *** New Head: f3b48021cdc38bd09bc3c29f2dc85a1d1fc7e4e716f3ad4bbd630c02a751d188 (2824), Previous Head: f516db019a79ce0345e622484fbd12075662c8e6aa6c6115056428bd51dbd85a (2810), Common Ancestor: e91d8b276ce7058bc3118cf3bd3447c43a550d3ee8678270a3d32d71ffa31df4 (2800)```",
        "created_at": "2022-12-22T20:28:20.677000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```2022-12-22 20:27:52.042 INFO  - Reorg Event *** New Head: 97c7d394e44b1a564e8d3deb09788af34edcb1b891eb82cbb5e871dd16cb6d36 (2834), Previous Head: 40601a8185076e0e2b97fbdb744f7c16f07be93f97d2682480cab041bc4f3d52 (2247), Common Ancestor: e35713a68a84f64fce9d8be719511350355a3257423d77732856b2b16a7afda8 (2239)```",
        "created_at": "2022-12-22T20:28:26.920000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "https://forkmon.withdrawalsdevnet1.ethpandaops.io/",
        "created_at": "2022-12-22T20:33:03.580000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "Nethermind looks good, only lighthouse-nethermind has some problems",
        "created_at": "2022-12-22T20:34:38.124000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm I don't see a single good besu node",
        "created_at": "2022-12-22T20:34:42.948000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "but something wrong with besu",
        "created_at": "2022-12-22T20:34:53.701000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "and nimbus",
        "created_at": "2022-12-22T20:34:58.986000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "but I guess, nimbus is known issue",
        "created_at": "2022-12-22T20:35:12.997000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Nimbus is known, it's in optimistic mode",
        "created_at": "2022-12-22T20:35:55.553000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "What's up with besu? They were fine a few hours ago",
        "created_at": "2022-12-22T20:36:06.146000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "2 hours ago something happened",
        "created_at": "2022-12-22T20:36:28.137000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "for besu nodes",
        "created_at": "2022-12-22T20:36:33.929000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "might need to restart to clear the bad blocks?",
        "created_at": "2022-12-22T20:36:55.474000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "hmmm a bit weird tbh",
        "created_at": "2022-12-22T20:37:11.534000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "https://forkmon.withdrawalsdevnet1.ethpandaops.io/",
        "created_at": "2022-12-22T20:37:17.391000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "just a guess without looking ðŸ™‚",
        "created_at": "2022-12-22T20:37:24.691000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Trying to resync geth/teku from scratch and geth is complaining about a bad block at 1644 - is this just bad luck with my sync peers and I should try again, or do I need to do something else to recover here?",
        "created_at": "2022-12-22T20:39:05.176000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "and you can't catch up with the head?",
        "created_at": "2022-12-22T20:39:31.647000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Whatâ€™s our head now?",
        "created_at": "2022-12-22T20:39:42.731000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Nethermind should be back up again, hopefully",
        "created_at": "2022-12-22T20:39:55.449000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "1880 859c49",
        "created_at": "2022-12-22T20:39:56.321000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "yes, Nethermind works ðŸ™‚",
        "created_at": "2022-12-22T20:40:03.743000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "https://forkmon.withdrawalsdevnet1.ethpandaops.io/ in forkmon we can check current head",
        "created_at": "2022-12-22T20:40:20.695000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "We might need to restart the beaconchain explorer",
        "created_at": "2022-12-22T20:40:36.518000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "As it looks to be stuck now",
        "created_at": "2022-12-22T20:40:40.737000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "We used a nethermind/lh endpoint for it",
        "created_at": "2022-12-22T20:40:49.862000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "On lighthouse-besu:\n```\n2022-12-22 20:39:25.566+00:00 | nioEventLoopGroup-3-6 | DEBUG | RetryingGetBlocksFromPeersTask | Got 2 blocks from peer PeerId 0x20e39fcb4483c2139d0b8e4aec56b2b4afd81bb5b4dff35bc9f748a13c14cf740e90f80d62e90a822e94e99a51714182e1f448704b5573f9a71a65af366a552b, reputation PeerReputation 150, validated? true, disconnected? false, client: Nethermind/v1.15.0+751eded8/linux-x64/dotnet7.0.1, connection 1274489747, enode enode://20e39fcb4483c2139d0b8e4aec56b2b4afd81bb5b4dff35bc9f748a13c14cf740e90f80d62e90a822e94e99a51714182e1f448704b5573f9a71a65af366a552b@46.101.153.184:30303, attempt 1\n2022-12-22 20:39:25.610+00:00 | nioEventLoopGroup-3-6 | ERROR | AbstractBlockProcessor | failed persisting block\njava.lang.RuntimeException: World State Root does not match expected value, header 0xea6317f828b8ed3feafeceb63b712abf7fb2a67b9b538e750927e47b9a640fef calculated 0xda298e577473cb5ebc816a0bc0480f3012687a63e2337ad349ebd77fbace2f4b\n```",
        "created_at": "2022-12-22T20:41:10.867000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Which geth image are you using?",
        "created_at": "2022-12-22T20:41:21.933000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Geth has been pushing out updates like crazy",
        "created_at": "2022-12-22T20:41:35.936000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "lightclient's from before genesis this morning.  I'll update.",
        "created_at": "2022-12-22T20:41:50.236000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "yup, so something wrong happened on besu nodes",
        "created_at": "2022-12-22T20:42:04.759000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yes there's an image from marius that should be used. Lemme find it",
        "created_at": "2022-12-22T20:42:13.532000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Other besu nodes still reporting this as bad block to CL, suspect a restart will fix it if it's not a genuine bad block:\n```\n2022-12-22 20:40:06.149+00:00 | vert.x-worker-thread-0 | WARN  | EngineNewPayloadV2 | Invalid new payload: number: 1586, hash: 0x8ba7fb6168c2052dee05beb79fce3c7fe46bd253ae435059bf44fd54183723db, parentHash: 0x23c622cfc2c10115d41e6734e0a27a1e2a0f9e7976d840490ddbec2dda2f3177, latestValidHash: 0x0000000000000000000000000000000000000000000000000000000000000000, status: INVALID, validationError: Block already present in bad block manager.\n```",
        "created_at": "2022-12-22T20:42:28.127000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "but if the restart is needed to fix node after bad block, something is wrong",
        "created_at": "2022-12-22T20:42:57.797000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/MariusVanDerWijden/go-ethereum/tree/withdrawal-devnet-1",
        "created_at": "2022-12-22T20:43:11.632000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "agree, need to investigate, but it got us back to a working state on devnet-0",
        "created_at": "2022-12-22T20:43:31.635000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'll restart the besu nodes now to rule that out",
        "created_at": "2022-12-22T20:44:12.078000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "our teku/geth (boot)node now says this```2022-12-22 20:45:18.451 ERROR - Failed to update eth1 chain head\norg.web3j.protocol.exceptions.ClientConnectionException: Invalid response received: 500; {\n  \"id\": 1,\n  \"jsonrpc\": \"2.0\",\n  \"error\": {\n    \"code\": -32603,\n    \"message\": \"Error processing response: encountered hyper error: hyper::Error(Connect, ConnectError(\\\"tcp connect error\\\", Os { code: 111, kind: ConnectionRefused, message: \\\"Connection refused\\\" }))\"\n  }\n}```",
        "created_at": "2022-12-22T20:45:40.595000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "That's an rpc error no? The bootnode hosts the public rpc too. I don't think that's a consensus related error.",
        "created_at": "2022-12-22T20:46:21.940000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "maybe someone is spamming it?",
        "created_at": "2022-12-22T20:46:53.889000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "or it might be the fuzzer?",
        "created_at": "2022-12-22T20:46:58.051000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "things look good btw, we are at 84% participation for epoch 90",
        "created_at": "2022-12-22T20:48:03.567000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Okay, resync from scratch with the latest geth and teku and I'm now tracking head again.",
        "created_at": "2022-12-22T20:50:33.329000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah sorry about that, I had to merge a few fixes in last minute",
        "created_at": "2022-12-22T20:53:12.424000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Restarted besus to clear bad block cache, still seeing 1586 as invalid ðŸ˜¦\n```\n2022-12-22 20:45:51.643+00:00 | vert.x-worker-thread-0 | WARN  | MainnetBlockBodyValidator | Invalid block: receipts root mismatch (expected=0xe6c7a6516e7e17210e9a5d86389ba6f8ccd9c838a58195b0eaeada9e1963542d, actual=0x1c05a19f39cb09ed8b515d873f50795a12f1980d65195bab7a76004ece3681b7)\n2022-12-22 20:45:51.644+00:00 | vert.x-worker-thread-0 | WARN  | EngineNewPayloadV2 | Invalid new payload: number: 1586, hash: 0x8ba7fb6168c2052dee05beb79fce3c7fe46bd253ae435059bf44fd54183723db, parentHash: 0x23c622cfc2c10115d41e6734e0a27a1e2a0f9e7976d840490ddbec2dda2f3177, latestValidHash: 0x23c622cfc2c10115d41e6734e0a27a1e2a0f9e7976d840490ddbec2dda2f3177, status: INVALID, validationError: failed to validate output of imported block\n```",
        "created_at": "2022-12-22T20:55:22.961000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Does besu have warm coinbase, push0 ?",
        "created_at": "2022-12-22T20:55:56.161000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Should have all 3 EVM changes yes",
        "created_at": "2022-12-22T20:56:07.512000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Okay.",
        "created_at": "2022-12-22T20:56:12.343000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "limit/meter one as well",
        "created_at": "2022-12-22T20:56:19.077000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Limit meter wasnâ€™t on this one iirc \u003c@360491619402776577\u003e can you confirm which 3 evm changes you added?",
        "created_at": "2022-12-22T20:56:43.143000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "All three, limit\u0026meter is in for geth (thats what i pushed this morning)",
        "created_at": "2022-12-22T20:57:35.592000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ahh okay.",
        "created_at": "2022-12-22T20:57:43.630000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "besu is giving this error with lodestar",
        "created_at": "2022-12-22T20:57:47.031000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "5137cebd6621f70c21ebd95a5af835877b750d4278248e9003eb375c5251a583"
            }
        ]
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "on slot 2234",
        "created_at": "2022-12-22T20:57:55.004000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Is anyone from besu in the mood for a debugging session? I can assist",
        "created_at": "2022-12-22T21:00:54.240000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Would like to yes but had to go out. Might be around in an hour or two",
        "created_at": "2022-12-22T21:03:00.128000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Tagging \u003c@386930523815149571\u003e and \u003c@524738020033691659\u003e just in case but they might be on holiday",
        "created_at": "2022-12-22T21:04:09.512000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "That'll be too late for me, I try to give you some data from a geth node and you can look at it later",
        "created_at": "2022-12-22T21:04:28.125000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Nethermind lighthouse also seems to be a bit behind(forkmon)",
        "created_at": "2022-12-22T21:09:43.193000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@912415191067676693\u003e could you check it?",
        "created_at": "2022-12-22T21:17:42.684000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ok so my findings:\n```\nTx 57 has a push0 opcode\n/tmp/block_0x8ba7fb61-57-0xc7f982ae-355092943:{\"pc\":0,\"op\":95,\"gas\":\"0xafc0\",\"gasCost\":\"0x2\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH0\"}\n\nNo coinbase opcodes, no create or create2 opcodes\nNo withdrawals\nNone of the input to the transactions is particularly big\nSome transactions (e.g. 11) have accesslists\nNo transactions send to coinbase (0xf97e180c050e5ab072211ad2c213eb5aee4df134)\nÇ¸one of the traces are particular big\n```",
        "created_at": "2022-12-22T21:35:30.721000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Block",
        "created_at": "2022-12-22T21:35:34.896000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "ece8e2bfd377a5605f7932ab0ab12ad99ee0ab5649fae45fef6f7d1bcf7bd6b4"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "traces of the block",
        "created_at": "2022-12-22T21:35:55.188000+00:00",
        "attachments": [
            {
                "type": "application/x-tar",
                "origin_name": "traces.tar",
                "content": "745461bb02f479584b81fd7f4702eaa64bd790d2fa07cbfe8493503ec1eac22b"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The push0 trace in geth is only 3 lines:\n```\ncat /tmp/block_0x8ba7fb61-57-0xc7f982ae-355092943 \n{\"pc\":0,\"op\":95,\"gas\":\"0xafc0\",\"gasCost\":\"0x2\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH0\"}\n{\"pc\":1,\"op\":117,\"gas\":\"0xafbe\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH22\"}\n{\"pc\":24,\"op\":0,\"gas\":\"0xafbb\",\"gasCost\":\"0x0\",\"memSize\":0,\"stack\":[\"0x0\",\"0x96600060d255e16000607e557f8a52c056560cd9c363\"],\"depth\":1,\"refund\":0,\"opName\":\"STOP\"}\n{\"output\":\"\",\"gasUsed\":\"0x5\",\"time\":22180}\n````\nI would start there an see if besu produces the same trace",
        "created_at": "2022-12-22T21:38:05.769000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Thanks \u003c@360491619402776577\u003e I wonder if thereâ€™s a different block with push0 that besu deems as valid.\n\nI am actually back now so could be online in 5mins",
        "created_at": "2022-12-22T21:40:57.986000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I'm pretty sure that there were earlier blocks with push0",
        "created_at": "2022-12-22T21:41:29.795000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "But it kinda depends on the code after the push operation",
        "created_at": "2022-12-22T21:41:42.921000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "this is what's in besu's debug_getBadBlock",
        "created_at": "2022-12-22T21:48:58.972000+00:00",
        "attachments": [
            {
                "type": "application/json; charset=utf-8",
                "origin_name": "1586-bad-block.json",
                "content": "d55ddae90ea5386f0e0d886a87fa58a640d896c677c037cf3d47b39769fe971b"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "What is besus complain about the block?",
        "created_at": "2022-12-22T21:52:19.684000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "```2022-12-23 07:52:10.571+10:00 | vert.x-worker-thread-0 | WARN  | MainnetBlockBodyValidator | Invalid block: receipts root mismatch (expected=0xe6c7a6516e7e17210e9a5d86389ba6f8ccd9c838a58195b0eaeada9e1963542d, actual=0x1c05a19f39cb09ed8b515d873f50795a12f1980d65195bab7a76004ece3681b7)```",
        "created_at": "2022-12-22T21:53:16.419000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "That's from besu btw. I'm pretending to be a besu dev. ðŸ™‚",
        "created_at": "2022-12-22T21:53:33.333000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "beat me too it ðŸ‘‹ ðŸ˜†",
        "created_at": "2022-12-22T21:53:39.554000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm weird",
        "created_at": "2022-12-22T21:54:33.807000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I'm not 100% sure how to debug that",
        "created_at": "2022-12-22T21:54:48.768000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I have vague memories that things like gas differences show up as a receipts root mismatch. Trying to get a trace of the block which should help compare but currently in the angry at JSON-RPC phase...",
        "created_at": "2022-12-22T21:56:46.466000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I can also dump our raw receipts for the block",
        "created_at": "2022-12-22T21:57:24.186000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2022-12-22T21:59:10.077000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "debug.getRawReceipt",
                "content": "c26807ce4f5cfcdbd53c6c1482d5767a52c8050941d118a30502034cfae34266"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I think besu also has `debug_standardTraceBadBlockToFile`or something similar",
        "created_at": "2022-12-22T21:59:58.191000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Yep, just got that to work and now have a directory full of trace files to understand.",
        "created_at": "2022-12-22T22:00:17.936000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Nice, I have the geth equivalent posted above (traces.tar)",
        "created_at": "2022-12-22T22:01:06.551000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "In the file name for each trace, is it block_\u003cblockHash\u003e_\u003ctxNumber\u003e_\u003ctxHash\u003e_\u003csomething\u003e?",
        "created_at": "2022-12-22T22:01:50.868000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes exactly",
        "created_at": "2022-12-22T22:02:12.316000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "the something is just random I think",
        "created_at": "2022-12-22T22:02:23.622000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Because I have:\n```\ncat block_0x8ba7fb61-57-0xc7f982ae-1671746355728\n{\"pc\":0,\"op\":95,\"gas\":\"0xafc8\",\"gasCost\":\"0x0\",\"memory\":\"0x\",\"memSize\":0,\"stack\":[],\"returnData\":\"0x\",\"depth\":1,\"refund\":0,\"opName\":\"INVALID\",\"error\":\"Bad instruction\"}\n{\"output\":\"\",\"gasUsed\":\"0x186a0\",\"time\":173750}\n```\n\nWhat's the something at the end because it's different between geth and besu?",
        "created_at": "2022-12-22T22:02:24.172000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Or timestamp",
        "created_at": "2022-12-22T22:02:38.992000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ohoh",
        "created_at": "2022-12-22T22:02:54.987000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "That looks like the culprit",
        "created_at": "2022-12-22T22:03:07.898000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Is that saying no PUSH0?",
        "created_at": "2022-12-22T22:03:11.190000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2022-12-22T22:03:15.209000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "that's the most likely suspect since it's a first test of it being triggered by shanghaiTime",
        "created_at": "2022-12-22T22:03:48.911000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Certainly looks like the operation is wired up in the shanghai evm, so question is whether shanghai actually activated correctly or not.",
        "created_at": "2022-12-22T22:05:01.853000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The rest of the code just returns normally in this transaction. If the rest of the code would panic/revert, we would arrive at the same gas cost (all gas spent). Thats probably why we haven't seen it earlier",
        "created_at": "2022-12-22T22:05:22.480000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Should have activated at this timestamp `Protocol schedule created with milestones: [Shanghai: 1671722220]`\nIt's possible there's a code path that was missed for checking the timestamp, and maybe it's still only checking blockNumbers (this was the problem we had with syncing issues a day or two ago)",
        "created_at": "2022-12-22T22:07:42.817000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "We print out our chainconfig on bad blocks btw, which makes these issues easier to diagnose",
        "created_at": "2022-12-22T22:09:18.687000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "If there's an chainconfig in besu, I'm not familiar with it so not sure if this is possible",
        "created_at": "2022-12-22T22:10:53.959000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "`BlockReplay` line 142:\n```\n    final ProtocolSpec protocolSpec = protocolSchedule.getByBlockNumber(header.getNumber());\n```\n\nI think the replay may be lying to us.",
        "created_at": "2022-12-22T22:11:20.798000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "That could be",
        "created_at": "2022-12-22T22:11:44.140000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "getByBlockNumber would be the culprit",
        "created_at": "2022-12-22T22:11:48.987000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Changing it over and will try getting a new trace to see if it says something different.",
        "created_at": "2022-12-22T22:12:02.960000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Testing",
        "parent": "",
        "content": "I think we need to re-plumb it to `getBlockByHeader`",
        "created_at": "2022-12-22T22:12:26.143000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "agreed, should be `protocolSchedule.getByBlockHeader(header);`",
        "created_at": "2022-12-22T22:12:42.393000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'll fix up now",
        "created_at": "2022-12-22T22:12:45.350000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Testing",
        "parent": "",
        "content": "or we could pass in both time and number, but header seems more future proof.",
        "created_at": "2022-12-22T22:12:51.313000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "yes, It's the approach we've taken but not all code paths have been covered yet it seems",
        "created_at": "2022-12-22T22:13:21.621000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I'm getting the same trace even with that switched to getBlockByHeader.",
        "created_at": "2022-12-22T22:13:30.456000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n\u003e eth.getTransactionReceipt(eth.getBlock(1586, true).transactions[57].hash)\n{\n  blockHash: \"0x8ba7fb6168c2052dee05beb79fce3c7fe46bd253ae435059bf44fd54183723db\",\n  blockNumber: 1586,\n  contractAddress: \"0xdb0d7a177568ed904a7727cea3331a13e9a3a768\",\n  cumulativeGasUsed: 3463547,\n  effectiveGasPrice: 999999765,\n  from: \"0x7feaea0ff70ffc9eec2104f57f7136aff4dea680\",\n  gasUsed: 55013,\n  logs: [],\n  logsBloom: \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\n  status: \"0x1\",\n  to: null,\n  transactionHash: \"0xc7f982aef3e5c40970c080f9e162f557bb1216c4477607563610f4a61f7b7acd\",\n  transactionIndex: 57,\n  type: \"0x2\"\n}\n```",
        "created_at": "2022-12-22T22:14:11.111000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Okay I think I'm going to bed now, happy debugging",
        "created_at": "2022-12-22T22:16:16.681000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "thanks for the help!",
        "created_at": "2022-12-22T22:17:44.057000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Ok, protocolSpec has name=\"Shanghai\" but operation 95 (0x5f) is invalid operation instead of PUSH0.",
        "created_at": "2022-12-22T22:20:01.780000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "`    \"terminalTotalDifficulty\": 0,` which means we don't enable the transition besu controller?",
        "created_at": "2022-12-22T22:23:07.889000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I think we do, due to presence of TTD",
        "created_at": "2022-12-22T22:26:26.661000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "We are definitely not ever executing the `MainnetEVMs.registerShanghaiOperations`.",
        "created_at": "2022-12-22T22:27:01.954000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "and shanghai triggered for the purposes of withdrawals successfully",
        "created_at": "2022-12-22T22:27:07.398000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I think `MergeProtocolSchedule.applyMergeSpecificModifications` is overriding the evm builder and setting it back to Paris.",
        "created_at": "2022-12-22T22:31:11.692000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "just got there myself ðŸ˜†",
        "created_at": "2022-12-22T22:31:22.270000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'll remove it...there was some discussion about whether we needed it or not, I think my conclusion to that conversation must have been wrong",
        "created_at": "2022-12-22T22:33:02.282000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "~bit weird how that doesn't appear to affect withdrawals though~ ah guess it's just overriding certain pieces not replacing the whole definition",
        "created_at": "2022-12-22T22:33:45.163000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Withdrawals don't use the EVM so they'll keep working fine.",
        "created_at": "2022-12-22T22:34:16.944000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "And successfully sync'd past that block. ðŸŽ‰",
        "created_at": "2022-12-22T22:36:40.101000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Fully in sync with teku/franken-besu.",
        "created_at": "2022-12-22T22:38:22.040000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "http://gcr.io/prylabs-dev/beacon-chain:96981a07b9\n\u003c@412614104222531604\u003e that image will let you submit changes pre Capella as you were trying, no changes",
        "created_at": "2022-12-22T22:54:20.688000+00:00",
        "attachments": null
    }
]