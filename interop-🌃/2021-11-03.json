[
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "It's only applicable to the block sync. State sync can't reason about validity of a particular block",
        "created_at": "2021-11-03T08:29:18.760000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003e Maybe ForkChoice should take an object not the raw parameters\nYeah, the param set grew wrt previous version of this method. Is extending parameter list less convenient than an object in terms of implementation?",
        "created_at": "2021-11-03T08:32:37.626000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "For me it is, but I think that depends heavily on the libraries you use",
        "created_at": "2021-11-03T08:34:30.797000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "It could be as follows: `{status: \"SUCCESS\", payloadId: ID}`, `{status: \"SYNCING\", payloadId: null}`. In this case we could remove the notion of payloadId hashing and the complexity it brings from the spec. cc \u003c@!203220829473996800\u003e",
        "created_at": "2021-11-03T08:34:56.496000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I see, you have to change the signature of the function in the code and if it were an object the change would only touch the body. right?",
        "created_at": "2021-11-03T08:36:25.245000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Do you mean that you have to keep an invalid chain around and check if the new payload isn't from an invalid chain?",
        "created_at": "2021-11-03T08:38:28.953000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "That too, but it's also easier for us to create structs that we can pass around and create bindings for (e.g. to allow for overwriting datatypes hexutil.Uint64 instead of uint64)",
        "created_at": "2021-11-03T08:47:06.783000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "ok, I see. I think that it may be an object after all, I guess there will be no opposition if we change it in the next version üôÇ",
        "created_at": "2021-11-03T08:48:34.733000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Alright, I've updated the testvectors here: https://notes.ethereum.org/@9AeMAlpyQYaAAyuj47BzRw/rkwW3ceVY",
        "created_at": "2021-11-03T09:16:40.913000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!363800010518822915\u003e ^",
        "created_at": "2021-11-03T09:16:48.797000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "(The testvectors use the struct not the individual fields, as this is complicated to do with our RPC library, I'm looking into it)",
        "created_at": "2021-11-03T10:16:52.116000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "Censorship Train",
        "created_at": "2021-11-03T11:08:01.372000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Fixed, the test vectors should be fine now.\nI've also added them to the new tracking doc",
        "created_at": "2021-11-03T12:01:35.756000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "I'm not opposed to returning payloadid",
        "created_at": "2021-11-03T14:12:41.114000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "considering we are *not* doing a testnet build this week and that most clients will only be beginning, I'd prefer to incorporate feedback into a minor spec release sooner (this week) rather than later",
        "created_at": "2021-11-03T14:13:21.303000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Minor feedbacks:\n\nAccording to the spec, `engine_forkchoiceUpdatedV1` should return `result:¬†enum,¬†\"SUCCESS\" | \"SYNCING‚Äù` but it‚Äôs returning `\"result\":{\"status\":\"VALID‚Äù}` (I think this is what we are discussing with your earlier points)\n\n`engine_forkchoiceUpdatedV1` with `payloadAttributes` triggers the `Created payload...` log but  `engine_getPayloadV1` doesn‚Äôt trigger any log.  Seems cosmetic, logging placed at the wrong place? The response itself is good though",
        "created_at": "2021-11-03T14:22:43.686000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Re `SUCCESS` I've just used the one we had available in the code already will change to the correct one üòÑ",
        "created_at": "2021-11-03T14:25:00.520000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The `forkchoiceUpdatedV1` will trigger the creation of the payload, so the log is actually correct. The `getPayload` will only read the previously prepared payload. Right now the preparation is synchronous with the `forkchoiceUpdated` call. In the future the `forkchoiceUpdated` will just start the generation and return immediately",
        "created_at": "2021-11-03T14:27:38.003000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!360491619402776577\u003e The payloadID changed to 32 bytes, just to be safe when the IDs are used in a scenario where an attacker could try insert their own colliding request. And we added a version prefix byte to the input so we can change the rest of the inputs safely in the future. PR looks good otherwise!",
        "created_at": "2021-11-03T16:59:51.074000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "Hello, I have a proposal, why dont we replace TerminalTotalDifficulty with just a boolean flag. the reasoning for this is that there is no need to specify a transition point in execution layer, whenever  the merge will happen the beacon chain will start notify the execution layer and start to reverse sync. regarding consensus checks we dont need those either (in the execution layer), we have the parenthash so the only execution layer check we would need would be `current_block.hash == next_block.hash`",
        "created_at": "2021-11-03T21:38:40.181000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "assuming that the beacon chain is providing valid blocks",
        "created_at": "2021-11-03T21:39:03.608000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "or am i missing something?",
        "created_at": "2021-11-03T21:41:33.086000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "How does the beacon chain then determine the final PoW block, given that timestamps can be changed?",
        "created_at": "2021-11-03T21:45:48.263000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "I guess this is also true with TTD: you can have many siblings.",
        "created_at": "2021-11-03T21:47:02.444000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "okay, so the beacon chain, once the merge happens starts notifying the execution layer regardless with `executePayload`",
        "created_at": "2021-11-03T21:47:30.463000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e This has some risks. For example someone could locally follow a PoW fork because their beacon node is temporarily censored and stuff like that",
        "created_at": "2021-11-03T21:48:16.931000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "so whatever happens, assuming the beacon chain supply a valid parent hash we will be able to check the parent block by using its hash",
        "created_at": "2021-11-03T21:48:17.247000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "i mean, if the beacon chain has notified of the transition, the EL will have to remember that",
        "created_at": "2021-11-03T21:49:20.625000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e Yes. But for example someone could DOS the beacon chain exactly at the merge height. and delay the merge using that",
        "created_at": "2021-11-03T21:50:30.069000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e it's not very safe if the Eth1 chain is unaware of the TTD",
        "created_at": "2021-11-03T21:50:55.353000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "then once the beacon chain is reconnected and it reverse download, the blocks just gets replaced with valid ones until we find an hash that match the parenthash",
        "created_at": "2021-11-03T21:54:09.646000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e sounds pretty scary",
        "created_at": "2021-11-03T21:54:30.261000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "what does it mean, if as we say in the spec assume that the beacon chain is ALWAYS right then it should imply no risk",
        "created_at": "2021-11-03T21:55:46.838000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "but this is my 2c",
        "created_at": "2021-11-03T21:55:51.576000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "if you find it too scary then its fine üôÇ",
        "created_at": "2021-11-03T21:56:04.343000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e Well I don't want anyone to be \"fooled\" by a PoW fork",
        "created_at": "2021-11-03T21:56:22.104000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e the Eth1 client should just *stop* at the TTD. Because we *know* that every block after that will definitely be reorged once the merge gets into the beacon chain",
        "created_at": "2021-11-03T21:57:00.028000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "i mean with this the worse it can happen is that the entire chain get synced from scratch",
        "created_at": "2021-11-03T21:57:17.810000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e I find a reorg of more than 10 blocks or so a pretty horrible scenario",
        "created_at": "2021-11-03T21:57:49.657000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdankrad\u003e why risk that if we can make it 100% safe for users",
        "created_at": "2021-11-03T21:58:11.429000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "ok, then whatever then let's scratch thisüòÜ",
        "created_at": "2021-11-03T21:58:28.483000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "Cross posted from \u003c#598292067260825641\u003e \n\n-------------------\n\nConsensus Layer call tomorrow (11/4, 14 UTC)\nhttps://github.com/ethereum/pm/issues/412\n\nreminder! The first 30-45 minutes of the call will be for Kintsugi office-hours/discussion\n*We invite contributors from both the consensus and execution layer to these*",
        "created_at": "2021-11-03T23:41:23.280000+00:00",
        "attachments": null
    }
]