[
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@892053833121923094\u003e do we have hive tests that try to sync a block and it's child at the same time?",
        "created_at": "2023-03-09T00:35:20.743000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "We've had races before that were fixed and this week we've seen another one appearing on the same paths",
        "created_at": "2023-03-09T00:36:10.483000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Seems something that may be valuable outside of prysm as well, just not sure if hive is the right place for this",
        "created_at": "2023-03-09T00:36:42.812000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "We have tests for sync but not specifically as you mention, could you describe a bit more the scenario?",
        "created_at": "2023-03-09T00:51:02.012000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The scenario is pretty simple: the block N is withheld and released with N+1 more or less at the same time and the node may get them in arbitrary order",
        "created_at": "2023-03-09T02:06:58.633000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "Basically `N` and `N+1` are received by a peer in quick succession. The difference in time that it is received would be `\u003c 1 second` between the blocks",
        "created_at": "2023-03-09T02:15:23.646000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "hopefully a simple question - im running nethermind and have settings to tell it to write to its own logs as far as i undertsand, but it still seems to write to syslog... how can i stop it writing to syslog? is there a magical setting somewhere?",
        "created_at": "2023-03-09T02:17:03.325000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e in geth, there's this warning about the beacon node going offline if we don't publish anything - what's the sensitivity of it? basically, recent nimbus versions give the EL one update every 8k blocks while syncing the finalized portion of the chain (ie during initial full sync or when catching up after being offline) - this doesn't seem to be enough to satisfy geth however in terms of the warning - per our earlier discussions, there's no point giving the EL too many FCU's or blocks that are not close to the head anyway",
        "created_at": "2023-03-09T09:52:45.271000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n\n    // beaconUpdateStartupTimeout is the time to wait for a beacon client to get\n    // attached before starting to issue warnings.\n    beaconUpdateStartupTimeout = 30 * time.Second\n\n    // beaconUpdateExchangeTimeout is the max time allowed for a beacon client to\n    // do a transition config exchange before it's considered offline and the user\n    // is warned.\n    beaconUpdateExchangeTimeout = 2 * time.Minute\n\n    // beaconUpdateConsensusTimeout is the max time allowed for a beacon client\n    // to send a consensus update before it's considered offline and the user is\n    // warned.\n    beaconUpdateConsensusTimeout = 30 * time.Second\n\n    // beaconUpdateWarnFrequency is the frequency at which to warn the user that\n    // the beacon client is offline.\n    beaconUpdateWarnFrequency = 5 * time.Minute\n```",
        "created_at": "2023-03-09T10:00:20.497000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "hm, wdyt of increasing those timeouts while geth is syncing?",
        "created_at": "2023-03-09T10:05:00.453000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "`beaconUpdateConsensusTimeout` in particular is very tight when syncing",
        "created_at": "2023-03-09T10:06:21.151000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethereum/go-ethereum/pull/26840#pullrequestreview-1332449562",
        "created_at": "2023-03-09T11:00:15.303000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Ok I understand now, let me think about how we can do this because none of the current tests alter the order of the communications, or the connection in any way between consensus peers.\nIf you have existing tests for networking that are similar to this it would be really helpful too.",
        "created_at": "2023-03-09T13:50:06.225000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "How we do it to simulate a similar situation is to freeze the process of one node  for a period of time ( 1 epoch) and then bring it online again. Once it is online, it basically receives all the unseen blocks via gossip around the same time. I am not sure how easy it is to do this via hive but something similar could work",
        "created_at": "2023-03-09T14:58:28.835000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@449019668296892420\u003e I noticed that nimbus nodes on goerli seem to be offline. Could you pls ensure we have them up before the fork (with updated clients).",
        "created_at": "2023-03-09T15:02:43.021000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@425572898787426305\u003e I'm sure this doesn't adhere to any format for an API PR, but would love if it's considered. On the CL side it's trivial to implement and I suspect it's very simple on the EL side to put a stub or even declare the field optional and treat as true/false by default",
        "created_at": "2023-03-09T18:36:57.632000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethereum/execution-apis/pull/388",
        "created_at": "2023-03-09T18:37:22.369000+00:00",
        "attachments": null
    }
]