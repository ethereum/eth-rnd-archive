[
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e perhaps it's not too late on a Saturday night, what's the config in genesis.json to set the timestamp of the Capella fork?",
        "created_at": "2022-11-06T02:23:27.437000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "ah probably \"shanghai\"",
        "created_at": "2022-11-06T02:24:43.856000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "```\n+       // Verify existence / non-existence of withdrawalsHash.\n+       shanghai := chain.Config().IsShanghai(header.Number)\n+       if shanghai \u0026\u0026 header.WithdrawalHash == nil {\n+               return fmt.Errorf(\"missing withdrawalsHash\")\n+       }\n+       if !shanghai \u0026\u0026 header.WithdrawalHash != nil {\n+               return fmt.Errorf(\"invalid withdrawalHash: have %s, expected nil\", header.WithdrawalHash)\n+       }\n```",
        "created_at": "2022-11-06T02:29:12.881000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ahh ok, I see you guys have block number there, I'll try zero, but I may need to hack that into a timestamp",
        "created_at": "2022-11-06T02:33:06.582000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "yeah, you guys don't like it if I give you bellatrix blocks without withdrawals....",
        "created_at": "2022-11-06T02:36:50.569000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003clightclient\u003e \u003e \u003clightclient\u003e  over engine api? yeah it needs to be empty json list, not null (re @amphora_interop_bot: \u003cpotuz\u003e yeah, you guys don't like it if I give you bellatrix blocks without withdrawals....)",
        "created_at": "2022-11-06T02:38:11.476000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@755590043632140352\u003e  ^",
        "created_at": "2022-11-06T02:40:12.914000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "yeah but the problem is that I do not know how to fork on a block number",
        "created_at": "2022-11-06T02:44:54.493000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I can only fork on a timestamp for you",
        "created_at": "2022-11-06T02:45:03.773000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I mean I can't possibly know at which block height my fork will happen",
        "created_at": "2022-11-06T02:45:40.748000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The logic does not seem too complicated to check against `header.Timestamp` will give it a shot on top of your branch",
        "created_at": "2022-11-06T02:54:09.127000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "oh i see sorry -- i just cherry-picked marius' PR (https://github.com/ethereum/go-ethereum/pull/25878) onto a different withdrawals branch, maybe this will work https://github.com/lightclient/go-ethereum/tree/withdrawals-timestamp",
        "created_at": "2022-11-06T02:56:43.891000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "should I run from that branch directly?",
        "created_at": "2022-11-06T02:57:14.034000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "if you set the timestamp for \"shanghaiBlock\" in the genesis config, it _should_ work",
        "created_at": "2022-11-06T02:58:17.431000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "thanks a lot, will see if more errors on the prysm side pop up,",
        "created_at": "2022-11-06T02:59:15.338000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "im going to be afk soon, but tag me here and will respond tomorrow!",
        "created_at": "2022-11-06T02:59:42.855000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "same here, it's midnight on a saturday night",
        "created_at": "2022-11-06T03:00:01.221000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e the json should be `validator_index` for the validator index in the withdrawal",
        "created_at": "2022-11-06T03:53:09.640000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "hmm where is it defined to be this? every other engine api field is camelCase",
        "created_at": "2022-11-06T04:10:48.738000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "engine api spec seems to say `validatorIndex`: https://github.com/ethereum/execution-apis/blob/main/src/engine/specification.md#withdrawalv1",
        "created_at": "2022-11-06T04:11:27.403000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "oh the consensus spec is what I'm following, my bad, I'm not used to dealing with these marshaling/unmarshaling",
        "created_at": "2022-11-06T04:15:29.181000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, it's really frustrating to be wasting time on a dictionary",
        "created_at": "2022-11-06T04:26:11.222000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ok, it's gotten very late here,  and I guess I should pay more attention to API talk, but perhaps \u003c@425572898787426305\u003e  or you \u003c@543900561460822016\u003e  can explain me at some point why the rationale to have the different versions of the payload being returned by the Engine API? I mean why do we want to to receive the list of withdrawals from the engine on `getPayloadV2`? and why do we need to send them on FCU as payloadAttributesV2?",
        "created_at": "2022-11-06T05:11:22.888000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I just don't understand why do we need to be dealing with extra information back and forth that the beacon has. When the beacon is about to propose a block, the beacon knows how to pack the extra withdrawals. I understand that MEV boost and similar get more complicated, but the beacon does not need at all to request the withdrawals from the EL, it can receive a V1 and pack the withdrawals itself",
        "created_at": "2022-11-06T05:14:06.219000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The same when sending FCU, the EL does not need at all the list of withdrawals in payloadAttributesV2? what is the use for that? the EL receives the withdrawals on NewPayloadV2 and that's all the processing that it needs, a second call of FCU tells it what's the head. I suppose I am missing something obvious here, and I'm hoping that the answer is not to help PBS.",
        "created_at": "2022-11-06T05:15:43.578000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I frankly don't understand the design now, this decision complicates a lot the implementation of having to deal with different versions of objects when we could easily just call getPayloadV1 in the same call as for Bellatrix, and just add the withdrawals when proposing a block. Same as the paths for getPayloadAttributes...",
        "created_at": "2022-11-06T05:19:06.745000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "I get a panic on that branch, \n```\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x9884ed]\n\ngoroutine 174 [running]:\ngithub.com/ethereum/go-ethereum/core.(*BlockValidator).ValidateBody(0xc000474940, 0xc0003b95e0)\n    external/com_github_ethereum_go_ethereum/core/block_validator.go:70 +0x44d\ngithub.com/ethereum/go-ethereum/core.(*insertIterator).next(0xc000f21380)\n    external/com_github_ethereum_go_ethereum/core/blockchain_insert.go:124 +0x15a\ngithub.com/ethereum/go-ethereum/core.(*BlockChain).insertChain(0xc0006fc900, {0xc0000d9040?, 0x33, 0x33}, 0x1, 0x1)\n    external/com_github_ethereum_go_ethereum/core/blockchain.go:1519 +0x631\ngithub.com/ethereum/go-ethereum/core.(*BlockChain).InsertChain(0xc0006fc900, {0xc0000d9040?, 0x33, 0x33})\n    external/com_github_ethereum_go_ethereum/core/blockchain.go:1476 +0xb51\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).importBlockResults(0xc0004be300, {0xc0000d8ea0, 0x33, 0xafb55154b5766f71?})\n    external/com_github_ethereum_go_ethereum/eth/downloader/downloader.go:1551 +0x45a\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).processFullSyncContent(0xc0004be300, 0xc0004748a0, 0x0)\n    external/com_github_ethereum_go_ethereum/eth/downloader/downloader.go:1518 +0x17d\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).syncWithPeer.func9()\n    external/com_github_ethereum_go_ethereum/eth/downloader/downloader.go:622 +0x25\ngithub.com/ethereum/go-ethereum/eth/downloader.(*Downloader).spawnSync.func1()\n    external/com_github_ethereum_go_ethereum/eth/downloader/downloader.go:634 +0x70\ncreated by github.com/ethereum/go-ethereum/eth/downloader.(*Downloader).spawnSync\n    external/com_github_ethereum_go_ethereum/eth/downloader/downloader.go:634 +0x5f\n```\nalthough, this is when a new geth node tries to sync up. There is probably an issue with the shanghai time config, but thought it was relevant to share here",
        "created_at": "2022-11-06T07:52:14.987000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Wouldn‚Äôt the EL need to know the list of withdrawals to apply when building the block? Otherwise it wouldn‚Äôt have updated those balances and would have the wrong state root for the created block. \nTheoretically it doesn‚Äôt then need to give the withdrawals back to the beacon node in the getPayloadV2 call but it would be very weird for it to return only a partial payload.",
        "created_at": "2022-11-06T10:32:13.686000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The point is that we need to change a critical part of code to call a function that returns an different structure when we could simply reuse our existing call for the V1 payload. Yeah. Certainly we need to send the withrawals before. And given when the engine starts building the block it makes sense that is on FCU. So yes I do agree that we need to change that call.",
        "created_at": "2022-11-06T10:41:14.880000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I know nothing about APIs but from the little I could read last night in geth code and in the API itself that there are optional fields. My life would have been much better if I could just use the very same engine calls instead of different ones, and I just pack different objects. I suspect is the same for the El.",
        "created_at": "2022-11-06T10:45:11.972000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "Basically what Adrian said. We definitely need the list of withdrawals in `payloadAttributes` because if our EL is proposing, it needs to apply the withdrawals to the state. And yes - we don't technically need to return them as part of the `ExecutionPayloadV2`. I think the decision to do so was more for completeness sake and it didn't feel like it cost much to do so. If there is a strong reason to not do this, we can still change the behavior.",
        "created_at": "2022-11-06T13:10:44.184000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "I would refer to engine api spec over geth. In order to more cleanly deal with the multiple versions, I'm use _one_ ExecutionPayload struct, _one_ PayloadAttributes struct, etc with some optional fields and then do further validation it matches the expected V1 and V2 semantics.\n\nRe: versioning. I think you're right, we could have gotten away with adding withdrawals to the existing objects as optional pre-capella and required post-capella. Maybe \u003c@425572898787426305\u003e can share more. Originally, my perspective was that is preferable to not tie the API to hard forks (e.g. could use V2 of a method before the fork), but it isn't realy possible for capella because the changes are inherently tied to the fork.",
        "created_at": "2022-11-06T13:23:21.384000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I'm fine with having two different methods, I don't feel as strongly as with the withdrawals queue since this doesn't really add complexity and I suppose this is very much language dependant. What it's taking me a few hundred lines of essentially copy pasting code and adding `s/Bellatrix/Capella/g` in Golang, would have almost trivial had we had classes and templated classes as in C++. Most probably it's my ignorance of Go though. It's just that the inertia of defining interfaces and porting all the code to make it compatible with them is just as horrible as the copy/paste, so I went with the latter.",
        "created_at": "2022-11-06T13:28:33.762000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "I pushed an update to the `withdrawals-timestamp` branch -- the header should be checked at that point, so geth should have already failed gracefully if `WithdrawalsHash` was `nil` during Shanghai. I added some guards against misconfiguration in `ethash` and `clique`, but will continue investigating",
        "created_at": "2022-11-06T13:45:39.141000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "If one of you guys could provide the configs you're using and how you're starting the two clients, I could also check locally üôÇ",
        "created_at": "2022-11-06T13:51:56.301000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "So the one thing that I noticed, is that if I were to only be required to use geth: then I can just simply call `engine_forkchoiceUpdatedV2` every time, since by reading your code you fallback to the same function and only check that the withdrawal field is empty if it's before Shanghai. The problem is that we don't get the luxury to do this because other clients may not have the very same logic and we need to treat them as they are two different calls, V2 and V1. If on the other hand all EL clients implement the same logic as geth, of falling back to FCU2 with empty withdrawals, then I don't see why this is not explicit in the API, so that we can simply have one endpoint to call",
        "created_at": "2022-11-06T14:02:47.631000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I'll send you instructions in a little bit, I'm running my branch and getting some marshalling problems when we hit Capella, apparently you don't like how we marshall timestamp üôÇ but I think this is on my end that's why I'm not bugging yet",
        "created_at": "2022-11-06T14:04:01.184000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Another thing that really sucks is having to transform Gwei -\u003e Wei for FCU and then again Wei-\u003eGwei for getPayload, but the fcu  is unavoidable: either we do it or the EL does it üò¶",
        "created_at": "2022-11-06T15:42:53.753000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e I feel like the blockhash on this for genesis (and hence subsequent added new ): https://hackmd.io/PqZgMpnkSWCWv5joJoFymQ is not correct",
        "created_at": "2022-11-06T15:44:51.116000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "It should always be wei, gwei is an optimization of the cl",
        "created_at": "2022-11-06T15:45:12.664000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "this blockhash seems to be not including withdrawals root",
        "created_at": "2022-11-06T15:45:19.420000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah uou might be right",
        "created_at": "2022-11-06T15:45:51.669000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "(basically the genesis blockhash matches without withdrawals root , but not with it)",
        "created_at": "2022-11-06T15:45:55.252000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Why are you guys working on a sunday?",
        "created_at": "2022-11-06T15:46:05.942000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "also somehow my stateroot isn't matching with post withdrawal processing (deving this for ethereumjs)",
        "created_at": "2022-11-06T15:46:37.860000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "nothing better to do lol",
        "created_at": "2022-11-06T15:46:56.027000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "You get sundays off?!",
        "created_at": "2022-11-06T16:03:11.519000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yes after the merge for 4 weeks. It's in my contract",
        "created_at": "2022-11-06T16:04:38.187000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Can coredevs plz take a break",
        "created_at": "2022-11-06T16:27:20.809000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "During the week there's no time üôÇ",
        "created_at": "2022-11-06T17:14:46.558000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Although I swear a few years ago I thought that I would be spending time in things more interesting that trying to get the process of :\namount in Gwei (uint64) --\u003e write as bytes.  ---\u003e Pad to 32 bytes --\u003e reverse orders (who the hell uses Big endian???) --\u003e big.Int ---\u003e multiply by 10^9 ---\u003e get bytes again to encode as string. \n\nDo the inverse of that process above. \nI swear for the love of Satan that I cannot get this to be invertible, for all I know the arrow above is just as complicated as SHA3 and could be used in a hashing algo.",
        "created_at": "2022-11-06T17:18:57.271000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ohh big endianess might be the reason",
        "created_at": "2022-11-06T17:33:39.079000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "oh it always is",
        "created_at": "2022-11-06T17:34:01.769000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "üôÇ",
        "created_at": "2022-11-06T17:34:11.531000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "but why (big endian?",
        "created_at": "2022-11-06T17:34:22.769000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "just because people that like to specify things rejoice in the knowledge that someone will be up at 2:30am in the morning crying because the withdrawal amount is in the orders of 2^24",
        "created_at": "2022-11-06T17:35:57.914000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2022-11-06T17:44:33.543000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screen_Shot_2022-11-06_at_9.43.14_AM.png",
                "content": "c99e40245807ede94a741647debba6ae7ab0f09cec4550de6f7042e1dff71024"
            }
        ]
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "there's a slice missing for \"arguing about endians\" as well",
        "created_at": "2022-11-06T18:52:48.955000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "If by \"slice\" you mean \"most of the pie\", then I agree.",
        "created_at": "2022-11-06T18:57:48.717000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e \u003c@360491619402776577\u003e this one I'm not really sure if it's on prysm. I'm going into Capella fine now, and geth gives me the fork block with the right number of withdrawals:\n```\n[2022-11-06 16:00:31]  INFO validator: Submitted new block blockRoot=0x1b97e6500e52 fork=capella gasUtilized=0 graffiti= numAttestations=0 numDeposits=0 parentHash=0x8e69e479153c payloadHash=0xfb01a196c28c pubKey=0x8d92d91ccf25 slot=24 txCount=0 withdrawalCount=4\n```\nThis block is imported correctly, with 4 withdrawals. The head in Geth is advanced fine too:\n```\nINFO [11-06|16:00:31.739] Chain head was updated                   number=30 hash=fb01a1..0e8c83 root=9aa94a..8a7f63 elapsed=\"73.81¬µs\"\n```\nHowever, the very next block that geth gives me is not valid, the parent hash is one block old:\n```\n[2022-11-06 16:00:37] ERROR blocks: parent Hash 0xfb01a196c28c,  header Hash: 0x8e69e479153c\n```\nSince I can't see something immediately obvious in my node. I thought I'll tell you.",
        "created_at": "2022-11-06T19:22:30.313000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ahhh nevermind, I found my bug üôÇ (Edit: I hope)",
        "created_at": "2022-11-06T19:25:11.589000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e is this index being stored/validated in geth in state?",
        "created_at": "2022-11-06T19:59:21.970000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "ce3839ea8ef03546ad4cca394caa14f2bc6a5bea822868a9e12e1e3b2c4a4e8b"
            }
        ]
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "https://youtu.be/D3mEr3nLV9w",
        "created_at": "2022-11-06T20:12:16.531000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "üî•",
        "created_at": "2022-11-06T20:13:31.060000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "this one forks on timestamp?",
        "created_at": "2022-11-06T20:19:18.894000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah",
        "created_at": "2022-11-06T20:19:27.734000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "awesome, i can also try interop then",
        "created_at": "2022-11-06T20:19:43.878000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "how to specify in geth genesis?",
        "created_at": "2022-11-06T20:21:44.923000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ohh `ShanghaiTime`",
        "created_at": "2022-11-06T20:22:49.091000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Oh they changed it? I was using `shanhghaiBlock` i think. Now drinking a beer",
        "created_at": "2022-11-06T20:27:45.555000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "After almost 24 hours of dealing with stupid implementation details",
        "created_at": "2022-11-06T20:28:11.491000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "did you use any tool for CL genesis with non bls credentials?",
        "created_at": "2022-11-06T20:28:15.056000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "We have in our repo prysmctl, I just hacked the generator,",
        "created_at": "2022-11-06T20:28:53.782000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "üëç yea it would be easier for me to also hack out dev genesis",
        "created_at": "2022-11-06T20:29:22.227000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "It's one byte change in the right file, take a look at my branch `capella` in the prysm repo if you want to use that",
        "created_at": "2022-11-06T20:29:34.458000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "awesome thanks!",
        "created_at": "2022-11-06T20:29:52.047000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "We can start a devnet probably this week if there's interest. There's no need to test BLS to execution changes but we can check if we all track the same withdrawals",
        "created_at": "2022-11-06T20:31:03.168000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i am mostly in",
        "created_at": "2022-11-06T20:31:48.407000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "No this is stored in the beacon state",
        "created_at": "2022-11-06T20:34:12.245000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes, but my ethereumjs's poststate root is not matching with geth's even though all balances check out, so i was wondering whats going on",
        "created_at": "2022-11-06T20:35:08.221000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "(also if i start geth with all those balances set in genesis.json, i get the same stateroot as post withdrawal on ethereumjs with original genesis, so wondering whats going on)",
        "created_at": "2022-11-06T20:36:01.467000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e does the shanghaiTime stamp has to totally match with capella or can be it a bit earlier (and till then v1 versions will be called without withdrawal objects)",
        "created_at": "2022-11-06T20:43:03.800000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "it has to be exactly the same",
        "created_at": "2022-11-06T20:47:08.082000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ohh the problem is it would start expecting withdrawals in block",
        "created_at": "2022-11-06T20:47:26.243000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "the way you do it is you generate your genesis and compute at which slot will Capella happen, add that time to the timestamp in Shanghai",
        "created_at": "2022-11-06T20:47:33.269000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "right",
        "created_at": "2022-11-06T20:47:40.470000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I just checked that I am using `shanghaiBlock`",
        "created_at": "2022-11-06T20:47:45.645000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ok",
        "created_at": "2022-11-06T20:47:55.492000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I thought you should be able to use the V2 methods prior to capella but it would be required for the withdrawals list to be empty in that case. We probably should make it clear that this is allowed and exactly what to do if there are withdrawals provided in the spec (we may have, I don't have it open atm).",
        "created_at": "2022-11-06T21:58:01.046000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "That holds for geth, if that holds for every client then we can remove code in the future, but still have to do this in stages",
        "created_at": "2022-11-06T22:32:45.354000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I'm arguing the spec should require this behaviour thus it would hold for every client.  From my memory that's what we discussed in the workshop just prior to devcon though I may be misremembering.",
        "created_at": "2022-11-06T22:40:09.306000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "It most probably does and I haven't read it üôÇ",
        "created_at": "2022-11-06T22:51:11.149000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "but its a time value",
        "created_at": "2022-11-06T23:25:31.913000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah",
        "created_at": "2022-11-06T23:25:45.626000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "But it's the way it is now",
        "created_at": "2022-11-06T23:25:53.244000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "It's a timestamp. I realize I left instructions for the interop in an internal notion, perhaps w should open to a hackmd, but I'm dead tired",
        "created_at": "2022-11-06T23:26:59.549000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "isn't it in a gist ?",
        "created_at": "2022-11-06T23:27:38.189000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "I'll do it tonight, it's easy",
        "created_at": "2022-11-06T23:38:54.757000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Oh yeah that's with my home personal paths",
        "created_at": "2022-11-06T23:38:55.991000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Hackmd is better",
        "created_at": "2022-11-06T23:39:04.590000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The notion one has all there is",
        "created_at": "2022-11-06T23:39:23.560000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cterencechain\u003e Yeah I'll just fix the typo there and also the hackmd",
        "created_at": "2022-11-06T23:39:48.939000+00:00",
        "attachments": null
    }
]