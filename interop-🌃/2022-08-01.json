[
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I've made an issue for this: https://github.com/sigp/lighthouse/issues/3394 Thanks for pointing it out.",
        "created_at": "2022-08-01T00:22:24.598000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Thanks for this. I'll quote yourself saying that forkchoice has become a full time job lately. I wonder if we'll remember to remove all the clutter like `SAFE_SLOTS_TO_SYNC_OPTIMISTICALLY` after the merge and ws. And this particular issue after PBS.",
        "created_at": "2022-08-01T00:27:33.750000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "hey \u003c@206016661470314496\u003e  , pinging you as marius mentioned he was on vacation.  \n\nSo we are updating our internal testing infrastructure to geth's version of `v1.10.21`. However our end-to-end tests are all failing now. After investigating it, we found out prysm was failing proposals for the merge transition block.\n\n\u003e     helpers.go:199: time=\"2022-07-31 14:09:46\" level=error msg=\"Failed to propose block\" error=\"rpc error: code = Unknown desc = could not process beacon block: could not process block: could not validate new payload: block is not suitable for optimistic sync\" prefix=validator pubKey=0xaecc56f2b1c4\n\nThis was an odd error, as it meant geth was returning SYNCING for the merge transition block. After digging through geth logs i found this for the first newPayload call to it. \n\n\u003e WARN [07-31|13:27:18.588] Ignoring payload with missing parent     number=309 hash=305bd8..9202ce parent=6a5aa7..7e56d0\n\u003e DEBUG[07-31|13:27:18.588] Served engine_newPayloadV1               conn=127.0.0.1:49558 reqid=1499 duration=\"733.661Âµs\"\n\nThis was an odd failure as the geth node has the parent `parent=6a5aa7..7e56d0` as its head.  Attached are the geth logs for the node that was running.",
        "created_at": "2022-08-01T07:31:50.768000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2022-08-01T07:32:08.918000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "eth1_miner.log",
                "content": "d3dbba6461cb5a58232513f7f6c9cff6d39dfcae9b315044ef3425e435691e26"
            }
        ]
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "If you go-up to the first newPayload call, you will see the failure in geth.",
        "created_at": "2022-08-01T07:32:36.198000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "This might be relevant to you \u003c@476250636548308992\u003e: https://github.com/sigp/lighthouse/pull/3382#issuecomment-1197680345\n\nTL;DR try adding `--syncmode=full` to Geth. It worked for us.",
        "created_at": "2022-08-01T07:33:59.032000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "Ty, in this case though geth already has that flag enabled and both Prysm and geth are fully synced. This seems like an issue with processing the merge transition block. I am trying to run with `v1.10.20` , to see if I still run into this issue",
        "created_at": "2022-08-01T07:36:07.350000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "`v1.10.20` seems to work fine in our test setup, seems like something changed in `v1.10.21`",
        "created_at": "2022-08-01T08:30:27.986000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "could it be this? https://github.com/ethereum/go-ethereum/pull/25210",
        "created_at": "2022-08-01T11:41:08.411000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "Unlikely, these geth nodes are running via full sync and are already fully synced.",
        "created_at": "2022-08-01T11:50:02.388000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I know but it's the only commit I could see in that release that moved away that error message you're receiving",
        "created_at": "2022-08-01T11:56:05.178000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "goerli-shadow-fork-6 configs are now out: https://github.com/eth-clients/merge-testnets/tree/main/goerli-shadow-fork-6\n\nThe beaconchain launches on wednesday and TTD is supposed to be hit on thursday (an hour or two before ACD). I've used the versions the EF blogpost recommends for Goerli (unless there are newer versions - nethermind and lighthouse have a newer release). If I need to update something or use a different version for testing, do let me know.\n\nhttps://ethstats.goerlishadowfork6.ethdevops.io/\nhttps://beaconchain.goerlishadowfork6.ethdevops.io/\nhttps://explorer.goerlishadowfork6.ethdevops.io/\nhttps://forkmon.goerlishadowfork6.ethdevops.io/",
        "created_at": "2022-08-01T13:33:12.318000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "Nice work! Will some % of the network use mev boost relay to produce blocks?",
        "created_at": "2022-08-01T13:42:42.091000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I'm waiting on the relayers to be up, but the idea is to use mev boost on 25% of the network (Evenly distributed between prysm, lodestar, teku). Afaik lighthouse \u0026 nimbus' mev boost PRs are still unmerged (?)",
        "created_at": "2022-08-01T13:46:42.419000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I see value in running this SF with client versions that are recommended by the blogpost (unless we assume users will upgrade their nodes to the latest available versions instead of versions referenced in the post)",
        "created_at": "2022-08-01T13:55:57.903000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "This is interesting edge case. Post merge builders can't induce DA issues because a builder have to produce a payload on top of the parent payload, otherwise, a block won't be accepted by CL (the payload parent_hash check). But if a node is syncing and is requesting a payload on top of a block that is far behind the head then malicious builder can exploit this to create a block for current slot with parent payload \u003e 128 blocks behind the head and force ELs that have already pruned the state at this height to import such a block.",
        "created_at": "2022-08-01T14:52:46.409000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "lighthouse  just merged in the relevant PRs in v2.5.0 FYI",
        "created_at": "2022-08-01T15:01:32.001000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "oo thanks!",
        "created_at": "2022-08-01T15:37:23.870000+00:00",
        "attachments": null
    }
]