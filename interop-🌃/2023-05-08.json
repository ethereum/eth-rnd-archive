[
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e @otherlighthousepeeps, I'm having an issue where lighthouse-geth (our rpc endpoint) fails to gossip blobtxs to the rest of the network. The node itself runs no validators, thus it now has 105 pending tx on devnet-5. Should the gossip work already with LH ?",
        "created_at": "2023-05-08T07:16:52.053000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I haven't been working on Deneb yet, but I'll summon those who have",
        "created_at": "2023-05-08T07:18:38.994000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "You had a little green tag next to your name üòÑ",
        "created_at": "2023-05-08T07:19:08.788000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "thats more like en EL side issue, not sure if ELs have implemented blob tx broadcasting",
        "created_at": "2023-05-08T07:20:43.828000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@403636673914863626\u003e I remember ethereumjs broadcasting blob tx ids to peers and then allowing them to download",
        "created_at": "2023-05-08T07:21:31.313000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "(or downloading from peers)",
        "created_at": "2023-05-08T07:21:56.830000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "nethermind block proposals are also lacking.",
        "created_at": "2023-05-08T07:23:34.472000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "with all CL pairs",
        "created_at": "2023-05-08T07:23:48.504000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Would the gossiped blobs show up in the `txpool` or `txpool_status` related RPC calls? Or is there a new RPC call to dump pending blobs?",
        "created_at": "2023-05-08T07:24:35.475000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Depending on the version of geth they show up on txpool.status",
        "created_at": "2023-05-08T07:26:28.133000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "gossiped blobs of CL side would already be in the block, i think we are talking about pending blobs in a particular EL node which haven't yet been minted in a block",
        "created_at": "2023-05-08T07:26:59.422000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "(mdehoog's branch should show up)",
        "created_at": "2023-05-08T07:27:03.717000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "afaik EL side APIs aren't standardized right? Would all clients be adding a similar pending blob call? That would probably make debugging tons easier in the future",
        "created_at": "2023-05-08T07:28:35.340000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "I think the mechanism on EL side is, broadcast blob tx hash and then peer pulls the tx using the old mechanisms",
        "created_at": "2023-05-08T07:29:31.703000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "let me check in ethereumjs code",
        "created_at": "2023-05-08T07:29:42.361000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "eth/68, but have all clients implemented that already?",
        "created_at": "2023-05-08T07:30:17.520000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i think ethereumjs implemented it afaik",
        "created_at": "2023-05-08T07:30:47.434000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "mdehoog/geth still broadcasts the blob transactions afaict, so they should arrive even if you have not implemented eth/68",
        "created_at": "2023-05-08T07:34:14.355000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@898563924440543283\u003e",
        "created_at": "2023-05-08T07:34:40.498000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "we send  `NewPooledTransactionHashes` messages to peers on every `sendRawTransaction` call",
        "created_at": "2023-05-08T07:34:46.704000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "This would probably be the place to add a check that we're not distributing blob transactions: https://github.com/mdehoog/go-ethereum/blob/ac64c4400e35cf8c7e2d02f99e257534096d2ec9/eth/protocols/eth/broadcast.go#L83 \u003c@898563924440543283\u003e",
        "created_at": "2023-05-08T07:36:21.283000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Don't know if it makes sense to add that now, since the new blob txpool will have a different mechanism anyway",
        "created_at": "2023-05-08T07:36:55.865000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ethereumjs seems to be handling `Transactions` so should ideally get the txs or download from hashes, \u003c@412614104222531604\u003e i think its also worth checking if EL nodes are peered properly",
        "created_at": "2023-05-08T07:37:36.720000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e Are you sure the txs are not getting distributed correctly, or could it be that the transactions are actually invalid and thus are not included in a block?",
        "created_at": "2023-05-08T07:39:16.880000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "https://ethstats.4844-devnet-5.ethpandaops.io/\n\nYea looks like they're not peered too optimally, esp if different clients have different blob gossip concepts implimented",
        "created_at": "2023-05-08T07:39:20.718000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Could round robin submit a new blob to each node and see which one's make it on chain.",
        "created_at": "2023-05-08T07:40:03.951000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah peering is always a struggle.",
        "created_at": "2023-05-08T07:40:15.805000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Or just set up a new node and see if they get the transactions",
        "created_at": "2023-05-08T07:40:28.900000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I am in the process of doing that",
        "created_at": "2023-05-08T07:40:37.139000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "when you talk gossip its on EL side or CL side ?",
        "created_at": "2023-05-08T07:40:52.915000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "but then you'd just know that one node is peered well or badly right?",
        "created_at": "2023-05-08T07:40:58.337000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ethstats just shows the EL side of things üòÑ\nso i meant EL gossip",
        "created_at": "2023-05-08T07:41:10.733000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ahh ok thanks, i was getting confused",
        "created_at": "2023-05-08T07:41:24.309000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "You see if transactions have the ability to travel around the network or if they are not passed at all",
        "created_at": "2023-05-08T07:41:54.636000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "nvm, the rpc endpoint is actually geth/prysm pair, that is not monitored by forkmon/ethstats",
        "created_at": "2023-05-08T07:45:02.941000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Will add the node to ethstats in a few mins",
        "created_at": "2023-05-08T07:45:10.993000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Trying to sync up a new lh node I get the following output: \n```\nMay 08 07:46:15.622 DEBG Connection established                  connection: Dialer, peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: libp2p\nMay 08 07:46:15.622 DEBG Sending Status Request                  fork_digest: [79, 101, 45, 11], finalized_epoch: 0, finalized_root: 0x0000‚Ä¶0000, head_slot: 0, head_root: 0x66c7‚Ä¶6f7b, peer: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: router\nMay 08 07:46:15.706 DEBG Obtained peer's metadata                new_seq_no: 0, peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: libp2p\nMay 08 07:46:15.793 DEBG Received Status Response                fork_digest: [61, 8, 154, 17], finalized_epoch: 2677, finalized_root: 0xa54d‚Ä¶5902, head_slot: 85728, head_root: 0x333c‚Ä¶5fcd, peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: router\nMay 08 07:46:15.793 DEBG Handshake Failure                       reason: Incompatible forks Ours:4f652d0b Theirs:3d089a11, peer: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx\nMay 08 07:46:15.793 DEBG Sending goodbye to peer                 score: 0.00, reason: Irrelevant Network, peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: libp2p\nMay 08 07:46:15.793 DEBG Peer has been banned                    score: -100.00, peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: libp2p\nMay 08 07:46:15.793 DEBG Peer Manager disconnecting peer         reason: Irrelevant Network, peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: libp2p\nMay 08 07:46:15.815 DEBG Ignoring rpc message of disconnecting peer, peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, msg_kind: outbound_err, protocol: goodbye, service: libp2p\nMay 08 07:46:15.815 DEBG Peer disconnected                       peer_id: 16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx, service: libp2p\n```",
        "created_at": "2023-05-08T07:48:24.764000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Can the CL not sync from a node that is on a further fork?",
        "created_at": "2023-05-08T07:50:14.090000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "use lodestar üòÜ",
        "created_at": "2023-05-08T07:51:04.661000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Do you have a guide for that?",
        "created_at": "2023-05-08T07:51:53.251000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "that peer was on an irrelevant network (atleast what the logs say), what bootnode are you using?",
        "created_at": "2023-05-08T07:52:06.943000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I used both the first and last enr in this list: https://config.4844-devnet-5.ethpandaops.io/enr.txt",
        "created_at": "2023-05-08T07:53:03.753000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "refreshing the list now",
        "created_at": "2023-05-08T07:53:19.271000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "may have been outdated.",
        "created_at": "2023-05-08T07:53:24.163000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "lool, first bootnode on the nw is Lodestar \u003c@792822129019584562\u003e üòù",
        "created_at": "2023-05-08T07:53:40.727000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "shouldn't have been all outdated",
        "created_at": "2023-05-08T07:53:41.162000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "```\nArgs\": [\n            \"./packages/cli/bin/lodestar\",\n            \"beacon\",\n            \"--dataDir=/data\",\n            \"--discv5\",\n            \"--listenAddress=0.0.0.0\",\n            \"--port=9000\",\n            \"--enr.ip=104.248.93.148\",\n            \"--enr.tcp=9000\",\n            \"--enr.udp=9000\",\n            \"--rest\",\n            \"--rest.address=0.0.0.0\",\n            \"--rest.port=5052\",\n            \"--jwt-secret=/execution-auth.jwt\",\n            \"--execution.urls=http://geth:8551\",\n            \"--metrics\",\n            \"--metrics.address=0.0.0.0\",\n            \"--metrics.port=5054\",\n            \"--paramsFile=/network-config/config.yaml\",\n            \"--genesisStateFile=/network-config/genesis.ssz\",\n            \"--bootnodes=enr:-Iq4QDaIjg-Io_OamJKGZEGPE8smXZwH3gBgo-gk6zmUhu7zTBvYQeY8kqT19ShPxH8NhnqvEghDT2AK5O1fONZoRl-GAYe88F5ngmlkgnY0gmlwhIbRx2aJc2VjcDI1NmsxoQPZLBX2rEiQ20AfN2f1SQLfnGMQd_t7Rq0-HNkYA9d4uoN1ZHCCIyk,enr:-MS4QDPpPzkDJ65iCq9dthJZ5p49OljTrtbHN_D3f97T-BKjNMdd2MQi4Vu7N--dmotiLZDgiw8BnrdDxkd_ICgvneIHh2F0dG5ldHOIAAAAAAAAAACEZXRoMpCzMmyVQEhEBQEAAAAAAAAAgmlkgnY0gmlwhIbRx2aJc2VjcDI1NmsxoQJoQoV-vbiuItOSCsczcQ9vvL_IoaNaslVeqUpnyxP0jYhzeW5jbmV0c4gAAAAAAAAAAIN0Y3CCIyiDdWRwgiMo\",\n            \"--network.connectToDiscv5Bootnodes\",\n            \"--nat=true\"\n        ],\n        \"State\": {\n\n```",
        "created_at": "2023-05-08T07:53:51.024000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "args from deployed lodestar\u003c\u003egeth of devnet5 (so just space separate them)",
        "created_at": "2023-05-08T07:53:59.524000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "the first ENR is valid for sure, just cross-checked via the API",
        "created_at": "2023-05-08T07:54:38.998000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "and the peer ID (`16Uiu2HAm2SfDH4t29TyUMwUzxGwqSfm2mvpXywwZ3tsb5EbyXCrx`) matches what one sees in marius's logs",
        "created_at": "2023-05-08T07:54:56.803000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "so lighthouse is banning that lodestar node for being on an irrelevant nw, which it shouldnt do",
        "created_at": "2023-05-08T07:55:13.709000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I'm on LH version: Lighthouse v4.1.0-b2ccc82 \nWhich is \n```\ncommit b2ccc822d8183068b6d2feee7fe81441841fbf80 (HEAD -\u003e eip4844, origin/eip4844)\nAuthor: Pawan Dhananjay \u003cpawandhananjay@gmail.com\u003e\nDate:   Fri Apr 21 14:14:57 2023 -0700\n\n    Fix compiler issues\n\n```",
        "created_at": "2023-05-08T07:55:58.849000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "maybe the wrong branch?",
        "created_at": "2023-05-08T07:56:32.981000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "probably wrong branch, we're on `ethpandaops/lighthouse:realbigsean-devnetv5-fa9c263`",
        "created_at": "2023-05-08T07:56:48.714000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah just saw, okay will switch, sorry for the noise",
        "created_at": "2023-05-08T07:57:38.648000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "this branch üòÑ\nhttps://github.com/realbigsean/lighthouse/tree/devnetv5",
        "created_at": "2023-05-08T07:57:42.020000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "The rpc endpoint processed a faucet request without much issues.",
        "created_at": "2023-05-08T07:58:47.941000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "included the rpc endpoint now in forkmon/ethstats too",
        "created_at": "2023-05-08T07:58:57.315000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "txpool content of the rpc endpoint:",
        "created_at": "2023-05-08T08:03:05.943000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "8e9ef774741acf9740b65acb99f8554ae7ef8eae80ac846b05460ae4e9ae52aa"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Okay syncing",
        "created_at": "2023-05-08T08:03:06.224000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Testing",
        "parent": "",
        "content": "Could you run the fuzzer again?",
        "created_at": "2023-05-08T11:27:36.765000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yep, just send a handcrafted tx",
        "created_at": "2023-05-08T11:28:21.357000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "It's not being mined",
        "created_at": "2023-05-08T11:28:41.070000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "proposals are infrequent now üò¶",
        "created_at": "2023-05-08T12:31:32.024000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we have issues with multiple ELs proposing blocks",
        "created_at": "2023-05-08T12:31:43.637000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I think its a gossiped issue",
        "created_at": "2023-05-08T12:43:43.469000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "rpc doesn't seem to gossip the blob txs to other nodes.",
        "created_at": "2023-05-08T12:43:53.510000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Bit of a heads up for anyone planning to participate/test anything on devnet-5 in the next couple of weeks. \u003c@199561711278227457\u003e and I are going on holiday for 2 weeks starting from Tuesday/Wednesday this week. Most stuff will be taken over by \u003c@131476523050860545\u003e for those couple weeks, so if you need help with getting something working, feel free to ping him.",
        "created_at": "2023-05-08T12:49:45.353000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "We seem to have had a fork at 62717 - 62719 all erigon nodes forked off to their own chain https://forkmon.4844-devnet-5.ethpandaops.io",
        "created_at": "2023-05-08T13:14:17.854000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm that might have been me",
        "created_at": "2023-05-08T13:19:40.181000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2023-05-08T13:20:11.883000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "4d57521e17a6b5dcdf9a9977e6955a6d86243b321f34d3456f2d1bed083176a4"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Transaction three is my handcrafted one",
        "created_at": "2023-05-08T13:20:22.540000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "and it does the following:\n```\n\n    // PUSH0, DATAHASH, PUSH0, DATAHASH, SSTORE\n    exec([]byte{0x5f, 0x49, 0x5f, 0x49, 0x55})\n```",
        "created_at": "2023-05-08T13:20:40.904000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "(with a random blob)",
        "created_at": "2023-05-08T13:21:02.567000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah erigon still can't get back to head",
        "created_at": "2023-05-08T13:24:34.160000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```[INFO] [05-08|13:10:40.025] [1/5 MiningCreateBlock] Start mine       block=62719 baseFee=7 gasLimit=30000000\n[INFO] [05-08|13:10:40.055] Built block                              hash=0x3862be4921d3ec82be7a9720d35154da3bb701b590e3924ca2db8cc0347b11d6 height=62719 txs=0 gas used %=0.000 time=44.316931ms\n[INFO] [05-08|13:10:48.095] Received GetPayloadV3                    payloadId=163\n[INFO] [05-08|13:10:48.146] [2/15 Headers] Handling new payload      height=62719 hash=0x3862be4921d3ec82be7a9720d35154da3bb701b590e3924ca2db8cc0347b11d6\n[INFO] [05-08|13:10:48.160] [2/15 Headers] DONE                      in=1m59.932070218s\n[INFO] [05-08|13:10:48.163] [2/15 Headers] Waiting for Consensus Layer...\n[INFO] [05-08|13:10:48.168] [2/15 Headers] Fork choice update: flushing in-memory state (built by previous newPayload)```",
        "created_at": "2023-05-08T13:25:48.850000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "```[WARN] [05-08|13:07:00.544] Could not validate block                 err=\"[5/7 Execution] mismatched receipt headers for block 62717 (0x239fa451f462fec2e4f77bad18f6016b013409dd3f88be821de250d32b5aab99 != 0xe0dabb4958b38ae35ea6a86dfb216bc4f0b57add10675f50d43cabbd1b893265)\"\n```",
        "created_at": "2023-05-08T13:27:20.192000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e you think that means the datahash precompile is computing the wrong value?",
        "created_at": "2023-05-08T13:32:26.088000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "not entirely sure where to start looking üôÇ",
        "created_at": "2023-05-08T13:33:03.080000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I'm not even triggering the datahash precompile, only the opcode. I think the easiest is to `debug.standardtracebadblocktofile`  on a node that rejected the canonical block",
        "created_at": "2023-05-08T13:34:39.169000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n\u003e debug.standardTraceBlockToFile(\"0x8479de330419e8acc597cda0fb467dcd1fdd4fb0f20f54970328df8c328a1f37\", {\"reexec\":100000})\nINFO [05-08|15:36:12.648] Wrote standard trace                     file=/tmp/block_0x8479de33-0-0xc1953f69-1298618860\nWARN [05-08|15:36:12.648] Served debug_standardTraceBlockToFile    reqid=35 duration=\"341.309¬µs\" err=\"data gas limit reached\"\nError: data gas limit reached\n    at web3.js:6365:9(39)\n    at send (web3.js:5099:62(29))\n    at \u003ceval\u003e:1:31(6)\n```\nUpps looks like the tracing is broken as well",
        "created_at": "2023-05-08T13:36:53.769000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "that error is from geth I assume?  I wonder if we forgot to load up datagas in tracing.",
        "created_at": "2023-05-08T13:42:36.695000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "Erigon doesn't seem to support that RPC at least as we configured it?  I get method does not exist/is not available.",
        "created_at": "2023-05-08T13:43:09.578000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "It might not be enabled.",
        "created_at": "2023-05-08T13:43:18.905000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "`http.api=eth,erigon,engine,web3,net,debug,trace,txpool,admin`",
        "created_at": "2023-05-08T13:43:30.882000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "these are enabled",
        "created_at": "2023-05-08T13:43:37.501000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "In geth you can only really use that api via console I think",
        "created_at": "2023-05-08T13:46:44.082000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "I don't see DataGasLimit being set in TransactionToMessage but its being used to set the datagas limit.",
        "created_at": "2023-05-08T13:46:46.927000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "not even sure why DataGasLimit is a part of the \"Message\" struct.",
        "created_at": "2023-05-08T13:47:16.991000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "(in Geth -- so this is the tracer issue I think)",
        "created_at": "2023-05-08T13:48:12.527000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "62764 has another fork. geth-prysm and lodestar-ethereumjs",
        "created_at": "2023-05-08T13:48:18.085000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "geth-prysm is the rpc port",
        "created_at": "2023-05-08T13:49:04.707000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Are you using a local node to submit tx \u003c@360491619402776577\u003e",
        "created_at": "2023-05-08T13:49:24.284000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2023-05-08T13:49:29.017000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "can I track that node also with forkmon?",
        "created_at": "2023-05-08T13:49:39.005000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "There are no tx in the canonical chain for that block afaict",
        "created_at": "2023-05-08T13:50:25.145000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "fix for geth: https://github.com/mdehoog/go-ethereum/pull/127",
        "created_at": "2023-05-08T13:52:53.652000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "building img",
        "created_at": "2023-05-08T13:54:02.887000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "that's just a tracer fix so if Marius is running locally he can patch it in to his client don't think it needs to be rolled out everywhere.",
        "created_at": "2023-05-08T13:54:58.563000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I can also patch one of the nodes",
        "created_at": "2023-05-08T13:56:03.181000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "I'm unfortunately going to have iffy availability today so may not be able to debug the erigon issue right away.",
        "created_at": "2023-05-08T13:56:10.946000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2023-05-08T14:00:34.727000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "04ce6c479821d3da7f4f721589182441379c3aac9b868734015acb4667424ab4"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Both are from me",
        "created_at": "2023-05-08T14:00:46.567000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "and doing exactly the datahash opcode thingy",
        "created_at": "2023-05-08T14:00:58.521000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The transaction:\n```\n eth.getTransaction(\"0x8e3b43edd589a7188dca9e7f151a8f4acba18dcf24e930809b32b6f763d01e74\")\n\n{\n  accessList: [],\n  blobVersionedHashes: [\"0x01d343d3cd62abd9c5754cbe5128c25ea90786a8ae75fb79c8cf95f4dcdd08ec\"],\n  blockHash: \"0x8479de330419e8acc597cda0fb467dcd1fdd4fb0f20f54970328df8c328a1f37\",\n  blockNumber: 62717,\n  chainId: \"0x120b996ed\",\n  from: \"0xb02a2eda1b317fbd16760128836b0ac59b560e9d\",\n  gas: 500000,\n  gasPrice: 2000000007,\n  hash: \"0x8e3b43edd589a7188dca9e7f151a8f4acba18dcf24e930809b32b6f763d01e74\",\n  input: \"0x5f495f4955\",\n  maxFeePerDataGas: \"0xb2d05e15\",\n  maxFeePerGas: 3000000021,\n  maxPriorityFeePerGas: 2000000000,\n  nonce: 240,\n  r: \"0x14103732b5a9789bbf5ea859ed904155398abbef343f8fd63007efb70795d382\",\n  s: \"0x7272e847382789a092eadf08e2b9002e727376f8466fff0e4d4639fd60a528f2\",\n  to: null,\n  transactionIndex: 1,\n  type: \"0x3\",\n  v: \"0x0\",\n  value: 1\n}\n```",
        "created_at": "2023-05-08T14:04:07.165000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ohhh could it be the leading zero?",
        "created_at": "2023-05-08T14:04:28.568000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm that might just be an artifact of the tracer though",
        "created_at": "2023-05-08T14:05:16.939000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "is the issue that both txs should end up with equivalent elements on the stack?",
        "created_at": "2023-05-08T14:09:07.823000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No thats fine, both transactions have the exact same datahashes",
        "created_at": "2023-05-08T14:12:23.905000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Is someone from \u003c@\u0026688101493978562687\u003e here?",
        "created_at": "2023-05-08T14:13:09.147000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@814151075601973278\u003e is from erigon",
        "created_at": "2023-05-08T14:14:55.713000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "I've done the 4844 work though.",
        "created_at": "2023-05-08T14:15:07.976000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm but they maybe know how to get a trace out of erigon",
        "created_at": "2023-05-08T14:15:29.598000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "yup got it, I can ping them on our 4844 erigon telegram channel.",
        "created_at": "2023-05-08T14:15:52.711000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "would regular \"trace_block\" work? I guess we can't do it on the bad block.",
        "created_at": "2023-05-08T14:24:21.011000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "(that was their suggestion)",
        "created_at": "2023-05-08T14:24:27.874000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2023-05-08T14:24:34.614000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e how can I connect to lighthouse-geth-1",
        "created_at": "2023-05-08T14:25:51.728000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "(it has a bad block that I would like to look at)",
        "created_at": "2023-05-08T14:26:08.363000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "`ssh devops@lighthouse-geth-1.srv.4844-devnet-5.ethpandaops.io`",
        "created_at": "2023-05-08T14:26:21.314000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n/ $ geth attach data/geth.ipc\nFatal: Failed to start the JavaScript console: mkdir /.ethereum: permission denied\n```",
        "created_at": "2023-05-08T14:29:10.247000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "checking one sec",
        "created_at": "2023-05-08T14:29:46.918000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "bah I can't get erigon's call tracing methods to return anything but empty/null. Have to run, will resume investigating later.",
        "created_at": "2023-05-08T14:33:27.054000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yea mention `--datadir`",
        "created_at": "2023-05-08T14:37:54.224000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "we've a new ansible setup that asserts permissions properly üòõ",
        "created_at": "2023-05-08T14:38:07.603000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "lul",
        "created_at": "2023-05-08T14:38:30.858000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "`geth attach --datadir=/data data/geth.ipc` should work",
        "created_at": "2023-05-08T14:38:33.468000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "workls thx",
        "created_at": "2023-05-08T14:38:36.716000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yeah, apparently yolo-ing permissions on testnet machines isn't something people want üò¶",
        "created_at": "2023-05-08T14:38:59.587000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e can you dump a list of commands you used when you are done? we wanted to add stuff to the knowledgebase",
        "created_at": "2023-05-08T14:40:46.646000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "But how else can I make sure that I don't get fired",
        "created_at": "2023-05-08T14:42:33.919000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ahh that's why tx-fuzz doesn't have blob support yet üòà",
        "created_at": "2023-05-08T14:43:18.944000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\n\u003e debug.standardTraceBadBlockToFile(\"0xe358ac1520d8cc8538c08cf3909c3aabbba1705c0917772dc30dfdd0576ff744\", {\"reexec\":1000000})\nError: nonce too high: address 0x80C4C7125967139AcAa931Ee984A9Db4100e0F3B, tx: 308 state: 307\n    at web3.js:6365:9(39)\n    at send (web3.js:5099:62(29))\n    at \u003ceval\u003e:1:34(6)\n\n\u003e debug.standardTraceBadBlockToFile(\"0xf775c72fa70492cc54fbb2f8ffa0de82d830198d864184809dffac9b68b1f3b7\", {\"reexec\":1000000})\nError: nonce too high: address 0x80C4C7125967139AcAa931Ee984A9Db4100e0F3B, tx: 99 state: 98\n    at web3.js:6365:9(39)\n    at send (web3.js:5099:62(29))\n    at \u003ceval\u003e:1:34(6)\n\n```\nThis happens if I try to trace the bad blocks",
        "created_at": "2023-05-08T14:45:08.913000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Do you know who this 0x80 address is?",
        "created_at": "2023-05-08T14:45:36.216000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I spun up tx-fuzz on lighthouse-geth-1 and it has the sender address `0x8e4fc0f136BA56A151FD1530D4D6695df6A0fB4A`, could it be something it deployed?",
        "created_at": "2023-05-08T14:47:12.325000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "hmm maybe, but tx 308 means it done a lot of txs",
        "created_at": "2023-05-08T14:47:38.229000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "maybe the faucet?",
        "created_at": "2023-05-08T14:47:44.251000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Faucet is pointing at our k8s cluster (geth/prysm) node",
        "created_at": "2023-05-08T14:48:03.233000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "rpc-geth-prysm on forkmon",
        "created_at": "2023-05-08T14:48:14.136000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "rpc-geth-prysm on ethstats",
        "created_at": "2023-05-08T14:48:25.121000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "what is the faucet sender address?",
        "created_at": "2023-05-08T14:48:33.466000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "faucet sender address: `0xd5038998033689130e623E51478500a1015dd4Cc`",
        "created_at": "2023-05-08T14:49:18.180000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "https://faucet-2.4844-devnet-5.ethpandaops.io/ serves from `0xDb2C86AC51Ab6b77b7F618E570e3681cbA6bB505`",
        "created_at": "2023-05-08T14:49:28.597000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "```\neth.getTransactionCount(\"0x80C4C7125967139AcAa931Ee984A9Db4100e0F3B\")\n347\n```\nIt has to be someone here",
        "created_at": "2023-05-08T14:53:07.180000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "is it possible that someone is hammering the rpc with that address?",
        "created_at": "2023-05-08T14:53:56.790000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ah it can't",
        "created_at": "2023-05-08T14:54:26.933000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its all authenticated rpc now",
        "created_at": "2023-05-08T14:54:30.581000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "its gotta be from tx-fuzz \u003c@360491619402776577\u003e \n\nI saw this in the logs from lighthouse-geth-1:\n```\nINFO [05-08|14:55:00.718] Submitted contract creation              hash=0x0a23e433f8c37c735eddff6630993485576b1132d00cfd05181f32e72a3cdfb5 from=0x80C4C7125967139AcAa931Ee984A9Db4100e0F3B nonce=397 contract=0xb29216c598Bee9332AaF69Fbc25FF4d64cd168a0 value=0\n```\nand the only one submitting contracts on that node is the tx-fuzz instance",
        "created_at": "2023-05-08T14:55:59.646000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I used `wagyu` to derive the address, used the path `\"m/44'/60'/0'/0/1\"`, which leads to the address `0x8e4fc0f136BA56A151FD1530D4D6695df6A0fB4A` and the relevant privkey was passed to tx-fuzz, but seems like tx-fuzz came to a different conclusion about the from address? \n\ncuz it also has this `from` address:\n```\nINFO [05-08|14:55:00.719] Submitted contract creation              hash=0xbef04292bb8933958cdff1dbbf8e153b324adf6d6cdf02cecfc1635b3f9059e0 from=0x1cB96C5809dA5977f99f69c11eE58BaE5711c5f1 nonce=397 contract=0xC19808c72fF58351d9d01feFa61472FC4310593D value=0\n```",
        "created_at": "2023-05-08T14:57:27.527000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "tx-fuzz will generate 100 addresses to send transactions from",
        "created_at": "2023-05-08T14:58:02.728000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ahhh",
        "created_at": "2023-05-08T14:58:06.559000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "then it makes sense",
        "created_at": "2023-05-08T14:58:11.139000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Those are the 0x80 transactions in the bad block",
        "created_at": "2023-05-08T14:59:47.260000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "775dbecdf9c2ee2d748dca15f71000712e41a675a5152035d739c893c26897cb"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Looks like the transactions are out of order? Maybe just an rpc issue",
        "created_at": "2023-05-08T15:01:48.916000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "maybe the fuzzer submitted the two tx too fast in order, and one with the higher nonce got deilvered to the local rpc endpoint earlier than the one with lower nonce",
        "created_at": "2023-05-08T15:03:11.259000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "But the block producer orders the transactions",
        "created_at": "2023-05-08T15:03:58.096000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "regardless on in which order they arrive",
        "created_at": "2023-05-08T15:04:08.509000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Geth has no active validators",
        "created_at": "2023-05-08T15:04:27.404000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "so it will need to be first gossiped",
        "created_at": "2023-05-08T15:04:35.882000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yep block proposer of 0xe358ac1520d8cc8538c08cf3909c3aabbba1705c0917772dc30dfdd0576ff744 is buggy",
        "created_at": "2023-05-08T15:04:50.120000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "and its possible that gossip is somewhat broken for certain nodes.",
        "created_at": "2023-05-08T15:04:53.268000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "This is a really bad consensus issue",
        "created_at": "2023-05-08T15:05:12.099000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No amount of screwy gossip should be causing this",
        "created_at": "2023-05-08T15:05:28.334000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Miner is 0xf97e180c050e5ab072211ad2c213eb5aee4df134",
        "created_at": "2023-05-08T15:05:48.342000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Do you know which node produced that block?",
        "created_at": "2023-05-08T15:05:58.671000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Timestamp: 0x645357a8",
        "created_at": "2023-05-08T15:06:12.686000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@792822129019584562\u003e",
        "created_at": "2023-05-08T15:06:41.596000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "is the the bls pubkey?",
        "created_at": "2023-05-08T15:06:46.382000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No this is the hash of the block",
        "created_at": "2023-05-08T15:06:58.131000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "do you know who proposed that block?",
        "created_at": "2023-05-08T15:07:13.800000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Easiest to find the producer by timestamp/slot I think",
        "created_at": "2023-05-08T15:07:14.239000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "No",
        "created_at": "2023-05-08T15:07:18.393000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "epoch 1683183528 was 4d ago",
        "created_at": "2023-05-08T15:07:49.114000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "lemme try and find the block proposer, we should be able to get it working back from the block number",
        "created_at": "2023-05-08T15:09:02.166000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Second one was at 0x645353c4",
        "created_at": "2023-05-08T15:09:15.855000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Number: 0xbdb3",
        "created_at": "2023-05-08T15:09:53.105000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "why is the getBlockByHash erroring out with `curl: (35) error:1408F10B:SSL routines:ssl3_get_record:wrong version number`?",
        "created_at": "2023-05-08T15:11:20.515000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Genesis: 1682503200\nFirst bad slot: 1683183528\nSlot: 21260.25 (so its a delayed slot? )\nSecond bad slot: 21229.125 (also delayed slot compared to genesis).",
        "created_at": "2023-05-08T15:12:11.868000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "0.25 drift is probably genesis_delay",
        "created_at": "2023-05-08T15:12:33.204000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "actual genesis is genesis time + delay",
        "created_at": "2023-05-08T15:12:48.887000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "1682503200 is calculated with the genesis delay already",
        "created_at": "2023-05-08T15:12:50.253000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "MIN_GENESIS_TIME: 1682503140 and GENESIS_DELAY: 60",
        "created_at": "2023-05-08T15:13:06.285000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Phew traced back this one..",
        "created_at": "2023-05-08T15:18:20.961000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "So block `0xbdb3` is present in slot `56613` \n```\ncurl localhost:5052/eth/v2/beacon/blocks/56613 | jq\n```",
        "created_at": "2023-05-08T15:18:54.480000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "\\ `      \"proposer_index\": \"949\",`",
        "created_at": "2023-05-08T15:19:15.509000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "thats lodestar/ethereumjs",
        "created_at": "2023-05-08T15:19:27.713000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "sure? do we have a mapping somewhere?",
        "created_at": "2023-05-08T15:19:44.690000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "They were the extra keys I had hanging around, and lodestar/ethereumjs was the most reliable so I pushed those extra keys to that",
        "created_at": "2023-05-08T15:20:08.475000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e so `56611` and `56612` are missing. and `56610` has a bunch of transactions, possible one of the tx's caused some chaos and subsequent missed slots until lodestar/ethereumjs proposed something it shouldn't have?",
        "created_at": "2023-05-08T15:21:39.475000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "double checking now",
        "created_at": "2023-05-08T15:21:49.138000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yea i checked the key gen script, seems like its the extra keys indeed",
        "created_at": "2023-05-08T15:22:07.526000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "This is kinda serious \u003c@\u0026814631391181930606\u003e If you proposed this block it means that you could probably propose a bad block on mainnet",
        "created_at": "2023-05-08T15:30:30.197000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "checking the block",
        "created_at": "2023-05-08T15:31:26.661000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "which node is this?",
        "created_at": "2023-05-08T15:31:53.339000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "lodestar-ethereumjs should be running this validator",
        "created_at": "2023-05-08T15:32:12.877000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "EthereumJS should not be used on mainnet",
        "created_at": "2023-05-08T15:32:25.212000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Wasn't really the point of marius I think",
        "created_at": "2023-05-08T15:32:53.894000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "nevertheless we gotta find issue and fix",
        "created_at": "2023-05-08T15:33:14.816000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "graffiti confirms: 0x6c6f6465737461722f657468657265756d6a7300000000000000000000000000 which translates to `lodestar/ethereumjs`",
        "created_at": "2023-05-08T15:34:05.185000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "this block has zero txs?",
        "created_at": "2023-05-08T15:34:54.511000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Am I correct that this bad block has txs in the wrong order? (nonce order?)",
        "created_at": "2023-05-08T15:35:21.037000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2023-05-08T15:35:26.976000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2023-05-08T15:35:29.758000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "0dd5ff4e937216acd57853257301d3b8ee292c787b4ec81fec06c0315ea633b4"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Thats not the correct block afaict",
        "created_at": "2023-05-08T15:35:54.086000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "which slot/blocknum",
        "created_at": "2023-05-08T15:36:09.768000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "That's the block number you linked no? `0xbdb3` -\u003e `48563`",
        "created_at": "2023-05-08T15:36:53.729000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "EL block number:  0xbdb3",
        "created_at": "2023-05-08T15:36:53.996000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "block 0xbdb3 aka 48563",
        "created_at": "2023-05-08T15:36:59.310000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "and the EL payload g11 linked has the same block_number",
        "created_at": "2023-05-08T15:37:23.624000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "But that might be the correct block, not the bad one",
        "created_at": "2023-05-08T15:37:25.076000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "48563",
        "created_at": "2023-05-08T15:37:39.556000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "aahh",
        "created_at": "2023-05-08T15:37:43.605000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ah, yeah the one before it `56610` has a ton of tx's",
        "created_at": "2023-05-08T15:37:53.209000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "or did you mean a totally different block is the bad one?",
        "created_at": "2023-05-08T15:38:08.785000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "but this bad block is in ethereumjs's canonical chain?",
        "created_at": "2023-05-08T15:38:17.757000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "or was it rejected?",
        "created_at": "2023-05-08T15:38:27.993000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I think it was produced by ethereumjs but rejected",
        "created_at": "2023-05-08T15:38:52.243000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "is this a known issue ?",
        "created_at": "2023-05-08T15:39:59.579000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "wait can we come to consensus on which the bad block is? I'm a bit confused rn",
        "created_at": "2023-05-08T15:40:03.515000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "we need to locate the node which might have kept this bad block",
        "created_at": "2023-05-08T15:40:31.750000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Nope never encountered this before",
        "created_at": "2023-05-08T15:40:51.140000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "and the bad block must've been between `56610` and `56613`?",
        "created_at": "2023-05-08T15:40:53.613000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I just glanced in our code and it looks like we sort nonces fine",
        "created_at": "2023-05-08T15:40:57.449000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Wait",
        "created_at": "2023-05-08T15:41:30.894000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I think we have a race condition",
        "created_at": "2023-05-08T15:41:36.127000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "slot: 56610 can't be it because its present in lodestar\u003c\u003eerigon as well",
        "created_at": "2023-05-08T15:43:13.243000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ay-08 15:24:24.649[chain]           error: Block error slot=87335 code=BLOCK_ERROR_EXECUTION_ERROR, execStatus=INVALID, errorMessage=\nMay-08 15:24:24.651[sync]          verbose: Batch process error id=Head, startEpoch=2729, status=Processing code=BLOCK_ERROR_EXECUTION_ERROR, execStatus=INVALID, errorMessage=",
        "created_at": "2023-05-08T15:46:52.307000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "slot 87335 is invalid on erigon",
        "created_at": "2023-05-08T15:47:02.462000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Proposals for : ```\n56610 - lighthouse-nethermind\n56611 - empty\n56612 - empty\n56613 - lodestar-ethereumjs \n```",
        "created_at": "2023-05-08T15:47:47.792000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "and lodestar\u003c\u003eethereumjs seems to have accepted it",
        "created_at": "2023-05-08T15:48:04.996000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "there is a treasure trove of bad blocks it seems , likely produced by us lol",
        "created_at": "2023-05-08T15:56:15.566000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "```\nMay-04 03:24:48.162[chain]           error: Block error slot=55624 code=BLOCK_ERROR_EXECUTION_ERROR, execStatus=INVALID, errorMessage=[5/7 Execution] mismatched receipt headers for block 48073 (0xa40b69aeda205c27ee9d688f087e76062d36d989926658b90c2568ad8fc3185d != \n````",
        "created_at": "2023-05-08T15:56:50.164000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ahh no its not even in ethereumjs",
        "created_at": "2023-05-08T15:57:43.138000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "how can we know which slot was produced by which client? explorer seems to be down",
        "created_at": "2023-05-08T15:59:33.766000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i think i can figure it out from ansible if and which ethereumjs\u003c\u003elodestar proposed it and likely others too",
        "created_at": "2023-05-08T16:02:09.754000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@131476523050860545\u003e had set a cloud ansible for devnet5 test runs, is it still working? cc \u003c@412614104222531604\u003e",
        "created_at": "2023-05-08T16:02:50.606000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "unsure, but you should be able to run ansible from your local üòÑ",
        "created_at": "2023-05-08T16:04:08.138000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Explorer is syncing off of erigon",
        "created_at": "2023-05-08T16:04:21.245000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "your SSH key is on quite a few machines anyway",
        "created_at": "2023-05-08T16:04:22.282000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "and erigon has forked off the main chain",
        "created_at": "2023-05-08T16:04:26.936000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I think all at this point lmao",
        "created_at": "2023-05-08T16:04:39.984000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes i am using lodestar\u003c\u003eethereumjs and lodestar\u003c\u003eerigon bad block logs to figure out where divergence occured",
        "created_at": "2023-05-08T16:04:52.738000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "```\n ansible -i inventories/devnet-5/inventory.ini -m ansible.builtin.shell -a '\u003cShell command\u003e' all\n```\nshould work for you, once you clone the 4844-testnet repo and move into the `ansible` folder",
        "created_at": "2023-05-08T16:06:29.785000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ok first bad block divergence is at : `87335`  which lodestar\u003c\u003eethereumjs has accepted while lodestar\u003c\u003eerigon has rejected with :\n\n```\nay-08 13:07:00.680[chain]           error: Block error slot=87335 code=BLOCK_ERROR_EXECUTION_ERROR, execStatus=INVALID, errorMessage=[5/7 Execution] mismatched receipt headers for block 62717 (0x239fa451f462fec2e4f77bad18f6016b013409dd3f88be821de250d32b5aab99 != 0xe0dabb4958b38ae35ea6a86dfb216bc4f0b57add10675f50d43cabbd1b893265)\n```",
        "created_at": "2023-05-08T16:08:32.406000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "so apart from the bad block production issue (which ethereumjs client can messup sometimes because that is a bit experimental), ethereumjs shouldn't have concensus issues: i.e. accept a bad block in its canonical chain",
        "created_at": "2023-05-08T16:10:01.011000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "this block has just 4 txs all of which are blob, cc \u003c@403636673914863626\u003e",
        "created_at": "2023-05-08T16:12:13.309000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "for anyone looking to debug: ssh into any of lodestar\u003c\u003eethereumjs nodes and: `curl localhost:5052/eth/v2/beacon/blocks/87335 | jq`",
        "created_at": "2023-05-08T16:13:08.398000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "can erigon also verify if they correctly rejected the block, we are also checking in mean time",
        "created_at": "2023-05-08T16:16:24.929000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "i think I found the issue with erigon's DATAHASH handling. Pushed a fix to the fork repo, but I guess we'd have to reset the chain to get it back on track?",
        "created_at": "2023-05-08T16:17:37.459000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "we could also resync just broken nodes to get it back on track, as long as post-fix the client can sync the old chain",
        "created_at": "2023-05-08T16:17:58.809000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "do you have a link?",
        "created_at": "2023-05-08T16:18:01.118000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "yep, though one sec I pushed the change to the wrong branch :/",
        "created_at": "2023-05-08T16:18:47.240000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/roberto-bayardo/erigon",
        "created_at": "2023-05-08T16:21:23.063000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i think we don't have finalization since long",
        "created_at": "2023-05-08T16:21:35.195000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "so if you restart ~~ethereumjs~~ lodestar it should play all blocks since last finalization",
        "created_at": "2023-05-08T16:21:53.859000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "latest commit in the 4844 branch: (which is the default): 18a15da16f2676462370caa30b00c07cbe6f9a69",
        "created_at": "2023-05-08T16:22:16.363000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "restart lodestar",
        "created_at": "2023-05-08T16:22:18.744000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "you need me to wipe/restart some node?",
        "created_at": "2023-05-08T16:30:41.602000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "erigon nodes i guess (wipe CL too)",
        "created_at": "2023-05-08T16:31:03.795000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "with new image üòÜ",
        "created_at": "2023-05-08T16:31:31.675000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "building new img now",
        "created_at": "2023-05-08T16:31:37.727000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "wipe and redeploying erigon now.",
        "created_at": "2023-05-08T16:40:59.255000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```[WARN] [05-08|16:54:55.207] Served                                   conn=172.18.0.15:49214 method=eth_getLogs reqid=4504 t=166.798¬µs err=\"end (0) \u003c begin (1)\"\n^C```",
        "created_at": "2023-05-08T16:55:09.868000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "LH-erigon",
        "created_at": "2023-05-08T16:55:11.946000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "lodestar\u003c\u003eerigon seems to be syncing",
        "created_at": "2023-05-08T16:56:24.258000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "so does prysm - erigon",
        "created_at": "2023-05-08T16:56:33.258000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "awesome",
        "created_at": "2023-05-08T16:58:03.401000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ok lh-erigon also syncing now",
        "created_at": "2023-05-08T17:03:26.806000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "with erigon we should be able to finalize again right \u003c@412614104222531604\u003e ?",
        "created_at": "2023-05-08T17:08:05.491000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "then i can start looking into issues of ethereumjs block production and see whats going on over there for the other bad blocks (which ethereumjs itself has also rejected)",
        "created_at": "2023-05-08T17:08:56.870000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ahh we still have issue: ```\nMay-08 17:17:22.792[chain]           error: Block error slot=87335 code=BLOCK_ERROR_EXECUTION_ERROR, execStatus=INVALID, errorMessage=\nError: BLOCK_ERROR_EXECUTION_ERROR\n    at verifyBlockExecutionPayload (file:///usr/app/packages/beacon-node/src/chain/blocks/verifyBlocksExecutionPayloads.ts:309:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at verifyBlocksExecutionPayload (file:///usr/app/packages/beacon-node/src/chain/blocks/verifyBlocksExecutionPayloads.ts:154:28)\n    at async Promise.all (index 0)\n```",
        "created_at": "2023-05-08T17:17:49.569000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "no error message",
        "created_at": "2023-05-08T17:18:42.655000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "```\nWARN] [05-08|17:17:17.191] [5/7 Execution] Execution failed         block=62717 hash=0x8479de330419e8acc597cda0fb467dcd1fdd4fb0f20f54970328df8c328a1f37 err=\"mismatched receipt headers for block 62717 (0x239fa451f462fec2e4f77bad18f6016b013409dd3f88be821de250d32b5aab99 != 0xe0dabb4958b38ae35ea6a86dfb216bc4f0b57add10675f50d43cabbd1b893265)\"\n[WARN] [05-08|17:17:17.191] Could not validate block                 err=\"[5/7 Execution] mismatched receipt headers for block 62717 (0x239fa451f462fec2e4f77bad18f6016b013409dd3f88be821de250d32b5aab99 != 0xe0dabb4958b38ae35ea6a86dfb216bc4f0b57add10675f50d43cabbd1b893265)\"\n[WARN] [05-08|17:17:17.196] Validation failed for header             hash=0x8479de330419e8acc597cda0fb467dcd1fdd4fb0f20f54970328df8c328a1f37 height=62717 err=\"[5/7 Execution] mismatched receipt headers for block 62717 (0x239fa451f462fec2e4f77bad18f6016b013409dd3f88be821de250d32b5aab99 != 0xe0dabb4958b38ae35ea6a86dfb216bc4f0b57add10675f50d43cabbd1b893265)\"\n```",
        "created_at": "2023-05-08T17:20:27.236000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "from erigon",
        "created_at": "2023-05-08T17:20:31.685000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "sigh, ok guess that didn't fix the issue.",
        "created_at": "2023-05-08T17:21:43.738000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "you applied that latest commit \u003c@792822129019584562\u003e ?",
        "created_at": "2023-05-08T17:23:24.230000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i think branch is auto build by \u003c@412614104222531604\u003e",
        "created_at": "2023-05-08T17:23:41.222000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "ok, then yes it should have it.",
        "created_at": "2023-05-08T17:23:48.277000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "I am watching the LH\u003c-\u003eerigon node but it's syncing really slowly and only on block 11850",
        "created_at": "2023-05-08T17:24:09.576000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "you can ssh to `ssh devops@lodestar-erigon-1.srv.4844-devnet-5.ethpandaops.io`",
        "created_at": "2023-05-08T17:24:38.458000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i have no idea why lodestar\u003c\u003egeth is on a different fork",
        "created_at": "2023-05-08T17:34:47.279000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "curl localhost:5052/eth/v2/beacon/blocks/87335 | jq \".data.message.body.execution_payload.block_hash\" is same on lodestar\u003c\u003eethereumjs and lodestar\u003c\u003egeth, s atleast for this block there is agreement",
        "created_at": "2023-05-08T17:39:59.062000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "I think its because of this:\n```typescript\nMay-08 14:28:15.879[chain]           error: Block error slot=87475 code=BLOCK_ERROR_EXECUTION_ERROR, execStatus=INVALID, errorMessage=Error verifying block while running: Error: invalid receiptTrie (vm hf=cancun -\u003e block number=62757 hash=fb640e94f3c2250ab223c41f07c3d72d5d0a589226ce09aab1827933d9a72548 hf=cancun baseFeePerGas=9 txs=4 uncles=0)\n```\nethereumjs rejects this block while geth accepts",
        "created_at": "2023-05-08T17:44:01.305000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "it has one type 2 and 4 type3 txs, \u003c@403636673914863626\u003e this could be worth debugging on our side",
        "created_at": "2023-05-08T17:47:12.608000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "its parent slot: `87466` matches on both ethereumjs/geth",
        "created_at": "2023-05-08T17:50:58.125000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2023-05-08T17:55:24.684000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "440fa963d3c9ed22f5da37398244de58bd41c9f3a940a99219e0628b5ba16238"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Trace on geth, all three type 3 transaction use the datahash opcode",
        "created_at": "2023-05-08T17:55:41.558000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "which block slot/number is this",
        "created_at": "2023-05-08T17:58:10.914000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "62757 block on el, timestamp: 1683552900",
        "created_at": "2023-05-08T17:58:56.031000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ok so this one",
        "created_at": "2023-05-08T17:59:59.341000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2023-05-08T18:00:29.054000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yea ethereumjs js will need debugging why we can't match receipt",
        "created_at": "2023-05-08T18:00:31.925000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "thanks for the debug logs",
        "created_at": "2023-05-08T18:00:57.149000+00:00",
        "attachments": null
    },
    {
        "author": "inphi",
        "category": "Testing",
        "parent": "",
        "content": "Is the faucet having issues? I've been unable to get ETH from faucet 1 and 2",
        "created_at": "2023-05-08T19:10:49.742000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I think the rpc is not up to head",
        "created_at": "2023-05-08T20:36:59.417000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "If you send me your address I can send you some test eth",
        "created_at": "2023-05-08T20:51:16.930000+00:00",
        "attachments": null
    },
    {
        "author": "inphi",
        "category": "Testing",
        "parent": "",
        "content": "Address is `0xC30276833798867C1dBC5c468bf51cA900b44E4c`. Thanks",
        "created_at": "2023-05-08T20:53:45.622000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Will send some tomorrow morning",
        "created_at": "2023-05-08T21:35:08.486000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "back and looking into this. Erigon+LH stalled again just before block 62717.   Not sure how to get a trace from Erigon for a block that it didn't accept.",
        "created_at": "2023-05-08T23:57:15.609000+00:00",
        "attachments": null
    }
]