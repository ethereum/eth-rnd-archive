[
    {
        "author": "macfarla",
        "category": "Testing",
        "parent": "",
        "content": "Besu update - fixed the issue with `Versioned hashes from blob transactions do not match expected values` - we were sending blob txs with the wrong encoding - PR https://github.com/hyperledger/besu/pull/5820 - now the only one missing proposals is the lighthouse/besu node with `blockhash mismatch`. Looking into that today.",
        "created_at": "2023-09-05T00:25:56.108000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@504202741933932544\u003e we didn't validate that block correctly",
        "created_at": "2023-09-05T00:47:30.116000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "or at least we didn't think the block was right",
        "created_at": "2023-09-05T00:48:03.406000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "```\ntime=\"2023-09-04 08:51:24\" level=error msg=\"Could not handle p2p pubsub\" error=\"could not validate blob data availability: could not check data availability, expected 3 commitments, obtained 1\" prefix=sync topic=\"/eth2/3cb73180/beacon_block/ssz_snappy\"\n```",
        "created_at": "2023-09-05T00:48:15.524000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@833706406699073536\u003e",
        "created_at": "2023-09-05T00:48:19.729000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "We receive three sidecars",
        "created_at": "2023-09-05T00:49:02.597000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "so it'd be nice to know if others confirm this",
        "created_at": "2023-09-05T00:49:11.919000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "going to put the kids to bed now",
        "created_at": "2023-09-05T00:49:19.035000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "looking, I'll first check which image prysm is using. It could be an existing bug where we still are on the old img",
        "created_at": "2023-09-05T00:55:51.643000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "From the logs it looks prysm is right",
        "created_at": "2023-09-05T00:56:56.528000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "We should check with other instances to see if there were 3 sidecars",
        "created_at": "2023-09-05T00:57:14.402000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "136257 says 3 sidecars here but orphaned \nhttps://light-beaconchain-explorer.dencun-devnet-8.ethpandaops.io/slot/0x7135b3a23eb06461a917bb2828df85855f9a27cc238319e9f952ee47db1ed766",
        "created_at": "2023-09-05T00:57:49.531000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Then it's right if the block had one commitment",
        "created_at": "2023-09-05T01:00:18.698000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "So either Teku or Prysm is lying here ðŸ˜‚",
        "created_at": "2023-09-05T01:01:17.255000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "No it has 3 commitments",
        "created_at": "2023-09-05T01:01:40.901000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "Our log aligns with the explorer: `blobCommitmentCount=3 payloadHash=0x5ca907ff34a5 prefix=blockchain slot=136257`",
        "created_at": "2023-09-05T01:01:53.496000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The log I posted indicates that prysm -Nethermind had 3 sidecars and only one commitment",
        "created_at": "2023-09-05T01:03:01.687000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "No, the log is right. It says it received 3 commitments but only 1 sidecar",
        "created_at": "2023-09-05T01:04:03.090000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "`expected 3 commitments, obtained 1`",
        "created_at": "2023-09-05T01:04:09.091000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "I think I have a good grasp of the bug but let's take it to internal channel so we dont spam here. I'll tag you",
        "created_at": "2023-09-05T01:06:33.127000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "There are three sidecars logged right before the log I posted",
        "created_at": "2023-09-05T01:06:42.397000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "teku-geth saw the block and all the sidecars",
        "created_at": "2023-09-05T01:53:28.658000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "-6030521773558185016_121.jpg",
                "content": "b151853dfc8cc554d62e21b1758b0bafa3c2e334b465dcce311e5651da3eb870"
            }
        ]
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah it may be a race, we saw the three sidecars but the dbase returns only one commit. Thanks for flagging this. Will look tomorrow",
        "created_at": "2023-09-05T02:04:57.737000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "To be fair it has been initially flagged by marek from nethermind who pinged us on tg:)",
        "created_at": "2023-09-05T02:36:06.032000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "Fixed here: https://github.com/prysmaticlabs/prysm/pull/12849\nShould be able to merge this by the end of the week.",
        "created_at": "2023-09-05T02:51:08.534000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "would be good to include this builder spec change in devnet-9 spec if we have builder ready for testing:\nhttps://github.com/ethereum/builder-specs/pull/87",
        "created_at": "2023-09-05T03:06:35.682000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Sure, it doesn't make sense to use an ssz limit that may not be a power of two",
        "created_at": "2023-09-05T03:09:07.041000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "lodestar builder build already includes this PR",
        "created_at": "2023-09-05T07:02:29.294000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "it does in that the limit is the maximum allowable deserialized size - ie deserializers should fail on bigger lists regardless of the power-of-two hash computation - the (lower) non-power-of-two then serves as a DoS protection",
        "created_at": "2023-09-05T08:08:25.548000+00:00",
        "attachments": null
    },
    {
        "author": "spingel",
        "category": "Testing",
        "parent": "",
        "content": "While debugging why besu could not propose blocks with Lighthouse I noticed that Lighthouse does always send two fork choice updates, with different parent beacon block roots but otherwise the same parameters, before calling the get payload v3.  Find an example in the thread.",
        "created_at": "2023-09-05T08:19:39.263000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah but having non power of two limits on lists is to call for subtle bugs creeping from disagreements on hashing libraries, even on valid payloads",
        "created_at": "2023-09-05T09:54:50.406000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "it seems like prysm is missing a bunch of blocks. \nlooks like the only proposals going through with prysm are with besu,",
        "created_at": "2023-09-05T21:36:04.036000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "https://light-beaconchain-explorer.dencun-devnet-8.ethpandaops.io/slots/filtered?f=\u0026f.pname=prysm\u0026f.missing=1\u0026f.orphaned=1\u0026c=50",
        "created_at": "2023-09-05T21:36:48.228000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "looking",
        "created_at": "2023-09-05T21:42:03.317000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "reason: `time=\"2023-09-05 21:46:09\" level=debug msg=\"Could not process batch blocks due to missing parent\" firstSlot=140646 lastSlot=140709 missingParent=0xdb376a7b28100c9675b7bf75281c86654f88fcbeb22e388d9a7c0ce54ace4801 prefix=initial-sync\ntime=\"2023-09-05 21:46:09\" level=warning msg=\"Range is not processed\" error=\"Range had no valid blocks to process\" prefix=initial-sync`\nwe'll work on this internally, well report back",
        "created_at": "2023-09-05T21:56:43.250000+00:00",
        "attachments": null
    }
]