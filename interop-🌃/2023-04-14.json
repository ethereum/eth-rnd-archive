[
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "https://discord.com/channels/595666850260713488/1093963476948496455/1096364261292380181",
        "created_at": "2023-04-14T10:27:31.234000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "basically RANDAO only changes when there's a block. head hash doesn't change without a new block either in typical circumstances, and when it did, Nimbus already picked up that reorg fine. Nimbus's proposal slot lookahead approximation was good enough until withdrawals because it manually incremented the `timestamp` to the next slot, and the rest didn't change.",
        "created_at": "2023-04-14T10:28:47.296000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "as \u003c@755590043632140352\u003e noted, this only happens at epoch boundary because that's the only time when balances change (list of which validator indices are to be withdrawn also is constant sans blocks). fix pending.",
        "created_at": "2023-04-14T10:30:06.240000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "unfortunately, the fix makes things somewhat more expensive (needs to actually increment state, et cetera), so it made sense not to do this until withdrawals (appear to, maybe there's some other workaround) require it. As a result, Nimbus will still use its current approximation for proposals on any but the first slot, because withdrawal balances cannot change within the epoch",
        "created_at": "2023-04-14T10:31:04.819000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "if i understand correctly, nimbus did the first fcU without running epoch transition , and then the second with epoch transition?",
        "created_at": "2023-04-14T10:47:42.942000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2023-04-14T10:47:50.312000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ok understood, thanks for explanation ❤️",
        "created_at": "2023-04-14T10:48:12.363000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "the actual proposal is always done with the honest validator proposal state, but the fcU until now never needed the full thing",
        "created_at": "2023-04-14T10:48:23.088000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "anyway adding the payload params to index payload build is not a big thing, but understanding what really happened gives good insights",
        "created_at": "2023-04-14T10:50:12.207000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "thinking of the builder API, those guys still might not require withdrawals in the getHeader post",
        "created_at": "2023-04-14T10:50:49.209000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "they don't, right. So there's no analogue of this bug for the builder API",
        "created_at": "2023-04-14T10:54:04.902000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "yeah, I think it makes sense anyway",
        "created_at": "2023-04-14T10:55:04.787000+00:00",
        "attachments": null
    },
    {
        "author": "butta",
        "category": "Testing",
        "parent": "",
        "content": "Our server costs would like to thank you. We will shutdown the zhejiang explorer on the 19th as well.",
        "created_at": "2023-04-14T11:21:33.146000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "should be fix for the fcU/withdrawals issue: https://github.com/status-im/nimbus-eth2/pull/4820",
        "created_at": "2023-04-14T16:28:11.519000+00:00",
        "attachments": null
    }
]