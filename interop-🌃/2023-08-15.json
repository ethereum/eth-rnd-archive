[
    {
        "author": "demiurgos_23",
        "category": "Testing",
        "parent": "",
        "content": "Hi guys, we think we've found an issue while debugging, we were supplied a genesis with a nonce of 0x01 in the address 0x0b but it seems that other clients either ignore it or it should be 0, and secondly we noticed that we can only reach consensus when we increment system account nonce (which shouldn't be done)\nso yeah in order for us to pass the tests we had to : \n* change genesis spec to set 0 as nonce to 0x0b \n* increment system account nonce",
        "created_at": "2023-08-15T11:57:41.228000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "hmm i don't really see how it would be possible for geth to increment the system address by going down the `evm.Call` call graph",
        "created_at": "2023-08-15T12:11:37.077000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "will have to run a single state test and inspect, but right now i'm not sure",
        "created_at": "2023-08-15T12:12:19.821000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Is this possible? This would yield wrong state roots",
        "created_at": "2023-08-15T12:12:21.376000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "that is what \u003c@1011612262743679036\u003e is saying \n\u003e we noticed that we can only reach consensus when we increment system account nonce (which shouldn't be done)",
        "created_at": "2023-08-15T12:12:50.568000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Oh sorry ü§¶‚Äç‚ôÇÔ∏è",
        "created_at": "2023-08-15T12:13:02.007000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Sometimes I fail to read things correctly",
        "created_at": "2023-08-15T12:13:08.527000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "i do this most times",
        "created_at": "2023-08-15T12:13:16.420000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/NethermindEth/nethermind/commit/5c30d7f8e1d09349bb092a681e49176f7c4928a6\nthis üëÜ  fixed pyspec test for us, so looks like it is indeed possible. We will run kurtosis now (geth, nethermind) to confirm it",
        "created_at": "2023-08-15T12:17:23.279000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "EthereumJS is passing pyspec and we do not have the logic in that commit",
        "created_at": "2023-08-15T12:18:24.699000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "fyi felix brought up a good point about the forkid issues we've had: https://ethereum-magicians.org/t/eip-6122-forkid-checks-based-on-timestamps/12130/2?u=matt\n\ni think our proposal is to update the EIP so that all active forks are written into the forkid",
        "created_at": "2023-08-15T13:00:16.669000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "e.g. this: https://github.com/ethereum/EIPs/pull/7487",
        "created_at": "2023-08-15T13:30:06.391000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "well, we forked with geth on Kurtosis, so we will have to investigate it more on our side",
        "created_at": "2023-08-15T13:34:45.153000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I agree with Felix' comment but the current state of your PR will not distinguish, since:\n\n\u003e If multiple forks are applied at the same block or time, the block number or timestamp is checksummed only once.\n\nThis should then be removed as well, otherwise genesis for Cancun / Shanghai will still have the same CRC. What we want is (right?):\n\nFor shanghai: `\u003cgenesis hash\u003e \u003chomestead block (0)\u003e \u003ctangerine whistle (0\u003e ... \u003cshanghai time (0)\u003e`\nFor cancun:  `\u003cgenesis hash\u003e \u003chomestead block (0)\u003e \u003ctangerine whistle (0\u003e ... \u003cshanghai time (0)\u003e \u003ccancun time (0)\u003e`\n(all are padded to 4 bytes except ofc. genesis hash of 32 bytes).\n\nWith the rule which I think it should be deleted, this is the result:\n\nFor shanghai: `\u003cgenesis hash\u003e \u003chomestead block (0)\u003e`\nFor cancun:  `\u003cgenesis hash\u003e \u003chomestead block (0)\u003e`\n(i.e. still same CRC32)",
        "created_at": "2023-08-15T13:40:18.129000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "ah yes you are correct üëç",
        "created_at": "2023-08-15T13:41:07.368000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Is Constantinople + Petersburg considered one or two forks?",
        "created_at": "2023-08-15T13:41:37.732000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Because if it is two forks per spec we get a problem if we remove that rule ü§î (mainnet fork hashes will change)",
        "created_at": "2023-08-15T13:41:53.681000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "~~i think one~~ looks like it is two",
        "created_at": "2023-08-15T13:42:00+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "also this only applies to timebased forks",
        "created_at": "2023-08-15T13:42:09.997000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Ok but that should then be stated, because current EIP seems to read that it also applies to block nums",
        "created_at": "2023-08-15T13:43:03.199000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I think it are two, will check in JS",
        "created_at": "2023-08-15T13:43:07.144000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Ah right ofc the fork hashes are the same üòÇ",
        "created_at": "2023-08-15T13:46:22.479000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "We should state it in the EIP though that there is an exception for Constantinople / Petersburg otherwise non-devnet forkhashes will change",
        "created_at": "2023-08-15T13:46:55.260000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "hmm originally i thought 2124 dealt differently with this but i realize now 6122 is basically the exact same just adding the notion of timestamp forking. i ask felix for clarification, but even before 6122 it was possible for the same genesis block to produce the same forkid for different fork configurations",
        "created_at": "2023-08-15T13:55:14.656000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "i asked felix for his thoughts, maybe best to not make any changes here",
        "created_at": "2023-08-15T13:55:34.973000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "sorry if my PR to the EIP was premature üòÑ",
        "created_at": "2023-08-15T13:55:43.114000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Not a problem I was about to approve it until I realized that it might not work as intended üôÇ",
        "created_at": "2023-08-15T13:56:40.195000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I do agree that for same genesis + different forks we should have different fork hashes",
        "created_at": "2023-08-15T13:57:05.174000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Could lead to interesting test case where you have a devnet with new fork, and the devnet without it (so you can replay all txs)",
        "created_at": "2023-08-15T13:57:23.816000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "produce block beacon apis",
        "created_at": "2023-08-15T14:11:14.736000+00:00",
        "attachments": null
    }
]