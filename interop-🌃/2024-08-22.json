[
    {
        "author": "nordbjerg",
        "category": "Testing",
        "parent": "",
        "content": "is this going to be included in devnet-3? https://github.com/ethereum/EIPs/pull/8816",
        "created_at": "2024-08-22T08:30:05.947000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "imo, it makes sense to include. Would it be an easy change for clients? If not, we could delay it a bit",
        "created_at": "2024-08-22T08:31:07.177000+00:00",
        "attachments": null
    },
    {
        "author": "nordbjerg",
        "category": "Testing",
        "parent": "",
        "content": "from reth side we're ok with including it in devnet 3",
        "created_at": "2024-08-22T08:32:00.112000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "btw, bad blocks on `pectra-devnet-2`\n\n```\n########## BAD BLOCK #########\nBlock: 115746 (0xeb72f917806b3afc434a8b130a7e9c864292f78029b1f46c5d858a284ff36e3c)\nError: could not apply tx 202 [0x575bed3e80f46b7d11500cf3ee81f6015dbc76e24e4f413720d91fe6fc65ef07]: sender not an eoa: address\u003e\nPlatform: geth (devel) go1.22.6 amd64 linux\nVCS: 057e5d73-20240816\nChain config: \u0026params.ChainConfig{ChainID:7011893082, HomesteadBlock:0, DAOForkBlock:\u003cnil\u003e, DAOForkSupport:false, EIP150Block:\u003e\nReceipts:\n```",
        "created_at": "2024-08-22T12:48:23.543000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "produced by ` grandine-geth-1` and not included by geth as well",
        "created_at": "2024-08-22T12:48:46.447000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "another one: \n```\nERROR[08-21|13:02:24.204]\n########## BAD BLOCK #########\nBlock: 112828 (0xcf514645bc3b0fe0b57ccba360f458ae5b528fe850bf333ecceaac5ead9a3ba2)\nError: invalid gas used (remote: 338704 local: 344839)\nPlatform: geth (devel) go1.22.6 amd64 linux\nVCS: 057e5d73-20240816\nChain config: \u0026params.ChainConfig{ChainID:7011893082, HomesteadBlock:0, DAOForkBlock:\u003cnil\u003e, DAOForkSupport:false, EIP150Block:0, EIP155Block:0, EIP158Block:0, ByzantiumBlock:0, ConstantinopleBlock:0, PetersburgBlock:0, IstanbulBlock:0, MuirGlacierBlock:\u003cnil\u003e, BerlinBlock:0, LondonBlock:0, ArrowGlacierBlock:\u003cnil\u003e, GrayGlacierBlock:\u003cnil\u003e, MergeNetsplitBlock:0, ShanghaiTime:(*uint64)(0xc014e7a348), CancunTime:(*uint64)(0xc014e7a350), PragueTime:(*uint64)(0xc014e7a358), VerkleTime:(*uint64)(nil), TerminalTotalDifficulty:0, TerminalTotalDifficultyPassed:true, DepositContractAddress:0x4242424242424242424242424242424242424242, Ethash:(*params.EthashConfig)(nil), Clique:(*params.CliqueConfig)(nil)}\nReceipts:\n```",
        "created_at": "2024-08-22T12:51:47.331000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Timeline that doesn't make sense to me:\non lighthoues-geth-1:\n```\nINFO [08-22|05:51:24.408] Imported new potential chain segment     number=115,873 hash=891e49..f99787 blocks=1 txs=206 mgas=4.\u003e\n```\nSo this node is on block #115,873\n\nThis node indeed sees and skips above bad block as expected;\n```\nINFO [08-22|05:51:24.719] Skip duplicated bad block                number=115,746 hash=eb72f9..f36e3c\n```\nIt fails on a certain tx:\n```\nWARN [08-22|05:51:24.720] NewPayloadV1: inserting block failed     error=\"could not apply tx 202 [0x575bed3e80f46b7d11500cf3ee\u003e\n```\n\nWhat I don't get however, is then this log:\n```\nWARN [08-22|05:52:24.909] Too many bad block import attempt, trying number=115,746 hash=eb72f9..f36e3c\n```\nFollowed by a Sync:\n```\nINFO [08-22|05:52:25.338] Forkchoice requested sync to new head    number=115,763 hash=9e0413..77c06e finalized=unknown\n```\n\ncc \u003c@543900561460822016\u003e",
        "created_at": "2024-08-22T12:59:28.621000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Because this re-triggered sync thne causes geth to hit the bad block again, as it can't import the bad block:\n```\nERROR[08-22|05:52:25.702] Beacon backfilling failed                err=\"retrieved hash chain is invalid: could not apply tx 20\u003e\nWARN [08-22|05:52:25.710] Marked new chain head as invalid         hash=3596a6..17820e badnumber=115,746 badhash=eb72f9..f36e3c\n```",
        "created_at": "2024-08-22T13:00:09.908000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Also what does this mean?\n`Reenabled snap sync as chain is stateless`",
        "created_at": "2024-08-22T13:00:31.668000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "It then snap syncs back to the canonical chain:\n```\nWARN [08-22|05:57:48.352] Ignoring payload while snap syncing      number=115,877 hash=7f9a5d..090c94 reason=\"chain gapped, head: 115763, newHead: 115953\"\n```\nHowever, it gets stuck in this mode and never syncs to head as shows by the above message",
        "created_at": "2024-08-22T13:01:55.352000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "So typically I'd imagine the CL gets into opt. sync mode and then kicks the EL back into the right chain. But that isn't happening.",
        "created_at": "2024-08-22T13:02:38.302000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Open questions:\n- Why did geth produce a bad block it cant import?\n- Why did it try to resync the bad block chain when it was clearly already ahead? If this was triggered by the CL, why did the CL try to go back to such an old head?\n- Why does the geth node get stuck when it marks the bad chain as invalid? Why doesn't it snap sync to the correct chain? It has the right head, so this means it should be able to get that chain from its peers\n\nalso cc \u003c@360491619402776577\u003e",
        "created_at": "2024-08-22T13:04:01.443000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Erigon forks on `pectra-devnet-2`",
        "created_at": "2024-08-22T13:14:39.589000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Geth bad-block on `pectra-devnet-2`",
        "created_at": "2024-08-22T13:15:38.980000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Seems to be 7702 related",
        "created_at": "2024-08-22T13:58:56.823000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "based on the trace?",
        "created_at": "2024-08-22T13:59:17.473000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "move to the thread pls",
        "created_at": "2024-08-22T13:59:22.252000+00:00",
        "attachments": null
    },
    {
        "author": "hsiaowei",
        "category": "Testing",
        "parent": "",
        "content": "ACDC live discussion on rough future Pectra x PeerDAS devnet devnets sequence:\n\nPlan A:\n* peerdas-devnet-2\n* pectra-devnet-3\n* pectra-devnet-4 (with new fixes/features) \n* peerdas-3 (rebased on Pectra)\n\nOr\n\nPlan B:\n* peerdas-devnet-2\n* pectra-devnet-3\n* peerdas-3 (keep on Deneb, so that we donâ€™t have to test new Electra features here)\n* pectra-devnet-4 (with new fixes/features)\n\n\n/cc \u003c@412614104222531604\u003e \u003c@199561711278227457\u003e \u003c@592004585506340885\u003e",
        "created_at": "2024-08-22T14:47:14.240000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Just a note, we already have fixed spec versions for pectra-devnet-3. So irrespective of which one goes first, we probably won't change the targeted spec. \n\nIn general, I like option A as it seems like a realistic timeline",
        "created_at": "2024-08-22T14:59:00.049000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "fyi for all, the issue was a I cleared the delegation list too late when importing new blocks. it came *after* we check if the sender is an EOA. so if an account was delegated to in block N-1, in block N if it sends a tx we would fail because it would appear as if the account has code.\n\ni've fixed the issue now in the latest lightclient/go-ethereum:prague-devnet-2 branch",
        "created_at": "2024-08-22T16:55:49.460000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Testing",
        "parent": "",
        "content": "Looks like Prysm stopped proposing a few hours ago",
        "created_at": "2024-08-22T16:57:16.672000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Testing",
        "parent": "",
        "content": "Is this again the same issue after a restart? I spent the whole day trying to reproduce it in Kurtosis, but I can't. Once the node comes back up, it starts proposing again. Possibly related to differences between my local network and devnet-2. Is there a Kurtosis YAML available somewhere that I can use?",
        "created_at": "2024-08-22T16:59:32.575000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Testing",
        "parent": "",
        "content": "I'm worried we have a state transition bug that manifests itself only in some specific scenarios",
        "created_at": "2024-08-22T17:59:31.699000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "You meant this config?\nhttps://discord.com/channels/595666850260713488/892088344438255616/1270007767238836275\n\nYou might need to update some images, to use these: https://github.com/ethpandaops/pectra-devnets/blob/master/ansible/inventories/devnet-2/group_vars/all/images.yaml\n\nWhat scenario do you think it manifests in? We could try help create a local env with that scenario if we have the tools",
        "created_at": "2024-08-22T22:15:56.464000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "has been rolled ser, pls have a look",
        "created_at": "2024-08-22T22:19:20.068000+00:00",
        "attachments": null
    }
]