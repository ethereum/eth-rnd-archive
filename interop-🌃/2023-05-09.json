[
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "I have found another issue, datahashes wasn't getting set in the evm txcontext.   pushed an update to the usual repo.  this would certainly cause DATAHASH opcode to return the wrong result.",
        "created_at": "2023-05-09T00:35:09.003000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "sent",
        "created_at": "2023-05-09T05:12:45.414000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@792822129019584562\u003e looks like lodestar-ethereumjs is now operates on a different fork completely. everyone else seems to be on the other side of the fork.",
        "created_at": "2023-05-09T06:18:27.972000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "lodestar-erigon also got stuck at block 62716 afterwhich it can't sync anymore",
        "created_at": "2023-05-09T06:26:40.011000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```[INFO] [05-09|06:07:48.499] [2/15 Headers] Waiting for Consensus Layer...\n[INFO] [05-09|06:07:48.555] [2/15 Headers] Handling new payload      height=62716 hash=0xe8609e4e6ea2c555294006574d88c24110c674c205222d6216ca78ada4a8a8c7\n[INFO] [05-09|06:07:48.556] [2/15 Headers] Waiting for Consensus Layer...\n[WARN] [05-09|06:07:48.593] [NewPayload] Previously known bad block  hash=0x8479de330419e8acc597cda0fb467dcd1fdd4fb0f20f54970328df8c328a1f37\n[WARN] [05-09|06:08:09.392] Served                                   conn=172.18.0.4:36706 method=debug_getBadBlocks reqid=34319 t=31.339¬µs err=\"the method debug_getBadBlocks does not exist/is not available\"\n[INFO] [05-09|06:08:25.875] [p2p] GoodPeers                          eth67=9\n[INFO] [05-09|06:08:25.891] [txpool] stat                            pending=6 baseFee=0 queued=13308 alloc=81.1MB sys=140.4MB\n[INFO] [05-09|06:09:25.890] [txpool] stat                            pending=6 baseFee=0 queued=13318 alloc=62.7MB sys=140.4MB\n[INFO] [05-09|06:10:25.875] [p2p] GoodPeers                          eth67=9```",
        "created_at": "2023-05-09T06:26:50.621000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```Error: BLOCK_ERROR_EXECUTION_ERROR\n    at verifyBlockExecutionPayload (file:///usr/app/packages/beacon-node/src/chain/blocks/verifyBlocksExecutionPayloads.ts:309:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at verifyBlocksExecutionPayload (file:///usr/app/packages/beacon-node/src/chain/blocks/verifyBlocksExecutionPayloads.ts:154:28)\n    at async Promise.all (index 0)\n    at BeaconChain.verifyBlocksInEpoch (file:///usr/app/packages/beacon-node/src/chain/blocks/verifyBlock.ts:85:70)\n    at BeaconChain.processBlocks (file:///usr/app/packages/beacon-node/src/chain/blocks/index.ts:70:68)\n    at JobItemQueue.runJob (file:///usr/app/packages/beacon-node/src/util/queue/itemQueue.ts:101:22)\nMay-09 06:07:29.185[chain]           error: Block error slot=87335 code=BLOCK_ERROR_EXECUTION_ERROR, execStatus=INVALID, errorMessage=```",
        "created_at": "2023-05-09T06:27:07.931000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Can I wipe lodestar-ethereumjs? I would like to see if it can sync up to the correct chain from genesis or would it fork away again.",
        "created_at": "2023-05-09T06:28:09.651000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes am aware, we seem to have an issue, looking into it",
        "created_at": "2023-05-09T06:47:28.550000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "it won't follow the fork because of what ethereumjs sees an invalid receipt",
        "created_at": "2023-05-09T06:48:14.191000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "this one is the cause",
        "created_at": "2023-05-09T06:48:31.775000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e if you're still around can we get try this fix out?  commit: ```52afcb4f9f00f705c3cbf375fc7651349bf9e207``` \nhttps://github.com/roberto-bayardo/erigon",
        "created_at": "2023-05-09T13:20:49.110000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "done.",
        "created_at": "2023-05-09T13:31:47.835000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Need wipe and redeploy?",
        "created_at": "2023-05-09T13:31:53.010000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "redeploy yeah, I guess if some nodes have forked off then wipe too. the LH\u003c-\u003eErigon node seems stuck not forked last I checked, but probably best to wipe to be safe.)",
        "created_at": "2023-05-09T13:43:28.798000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "redeployed it on all, and wiping and redeploying on lh/erigon",
        "created_at": "2023-05-09T13:45:22.723000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "pls don't wipe lodestar\u003c\u003egeth even if its out of sync, i am using it to debug the fork iissue (just fyi)",
        "created_at": "2023-05-09T13:46:01.824000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i have a confusion \u003c@360491619402776577\u003e , shouldn't all 3 blob txs in this block consume same gas? geth seems to be consuming different gas for these blobs: \nFrom geth's get transaction receipt```typescript\nblocknum:62757 idx:0x0 type:0x2 txhash: 0x363716134eaaa2a1675d9adfa768da1c5708d754b4efff5f1a6a00ac0ebc492f consumed: 23048\nblocknum:62757 idx:0x1 type:0x3 txhash: 0x7f3bc8225cc33f25d55c24ffe0059eb4b76faa4e1e407e88017eb875770fc48b consumed: 47021\nblocknum:62757 idx:0x2 type:0x3 txhash: 0xc7a7caa217944d100c44f0ff2cd8f951e75bea989c81ac528984dca5579c55d5 consumed: 29921\nblocknum:62757 idx:0x3 type:0x3 txhash: 0xde480cb6bebdc248133975622c5479e142ab705bd4bcfcd121ad7cb7c7461e24 consumed: 27121\n```",
        "created_at": "2023-05-09T16:36:46.473000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "this is ethereumjs gas logs for same block: ```typescript\nvm:block ---------------------------------------------------------------------------------------------------- +0ms\n  vm:block Running block hash=fb640e94f3c2250ab223c41f07c3d72d5d0a589226ce09aab1827933d9a72548 number=62757 hardfork=cancun +0ms\n  vm:block block checkpoint +0ms\n  vm:block Validate block +1ms\n  vm:block Apply transactions +42ms\n  vm:block ---------------------------------------------------------------------------------------------------- +18ms\n  vm:block Add tx gas used (23048) to total block gas usage (-\u003e 23048) +1ms\n  vm:block ---------------------------------------------------------------------------------------------------- +22ms\n  vm:block Add tx gas used (27121) to total block gas usage (-\u003e 50169) +0ms\n  vm:block ---------------------------------------------------------------------------------------------------- +6ms\n  vm:block Add tx gas used (27121) to total block gas usage (-\u003e 77290) +0ms\n  vm:block ---------------------------------------------------------------------------------------------------- +8ms\n  vm:block Add tx gas used (27121) to total block gas usage (-\u003e 104411) +0ms\n  vm:block Received block results gasUsed=104411 bloom=00000000000000000000000000000000000000000000000000‚Ä¶ (256 bytes) receiptsRoot=327b5724a7b21201302f297321a080f5b2c45ddae255a68aa2250a6a20c0a68e receipts=4 txResults=4 +0ms\n```\nso basically first tx (type 2 one)  gas consuption matches + last blob tx gas consumption matches",
        "created_at": "2023-05-09T16:39:38.085000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "each of the blob txs have just 1 blob each: ```typescript\nblock num=62757 tx idx=0 hash=0x363716134eaaa2a1675d9adfa768da1c5708d754b4efff5f1a6a00ac0ebc492f type=2\nblock num=62757 tx idx=1 hash=0x7f3bc8225cc33f25d55c24ffe0059eb4b76faa4e1e407e88017eb875770fc48b type=3 blobs:1\nblock num=62757 tx idx=2 hash=0xc7a7caa217944d100c44f0ff2cd8f951e75bea989c81ac528984dca5579c55d5 type=3 blobs:1\nblock num=62757 tx idx=3 hash=0xde480cb6bebdc248133975622c5479e142ab705bd4bcfcd121ad7cb7c7461e24 type=3 blobs:1\n```",
        "created_at": "2023-05-09T16:41:50.094000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmmm yeah I guess the transactions should cost the same",
        "created_at": "2023-05-09T16:49:42.381000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "so likely geth issue then?",
        "created_at": "2023-05-09T16:58:43.634000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Don't know yet, I'm investigating the code rn",
        "created_at": "2023-05-09T16:59:24.751000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "you can rpc to the lodetar\u003c\u003egeth node's get transaction receipt, (its out of sync since seems like the network has moved to the different fork than this geth one)",
        "created_at": "2023-05-09T17:00:06.385000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "if you need rpc endpoint of the node with username password, let me know (unless you already have it üôÇ )",
        "created_at": "2023-05-09T17:02:39.705000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Are these txs to/from the same accounts?",
        "created_at": "2023-05-09T17:09:22.761000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i can log, but unless they are reverts should that matter?",
        "created_at": "2023-05-09T17:09:58.699000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "I was thinking of gas consumption other than data gas, perhaps that was different?",
        "created_at": "2023-05-09T17:10:32.675000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "aha, let me check, (ethereumjs only shows data gas)",
        "created_at": "2023-05-09T17:11:04.653000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "there does seem to be something in data field, so will need to see whats going on",
        "created_at": "2023-05-09T17:18:11.050000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Maybe something with the adress/sender being hot?",
        "created_at": "2023-05-09T17:18:19.034000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I have to go, travelling tmrw, can help in the evening",
        "created_at": "2023-05-09T17:18:58.990000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "`a8d55bda000000000000000000000000573d9cd570267bb9d1547192e51e5c8d017d70340000000000000000000000000000000000000000000000000000000000000000`",
        "created_at": "2023-05-09T17:19:02.182000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "Looks like LH\u003c-\u003eErigon back on track?  How can I tell if it's on the right chain or a fork?",
        "created_at": "2023-05-09T17:21:26.076000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "Ah: https://forkmon.4844-devnet-5.ethpandaops.io/",
        "created_at": "2023-05-09T17:22:03.979000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "Erigon still ending up on different fork at block 62719",
        "created_at": "2023-05-09T17:23:31.221000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "to and from seem sane: ```typescript\nblocknum:62757 idx:0x0 type:0x2 txhash: 0x363716134eaaa2a1675d9adfa768da1c5708d754b4efff5f1a6a00ac0ebc492f consumed: 23048 to: 0x8e4fc0f136ba56a151fd1530d4d6695df6a0fb4a from: 0x4ac670d8760faf780468638ef80034876ed8918d\nblocknum:62757 idx:0x1 type:0x3 txhash: 0x7f3bc8225cc33f25d55c24ffe0059eb4b76faa4e1e407e88017eb875770fc48b consumed: 47021 to: 0x8a185c5a7941b20253a2923690dd54a9e7bfd0a9 from: 0x216b8c8d998ac50f43c28c7e4e3d22057292c0bf\nblocknum:62757 idx:0x2 type:0x3 txhash: 0xc7a7caa217944d100c44f0ff2cd8f951e75bea989c81ac528984dca5579c55d5 consumed: 29921 to: 0x8a185c5a7941b20253a2923690dd54a9e7bfd0a9 from: 0x216b8c8d998ac50f43c28c7e4e3d22057292c0bf\nblocknum:62757 idx:0x3 type:0x3 txhash: 0xde480cb6bebdc248133975622c5479e142ab705bd4bcfcd121ad7cb7c7461e24 consumed: 27121 to: 0x8a185c5a7941b20253a2923690dd54a9e7bfd0a9 from: 0x216b8c8d998ac50f43c28c7e4e3d22057292c0bf\n```",
        "created_at": "2023-05-09T17:25:43.284000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "Erigon still seems to not be executing the bytecode (gas = 21000 for the 3 blob txs).  I'll continue investigating.",
        "created_at": "2023-05-09T17:44:09.549000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes, there is some code being processed, may be diff is coming from there",
        "created_at": "2023-05-09T17:47:51.319000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "I'm running locally with multi-blob tx, or multi single blob txs, and it seems to be working but let me know if you find something, I wrote a couple of new state tests for this üëç",
        "created_at": "2023-05-09T17:48:58.956000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "Is there an RPC endpoint for a known good pair I can use?",
        "created_at": "2023-05-09T18:16:43.546000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "If you have some time, could you try these blockchaintest fixtures just to rule any of those scenarios out?",
        "created_at": "2023-05-09T18:53:53.656000+00:00",
        "attachments": [
            {
                "type": "application/x-tar",
                "origin_name": "eip4844-blob-tx-fixtures.tar.gz",
                "content": "c279ba5034dcdc26af04cc7a05acaf0a1c44beb8a23cc0e3dba986f86408baae"
            }
        ]
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@403636673914863626\u003e",
        "created_at": "2023-05-09T19:07:07.544000+00:00",
        "attachments": null
    },
    {
        "author": "spencer_tb",
        "category": "Testing",
        "parent": "",
        "content": "Hey, I was wondering if there was an `ethereumjs` branch I could run these fixtures against in our `pyspec` hive simulator? Is `develop-v7` the one I should use?",
        "created_at": "2023-05-09T21:21:33.143000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@363800010518822915\u003e geth/prysm when started from scratch syncing seems to get stuck at block 33,058. Is this something you can help diagnose?",
        "created_at": "2023-05-09T23:21:51.316000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "what's the error? is this a ef devops setup? if yes, then I can ssh to it",
        "created_at": "2023-05-09T23:24:26.661000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "yep. it's prysm-geth-1.srv.4844-devnet-5.ethpandaops.io",
        "created_at": "2023-05-09T23:24:42.735000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Testing",
        "parent": "",
        "content": "I don't see an obvious problem in the logs",
        "created_at": "2023-05-09T23:24:51.638000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "`time=\"2023-05-09 23:22:36\" level=warning msg=\"Skip processing batched blocks\" error=\"block root 0x04205f8173ebbe1df7127a65ee5e40da62ffb7f59bc3d2604a74c12910a653f1, 2 commitments, 0 blobs: blobs unavailable for processing block with kzg commitments\" prefix=initial-sync` \n\nNot able to get the blobs by range from its peer for some reason. I'll try to sync with my local node",
        "created_at": "2023-05-09T23:28:00.438000+00:00",
        "attachments": null
    }
]