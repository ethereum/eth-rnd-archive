[
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I have a PR up for LH to alias \"goerli\" to \"prater\". Would you believe there's some devil in the detail? üôÄ \n\nWith the approach I've presented there, we will achieve:\n\n1. When the user specifies `--network goerli` they will get a datadir in `~/.lighthouse/goerli`\n2. When using `--network goerli` we'll return `\"CONFIG_NAME\": \"prater\"` on the `eth/v1/config/spec` endpoint.\n\nI don't think (1) really matters between client implementations, but I'd imagine we could get ourselves in trouble if we don't agree on how to handle (2).",
        "created_at": "2022-07-19T07:18:15.512000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "LH PR: https://github.com/sigp/lighthouse/pull/3346",
        "created_at": "2022-07-19T07:18:23.632000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I believe LH uses the genesis fork version rather than `CONFIG_NAME`, so would should be OK if there's a difference.",
        "created_at": "2022-07-19T07:21:27.910000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "For 1 would that cause a resync (and abandoning the old .prater directory)? Could it be possible to check for the existence of such a directory and rename it if present?\n\nFor 2, should we bite the bullet and return goerli in the config name? May upset some consumers of the endpoint until they address it, but otherwise I suspect it will confuse people for years to come.",
        "created_at": "2022-07-19T07:24:34.178000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Could we have a copy of prater config and name it goerly?",
        "created_at": "2022-07-19T07:26:11.507000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "In Teku `goerli` is an alias that literally means `prater` and so it will act exactly if you specify `--network prater`. The only place I think that will matter for us is that `CONFIG_NAME` will still be prater. I don't believe Teku will care if that CONFIG_NAME changed though.",
        "created_at": "2022-07-19T07:26:53.980000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "For (1), we're on a tight deadline for Prater releases and I'm hesitant to get into the complexity of moving files around for the user.\n\nI don't feel particularly strongly about (2), however I'm cautious of breaking things.",
        "created_at": "2022-07-19T07:27:06.641000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I have also considered this path, but I'm concerned that our documentation will get confusing. We like to say that your datadir is at `./lighthouse/{network}`.",
        "created_at": "2022-07-19T07:29:43.468000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "What we want to avoid is the scenario where some VC running `--network goerli` thinks that a BN returning `CONFIG_NAME: \"prater\"` is on a different network.",
        "created_at": "2022-07-19T07:32:56.334000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I'd say at some point we should rename CONFIG_NAME to goerli since that's the canonical name going forward.  Just need to confirm it won't cause issues for other clients first I suspect.",
        "created_at": "2022-07-19T07:35:45.107000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Perhaps we could always return `CONFIG_NAME: goerli` and then make it so that using `--network prater` gets the weirdness.",
        "created_at": "2022-07-19T07:39:32.894000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "If we're worried about timelines then perhaps:\n  - at current alias goerli to prater, all configs and locations stay the same\n  - let everyone (downstream) know  that it's going to change, and they should start using goerli as the canonical name and prater as an internal alias\n  - at some point in the future have a vaguely co-ordinated upgrade across beacon nodes where goerli becomes canonical and prater the alias\n  - eventually(?) drop the prater alias",
        "created_at": "2022-07-19T07:40:39.961000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "None of the solutions seem to come without rough edges, but given that it's a testnet we can push the breakage out a bit for now and handle it in a controlled fashion.",
        "created_at": "2022-07-19T07:41:26.996000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I'd lean towards never deprecating Prater. I imagine it will linger in people's devops environment for a long time. For example, we're probably never going to bother changing our \"prater\" testnet DNS names to \"goerli\" and it's going to be annoying if someone declares that I can no longer have `--network {{ network_name }}` and `{{ network_name }}_node.paul.com` anymore.",
        "created_at": "2022-07-19T07:43:02.181000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "If Ethereum has survived a certain newsletter-authoring Englishman sticking with \"eth2\" then I think it will survive a bunch of users still using `--network prater` üòÖ",
        "created_at": "2022-07-19T07:46:02.999000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I can't see me removing prater support from Teku any time soon. We managed to break our own nodes a while back when removed an option that we'd deprecated and had documented as to be removed in the changelog for nearly a year... Turns out even we don't pay attention to our warnings.",
        "created_at": "2022-07-19T08:02:04.248000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I'm happy to change CONFIG_NAME to goerli anytime people want. Teku doesn't make any use of it anyway.",
        "created_at": "2022-07-19T08:02:44.976000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Same here",
        "created_at": "2022-07-19T08:03:01.230000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I vaguely remember that prysm does something with `CONFIG_NAME`, so I'd wait for their feedback on this üòÑ \u003c@363800010518822915\u003e",
        "created_at": "2022-07-19T08:06:11.158000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Shouldn't be a blocker. We can code an exception for Prater/goerli",
        "created_at": "2022-07-19T08:12:10.023000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Ok, I'm going with `CONFIG_NAME=goerli` then.",
        "created_at": "2022-07-19T09:01:26.138000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e \u003c@199561711278227457\u003e is there any example setup on how to use https://github.com/MariusVanDerWijden/tx-fuzz against a live network?",
        "created_at": "2022-07-19T09:21:58.663000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "yea, lemme get you a command",
        "created_at": "2022-07-19T09:23:07.146000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ah, I have the ansible playbook in the verkle-testnet repo: https://github.com/parithosh/verkle-testnet/blob/main/playbooks/setup_txfuzz.yml\n\nVariables found here: https://github.com/parithosh/verkle-testnet/blob/main/verkle-testnet/inventory/group_vars/txfuzz.yml\n\nI guess you can copy over that to your setup, afaik its compatible with the consensus-deployment-ansible setup (both originated from the same template)",
        "created_at": "2022-07-19T09:24:18.702000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "Testing",
        "parent": "",
        "content": "Lifesaver ‚ù§Ô∏è can't get the tool as-is in Github to run",
        "created_at": "2022-07-19T09:29:47.490000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "we're having an internal discussion, no one knows if it's used üòÑ",
        "created_at": "2022-07-19T17:40:40.943000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "regarding `CONFIG_NAME`, it'd be nice if it matches the folder name where the genesis etc files are in eth2-networks or whatever the repo is called these days - not critical, but life is easier when things line up - I've been meaning to create a PR for `PRESET_NAME` as well - we use `CONFIG_NAME` in a few places to help the UX - for example, era files are named after the constant so people recognise them - changing a constant in general makes it much less of a constant :/",
        "created_at": "2022-07-19T20:34:36.411000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "renaming directories is a no-go - it breaks downgrade compatibility in general, and is a PITA to explain to users",
        "created_at": "2022-07-19T20:36:25.339000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Is it so much more of an issue than a database format update, which has happened in the past for various clients?  A simple \"you can't downgrade from this release\" has been stated before without any earth-shattering consequences.\n\n(I agree that it's better to not rename than to rename, but we need to consider the short-term pain of this versus having inconsistent naming in perpetuity).",
        "created_at": "2022-07-19T20:41:10.413000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "we haven't made a release like this so far - ie every nimbus release has been downgrade-compatible all the way to the latest HF - I know some clients have regretted releases like this because introduced regressions in the same go which left users in a bind",
        "created_at": "2022-07-19T20:42:28.420000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "I don't see why it's such a big deal to have different names for the consensus and execution chain - it's almost a feature: at least we know what's being talked about - the fact that we have two client types is a giant mess already - comparatively, this is a non-issue",
        "created_at": "2022-07-19T20:43:29.806000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Hasn't this ship already sailed though, with the agreement to rename prater to goerli?",
        "created_at": "2022-07-19T20:48:44.219000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "dunno, maybe I missed it - it seems rushed, if it did - got a reference to a decision?",
        "created_at": "2022-07-19T20:49:41.735000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Nope, I seem to remember it happening at a prior call but don't have a link.",
        "created_at": "2022-07-19T20:53:52.932000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "we're not supposed to decide things on calls alone üòâ",
        "created_at": "2022-07-19T20:54:12.039000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "From a UX perspective I think it's a pretty obvious win to support `--network goerli` as being the same as `--network prater` (our automation is already benefiting from this).  I'm not at all worried about what `CONFIG_NAME` says, though I generally lean towards biting the bullet now and just renaming everything to goerli since there is just one chain post-merge so it's weird to have two names for it.",
        "created_at": "2022-07-19T20:58:12.488000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "I dunno - they're two networks and two chains - giving the same name to related but distinct things is .. dubious - it makes easy things easier and hard things harder, by and large",
        "created_at": "2022-07-19T21:01:18.232000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I mean we call it the \"merge\" so if we're trying to have two separate identities I'm not sure we've got it right.  And over time they should become more and more one chain if anything.",
        "created_at": "2022-07-19T21:02:21.143000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Plus every other network uses the same name for both.",
        "created_at": "2022-07-19T21:02:48.244000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "well, not quite, we call it bellatrix and .. something else, for this specific reason: \"the merge\" is ambiguous in an annoying way",
        "created_at": "2022-07-19T21:03:34.461000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Bellatrix is the network upgrade, not the chain.  The chain is mainnet and mainnet, sepolia and sepolia, ropsten and ropsten...",
        "created_at": "2022-07-19T21:04:12.675000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "well, it's not \"the merge\" any more, in technical terms - anyway, whatever, really - given how eth2 is still around, I'll bring the üçø for the naming battle ahead üòâ",
        "created_at": "2022-07-19T21:06:14.408000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "What battle, I already merged it in Teku. üòÑ",
        "created_at": "2022-07-19T21:08:37.499000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "hm, did our eth2-wielding newsletter editor approve of that? üôÇ",
        "created_at": "2022-07-19T21:16:46.686000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "anyway, looks like the prater config in eth2-networks elides the issue by not specifying a config_name in which case we derive it from the folder name",
        "created_at": "2022-07-19T21:17:33.958000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "heh.  We add it to our config in Teku because it was present once way back when and we wanted to maintain compatibility in the response for Infura (back when we naively though the config endpoint output might be in anyway predictable)",
        "created_at": "2022-07-19T21:18:30.173000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "I'd rather see config_name remain as it is, specially because it's a mess to reeducate everyone this close to the actual fork",
        "created_at": "2022-07-19T21:18:39.510000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "I'm happy to go back to CONFIG_NAME=prater if there's a concern (which it sounds like you're raising).",
        "created_at": "2022-07-19T21:19:10.660000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "We can revisit in the future if there's confusion for people or go back to ignoring it if noone cares.",
        "created_at": "2022-07-19T21:19:29.566000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "I remember hitting a user hitting an issue where infura was reporting some weird config_name different from what other API:s were using - it was actually the impetus for standardising it as part of the spec (https://github.com/ethereum/consensus-specs/pull/2784)",
        "created_at": "2022-07-19T21:22:29.935000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "back then, there was indeed confusion between the name of the preset and the config (the former being .. mainnet which is weird)",
        "created_at": "2022-07-19T21:23:30.757000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "hmm, not sure what that would have been.  That PR came a fair while after we readded the config name for prater and mainnet from what I recall (and I mentioned adding it in a comment which is a good sign I remember right)",
        "created_at": "2022-07-19T21:23:38.774000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I‚Äôm not sure the win is so obvious. I don‚Äôt know if Teku uses network names to separate their directories, but we do and it‚Äôs weird to use ‚Äúgoerli‚Äù and get a ‚Äúprater‚Äù directory.\n\nTreating them like two different networks means that new users never even need to know Prater existed.",
        "created_at": "2022-07-19T21:25:14.767000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "same here btw, we put the network name in the directory - I'm glad you're solving this in a principled way so we can copy-paste üôÇ",
        "created_at": "2022-07-19T21:26:26.919000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "There‚Äôs certainly an argument that the long-term UX gain of users never needing to know of Prater is greater than that of letting existing users call the same thing a different name.",
        "created_at": "2022-07-19T21:29:09.594000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "We do have the advantage of not using the network name in the data dir. I can see how that's causing you trouble. üôÇ",
        "created_at": "2022-07-19T21:30:10.512000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "naming, threads and off-by-ones.. so there being two chains is an off-by-one?",
        "created_at": "2022-07-19T21:34:02.655000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Can we have no chains? That would free up a whole lot of time for me.",
        "created_at": "2022-07-19T22:25:17.258000+00:00",
        "attachments": null
    }
]