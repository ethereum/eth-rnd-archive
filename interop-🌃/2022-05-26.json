[
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I am thinking about `TERMINAL_BLOCK_HASH` override. For EL side the implementation idea was the following:\n- Define `TERMINAL_BLOCK_HASH` + `TERMINAL_BLOCK_NUMBER` + `TERMINAL_TOTAL_DIFFICULTY` in a way that they all point to *the* terminal PoW block\n- `TTD` is still used as the Merge fork trigger\n- `TBH` + `TBN` are used to whitelist the canonical chain leveraging the whitelisting mechanism that is already implemented by EL clients\n\nThis mechanics leaves one case unattended. Suppose there are two chains that EL is in sync with, and we're doing a `TBH` override. Suppose that both chains have reached `TTD`. In this case EL's canonical chain will be the one that is having `TBH` block, but EL would still allow importing a payload built on the top of a `TTD` block from *another* chain unless `TBH` is a part of terminal block conditions. On the CL side `TBH` is always checked and no chain can pass the transition unless it meets `TBH` override if it's been enabled, so CL would reject wrong chains.\n\nThus, the questions. Would it be hard to add `TBH` to the terminal block conditions when `TBH` override is enabled on EL side? Do we want this to be done considering that CL would take care of it even if EL won't? I am inclined to say no we don't need this extra check if this check would have additional implementation complexity. But if it is almost free one, I'd have it just in case.",
        "created_at": "2022-05-26T12:29:36.301000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "If any client devs are around and want to chat about the Ropsten TTD issue on zoom in 10-15, react to this and I‚Äôll send you an invite üëç",
        "created_at": "2022-05-26T14:12:07.757000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@\u0026836981603216654336\u003e \u003c@\u0026688090867927482525\u003e \u003c@\u0026688101493978562687\u003e \u003c@\u0026652918665943056397\u003e",
        "created_at": "2022-05-26T14:14:15.259000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "Testing",
        "parent": "",
        "content": "avail",
        "created_at": "2022-05-26T14:48:09.536000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "Do clients still have ttd-override flags? Prysm removed them due to spec: https://github.com/ethereum/consensus-specs/pull/2741",
        "created_at": "2022-05-26T16:28:18.818000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "I agree with 2021 version of Micah Zoltu.  üòÑ  \u003chttps://github.com/ethereum/consensus-specs/pull/2741#pullrequestreview-816019005\u003e",
        "created_at": "2022-05-26T16:29:26.448000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "wasn't that the terminal block hash flag?",
        "created_at": "2022-05-26T16:31:02.145000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "oh no",
        "created_at": "2022-05-26T16:31:17.969000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "it was both",
        "created_at": "2022-05-26T16:31:19.414000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "we've been overriding ttd for ~every shadow fork, no?",
        "created_at": "2022-05-26T16:31:29.300000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2022-05-26T16:32:32.256000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I've been running overriding TTD + updating configs each time, so never noticed that prysm was missing the flag.",
        "created_at": "2022-05-26T16:37:19.356000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "I'll be happy to add those flags back in Prysm, but do want a üëç  from the spec authors",
        "created_at": "2022-05-26T16:42:43.219000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@425572898787426305\u003e u up üôÇ ?",
        "created_at": "2022-05-26T16:42:58.810000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "I think my point in the comments stands, and I *believe* in out-of-band discussions it was agreed that was reasonable.",
        "created_at": "2022-05-26T16:43:23.745000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "It just seems like we failed on the latter part (encouraging clients to leave the feature in).",
        "created_at": "2022-05-26T16:43:33.433000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Testing",
        "parent": "",
        "content": "It **should not** be in the spec though because it isn't part of consensus, and the spec should focus purely on consensus matters.",
        "created_at": "2022-05-26T16:43:51.652000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I think the spec doesn't mention this flag and the PR says explicitly that is optional so there shouldn't be any issue releasing this again",
        "created_at": "2022-05-26T16:47:14.141000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Tell that to the API writers :)",
        "created_at": "2022-05-26T16:47:41.774000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "I do agree with this, perhaps I took that PR too literally. I will add the flags back",
        "created_at": "2022-05-26T16:48:48.287000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Testing",
        "parent": "",
        "content": "If client teams want to keep a node with the bad TTD and update it after it's hit, it would be useful for testing/debugging purposes",
        "created_at": "2022-05-26T17:34:39.470000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "I have a geth/teku pair I can keep around if needed.",
        "created_at": "2022-05-26T23:06:56.974000+00:00",
        "attachments": null
    }
]