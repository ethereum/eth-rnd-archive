[
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "We've been checking missing slots on devnet-12 and have observed missing slots between prysm\u003c\u003enethermind and geth\u003c\u003eprysm pairs. Upon reviewing logs for Nethermind\u003c\u003ePrysm, it appears that Nethermind did not receive payload attributes from Prysm.\n\nRegarding geth, there may be a misconfiguration issue, as there are missing slots with lodestar, prysm, and teku.  https://dora.dencun-devnet-12.ethpandaops.io/slots/filtered?f=\u0026f.pname=geth\u0026f.missing=2\u0026f.orphaned=1\u0026c=50\"",
        "created_at": "2024-01-15T15:11:29.795000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "looking into geth",
        "created_at": "2024-01-15T15:13:08.391000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "^ lodestar geth had an unclean update/shutdown and left stale .lock files. cleaning up and restarting it.\n\nunsure why teku-geth has its geth node repairing head state. could also be an unsafe shutdown, will need to ask barnabas",
        "created_at": "2024-01-15T15:14:13.471000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "do you have some logs from before the shutdown?",
        "created_at": "2024-01-15T15:21:48.677000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "node was OOM killed, so guess it isnt geth's fault. I have the logs if its still interesting to you üòÑ",
        "created_at": "2024-01-15T15:36:54.984000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yep please",
        "created_at": "2024-01-15T15:41:42.977000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "just the last 400 lines or so",
        "created_at": "2024-01-15T15:41:55.007000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2024-01-15T15:45:10.915000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "65b54cbbaddfd4166b3220171169f96182d79f0488d71556c3f227b1b3e8120f-json.log",
                "content": "938e268c5668ee6a9f75cf9ee3f2c283047b322771ff0632e36ab7b8b2cff40f"
            }
        ]
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Not seeing anything suspicious on the geth side",
        "created_at": "2024-01-15T15:48:22.037000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yeah i don't think it was anything special, these are 8GB ram nodes and its likely happened organically",
        "created_at": "2024-01-15T15:49:31.599000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e I think there's something wrong with the explorer... \nPrysm proposed this block:\n```\ntime=\"2024-01-15 18:49:00\" level=info msg=\"Submitted new block\" blockRoot=0x502d79713117 fork=deneb gasUtilized=0 graffiti=\"prysm-nethermind-1üêº\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\" numAttestations=1 numDeposits=0 parentHash=0x7634a36a3351 payloadHash=0x237db6bd8be0 prefix=validator pubKey=0xab6107985573 slot=340145 txCount=0 withdrawalCount=16\n```\nhere it says the proposer is Prysm/Erigon: https://dora.dencun-devnet-12.ethpandaops.io/slot/340145",
        "created_at": "2024-01-15T20:25:13.206000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "I'm not convinced these are actually prysm-nethermind because from the logs, prysm nethermind validators have not emitted an error: https://dora.dencun-devnet-12.ethpandaops.io/slots/filtered?f=\u0026f.pname=nethermind\u0026f.missing=2\u0026f.orphaned=1\u0026c=50",
        "created_at": "2024-01-15T20:26:37.652000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@412614104222531604\u003e , was there a key shuffle and dora not updated?\n\nsorry we'll look into the key mapping and what's tagged on dora",
        "created_at": "2024-01-15T20:33:38.467000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "we labelled some keys wrong, sorry about that - seems to just affect the keys we brought up post genesis (so prysm)! looking into it and fixing the labels, unsure how that happened",
        "created_at": "2024-01-15T21:05:26.775000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I ran a couple of chaos experiments today with potentially interesting results. The experiment adds a network latency of 500ms (with 20ms jitter) to all in/out traffic going to a certain specified CL (500ms delay is in the realm of possibility for real world latency). \n\nThe network consists of 3 EL/CLs, 1xlh-geth, 1xteku-nethermind, 1xprysm-geth (using goerli releases) (for starters). The first run just adds the latency to lighthouse nodes, second run just to teku nodes and third to just prysm nodes. The latency addition doesn't start until epoch ~5 (i.e, enough time for a stable, finalized network) and the delay is applied for 15m. \n\nIn the lighthouse and prysm targetted runs, the validator proposals were mostly deemed as missed according to the network. In the teku run, even though the same latency was applied the network didn't miss any proposals (as if no latency was applied, but it clearly was as i saw late block messages in the logs)(also ran the test twice to confirm). \n\nIs it just due to the fc implimentations of the various client pairs? I'd have assumed a 500ms delay is too small to cause a big issue. I was imagining that i'd just see more late proposals. \n\nThe logs of each run is attached as a zip file. I guess the overarching question is why aren't prysm/lh able to handle the network delays? The followup would be: Is this sort of test useful? What parameters would be of more interest? Should I spin up more mainnet-like client distributions and round robin the node who gets latency applies?",
        "created_at": "2024-01-15T21:19:01.841000+00:00",
        "attachments": [
            {
                "type": "application/zip",
                "origin_name": "teku-2-500ms-delay.zip",
                "content": "5048bddc035b7bb20dcf1365ab76dae5d0b0078bf3f532f2332732c19a2dc3ac"
            },
            {
                "type": "application/zip",
                "origin_name": "lighthouse-500ms-delay.zip",
                "content": "4670f8ad2bc6db500519f4c7418684185508efc3c646ace5c4e3fd6a5d81fec4"
            },
            {
                "type": "application/zip",
                "origin_name": "prysm-500ms-delay.zip",
                "content": "fee9888410b03956a9a039f90467fa1f1ae9079131efd376d4b0d9da568e9c79"
            }
        ]
    }
]