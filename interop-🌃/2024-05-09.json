[
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "This happens after Electra fork:\n\n```\n09 May 06:01:43 | Produced block 31 (0xb25b46...d46b98), diff: 0, tx count: 0 \n09 May 06:01:43 | Improved post-merge block 31 (0xb25b46...d46b98), diff: 0, tx count: 0 \n09 May 06:01:45 | The payload is not supported by the current fork \n09 May 06:01:45 | Error when handling Id:0, engine_getPayloadV4([\"0xd7145ca738078201\"]) | {\n  \"jsonrpc\": \"2.0\",\n  \"error\": {\n    \"code\": -38005,\n    \"message\": \"unsupported fork\"\n  },\n  \"id\": 0\n} \n```",
        "created_at": "2024-05-09T06:05:30.632000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "even if one specifies `pragueTime` appropriately?",
        "created_at": "2024-05-09T06:10:37.982000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "How can I do this in Kurtosis config?",
        "created_at": "2024-05-09T06:18:09.810000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "I don't know",
        "created_at": "2024-05-09T06:18:27.450000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@412614104222531604\u003e \u003c@199561711278227457\u003e",
        "created_at": "2024-05-09T06:18:54.048000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "nethermind has custom config which we havenâ€™t updated yet",
        "created_at": "2024-05-09T06:19:49.451000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "give me a few mins",
        "created_at": "2024-05-09T06:20:15.410000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@758579010027782144\u003e can you confirm if you need all these in chainspec?\n\neip2537TransitionTimestamp\neip2935TransitionTimestamp\neip3074TransitionTimestamp\neip6110TransitionTimestamp\neip7002TransitionTimestamp\n~~eip7685TransitionTimestamp~~",
        "created_at": "2024-05-09T06:31:45.989000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/NethermindEth/nethermind/pull/7000 looks like all but one of them is confirmed.",
        "created_at": "2024-05-09T06:36:09.565000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "eip7685TransitionTimestamp is not needed, it is mixed with 7002 and 6110",
        "created_at": "2024-05-09T08:25:31.660000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Trying latest master, but we get very weird issue:\n\n```\n[2024-05-09T11:01:10.049+00:00] [DEBUG] [web3::transports::http] [id:0] sending request: \"{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"method\\\":\\\"engine_newPayloadV4\\\",\\\"params\\\":[{\\\"parentHash\\\":\\\"0x6f17d00113138e7e44d0803c0efc75d96269b29cf39ac01842dcaec8c903b34a\\\",\\\"feeRecipient\\\":\\\"0x8943545177806ed17b9f23f0a21ee5948ecaa776\\\",\\\"stateRoot\\\":\\\"0x22a6fc5347c3676825d9dfa5f4ce677561858248f77e15c99304f9ba5ae89a22\\\",\\\"receiptsRoot\\\":\\\"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421\\\",\\\"logsBloom\\\":\\\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\\\",\\\"prevRandao\\\":\\\"0x288f714c652986d9f152cf42df054f0f4340050994992f1fa4be27ad2655e37b\\\",\\\"blockNumber\\\":\\\"0x20\\\",\\\"gasLimit\\\":\\\"0x17d7840\\\",\\\"gasUsed\\\":\\\"0x0\\\",\\\"timestamp\\\":\\\"0x663cacf6\\\",\\\"extraData\\\":\\\"0x\\\",\\\"baseFeePerGas\\\":\\\"0xd4b481\\\",\\\"blockHash\\\":\\\"0x056299813be91fb1908e322f6fa92f188a9377799d2ee4635e3fcb989a35afdf\\\",\\\"transactions\\\":[],\\\"withdrawals\\\":[],\\\"blobGasUsed\\\":\\\"0x0\\\",\\\"excessBlobGas\\\":\\\"0x0\\\",\\\"depositRequests\\\":[],\\\"withdrawalRequests\\\":[]},[],\\\"0x1e5326936cf79a9e397f976d4d64f7cd66991c5b7d74d026433a3ee43a92e50b\\\"],\\\"id\\\":0}\"\n```",
        "created_at": "2024-05-09T11:06:51.746000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "```[2024-05-09T11:01:10.050+00:00] [INFO] [fork_choice_store::store] imported 0/0 blobs for beacon block: 0xf511d7ab5fa42a9dbb76e1b3c219e49dbfa8080a435283b70fcfa5ecae60d39e, slot: 32\n[2024-05-09T11:01:10.050+00:00] [INFO] [fork_choice_control::mutator] unloading old beacon states (head slot: 32)\n[2024-05-09T11:01:10.081+00:00] [DEBUG] [web3::transports::http] [id:0] received response: \"{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"id\\\":0,\\\"result\\\":{\\\"status\\\":\\\"INVALID\\\",\\\"latestValidHash\\\":\\\"0x6f17d00113138e7e44d0803c0efc75d96269b29cf39ac01842dcaec8c903b34a\\\",\\\"validationError\\\":\\\"Error verifying block while running: error: invalid block stateroot, got: 0xfa75b166a13acf3b9d42ee65a70513b4008d483d8bc8a1b252b08b2c817bfc88, want: 0x22a6fc5347c3676825d9dfa5f4ce677561858248f77e15c99304f9ba5ae89a22 (vm hf=prague -\u003e block number=32 hash=0x056299813be91fb1908e322f6fa92f188a9377799d2ee4635e3fcb989a35afdf hf=prague basefeepergas=13939841 txs=0 uncles=0)\\\"}}\"\n```",
        "created_at": "2024-05-09T11:06:59.068000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "so we send \\\"stateRoot\\\":\\\"0x22a6fc5347c3676825d9dfa5f4ce677561858248f77e15c99304f9ba5ae89a22\\\" to EthereumJS, however it falsely claims that we sent some other state root \\\"Error verifying block while running: error: invalid block stateroot, got: 0xfa75b166a13acf3b9d42ee65a70513b4008d483d8bc8a1b252b08b2c817bfc88, want: 0x22a6fc5347c3676825d9dfa5f4ce677561858248f77e15c99304f9ba5ae89a22",
        "created_at": "2024-05-09T11:07:55.481000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "good thing is that it happens only with block number=32",
        "created_at": "2024-05-09T11:18:40.339000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e no hope for Electra explorer?",
        "created_at": "2024-05-09T11:28:56.921000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its still wip",
        "created_at": "2024-05-09T11:49:20.931000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@808969530608451584\u003e is working on it",
        "created_at": "2024-05-09T11:49:31.432000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "do we have a known working EL yet?",
        "created_at": "2024-05-09T11:50:49.460000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "after \u003c@777935002263617576\u003e 's valiant testing efforts",
        "created_at": "2024-05-09T11:51:06.464000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "EthereumJS looks most promising right now. It returns INVALID on the first  Electra payload, but later returns VALID.",
        "created_at": "2024-05-09T12:08:53.884000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Heya, I am scrolling through this channel to figure out how to set this up but I cannot seem to find it. Do you have any PR / instructions how to run?",
        "created_at": "2024-05-09T12:09:04.055000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "(e.g. the network config ðŸ™‚ )",
        "created_at": "2024-05-09T12:10:39.539000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "So you need to wait a bit until the latest Electra Grandine image appears https://hub.docker.com/r/ethpandaops/grandine/tags",
        "created_at": "2024-05-09T12:12:45.772000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Use this Kurtosis config:\n```\nparticipants:\n  - el_type: ethereumjs\n    el_image: ethpandaops/ethereumjs:master-0e06ddf\n    cl_type: grandine\n    cl_image: \u003cgrandine_electra_image\u003e\n    count: 3\nnetwork_params:\n  electra_fork_epoch: 1\nadditional_services: []\nsnooper_enabled: true\n```",
        "created_at": "2024-05-09T12:13:42.974000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Where is the parentBlockBeaconRoot?",
        "created_at": "2024-05-09T12:14:54.277000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Wait, nvm, it's in there",
        "created_at": "2024-05-09T12:15:23.430000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "note that this happens only on the first block of Electra",
        "created_at": "2024-05-09T12:16:30.488000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "it must be related to 2935 ?",
        "created_at": "2024-05-09T14:04:50.970000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Latest kurtosis main branch now has the new nethermind fix in. So the nethermind image should be working",
        "created_at": "2024-05-09T14:10:51.181000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "`nethermindeth/nethermind:pectra` image ?",
        "created_at": "2024-05-09T14:14:21.121000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "yes, let me know how it works for you",
        "created_at": "2024-05-09T14:19:06.331000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "It's finalising https://twitter.com/grandineio/status/1788585257576350019 ðŸŽ‰",
        "created_at": "2024-05-09T15:02:59.246000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "who even needs an interop event?",
        "created_at": "2024-05-09T15:04:00.620000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "We pass 2935 transition tests though",
        "created_at": "2024-05-09T15:11:36.025000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "But this would be my hunch as well",
        "created_at": "2024-05-09T15:11:40.333000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "what's the problem with dora? \nworks fine for me with nethermind-grandine on electra ðŸ™‚",
        "created_at": "2024-05-09T16:30:41.017000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Grandine \u003c\u003e Nethermind Kurtosis config:\n```\nparticipants:\n  - el_type: nethermind\n    el_image: nethermindeth/nethermind:pectra\n    cl_type: grandine\n    cl_image: ethpandaops/grandine:feature-electra\n    count: 3\nnetwork_params:\n  electra_fork_epoch: 1\nadditional_services: [dora]\nsnooper_enabled: true\n```\n\nI highly recommend trying Kurtosis for folks that never used it before. It's so easy to test your client against other clients. Great work \u003c@412614104222531604\u003e \u003c@199561711278227457\u003e \u003c@808969530608451584\u003e !",
        "created_at": "2024-05-09T16:36:13.086000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "nvm I found the bug",
        "created_at": "2024-05-09T16:36:34.171000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "sending the fix",
        "created_at": "2024-05-09T16:36:38.834000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "add \"dora\" to additional_services to get a working explorer on top ðŸ™‚",
        "created_at": "2024-05-09T16:37:12.577000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "can't get working on my machine ðŸ™‚",
        "created_at": "2024-05-09T16:43:10.646000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "da505bd2713d07e98665dbd585e9f743c6ee62f873dfae087f90977cd01bb7f5"
            }
        ]
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "or these errors oesn't matter?",
        "created_at": "2024-05-09T16:43:56.651000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "yea keep running it ðŸ˜„   it's a bit spammy in the logs, but still works ðŸ™‚",
        "created_at": "2024-05-09T16:46:37.020000+00:00",
        "attachments": null
    },
    {
        "author": "pk910",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2024-05-09T16:47:36.157000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "b7195a01581cf39e63d9f1d5a4a047bb773f21e60927fc2a7da89f8a5dc3830b"
            }
        ]
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "participation rates are even better than mainnet ðŸ˜„",
        "created_at": "2024-05-09T16:48:20.368000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@777935002263617576\u003e can you throw in ethereumjs now ` ethpandaops/ethereumjs:master-3dd3bec` should hopefully work now",
        "created_at": "2024-05-09T17:17:54.005000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "lodestar has one pending issue related to attestations else it could also join (although there could be consensus issues there which we are trying to fix by getting spec tests pass)",
        "created_at": "2024-05-09T17:19:09.765000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "nethermind ethereumjs seems to agreeing for now (i don't think tx spammer has requests realted txs in it right now, but there is still 2935 being written to state, so thats good)\ncc \u003c@758579010027782144\u003e \u003c@777935002263617576\u003e",
        "created_at": "2024-05-09T19:12:15.265000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "eef0d858-7c84-48df-99d5-91568442a10f.png",
                "content": "21c11ebac2ebd7d02d4f36f011b0633a13f16d50b71513d31e0de04397144272"
            }
        ]
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "tried lodestar with grandine despite its attesation production issue, but it doesn't seem to be agreeing with grandine stateroot, so we focusing on passing the spec test now \u003c@777935002263617576\u003e grandine passes the new spec tests?",
        "created_at": "2024-05-09T19:13:49.243000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Grandine passes everything except these:\n```\nfailures:\n    spec_tests::electra_initialization_consensus_spec_tests_tests_minimal_electra_genesis_initialization_pyspec_tests_initialize_beacon_state_from_eth1\n    spec_tests::electra_initialization_consensus_spec_tests_tests_minimal_electra_genesis_initialization_pyspec_tests_initialize_beacon_state_one_topup_activation\n    spec_tests::electra_initialization_consensus_spec_tests_tests_minimal_electra_genesis_initialization_pyspec_tests_initialize_beacon_state_random_invalid_genesis\n    spec_tests::electra_initialization_consensus_spec_tests_tests_minimal_electra_genesis_initialization_pyspec_tests_initialize_beacon_state_random_valid_genesis\n    spec_tests::electra_initialization_consensus_spec_tests_tests_minimal_electra_genesis_initialization_pyspec_tests_initialize_beacon_state_some_small_balances\n    spec_tests::electra_initialization_consensus_spec_tests_tests_minimal_electra_genesis_initialization_pyspec_tests_initialize_post_transition\n    spec_tests::electra_initialization_consensus_spec_tests_tests_minimal_electra_genesis_initialization_pyspec_tests_initialize_pre_transition_empty_payload\n```",
        "created_at": "2024-05-09T20:12:07.997000+00:00",
        "attachments": null
    },
    {
        "author": "jameshe5018",
        "category": "Testing",
        "parent": "",
        "content": "am I reading this correctly? for EIP6110\n```\ndef apply_deposit(state: BeaconState,\n                  pubkey: BLSPubkey,\n                  withdrawal_credentials: Bytes32,\n                  amount: uint64,\n                  signature: BLSSignature) -\u003e None:\n    validator_pubkeys = [v.pubkey for v in state.validators]\n    if pubkey not in validator_pubkeys:\n        # Verify the deposit signature (proof of possession) which is not checked by the deposit contract\n        if is_valid_deposit_signature(pubkey, withdrawal_credentials, amount, signature):\n            add_validator_to_registry(state, pubkey, withdrawal_credentials, amount)\n    else:\n        # Increase balance by deposit amount\n        index = ValidatorIndex(validator_pubkeys.index(pubkey))\n        state.pending_balance_deposits.append(\n            PendingBalanceDeposit(index=index, amount=amount)\n        )  # [Modified in Electra:EIP-7251]\n        # Check if valid deposit switch to compounding credentials\n        if (\n            is_compounding_withdrawal_credential(withdrawal_credentials)\n            and has_eth1_withdrawal_credential(state.validators[index])\n            and is_valid_deposit_signature(pubkey, withdrawal_credentials, amount, signature)\n        ):\n            switch_to_compounding_validator(state, index)\n```\nWe want to append and update this state\n`state.pending_balance_deposits.append(\n            PendingBalanceDeposit(index=index, amount=amount)\n        )  # [Modified in Electra:EIP-7251]`\n\nbefore we verify if the deposit signature is valid? \n        # Check if valid deposit switch to compounding credentials\n        if (\n            is_compounding_withdrawal_credential(withdrawal_credentials)\n            and has_eth1_withdrawal_credential(state.validators[index])\n            and is_valid_deposit_signature(pubkey, withdrawal_credentials, amount, signature)\n        ):",
        "created_at": "2024-05-09T21:17:53.838000+00:00",
        "attachments": null
    }
]