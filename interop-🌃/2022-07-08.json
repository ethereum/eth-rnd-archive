[
    {
        "author": "dapplion",
        "category": "Testing",
        "parent": "",
        "content": "Opened PR to continue discussion there https://github.com/ethereum/execution-apis/pull/256",
        "created_at": "2022-07-08T08:28:58.015000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "hmm, I wonder why Teku consistently loses peers when it waits for EL syncing",
        "created_at": "2022-07-08T10:48:01.487000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "```\n2022-07-08 10:47:48.392 INFO  - Syncing     *** Target slot: 279539, Head slot: 279519, Waiting for execution layer sync, Connected peers: 6\n```\n\nand it goes down and down. but when EL is back online, it gets new peers",
        "created_at": "2022-07-08T10:49:21.609000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "when we are in optimistic sync an our current head is close to target slot (ie our current head is behind by no more than 500 slots) we continue gossiping blocks (we unsubscribe from other topics) even optimistic blocks. This should not cause us to be downscored. \nAre you testing on ropsten?",
        "created_at": "2022-07-08T14:20:03.354000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "Yep",
        "created_at": "2022-07-08T14:20:26.623000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "Going to try to replicate",
        "created_at": "2022-07-08T14:21:11.719000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "There is also some miscommunication between Erigon 2022.07.02 and the latest Teku when both are waiting for each other for long time. I am collecting logs atm",
        "created_at": "2022-07-08T14:22:34.089000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "yes please share it, because we recently added the \"fcu resend\" behaviour",
        "created_at": "2022-07-08T14:23:42.129000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "Is it in the latest release or should I check with some devel build?",
        "created_at": "2022-07-08T14:24:52.768000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "btw is this happening only with teku?",
        "created_at": "2022-07-08T14:24:56.550000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "So far â€” yes, but Teku is on the majority of our ropsten validators. We are working on diversity now but itâ€™s summer holidays",
        "created_at": "2022-07-08T14:26:34.344000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "nope, you should use latest develop. official 22.6.1 do not include it.",
        "created_at": "2022-07-08T14:28:37.670000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "so if you're using latest official release, try latest develop first",
        "created_at": "2022-07-08T14:29:23.079000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "Okay, I will try latest develop",
        "created_at": "2022-07-08T14:29:36.717000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "since it isn't immediate to replicate it, can you share the whole console output around that time? so I can see the sequence of events",
        "created_at": "2022-07-08T14:33:32.605000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "By any chance you have a Docker image for it?",
        "created_at": "2022-07-08T14:37:36.236000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "docker pull consensys/teku:develop",
        "created_at": "2022-07-08T14:38:17.630000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "do you know btw, why it takes so long to find any peers, even with bootnodes provided?",
        "created_at": "2022-07-08T15:16:47.309000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "in ropsten was taking a bit longer yes, but do you opened TCP\\UDP 9000 ?",
        "created_at": "2022-07-08T15:23:09.417000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "being reachable from other nodes helps a lot",
        "created_at": "2022-07-08T15:23:49.397000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, but it shouldn't be 0 peers, right? even with the port closed",
        "created_at": "2022-07-08T15:24:29.699000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "it has been 0 for 26 minutes already",
        "created_at": "2022-07-08T15:26:21.188000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "well this is strange",
        "created_at": "2022-07-08T15:26:44.063000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, I assume it is related to my setup, but if there are any logs I can add?",
        "created_at": "2022-07-08T15:27:44.778000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "meybe you are forked off?",
        "created_at": "2022-07-08T15:27:54.695000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "try to resync",
        "created_at": "2022-07-08T15:28:10.991000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "just to check",
        "created_at": "2022-07-08T15:28:24.040000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "any way I can give you block number/hash?",
        "created_at": "2022-07-08T15:28:49.614000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "the current one?",
        "created_at": "2022-07-08T15:28:52.969000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "can I get the latest synced block from Teku?",
        "created_at": "2022-07-08T15:32:07.450000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "slot/epoch/hash",
        "created_at": "2022-07-08T15:32:13.991000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "`--initial-state=http://other-node:port/eth/v2/debug/beacon/states/finalized` would work to quickly sync from another node. \n\nRecent slot/hash can be found here: https://ropsten.beaconcha.in/",
        "created_at": "2022-07-08T15:36:15.185000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, I wanted to compare",
        "created_at": "2022-07-08T15:37:57.055000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "resyncing from scratch i found 1 peer in 40s without opened ports",
        "created_at": "2022-07-08T15:37:58.337000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "in case it forked",
        "created_at": "2022-07-08T15:38:03.983000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "at least in Eth1 world I would just do `eth_getBlockByNumber(\"latest\")` and check etherscan ðŸ™‚",
        "created_at": "2022-07-08T15:38:32.239000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "so I wanted to know a similar procedure but with beacon api",
        "created_at": "2022-07-08T15:38:53.018000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "not only for this case, it could be useful in general",
        "created_at": "2022-07-08T15:39:29.719000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "curl -X GET \"http://localhost:5051/eth/v1/beacon/states/finalized/root\" -H  \"accept: application/json\"",
        "created_at": "2022-07-08T15:39:50.479000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "thanks! that is exactly what I need",
        "created_at": "2022-07-08T15:39:59.489000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "it gives you latest finalized state",
        "created_at": "2022-07-08T15:40:32.716000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "root",
        "created_at": "2022-07-08T15:40:34.970000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ahhh, sorry I didnt get what you meant earlier ðŸ˜„\n\nThere's really nice API docs in case you want to know the other queries as well: https://ethereum.github.io/beacon-APIs/",
        "created_at": "2022-07-08T15:40:59.463000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "okay, and then I need to search for this root on beaconcha.in ?",
        "created_at": "2022-07-08T15:41:29.380000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "like here? https://beaconcha.in/epoch/131433",
        "created_at": "2022-07-08T15:41:35.933000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "if doesnt match use this method ðŸ™‚",
        "created_at": "2022-07-08T15:41:38.818000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "this is mainnet ðŸ™‚",
        "created_at": "2022-07-08T15:41:59.291000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Wrong link, that's for mainnet ðŸ˜„",
        "created_at": "2022-07-08T15:42:00.549000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "okay, here ðŸ™‚ https://ropsten.beaconcha.in/epoch/8781",
        "created_at": "2022-07-08T15:42:31.788000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "I need more coffee",
        "created_at": "2022-07-08T15:42:34.360000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Ran this on my node for you to compare easily ðŸ™‚\n```\ncurl -X GET \"http://localhost:4000/eth/v1/beacon/states/280977/root\" -H  \"accept: application/json\"\n\nOutput:\n\n{\"data\":{\"root\":\"0x9a223a709c9c6e410ea395b1000e30cf6c72ab8091b68b9f22e08a859781c248\"}}\n\n```",
        "created_at": "2022-07-08T15:43:20.473000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "mine is here: https://ropsten.beaconcha.in/block/0x5bed06b3227de3207ea51f2287a645086b1fa6cc8e822925b4471b2390c5453b",
        "created_at": "2022-07-08T15:43:38.772000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "stuck so far",
        "created_at": "2022-07-08T15:44:06.354000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "To replicate in the future, you'd have just chosen a random slot like I did (280977 for e.g) and then enter that in your query. \n\nThen compare the output by searching for that slot on the beaconchain explorer: https://ropsten.beaconcha.in/block/280977\n\nCompare the `state root` field",
        "created_at": "2022-07-08T15:44:26.904000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "ah, gotcha",
        "created_at": "2022-07-08T15:45:00.634000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "let me try",
        "created_at": "2022-07-08T15:45:02.178000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Doesn't mean its stuck , its just `finalized` at that block. `finalized` is a tricky keyword to try to compare data since it depends on when you query information. \n\nThat's why I set an explicit slot number, since that cannot change.",
        "created_at": "2022-07-08T15:45:34.732000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "for 280977 it matches your data",
        "created_at": "2022-07-08T15:45:56.132000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "```\ncurl -X GET \"http://localhost:5051/eth/v1/beacon/states/280977/root\" -H  \"accept: application/json\"\n{\"execution_optimistic\":false,\"data\":{\"root\":\"0x9a223a709c9c6e410ea395b1000e30cf6c72ab8091b68b9f22e08a859781c248\"}}\n```",
        "created_at": "2022-07-08T15:46:06.529000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Then you are on the correct fork ðŸ˜„",
        "created_at": "2022-07-08T15:46:06.849000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "well, that is good\nany way I can check p2p logs for peer disconnect reasons?",
        "created_at": "2022-07-08T15:46:34.232000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "You won't get the reason (unless teku has a magic debug endpoint they've hidden), buuut you can query `/eth/v1/node/peers` to see what peers you are connected to.",
        "created_at": "2022-07-08T15:48:00.443000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "```\n{\"data\":[{\"peer_id\":\"16Uiu2HAmDNMcpDrFft2waFc95xzQdHNyCp6GmXu4QfZgmAxyfMyv\",\"last_seen_p2p_address\":\"/ip4/194.195.214.157/tcp/9000\",\"state\":\"connected\",\"direction\":\"outbound\"}],\"meta\":{\"count\":1}}\n```",
        "created_at": "2022-07-08T15:49:39.184000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "lonely ðŸ˜¦",
        "created_at": "2022-07-08T15:49:43.074000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@504202741933932544\u003e did you node you sync from scratch connected to more peers?",
        "created_at": "2022-07-08T15:50:42.161000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "you might be downscored from other peers",
        "created_at": "2022-07-08T15:51:28.121000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "because of closed ports?",
        "created_at": "2022-07-08T15:52:16.679000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "no, not because of that",
        "created_at": "2022-07-08T15:53:53.213000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "try to wipe db and restart..",
        "created_at": "2022-07-08T15:54:56.352000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "if you get more peers than use the --initial-state to sync from a recent state so you dont need to wait a full resync",
        "created_at": "2022-07-08T15:55:37.932000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "gotcha, where I can read about downscoring btw? I was oblivious about that before today, and I feel it could be important moving forward",
        "created_at": "2022-07-08T15:56:39.832000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "started from scratch, two peers already, less than 1 minute in",
        "created_at": "2022-07-08T16:00:52.362000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "let me try with `--initial-state`",
        "created_at": "2022-07-08T16:01:36.200000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "seems to see 2 peers immediately",
        "created_at": "2022-07-08T16:10:22.489000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "if you wipe the db you get a new peer id, a new identity ðŸ™‚",
        "created_at": "2022-07-08T16:19:50.226000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "can I just wipe out the identity? ðŸ™‚",
        "created_at": "2022-07-08T16:20:14.326000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "at least in Teku",
        "created_at": "2022-07-08T16:20:19.508000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "I think it is because we snapshotted the db and used it for 5 nodes",
        "created_at": "2022-07-08T16:26:04.355000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "okay, now this Teku node with Erigon always falls into\n```\n2022-07-08 16:25:48.921 WARN  - Unable to execute the current chain head block payload because the Execution Client is syncing. Activating optimistic sync of the beacon chain node\n```\n\nwhich is back to square 1",
        "created_at": "2022-07-08T16:26:44.216000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "so you returned \"syncing\"",
        "created_at": "2022-07-08T16:29:20.060000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "I mean, erigon",
        "created_at": "2022-07-08T16:29:27.197000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, but I don't see where Teku retries\nif we return SYNCING for some hash, when should CL re-ask?",
        "created_at": "2022-07-08T16:32:36.122000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "(maybe with another hash or something)",
        "created_at": "2022-07-08T16:32:46.657000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "I don't see a request, say, for the next slot...",
        "created_at": "2022-07-08T16:33:04.478000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "I will try to collect more logs",
        "created_at": "2022-07-08T16:33:11.199000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "you sould see FcUs",
        "created_at": "2022-07-08T16:33:34.903000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "right?",
        "created_at": "2022-07-08T16:33:53.558000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "for each slot event?",
        "created_at": "2022-07-08T16:34:02.106000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "oh, it might be that there are often tiny forks in Ropsten",
        "created_at": "2022-07-08T16:35:38.719000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "the change was to guarantee a call at least every 30 seconds but it is checked onSlot, so you might get it 12*3  at 36s",
        "created_at": "2022-07-08T16:35:41.769000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "but if teku state is progressing you sould see it every slot",
        "created_at": "2022-07-08T16:36:11.688000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "because on develop branch I see unwinds in Erigon\n```\n[INFO] [07-08|16:34:15.647] [1/16 Headers] Unsettled forkchoice after unwind height=12552184 forkchoice=\"\u0026{HeadBlockHash:0xc51c79480fdd2ee11e98738ad61d7c86140bacce5cfc3e81015abad28dc8c4b1 SafeBlockHash:0x95151216e366a1c1d3f48dc88631c4df37005d3e2a2c642f9e6737da2964bb36 FinalizedBlockHash:0x0b082d1acd0105dd61b7e4d7444382e16fb5009630f1e5a7261757cc09183519}\"\n```",
        "created_at": "2022-07-08T16:36:32.515000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "it looks like at that time it could be legit syncing",
        "created_at": "2022-07-08T16:36:50.746000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "you see other FcU now right?",
        "created_at": "2022-07-08T16:37:50.544000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, it seems so, the logging is a bit excessive in Erigon, I need to upgrade version",
        "created_at": "2022-07-08T16:38:19.809000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "that's a good news... we should avoid to stall now (hopefully) ðŸ™‚",
        "created_at": "2022-07-08T16:38:57.368000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, so I guess mystery solved (at least for today)",
        "created_at": "2022-07-08T16:39:18.320000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "lol",
        "created_at": "2022-07-08T16:39:23.816000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "thanks so much for the assistance ðŸ™‚ and have a great weekend!",
        "created_at": "2022-07-08T16:41:08.093000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "you too!",
        "created_at": "2022-07-08T16:47:24.566000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "final question -- if I snapshot the database, can I just remove the peer info (e.g. Erigon has a separate DB for peer info) to seed a new node? or state inheritance is the way",
        "created_at": "2022-07-08T16:59:48.376000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "TBH i haven't tried.  I peer info and other things are stored in kvstore. if you wipe that dir a new peer id is generated and you continue using your existing db",
        "created_at": "2022-07-08T17:10:21.037000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "generated-node-key.dat\nlocal-enr-seqno.dat\n\nare the two file.\nBut this is a hack, don't know if there are some side effects somewhere",
        "created_at": "2022-07-08T17:11:37.990000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "gotcha, thanks!",
        "created_at": "2022-07-08T17:14:11.239000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "that makes it kinda difficult for typical devops operations",
        "created_at": "2022-07-08T17:16:12.990000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "for stuff like autoscaling nodes for example",
        "created_at": "2022-07-08T17:16:31.049000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "well, you spin up and let the new node sync with --initial-state",
        "created_at": "2022-07-08T17:16:58.385000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "you get it up in sync in few minutes, cleanly",
        "created_at": "2022-07-08T17:17:19.370000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, I am talking more like automation",
        "created_at": "2022-07-08T17:17:34.077000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "e.g. I run RPC service and I need to spin extra 50 nodes quickly",
        "created_at": "2022-07-08T17:17:47.051000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "won't this just DoS the \"seed\" node?",
        "created_at": "2022-07-08T17:17:55.674000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "with eth1, we just distribute snapshots and let them catch on",
        "created_at": "2022-07-08T17:18:16.881000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "since post-merge beacon nodes will be needed for RPCs at scale, 50 extra nodes is a very mild example ðŸ™‚",
        "created_at": "2022-07-08T17:20:19.793000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "does Teku support checkpoint sync from a file?",
        "created_at": "2022-07-08T17:20:50.358000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "like Nimbus?",
        "created_at": "2022-07-08T17:20:55.475000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "yes you can point to a local file with --initial-state",
        "created_at": "2022-07-08T17:21:38.461000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "ah, then it is not a problem",
        "created_at": "2022-07-08T17:21:47.905000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "we just snapshot this file instead",
        "created_at": "2022-07-08T17:21:55.403000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "yes.. but you loose old blocks (which will be backfilled in BG) and the deposit data that needs to be downloaded again from the eth1 node.",
        "created_at": "2022-07-08T17:23:05.550000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "yeah, but that is not too bad\nas long as we can get the node operation in ~30 minutes",
        "created_at": "2022-07-08T17:23:33.052000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "not for validation, for RPC stuff",
        "created_at": "2022-07-08T17:23:47.865000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "if you just need a quick node up ok, but if you want a node immediately ready for publishing blocks and serving full rest apis, than haveing a full DB is needed",
        "created_at": "2022-07-08T17:24:22.688000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "rpc stuff on current state, yes, it is enough",
        "created_at": "2022-07-08T17:24:47.515000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "no, for new validators, at least I pre-seed nodes, so they don't need to be scaled as rapidly as for RPC",
        "created_at": "2022-07-08T17:28:37.982000+00:00",
        "attachments": null
    }
]