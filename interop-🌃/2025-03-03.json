[
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@491624610215886849\u003e \u003c@602753420033785856\u003e \nAny new LH version for Holesky? I just restarted my syncing Beacon node and after 1h it consumes 160GB RAM of 256 machine ðŸ˜„ so hard to do barely anything for now",
        "created_at": "2025-03-03T10:21:59.333000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "oh wow, are you on a recent commit from `holesky-rescue`? we pushed some more improvements today but tbh we are still not happy with it. shouldnâ€™t get to 160GB though, thatâ€™s wild",
        "created_at": "2025-03-03T10:44:02.057000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "we were still planning to test a bit more before a release or docker build",
        "created_at": "2025-03-03T10:44:56.326000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "DO you have latest docker tag for that one?",
        "created_at": "2025-03-03T10:47:49.013000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "I can check",
        "created_at": "2025-03-03T10:47:50.535000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "Basically every single node with LH died over a weekend so that's why nethermind is not proposing blocks for now",
        "created_at": "2025-03-03T10:48:07.138000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "no",
        "created_at": "2025-03-03T11:21:27.977000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "not yet",
        "created_at": "2025-03-03T11:21:33.077000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "are you running the next most recent? `sigmaprime/lighthouse:sigp-holesky-rescue-73b7cad`?",
        "created_at": "2025-03-03T11:23:00.776000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "I see I'm using different one so let me switch",
        "created_at": "2025-03-03T11:27:00.926000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "Worth noting - other node LH is using 75% of all mem on machine but it keeps on going",
        "created_at": "2025-03-03T11:27:20.609000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "The one with 160GB usage keeps on throwing this:\nqueue: status, queue_len: 1024, msg: the system has insufficient resources for load, service: bproc",
        "created_at": "2025-03-03T11:27:39.109000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "Restarted on new image now and LH probably will burn my setup shortly ðŸ˜„ \nIt uses 16 threads fully now ðŸ˜„ And keeps growing. Memory after few minutes is already 20GB",
        "created_at": "2025-03-03T11:32:40.913000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2025-03-03T11:32:58.610000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "24363032ea0c712d3fe6cfc661fe587ecb7b432a8cc22546d632744d1c96d1f4"
            }
        ]
    },
    {
        "author": "zhongfu",
        "category": "Testing",
        "parent": "",
        "content": "Grandine mem util%",
        "created_at": "2025-03-03T12:33:57.800000+00:00",
        "attachments": null
    },
    {
        "author": "tbenr",
        "category": "Testing",
        "parent": "",
        "content": "it appears that we are overflowing `uint64` on node weights on our fork choice in holesky. Do other clients see that too?",
        "created_at": "2025-03-03T13:23:46.172000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "it appears that we are overflowing",
        "created_at": "2025-03-03T14:02:06.999000+00:00",
        "attachments": null
    },
    {
        "author": "_shemnon",
        "category": "Testing",
        "parent": "",
        "content": "Testing call is very holesky focused, so I'll skip the EOF update this week.",
        "created_at": "2025-03-03T14:30:42.685000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Cross posting the graphs about inactivity leak penalties. (Initially posted in the zoom chat of Pectra Interop Testing Call).\n\nhttps://docs.google.com/spreadsheets/d/1nndNt-XC4JzqsjmCRuiXBGCGMFomCHx_e_DZzFqvhGM/edit?usp=sharing",
        "created_at": "2025-03-03T14:58:30.656000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2025-03-03T14:58:42.154000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "006b0c833bff042aa5f1416049ff9abfe2b440afc51999209d0bc974365b4b5a"
            }
        ]
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2025-03-03T14:58:49.694000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "8b6e6c94323866547df3d1424d0ab22b1f331d62babb787c8173a738fb686dfe"
            }
        ]
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Of course, the leak for a given validator stops as soon as it leaves the exit queue.\n(And **not** as soon as its effective balance reaches 16 ETH).\nSo, if the exit queue is very long, it is totally possible for the balance of an ejected validator to be lower than 16 ETH when it leaves the exit queue.",
        "created_at": "2025-03-03T15:01:20.312000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "How much is it going to take to exit say 100k validators then?",
        "created_at": "2025-03-03T15:09:47.553000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "Napkin math-wise it sounds like the answer is forever",
        "created_at": "2025-03-03T15:10:04.474000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "I calculate 27 days after they reach 16 ETHs en masse",
        "created_at": "2025-03-03T15:11:10.112000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "realistically you actually need to eject 6x that amount so the queue might be clogged for half a year",
        "created_at": "2025-03-03T15:17:25.941000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "wait a sec, this also applies to slashings and voluntary exits, correct?",
        "created_at": "2025-03-03T15:20:37.468000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "What we do really want, to resume finality, is that the sum of the effectively online validators stake (on the valid branch) represent at least 2/3 of the total stake.\n\nTo achieve that, the stake of the offline validators has to decrease.\n\nIt can be done:\n1. Thanks to inactivity leak (see graphs above),\n2. Thanks to forcefully exited validators because their effective balance reached 16 ETH. (Reminder: When the effective balance of a validator reaches 16 ETH,  is enters in the exit queue. The stake of a validator in the exit queue is still taken into account in the total stake until the validator **leaves** the exit queue. And leaving the exit queue could take weeks or months.) Also, inactivity leak continues to apply to validators in the exit queue.\n3. Thanks to slashing: When a validator is slashed, there is a very tiny initial penalty immediately. Then, after **18 days**, there is a correlation penalty. If \u003e 1/3 of validators (by stake) are slashed during the past 36 days, then all 32 ETH of the validators are wiped by the correlation penalty. If, after the correlation penalty, there is still some ETH in the validators (for example, because not enough validators were slashed in the 36 days period), then the exit queue still applies. (Aka. slashing a validator is not a fast pass of the exit queue.)\n\nThe \"no fast pass\" is implemented thanks to the `max` function in `validator.withdrawable_epoch = max(...)` [here](https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#slash_validator).",
        "created_at": "2025-03-03T15:36:21.693000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "ok sure but then we are going to be waiting \u003e6 months for this to happen (whatever approach we pick), and we need a working testnet for fusaka (validator testing wise)",
        "created_at": "2025-03-03T15:40:36.166000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "also just tangentially, I feel like it is going to be a lot of work to support a chain that cannot finalize. that effort is probably better spent elsewhere",
        "created_at": "2025-03-03T15:42:19.712000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "It should not take 6 months, more likely \u003c6 weeks.\n\nBut we should consider if there is enough balance left in holesky afterwards to be able to make it similar to the mainnet in terms of ETH staked, or if we want to start a new testnet chain.",
        "created_at": "2025-03-03T15:45:39.220000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "The exit queue is 10 validators",
        "created_at": "2025-03-03T15:45:55.586000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Validators that are exiting are still going to leak, though.",
        "created_at": "2025-03-03T15:47:10.627000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "Yes, but they are still active",
        "created_at": "2025-03-03T15:47:28.390000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "It does not matter if they leak or not. If they are active, they are still counted",
        "created_at": "2025-03-03T15:47:58.926000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "If they continue to leak their effective balance will drop to 0 after around 6 weeks, I think.",
        "created_at": "2025-03-03T15:48:57.899000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "You are not exiting all the validators at once after 30 days",
        "created_at": "2025-03-03T15:48:58.892000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "It does not matter. They are still active",
        "created_at": "2025-03-03T15:49:10.735000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "Mmmh oh wait but then they are effectivelly not counted",
        "created_at": "2025-03-03T15:49:46.596000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "Yeah okay I see",
        "created_at": "2025-03-03T15:49:51.162000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "6 weeks is still too much of a pain tho imo",
        "created_at": "2025-03-03T15:50:41.594000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "We are doing a shadowfork of holesky for pools to test on. Already working on that, will share more details later",
        "created_at": "2025-03-03T15:50:56.460000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "oh so we are basically re-doing holesky and using that?\n\nam I understanding correctly?",
        "created_at": "2025-03-03T15:52:30.116000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "A fully offline validator during inactivity leak, starting at 32 ETH of balance, gets an effective balance of 0 ETH after 52 days (7.5 weeks)",
        "created_at": "2025-03-03T15:52:44.216000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "We have not decided if this is going to replace the broken Holesky in the end, but it will be used in the short term to test. again sharing more details soon, working on something more important rn",
        "created_at": "2025-03-03T15:54:16.799000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "I think we want 3 to happen as soon as possible. It's the most powerful tool in our arsenal, so it's important to slash all the slashable validators closer together to maximize the correlation penalty. The question is whether we can reach finality after 3 is completed for most validators or if we still need help with 1",
        "created_at": "2025-03-03T16:09:56.460000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Some additional figures:\n\n- The fork happened 7 days ago (2025-02-24). Always offline validators already lost ~2ETH.\n- If we operate mass slashing now (2025-03-03), the correlation penalty will hit in 18 days, so 25 days after the fork (2025-03-21).\n- 25 days after the fork (2025-03-21), the inactivity leak by itself will represent about 19 ETH for always offline validators. (So, 13 ETH will remain in the effective balance for always offline validators 25 days after the fork).\n- Because of inactivity leak only, always offline validators will reach an effective balance of 28 ETH 8 days after the fork (2025-03-04... tomorrow or maybe Wednesday). At this date, the exit queue will start to be filled by forcefully exited validators. On holesky, [ejection balance is 28 ETH](https://github.com/eth-clients/holesky/blob/main/metadata/config.yaml#L65), **not** 16 ETH. At this date, a maximum of 256 ETH per epoch will leave the exit queue reducing the total stake by a maximum of 57,600 ETH/day (+ the leak ongoing for validators in the exit queue).",
        "created_at": "2025-03-03T16:25:52.519000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Shouldn't we finalize after correlation penalty hit? What is the `get_total_active_balance` today vs. `get_total_active_balance` after that event",
        "created_at": "2025-03-03T16:32:20.800000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "According to: https://dora-holesky.pk910.de/\n- At [epoch 115968](https://dora-holesky.pk910.de/epoch/115968) (Pectra fork): 56,766,401 ETH\n- Now ([epoch 117496](https://dora-holesky.pk910.de/epoch/117496)): 54,333,297 ETH",
        "created_at": "2025-03-03T17:02:10.926000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Do we know how many validators did **not** cast a source FFG vote on the invalid chain?\nIt would really help to compute how many ETH should be removed from the total stake in order to reach finality again.",
        "created_at": "2025-03-03T17:09:21.078000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "I meant after the correlation penalty event. Example: 2025-03-21\nWorking on some napkin math to see whether we have enough for 2/3",
        "created_at": "2025-03-03T17:14:40.140000+00:00",
        "attachments": null
    }
]