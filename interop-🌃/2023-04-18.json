[
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e would it be difficult for geth to switch `payloadId` computation from hashing to a sequence and deep equality of payload attributes for deduplication? I.e. when new attributes are passed the handler checks if such attributes already exists and returns existing ID if they do, and if not creates a new build process with `payloadId` obtained from a sequence or a random oracle.",
        "created_at": "2023-04-18T10:07:26.934000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Curious what the advantage would be? Not for/against a change, and it's up to Geth, obviously, either way, but I'm not sure I understand the motivation.\n\nEarly on, and one can see this if one looks at some of the engine API examples from a couple interop events ago, ELs usually did use approximately sequential payload IDs, and have shifted away from them.",
        "created_at": "2023-04-18T10:09:37.290000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "The motivation is to make payload ID collision resistance. Although, the probability of a clash is quite low `1/(2**32)` assuming a strong hashing algorithm. But if there is a clash it may result in a missed proposal.",
        "created_at": "2023-04-18T10:28:04.169000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "A slot proposal missed on a 2^-32 chance seems like brain masturbation \u003c@425572898787426305\u003e.",
        "created_at": "2023-04-18T10:38:23.805000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Testing",
        "parent": "",
        "content": "To quantify a little further, a 6 percent change of at least one missed block proposal in 100 years.",
        "created_at": "2023-04-18T11:02:31.243000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Is that assuming a single validator running on the node or all validators running on the same node? The collision only matter if it happens on the same node at approximately the same time.",
        "created_at": "2023-04-18T11:04:30.579000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Testing",
        "parent": "",
        "content": "This was just `(1 - 1/2^32)^(100 * 365 * 225 * 32)`",
        "created_at": "2023-04-18T11:05:17.158000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Testing",
        "parent": "",
        "content": "If you have more details about chances per slot (I assumed just 1/2**32), feel free to update ðŸ˜‰",
        "created_at": "2023-04-18T11:06:01.451000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Where do the 100 and 225 numbers come from in that?",
        "created_at": "2023-04-18T11:06:27.692000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Oh 225 epochs per day?  I think thatâ€™s if youâ€™re running every validator on the same node then.",
        "created_at": "2023-04-18T11:07:37.632000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "well, so a worst case then",
        "created_at": "2023-04-18T11:07:51.924000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Frankly Iâ€™d consider it a best case if I get to own every validator. ðŸ˜„",
        "created_at": "2023-04-18T11:08:23.758000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "But I suspect its only clashes from two different calls to fCU with different payload attributes in the same or maybe adjacent slots that would matter. The payload Id would be forgotten once the block is served.",
        "created_at": "2023-04-18T11:09:43.573000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Exactly, this only matters on late blocks and on reorgs afaik",
        "created_at": "2023-04-18T11:26:19.365000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "And on locally constructed ones ðŸ™‚",
        "created_at": "2023-04-18T11:26:59.726000+00:00",
        "attachments": null
    }
]