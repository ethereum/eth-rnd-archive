[
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "good call thx üôÇ fixed now",
        "created_at": "2023-08-01T00:07:01.637000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Got a panic \n```\nERROR[08-01|01:46:26.029] RPC method engine_forkchoiceUpdatedV1 crashed: runtime error: invalid memory address or nil pointer dereference\ngoroutine 9373 [running]:\ngithub.com/ethereum/go-ethereum/rpc.(*callback).call.func1()\n        external/com_github_ethereum_go_ethereum/rpc/service.go:199 +0x74\npanic({0x101ed4e00, 0x102de5880})\n        GOROOT/src/runtime/panic.go:884 +0x204\ngithub.com/ethereum/go-ethereum/miner.(*BuildPayloadArgs).Id(0x14002553280)\n        external/com_github_ethereum_go_ethereum/miner/payload_building.go:56 +0x120\ngithub.com/ethereum/go-ethereum/eth/catalyst.(*ConsensusAPI).forkchoiceUpdated(0x140000ca0a0, {{0x42, 0x43, 0x71, 0xb5, 0x5f, 0xe7, 0x88, 0xe0, 0xd2, ...}, ...}, ...)\n        external/com_github_ethereum_go_ethereum/eth/catalyst/api.go:370 +0x166c\ngithub.com/ethereum/go-ethereum/eth/catalyst.(*ConsensusAPI).ForkchoiceUpdatedV1(0x140000ca0a0?, {{0x42, 0x43, 0x71, 0xb5, 0x5f, 0xe7, 0x88, 0xe0, 0xd2, ...}, ...}, ...)\n        external/com_github_ethereum_go_ethereum/eth/catalyst/api.go:178 +0x28c\n```\n\nFor using `engine_forkchoiceUpdatedV1` at Bellatrix, nothing should change. I did not set `BeaconRoot` to anything. Geth panics because it's expecting a pointer `*common.Hash`",
        "created_at": "2023-08-01T02:14:02.377000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "In preparation for the Holesky testnet which would have ~1.5M validators, we ran a testnet with a larger state to ensure we can even pull it off. \n\nBigboi-beaconchain-1 was a testnet with **2.1M** validators(~3x mainnet), 420 nodes and 5k keys/node. Unfortunately it failed and it is probably due to us underprovisioning it. We had 4c/16GB RAM machines and a lot of duties weren't able to be done on time. We're going to relaunch with far more powerful nodes since its a smaller and centralized network. \n\nHowever we did catalog some logs here: https://notes.ethereum.org/_6Vfd3loS6yUkymtnNoGqw\nreports 2-\u003e5 can easily be explained as due to resource exhaustion and we will validate it in the next run. \n\n**1.** is from \u003c@\u0026836981489430036500\u003e and it throws an `IndexOutOfBoundsException` which is concerning. This happens when the teku validators try to get the validator duties for the epoch and due to the errors subsequently fail to attest to anything. Link to full logs on teku nodes can be found here: https://drive.google.com/drive/folders/1hh2pWZ1US-1jIRcM7drn-Acak6f0hH31?usp=sharing\n\nWe're already resizing the nodes(it takes hours), so we'd really appreciate it if someone from teku could have a look at it as soon as possible üòÑ",
        "created_at": "2023-08-01T09:49:01.644000+00:00",
        "attachments": null
    },
    {
        "author": "mehdi.aouadi",
        "category": "Testing",
        "parent": "",
        "content": "We're looking into it, thanks",
        "created_at": "2023-08-01T10:06:48.433000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Taking a moment, what do you think about us making a test with 1k nodes on Holesky to check how the protocol handles big number of nodes and validators? If we agree do make such testing should it be done at the beginning or it won't matter?",
        "created_at": "2023-08-01T13:03:08.344000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "In non-public testnets, We're happy to split the keys in whatever order is most useful. We just chose this as it was a tradeoff between cost of running such a test, key limits we've observed on clients and time to spin things up. For reference, it takes ~8h to spin up a testnet with 400 nodes, presumibly it scales mostly linearly. \n\nFor Holesky, EF would just run a small fraction of the nodes, so it'd be hard to co-ordinate that we'd get ~1k nodes on the network. We can definitely ask everyone taking part to use as many nodes as possible for a few days/weeks to test it out and to consolidate later on if they wish to",
        "created_at": "2023-08-01T13:38:13.330000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Got it, running a short-lived testnet for this purpose looks easier",
        "created_at": "2023-08-01T13:41:21.595000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "The number of nodes seems picked correctly üôÇ Are there configs published?",
        "created_at": "2023-08-01T13:57:39.242000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yea! üòÑ\nhttps://github.com/ethpandaops/holesky-test/tree/bigboi-genesis\ngenesis.ssz: https://2m-val-test.fra1.cdn.digitaloceanspaces.com/genesis.ssz (its too big for github, so we hid it behind a CDN)",
        "created_at": "2023-08-01T14:25:10.132000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I am running the engine-blobs tests and I think I have a classic (TM) problem with importing genesis.\n\nFor this test: `engine-blobs/Blob Transactions On Block 1, Cancun Genesis` the genesis block has no field defined for `parentBeaconBlockRoot`. If we import this in JS, we default it to 32 0-bytes. However, this produces the wrong hash. What is expected (by hive), is that for the genesis block `parentBeaconBlockRoot` is undefined (it is not part of the hash). However, this would violate the 4788 spec, since this field should be defined on Cancun. I would argue to stub this in Genesis with 32 0-bytes?",
        "created_at": "2023-08-01T15:09:03.731000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "It should have the hash in the test, what error are you getting? it could be that the hash we are incorrectly calculating because when we do `eth_getBlockByNumber(0)` we get the parent beacon root with a different name?",
        "created_at": "2023-08-01T15:27:46.423000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "The hash should  be: `86ffe7b53d9ccc976455aea6a571f54ca4c1caf88bd5f8360ea1d5731e4fda5d`. We get a different hash however. If I remove the `parentBeaconBlockRoot` field from the hash, I get the correct hash",
        "created_at": "2023-08-01T15:28:32.137000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "(correct hash = hash which is reported by hive)",
        "created_at": "2023-08-01T15:28:50.102000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "We get a different hash because we insert the `parentBeaconBlockRoot` into the header, which is now 32 bytes. Per 4788 this field should be in the header. However if we hash this \"new\" field we thus get a diffent hash than the `latestHeaderHash` which hive wants us to FCU to üôÇ",
        "created_at": "2023-08-01T15:30:57.080000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Yes I understand, could you send me the simulator log to get a better idea of what could be happening?",
        "created_at": "2023-08-01T15:33:07.228000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Yes I will do üôÇ",
        "created_at": "2023-08-01T15:34:44.383000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "We get this hash; `0x77b8ea087b24e678fdf4cd53a3888abddca32d57579fab4384c1b23476020a39`",
        "created_at": "2023-08-01T15:34:52.088000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2023-08-01T15:47:00.904000+00:00",
        "attachments": [
            {
                "type": "application/x-tar",
                "origin_name": "file.tar.gz",
                "content": "7dd077a726b74068f382643ee8556da30bd108a33ad84b4fca555e2827e3705f"
            }
        ]
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "This might be obvious (but it is not in the spec): forkchoiceUpdateV3 **MUST** be called after Cancun, right? I cannot use V1 or V2",
        "created_at": "2023-08-01T16:33:06.779000+00:00",
        "attachments": null
    },
    {
        "author": "holgerd77",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@508125616940515329\u003e \u003c@892053833121923094\u003e I would say this is a general small gap in the specs - just had a look at https://eips.ethereum.org/EIPS/eip-4788 - and there is just nothing stated how/if to populate the `parentBeaconBlockRoot` header field + take in for the block hash in the case that there is no parent beacon root existing (as for this genesis case).\n\n\u003c@539495253418180618\u003e would it make sense to extend the spec here directly? I think it would make sense to stub this with 32 zero bytes in this case?",
        "created_at": "2023-08-01T16:51:01.095000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "Yup I agree",
        "created_at": "2023-08-01T16:52:03.935000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Sorry I didn't bring this up, yes I assumed the 32 zero bytes but did not raise it, it would be nice to have it specified üëç",
        "created_at": "2023-08-01T16:53:00.739000+00:00",
        "attachments": null
    },
    {
        "author": "holgerd77",
        "category": "Testing",
        "parent": "",
        "content": "First suggestion would be to append the following sentence at the end of the \"Block structure and validty\" section (within https://eips.ethereum.org/EIPS/eip-4788):\n\n\u003e For a genesis block with no existing parent beacon block root the 32 zero bytes are used as a root placeholder.\n\n(first though about putting after the \"This root consumes 32 bytes and is exactly the hash tree root of the parent beacon block for the given execution block.\" sentence, but this might be too prominent for this very edge case)\n\nWDYT?",
        "created_at": "2023-08-01T17:10:22.828000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Testing",
        "parent": "",
        "content": "I think it is indeed only for the genesis block, so the early option sounds great to me üòÑ",
        "created_at": "2023-08-01T17:31:20.340000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "+1 for 32 zero bytes as placeholder for genesis",
        "created_at": "2023-08-01T17:32:09.233000+00:00",
        "attachments": null
    },
    {
        "author": "holgerd77",
        "category": "Testing",
        "parent": "",
        "content": "Ok, will open a quick PR on the EIPs repo",
        "created_at": "2023-08-01T17:34:42.196000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "it may not be clear from the EL spec alone but the CL spec would send over 0x0",
        "created_at": "2023-08-01T17:48:12.595000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "ah but i guess the EL makes its own genesis block",
        "created_at": "2023-08-01T17:48:36.911000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "sure i can go update the eip with a comment",
        "created_at": "2023-08-01T17:48:49.381000+00:00",
        "attachments": null
    },
    {
        "author": "holgerd77",
        "category": "Testing",
        "parent": "",
        "content": "Have just opened https://github.com/ethereum/EIPs/pull/7445, feel free to use or just discard and do your own update, whatever fits best.",
        "created_at": "2023-08-01T17:51:47.661000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Testing",
        "parent": "",
        "content": "Hey all, https://hivecancun.ethdevops.io/ has been re-deployed with all changes for devnet-8, using the branches listed here for execution clients:\nhttps://github.com/marioevz/hive/blob/cancun-dn8-4844-4788/configs/cancun.yaml\n\nIf anyone needs to update any of these branches please just let me know!\n\nThe tests might be re-filled and re-deployed if https://github.com/ethereum/EIPs/pull/7431 is agreed for inclusion in devnet-8 so please let me know whether we should do this.",
        "created_at": "2023-08-01T21:10:31.643000+00:00",
        "attachments": null
    },
    {
        "author": "dmitriishmatko",
        "category": "Testing",
        "parent": "",
        "content": "We've fixed Teku bug with overflow when calculating validator duties, latest develop should run without issue. Docker is here https://hub.docker.com/layers/consensys/teku/develop/images/sha256-59f63a0a46461226214617b7c8100f8c69791b6e94c330a87cc3118be8474830?context=explore",
        "created_at": "2023-08-01T21:34:24.917000+00:00",
        "attachments": null
    }
]