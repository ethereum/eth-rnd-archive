[
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@554799849288105986\u003e \u003c@491624610215886849\u003e \u003c@602753420033785856\u003e We have noticed some issues with LH API for `/eth/v2/beacon/blocks/32` which seems to return the following error (for slots before capella is hit, the API call is fine, only slot 32 and after which is epoch 1 capella trigger): ```json\n{\"code\":500,\"message\":\"UNHANDLED_ERROR: InconsistentPayloadReconstructed { slot: Slot(32), exec_block_hash: 0x6eca272973df0766145c8995866061b61ca30f81034a7abfb883617e66f22561, canonical_payload_root: 0xc388abb102003c358742e783a533a0c8f5fd4d9faa01f920f2c3f9f058a631a1, reconstructed_payload_root: 0xcf9a86af6b6d46a931ed05d6bca2888c89ebfa8291794c4f2561a5ca606f70c2, canonical_transactions_root: 0x7ffe241ea60187fdb0187bfa22de35d1f9bed7ab061d9401fd47e34a54fbede1, reconstructed_transactions_root: 0x7ffe241ea60187fdb0187bfa22de35d1f9bed7ab061d9401fd47e34a54fbede1 }\n``` expected value to return is produced by lodestar (and prysm, teku also produces a non error state): ```json\n{\"data\":{\"message\":{\"slot\":\"32\",\"proposer_index\":\"222\",\"parent_root\":\"0x35961fc2534dbe208ae225be4e4826931c67bbcb8cd7f906a21515116b52c420\",\"state_root\":\"0x220c13c7d169d2441baae4926a59f78408b14aacf24f21300723126f78887dda\",\"body\":{\"randao_reveal\":\"0x994c7f63db6bd42a077a2beb9f39a51a8a03f5a1222ae750c5e5fb26a0f780ed77caeab21203cf1a95656b8b827048ba035d20b00872434a828caf{\"deposit_root\":\"0xd70a234731285c6804c2a4f56711ddb8c82c99740f207854891028af34e27e5e\",\"deposit_count\":\"0\",\"block_hash\":\"0x6edb7e70991960d7ded8973e1a6fa943a5e20abe18c692092ff45b11df3d95b5\"},\"graffiti\":\"0x6c6f6465737461722d6765746800000000000000000000000000000000000000\",\"propose[{\"aggregation_bits\":\"0xfeffffffffffffff0f\",\"data\":]}},\"signature\":\"0xac81020f7b9329e5d7348a070361142e73abafd8e3f0cb1a05a38318bd328f2f5c80cdfaec3cb29b4696ad738db352c21530e4f842498b08ed1a5c8267c5950b0d3b443a611278afd1faecc684e48f1f74e6cdca1c76cf706c91ca1e12ee1a47\"},\"version\":\"capella\",\"execution_optimistic\":false}\n```",
        "created_at": "2022-12-13T15:14:21.711000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "omitted some lines from the lodestar output",
        "created_at": "2022-12-13T15:14:41.969000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Code used: capella-b6486e8",
        "created_at": "2022-12-13T15:54:19.815000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Currently building newest capella image, and gonna check with that if the issue persists.",
        "created_at": "2022-12-13T15:54:39.878000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "capella-173a0ab still broken",
        "created_at": "2022-12-13T15:56:44.218000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Testing",
        "parent": "",
        "content": "on it",
        "created_at": "2022-12-13T16:24:29.927000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "where can I find the latest withdrawals testnet?",
        "created_at": "2022-12-13T18:31:07.012000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethpandaops/withdrawals-testnet",
        "created_at": "2022-12-13T18:58:10.011000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "and bootstrap node is up?",
        "created_at": "2022-12-13T19:14:07.530000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Can use: ````\n  - \"enr:-KG4QJNJi8qEMdXvRyYgc9etVB0L-gYQ9OS4z71oPT9UbhG3VETbqcMl-1wCx65gVF6LCgZP45bz1myR0Bkp1U1oCMkDhGV0aDKQZsO-T0AAAEABAAAAAAAAAIJpZIJ2NIJpcISnRzwQiXNlY3AyNTZrMaEC-2J33WTPKobOszm-kEpNx7BaVmK-3eFULs-76HEy7eKDdGNwgiMog3VkcIIjKA\"\n  - \"enr:-Ly4QDHYej06tyy0x3oezvnHjc2nW7STubnBiDfryl-Mm4GJcLZoVf5biWF7x8j9hxN9GZFArRVHCSI8pM7FY4uSNJxXh2F0dG5ldHOIijMJQRQIQrSEZXRoMpB6izmDQAAAQP__________gmlkgnY0gmlwhKdHPBCJc2VjcDI1NmsxoQL7YnfdZM8qhs6zOb6QSk3HsFpWYr7d4VQuz7vocTLt4ohzeW5jbmV0cwuDdGNwgiMog3VkcIIjKA\"\n```",
        "created_at": "2022-12-13T19:53:33.771000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "alright, that worked better, can connect at least ðŸ˜‰ looks like the one in the repo is either down or incompatible with us",
        "created_at": "2022-12-13T20:23:25.682000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Updated",
        "created_at": "2022-12-13T20:25:32.546000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Might have restarted the bootnode accidentally and forgot to update the repo",
        "created_at": "2022-12-13T20:25:55.109000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "that was quick, thanks!",
        "created_at": "2022-12-13T20:41:01.007000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "ok, syncing ðŸ˜‰\n```\nDBG 2022-12-13 21:45:01.179+01:00 Error, while reading getBlocks response    topics=\"syncman\" request=2112:32@262 peer=16U*WBbdff direction=forward error=\"(kind: ReceivedErrorResponse, responseCode: InvalidRequest, errorMsg: \\\"Peer has been rate limited\\\")\" peer_speed=247232.0 peer_score=1000 sync_ident=main direction=forward\n```\n\nI wish clients simply slowed down the responses instead of erroring like this, it's so much nicer on the receiving side to simply get a short delay and not have to guess what the random rate limit of the other side is",
        "created_at": "2022-12-13T20:46:56.927000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Don't really wanna ping `@g11tech#6265` but did you find a way to disable the rate limiting on lodestar's side?",
        "created_at": "2022-12-13T21:03:33.965000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "you can also troubleshoot on the spot with using one of our nodes",
        "created_at": "2022-12-13T21:07:19.540000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "They should be fully sync",
        "created_at": "2022-12-13T21:07:23.220000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "and troubleshooting should be quick and easy.",
        "created_at": "2022-12-13T21:07:42.465000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "so this is a message some client is send my node, that I'm requesting things too fast - the most simple algorithm for dealing with that is a token bucket in which the server \"trickles\" responses at the desired rate - it's nice because it's cheap for everyone invovled: no complex rate limit negotiations, no guessing, it just works and rate limits are guaranteed to be correct and adhered to - an error is a waste every time because it effectively causes a round of reconnects and everyone loses, including the server (that has to spend resources on setting up the new connection)",
        "created_at": "2022-12-13T21:11:10.881000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "ie it's not a bug really - just needlessly inefficient, so there's nothing to troubleshoot ðŸ˜‰",
        "created_at": "2022-12-13T21:19:54.625000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "on \"normal\" networks we don't see it because block processing times are higher",
        "created_at": "2022-12-13T21:20:22.780000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, Im aware its a feature not a bug, but would be nice to disable this rate limiting \"feature\" from lodestar,",
        "created_at": "2022-12-13T21:21:20.462000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "looks like the files in the `custom_config_data` still need updating btw",
        "created_at": "2022-12-13T21:23:16.926000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "which file you mean?",
        "created_at": "2022-12-13T21:23:43.568000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "`bootstrap_nodes.txt `",
        "created_at": "2022-12-13T21:24:05.351000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "are those files used by LH ?",
        "created_at": "2022-12-13T21:24:30.070000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "nimbus uses them",
        "created_at": "2022-12-13T21:24:49.171000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ah ok, we haven't onboarded nimbus yet.",
        "created_at": "2022-12-13T21:25:04.765000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Will take a look how to update them dynamically",
        "created_at": "2022-12-13T21:25:11.180000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "when you pass `--network=path/custom_config_data`, nimbus reads bootstrap, genesis and so on from the directory",
        "created_at": "2022-12-13T21:25:23.212000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "We wanna have a larger withdrawals testnet + small shanghai eips out soon-ish. We're trying to pin down requirements to join the testnets. Do CL teams want the below engine API changes implimented for this testnet or it is better to launch without it? \nhttps://github.com/ethereum/execution-apis/pull/146\nhttps://github.com/ethereum/execution-apis/pull/218",
        "created_at": "2022-12-13T22:29:01.972000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I think we're OK without, we haven't implemented either yet in our `capella` branch",
        "created_at": "2022-12-13T22:39:04.682000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Teku doesn't use either currently.",
        "created_at": "2022-12-13T22:41:04.946000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Besu is starting to look, but without would be better",
        "created_at": "2022-12-13T23:51:16.404000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "For genesis json parity...are people going with \n1. `shanghaiBlock`\n2. `shanghaiTime`\n3. `shanghaiTimestamp`\n4. Something else?",
        "created_at": "2022-12-13T23:55:47.037000+00:00",
        "attachments": null
    }
]