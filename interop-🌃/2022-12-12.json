[
    {
        "author": "samcm",
        "category": "Testing",
        "parent": "",
        "content": "Noticed that Lighthouse is returning `validator_index` and `amount` in the withdrawals object as ints rather than strings when encoded as json in the current withdrawals devnet (running commit `b6486e8` from the `capella` branch)\n\ne.g.\n```\ncurl -s localhost:4001/eth/v2/beacon/blocks/head | jq '.data.message.body.execution_payload.withdrawals[0]'\n{\n  \"index\": \"269659\",\n  \"validator_index\": 596,\n  \"address\": \"0x388ea662ef2c223ec0b047d41bf3c0f362142ad5\",\n  \"amount\": 1180241\n}\n```",
        "created_at": "2022-12-12T00:28:56.411000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "thanks! this is a serialisation issue on our side, will fix it up ASAP",
        "created_at": "2022-12-12T00:30:15.036000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "what is the expected behaviour if majority of sync committee members withdraw+exit at the same time?  And should be penalized for missing their duties but their balance has been withdrawn to the EL address already? do we need majority of 512 validators to be able to have an \"operational\" sync committee?",
        "created_at": "2022-12-12T08:24:04.467000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "In `process_light_client_update` \u003chttps://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/sync-protocol.md#process_light_client_update\u003e a light client will check a 2/3 majority to update its state.",
        "created_at": "2022-12-12T09:59:48.070000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "so if any large group of validators would want to act malicious and would have control over 338 sync committee members, they could break all lightclients?",
        "created_at": "2022-12-12T10:03:10.514000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "they're chosen randomly so in theory, this is vanishingly unlikely unless they also have (338/512)*100% of validators overall. of course there's noise there, but that's the basis for LC security at all",
        "created_at": "2022-12-12T10:05:18.617000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "there are other attack vectors, e.g., waiting until a committee shows up then basically bribing them -- it's why the sync committee shouldn't be trusted with securing more than ~32 * 512 = 16384 ETH, at most, and in practice quite a bit less",
        "created_at": "2022-12-12T10:07:28.831000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Even if someone holds 338/512 of the network and they withraw all their validators, I think the chances of this happening is zero: you can only withdraw a validator in the next sync committee, not the current one, and the churn will prevent you to sincronize all of them",
        "created_at": "2022-12-12T10:09:23.288000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "sure, there are other constraints such as the ones you list",
        "created_at": "2022-12-12T10:09:57.973000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "so for \u003c@755590043632140352\u003e 's reasons too, it shouldn't be feasible",
        "created_at": "2022-12-12T10:10:14.681000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "In theory it would still be possible, as you know one sync committee in advance that you would be the upcoming one",
        "created_at": "2022-12-12T10:11:33.601000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "This statement is true regardless of withdrawals. If any group gets control of 2/3 of the committee, they can sign any hash they want",
        "created_at": "2022-12-12T10:11:37.910000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Then if you know that, then you can trigger the exit, and the churn for 350 validators only takes 50 epochs",
        "created_at": "2022-12-12T10:11:54.182000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I agree",
        "created_at": "2022-12-12T10:12:07.106000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Testing",
        "parent": "",
        "content": "Hey EL folks, is there an official specification on what should be returned from `eth_getBlockByHash` after Shanghai when there are no withdrawals in a block?",
        "created_at": "2022-12-12T18:27:31.252000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Testing",
        "parent": "",
        "content": "I would like to differentiate between pre and post Shanghai blocks by looking at the `withdrawals` field",
        "created_at": "2022-12-12T18:28:09.526000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Testing",
        "parent": "",
        "content": "Hoping for an empty list in a post-Shanghai block ðŸ™‚",
        "created_at": "2022-12-12T18:28:45.699000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "that sounds reasonable to me",
        "created_at": "2022-12-12T18:29:27.634000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "we would basically want to update this: https://github.com/ethereum/execution-apis/blob/main/src/schemas/block.yaml",
        "created_at": "2022-12-12T18:30:18.071000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "although i'm not sure how to signal which fork it applies to",
        "created_at": "2022-12-12T18:30:38.518000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "probably want to do the same as `baseFeePerGas` and simply not include it in the list of \"required\" properties",
        "created_at": "2022-12-12T18:50:20.831000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Testing",
        "parent": "",
        "content": "that way, pre-shanghai blocks will return `\"withdrawals: null\"` and post-shanghai will always include `withdrawals` attribute, even if just an empty list",
        "created_at": "2022-12-12T18:50:56.166000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethereum/execution-apis/pull/334",
        "created_at": "2022-12-12T19:01:54.019000+00:00",
        "attachments": null
    }
]