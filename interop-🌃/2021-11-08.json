[
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I've spent the last couple of days thinking about consensus client optimistic sync. I've documented my thoughts here:\n\nhttps://hackmd.io/Ic7VpkY3SkKGgYLg2p9pMg\n\nThat document links to two other fairly lengthy documents. It's probably quite a lot of reading, but there's a lot to think about! I'm keen to hear other peoples thoughts.",
        "created_at": "2021-11-08T07:24:03.806000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "It should be set to `null` by the JSON renderer if the value isn't provided, shouldn't it?",
        "created_at": "2021-11-08T07:53:15.287000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "maybe we should add a block hash test case to the EIP?",
        "created_at": "2021-11-08T07:54:08.042000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "The recent change to the EIP-3675 states that `TRANSITION_POS_BLOCK` is not always a child of `TERMINAL_POW_BLOCK`, the `TRANSITION_POS_BLOCK` is the first payload sent via `executePayload`, the `TERMINAL_POW_BLOCK` is the one that has reached TTD. The changes introduced in EIP-4399 must be applied beginning with `TRANSITION_POS_BLOCK`, i.e. beginning with the first payload sent via `executePayload`",
        "created_at": "2021-11-08T08:00:25.327000+00:00",
        "attachments": null
    },
    {
        "author": "shanaq",
        "category": "Testing",
        "parent": "",
        "content": "In the new  `executePayloadV1` method there is an extra field to return the `latestValidHash`, the hash of the last valid block. Is this the block head hash in the case of an invalid payload?",
        "created_at": "2021-11-08T09:30:39.806000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "An excellent read. Thanks Paul. Based on my initial read I agree with your thoughts on the safe behaviours. Will be interesting to see if anything else pops up as we properly implement this in teku.",
        "created_at": "2021-11-08T09:30:43.502000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "If the payload is invalid it must be a hash of the most recent *valid* ancestor of the payload. And it depends on the case:\n1) If a payload is *invalid* but the parent is *valid* then `latestValidHash == parentHash`\n2) If ancestor at height `N-100`  of a payload at height `N` is *invalid* but ancestor at height `N-101` is *valid* then `latestValidHash == hash(N-101)`",
        "created_at": "2021-11-08T09:43:48.664000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Naively, if any of the ancestors of a payload or a payload itself is invalid then EL should start with the payload, go backwards, the hash of the first *valid* block in this chain will be `latestValidHash`",
        "created_at": "2021-11-08T09:49:18.077000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The problem is that we don't know it's block number beforehand. All other config options are applied based on whether the block number is higher than the blocknumber where the config option changed.\nIt's not a big deal, just something that requires a bit larger change than I first thought",
        "created_at": "2021-11-08T11:40:41.251000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Got it! Just wanted to bring clarity around relation between transition and terminal blocks as this part of the spec is tricky.",
        "created_at": "2021-11-08T11:47:14.900000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Great analysis! I've left a few comments and will do another pass on it tomorrow",
        "created_at": "2021-11-08T12:11:37.074000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "Cross-posted from \u003c#595701770034872362\u003e \n\n------------------------------\n\nKintsugi spec has been updated to `v2`\nhttp://spec.merge.wiki/\n\nThis is a breaking change to the engine API such that the call to `forkchoiceUpdated` returns the `payloadId` rather than both layers calculating it. Additionally, CL specs have a couple of very minor typing fixes and additional units tests.\n\nUnless otherwise noted, Kintsugiüçµ  `v2` will be the target for next week's devnet launch üöÄ",
        "created_at": "2021-11-08T17:47:31.892000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003ctersec\u003e \"Consensus spec tests\" link in https://hackmd.io/@n0ble/kintsugi-spec says v1.1.5 but is still to v1.1.4",
        "created_at": "2021-11-08T18:15:07.588000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdannyryan\u003e fixed, thank you!",
        "created_at": "2021-11-08T18:22:33.162000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Great write up, thanks for putting so much thoughts into it. I agree with your thoughts on the safe behaviours. Will begin implementation on this soon",
        "created_at": "2021-11-08T18:55:09.161000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "\u003e At some point fork-choice needs to just trust that the other processes in the system are reliable.\n\nI tend to agree.\n\nWe make a *strong* assumption that the single-L1 blockchain data is available on both the beacon chain and current pow network\n\nEven though we now have the CL network (blocks including payloads) and EL network (just payloads), I do think it safe to assume that EL payloads are available on the EL network.\n\nAdditionally, we currently have a stronger DA assumption (barring an EIP to change of EL historic guarantees) on EL ‚Äî that you can get EL payloads since genesis.  Whereas CL only guarantees block availability from p2p for ~5 months",
        "created_at": "2021-11-08T19:01:14.310000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": ".\nAll that said, we have been considering a single backward endpoint EL-\u003eCL to make payload requests. *By default* the p2p network should be sufficient, but adding a local endpoint as an addiitonal place to make sync requests can aid EL optionality in patching missing blocks and sync.\n\n(note though, that EL would only be able to assume 5 months of blocks in local CL endpoint due to the p2p pruning ability put into the CL p2p spec)",
        "created_at": "2021-11-08T19:01:17.700000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "And I echo \u003c@!363800010518822915\u003e. I generally agree with the strategy and trade-offs. This is how I've been seeing things as well",
        "created_at": "2021-11-08T19:13:41.397000+00:00",
        "attachments": null
    }
]