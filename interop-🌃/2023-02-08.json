[
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@892053833121923094\u003e has recently found an issue with calling `forkchoiceUpdatedV1` with Shanghai `timestamp` and geth building a Shanhai payload with empty withdrawals because of that (https://github.com/ethereum/hive/pull/706#issue-1574839378). There are two potential solutions that I can see:\n* Either the spec updates `V1` methods and states that all of them must return an error if Shanghai payload or attributes are passed onto the call.\n* Or the spec states that CL clients must use `V2` methods when they communicate Shanghai payload or attributes to EL.\n\nThe fist approach implies us always modifying `Vn-1` method versions when the HF is happening. Thus, I am inclined to the second approach. Any thoughts on that?",
        "created_at": "2023-02-08T08:23:27.153000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I have enabled ethstats on the zhejiang, so thats why some slots were missing in these last two epochs. However, I noticed that latest besu is broken ```2023-02-08 08:29:22.867+00:00 | vert.x-eventloop-thread-6 | ERROR | ExecutionEngineJsonRpcMethod | failed to exec consensus method engine_newPayloadV2\njava.lang.RuntimeException: java.lang.RuntimeException: org.hyperledger.besu.plugin.services.exception.StorageException: Unable to copy Layered Worldstate for 0xbb02b9f9b9bbc327a1c36a77d6f2a9f888c28549721df879ac1e8dc184cbaf08\n    at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:184)\n    at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.validateBlock(MergeCoordinator.java:477)\n    at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.rememberBlock(MergeCoordinator.java:491)\n    at org.hyperledger.besu.consensus.merge.blockcreation.TransitionCoordinator.rememberBlock(TransitionCoordinator.java:157)\n    at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.engine.AbstractEngineNewPayload.syncResponse(AbstractEngineNewPayload.java:235)``` \u003c@341574016160497665\u003e",
        "created_at": "2023-02-08T08:43:00.030000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "example: `zhejiang-testnet-prysm-besu-1`",
        "created_at": "2023-02-08T08:43:11.419000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "img: `hyperledger/besu:develop`",
        "created_at": "2023-02-08T08:43:39.524000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "hmmm that might need the database resyncing unfortunately :/ Think it's bonsai related rather than shanghai related",
        "created_at": "2023-02-08T08:44:29.969000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ah shit",
        "created_at": "2023-02-08T08:44:40.536000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "did it shut off the db too rapidly?",
        "created_at": "2023-02-08T08:44:47.390000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "causing it to corrupt?",
        "created_at": "2023-02-08T08:44:51.156000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "looks like it has happened in multiple instances actually",
        "created_at": "2023-02-08T08:44:59.289000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "just restarted prysm-besu-1 with fresh db.",
        "created_at": "2023-02-08T08:45:41.925000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ethstats are now available for all our nodes: https://ethstats.zhejiang.ethpandaops.io",
        "created_at": "2023-02-08T08:46:06.511000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "When did the image last get pulled?",
        "created_at": "2023-02-08T08:46:11.681000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "15 mins ago",
        "created_at": "2023-02-08T08:46:25.123000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "any idea when the last pull was before that?",
        "created_at": "2023-02-08T08:46:40.989000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "as you see on ethstats, besu ones are struggling",
        "created_at": "2023-02-08T08:46:42.309000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "`\"hyperledger/besu@sha256:ef849b10dd8823792f4a8f87cdb98599786bade1759677bda87617bbc068260e\"` \u003c- before",
        "created_at": "2023-02-08T08:47:23.047000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "`\"hyperledger/besu@sha256:58fb0161418e0a8ee1c7ad46a13527a03ec6213abd27e287ca8926cb36f3ceb7\"` \u003c- now",
        "created_at": "2023-02-08T08:47:56.862000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "don't suppose there's any way of rolling back?",
        "created_at": "2023-02-08T08:48:59.733000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I could.",
        "created_at": "2023-02-08T08:49:08.207000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "But if its bonsai related, and too quick shutdown, not sure it would help",
        "created_at": "2023-02-08T08:49:21.465000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "but I can give it a try on one other node first and see whats up",
        "created_at": "2023-02-08T08:49:34.167000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "rolling back on prysm-besu-2",
        "created_at": "2023-02-08T08:50:27.451000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "btw, prysm-besu-1 synced up in matter of seconds. Extremely fast!",
        "created_at": "2023-02-08T08:51:01.734000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "It is bonsai related, but if it happened to all nodes at the same time that seems to suggest a bug on develop.\nStruggling to map those sha's back to commits...is there any other info about when those images were pulled, even rough time would help",
        "created_at": "2023-02-08T08:53:27.125000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "looks like the rollback shows invalid block ?",
        "created_at": "2023-02-08T08:53:41.220000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "resyncing is still worth trying of course",
        "created_at": "2023-02-08T08:53:46.117000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```yload | Invalid new payload: number: 47484, hash: 0x99be4cb888a60439198aae3d6acadf0e9332b85f5fd1c4f1d516dfe3b76a4341, parentHash: 0xbb02b9f9b9bbc327a1c36a77d6f2a9f888c28549721df879ac1e8dc184cbaf08, latestValidHash: 0x0000000000000000000000000000000000000000000000000000000000000000, status: INVALID, validationError: Block already present in bad block manager.\n```",
        "created_at": "2023-02-08T08:53:49.436000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Resyncing will only obscure the root cause imo",
        "created_at": "2023-02-08T08:54:14.945000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "erm, maybe need to restart besu...if still get that then it'll have to be a resync",
        "created_at": "2023-02-08T08:54:20.590000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Mario Vega 7267 has recently found an",
        "created_at": "2023-02-08T08:54:43.028000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "restarted besu now",
        "created_at": "2023-02-08T08:54:44.637000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'd rather get zhejiang stable asap, we can investigate this issue with our own canaries, I don't think it's withdrawal-code related",
        "created_at": "2023-02-08T08:54:54.670000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Looks like erigon also struggled with the latest image, I just updated them to erigon:devel",
        "created_at": "2023-02-08T08:55:49.505000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Previously I was using `thorax/erigon:docker_shadowfork1`",
        "created_at": "2023-02-08T08:56:30.337000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "that could be a possibility, if they all restarted at the same time, that might explain the coincident errors",
        "created_at": "2023-02-08T08:56:48.972000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah besu doesn't seem to be able to sync even after the rollback",
        "created_at": "2023-02-08T08:58:40.919000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "teku-besu-1 seems ok at the moment, just needs EL, but once besu is sync'd can always bounce teku if its still unhappy",
        "created_at": "2023-02-08T08:58:51.471000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "so I'm pretty sure its a db related issue not shanghai.",
        "created_at": "2023-02-08T08:58:51.795000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "and looks like teku-erigon-1 is back into a happy state",
        "created_at": "2023-02-08T08:59:51.591000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "yeh it's usually the case that if this error happens, the db is borked",
        "created_at": "2023-02-08T09:01:04.463000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "still getting -32600 from besu, not sure if it'll come good when we sync, i guess we'll see",
        "created_at": "2023-02-08T09:01:11.247000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "`invalid request` doesnt sound great ðŸ˜„",
        "created_at": "2023-02-08T09:01:23.994000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah, gonna need to wipe besu dbs unforunately",
        "created_at": "2023-02-08T09:01:46.591000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "would be nice to see a soft shutdown when docker stop is triggered",
        "created_at": "2023-02-08T09:01:58.722000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "we're back finalizing at least",
        "created_at": "2023-02-08T09:03:03.663000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'm starting to think there's a bug on :develop, have seen this issue on some canaries that aren't using docker, even without a shutdown as well.",
        "created_at": "2023-02-08T09:03:25.770000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```                \"org.label-schema.build-date\": \"2023-02-08T06:24Z\",\n                \"org.label-schema.description\": \"Enterprise Ethereum client\",\n                \"org.label-schema.name\": \"Besu\",\n                \"org.label-schema.schema-version\": \"1.0\",\n                \"org.label-schema.url\": \"https://besu.hyperledger.org/\",\n                \"org.label-schema.vcs-ref\": \"fd906437\",\n                \"org.label-schema.vcs-url\": \"https://github.com/hyperledger/besu.git\",\n                \"org.label-schema.vendor\": \"Hyperledger\",\n                \"org.label-schema.version\": \"23.1.1-SNAPSHOT\",\n                \"org.opencontainers.image.ref.name\": \"ubuntu\",\n                \"org.opencontainers.image.version\": \"20.04\"```",
        "created_at": "2023-02-08T09:03:48.956000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "thanks, got a rough time for the pull before - was it when zhejiang was launched? That should give us a safe commit range to try rolling back to at least.",
        "created_at": "2023-02-08T09:04:58.024000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Old: ```                \"org.label-schema.build-date\": \"2023-02-03T00:37Z\",\n                \"org.label-schema.description\": \"Enterprise Ethereum client\",\n                \"org.label-schema.name\": \"Besu\",\n                \"org.label-schema.schema-version\": \"1.0\",\n                \"org.label-schema.url\": \"https://besu.hyperledger.org/\",\n                \"org.label-schema.vcs-ref\": \"e18e407c\",\n                \"org.label-schema.vcs-url\": \"https://github.com/hyperledger/besu.git\",\n                \"org.label-schema.vendor\": \"Hyperledger\",\n                \"org.label-schema.version\": \"23.1.0-SNAPSHOT\",\n                \"org.opencontainers.image.ref.name\": \"ubuntu\",\n                \"org.opencontainers.image.version\": \"20.04\"```",
        "created_at": "2023-02-08T09:05:45.877000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "However, latest image seems to be working alright after full resync.",
        "created_at": "2023-02-08T09:06:24.781000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "these have the commit hashes in, perfect!",
        "created_at": "2023-02-08T09:08:20.897000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "vcs-ref I assume?",
        "created_at": "2023-02-08T09:08:50.908000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "that was prysm that came back? Are you ok to resync all dbs then?",
        "created_at": "2023-02-08T09:11:38.848000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah sure",
        "created_at": "2023-02-08T09:12:25.873000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "if you don't wanna debug the bonsai issue I can",
        "created_at": "2023-02-08T09:12:32.724000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ðŸ˜„",
        "created_at": "2023-02-08T09:12:33.120000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Let me know if I can go ahead and wipe all thats broken.",
        "created_at": "2023-02-08T09:13:42.786000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "well it's 7:15pm for me and the experts are on holiday so not really ðŸ˜†",
        "created_at": "2023-02-08T09:14:00.846000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "zhejiang is stable now, even without all the besu nodes up.",
        "created_at": "2023-02-08T09:14:02.801000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Okay.",
        "created_at": "2023-02-08T09:14:05.857000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "also, we can investigate internally",
        "created_at": "2023-02-08T09:14:11.426000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Sure thing.",
        "created_at": "2023-02-08T09:14:15.175000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "but thanks ðŸ™‚",
        "created_at": "2023-02-08T09:14:22.659000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "need some logs ?",
        "created_at": "2023-02-08T09:14:29.195000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "can't hurt if it's not too much effort. Probably only really need a bit of context around when it first happened",
        "created_at": "2023-02-08T09:15:19.192000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Got 50MB of logs",
        "created_at": "2023-02-08T09:16:24.445000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "can't drop it here, you better off pulling it off of the node itself",
        "created_at": "2023-02-08T09:16:35.174000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "`scp devops@zhejiang-testnet-lighthouse-besu-1.ethpandaops.io:~/besubonsai.log \u003cyoutpath\u003e`",
        "created_at": "2023-02-08T09:16:43.934000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "super interestingly, nimbus-besu-1 didn't collapse",
        "created_at": "2023-02-08T09:19:10.065000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "all other ones did",
        "created_at": "2023-02-08T09:19:12.976000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "might be a concurrency issue, so certain amount of randomness...might be exacerbated by certain call patterns from CL.",
        "created_at": "2023-02-08T09:20:30.213000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "would be pretty cool if we saw besu and geth versions on forkmon too not just ethstats (that was one of the main reasons I just spun up ethstats actually)",
        "created_at": "2023-02-08T09:20:37.046000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "How do I do that?",
        "created_at": "2023-02-08T09:20:49.685000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "We use a prometheus metric for exposing the version normally",
        "created_at": "2023-02-08T09:21:20.121000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "web3_clientVersion should return it ?",
        "created_at": "2023-02-08T09:22:17.704000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "at least thats what forkmon expects",
        "created_at": "2023-02-08T09:22:24.130000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethereum/nodemonitor/blob/8d330aa38dbad24e33406662fe546edae34d825d/nodes/rpcnode.go#L40",
        "created_at": "2023-02-08T09:22:45.978000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Try appending WEB3 to the list apis for `--rpc-http-api`",
        "created_at": "2023-02-08T09:29:38.715000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "for ws too?",
        "created_at": "2023-02-08T09:30:09.980000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "can't hurt, not sure if web sockets are being used?",
        "created_at": "2023-02-08T09:30:37.069000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "not really sure its used actually",
        "created_at": "2023-02-08T09:30:54.448000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ðŸ˜„",
        "created_at": "2023-02-08T09:31:08.979000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "might as well keep the config consistent",
        "created_at": "2023-02-08T09:31:26.241000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah agreed.",
        "created_at": "2023-02-08T09:31:34.961000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ok, restarting lh/besu-2 with this new flag",
        "created_at": "2023-02-08T09:31:55.915000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "hopefully won't corrupt the db again ðŸ˜‚",
        "created_at": "2023-02-08T09:32:00.951000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "better! That was it",
        "created_at": "2023-02-08T09:32:37.169000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_2023-02-08_at_10.32.30.png",
                "content": "688884fac0dc8b7909a08be627c995794ed93d3fc7528264b98fc2199e33d8bf"
            }
        ]
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah it was the same flag missing for geth and erigon too.",
        "created_at": "2023-02-08T09:34:59.032000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "does that make me a geth dev now ;)?",
        "created_at": "2023-02-08T09:35:30.011000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "officially certified âœ… (Approved by me)",
        "created_at": "2023-02-08T09:35:46.834000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I still see a couple of red besu nodes on https://ethstats.zhejiang.ethpandaops.io/\nare they waiting for/doing resync?",
        "created_at": "2023-02-08T09:37:04.949000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ethstats is pretty bad actually, check forkmon pls",
        "created_at": "2023-02-08T09:37:20.528000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "`zhejiang-testnet-lighthouse-besu-1    besu/v23.1.1-dev-fd906437/linux-x86_64/openjdk-java-17    OK    4 minutes ago`",
        "created_at": "2023-02-08T09:37:49.365000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "^ only dodgy one left I tihnk",
        "created_at": "2023-02-08T09:38:02.657000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah, needed another wipe",
        "created_at": "2023-02-08T09:38:12.693000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "same layered world state issue?",
        "created_at": "2023-02-08T09:38:22.587000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "This bonsai stuff is pretty unstable",
        "created_at": "2023-02-08T09:38:25.691000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```  --sync-mode=FULL\n  --data-storage-format=\"BONSAI\"```",
        "created_at": "2023-02-08T09:38:55.711000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "would I be better off with something else?",
        "created_at": "2023-02-08T09:39:01.226000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "switching BONSAI for FOREST should avoid these issues again, yes actually",
        "created_at": "2023-02-08T09:39:55.254000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "but switch would require a full sync again wouldn't it ðŸ˜„",
        "created_at": "2023-02-08T09:40:15.876000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "haha yes",
        "created_at": "2023-02-08T09:40:20.285000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "actually I'm very impressed, on how fast Bonsai syncs tho",
        "created_at": "2023-02-08T09:40:29.162000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "well, we do have a tool to convert the db, but that'll probably take longer to setup than resyncing for this little testnet ðŸ˜†",
        "created_at": "2023-02-08T09:40:56.201000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "there's been a lot of perf improvements in recent weeks",
        "created_at": "2023-02-08T09:41:17.241000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Gonna leave it at Bonsai for now",
        "created_at": "2023-02-08T09:42:14.325000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "just restarted the remaining besu nodes with the new flag, so all should have version show up in forkmon now. (hopefully they won't suicide their own db again lol)",
        "created_at": "2023-02-08T09:42:52.272000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "lodestar managed to kill itself again",
        "created_at": "2023-02-08T09:46:00.556000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "lodestar-besu is gone. I'll delete db now",
        "created_at": "2023-02-08T09:46:00.778000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "ha, go ahead, you'll be faster than me",
        "created_at": "2023-02-08T09:46:09.169000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "so its really reproducible",
        "created_at": "2023-02-08T09:46:13.634000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I'm keeping a close eye on all of them",
        "created_at": "2023-02-08T09:46:27.876000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "indeed, I have found a suspect commit we can investigate tomorrow",
        "created_at": "2023-02-08T09:46:29.629000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Awesome!",
        "created_at": "2023-02-08T09:46:35.626000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "thanks for sorting this and sorry for the trouble!",
        "created_at": "2023-02-08T09:47:01.335000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I better log off before anything else breaks :p",
        "created_at": "2023-02-08T09:47:09.760000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "prysm also managed to crash",
        "created_at": "2023-02-08T09:47:36.091000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "so it might be related to specific CL not letting go the EL's db",
        "created_at": "2023-02-08T09:48:15.338000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "as nimbus seems to handle it softer, and actually manage to restart without corrupting the db",
        "created_at": "2023-02-08T09:48:38.761000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Anything you need help with before tomorrow, please tag `@besu`  - I'll put the message out now to see if we can get another more stable image built asap.",
        "created_at": "2023-02-08T09:49:34.596000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "if this continues, just switch to FOREST for now",
        "created_at": "2023-02-08T09:50:11.275000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "how do I cook rice `@besu`?",
        "created_at": "2023-02-08T09:50:15.971000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@792822129019584562\u003e lodestar/ethereumjs seems to have some bad txs",
        "created_at": "2023-02-08T10:05:45.054000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "and unable to sync ?",
        "created_at": "2023-02-08T10:05:49.648000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "let me provide you latest ethereumjs image, we have had some fixes",
        "created_at": "2023-02-08T10:06:16.870000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ok",
        "created_at": "2023-02-08T10:06:47.631000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "What? We s shouldn't crash at all because of the El what was the node? I can take a look at logs in a few hours",
        "created_at": "2023-02-08T11:41:38.969000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "don't worry, you missing some context",
        "created_at": "2023-02-08T11:42:59.620000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "its not prysm that crashed, its just the besu/prysm nodes that were crashing due to corrupted bonsai on besu's side after a restart of a container",
        "created_at": "2023-02-08T11:43:19.817000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e can we make my address be the coinbase and eth1 withdrawal address on as many nodes as possible?",
        "created_at": "2023-02-08T11:55:29.586000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "whats your address?",
        "created_at": "2023-02-08T11:57:29.303000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "would be possible yeah",
        "created_at": "2023-02-08T11:57:54.393000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "But then withdrawals would be much slower for everyone else. I would prefer to leave it as is now.",
        "created_at": "2023-02-08T11:58:20.188000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "with most addresses set to 0x00.",
        "created_at": "2023-02-08T11:58:27.729000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "that way whoever wanna see if their address change happens, it will happen quite quick",
        "created_at": "2023-02-08T11:58:40.319000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "(only about 2.3k bls changes have happened, so within 5 epochs withdrawals would happen for everyone)",
        "created_at": "2023-02-08T11:58:57.897000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "The 0xb02a one that I usually use. I can't test some edge cases without it",
        "created_at": "2023-02-08T12:01:56.067000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "is it smth that has to be tested on zh? Or devnet 4 would also work?",
        "created_at": "2023-02-08T12:02:40.582000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "But what sort of crash?",
        "created_at": "2023-02-08T12:03:27.217000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "bonsai db corruption",
        "created_at": "2023-02-08T12:03:36.861000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Prysm shouldn't crash at all",
        "created_at": "2023-02-08T12:03:40.601000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "unrelated to prysm.",
        "created_at": "2023-02-08T12:03:42.247000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "not prysm crash",
        "created_at": "2023-02-08T12:03:49.030000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "What do you mean by prysm crashed then?",
        "created_at": "2023-02-08T12:03:56.774000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I didn't mean prysm has crashed",
        "created_at": "2023-02-08T12:04:04.710000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I meant to say prysm nodes with besu nodes have crashed",
        "created_at": "2023-02-08T12:04:14.778000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ah I see, alright then",
        "created_at": "2023-02-08T12:04:29.426000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah corrected myself like 3 times lol",
        "created_at": "2023-02-08T12:04:38.375000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Devnet works",
        "created_at": "2023-02-08T12:11:33.961000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I think on devnet 4 there are still like 200k validators with 0x00",
        "created_at": "2023-02-08T12:11:55.267000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I can spin up the latest beaconchain explorer on it and see if its working",
        "created_at": "2023-02-08T12:12:07.075000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "that way we can see these metrics in real time",
        "created_at": "2023-02-08T12:12:14.855000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "would that work?",
        "created_at": "2023-02-08T12:12:18.220000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "https://beaconchain.withdrawal-devnet-4.ethpandaops.io/validators/withdrawals",
        "created_at": "2023-02-08T12:20:20.109000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "withdrawals tab working on devnet 4 too ðŸ˜„",
        "created_at": "2023-02-08T12:20:30.207000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yeah would be great",
        "created_at": "2023-02-08T12:37:49.757000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "can't find your full address",
        "created_at": "2023-02-08T12:38:55.616000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "0xb02A2EdA1b317FBd16760128836B0Ac59B560e9D",
        "created_at": "2023-02-08T12:39:51.238000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "lets see what ethdo can do with this amount of addresses",
        "created_at": "2023-02-08T12:42:03.447000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "gonna change all remaining addresses to yours",
        "created_at": "2023-02-08T12:42:09.348000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```Error: failed to process: failed to submit BLS to execution change: failed to call POST endpoint: Post \"http://127.0.0.1:4000/eth/v1/beacon/pool/bls_to_execution_changes\": context deadline exceeded```",
        "created_at": "2023-02-08T12:43:40.442000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "too much for the endpoint ðŸ˜„",
        "created_at": "2023-02-08T12:43:43.676000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "but quite a bit of them did go out still",
        "created_at": "2023-02-08T12:43:52.177000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Might need to do it in multiple rounds",
        "created_at": "2023-02-08T12:43:59.378000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "You can add `--timeout=5m` or whatever to give the endpoint time to process them",
        "created_at": "2023-02-08T12:44:03.088000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "as the validator set is just so massive",
        "created_at": "2023-02-08T12:44:04.870000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Problem is, that it doesn't get gossiped till it times out.",
        "created_at": "2023-02-08T12:44:16.036000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "And if the local pool fills up all the way, then there is no way to push in more.",
        "created_at": "2023-02-08T12:44:36.703000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "I'd expect the process to be `receive-\u003everify-\u003epublish-\u003eput in pool` for each operation in the list, otherwise you're right there would be an absolute maximum size of request.",
        "created_at": "2023-02-08T12:45:20.827000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I think its `receive-\u003everify-\u003eput-\u003epublish`",
        "created_at": "2023-02-08T12:45:48.471000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "as during ethdo request, there was no publishing going on",
        "created_at": "2023-02-08T12:46:13.995000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "only the local pool grew",
        "created_at": "2023-02-08T12:46:19.264000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I was checking it side by side.",
        "created_at": "2023-02-08T12:46:23.839000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "nvm I just broke it again, should be back on tomorrow. Still quite some bug fixes to do.",
        "created_at": "2023-02-08T12:48:11.279000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "But the bls changes should happen either way.",
        "created_at": "2023-02-08T12:48:21.079000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e Could you also send me some eth on withdrawal-devnet-4? 0xb02A2EdA1b317FBd16760128836B0Ac59B560e9D The faucet is dry",
        "created_at": "2023-02-08T16:23:54.289000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "done",
        "created_at": "2023-02-08T16:25:40.559000+00:00",
        "attachments": null
    },
    {
        "author": "qu0b",
        "category": "Testing",
        "parent": "",
        "content": "For the client devs - do the bls change requests that geht POSTed to the node get written to disk, even if they have not been included and are still in the queue?",
        "created_at": "2023-02-08T18:36:05.729000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "at least on the teku side, it's an in-memory queue and not persisted currently",
        "created_at": "2023-02-08T19:30:18.818000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "Lighthouse stores its pool on disk periodically",
        "created_at": "2023-02-08T21:11:40.270000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Prysm doesn't either",
        "created_at": "2023-02-08T21:46:27.959000+00:00",
        "attachments": null
    }
]