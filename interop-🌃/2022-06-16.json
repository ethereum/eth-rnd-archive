[
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah certainly we can't get rid of gossiping full blocks at the very least until PBS is enshrined. I wouldn't want to have to wait for the CL to sync the CL block, validate signatures to only then the EL try to grab the payload from the network,  execute it and after all that be able to propose a block... We're already scared of latency as it is now",
        "created_at": "2022-06-16T00:14:53.529000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdannyryan\u003e Also you can't trustlessly distribute the EL payload without the CL wrapper so there's an issue with the dependency even if you are willing to go to EL network for any payload on verification",
        "created_at": "2022-06-16T00:19:56.969000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Testing",
        "parent": "",
        "content": "\u003cdannyryan\u003e That is, you can't gossip it alone, so no one would have it to be retrievable",
        "created_at": "2022-06-16T00:20:18.020000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "the most relevant question is here: https://github.com/ethereum/execution-apis/pull/218#discussion_r885431989 - ie should CL:s be \"forced\" to validate the hash of the data they get from the EL, or should they simply make assumptions based on response order and the like",
        "created_at": "2022-06-16T08:26:17.946000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "is it possible to configure Erigon to support `net_version` on the engine API port?",
        "created_at": "2022-06-16T12:02:38.937000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Why is this method needed on the Engine API port?",
        "created_at": "2022-06-16T12:29:34.787000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Nimbus uses it to check whether the Ethereum network the EL and CL are targeting is the same",
        "created_at": "2022-06-16T12:30:37.074000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "(mainnet, ropsten, goerli, etc)",
        "created_at": "2022-06-16T12:31:34.066000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I would not rely on methods that aren't listed by the spec. What if you rely on `eth_chainId` and `engine_exchangeTransitionConfiguration` instead?",
        "created_at": "2022-06-16T13:09:14.887000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "probably okay -- `engine_` can't be assumed yet outside specifically merge contexts, but soon enough, and `eth_chainId` should be reasonably precise on this point (though people can make pathological network definitions, at some point it's not possible to detect in a safe way if they intentionally clone all the values which can be queried)",
        "created_at": "2022-06-16T13:11:56.631000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@361447803194441738\u003e Can CL please not call `net_` methods from EL? Per the spec we only need to expose `engine_` and `eth_` methods. At the moment Lighthouse fails to connect to my Erigon with  `Jun 16 14:59:15.579 CRIT Could not connect to a suitable eth1 node. Please ensure that you have an eth1 http server running locally on http://localhost:8545 or specify one or more (remote) endpoints using `--eth1-endpoints \u003cCOMMA-SEPARATED-SERVER-ADDRESSES\u003e`. Also ensure that `eth` and `net` apis are enabled on the eth1 http server, warning: BLOCK PROPOSALS WILL FAIL WITHOUT VALID, SYNCED ETH1 CONNECTION, service: eth1_rpc`",
        "created_at": "2022-06-16T15:32:04.407000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "i think this requirement is related to deposit processing and not necessarily merge-related things",
        "created_at": "2022-06-16T15:33:27.598000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "What `net_` methods do you need for deposit processing?",
        "created_at": "2022-06-16T15:34:33.746000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003e To facilitate an Engine API consumer to access state and logs (e.g. proof-of-stake deposits) through the same connection, the client MUST also expose the following subset of eth methods:\nhttps://github.com/ethereum/execution-apis/blob/main/src/engine/specification.md#underlying-protocol\n\nI'm not sure exactly which methods Lighthouse uses, but the intent of the engine API spec is to allow a single endpoint to support both deposit processing and merge-related things",
        "created_at": "2022-06-16T15:34:37.556000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "i would imagine it is to ensure the \"eth1 node\" is on the expected network",
        "created_at": "2022-06-16T15:35:10.900000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "i'd have to go look at the code to say more",
        "created_at": "2022-06-16T15:35:15.480000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "well, at least, that's why Nimbus uses `net_` (see my question above, `net_version`)",
        "created_at": "2022-06-16T15:35:39.640000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Testing",
        "parent": "",
        "content": "yeah not sure if this is all CLs or just lighthouse -- if it is all CLs then maybe we adjust the spec, if it is just a small number there are likely workarounds they can employ",
        "created_at": "2022-06-16T15:36:06.016000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "Please use `eth_chainId` for that",
        "created_at": "2022-06-16T15:36:26.171000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "we are moving away from using `net_version` with this PR https://github.com/sigp/lighthouse/pull/3214 . This should get merged sometime next week mostly",
        "created_at": "2022-06-16T15:44:09.454000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "Nimbus is removing some as well: https://github.com/status-im/nimbus-eth2/pull/3761 and will look more closely at `net_version` usage",
        "created_at": "2022-06-16T16:07:48.769000+00:00",
        "attachments": null
    }
]