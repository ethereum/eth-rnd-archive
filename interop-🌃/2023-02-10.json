[
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e when you get chance, please could you update withdrawal-devnet-4 with this experimental besu image: https://github.com/ethpandaops/withdrawals-testnet/pull/29\n\nIt _should_ get rid of our misreporting of bad blocks. \n\nFor context, we're misreporting because during building a block we're reporting blocks that besu built and immediately invalidated (due to some concurrency bug), even though we eventually build a good one and return that to the CL. Makes no sense to be in the bad block queue.",
        "created_at": "2023-02-10T07:33:23.924000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "If it goes well on devnet-4 over the weekend, I'll consider it for zhejiang (although would rather have a commit from main for that)",
        "created_at": "2023-02-10T07:33:48.803000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "done.",
        "created_at": "2023-02-10T07:34:08.596000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Presume the bad blocks listed here will go away once the nodes restart? https://forkmon.withdrawal-devnet-4.ethpandaops.io/ - or are they cached by forkmon?",
        "created_at": "2023-02-10T07:35:27.155000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "forkmon doesn't cache the individual number of bad blocks afaik",
        "created_at": "2023-02-10T07:35:57.991000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Maybe it caches the overall",
        "created_at": "2023-02-10T07:36:05.445000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I have a datadir I think",
        "created_at": "2023-02-10T07:36:16.862000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "that I could nuke",
        "created_at": "2023-02-10T07:36:20.952000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "the only bad blocks I see are besu nodes so go for it",
        "created_at": "2023-02-10T07:36:50.909000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "it might take a few mins to come back up, for some reason its quite slow",
        "created_at": "2023-02-10T07:36:55.622000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "looks like all the numbers are zero'd but not the bad block list at the bottom of forkmon - not a big deal, can just use the numbers if necessary",
        "created_at": "2023-02-10T07:53:56.393000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "just restarted forkmon now with the empty dir",
        "created_at": "2023-02-10T08:01:50.257000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e could you help me understand why freezer_db is taking up almost 300GB in devnet 4 ?",
        "created_at": "2023-02-10T08:30:52.548000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "just realized that quite some of our nodes are literally out of space already",
        "created_at": "2023-02-10T08:31:09.115000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "that‚Äôs odd, I guess you‚Äôre not running with `--reconstruct-historic-states` or anything? this isn‚Äôt the explorer node?",
        "created_at": "2023-02-10T08:36:39.944000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I‚Äôm about to go out (Friday night here) but could have a look tomorrow",
        "created_at": "2023-02-10T08:36:59.287000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "all besu-lh nodes are out of space",
        "created_at": "2023-02-10T08:36:59.521000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "also the bootnode is out of space",
        "created_at": "2023-02-10T08:37:03.193000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah not really urgent",
        "created_at": "2023-02-10T08:37:14.913000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```  lighthouse\n  --debug-level=\"{{ beacon_log_level | lower }}\"\n  --datadir \"/beacondata\"\n  --testnet-dir=\"/custom_config_data\"\n  bn\n  --disable-enr-auto-update\n  --enr-address={{ansible_host}}\n  --enr-tcp-port={{beacon_p2p_port}} --enr-udp-port={{beacon_p2p_port}}\n  --port={{beacon_p2p_port}} --discovery-port={{beacon_p2p_port}}\n  --eth1\n  {% if (bootnode_enrs is defined) and bootnode_enrs %}\n  --boot-nodes=\"{{ bootnode_enrs | join(',') }}\"\n  {% endif %}\n  --http\n  --http-address=0.0.0.0\n  --http-port=\"{{beacon_api_port}}\"\n  --metrics\n  --metrics-address=0.0.0.0\n  --metrics-port=\"{{beacon_metrics_port}}\"\n  --listen-address=0.0.0.0\n  --graffiti=\"{{graffiti}}\"\n  --target-peers={{hi_peer_count}}\n  --http-allow-sync-stalled\n  --disable-packet-filter\n  --execution-endpoint={{execution_endpoint}}\n  --suggested-fee-recipient={{fee_recipient}}\n  --jwt-secrets=\"/jwtsecret\"\n  --count-unrealized\n  {% if mev_boost == 'true' %}\n  --builder=\"http://127.0.0.1:{{mev_boost_port}}\"\n  {% endif %}\n  --slots-per-restore-point=32 ```",
        "created_at": "2023-02-10T08:37:55.232000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "maybe I have an incorrect flag set?",
        "created_at": "2023-02-10T08:38:04.563000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "doesn't look like I have historic states flag tho",
        "created_at": "2023-02-10T08:38:16.198000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "slots-per-restore-point=32 is what‚Äôs killing you here",
        "created_at": "2023-02-10T08:39:56.041000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "What would it need to be?",
        "created_at": "2023-02-10T08:40:06.913000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "8192 is default",
        "created_at": "2023-02-10T08:40:13.892000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "you don‚Äôt need the flag",
        "created_at": "2023-02-10T08:40:26.591000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ok",
        "created_at": "2023-02-10T08:40:30.209000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Need to wipe and restart I guess?",
        "created_at": "2023-02-10T08:40:37.476000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "yeah",
        "created_at": "2023-02-10T08:40:40.615000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Gonna try to bring them back",
        "created_at": "2023-02-10T08:40:46.563000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ok thx",
        "created_at": "2023-02-10T08:40:49.673000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "gl üôè",
        "created_at": "2023-02-10T08:40:55.429000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "4ish hours till full sync again. Will check back later.",
        "created_at": "2023-02-10T09:55:20.754000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@\u0026836981603216654336\u003e zhejiang teku-besu nodes are not proposing blocks.",
        "created_at": "2023-02-10T12:09:10.593000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```2023-02-10 12:06:50.769+00:00 | vert.x-worker-thread-0 | WARN  | AbstractEngineNewPayload | Invalid new payload: number: 61273, hash: 0x924881174a690edb84a2a2f5d8c4e5e7470b2dfa5f3319bda0ad27bf0f762658, parentHash: 0xc91d32ccdc33c21f1952a09f8a2f40d52a1ba7de76ca5b3cc02a11b9cad643ee, latestValidHash: 0x0000000000000000000000000000000000000000000000000000000000000000, status: INVALID, validationError: Block already present in bad block manager.\n2023-02-10 12:07:12.009+00:00 | vert.x-worker-thread-0 | ERROR | MergeCoordinator | Could not persist world for root hash 0x5a7494b8bf799347ea8d9e91eefe35ebb1fa23e9df77ca3834ba6a6e1610b252 and block hash 0xc91d32ccdc33c21f1952a09f8a2f40d52a1ba7de76ca5b3cc02a11b9cad643ee\n2023-02-10 12:07:12.010+00:00 | vert.x-worker-thread-0 | INFO  | AbstractEngineForkchoiceUpdated | VALID for fork-choice-update: head: 0xc91d32ccdc33c21f1952a09f8a2f40d52a1ba7de76ca5b3cc02a11b9cad643ee, finalized: 0x5131928d5a8d13d5b7e81d419bab260055ab58735c55f85bc46f8e990c4391d1, safeBlockHash: 0x53ac34b964d7bbb8f0b3cfea73d0088a0037f44e0b83c8e4369528482abdb129\n2023-02-10 12:07:48.009+00:00 | vert.x-worker-thread-0 | ERROR | MergeCoordinator | Could not persist world for root hash 0x5a7494b8bf799347ea8d9e91eefe35ebb1fa23e9df77ca3834ba6a6e1610b252 and block hash 0xc91d32ccdc33c21f1952a09f8a2f40d52a1ba7de76ca5b3cc02a11b9cad643ee```",
        "created_at": "2023-02-10T12:09:19.958000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Those nodes are still on the buggy commit: fd906437\nTwo options I think:\n1) Pull develop again (buggy commit was reverted) or\n2) Switch from BONSAI to FOREST\n\nMight need to resync if the db is borked again :/",
        "created_at": "2023-02-10T12:25:22.407000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ok, gonna check",
        "created_at": "2023-02-10T12:35:11.230000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "thanks, got to sign off for the night now",
        "created_at": "2023-02-10T12:43:00.679000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "You're saving a state per Epoch? Not even beaconcha.in does that üôÇ",
        "created_at": "2023-02-10T23:49:35.626000+00:00",
        "attachments": null
    }
]