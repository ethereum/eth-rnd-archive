[
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e \u003c@199561711278227457\u003e Besu withdrawals-devnet-1 fix is tested locally and published: \n`docker pull siladu/besu:22.10.3-SNAPSHOT-openjdk-11-debug-withdrawals-evm-0455b22`\n(built from https://github.com/hyperledger/besu/pull/4818)\n\nCould you please update on the devnet?",
        "created_at": "2022-12-23T01:51:28.831000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethpandaops/withdrawals-testnet/pull/10",
        "created_at": "2022-12-23T04:26:20.093000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "just stop and replace or wipe and replace?",
        "created_at": "2022-12-23T09:07:16.452000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "stop and replace didn't work",
        "created_at": "2022-12-23T09:10:49.955000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I think replace and restart will be enough but we‚Äôll find out soon enough",
        "created_at": "2022-12-23T09:10:53.930000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "so wiped and replaced.",
        "created_at": "2022-12-23T09:10:53.976000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "was getting ```2022-12-23 09:09:47.098+00:00 | vert.x-worker-thread-0 | INFO  | MainnetBlockValidator | Optional[Unable to copy Layered Worldstate for 0x8ba7fb6168c2052dee05beb79fce3c7fe46bd253ae435059bf44fd54183723db]. Block 1587 (0x8589f0e34573d726eaff9fd78f32105c9efc0b7077107249daabffcd18e109f3), caused by org.hyperledger.besu.plugin.services.exception.StorageException: Unable to copy Layered Worldstate for 0x8ba7fb6168c2052dee05beb79fce3c7fe46bd253ae435059bf44fd54183723db```",
        "created_at": "2022-12-23T09:11:11.195000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Shouldn‚Äôt take too long to sync back up",
        "created_at": "2022-12-23T09:11:14.413000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Eek yeh that‚Äôs the bonsai regression I was worried about before. That‚Äôs a wipe job",
        "created_at": "2022-12-23T09:11:45.073000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e When I tried to use your image I get ```fatal: [withdrawal-devnet-1-prysm-besu-1]: FAILED! =\u003e {\"changed\": false, \"msg\": \"Error pulling image gcr.io/prylabs-dev/beacon-chain:96981a07b9 - 500 Server Error for http+docker://localhost/v1.41/images/create?tag=96981a07b9\u0026fromImage=gcr.io%2Fprylabs-dev%2Fbeacon-chain: Internal Server Error (\\\"unauthorized: You don't have the needed permissions to perform this operation, and you may have invalid credentials. To authenticate your request, follow the steps in: https://cloud.google.com/container-registry/docs/advanced-authentication\\\")\"}```",
        "created_at": "2022-12-23T09:11:47.307000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "So maybe you have to make the image public.",
        "created_at": "2022-12-23T09:12:00.682000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "chain seems to be syncing now",
        "created_at": "2022-12-23T09:12:27.836000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Awesome will check out the logs in a few mins",
        "created_at": "2022-12-23T09:12:56.435000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@476250636548308992\u003e maybe potuz isn't awake yet, could you pls change the permissions on that image?",
        "created_at": "2022-12-23T09:13:40.962000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "i will need to check, give me  sec",
        "created_at": "2022-12-23T09:14:36.079000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Hmm I've got no clue about these things. Pinging the mastermind \u003c@399309815517544451\u003e but he'll be awake in like 5 hours",
        "created_at": "2022-12-23T09:15:44.493000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Did you just do one box or all?",
        "created_at": "2022-12-23T09:17:51.982000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "all.",
        "created_at": "2022-12-23T09:17:58.598000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Looks like LH/besu still broken.",
        "created_at": "2022-12-23T09:18:06.343000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "```2022-12-23 09:17:32.088+00:00 | nioEventLoopGroup-3-4 | INFO  | MainnetBlockValidator | Optional[World State Root does not match expected value, header 0xedefafa2fb63e376a575fd9d08b79c19b8c49a63690f6192111bdeb75095e491 calculated 0xdc6b97779aca4e97545a0a84f9778026676aa8290a0b8cfbf9a32e54f6c644d0]. Block 1907 (0xffd994223ac32b0e9484b2d48e9f379b44d0a502eaa38a14ef477378ba4d360e), caused by java.lang.RuntimeException: World State Root does not match expected value, header 0xedefafa2fb63e376a575fd9d08b79c19b8c49a63690f6192111bdeb75095e491 calculated 0xdc6b97779aca4e97545a0a84f9778026676aa8290a0b8cfbf9a32e54f6c644d0```",
        "created_at": "2022-12-23T09:18:14.569000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "LH also seem to have an issue with nethermind tho.",
        "created_at": "2022-12-23T09:18:38.712000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "So it might be a LH related thing.",
        "created_at": "2022-12-23T09:18:45.257000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah def. besu/lighthouse have some bad blocks.",
        "created_at": "2022-12-23T09:19:25.580000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_2022-12-23_at_10.19.13.png",
                "content": "9f5e02cdf732e86115b820244f1b4b7b36ea11725d9dc31156c8902c54849f0c"
            }
        ]
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "yeh looks like different issue, world state root mismatch rather than receipts this time",
        "created_at": "2022-12-23T09:20:35.002000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I think that happened with LH before we hit the push0 issue before too",
        "created_at": "2022-12-23T09:20:51.121000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Can't see any running containers on withdrawal-devnet-1-prysm-besu-1",
        "created_at": "2022-12-23T09:21:16.555000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "LH/Nethermind \u003c@758579010027782144\u003e \u003c@554799849288105986\u003e : ```2022-12-23 09:21:08.6997|Downloaded 1121 / 1817 | current     0.00bps | total     0.02bps\n2022-12-23 09:21:09.0852|Executing JSON RPC call eth_getBlockByNumber with params [latest, False]\n2022-12-23 09:21:09.0866|Executing JSON RPC call eth_getLogs with params [{\n  \"address\": [\n    \"0x2015057225888012544938332075675653128770\"\n  ],\n  \"fromBlock\": \"0x462\",\n  \"toBlock\": \"0x461\",\n  \"topics\": null\n}]\n2022-12-23 09:21:09.0866|Error when handling ID 18124, eth_getLogs({\n  \"address\": [\n    \"0x2015057225888012544938332075675653128770\"\n  ],\n  \"fromBlock\": \"0x462\",\n  \"toBlock\": \"0x461\",\n  \"topics\": null\n}) | {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32602,\"message\":\"'From' block '1122' is later than 'to' block '1121'.\"},\"id\":18124}```",
        "created_at": "2022-12-23T09:21:22.929000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "lodestar-besu and teku-besu in sync",
        "created_at": "2022-12-23T09:21:39.015000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I couldn't start up prysm, bc I got permission issue with the new container image",
        "created_at": "2022-12-23T09:21:39.242000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I can revert back to the old image so just it would be in sync",
        "created_at": "2022-12-23T09:21:57.025000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "ok",
        "created_at": "2022-12-23T09:21:57.280000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "You can use the old one \u003c@412614104222531604\u003e",
        "created_at": "2022-12-23T09:22:06.696000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah we are post capella anyways",
        "created_at": "2022-12-23T09:22:29.421000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "That works fine still, the only difference with the new one is the option to send changes earlier",
        "created_at": "2022-12-23T09:22:30.831000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ok.",
        "created_at": "2022-12-23T09:22:43.916000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Starting prysm/besu one back up now.",
        "created_at": "2022-12-23T09:22:56.894000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "By the way, for a future devnet and possibly hive (and our e2e \u003c@476250636548308992\u003e ) it would be good to send the same list of changes (for example all validators) to different peers and check that they get included",
        "created_at": "2022-12-23T09:23:50.579000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "To test that we are removing from the pool the already included objects",
        "created_at": "2022-12-23T09:24:29.316000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "tx explorer and https://beaconchain.withdrawalsdevnet1.ethpandaops.io/ look borked",
        "created_at": "2022-12-23T09:25:12.128000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah because it pulls all stuff from LH/nethermind üòÇ",
        "created_at": "2022-12-23T09:25:32.285000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "you mean check that peers are removing the correct exec changes from the pool ?",
        "created_at": "2022-12-23T09:25:32.505000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "how do we do that \u003c@755590043632140352\u003e",
        "created_at": "2022-12-23T09:25:39.741000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "i am not aware of any api method that lets us inspect the exec changes pool of a node",
        "created_at": "2022-12-23T09:26:16.705000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "api call for bls pool, save result into a file, then make diff üòÇ",
        "created_at": "2022-12-23T09:26:40.354000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah we have an endpoint",
        "created_at": "2022-12-23T09:26:47.844000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "ah ok",
        "created_at": "2022-12-23T09:26:48.245000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "yeah that can be done",
        "created_at": "2022-12-23T09:27:02.715000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "But simply checking that all validators are changed is good enough too for e2e",
        "created_at": "2022-12-23T09:27:07.787000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "could try to wipe and restart the nethermind/lh one.",
        "created_at": "2022-12-23T09:29:45.616000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "as LH was able to sync with geth but unable with besu, I have a feeling something might be broken on the LH side.",
        "created_at": "2022-12-23T09:30:07.007000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Three things I've noticed with LH compared to others:\n1. Seems to call engine_*V2 pre-capella\n2. Forces besu to backward sync and get blocks from other peers instead of feeding besu the blocks from genesis\n3. World state error mismatch",
        "created_at": "2022-12-23T09:34:49.136000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "its my hope that i can call v2 pre-capella... i just haven't removed my hacks...",
        "created_at": "2022-12-23T09:35:20.634000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "so geth might be fixed now to allow that i guess...",
        "created_at": "2022-12-23T09:36:18.760000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "agree...besu intends to (and I think should) support that but it's possibly untested in a devnet until now. Not sure how Nethermind handles",
        "created_at": "2022-12-23T09:36:25.171000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "of course, if LH aren't feeding us blocks from genesis then maybe it's actually not calling V2 pre-capella",
        "created_at": "2022-12-23T09:37:35.782000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "...and the problem with 2. is that we seem to struggle to get peers to sync",
        "created_at": "2022-12-23T09:38:24.718000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "prysm-besu catching up slowly, with some regular reorgs of 30+ blocks along the way, but it got past the push0 block...\n```\n2022-12-23 09:38:47.130+00:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayloadV2 | Imported #1,586 / 136 tx / base fee 8 wei / 7,612,590 (67.5%) gas / (0x8ba7fb6168c2052dee05beb79fce3c7fe46bd253ae435059bf44fd54183723db) in 1.136s. Peers: 3\n```",
        "created_at": "2022-12-23T09:39:40.287000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e should nimbus-besu be working? It looks like nimbus has never called besu but its own logs are quite busy",
        "created_at": "2022-12-23T09:41:20.295000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "nimbus does not work (yet)",
        "created_at": "2022-12-23T09:41:36.155000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "also 2. could mean the problem is with our sync (or other EL peers' responses) rather than with LH itself",
        "created_at": "2022-12-23T09:46:16.970000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "prysm besu seems incredibly slow to sync",
        "created_at": "2022-12-23T09:46:56.520000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "With 3/4 peers it should sync faster I thought.",
        "created_at": "2022-12-23T09:47:19.083000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Might be a hw anomaly",
        "created_at": "2022-12-23T09:47:49.114000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "prysm log\n```\ntime=\"2022-12-23 09:46:09\" level=debug msg=\"Could not handle p2p RPC\" error=\"rate limited\" peer=16Uiu2HAmUJ8MQrkdWWkn8ughW1DnxpGimuJFNJf3ejAKGJCfwedY prefix=sync topic=\"/eth2/beacon_chain/req/beacon_blocks_by_range/2/ssz_snappy\"\n```",
        "created_at": "2022-12-23T09:47:59.721000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "not sure what the rate limiting is about",
        "created_at": "2022-12-23T09:48:41.935000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I have previously saw rate limit issues with lodestar nodes being the bootnode. Never saw it with teku limiting.",
        "created_at": "2022-12-23T09:49:06.241000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@912415191067676693\u003e will check it on our side üôÇ I guess it might be Nethermind syncing bug. I passed all the context needed to \u003c@912415191067676693\u003e",
        "created_at": "2022-12-23T09:49:19.214000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "prysm have over 20 peers so it def not number of peer issue.",
        "created_at": "2022-12-23T09:49:53.413000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "could you switch to nethermind \u003c\u003e teku for example?",
        "created_at": "2022-12-23T09:52:30.496000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Not really.",
        "created_at": "2022-12-23T09:52:51.279000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "LH have some specific endpoints that beaconchain is using",
        "created_at": "2022-12-23T09:53:02.314000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "LH \u003c\u003e Geth?",
        "created_at": "2022-12-23T09:53:14.429000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "and erigon would be ideal for EL side, but we don't have that working yet.",
        "created_at": "2022-12-23T09:53:19.644000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "We tried Geth, and it wasn't working well either.",
        "created_at": "2022-12-23T09:53:34.407000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "points 1 and 2 here are correct\n\nLH calls V2 before Capella _and_ avoids sending newPayload messages for finalized blocks (so we can sync faster)",
        "created_at": "2022-12-23T09:53:48.174000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "would you be able to check on the LH nodes besu/nethermind both seem to struggle. Hard for me to say if its EL problem or CL problem.",
        "created_at": "2022-12-23T09:55:31.608000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I‚Äôm on leave now sorry, Besu/Nethermind devs might be able to get to the bottom of it",
        "created_at": "2022-12-23T10:16:21.830000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "or we can reconvene in the new year",
        "created_at": "2022-12-23T10:16:30.132000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "happy holidays",
        "created_at": "2022-12-23T10:16:41.827000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e are you around today?",
        "created_at": "2022-12-23T10:28:21.583000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "yes",
        "created_at": "2022-12-23T10:30:51.190000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "tx fuzzer seems to be killing our bootnode",
        "created_at": "2022-12-23T10:31:05.455000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "ain't no rest for the wicked",
        "created_at": "2022-12-23T10:31:07.229000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Haha oh",
        "created_at": "2022-12-23T10:31:14.985000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I just stopped it manually now",
        "created_at": "2022-12-23T10:31:17.561000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Too many calls?",
        "created_at": "2022-12-23T10:31:23.554000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Maybe we can take it private?",
        "created_at": "2022-12-23T10:31:28.362000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Sure",
        "created_at": "2022-12-23T10:31:34.737000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e okay, I fixed lh \u003c\u003e nethermind",
        "created_at": "2022-12-23T10:33:01.838000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I can have a quick look but will run out of time tonight soon and then unavailable tomorrow.\n\nAre we able to do anything to improve sync between the ELs?",
        "created_at": "2022-12-23T10:33:02.267000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Is prysm being slow to sync with geth or Nethermind?",
        "created_at": "2022-12-23T10:34:01.483000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "what was the issue?",
        "created_at": "2022-12-23T10:34:22.372000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we haven't needed it resync prysm with geth/nethermind",
        "created_at": "2022-12-23T10:34:56.474000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I could nuke them and see if they can catch up.",
        "created_at": "2022-12-23T10:35:06.958000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "syncing problem with Nethermind üòâ",
        "created_at": "2022-12-23T10:35:44.608000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah that would be helpful thanks. If we are having trouble only with Besu this will help Besu as well",
        "created_at": "2022-12-23T10:36:08.078000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "can you keep an eye on them?",
        "created_at": "2022-12-23T10:36:28.537000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Or should I ?",
        "created_at": "2022-12-23T10:36:32.451000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "now I see lots of request to Nethermind, so I guess explorer is indexing data",
        "created_at": "2022-12-23T10:36:53.938000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "thats possible indeed.",
        "created_at": "2022-12-23T10:37:04.964000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "did you edit something with nethermind, or how did you fix the sync issue?",
        "created_at": "2022-12-23T10:38:04.112000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e I just restarted geth/nethermind + prysm. They are all now syncing and slowing down for rate limiting.",
        "created_at": "2022-12-23T10:41:28.739000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "but actually they seem to go a lot quicker still than with besu.",
        "created_at": "2022-12-23T10:42:03.499000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "I changed one thing in the code and created a new image. I'm running hive tests now on new image",
        "created_at": "2022-12-23T10:42:30.237000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ping me if you have the new image, so I can use that for the other nodes",
        "created_at": "2022-12-23T10:42:56.647000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e geth/prysm:```time=\"2022-12-23 10:42:51\" level=debug msg=\"Requesting blocks\" capacity=16 count=64 peer=16Uiu2HAkuc5vGzGAb2wTDrTwpVGxpomVu1yc7zJJ45CQZpeeCtkU prefix=initial-sync score=\"[10.0%, raw: 0.10,  blocks: 64/640]\" start=3329 step=1\ntime=\"2022-12-23 10:42:51\" level=debug msg=\"Slowing down for rate limit\" peer=16Uiu2HAkuc5vGzGAb2wTDrTwpVGxpomVu1yc7zJJ45CQZpeeCtkU prefix=initial-sync\ntime=\"2022-12-23 10:43:05\" level=info msg=\"Peer summary\" activePeers=30 inbound=5 outbound=25 prefix=p2p\ntime=\"2022-12-23 10:43:05\" level=debug msg=\"Unable to cache headers for execution client votes\" error=\"cacheHeadersForEth1DataVote: determineEarliestVotingBlock=1817: (1671780300 \u003e 1671740652): provided time is later than the current eth1 head\" prefix=powchain\ntime=\"2022-12-23 10:43:09\" level=info msg=\"Processing block batch of size 53 starting from  0x8646bff2... 2881/7110 - estimated time remaining 26m35s\" blocksPerSecond=2.6 peers=30 prefix=initial-sync```",
        "created_at": "2022-12-23T10:43:35.322000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "nethermind/prysm: ```time=\"2022-12-23 10:43:36\" level=debug msg=\"Slowing down for rate limit\" peer=16Uiu2HAmTTtJhVYBFPsRKDpcosEAicuTYpccRXNWZuPfFLSK4LZF prefix=initial-sync\ntime=\"2022-12-23 10:43:37\" level=debug msg=\"Latest eth1 chain event\" blockHash=0x5ff2da4719150a5d0d3e4b6987cde6f51f273fa523e80505d9ee743abd85afe5 blockNumber=3007 prefix=powchain\ntime=\"2022-12-23 10:43:37\" level=warning msg=\"Execution client is not syncing\" prefix=powchain\ntime=\"2022-12-23 10:43:38\" level=info msg=\"Peer summary\" activePeers=28 inbound=2 outbound=26 prefix=p2p\ntime=\"2022-12-23 10:43:49\" level=debug msg=\"Latest eth1 chain event\" blockHash=0x5ff2da4719150a5d0d3e4b6987cde6f51f273fa523e80505d9ee743abd85afe5 blockNumber=3007 prefix=powchain\ntime=\"2022-12-23 10:43:49\" level=warning msg=\"Execution client is not syncing\" prefix=powchain\ntime=\"2022-12-23 10:43:54\" level=info msg=\"Processing block batch of size 54 starting from  0x1f1b4b7c... 4161/7114 - estimated time remaining 18m13s\" blocksPerSecond=2.7 peers=28 prefix=initial-sync\ntime=\"2022-12-23 10:43:55\" level=info msg=\"Saved state in DB\" diff=31 endSlot=2047 prefix=state-gen root=b0bc45b557f0 slot=409```",
        "created_at": "2022-12-23T10:44:01.504000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "rate limit might be present on the prysm side of things?",
        "created_at": "2022-12-23T10:44:13.964000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "both geth and nethermind with prysm have caught up to the block of besu. So besu is significantly slower than the other two ELs.",
        "created_at": "2022-12-23T10:45:27.790000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "are geth and nethermind reporting reorgs with prysm? There seems to be a reorg every 50 blocks or so on besu...\n```\n2022-12-23 10:49:18.978+00:00 | vert.x-worker-thread-0 | WARN  | DefaultBlockchain | Chain Reorganization +52 new / -0 old\n       Old - hash: 0xe33d163fcb5d3cd5249422e91f2023d9c723c860d556bab673fe31f5eaa78ee9, height: 3504\n       New - hash: 0xf7cde82ea1aa6425ff9313492c6650eebf6e60a36282e06d9825ee04b21da397, height: 3556\n  Ancestor - hash: 0xe33d163fcb5d3cd5249422e91f2023d9c723c860d556bab673fe31f5eaa78ee9, height: 3504\n```",
        "created_at": "2022-12-23T10:49:42.200000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "just got lighthouse-besu in sync after a variety of restarts üôÇ",
        "created_at": "2022-12-23T10:50:13.835000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e done, it is the same image. Fix is needed only for syncing nodes",
        "created_at": "2022-12-23T10:50:20.271000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "not a single reorg in geth/prysm.",
        "created_at": "2022-12-23T10:50:55.561000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "geth/prysm is up to head now .",
        "created_at": "2022-12-23T10:51:17.256000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ok so this looks fine on my end. Rate limiting is fine, we start requesting blocks on the higher end",
        "created_at": "2022-12-23T10:52:10.645000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "after quick look to lodestar\u003c\u003enethermind -\u003e no reorgs",
        "created_at": "2022-12-23T10:52:11.069000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah there is def. something fishy here, as there hasn't been this many reorgs.",
        "created_at": "2022-12-23T10:52:50.738000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I can take a look at the Besu node",
        "created_at": "2022-12-23T10:53:07.149000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "if besu is dealing with lots of forks then it tends to thrash bonsai world state back and forth so that might be why it's slow since bonsai only keeps current world state and has to calculate/play diffs as it moves between forks",
        "created_at": "2022-12-23T10:54:04.832000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "what would make besu think there are lots of forks tho?",
        "created_at": "2022-12-23T10:54:40.041000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@412614104222531604\u003e you wiped completely prysm-geth-1 and restarted them both? prysm-besu is replaying lots of states at epoch boundaries",
        "created_at": "2022-12-23T10:58:51.786000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yes. geth and nethermind",
        "created_at": "2022-12-23T10:59:01.892000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "It's weird they are not really reorgs because it's always 50+ new and 0 old so maybe that log is misleading",
        "created_at": "2022-12-23T11:00:22.391000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Alright I see the state replays on prysm/geth as well, are you sure these are reorgs \u003c@285371783098662913\u003e? I see the state replays but I don't see any reorg logs",
        "created_at": "2022-12-23T11:01:09.924000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@341574016160497665\u003e  Wrong Simon",
        "created_at": "2022-12-23T11:01:24.599000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'm not familiar with this bit of besu, but here's the logic that triggers that log...\n```\n    if ((newChainHeadWithReceipts.getNumber() - commonAncestorWithReceipts.getNumber()\n                \u003e reorgLoggingThreshold\n            || oldChainWithReceipts.getNumber() - commonAncestorWithReceipts.getNumber()\n                \u003e reorgLoggingThreshold)\n        \u0026\u0026 LOG.isWarnEnabled()) {\n      LOG.warn(\n          \"Chain Reorganization +{} new / -{} old\\n{}\",\n          newChainHeadWithReceipts.getNumber() - commonAncestorWithReceipts.getNumber(),\n          oldChainWithReceipts.getNumber() - commonAncestorWithReceipts.getNumber(),\n```",
        "created_at": "2022-12-23T11:03:15.604000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "Is prysm sending the blocks in batches maybe?",
        "created_at": "2022-12-23T11:03:38.497000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "We send them sequentially, but are processing them in batches so the calls will come quickly one after the other.  These refer to FCU only right? or newPayload matters here as well?",
        "created_at": "2022-12-23T11:05:34.458000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "At a glance, looks like it's just FCU yeh",
        "created_at": "2022-12-23T11:07:45.529000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "we only trigger that code above if we think it's a reorg, so maybe we're receiving them out of order for some reason",
        "created_at": "2022-12-23T11:08:20.984000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "ah no, then that's it, give me a sec",
        "created_at": "2022-12-23T11:08:58.730000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "pretty sure our engine API processing is all sequential",
        "created_at": "2022-12-23T11:09:30.085000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "so what happens on init sync (when we are syncing in batches to catch up to head) is that we get a full batch of sequential blocks. We send to the engine `notify_NewPayload` for each block sequentially, and only FCU on the last one",
        "created_at": "2022-12-23T11:10:33.320000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "perhaps this makes Besu believe that there's a reorg?",
        "created_at": "2022-12-23T11:10:44.160000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "could be, possibly we're expecting a FCU per newpayload",
        "created_at": "2022-12-23T11:11:07.133000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "yeah we aren't doing that when syncing on batches",
        "created_at": "2022-12-23T11:11:28.264000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "it'd be good to check if that's the culprit on Besu's side, cause I also need to diagnose why all these state replays on prysm's logs and would want to isolate it from Besus' reporting reorgs",
        "created_at": "2022-12-23T11:12:11.632000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "ah yeh, I think we process newPayload but don't actually import until the FCU is received so if that's true then we'll think chain head is ~50 blocks old when we receive the next FCU and consider it a reorg",
        "created_at": "2022-12-23T11:12:41.933000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "You can check the snooper container's logs to compare when what happens üòÑ",
        "created_at": "2022-12-23T11:15:02.097000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "It'll dump traffic sent to the engine api",
        "created_at": "2022-12-23T11:15:12.808000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "It would be interesting to check if lodestar/teku always sent a FCU after each newPayload, but I strongly suspect that it the case based on the code",
        "created_at": "2022-12-23T11:16:07.847000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Adrian once told me that Teku does not have different block processing logic for batches or regular sync, so I would bet a beer on that comment that Teku sends FCU on every block",
        "created_at": "2022-12-23T11:20:18.071000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "It's probably the combination of one FCU per batch plus bonsai storage getting thrashed.",
        "created_at": "2022-12-23T11:22:02.835000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "I'd have to dig into the code more or speak to a besu dev who knows bonsai and the reorg logic well to confirm. That probably want happen this year unfortunately due to holidays.",
        "created_at": "2022-12-23T11:24:03.370000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "at least it's progressing...only 1000 more blocks to go üòÅ",
        "created_at": "2022-12-23T11:25:09.456000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I don't understand how this isn't triggered now though, we have plenty of Besu users, is the Bonsai tree logic not on mainnet today?",
        "created_at": "2022-12-23T11:25:26.119000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "probably also FULL sync mode as well",
        "created_at": "2022-12-23T11:25:54.561000+00:00",
        "attachments": null
    },
    {
        "author": "siladu",
        "category": "Testing",
        "parent": "",
        "content": "most stakers will be on bonsai with checkpoint sync (snap sync from beacon deposit contract block), and so for world state we start close to head, from the pivot block",
        "created_at": "2022-12-23T11:28:14.592000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah we don't have snapsync enabled on any of our ELs on the devnets",
        "created_at": "2022-12-23T11:29:25.033000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we are looking good guys",
        "created_at": "2022-12-23T13:50:43.367000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_2022-12-23_at_14.50.34.png",
                "content": "02404a1a37b90d84d46e80cedcdf0078caa894bdd539557e2a2aa922ff334a1c"
            }
        ]
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Tried to make a withdrawal on geth teku and got ```These validators won't be able to be re-activated once this operation is complete.\nAre you sure you wish to continue (yes/no)?\nyes\nExit for validator 1 is invalid: Validator cannot exit until epoch 256```",
        "created_at": "2022-12-23T14:16:35.296000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "even though we have set ```MIN_VALIDATOR_WITHDRAWABILITY_DELAY: 1```",
        "created_at": "2022-12-23T14:16:45.826000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "haven't met with this issue previously",
        "created_at": "2022-12-23T14:16:58.451000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "ohhh nice, can you exit a validator from a different client then? better check if Teku splits off or not",
        "created_at": "2022-12-23T14:29:08.445000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "ah we are now at 256",
        "created_at": "2022-12-23T14:31:41.119000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "damn, should have check this a bit earlier.",
        "created_at": "2022-12-23T14:31:48.895000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "yeah now teku and prysm works both",
        "created_at": "2022-12-23T14:38:00.414000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ah, just missed out on epoch 256 damn",
        "created_at": "2022-12-23T14:38:11.077000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "It's not so important since anyway that limit holds when it counts",
        "created_at": "2022-12-23T14:43:03.248000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I'm just curious if teku has hardcoded the limit or not",
        "created_at": "2022-12-23T14:43:40.703000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "are there any plan to periodically re gossip the bls pool contents to other nodes?",
        "created_at": "2022-12-23T15:21:15.146000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I have submitted about 1000 BLS to execution changes and one of the teku nodes have crashed (possibly because of it) teku/nethermind-7 node. All other nodes seem to have received the BLS changes, some more than others but this one has an empty pool.",
        "created_at": "2022-12-23T15:23:13.907000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "quick wc shows what I mean:```ansible nethermind -i withdrawal-devnet-1/inventory/inventory.ini -m shell -a \"curl -s 127.0.0.1:4000/eth/v1/beacon/pool/bls_to_execution_changes | jq . | wc -l\"\nwithdrawal-devnet-1-prysm-nethermind-1 | CHANGED | rc=0 \u003e\u003e\n4044\nwithdrawal-devnet-1-lighthouse-nethermind-1 | CHANGED | rc=0 \u003e\u003e\n7884\nwithdrawal-devnet-1-lodestar-nethermind-1 | CHANGED | rc=0 \u003e\u003e\n7788\nwithdrawal-devnet-1-teku-nethermind-7 | CHANGED | rc=0 \u003e\u003e\n3\nwithdrawal-devnet-1-teku-nethermind-3 | CHANGED | rc=0 \u003e\u003e\n5732\nwithdrawal-devnet-1-teku-nethermind-1 | CHANGED | rc=0 \u003e\u003e\n5604\nwithdrawal-devnet-1-teku-nethermind-4 | CHANGED | rc=0 \u003e\u003e\n7484\nwithdrawal-devnet-1-teku-nethermind-6 | CHANGED | rc=0 \u003e\u003e\n7620\nwithdrawal-devnet-1-nimbus-nethermind-1 | CHANGED | rc=0 \u003e\u003e\n0\nwithdrawal-devnet-1-teku-nethermind-5 | CHANGED | rc=0 \u003e\u003e\n5324\nwithdrawal-devnet-1-teku-nethermind-2 | CHANGED | rc=0 \u003e\u003e\n6564```",
        "created_at": "2022-12-23T15:23:44.624000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "length of the pool should be `7628` at this point.",
        "created_at": "2022-12-23T15:24:02.722000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I don't think so.",
        "created_at": "2022-12-23T15:29:59.092000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "i can double check but im pretty sure that comes from the config it downloads from the client it connects to..",
        "created_at": "2022-12-23T19:47:00.868000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "mind you, i did just change that message so maybe i stuffed something up",
        "created_at": "2022-12-23T19:48:15.556000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "ok thats reading the wrong config item, and has for a while, will get a PR up for that",
        "created_at": "2022-12-23T19:57:12.265000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I tried to make a withdrawal in epoch 250ish and it didn‚Äôt let it",
        "created_at": "2022-12-23T19:57:16.124000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ah cool",
        "created_at": "2022-12-23T19:57:30.090000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#voluntary-exits was just checking before i push... spec uses `SHARD_COMMITTEE_PERIOD` to compute a minimum exit time, based on activation epoch, which is what teku is doing... so that's where the 256 comes from, it appears that's what we should be doing...\nwithdrwability delay is only used once the exit epoch is known, which is after that...",
        "created_at": "2022-12-23T20:12:34.624000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "that node seems to have restarted a bunch, no real exceptions to indicate why :/",
        "created_at": "2022-12-23T20:17:05.263000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Yeah if we had that wrong without reference tests failing it would be a major cause for panic.",
        "created_at": "2022-12-23T21:12:45.879000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "fair point",
        "created_at": "2022-12-23T21:30:24.573000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "I have managed to exit on devnet0 with actual withdrawals",
        "created_at": "2022-12-23T21:48:40.175000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Actually I might have never tried with teku.",
        "created_at": "2022-12-23T21:48:47.741000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "But other clients didn‚Äôt enforce this for sure",
        "created_at": "2022-12-23T21:48:58.647000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "They were all using the withdrawibilitydelay",
        "created_at": "2022-12-23T21:49:10.773000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "And used that from genesis to decide when to have withdrawals",
        "created_at": "2022-12-23T21:49:39.092000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I think you might have coincidentally exited after the shard committee period. That‚Äôs what the spec says and what all the clients do\n\nYou can see the check in Lighthouse here: \u003chttps://github.com/sigp/lighthouse/blob/unstable/consensus/state_processing/src/per_block_processing/verify_exit.rs\u003e",
        "created_at": "2022-12-23T22:19:19.635000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "Ah you might be right I have changed that too to 1.",
        "created_at": "2022-12-23T22:29:09.227000+00:00",
        "attachments": null
    }
]