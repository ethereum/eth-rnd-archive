[
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "I am seeing lodestar attest to bad blocks:\n```\nDEBUG sync: Gossip message was rejected agent=js-libp2p/0.36.2 error=bad block referenced in attestation data gossip score=0 multiaddress=/ip4/x.x.x.x/tcp/x peer id=xxx topic=/eth2/c2ce3aa8/beacon_aggregate_and_proof/ssz_snappy\nDEBUG sync: Gossip message was rejected agent=js-libp2p/0.36.2 error=bad block referenced in attestation data gossip score=0 multiaddress=/ip4/x.x.x.x/tcp/x  peer id=xxx topic=/eth2/c2ce3aa8/beacon_aggregate_and_proof/ssz_snappy\nDEBUG sync: Gossip message was rejected agent=js-libp2p/0.36.2 error=bad block referenced in attestation data gossip score=0 multiaddress=/ip4/x.x.x.x/tcp/x  peer id=xxx topic=/eth2/c2ce3aa8/beacon_aggregate_and_proof/ssz_snappy\n```\n\nThe block in question:\n\n```\nDEBUG sync: Received block blockSlot=3665805 graffiti=Nimbus/v22.7.0-9e6d9b-stateofus proposerIndex=191467 sinceSlotStartTime=2.893640219s\nDEBUG powchain: Latest eth1 chain event blockHash=0x96c3290f7e79a866a134a583dcb6dd577eb915fb36c5e979271d4ae2c50c44da blockNumber=7404349 difficulty=0\nDEBUG sync: Inserting in invalid block cache root=0x608e70b04b3912d8731efa17326004b444d30430e77f9a32acdf229404ce8c93\nERROR sync: Could not handle p2p pubsub error=could not process block: could not validate new payload: received an INVALID_BLOCK_HASH payload from execution engine topic=/eth2/c2ce3aa8/beacon_block/ssz_snappy\n```\nThe end result is that eventually gets banned and kicked out",
        "created_at": "2022-08-15T04:30:28.054000+00:00",
        "attachments": null
    },
    {
        "author": "philngo",
        "category": "Testing",
        "parent": "",
        "content": "Thanks \u003c@476250636548308992\u003e, I'll open up an issue for this.",
        "created_at": "2022-08-15T04:35:44.912000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "Testing",
        "parent": "",
        "content": "Does someone happen to have this block?",
        "created_at": "2022-08-15T07:30:51.498000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "we delete all invalid blocks, so prysm won't have them",
        "created_at": "2022-08-15T07:32:52.405000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "however this is our error\n\u003e could not process block: could not validate new payload: received an INVALID_BLOCK_HASH payload from execution engine",
        "created_at": "2022-08-15T07:32:59.108000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "the execution payload has an invalid block hash",
        "created_at": "2022-08-15T07:33:17.717000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Do you happen to know what slot it is? I can check if its in one of the nodes I have. Some of them dump invalid slots.",
        "created_at": "2022-08-15T08:46:44.220000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "`3665805`",
        "created_at": "2022-08-15T08:47:46.505000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e",
        "created_at": "2022-08-15T08:47:48.495000+00:00",
        "attachments": null
    },
    {
        "author": "tuyen4818",
        "category": "Testing",
        "parent": "",
        "content": "some lodestar nodes also see that block as invalid: `error: Block error slot=3665805, errCode=BLOCK_ERROR_EXECUTION_ERROR BLOCK_ERROR_EXECUTION_ERROR`, and validators of that node did not vote for that block `19:21:04.027[]                debug: Signed attestation slot=3665805, index=19, head=0x299b24a37e9cdcbaaa260967dac9e597f5c6f096212e49982ab3c4483dc41ecc, validatorIndex=260999`\n\nneed to know which validator that submit that attestation...",
        "created_at": "2022-08-15T08:49:07.964000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "I have the peer id",
        "created_at": "2022-08-15T08:49:54.794000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "would that help ?",
        "created_at": "2022-08-15T08:49:57.903000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "and the ip address",
        "created_at": "2022-08-15T08:50:02.433000+00:00",
        "attachments": null
    },
    {
        "author": "tuyen4818",
        "category": "Testing",
        "parent": "",
        "content": "yeah the ip address would help üëçüèª",
        "created_at": "2022-08-15T08:50:16.536000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "cool , will dm it to you",
        "created_at": "2022-08-15T08:50:25.144000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "hmm, weird - Nimbus doesn't see it as an invalid block (my Teku node does list it as empty, so presumibly detected as invalid). \n\nNimbus however has attested to it and it has the same `beacon_block_root`\n```\nNOT 2022-08-14 17:21:08.013+00:00 Aggregated attestation sent                attestation=\"(aggregation_bits: 0b1110111110111101111100111111111111111111110100100110111111101111001101011110111101011110110011011111110110011010111111000011001111011111111111111111011011110111110111111111111111011, data: (slot: 3665805, index: 61, beacon_block_root: \\\"299b24a3\\\", source: \\\"114555:a4ed419d\\\", target: \\\"114556:c6c6b000\\\"), signature: \\\"a399f258\\\")\" aggregator_index=9444 selection_proof=8c719f78 signature=95ae4ab8 delay=12ms227us542ns\n```",
        "created_at": "2022-08-15T08:55:08.639000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Nimbus returns a slot for this request: `curl localhost:4000/eth/v2/beacon/blocks/0x299b24a37e9cdcbaaa260967dac9e597f5c6f096212e49982ab3c4483dc41ecc`\n\nI'm assuming that's what you guys would need?",
        "created_at": "2022-08-15T08:56:37.031000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "It appears that a nimbus node produced it :\n\u003e graffiti=Nimbus/v22.7.0-9e6d9b-stateofus",
        "created_at": "2022-08-15T09:00:20.430000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ah I see my mistake now... the slot number is off in the json dump",
        "created_at": "2022-08-15T09:00:48.988000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I would not suspect on the CL here: if the EL is faulty it will attest happily, regardless of client. Presumably the EL that produced this block will render it as VALID. Was this Erigon again?",
        "created_at": "2022-08-15T12:08:44.998000+00:00",
        "attachments": null
    },
    {
        "author": "dapplion",
        "category": "Testing",
        "parent": "",
        "content": "Hey Geth returns an error on exchangeTransitionConfiguration on TTD mismatch, instead of just returning the configuration. Is that expected behaviour? According to the spec \n\n\u003e Execution Layer client software MUST respond with configurable setting values that are set according to the Client software configuration section of EIP-3675.",
        "created_at": "2022-08-15T12:32:55.308000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "It might be because of TTD is not configured, related PR https://github.com/ethereum/execution-apis/pull/285",
        "created_at": "2022-08-15T13:24:48.283000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, anyone else see this invalid log bloom on goerli?\n\nhttps://gist.github.com/ryanschneider/f79a3aca048331efb29ad503fc03c546\n\n\u003e WARN [08-15|14:13:12.665] NewPayloadV1: inserting block failed     error=\"invalid bloom (remote: 002000842000000080000004800000000019802021000880280101000804200000101000010102000000000000000000000000001102000000100214002c604a008458020432000208020609002040680000100003059000000024808880008030020000020a0440080001000000aa09400040000024026100010210004000000000000200010001004000110000121200802c8101000008000804c91000800082004000100000100008200040004080000020020004200000000000402800210020400200820000102000400004000400501080020020100001410000096140001830004012060100c010002100080000007000005120400000000000000081  local: 002000842000000080040004800000000009802021000880280101000804200000101000010102000000000000000000000010000102000000100214002c604a00845802043200020802060900204068000010000305900000002480888000803002000002080440080001000000a809400040000024026100010210204008000000040200010001004000110000121200802c8101000008000004c91000800082004000100000100008200040004080000020020004210000000000402800010020400200820000102000400000000400501080020020100001410000096140001830004012060100c010002100080000007000001120400000000080000081)\"",
        "created_at": "2022-08-15T22:08:56.055000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "I see two other cases where it happened over the weekend as well:\n\n```\nNumber: 7409698\nHash: 0x1e7504b3f0944ea4e81fb3930175770e52ba3b34ce5acef738d31ba1c46f75d5\n\nNumber: 7403441\nHash: 0xf857a46314e4b8d53fec7884ddc3a8229e14e435dd3caa2beaf0a9152443293a\n```",
        "created_at": "2022-08-15T22:11:11.028000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Also another `invalid receipt root hash`:  https://gist.github.com/ryanschneider/4f37e121b13cabb057df327a487cc1c9",
        "created_at": "2022-08-15T22:15:48.255000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "The invalid blooms seem to be coming from: https://goerli.etherscan.io/address/0xbabad228c66ea0066758ec6e0e76fa8205c56740#mine",
        "created_at": "2022-08-15T22:31:35.853000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Which according to goerli.beaconcha.in is part of this validator set: https://goerli.etherscan.io/tx/0x24bc2d25c40535a94fe773242a479c2723abf08f098406b990aa7d644c56a149",
        "created_at": "2022-08-15T22:33:35.083000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "Looking at the CL logs at the same time, looks like this was the slot: https://goerli.beaconcha.in/block/3672066 so this appears to be the offending validator: https://goerli.beaconcha.in/validator/377054",
        "created_at": "2022-08-15T22:38:09.078000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": ".. but that's where the trail runs cold for me, I'm not familiar enough w/ the CL layer to follow it any deeper, perhaps someone else can?",
        "created_at": "2022-08-15T22:40:37.060000+00:00",
        "attachments": null
    }
]