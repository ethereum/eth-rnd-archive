[
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I've been testing multiple clients today and it looks like most clients don't use the JWT when connecting to the eth endpoint pre-merge.\nThis seems to be the case for Lodestar, Nimbus and Prysm, all of them get `Forbidden: missing token`. I can't test Teku atm (no kiln/merge-devnet definition and I don't know how to create my own).\nOnly Lighthouse works for me (on branch `merge-devnet-5`)",
        "created_at": "2022-03-04T08:40:15.145000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "But lighthouse gives me this error \n```\nMar 04 08:37:07.787 ERRO Unable to get transition config         execution_endpoint: 0, error: Api { id: \"http://127.0.0.1:8551/\", error: Json(Error(\"missing field `number`\", line: 0, column: 0)) }, service: exec\n```",
        "created_at": "2022-03-04T08:41:35.087000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "^^^ what is the expectation or lets say the appropriate UX? the jwt auth should be used across all endpoints if the secret is provided? what if the endpoints for eth_ and engine_ calls are different",
        "created_at": "2022-03-04T08:44:39.278000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "just to provide some more context for lodestar, right now it wouldn't bundle jwt auth for eth_ requests even post-merge, only engine_ ones (but all that is easily fixable, just need to be on page for expected UX ðŸ™‚ )",
        "created_at": "2022-03-04T08:46:23.440000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "This is our config\n```\ntype TransitionConfigurationV1 struct {\n    TerminalTotalDifficulty *hexutil.Big   `json:\"terminalTotalDifficulty\"`\n    TerminalBlockHash       common.Hash    `json:\"terminalBlockHash\"`\n    TerminalBlockNumber     hexutil.Uint64 `json:\"terminalBlockNumber\"`\n}\n```",
        "created_at": "2022-03-04T08:46:23.602000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Teku will use auth on all requests to the engine api. We still have a separate eth1-endpoint that connects to the normal api though in the same way it does ore merge. We can likely combine them at some point but want to let things settle a little.",
        "created_at": "2022-03-04T08:47:51.425000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I think lodestar is expected as they allow for specifying the providerUrl and execution.Urls separately",
        "created_at": "2022-03-04T08:48:15.009000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Could you create an example on how to run teku on merge-devnet-5 with auth? I'm trying to put together a guide that I can quickly update to kiln once the testnet definitions are out",
        "created_at": "2022-03-04T08:49:27.340000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Testing",
        "parent": "",
        "content": "checking..",
        "created_at": "2022-03-04T08:49:58.257000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "```\nnetwork: \"https://raw.githubusercontent.com/eth-clients/merge-testnets/main/merge-devnet-5/config.yaml\"\ninitial-state: \"https://raw.githubusercontent.com/eth-clients/merge-testnets/main/merge-devnet-5/genesis.ssz\"\np2p-discovery-bootnodes:\n  - enr:-Iq4QMCTfIMXnow27baRUb35Q8iiFHSIDBJh6hQM5Axohhf4b6Kr_cOCu0htQ5WvVqKvFgY28893DHAg8gnBAXsAVqmGAX53x8JggmlkgnY0gmlwhLKAlv6Jc2VjcDI1NmsxoQK6S-Cii_KmfFdUJL2TANL3ksaKUnNXvTCv1tLwXs0QgIN1ZHCCIyk\n  - enr:-KG4QL7_0L_f8Ug9ZHJt03upYa0PdpmEl5wInTejEsKE5X8MYbBU0FOuSAafsQxbQiWsY3326s41Kj-X28lYe_91AgIDhGV0aDKQ7zvXpGEABXAKAAAAAAAAAIJpZIJ2NIJpcIRA44B-iXNlY3AyNTZrMaEDWxFbrX3tif8zq7Q8fTqk00dAU3q6az5S9VqeDZ2rx9-DdGNwgiMog3VkcIIjKA\n  - enr:-LK4QDHftmIXxcbqaI4qGj0lcyM66-OYVFP-neUNLqhaDO8qFpRU6uRQc4gsUrIHycXZVTqyB8gUoa13trsVFj_pLcQBh2F0dG5ldHOIAAAAAAAAAACEZXRoMpDvO9ekYQAFcAoAAAAAAAAAgmlkgnY0gmlwhKRcwTOJc2VjcDI1NmsxoQLYzPfRQpYidSbLk3dYmMkuVILl7h_ZXzKWcWUtpwHFjYN0Y3CCIyiDdWRwgiMo\n  - enr:-MK4QHnkHjBWGHeleYfnw05TTxMFnFQoJpKYd7bg3M_8RMXZfzhYK3aXdz5cBX8NZuBFk9lSzqlh4hXiB_nRbOGI-BuGAX8HlAT3h2F0dG5ldHOI__________-EZXRoMpDvO9ekYQAFcAoAAAAAAAAAgmlkgnY0gmlwhKRczoeJc2VjcDI1NmsxoQJSZ0tu9MINVtKCJDDB5LL9XLNi8PYu8Y6cyyd0gqhtMIhzeW5jbmV0cwCDdGNwgiMog3VkcIIjKA==\n  - enr:-Ku4QOklfyM8FkN9Te3s63nQ3gpQBjyJ7LFJLIr2aIwi_RnxZy6tdhd3VkkwH3VWEDGrHqGp0Hficq8yiICMOyOlp1kFh2F0dG5ldHOIAAAAAAAAAACEZXRoMpDvO9ekYQAFcAoAAAAAAAAAgmlkgnY0gmlwhKRcwUiJc2VjcDI1NmsxoQLv43VYTS-uAdPKZlS7LETz0QhKrqqZLAB1-cAVn25IKoN0Y3CCIyg\n\nXee-endpoint: http://127.0.0.1:8551\nXee-version: kilnv2\nXee-jwt-secret: /Users/aj/Documents/code/merge-scripts/merge-devnet-4/ee-jwt-secret.hex\n```\nThat's with the full kilnv2 spec.",
        "created_at": "2022-03-04T08:53:47.470000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "This was a bug I fixed several hours ago. I can confirm that geth+lighthouse transition config endpoint is wokring.",
        "created_at": "2022-03-04T09:21:52.584000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Nice, which branch?",
        "created_at": "2022-03-04T09:22:19.534000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "`merge-devnet-5`",
        "created_at": "2022-03-04T09:22:31.227000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yep wÃ¶rks!",
        "created_at": "2022-03-04T09:23:28.101000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "The actual PR with that change is here: https://github.com/sigp/lighthouse/pull/3047\n\nHowever, I suggest using `merge-devnet-5`. I've been trying to keep that up-to-date with small changes that haven't gone through the review process yet.",
        "created_at": "2022-03-04T09:24:04.621000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I just pushed `merge-devnet-5` again, it's possible that the fix wasn't present. It should be now though.",
        "created_at": "2022-03-04T09:24:42.628000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "WÃ¶rks now!",
        "created_at": "2022-03-04T09:30:51.847000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "Hi Marius, we separate the engine endpoint from the eth endpoint in Prysm, but plan on combining these. Our flags are --execution-provider and --http-web3provider",
        "created_at": "2022-03-04T14:44:29.786000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "we support the --jwt-secret flag pointing to a file with a hex secret in it",
        "created_at": "2022-03-04T14:44:46.814000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ah I see, so the same as lodestar. I will try post-merge then",
        "created_at": "2022-03-04T14:45:38.569000+00:00",
        "attachments": null
    }
]