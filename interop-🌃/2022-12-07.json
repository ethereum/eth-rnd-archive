[
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "We added it to `eth_getBlockByHash`, but I think it will be a good occasion to switch to `getPayloadBodiesByRangeV1`and/or `getPayloadBodiesByHashV1` https://github.com/ethereum/execution-apis/pull/218\n\nThese methods are easy to implement in EL. Both methods are implemented in the Nethermind master branch. We need to merge them into the withdrawals branch. WDYT \u003c@755590043632140352\u003e \u003c@360491619402776577\u003e \u003c@554799849288105986\u003e \u003c@792822129019584562\u003e ?",
        "created_at": "2022-12-07T10:24:43.151000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "by range is also easy, right?",
        "created_at": "2022-12-07T10:26:40.426000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I agree it would be great to have these on Capella if we could make this in scope and every EL agrees, but we would also need to change our way of dealing with historic ranges of blocks. \u003c@308223150725005322\u003e do you think it will be easy to change this quickly in the capella branch?",
        "created_at": "2022-12-07T10:28:19.372000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I implemented `getPayloadBodies` in geth already (not in master) but from here: https://github.com/ethereum/execution-apis/pull/146/files\nSo we should get the spec right and I'll implement and merge it asap",
        "created_at": "2022-12-07T10:28:55.155000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "We can start using these methods even before Capella, there is no need for hardfork",
        "created_at": "2022-12-07T10:29:23.421000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "this would deal with the engine api not the beacon api",
        "created_at": "2022-12-07T10:30:10.302000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "we batch json-rpc requests currently so that we can request large ranges at once",
        "created_at": "2022-12-07T10:30:37.930000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "The issue is reconstruction of historic block's for serving peers",
        "created_at": "2022-12-07T10:30:37.976000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "Yes that is batched",
        "created_at": "2022-12-07T10:30:50.114000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "When we use blinded blocks",
        "created_at": "2022-12-07T10:30:53.022000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "post merge testnet also working with the BLS to execution just fine now. Lodestar, lh, teku handles it all well.",
        "created_at": "2022-12-07T10:31:27.812000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i am a bit confused, why are these methods needed in engine api?",
        "created_at": "2022-12-07T10:34:42.868000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "in case CL prunes their beacon blocks to keep them devoid of payload bodies?",
        "created_at": "2022-12-07T10:35:08.567000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "yes https://github.com/NethermindEth/nethermind/pull/4939/files ðŸ˜‰ The only ToDo thing is benchmarking. Of course, I expect better performance than doing many eth_getBlock* calls",
        "created_at": "2022-12-07T10:35:18.903000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "even in that case, shouldn't these be part of eth_ instead?",
        "created_at": "2022-12-07T10:35:57.363000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "They are needed in the beacon API if you want to reconstruct a range of blocks",
        "created_at": "2022-12-07T10:36:13.774000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "yeah, but it would be great to test them on Shanghai/withdrawals devnets;)",
        "created_at": "2022-12-07T10:36:15.147000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Agree",
        "created_at": "2022-12-07T10:36:26.444000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "So can we finalize the spec?",
        "created_at": "2022-12-07T10:37:08.064000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "ahhh these are primarily eth_ namespaced methods, but also exposed on engine api?",
        "created_at": "2022-12-07T10:37:16.048000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Certainly, but I'm not sure if all ELs are on board with these changes. Marius was adamantly against these for Bellatrix",
        "created_at": "2022-12-07T10:37:48.044000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "so would these be available on eth_ namespaces as well?",
        "created_at": "2022-12-07T10:38:00.742000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "He seems to change his mind ðŸ™‚",
        "created_at": "2022-12-07T10:38:19.383000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I don't think we will be checking the El for availability of the method, most likely will deploy this once all serve it",
        "created_at": "2022-12-07T10:38:37.492000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I was against it because of complexity reasons back then iirc (complexity around the merge)",
        "created_at": "2022-12-07T10:38:50.027000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, I'm not saying it was wrong, just that the same reasons apply for Capella",
        "created_at": "2022-12-07T10:39:20.274000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@\u0026688101493978562687\u003e \u003c@\u0026836981603216654336\u003e any opposition to implement this PR from your end https://github.com/ethereum/execution-apis/pull/218",
        "created_at": "2022-12-07T10:39:28.214000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "yeah, it will be very messy for us to implement if an EL supports it or not",
        "created_at": "2022-12-07T10:39:39.396000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Makes sense, Marek says that both are easy to be implemented, there should be no optionality if this is easy for every other EL too",
        "created_at": "2022-12-07T10:40:28.134000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Note that there are two methods. One is mandatory, another one is suggested to be optional in case if it is hard to be implemented. I feel like if it is not then support of both should be mandated",
        "created_at": "2022-12-07T10:41:46.243000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@758579010027782144\u003e ping me when you guys have these on your capella branches, we can probably test a branch on the devnet even if not all EL clients implement it",
        "created_at": "2022-12-07T10:42:51.681000+00:00",
        "attachments": null
    },
    {
        "author": "yperbasis",
        "category": "Testing",
        "parent": "",
        "content": "Fine with Erigon",
        "created_at": "2022-12-07T10:43:16.353000+00:00",
        "attachments": null
    },
    {
        "author": "funnygiulio",
        "category": "Testing",
        "parent": "",
        "content": "We already have a prototype of that, because it was discussed in the past and I think we should have removed but laziness got the best of me ðŸ™‚",
        "created_at": "2022-12-07T10:45:05.712000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "no opposition from Besu. I assume these are to be delivered whenever possible, that the CL isn't blocked waiting for them?",
        "created_at": "2022-12-07T13:27:17.270000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "CL might be blocked by `eth_getBlockByHash` not returning withdrawals. Implementing this proposal with `withdrawals` appended to block body can be one of the ways to unblock CL. The other way, obviously, is to add withdrawals to `eth_getBlockByHash`.\n\nCL should heavily rely on deduplication to be blocked, not sure if this is the case",
        "created_at": "2022-12-07T13:31:10.291000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "oh \u003c@755590043632140352\u003e I merged withdrawals into getBlockByHash",
        "created_at": "2022-12-07T13:32:14.686000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/lightclient/go-ethereum/tree/withdrawals-timestamp",
        "created_at": "2022-12-07T13:32:46.371000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "everyone calm down, CL is unblocked now ðŸ˜€",
        "created_at": "2022-12-07T13:33:16.840000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "thanks a lot, I think Radek is trying interop with it right now",
        "created_at": "2022-12-07T13:41:16.100000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Testing",
        "parent": "",
        "content": "it works, thanks a lot \u003c@360491619402776577\u003e",
        "created_at": "2022-12-07T13:55:03.220000+00:00",
        "attachments": null
    }
]