[
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@300026497274478592\u003e \u003c@827653956955406406\u003e (which one is you?) Could you guys please take a look at this issue? https://github.com/prysmaticlabs/prysm/issues/11516. This is a very strange combo running prysm beacon, LightHouse validator and Besu. What worries me is that Besu's log does not show any call to FCU. If that's the case then prysm has a pretty bad bug but I can't think of any scenario where we wouldn't call FCU. I left my analysis there. It seems to me that Besu is being requested a block and doesn't have any time, so it is sending an empty block and then it produces one with transactions 3.5 seconds later, but by then the block was already published with no transactions. If Prysm didn't send previously FCU then I'd understand this behavior, but from prysm logs I expect Prysm sent FCU with the identifier about 11 seconds before.",
        "created_at": "2022-09-30T12:24:10.487000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@300026497274478592\u003e I think you can disregard that for a little bit since it seems that it's the combination prysm/lighthouse that's at fault, and not Besu here.",
        "created_at": "2022-09-30T13:11:53.459000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "But I would still want confirmation on the lack of FCU logged by Besu, Prysm's bug with the beacon API is responsible for Besu not having time to prepare the block, but we can't explain the lack of FCU logs, Prysm should have been sending FCU on each received block",
        "created_at": "2022-09-30T13:21:15.864000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "Besu has a configurable interval for logging FCUs, default is the latest one every 60s",
        "created_at": "2022-09-30T15:08:43.108000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "whoops, nope. not configurable. ðŸ˜¦",
        "created_at": "2022-09-30T15:09:40.426000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "So if you're not seeing any at all, then they aren't being sent.",
        "created_at": "2022-09-30T15:10:16.991000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "if you're seeing fewer than you expect then thats on us.",
        "created_at": "2022-09-30T15:10:30.872000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Ah perfect! That explains the whole issue then. We can close that issue when Terence's PR merges",
        "created_at": "2022-09-30T15:11:37.759000+00:00",
        "attachments": null
    },
    {
        "author": "robocopsgonemad",
        "category": "Testing",
        "parent": "",
        "content": "the UX here seems..... suboptimal, we will reconsider it. ðŸ™‚",
        "created_at": "2022-09-30T15:12:56.550000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "I was just worried cause the underlying bug is actually we don't send a preparePayload when the validator client is not prysm. And since I wasn't seeing all FCUs I panicked we didn't send FCUs and that couldn't be explained. I'm surprised this bug didn't surface before. I suppose vouch never proposes a block with Prysm cc \u003c@144468805697929216\u003e",
        "created_at": "2022-09-30T15:16:57.278000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/prysmaticlabs/prysm/issues/11481 was stopping us from proposing blocks with prysm in our configuration.",
        "created_at": "2022-09-30T15:22:51.392000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "That's a separate issue. It seems that any vc connected to prysm via the beacon API will produce empty blocks essentially.",
        "created_at": "2022-09-30T15:25:22.136000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Ah okay, never got any further than that error so never received blocks of any variety from the beacon API.",
        "created_at": "2022-09-30T16:06:50.866000+00:00",
        "attachments": null
    }
]