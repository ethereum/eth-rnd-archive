[
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I'm testing the authrpc port with Geth and LH on mainnet. Lighthouse is unhappy because Geth is expecting a `nil` TTD whilst Lighthouse expects this value https://github.com/ethereum/consensus-specs/blob/981b05afb01d5b19be3a5a60ccb12c3582e4c0cf/configs/mainnet.yaml#L16.",
        "created_at": "2022-07-28T01:02:26.005000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I'm guessing this is a specification issue?\n\n- CLs expect an unannounced TTD to be `2**256-2**10`\n- Is there any such specification for ELs?",
        "created_at": "2022-07-28T01:06:13.909000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "It seems that the `TransitionConfigurationV1` specification needs to be updated with either:\n\n1. Send placeholder TTD (`2**256-2**10`) when TTD is unannounced.\n2. Send `nil` TTD when TTD is announced.",
        "created_at": "2022-07-28T01:13:38.872000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "My preference is (1) since it means we don't need to change the type signatures of the `TransitionConfigurationV1` structure. However changing those is not a huge deal for us.",
        "created_at": "2022-07-28T01:15:28.777000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Separate topic: our tests noticed a change in Geth regarding an edge-case where fcU is provided before newPayload: https://github.com/ethereum/go-ethereum/issues/25427",
        "created_at": "2022-07-28T01:31:42.681000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I think (1) is also the value that's already present in the CL configs as a default, right?",
        "created_at": "2022-07-28T06:29:40.197000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Yep, that's were I got the value from: https://github.com/ethereum/consensus-specs/blob/981b05afb01d5b19be3a5a60ccb12c3582e4c0cf/configs/mainnet.yaml#L15-L16",
        "created_at": "2022-07-28T06:33:24.226000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "anyone from \u003c@\u0026595681804422479873\u003e wants to help debugging with me why our erigon+nimbus nodes on Ropsten are consistently 1-2 minutes behind the chain?",
        "created_at": "2022-07-28T07:56:18.286000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "I am provisioning extra debugging tools today, have 5 nodes, all with the same behaviour. I don't see that with other beacon nodes, so I assume it is Nimbus-specific.",
        "created_at": "2022-07-28T07:57:37.831000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "sure",
        "created_at": "2022-07-28T08:11:49.784000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "What is the case when this could happen on Goerly/Mainnet? Before users start to update their nodes, both CL and EL clients should have releases that are ready for the merge and include real TTD. Or is this only a test issue?",
        "created_at": "2022-07-28T08:19:24.157000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "If we can have EL+CL connect via the auth port prior to the TTD being set then users can be configuring their mainnet devops *today* in a way that will work for the merge. All they'll need is a binary update when the params are released.\n\nWe already have a bunch of users trying to get their mainnet setup working with a 1:1 EL:CL configuration via the auth port. I would love to encourage this sort of proactivness.\n\nAn option is for CLs to stop polling for `TransitionConfigurationV1` until the TTD is set. However it seems like it's within our grasp to agree on placeholder values and doing so will ensure that there's comms going through the auth port so that errors will surface if the JWT is incorrect (for example).",
        "created_at": "2022-07-28T09:08:50.344000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Oh, I completely missed this case. I am in favour of users switching to auth port prior the merge, but `exchangeTransitionConfiguration` wasn't designed for the case when it is being called before the TDD is defined. I am ok with having a placeholder on EL side if this is easy to do thing. Btw, the CL placeholder was changed from `2**256 - 1` to `2**256 - 2**10` for testing purposes (this is in case if somebody asks for the rationale of having this odd value as a placeholder)",
        "created_at": "2022-07-28T09:14:44.233000+00:00",
        "attachments": null
    },
    {
        "author": "daniellehrner",
        "category": "Testing",
        "parent": "",
        "content": "Do all the CL clients have already set this placeholder TTD for mainnet? If yes, in Besu it's easy to set it.",
        "created_at": "2022-07-28T09:18:38.713000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Yes, all CLs should have it as a placeholder because CL's config is sourced from one place",
        "created_at": "2022-07-28T09:21:16.225000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I guess we can avoid changing the spec, but rather have this value set as a placeholder in every EL codebase",
        "created_at": "2022-07-28T09:21:58.152000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "Testing",
        "parent": "",
        "content": "I will add it in Nethermind ðŸ˜‰",
        "created_at": "2022-07-28T09:43:46.305000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Deprecation notice for goerli-shadow-fork-5! If someone is still actively testing something on it, please do let me know. \n\nWe'd still have mainnet-shadow-fork-10 for testing. Additionally we will spin up goerli-shadow-fork-6 next week (configs on monday).",
        "created_at": "2022-07-28T10:01:25.633000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "I have one issue with \u003c@\u0026836981489430036500\u003e that happens rarely. But basically for a long time, it only sends the `engine_exchangeTransitionConfigurationV1` once a minute and no other requests to the EL. EL responds correctly (same config).",
        "created_at": "2022-07-28T10:11:03.463000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "can't pinpoint what causes that",
        "created_at": "2022-07-28T10:11:22.028000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "basically only that from json_snoop\n```\nJul 28 10:11:33.978 2022 REQUEST\n{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"engine_exchangeTransitionConfigurationV1\",\n  \"params\": [\n    {\n      \"terminalTotalDifficulty\": \"0xb1a2bc2ec50000\",\n      \"terminalBlockHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n      \"terminalBlockNumber\": \"0x0\"\n    }\n  ],\n  \"id\": 4571\n}\n\nJul 28 10:11:33.978 2022 RESPONSE\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 4571,\n  \"result\": {\n    \"terminalTotalDifficulty\": \"0xb1a2bc2ec50000\",\n    \"terminalBlockHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n    \"terminalBlockNumber\": \"0x0\"\n  }\n}\n```\n\nonce a minute",
        "created_at": "2022-07-28T10:12:28.559000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Testing",
        "parent": "",
        "content": "teku log is flooded with exceptions",
        "created_at": "2022-07-28T10:15:06.954000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "8d6ac7554e4966e553427306fb643cb5fdcca01179e2997958dd679c156e4af1"
            }
        ]
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "A couple of RFCs around Engine API statuses:",
        "created_at": "2022-07-28T11:40:46.352000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethereum/execution-apis/issues/270\nhttps://github.com/ethereum/execution-apis/issues/271",
        "created_at": "2022-07-28T11:40:55.546000+00:00",
        "attachments": null
    },
    {
        "author": "suburbandad_",
        "category": "Testing",
        "parent": "",
        "content": "would someone confirm this is the correct engine_exchangeTransitionConfigurationV1 response when there is no TTD set?\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"result\": {\n        \"terminalTotalDifficulty\": \"0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbff\",\n        \"terminalBlockHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\n        \"terminalBlockNumber\": \"0x0\"\n    }\n}\n```",
        "created_at": "2022-07-28T20:55:39.905000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "From the MainNet config (https://github.com/ethereum/consensus-specs/blob/dev/configs/mainnet.yaml) it's 115792089237316195423570985008687907853269984665640564039457584007913129638912 in decimal which is `0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc00` in hex.",
        "created_at": "2022-07-28T22:36:04.951000+00:00",
        "attachments": null
    }
]