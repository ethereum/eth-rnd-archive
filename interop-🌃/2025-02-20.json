[
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "I have just been looking through all our logs and errors in processing blocks for devnet-6. This slot stood out, since all our nodes reported this error. \nhttps://dora.pectra-devnet-6.ethpandaops.io/slot/73217\n\n```\nmessage=time=\"2025-02-13 21:34:24\" level=debug msg=\"Received block\" blockSlot=73217 graffiti=\"lighthouse-geth-4\" prefix=sync proposerIndex=21387 sinceSlotStartTime=791.41939ms validationTime=5.236605ms\n\nmessage=time=\"2025-02-13 21:34:24\" level=error msg=\"Got a validation error in newPayload\" error=\"InvalidStateRoot: State root in header does not match. Expected 0x7b17fe66f263c565b3443e0b71f511d4d5b2b1d8a1b5ea702737ba53ffee4a57, got 0x195f12f13509f632fd0a89efcf921768117e9d5b2e3e0c45ee9da3b1db0415fe\" prefix=execution\n\nmessage=time=\"2025-02-13 21:34:24\" level=warning msg=\"Pruned invalid blocks\" blockRoot=0xdafcea73ddb81137b4aa548b33378957a9fbe08e2275a63bed7acb1841f9d9ba invalidChildrenCount=0 prefix=blockchain\n\nmessage=time=\"2025-02-13 21:34:24\" level=warning msg=\"Writing invalid block to disk at /tmp/beacon_block_73217.ssz\" prefix=sync\n\nmessage=time=\"2025-02-13 21:34:24\" level=debug msg=\"Inserting in invalid block cache\" prefix=sync root=0xdafcea73ddb81137b4aa548b33378957a9fbe08e2275a63bed7acb1841f9d9ba\n\nmessage=time=\"2025-02-13 21:34:24\" level=error msg=\"Could not handle p2p pubsub\" error=\"could not notify the engine of the new payload: received an INVALID payload from execution engine\" prefix=sync topic=\"/eth2/e551da77/beacon_block/ssz_snappy\"\n```\nWas the root cause figured out for this since its a state root mismatch ?",
        "created_at": "2025-02-20T08:56:50.438000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "Nvm , it appears to be related to this:\nhttps://discord.com/channels/595666850260713488/892088344438255616/1339684283433881621",
        "created_at": "2025-02-20T09:06:09.579000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Testing",
        "parent": "",
        "content": "I think it was actually https://discord.com/channels/595666850260713488/1337407251886903347/1339666199528865855 we briefly allowed the mev-boost-relay to send blocks w/o validating them to allow us to bisect where the root mismatch was happening (we weren't sure if it was the builder or the relay that was calculating the root hash wrong).  Once we determined that it was the builder (since the blocks weren't accepted by the chain) we re-enabled validation on the relay and focus on the builder.  So TLDR if you see any invalid blocks around the 13th they were probably related to this.\n\nFor those curious, we did fix that issue but there's still one more corner case in rbuilder where it's occasionally generating incorrect root hash, likely related to us missing something in our upgrade from reth 1.1.5 to 1.2.0.  But the relay is correctly dropping those blocks so they aren't making it to the network, and we don't need to skip validation again so shouldn't see anything like this again.",
        "created_at": "2025-02-20T15:55:16.240000+00:00",
        "attachments": null
    }
]