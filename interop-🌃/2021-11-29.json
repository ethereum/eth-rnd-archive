[
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yes, but you need to let it run for a bit. It worked for me after a while, when the CL executed a ForkChoiceUpdated message I think",
        "created_at": "2021-11-29T10:05:28.983000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Hmm ok. So we probably still need to get one more fix on one side or the other then. Teku currently isnâ€™t calling forkChoiceUpdated on startup (but should) so unless it manages to import a block successfully it usually wonâ€™t call it. Since geth is rejecting the payloads we donâ€™t seem to manage to call fork choice updated. \nGiven the way we do optimistic sync there may be some timing situations where we do manage to trigger a forkChoiceUpdated which gets things working but itâ€™ll be stuck a fair bit I think.",
        "created_at": "2021-11-29T10:11:26.429000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Still thatâ€™s a great first step.",
        "created_at": "2021-11-29T10:11:41.992000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Am just resyncing my node and it looks like teku cached some state?\nWhat's the default datadir for teku?",
        "created_at": "2021-11-29T10:19:26.630000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Should be printed at the top of the logs but .local/share/teku",
        "created_at": "2021-11-29T10:51:00.245000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Or Library/teku if you are on a Mac.",
        "created_at": "2021-11-29T10:51:16.954000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "You can change it with â€”data-path",
        "created_at": "2021-11-29T10:51:27.663000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Looks good",
        "created_at": "2021-11-29T10:51:42.454000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "82M db for teku, 82 MB for geth, 1.9GB for lighthouse before I synced again, 800MB after. They seem to prune some data away on sync?",
        "created_at": "2021-11-29T10:52:47.872000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "Yeah by default Teku runs in PRUNE mode so it doesn't keep any finalized states.   You can use `--data-storage-mode ARCHIVE` if you want to keep them.",
        "created_at": "2021-11-29T10:53:38.698000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Testing",
        "parent": "",
        "content": "If you're using checkpoint sync (ie not syncing from genesis) Teku and Lighthouse will take a little while to download the historic blocks in the background as well.",
        "created_at": "2021-11-29T10:55:22.125000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "Under successfully you mean `VALID` or `SYNCING`? If geth returns `INVALID` in the case when the data is missing then it should rather be a fix in geth",
        "created_at": "2021-11-29T13:39:12.214000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "We're never returning invalid without an error, do you remember what the error was?",
        "created_at": "2021-11-29T13:40:30.759000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I think it was invalid parent maybe?",
        "created_at": "2021-11-29T13:40:41.291000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Testing",
        "parent": "",
        "content": "I'd say this is good ðŸ˜†\n\nThinking about this particular edge case. What if we switch the logic after the transition block gets finalized?\nSo, before the transition is finalized CL depends on EL in terms of block availability, while, thereafter, CL becomes responsible for block availability and this edge case is eliminated.",
        "created_at": "2021-11-29T13:48:28.889000+00:00",
        "attachments": null
    }
]