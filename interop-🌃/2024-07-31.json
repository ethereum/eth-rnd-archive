[
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Really? I see that Grandine only has some lag with EthereumJS and doesn't work with Reth, but other CL also doesn't work with Reth.",
        "created_at": "2024-07-31T06:24:00.211000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_from_2024-07-31_09-23-00.png",
                "content": "054016b67d961be2eb6b98996b3de6dd1e53a5a30e453f2f627ff418cc8ab61f"
            }
        ]
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2024-07-31T06:24:08.961000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_from_2024-07-31_09-22-34.png",
                "content": "9f25e013f9048134d933eb9739fc576cb4689f5bfb2ec0e67082d6b2b5757968"
            }
        ]
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@\u00261070471163219824730\u003e seems on it's own fork.",
        "created_at": "2024-07-31T06:24:45.104000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Reth has its issues, discussion in a thread. \n\nInteresting, I still had gradine issues last night...\n\nOh I think I might know what's up, how well does gradine do on a non finalizing network?\n\nThe only change I made last night was moving some reth validators to geth to get us above 66%. Seems like after that gradine is fine?",
        "created_at": "2024-07-31T06:34:36.769000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "We are not aware on issues during non-finalisation, but it would be nice to test it again.",
        "created_at": "2024-07-31T06:36:13.118000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "is it hard to move the validators back?",
        "created_at": "2024-07-31T06:36:29.753000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Sure, I can retry locally first and if not I'll move the vals back. (both easy to do)",
        "created_at": "2024-07-31T06:36:48.721000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "Also, did you see that block production issue again?",
        "created_at": "2024-07-31T06:38:17.465000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "when I wrote that it was synchronized with nothing. but apparently that's resolved itself somehow",
        "created_at": "2024-07-31T06:52:27.842000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "I'm not sure what Grandine logs, but this might be recorded there",
        "created_at": "2024-07-31T06:53:36.326000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "agreed, grandine was also synced with nothing when i checked. and the only network difference i know is non-finality vs finality",
        "created_at": "2024-07-31T07:07:03.900000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@\u0026814631391181930606\u003e any idea why Ethereumjs so often returns SYNCING on FCU?\n```\ndevops@grandine-ethereumjs-1 âžœ  ~ docker logs 1eb91f41849d | grep \"engine_forkchoiceUpdated returned SYNCING\" | wc -l\n\n938\n```",
        "created_at": "2024-07-31T07:21:57.723000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "if the block has high number of transactions, we return syncing since javascript evm execution will take quite a bit on ethereumjs side and the api will timeout",
        "created_at": "2024-07-31T07:26:53.178000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "ok, but this is normal on devnet-2 ?",
        "created_at": "2024-07-31T07:28:43.527000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i haven't seen the exact log but if ethereumjs recovers and there isn't forking then this is why it might return SYNCING",
        "created_at": "2024-07-31T07:29:32.769000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "I will look at the logs later on and confim if this is it or is there some other scenario",
        "created_at": "2024-07-31T07:30:43.922000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "does this still allow for eventual forward progress? this might also be an engine API question re what the correct stance on this is, since if it's on the canonical branch it could keep a CL in optimistic mode",
        "created_at": "2024-07-31T07:31:07.917000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "thanks, please check do you see anything abnormal  on grandine-ethereumjs-1.pectra-devnet-2.ethpandaops.io",
        "created_at": "2024-07-31T07:31:21.105000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "for us it's strange that it's always SYNCING",
        "created_at": "2024-07-31T07:32:06.920000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes it should, it accepts new blocks on new payloads/fcus all while retruning syncing and when all blocks are executed it starts returning VALID",
        "created_at": "2024-07-31T07:32:25.693000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "if its always syncing then then the optimistic sync has not completed or stuck",
        "created_at": "2024-07-31T07:32:56.968000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "the logs on ethereumjs should be quite helpful to debug whats going on",
        "created_at": "2024-07-31T07:33:18.040000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "ok, so execution goes on in the background, and as long as the average time is less than this timeout it's fine",
        "created_at": "2024-07-31T07:33:29.622000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "yes execution goes on and moving forward (so we have an execution head and a chain head) and eventually if blocks are small enough on average for ethereumjs, its execution head = chain head and then normal responses are returned",
        "created_at": "2024-07-31T07:35:11.903000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "```\n[07-31|07:34:48] INFO \n[07-31|07:34:48] INFO [ EL ] SYNCING (backfill stalled? tail=2523 | el=102 cl=5065) synchronized=true peers=1 \n[07-31|07:34:48] INFO [ EL ] vm=102 hash=0xac2eâ€¦0bde started=true executing=false \n[07-31|07:34:48] INFO [ EL ] subchains(4) linked=false [tail=2523 head=5065 next=0x4b1bâ€¦5197]â€¦ eta=na reorgsHead=false synchronized=true \n[07-31|07:34:51] INFO \n[07-31|07:34:51] INFO [ CL ] New consensus payload received  number=5065 hash=0x198aâ€¦e07e parentHash=0xe739â€¦5dd1  status=SYNCING gasUsed=0 baseFee=7 txs=0 withdrawals=0 blobGasUsed=0x0 excessBlobGas=0x0 \n[07-31|07:34:55] INFO \n[07-31|07:34:55] INFO [ CL ] New consensus payload received  number=5065 hash=0x198aâ€¦e07e parentHash=0xe739â€¦5dd1  status=SYNCING gasUsed=0 baseFee=7 txs=0 withdrawals=0 blobGasUsed=0x0 excessBlobGas=0x0 \n[07-31|07:34:59] INFO \n[07-31|07:34:59] INFO [ CL ] New consensus payload received  number=5065 hash=0x198aâ€¦e07e parentHash=0xe739â€¦5dd1  status=SYNCING gasUsed=0 baseFee=7 txs=0 withdrawals=0 blobGasUsed=0x0 excessBlobGas=0x0 \n[07-31|07:35:00] INFO \n[07-31|07:35:00] INFO [ CL ] New consensus payload received  number=5065 hash=0x198aâ€¦e07e parentHash=0xe739â€¦5dd1  status=SYNCING gasUsed=0 baseFee=7 txs=0 withdrawals=0 blobGasUsed=0x0 excessBlobGas=0x0 \n[07-31|07:35:00] INFO [ CL ] New chain head set (forkchoice update) head=0x198aâ€¦e07e finalized=0x6302â€¦e36b response=SYNCING \n[07-31|07:35:00] INFO \n[07-31|07:35:00] INFO [ EL ] SYNCING (backfill stalled? tail=2523 | el=102 cl=5066) synchronized=true peers=1 \n```",
        "created_at": "2024-07-31T07:35:53.233000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003e (backfill stalled?\n\nyea its backfill is stalled and needs more peers",
        "created_at": "2024-07-31T07:36:39.215000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "sometimes just a restart helps, let me do that",
        "created_at": "2024-07-31T07:36:56.264000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "i restarted and it didn't connect to any relevant peers, \u003c@412614104222531604\u003e can we add more enodes to ethereumjs ?",
        "created_at": "2024-07-31T07:38:48.933000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "sure",
        "created_at": "2024-07-31T07:45:03.839000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "updated, can you check? \u003c@792822129019584562\u003e",
        "created_at": "2024-07-31T07:53:49.640000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e can you set this cli param: `--maxPerRequest 10 --maxFetcherJobs 10` since it seems like its getting stuck backfilling and this arg might make the backfill requests smaller",
        "created_at": "2024-07-31T08:13:39.949000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "also add `DEBUG=ethjs,client:*` env var for generating fetcher debug logs",
        "created_at": "2024-07-31T08:14:18.873000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "sure",
        "created_at": "2024-07-31T08:19:28.990000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "```ts\nINFO [ EL ] VALID vm=cl=el=5267 hash=0xfbeeâ€¦9426 peers=3 \n[07-31|08:27:36] INFO \n[07-31|08:27:36] INFO [ CL ] New consensus payload received  number=5267 hash=0xfbeeâ€¦9426 parentHash=0x3c23â€¦6722  status=VALID gasUsed=2.1m baseFee=7 txs=100 withdrawals=0 blobGasUsed=0x0 excessBlobGas=0x0 \n[07-31|08:27:36] INFO [ CL ] New chain head set (forkchoice update) number=5267 head=0xfbeeâ€¦9426 finalized=0x055dâ€¦5eb2 response=VALID timestampDiff=24 secs\n[07-31|08:27:37] INFO \n[07-31|08:27:37] INFO [ EL ] EXECUTING ( vm=5267 cl=el=5268) synchronized=true peers=3 \n[07-31|08:27:37] INFO [ EL ] vm=5267 hash=0xfbeeâ€¦9426 started=true executing=true \n[07-31|08:28:00] INFO \n[07-31|08:28:00] INFO [ CL ] New consensus payload received  number=5268 hash=0x9360â€¦66fb parentHash=0xfbeeâ€¦9426  status=SYNCING gasUsed=11.3m baseFee=7 txs=243 withdrawals=0 blobGasUsed=0x0 excessBlobGas=0x0 \n[07-31|08:28:00] INFO Memory stats usage=258 MB percentage=4% \n[07-31|08:28:01] INFO [ CL ] New chain head set (forkchoice update) head=0x9360â€¦66fb finalized=0x055dâ€¦5eb2 response=SYNCING \n[07-31|08:28:05] INFO --------------------------\n[07-31|08:28:05] INFO Chain validation completed\n[07-31|08:28:05] INFO --------------------------\n[07-31|08:28:05] INFO \n[07-31|08:28:05] INFO [ EL ] VALID vm=cl=el=5269 hash=0xe5a3â€¦b03e peers=3 \n[07-31|08:28:12] INFO \n[07-31|08:28:12] INFO [ CL ] New consensus payload received  number=5269 hash=0xe5a3â€¦b03e parentHash=0x9360â€¦66fb  status=VALID gasUsed=2.1m baseFee=7 txs=100 withdrawals=0 blobGasUsed=0x0 excessBlobGas=0x0 \n[07-31|08:28:12] INFO [ CL ] New chain head set (forkchoice update) number=5269 head=0xe5a3â€¦b03e finalized=0xd2e9â€¦e221 response=VALID timestampDiff=12 secs\n[07-31|08:28:12] INFO \n```",
        "created_at": "2024-07-31T08:34:05.582000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "here is an example of such a scenario from the current devnet2:\n\n1. EL status was valid (so all on head = 5267)\n2. payload 5268 recived with txs \u003e=239 (100 and above we return syncing doing execution in background)\n3. ethereumjs goes into execution mode and is able to complete execution before next payload arrives (otherwise would have responded again with syncing and added payload to chain for its execution as well)\n4. 5269 has only 100txs so it executes it directly and returns valid\n\non CL you will see ethereumjs shuffling between syncing and valid because of this.",
        "created_at": "2024-07-31T08:34:10.693000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003e on CL you will see ethereumjs shuffling between syncing and valid because of this.\nwhich is explicitly in-spec in the engine API",
        "created_at": "2024-07-31T08:37:09.558000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "\u003e payload 5268 recived with txs \u003e=239 (100 and above we return syncing doing execution in background)\nI am curious, what's the advantage in doing it this way versus actually letting it run and only returning syncing to the engine API if it actually takes that long, rather than this sort of filtering heuristic",
        "created_at": "2024-07-31T08:38:30.889000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Testing",
        "parent": "",
        "content": "we have locking on engine api calls for critical sections and we become unresponsive on api until that call frame completes",
        "created_at": "2024-07-31T08:41:25.973000+00:00",
        "attachments": null
    },
    {
        "author": "daniellehrner",
        "category": "Testing",
        "parent": "",
        "content": "Ethstats for devnet-2 only show one node, teku-geth-1, but not any other. In Besu I get the following errors wrt Ethstats:\n```\n2024-07-31 09:15:13.505+00:00 | vert.x-eventloop-thread-4 | ERROR | EthStatsService | Failed to reach the ethstats server due to: WebSocket upgrade failure: 400\n```\nCould there be a misconfiguration issue?",
        "created_at": "2024-07-31T09:22:23.333000+00:00",
        "attachments": null
    },
    {
        "author": "kamil_chodola",
        "category": "Testing",
        "parent": "",
        "content": "Weird situation in forkmon which we need to check in Nethermind with Grandine - like we do not have one block but following head fine - maybe forkmon misreporting something?",
        "created_at": "2024-07-31T09:43:55.030000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "6aac2668c2fcfee996b717792df1093afd02bb71835252609203c719fd4f553d"
            }
        ]
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ah lemme remove ethstats everywhere, we just dont have it setup",
        "created_at": "2024-07-31T10:10:51.746000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we do",
        "created_at": "2024-07-31T10:11:08.813000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "as in we should have it ðŸ˜„",
        "created_at": "2024-07-31T10:11:29.294000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I removed it from whatever nodes i saw, i must've forgotten with besu? I'd vote to just remove it unless people are actually using ethstats\n\nand if we do keep it, then the besu error is weird and we need to check if we setup ethstats properly",
        "created_at": "2024-07-31T10:12:30.304000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "hmm, forkmon hasn't been stopped or changed. Maybe make the debug query manually? it could be from a fork or something?",
        "created_at": "2024-07-31T10:14:58.425000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "Testing",
        "parent": "",
        "content": "I think the way forkmon works is that it records the blockhash at that height when it detects a fork. the thing could be that grandine was not caught up to the head at that point and thus nethermind did not have any block at that hieght thus the empty space",
        "created_at": "2024-07-31T11:35:19.421000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "As mentioned no spec changes compared to devnet 1: \nhttps://notes.ethereum.org/@ethpandaops/pectra-devnet-2",
        "created_at": "2024-07-31T12:56:28.942000+00:00",
        "attachments": null
    },
    {
        "author": "gakonst",
        "category": "Testing",
        "parent": "",
        "content": "We're looking at it",
        "created_at": "2024-07-31T15:57:37.031000+00:00",
        "attachments": null
    }
]