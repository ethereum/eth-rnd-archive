[
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Fairly sure ours is the same as \u003c@755590043632140352\u003e describes",
        "created_at": "2022-12-20T06:38:45.850000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Hi \u003c@291925846556540928\u003e \u003c@539495253418180618\u003e I am just typing up some slides and realize that I am confused by something on the EIP-4895. On the CL specs, that I understand a little better, we compute \n```python\nwithdrawals_root=hash_tree_root(payload.withdrawals),  # [New in Capella]\n```\nWhere `hash_tree_root` is defined by the ssz spec as hashing a list, therefore we mix in the length of the list when hashing it. \n\nOn the EIP I see \n```python\ndef compute_trie_root_from_indexed_data(data):\n    trie = Trie.from([(i, obj) for i, obj in enumerate(data)])\n    return trie.root\n\nexecution_payload_header.withdrawals_root = compute_trie_root_from_indexed_data(execution_payload.withdrawals)\n```\nNow I don't really know if `trie.root` here computes the same thing as the CL, the only specification I could find is here  https://ethereum.github.io/execution-specs/autoapi/ethereum/arrow_glacier/trie/index.html?highlight=trie#root \n```python\ndef root(\n    trie: Trie[K, V],\n    get_storage_root: Callable[[Address], Root] = None,\n) -\u003e Root:\n    obj = _prepare_trie(trie, get_storage_root)\n\n    root_node = encode_internal_node(patricialize(obj, Uint(0)))\n    if len(rlp.encode(root_node)) \u003c 32:\n        return keccak256(rlp.encode(root_node))\n    else:\n        assert isinstance(root_node, Bytes)\n        return Root(root_node)\n```\nAnd this is explicitly different than what we set in the header. What am I missing here?",
        "created_at": "2022-12-20T21:25:46.298000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ah probably this is just name clashing and there are two different things being called `execution_payload_header`?  The EL one is keckack and the CL one SHA256... cc \u003c@881905303011086387\u003e you've been complaining about this?",
        "created_at": "2022-12-20T23:02:43.933000+00:00",
        "attachments": null
    }
]