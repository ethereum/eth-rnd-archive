[
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "We will have to support `--coinbase` flag for those validators that are still use BLS creds as there is no other way for them. And there are potential solutions that could be built around this option, like staking pool providing execution layer service or an external execution layer services that uses coinbase to grab transaction tips and MEV and send comission via regular transfer to validator's address. There are many cases where ability to set arbitrary coinbase may be convenient. And this is the only option for validators that are using BLS creds, so, it will have to be in protocol anyway. This is my reasoning behind 0x01 allowing for arbitrary coinbase.",
        "created_at": "2021-06-10T05:18:28.305000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I've seen a lot of back and forth on the security angle, and again - one of our main criteria for 0x02 when we proposed it is that we don't break existing validators, so if putting the condition into 0x01 is a non-starter then I have no problem with that",
        "created_at": "2021-06-10T05:20:23.520000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Just a thought",
        "created_at": "2021-06-10T05:20:29.372000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I've been thinking about 0x01 instead of 0x02. And, actually, behaviour after the Merge is not yet set in stone and we could introduce the same with 0x01. OTOH, if solo stakers choose 0x02 for security reasons and want to use external execution service then this service will have to deal with it somehow to avoid loosing potential clients.",
        "created_at": "2021-06-10T05:25:01.987000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes",
        "created_at": "2021-06-10T05:25:54.281000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Though presumably, the sample code you provided in the PR would be enough to do this, and if the execution client team added it, the external execution service could just upgrade to that version of the client",
        "created_at": "2021-06-10T05:27:04.429000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Right, but they will have to keep in mind this coinbase specificity with 0x02 when building an economics part of a service",
        "created_at": "2021-06-10T05:29:03.313000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Why's that, because they don't get to capture it anymore and it could hurt their bottom line?",
        "created_at": "2021-06-10T05:30:30.569000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "There is a way they can do this that requires coinbase of a block set to address owned by a service",
        "created_at": "2021-06-10T05:31:22.094000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Like, I am a service. I set coinbase to my address and append a transaction to a block that sends a half of extracted value to validator's address. This is one of the ways to do this. And it's pretty straightforward to implement it this way because service always know how much of value is extracted",
        "created_at": "2021-06-10T05:33:14.807000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I see, and 0x02 breaks this because now they can't set the coinbase to their address on blocks proposed by those validators",
        "created_at": "2021-06-10T05:35:45.139000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Could something in reverse also work? Send half of MEV to coinbase (validator) and the other half in a transaction to itself (the service). Or forgo coinbase altogether. Just use 2 transactions without the coinbase address. Assuming that the service will have to have the ‚Äútransfer commission value to address‚Äù logic in place already.",
        "created_at": "2021-06-10T07:31:29.976000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This also has some interesting security implications right? There‚Äôs no guarantee that the validator may not tamper with the contents of the block, and steal commissions",
        "created_at": "2021-06-10T07:34:54.694000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I guess this is one scenario where Vitalik‚Äôs proposal about splitting block building from proposal makes sense",
        "created_at": "2021-06-10T07:36:40.991000+00:00",
        "attachments": null
    },
    {
        "author": "izz.y",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "have you seen the lido/flashbots draft on this? https://github.com/flashbots/raytracing",
        "created_at": "2021-06-10T08:56:53.011000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Validator will have to sign and send transaction that transfers a half of coinbase delta in advance to the service. And sign this transaction with the coinbase address it owns.",
        "created_at": "2021-06-10T09:43:00.336000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I have not. Thank you",
        "created_at": "2021-06-10T09:51:17.443000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Oh, right. We‚Äôre talking about priority fees correct?",
        "created_at": "2021-06-10T09:53:37.763000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "About priority fees and MEV extracted to coinbase",
        "created_at": "2021-06-10T09:54:08.154000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Got it. Makes sense. Your proposed scheme requires no round trips and no hot coinbase  address wallet on the validator üôÇ",
        "created_at": "2021-06-10T09:54:57.610000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And I think there is a solution for external execution services with 0x02. It might be more sophisticated, might be not",
        "created_at": "2021-06-10T09:55:12.069000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But there are still BLS credentials in place. And we can't avoid arbitrarily set coinbase in the system because of that",
        "created_at": "2021-06-10T09:55:57.683000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I understand.",
        "created_at": "2021-06-10T09:56:12.586000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This is interesting. Would love to hear your thoughts on this",
        "created_at": "2021-06-10T09:58:37.377000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Is there any concern that validators with BLS keys might be losing on rewards, due to ‚Äúopportunistic‚Äù external execution clients or because the validator operators forgot to properly configure their execution client?",
        "created_at": "2021-06-10T10:03:32.506000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "On one hand, it‚Äôs their fault.",
        "created_at": "2021-06-10T10:04:19.620000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes, configuration is completely up to those validators. And they will be able to use services that require arbitrary coinbase while validators with regular address wouldn't if we would apply coinbase restriction to 0x01. This is why I think we should have 0x02 separately as it is currently proposed and do not apply this restriction to validators with 0x01 creds.",
        "created_at": "2021-06-10T10:11:43.170000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Off topic: This (sharing MEV rewards between validators and execution clients) is a great business opportunity to providers like Infura üôÇ",
        "created_at": "2021-06-10T10:17:00.228000+00:00",
        "attachments": null
    },
    {
        "author": "poupash",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And, at the same time, it also make them a very appealing target",
        "created_at": "2021-06-10T10:17:55.281000+00:00",
        "attachments": null
    },
    {
        "author": "brockzillla5849",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "hacking a server client with your validator running behind a custom OS doesnt even show up hack through a OS overlay good luck u only gonna see  the OS....has anyone given IPFS or is this the wrong board",
        "created_at": "2021-06-10T21:12:29.071000+00:00",
        "attachments": null
    }
]