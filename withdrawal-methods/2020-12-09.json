[
    {
        "author": "alon.ssv.network",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "What about just having a trigger per Jim's suggestion that sends the excess to the defined eth1 address. Validation key can trigger but not decide where the assets will be transferred to.",
        "created_at": "2020-12-09T09:06:54.072000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Transfer is not free, and should not be",
        "created_at": "2020-12-09T14:16:49.805000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You'd need to convince me that there is any significant cost involved if you wanted to add a fee.",
        "created_at": "2020-12-09T14:24:55.245000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I mean there should be an economic motivation to not push every reward to eth1 just after it is issued. It would be unnecessary load on eth2",
        "created_at": "2020-12-09T14:29:16.051000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The proposal I made doesn't involve the Ethereum 1 chain at all",
        "created_at": "2020-12-09T14:29:53.346000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, I see, I replied to Alon",
        "created_at": "2020-12-09T14:36:19.486000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "That it could be an issue, if we want to see it in eth1",
        "created_at": "2020-12-09T14:36:42.910000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Isn't that what withdrawals are for?",
        "created_at": "2020-12-09T14:37:40.023000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e I mean there should be an economic motivation to not push every reward to eth1 just after it is issued. It would be unnecessary load on eth2\nJust think that there should be motivation for some grouping. So if it's possible, it doesn't make sense to send every reward, but few months of rewards",
        "created_at": "2020-12-09T14:39:40.975000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Isn't that the validator lifecycle?  You need to exit (takes time), wait for withdrawable (takes time, no rewards), do the withdrawal process, and *then* go through the validator activation process again.  So there is an impact in terms of the time you spend not validating, and you would not want to do this as any sort of common operation (which is another reason for having transfers; it stops validator churn)",
        "created_at": "2020-12-09T14:42:37.197000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It's a very good point, but I don't see good way to solve it in a near term",
        "created_at": "2020-12-09T14:44:13.591000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "We want to see validators always live as a part of network safety",
        "created_at": "2020-12-09T14:45:13.447000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm not sure there is anything to solve.  Withdrawing takes time and has an opportunity cost, so people are less likely to do so.  However, at some stage they will decide it's worth the cost.  So transfers of excess balance enable a cheap beacon-chain-centric way to move the excess balance to another validator and hence leave the initial validators active (which, as you say, increases network safety).",
        "created_at": "2020-12-09T14:47:09.346000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, but how to do it?",
        "created_at": "2020-12-09T14:48:17.832000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Which, withdrawal or transfer?",
        "created_at": "2020-12-09T14:49:06.410000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Transfer of excess balance",
        "created_at": "2020-12-09T14:49:23.647000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "That's the proposal I made on ethresear.ch",
        "created_at": "2020-12-09T14:49:37.706000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It doesn't work for all",
        "created_at": "2020-12-09T14:49:56.035000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "1. Individual user, 1 validator - doesn't work. 2 validators+ works, but didn't help much until a lot validators\n2. Individual user, a lot validators -works\n3. Unshared custodial pool -works\n4. Unshared trustless pool - not works\n5. Shared pool - not works",
        "created_at": "2020-12-09T14:52:33.954000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And it's hacky",
        "created_at": "2020-12-09T14:52:41.981000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It's good to have excess balance transfer but we need implementation that could fit all",
        "created_at": "2020-12-09T14:53:12.068000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "4) and 5) you'd have to explain why it doesn't work.  As far as I'm aware it works fine for any implementation of which I've heard so far.",
        "created_at": "2020-12-09T14:53:46.698000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Shared pool -it doesn't have withdrawal key. If we stick with Danny's proposal, initial deposit is made with withdrawal_credentials started with 0x01",
        "created_at": "2020-12-09T14:54:48.671000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This has _nothing_ to do with withdrawal keys.",
        "created_at": "2020-12-09T14:54:59.801000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Proxy validator without something like contract logic doesn't sound trustless",
        "created_at": "2020-12-09T14:55:19.082000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If you trust the block proposer to send excess balance to another _validator index_ then great.  If not, split the validator key across multiple parties and they can agree on the validator index to which to send.  A shared pool would use the first method, a trustless pool would use the second method.",
        "created_at": "2020-12-09T14:56:51.460000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Until this hack trustless pool could make the whole money flow without manual interventions based on ethereum contracts. I cannot agree on any target validator because I don't trust it. I have eth1 withdrawal_credentials, which I trust, because there is an open contract there. That's why it could be called trustless.",
        "created_at": "2020-12-09T15:03:02.745000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Don't you think that always have validator for a slaughter is a bit hacky for a normal flow?",
        "created_at": "2020-12-09T15:03:31.858000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I don't understand this comment.  Please could you expand?",
        "created_at": "2020-12-09T15:06:13.378000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I mean you propose flow: 9 validators: 9 works, 8 transfers to 1, kill 1, resign, 8 transfer to 1, kill 1, resign",
        "created_at": "2020-12-09T15:07:31.152000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You need to trust the holders of the validator public keys to not slash you, and to generate an exit when required.  The transfer of excess balance has exactly the same level of trust required.",
        "created_at": "2020-12-09T15:08:06.504000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The transfer requirements are such that the target validator must not yet be active.",
        "created_at": "2020-12-09T15:08:41.957000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "We'd better solve how to make possible excess transfer  for active validators",
        "created_at": "2020-12-09T15:09:56.352000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Why would you want to transfer excess balance to a validator that is already active?  What would the purpose of that be?",
        "created_at": "2020-12-09T15:11:08.444000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "no no, to the same withdrawal target that is in withdrawal_credentials",
        "created_at": "2020-12-09T15:11:31.141000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "which i approved on deposit",
        "created_at": "2020-12-09T15:11:48.629000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "That's solving a different problem, with a different set of prerequisites and a different timeframe for implementation.",
        "created_at": "2020-12-09T15:12:09.978000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Assuming slashing could be contract-insured, it's not true. It's a different kind of trust. Different pools could provide different options for participants.",
        "created_at": "2020-12-09T15:14:22.226000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If that is necessary for trustless pools then fair enough, but none of the 40,000-odd validators out there today are in trustless pools so holding up a proposal that addresses 100% of the existing validators because it may or may not need to be extended at some point in the future to meet the (as yet undefined) requirements of a different set of validators doesn't seem reasonable.",
        "created_at": "2020-12-09T15:14:44.220000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And if you can provide slashing insurance you can provide rogue excess balance transfer insurance.",
        "created_at": "2020-12-09T15:15:02.901000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it couldn't be applied automatically",
        "created_at": "2020-12-09T15:15:32.897000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "slashing - could",
        "created_at": "2020-12-09T15:15:46.860000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Only if you have data from the beacon chain, in which case my comment stands.",
        "created_at": "2020-12-09T15:15:56.979000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah, we will definitely have opcodes to check validator's status, whether it was slashed etc",
        "created_at": "2020-12-09T15:16:30.302000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The only question is in level of sync and delay of this data",
        "created_at": "2020-12-09T15:16:44.225000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e In that case, the eth1 contract address probably would have no way to permit this balance transfer anyways. So it should be a non-issue.",
        "created_at": "2020-12-09T15:19:32.617000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "good point on ethresear.ch from OisinKyne",
        "created_at": "2020-12-09T15:19:48.908000+00:00",
        "attachments": []
    },
    {
        "author": "dmitriishmatko",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so if it's signed with bls withdrawal key, this shouldn't be an issue",
        "created_at": "2020-12-09T15:21:10.477000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The initial permission to allow the transfers is, yes.",
        "created_at": "2020-12-09T15:23:14.632000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "On the other hand when you first posted this proposal the argument you put forward first was that this proposal was to alleviate the hole opened by the withdrawal proposal that will clog the queue. I don't see how to reconcile this with having this proposal implemented before the other one",
        "created_at": "2020-12-09T15:46:20.259000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I see transfers as the less of two evils for small stakers if otherwise they'll have to wait ages to exit/entry. But I don't think we should allow small stakers to be dilluted without a reason",
        "created_at": "2020-12-09T15:48:05.268000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It doesn't have to be implemented before withdrawals, but makes sense to for a number of reasons.  One is to get people used to the idea that they can do transfers rather than going through the withdrawal loop, another is to allow withdrawals to be built on top of a chain with transfers to be able to look at any issues with interactions between the two processes, a third is to show some progress towards movement of Ether on the beacon chain over time rather than the current \"big bang\" approach.",
        "created_at": "2020-12-09T15:54:15.462000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This is an interesting one.  I can see most small stakers ending up joining trustless pools.  If trustless pools are built properly the benefits to small stakers would be such that they will be better of running their node as part of a pool than as an individual.  Long way to go, though, in terms of defining how the pools operate and the like.",
        "created_at": "2020-12-09T15:56:04.747000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "However, putting in transfers early makes sense for the network, as well as extending those benefits past the point where withdrawals are available.",
        "created_at": "2020-12-09T15:56:44.222000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I agree, but that will require also withdrawals before",
        "created_at": "2020-12-09T15:56:47.774000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For trustless pools?  Yeah.",
        "created_at": "2020-12-09T15:57:06.119000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So I see no reason to implement transfers before withdrawals are in place",
        "created_at": "2020-12-09T15:57:07.239000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Apart from the reasons I just gave, you mean?",
        "created_at": "2020-12-09T15:57:21.204000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "To tell the truth I see the three reasons you mention above \"getting people used..., Allow withdrawals to be built... To show progress...\" As very minor against the impact of the dilution that will be immediate to small stakers. If the max effective balance is increased to the average holding of a validator at the time of implementation I wouldn't be against this, but otherwise I'd advocate for not implementing transfers until necessary",
        "created_at": "2020-12-09T16:02:06.853000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I don't think that artificially limiting transfers because one set of people have fewer Ether than others is a sound basis to proceed.  There are always going to be some with more than others, for example a single validator staker could be many years until they have enough to create a second validator.\n\nLiquidity is an important part of the picture for the network as a whole.  And I'm unsure what the \"impact of the dilution\" would be, but either we have few solo stakers so the impact will be small (as few exist), or we have many solo stakers and the impact will be small (as few will have 32 Ether rewards to create new validators).",
        "created_at": "2020-12-09T16:15:42.027000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The point is that the only thing that enabling this will achieve is effectively allowing some to compound interest, diminishing the stake of the smaller stakers given the issuance formula and without an option for withdrawal, if this is not unfair I don't know what is",
        "created_at": "2020-12-09T16:17:55.665000+00:00",
        "attachments": []
    }
]