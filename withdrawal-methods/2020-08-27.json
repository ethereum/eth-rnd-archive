[
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Hi all! As prompted by some discussion around a recent tweet by \u003c@!273808422753796097\u003e (https://twitter.com/VitalikButerin/status/1297676370936344576), we've added this channel to discuss the future of validator withdrawals.\n\nIn general, this will require a new `WITHDRAWAL_PREFIX` (e.g. 0x01, 0x02, ...) and specified logic on how (and where) it would be handled.\n\ncc: \u003c@!591364117592539137\u003e",
        "created_at": "2020-08-27T13:26:50.170000+00:00",
        "attachments": []
    },
    {
        "author": "ryg9705",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Do I get that right that the benefit for the end user would be that he or she can get to his or her ETH rewards in ETH 2 Phase 1.5 (The Merge) rather than ETH2 Phase 2?",
        "created_at": "2020-08-27T13:38:06.702000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "no",
        "created_at": "2020-08-27T13:38:16.630000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the benefit for commiting to a contract-based withdrawal scheme today would be that people can use more sophisticated ownership models for withdrawal credentials today",
        "created_at": "2020-08-27T13:38:41.306000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the 0x00 withdrawal prefix is just a BLS signing key.\nIf we commited today to a new withdrawal prefix that _will_ be honored via some predetermined mechanism on eth1 (likely the addition of an opcode to consume a wthidrawal from the beacon chain) then people could use that logic",
        "created_at": "2020-08-27T13:40:02.807000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the tough parts are (1) defining a standard today with imperfect information about the future and (2) writing an EIP in such a way that there is a social commitment to implement it on eth1 when the merge happens",
        "created_at": "2020-08-27T13:40:35.565000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'd be inclined to preceed this with a \"change withdrawal credentials\" operation.  That would give some surety that validators can move to a smart contract-based approach without the pressure to do so at the moment they start staking.",
        "created_at": "2020-08-27T13:41:27.535000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "interesting approach! trying to think if there are any security issues here",
        "created_at": "2020-08-27T13:42:12.082000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I suppose the owner of the bls key has all the power anyway so having them change the withdrawal method isn't really giving them more power",
        "created_at": "2020-08-27T13:42:51.336000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "other than the power to revoke or nuance their power",
        "created_at": "2020-08-27T13:43:08.196000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The only concern it brings for me would be that pepole would probably use it is a back-door transfer system, and then we'd have to worry about chain rollbacks.  As such, I wouldn't suggest bringing it in right at the beginning of the chain but a little later down the line.",
        "created_at": "2020-08-27T13:44:59.631000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "indeed",
        "created_at": "2020-08-27T13:45:21.920000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "interesting transfer system!",
        "created_at": "2020-08-27T13:45:39.289000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm inclined to more concretely define this (potential) standard and assssing the risks before figuring out how it would be 'deployed' on eth2",
        "created_at": "2020-08-27T13:46:48.167000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@144468805697929216\u003e how does a “chain rollback” figure in? I’d imagine operators will wait for finalized “change withdrawal credentials” operations before acting on them",
        "created_at": "2020-08-27T15:48:04.266000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "emergency rollback in early days of eth2",
        "created_at": "2020-08-27T15:48:24.672000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if there are no transfers, that is much more of an option",
        "created_at": "2020-08-27T15:48:31.926000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the concern here being that if i transfer i may just walk away from my staking concerns and then under rollback i'd not be available to continue my duty",
        "created_at": "2020-08-27T15:54:41.580000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "whereas w/o transfers my stake holds me accountable for the foreseeable future",
        "created_at": "2020-08-27T15:54:59.206000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "no, the concern being that a rollback could essentially trigger a double spend",
        "created_at": "2020-08-27T15:55:03.433000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "or undo some sort of user to user tx",
        "created_at": "2020-08-27T15:55:09.093000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ahok",
        "created_at": "2020-08-27T15:55:47.929000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If changing withdrawal credentials was used as a transfer mechanism you'd likely wind up with two people having the signing keys then.  And the original owner would no longer have anything at stake.\nPotentially works for custodial staking services though.",
        "created_at": "2020-08-27T21:05:55.843000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And non-custodial staking services, but yes it wouldn't work if the original owner held both keys.",
        "created_at": "2020-08-27T22:09:54.572000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "seems like more of  a viable strategy for exited vals",
        "created_at": "2020-08-27T22:10:27.685000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "hmm",
        "created_at": "2020-08-27T22:10:29.396000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The primary purpose of my suggestion was to allow someone to change their withdrawal method, so if it doesn't work for transfers I don't see that being a significant downside",
        "created_at": "2020-08-27T22:11:52.965000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "right",
        "created_at": "2020-08-27T22:12:11.751000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "(Been thinking about this a bit, there are fair few wrinkles in allowing withdrawal to a smart contract, or in general to an ETH1 address.  A lot depends on how ETH2 finalizes ETH1; do we have any docs with current thinking on this?)",
        "created_at": "2020-08-27T22:14:58.284000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "in the phase 1.5, eth2 just builds eth1 chain as a shard. it is first crosslinked into the beacon chain and then finalized",
        "created_at": "2020-08-27T22:21:07.324000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "eth1 will have access to \"system\" level opcodes about the beacon chain",
        "created_at": "2020-08-27T22:21:20.633000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "from there, you could imagine a TX that \"consumes\" a validator that is \"withdrawable\" and has the special `0x01` prefix into the specified contract",
        "created_at": "2020-08-27T22:22:02.095000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the accounting on triggering that \"consumption\" back to the beacon chain might be tricky..",
        "created_at": "2020-08-27T22:22:20.788000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yes things to think through",
        "created_at": "2020-08-27T22:22:24.377000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "standard BLS withdrawals will need this thought through to a certain extent as well",
        "created_at": "2020-08-27T22:22:45.334000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thanks.  I'd assume that the BLS withdrawals would be some sort of (ETH1 address, BLS signature from withdrawal key) operation.\n\nIf the withdrawal credentials are appropriate you could perhaps push the balance directly the validator becomes withdrawable?  If we aren't going to allow recycling of withdrawable Ether in to new validators it seems like the manual withdrawal is an unnecessary step (unless we have a good reason to keep the withdrawable Ether sitting in the validator until the smart contract asks for it).",
        "created_at": "2020-08-27T22:29:24.168000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e I'd assume that the BLS withdrawals would be some sort of (ETH1 address, BLS signature from withdrawal key) operation.\nyes, it'd have to be. but at the same time, the eth1 shard chain needs to be able to prevent \"double withdrawals\" and maintain some sort of bitfield or other data structure to remember consumption of a withdrawal",
        "created_at": "2020-08-27T22:30:31.208000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e  push the balance\nThis is possible, but would need a max per block if it were an auto system operation instead of a gas-limited operation",
        "created_at": "2020-08-27T22:31:01.442000+00:00",
        "attachments": []
    }
]