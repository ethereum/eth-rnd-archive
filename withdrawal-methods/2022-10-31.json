[
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "for EIP-4895, does the end user (validator) still need to make some kind of a request in order to get queued for a push withdrawal to occur?",
        "created_at": "2022-10-31T00:17:15.041000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "other than change bls key -\u003e eth1 address?",
        "created_at": "2022-10-31T00:17:46.957000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "perhaps i am not understanding how EIP-4895 works at all....",
        "created_at": "2022-10-31T00:18:14.207000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i'd have to check that eip number...",
        "created_at": "2022-10-31T00:18:25.936000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok cool... on the CL side, most validators currently have a 'withdrawal key' which is a bls key...",
        "created_at": "2022-10-31T00:19:05.954000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "or the nemonic for it",
        "created_at": "2022-10-31T00:19:16.472000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so on the CL side they will have to change to using a eth1 address for withdrawal",
        "created_at": "2022-10-31T00:19:34.347000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "after that it'll just be an automated process to move funds through execution payload under a new op code",
        "created_at": "2022-10-31T00:20:08.031000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "that's the part i am unclear about",
        "created_at": "2022-10-31T00:20:23.599000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what causes one validator index to be put into that queue for funds withdrawal ?",
        "created_at": "2022-10-31T00:20:34.061000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/blob/dev/specs/capella/beacon-chain.md\nso current spec suggests 2 processes - partial and full.. and processed subtly differently",
        "created_at": "2022-10-31T00:21:12.550000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "how will that be done?",
        "created_at": "2022-10-31T00:21:14.402000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "basically during epoch transition full withdrawals will be added to a queue, and that queue will be drained gradually during block production",
        "created_at": "2022-10-31T00:21:41.019000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i guess ultimately 'some' partials get added to that queue each epoch too",
        "created_at": "2022-10-31T00:22:02.963000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "will full withdrawal be a request a user must initiate manually?",
        "created_at": "2022-10-31T00:22:15.795000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ahm... basically no",
        "created_at": "2022-10-31T00:22:26.911000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so they will have to have eth1 address set, and have exited",
        "created_at": "2022-10-31T00:22:39.374000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and waited the appropriate periods etc",
        "created_at": "2022-10-31T00:22:46.480000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so they need to initiate an exit?",
        "created_at": "2022-10-31T00:22:53.540000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "unless slashed, they need to be in the exited state",
        "created_at": "2022-10-31T00:23:06.921000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "got ya",
        "created_at": "2022-10-31T00:23:12.097000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so the 2 ways are slashings, or submit a voluntary exit",
        "created_at": "2022-10-31T00:23:23.872000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "okay, that I can understand",
        "created_at": "2022-10-31T00:23:36.044000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "is a voluntary exit an EL transaction with gas costs?",
        "created_at": "2022-10-31T00:23:50.371000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "voluntary exit is on the CL side, no gas",
        "created_at": "2022-10-31T00:24:03.912000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "okay",
        "created_at": "2022-10-31T00:24:24.533000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "afaik at least",
        "created_at": "2022-10-31T00:24:25.051000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i think you're right, I haven't looked at it deeply",
        "created_at": "2022-10-31T00:24:39.436000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what about partial withdrawals? how will those be dequeued? who gets it first? or is it random for any validator index above 32ETH?",
        "created_at": "2022-10-31T00:25:01.869000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i mean i know its on the CL, and there was no gas mechanism for it when we wrote it, i cant imagine that'd change",
        "created_at": "2022-10-31T00:25:04.322000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so the spec is basically process up to 256 per epoch ,and keep a counter of where we get to, so it's like a sweep over a number of epochs",
        "created_at": "2022-10-31T00:25:30.166000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and literally anything over 32 eth gets drained and given back (if eth1address set)",
        "created_at": "2022-10-31T00:25:44.680000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "at 256 per epoch, people likely to get a deposit every couple of weeks roughly",
        "created_at": "2022-10-31T00:26:31.074000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "is it just an incremental counter starting from 0 representing the validator index? or is it randomized?",
        "created_at": "2022-10-31T00:26:55.796000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "increment start from 0",
        "created_at": "2022-10-31T00:27:03.432000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "round robbin",
        "created_at": "2022-10-31T00:27:12.116000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "okay understood",
        "created_at": "2022-10-31T00:27:17.797000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and one final question if you don't mind",
        "created_at": "2022-10-31T00:27:22.263000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "sure ðŸ™‚",
        "created_at": "2022-10-31T00:27:26.456000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "how does one set their eth1 address?",
        "created_at": "2022-10-31T00:27:28.297000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thats a good question ðŸ™‚",
        "created_at": "2022-10-31T00:27:38.378000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "there's a process in the spec to set it, but im not sure whether clients will each implement a CLI, or if it should belong somewhere else... a lot of people will want to submit a nemonic and set their eth1address, so it may need more tooling than a lot of clients support currently",
        "created_at": "2022-10-31T00:28:39.465000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it's also a 1-shot kinda deal - so people will need to be super careful",
        "created_at": "2022-10-31T00:29:10.417000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "is that going to be an execution layer operation or similarly to an exit, a CL operation ?",
        "created_at": "2022-10-31T00:29:55.097000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the CL will need ot process the command to update the validator in the state, the EL won't need to be aware of that detail",
        "created_at": "2022-10-31T00:30:19.948000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so it'll be like 16 per block currently to make that change, and clients will likely need to gossip and keep a queue, i think",
        "created_at": "2022-10-31T00:30:47.136000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the constant is `MAX_BLS_TO_EXECUTION_CHANGES`",
        "created_at": "2022-10-31T00:31:12.976000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "16 such updates per block? so you're looking at a waiting time until your update gets solidifed?",
        "created_at": "2022-10-31T00:31:20.707000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeh it'll process fast, but its limited by the number allowed per block",
        "created_at": "2022-10-31T00:31:47.075000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "got ya",
        "created_at": "2022-10-31T00:31:53.035000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "full block inclusion would be 512 / epoch",
        "created_at": "2022-10-31T00:32:07.076000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i seem to remember some talk of a possible mechanism to help those that got their validator mnemonic exposed... is there anything like that still being talked about or is that impossible?",
        "created_at": "2022-10-31T00:32:30.218000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i haven't seen anything concrete, but yes i'd be concerned if i was in that bucket",
        "created_at": "2022-10-31T00:33:06.327000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah not the best bucket to be in for sure",
        "created_at": "2022-10-31T00:33:36.708000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i was just curious if this is still a race to get your operation before the hacker",
        "created_at": "2022-10-31T00:33:49.570000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "also a hard problem, i'm not sure if anyone is specifically investigating that... we've been mostly in the weeds looking at the implementation details",
        "created_at": "2022-10-31T00:34:28.565000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i can imagine, you guys don't really have a lack of problems to tackle",
        "created_at": "2022-10-31T00:34:46.952000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and its all very much appreciated",
        "created_at": "2022-10-31T00:34:55.699000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks ðŸ™‚",
        "created_at": "2022-10-31T00:35:00.910000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "is the eth1 address set going to be the same one used for the exit operation?",
        "created_at": "2022-10-31T00:35:17.253000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "one address for both partial and full",
        "created_at": "2022-10-31T00:35:23.288000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yep - and it can't execute EVM code when using that new op code, so that's probably worth being aware of",
        "created_at": "2022-10-31T00:35:52.354000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "its a free op, so won't cost gas, but also restricted from running EVM... not sure the implications because i'm on the CL side, but it does sound important to know",
        "created_at": "2022-10-31T00:36:30.124000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yes it does indeed",
        "created_at": "2022-10-31T00:36:40.919000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "are partial and full both currently slated for finding themselves into Shanghai or is only one of the two for now going to make it?",
        "created_at": "2022-10-31T00:37:03.397000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it's the 1 op from the EL side, so it'll just be what gets put into that list... currently both are slated for the same release on the CL side",
        "created_at": "2022-10-31T00:37:40.072000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i understand",
        "created_at": "2022-10-31T00:37:55.035000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thank you very much for answering all of these questions! really really appreciate it!",
        "created_at": "2022-10-31T00:38:11.574000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "very welcome ðŸ™‚",
        "created_at": "2022-10-31T00:38:23.996000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "hope you have a nice rest of your day!",
        "created_at": "2022-10-31T00:38:27.465000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you too",
        "created_at": "2022-10-31T00:38:36.898000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks!",
        "created_at": "2022-10-31T00:38:42.191000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e how can I run locally all of the CI for a spec-repo PR so that I stop spamming the CI runner?",
        "created_at": "2022-10-31T18:58:35.610000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ah I think I got all CI but spectests passing. I won't fix tests unless that's the PR we're going with",
        "created_at": "2022-10-31T22:15:51.815000+00:00",
        "attachments": []
    }
]