[
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Engine API versions are not suitable to become a fork trigger. I saw an idea to have a fork version as a part of data structure -- my point is that we wouldn't need it there, because it is already present in the name of the method.",
        "created_at": "2022-11-21T09:16:49.108000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@554799849288105986\u003e any reason to use `EIP4844_FORK_EPOCH` flag instead of `CAPELLA_FORK_EPOCH` ?",
        "created_at": "2022-11-21T14:10:19.855000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Looks like the branch with features set to withdrawals and withdrawals-processing still errors to ```Nov 21 15:55:12.032 CRIT Error whilst producing block            message: Recoverable(\"Some endpoints failed, num_failed: 1 http://127.0.0.1:4000/ =\u003e RequestFailed(Recoverable(\\\"Error from beacon node when producing block: ServerMessage(ErrorMessage { code: 500, message: \\\\\\\"UNHANDLED_ERROR: GetPayloadFailed(EngineError(Api { error: ServerMessage { code: -32602, message: \\\\\\\\\\\\\\\"invalid argument 1: missing required field 'prevRandao' for PayloadAttributes\\\\\\\\\\\\\\\" } }))\\\\\\\", stacktraces: [] })\\\"))\"), service: block```",
        "created_at": "2022-11-21T16:13:32.840000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Using the following Dockerfile: ```FROM rust:1.65.0-bullseye AS builder\nRUN apt-get update \u0026\u0026 apt-get -y upgrade \u0026\u0026 apt-get install -y cmake libclang-dev protobuf-compiler\nCOPY . lighthouse\nARG FEATURES1=withdrawals\nARG FEATURES2=withdrawals-processing\nENV FEATURES $FEATURES1 $FEATURES2\nRUN cd lighthouse \u0026\u0026 make\n\nFROM ubuntu:22.04\nRUN apt-get update \u0026\u0026 apt-get -y upgrade \u0026\u0026 apt-get install -y --no-install-recommends \\\n  libssl-dev \\\n  ca-certificates \\\n  \u0026\u0026 apt-get clean \\\n  \u0026\u0026 rm -rf /var/lib/apt/lists/*\nCOPY --from=builder /usr/local/cargo/bin/lighthouse /usr/local/bin/lighthouse```",
        "created_at": "2022-11-21T16:13:50.214000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Using eip4844 branch on LH.",
        "created_at": "2022-11-21T16:14:15.231000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You'll need my fork.\ngithub.com/ethDreamer/lighthouse",
        "created_at": "2022-11-21T16:41:14.082000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "branch is `capella_eip4844`",
        "created_at": "2022-11-21T16:41:29.645000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Don't set `EIP4844_FORK_EPOCH`",
        "created_at": "2022-11-21T16:41:57.394000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Set `CAPELLA_FORK_EPOCH`",
        "created_at": "2022-11-21T16:42:20.430000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Compile with `cargo build --features withdrawals --features withdrawals-processing --release`",
        "created_at": "2022-11-21T16:43:01.562000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But I'd like to be able to run it myself",
        "created_at": "2022-11-21T16:43:21.885000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'll spin up a docker image for you now",
        "created_at": "2022-11-21T16:43:33.163000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But I'd like to join locally so I can debug problems",
        "created_at": "2022-11-21T16:43:45.545000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Sorry getting weird rust compiler panics I gotta figure out",
        "created_at": "2022-11-21T17:09:22.157000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Okay gotta go to the gym now but I'm trying to build with the nightly compiler. If successful there will be a docker image here:\nhttps://hub.docker.com/r/ethdreamer/lighthouse/tags\nwith tag `withdrawals` in ~20 minutes",
        "created_at": "2022-11-21T17:40:35.892000+00:00",
        "attachments": null
    },
    {
        "author": "ethdreamer",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "otherwise I'll keep trying to figure it out when I get back.. weird cause it builds on my host machine",
        "created_at": "2022-11-21T17:41:15.589000+00:00",
        "attachments": null
    }
]