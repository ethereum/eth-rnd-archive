[
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@291925846556540928\u003e we started implementing Capella on Prysm, will we have a P2P spec? For now we will just provide an endpoint that takes a `SignedBLSToExecutionChange` in some custom-cooked JSON message and broadcasts it as SSZ.",
        "created_at": "2022-07-25T15:29:06.140000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the p2p document right now is empty lol",
        "created_at": "2022-07-25T15:34:22.917000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i'd imagine we have a global gossipsub topic for the new operation",
        "created_at": "2022-07-25T15:34:55.857000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "not sure how far ahead  you want to move from the spec but i'd just map over all the infra we have for voluntary exits",
        "created_at": "2022-07-25T15:36:23.133000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and wrt \"custom-cooked JSON message\", if you mean exposing a beacon HTTP API endpoint to accept the signed operations, i'd also just copypaste the signed voluntary exit infra",
        "created_at": "2022-07-25T15:38:45.769000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "shouldn't really need to be that custom",
        "created_at": "2022-07-25T15:39:19.432000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "no I mean I would want the workflow to start from \u003c@550420431744794624\u003e's `deposit-cli` producing a JSON version of the `SignedBLSToExecutionChange` message. On the one hand so that it makes it more difficult for users to use an online validating computer to sign it. And also because in this JSON file we can include other metadata that may be useful. We just starting playing and exploring which info may be useful or not.",
        "created_at": "2022-07-25T15:45:53.703000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok and what's wrong w/ the format suggested by similar types in the beacon HTTP APIs?\n\nsomething like\n\n```\n{\n  \"message\": {\n    \"validator_index\": \"1\",\n    \"from_bls_pubkey\": \"0x...\",\n    \"to_execution_address\": \"0x...\"\u003c\n  },\n  \"signature\": \"0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505\"\n}\n```",
        "created_at": "2022-07-25T15:53:21.128000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "oh no, that's perfect, just want to start implementing  cause we may find out at implementation time that having extra information may be useful.",
        "created_at": "2022-07-25T15:57:55.964000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For example, one of the questions that arose today is that with regard of MEV-Boost, I want to implement that on proposing blocks we should prioritize locally signed messages. But for this to work with MEV-Boost then we need to have a way of sending this info (like the fee recipient) to the relay/builder.",
        "created_at": "2022-07-25T15:59:29.168000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So they may also want some custom fields in the message.",
        "created_at": "2022-07-25T16:00:00.674000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i don't fully understand your use case but mev-boost has nothing to do w/ the policies a beacon node uses to pack the consensus data into a given block",
        "created_at": "2022-07-25T16:14:58.312000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so i'd imagine prysm already does this for the existing operation types and it would just carry over to this new type",
        "created_at": "2022-07-25T16:15:34.418000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Oh you're right, I guess for the messages they go outside of the payload so the builder is not really involved, the withdrawals are taken from the state and no option from the builder",
        "created_at": "2022-07-25T16:33:18.198000+00:00",
        "attachments": null
    }
]