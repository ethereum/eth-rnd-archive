[
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!322222239850168331\u003e you might have some insight into why this is happening: https://github.com/ethereum/pm/issues/374#issuecomment-911768223",
        "created_at": "2021-09-02T14:48:59.902000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hmmm",
        "created_at": "2021-09-02T16:01:30.335000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We default to 1 gwei, and theres a pr to change it to 2.5 gwei",
        "created_at": "2021-09-02T16:01:39.570000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i don't think its us",
        "created_at": "2021-09-02T16:01:47.152000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm assuming its both the application and user not knowing what they're doing. As mentioned metamask doesn't override values, similaryl web3.js doesn't",
        "created_at": "2021-09-02T16:02:39.647000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/MetaMask/metamask-extension/blob/develop/ui/hooks/useGasFeeInputs.js#L441\nand then \nhttps://github.com/MetaMask/metamask-extension/blob/develop/ui/hooks/useGasFeeInputs.js#L471",
        "created_at": "2021-09-02T16:19:56.511000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Can you ELI-not-familiar-with-the-MM-codebase ðŸ˜„ ?",
        "created_at": "2021-09-02T16:21:28.472000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it makes submit button inactive",
        "created_at": "2021-09-02T16:21:30.654000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah, yeah, I think that's a different issue",
        "created_at": "2021-09-02T16:21:56.328000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "MM makes the submit invalid when the maxFee is too low",
        "created_at": "2021-09-02T16:22:07.839000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I just tried on matcha now",
        "created_at": "2021-09-02T16:23:03.942000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm able to submit the actual txn without changing anything",
        "created_at": "2021-09-02T16:23:15.529000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screen_Shot_2021-09-02_at_9.22.43_AM.png",
                "content": "3d6a1205f0eedf136a290d1e3fa29135b7dc4d37163f9148a785049652d6f35b"
            }
        ]
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ough and also I looked at the screenshot and there different fields, you wanta to set maxFee = maxBaseFee+2, in case you want to use 2 as your priority fee",
        "created_at": "2021-09-02T16:23:26.779000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "f130a3ae681388a72c2d27fcefe765930b7e37b96016c6e4299fdbe63e80edfe"
            }
        ]
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But if I go to edit the gas fields, then I actually get blocked",
        "created_at": "2021-09-02T16:23:28.234000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screen_Shot_2021-09-02_at_9.22.54_AM.png",
                "content": "ae4a1d4b8cf68a61dfdc3cc5fc986cb4e0768b9da077a20743ba98f66f868ceb"
            }
        ]
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah, there another fields",
        "created_at": "2021-09-02T16:23:42.276000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "MaxFee is MaxBaseFee + PriorityFee",
        "created_at": "2021-09-02T16:23:56.573000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right, I'm saying the issue is that MM is auto-setting the values from app to values it would not even accept if the user set it",
        "created_at": "2021-09-02T16:24:04.712000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so users who just click \"Confirm\" vs. go in advanced settings end up overpaying",
        "created_at": "2021-09-02T16:24:19.981000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would rather prefer to have not `maxFee` field but `maxBaseFee` because now MM determines as `maxFee = priorityFee + maxBaseFee`",
        "created_at": "2021-09-02T16:25:38.360000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah, yeah, I can see that",
        "created_at": "2021-09-02T16:26:18.824000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's unclear the max fee is a superset of the max priority fee",
        "created_at": "2021-09-02T16:26:30.428000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it works correctly but just uses another fields, for example to set:\n`priorityFee` - 2 gwei\n`maxBaseFee` - 200 gwei.\nIn MM you'd have to use:\n`maxPriorityFee` - 2 gwei and `maxFee` - 202 gwei",
        "created_at": "2021-09-02T16:27:32.073000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I understand that",
        "created_at": "2021-09-02T16:27:56.586000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "my issue is that MM is \"blindly\" accepting a wrong suggestion from the app",
        "created_at": "2021-09-02T16:28:05.695000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and users who don't go and manually change that overpay",
        "created_at": "2021-09-02T16:28:13.213000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So, I think a \"quick fix\" could be that if an app submits a type 0x2 txn where priority fee == max fee, then MM should update the priority fee in the background to whatever its own oracle suggests right now",
        "created_at": "2021-09-02T16:28:46.883000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But I'm not sure if MetaMask is the one \"at fault\" here, or if there's perhaps a common library that these apps use that could be patched to not do that",
        "created_at": "2021-09-02T16:30:28.111000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But I do think this is a significant factor in people feeling like fees have increased post-1559. If their tips are 50-100x higher than should be, ofc their txns cost more",
        "created_at": "2021-09-02T16:31:38.421000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have a question, why app decides which transaction type to use? It will be cool if the user chooses which transaction type to use",
        "created_at": "2021-09-02T16:33:51.773000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Because using legacy instead of a dynamic fee transaction definitely is overpaying",
        "created_at": "2021-09-02T16:36:09.804000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, I've sent this feedback to MetaMask that it should be able to switch ðŸ™‚ I'm not familiar enough with the txn generation process in applications to understand why there are still legacy txns though.",
        "created_at": "2021-09-02T16:40:59.293000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not sure if it's as simple as, say, matcha updating their version of web3.js or something",
        "created_at": "2021-09-02T16:41:10.857000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "you can just copy `calldata` that app sends you and use transaction type 2 instead, transaction is being signed only when you click `submit` in MM, so you definitely is able to change transaction type to whatever you want",
        "created_at": "2021-09-02T16:47:01.891000+00:00",
        "attachments": null
    },
    {
        "author": "bculberson",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If someone is advanced enough to want to use type 1, they probably donâ€™t need mm to do it for them.",
        "created_at": "2021-09-02T18:50:06.718000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think this is a good idea. The app suggests the gas limit to the wallet, but leaves the wallet to decide the fees",
        "created_at": "2021-09-02T22:03:02.701000+00:00",
        "attachments": null
    }
]