[
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A new notebook on strategic behaviour https://twitter.com/barnabemonnot/status/1308744400718135297?s=21",
        "created_at": "2020-09-24T00:28:45.722000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e No, it is not. 51% attacks are a short term gain, whereas pushing the basefee down would be a longterm gain\nI recommend reading \u003chttps://medium.com/@MicahZoltu/eip-1559-51-attacks-should-you-live-in-fear-d817be3759dc\u003e.  This concern has come up a *lot* so I finally wrote a blog post about it a while back.",
        "created_at": "2020-09-24T02:06:53.447000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!97774605351010304\u003e",
        "created_at": "2020-09-24T02:08:22.063000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!97774605351010304\u003e The primary motivation (IMO) of 1559 is very much not supply reduction.  That is a nice add-on benefit, but the biggest win IMO is the usability improvements.  The second largest benefit is that it helps reduce the profitability of certain selfish mining attacks which increase in probability as fees increase.",
        "created_at": "2020-09-24T02:10:36.958000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e EIP1559 is the first EIP that actually touches the whole protocol, doesnt it ?\n\u003c@!97774605351010304\u003e 1559 is actually a very small change technically.  The amount of code it touches is pretty small.",
        "created_at": "2020-09-24T02:11:43.724000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!486501030046203915\u003e Is there a TL;DR of this work? \u003chttps://github.com/barnabemonnot/abm1559/blob/master/notebooks/strategicUser.ipynb\u003e",
        "created_at": "2020-09-24T02:56:55.675000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If it agrees with my expectations, I won't waste my time digging in to it.  ðŸ˜¬",
        "created_at": "2020-09-24T02:57:13.066000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "basically that during the start of a spike it's optimal to set a non-negligible miner bribe?",
        "created_at": "2020-09-24T02:57:37.008000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes! from the readme: Before reaching stationarity, or when demand varies rapidly, the market endures transitionary periods where either too many users or too few decide to transact. When there are too few, the basefee naturally decreases. But when there are too many, users have an incentive to increase their premiums during this transitionary period, until sufficiently many users are discouraged by the basefee level, at which point being strategic is no longer helpful. We investigate this dynamics and briefly compare the efficiency in both strategic and non-strategic cases.",
        "created_at": "2020-09-24T02:57:45.552000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i don't think this violates your expectations",
        "created_at": "2020-09-24T02:57:55.474000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks!  I didn't think to go back to the readme for a summary.  That does sound like it aligns with my expectations.",
        "created_at": "2020-09-24T02:58:29.229000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the idea was to recreate this scenario to make it clear that the incentive to be strategic doesn't last",
        "created_at": "2020-09-24T02:58:47.371000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "also, it's a simple strategy: strategic users overbid based on the premiums they observe in the previous block",
        "created_at": "2020-09-24T02:59:43.914000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but \u003c@!273808422753796097\u003e pointed out that users could anticipate more and set their premiums based on where they expect basefee to land",
        "created_at": "2020-09-24T03:00:17.761000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so i am looking at how wallets could suggest defaults whenever basefee moves above its moving average for instance",
        "created_at": "2020-09-24T03:01:16.740000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As a user, my plan is to just set miner_bribe to 1 and set max_fee to all my ETH.  ðŸ˜›",
        "created_at": "2020-09-24T03:14:27.296000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(in reality, max fee will be set to the max I'm *actually* willing to pay)",
        "created_at": "2020-09-24T03:14:59.508000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e As a user, my plan is to just set miner_bribe to 1 and set max_fee to all my ETH.  ðŸ˜›\n\u003c@!301186049323958275\u003e the captain always leaves the ship last ðŸ˜‰",
        "created_at": "2020-09-24T03:15:42.999000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e (in reality, max fee will be set to the max I'm *actually* willing to pay)\n\u003c@!301186049323958275\u003e assuming users don't have time preferences, this is probably the optimal strategy. but it's hard to know what is your true willingness to pay. Celo for instance has a rule based on multiples of the basefee",
        "created_at": "2020-09-24T03:17:06.974000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, for modelling purposes I don't think we have a reasonable way to figure out what reality is for how much users are *willing* to pay.",
        "created_at": "2020-09-24T03:17:44.730000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We have seen a willingness to pay 500 recently, and 6 months ago that was considered \"so stupidly high that we should prevent users from ever setting above this\".",
        "created_at": "2020-09-24T03:18:11.767000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Really it comes down to Ethereum usage demand, which can change over time as different use cases present themselves.",
        "created_at": "2020-09-24T03:18:40.887000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "assuming they are semi-rational, we have a lower bound of the WTP, but agreed that we shouldn't use that as \"basefee will never go higher than twice that measure\"",
        "created_at": "2020-09-24T03:19:02.416000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "WTP?",
        "created_at": "2020-09-24T03:19:21.419000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "willingness to pay, sorry",
        "created_at": "2020-09-24T03:19:29.233000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think \"what is my willingness to pay?\" isn't really a good model of how humans think",
        "created_at": "2020-09-24T05:10:08.824000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you ask that of people directly in a vacuum, you'll get crazy answers that probably don't map to what they actually want",
        "created_at": "2020-09-24T05:10:26.151000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The way humans think is more like \"okay, so I see that prices are around 50-100, does that feel okay to me? Would I feel okay if they were 200?\"",
        "created_at": "2020-09-24T05:11:05.397000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I wonder how unreasonable it would be to have tools default the `max_fee` to \"all the ETH\"?",
        "created_at": "2020-09-24T05:26:08.482000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "95% of the time (no increasing congestion), this will work perfectly.  Of that remaining 5% of the time when there is increasing congestion that is very short lived (probably 95% of that or something), it will also work exactly like the user wants.",
        "created_at": "2020-09-24T05:27:15.353000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It only fails when there is a very long period of increasing congestion (2x full blocks for 30 minutes straight for example).",
        "created_at": "2020-09-24T05:27:46.116000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we could parameter sweep to get a good number, but i think a rule \"default fee cap to x times the current basefee\" makes sense. if basefee increases 5-fold, whatever the absolute value I was targetting, I might want to rethink my transaction, and resubmit when that happens",
        "created_at": "2020-09-24T05:53:55.459000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the larger the x, the less frequent this scenario happens (you need a sustained increase before you pass the threshold), but also the larger your risk",
        "created_at": "2020-09-24T05:54:52.100000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "How long of full blocks per 2x?",
        "created_at": "2020-09-24T05:55:29.665000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1.5 minutes per doubling I believe?",
        "created_at": "2020-09-24T05:56:06.588000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "17 blocks to multiply by 2 i get",
        "created_at": "2020-09-24T06:00:41.262000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "wait...",
        "created_at": "2020-09-24T06:01:18.006000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`1.125^6 ~= 2`?",
        "created_at": "2020-09-24T06:01:20.556000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes ^^",
        "created_at": "2020-09-24T06:01:27.905000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think you want log(x) in that code, not x",
        "created_at": "2020-09-24T06:02:51.385000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes...",
        "created_at": "2020-09-24T06:03:14.982000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "shouldn't code on an empty stomach...",
        "created_at": "2020-09-24T06:05:34.031000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "Screenshot_2020-09-24_at_14.05.06.png",
                "content": "77129c89749d213cf31e49cfd23c697e8ae0cb01036f4fbfc6b4f3b9f8a41875"
            }
        ]
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I had an idea for the transition I'd be curious to hear people's thoughts on: what if instead of starting with a 50-50 cap for both legacy *and* 1559 transactions, we only cap the legacy transactions to occupy at most 50% of a block? This means you could have blocks that are 100% 1559-style transactions from day 1, while still keeping backwards compatibility. \n\nIf we did that, then maybe it becomes easier to remove the transition period, because we can just ship it like this, and then wait and see how much 1559 volume picks up. Worst case: 1559 gets 0 adoption, we have the same throughput as today of legacy txns. \"Best\" (for 1559) case, we get ~100% of transactions in 1559-style quite rapidly.",
        "created_at": "2020-09-24T15:30:25.269000+00:00",
        "attachments": null
    },
    {
        "author": "pintail_xyz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well if we're considering alternative transition mechanisms, grateful also for thoughts on my previous idea - burn x% of legacy transactions gas price, where x is percentage of the last n blocks' gas that was spent on native 1559 tx",
        "created_at": "2020-09-24T15:33:40.453000+00:00",
        "attachments": null
    },
    {
        "author": "pintail_xyz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You get a snowball transition that kills the long tail",
        "created_at": "2020-09-24T15:34:02.951000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@552133098075193354\u003e I am a big fan of the current proposal we all agreed on (which I still haven't been able to get merged) because it makes it so we don't need to have multiple pending transaction pools, which really complicates things.",
        "created_at": "2020-09-24T15:41:57.900000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It also makes it so we don't need any transition code, which simplifies things even more.",
        "created_at": "2020-09-24T15:42:18.892000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is there a desire from people to have a transition for some reason?  If so, why do we desire that?",
        "created_at": "2020-09-24T15:42:42.782000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If the goal is just to eventually deprecate legacy transactions, then I'm a fan of simply taxing them.  Reason for this is because it could be a seperate EIP and it would be very easy to implement.",
        "created_at": "2020-09-24T15:44:34.650000+00:00",
        "attachments": null
    },
    {
        "author": "pintail_xyz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yep my proposal is a legacy tax, on the assumption that legacy tx are converted to 1559s.",
        "created_at": "2020-09-24T15:47:00.877000+00:00",
        "attachments": null
    },
    {
        "author": "pintail_xyz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is anyone advocating to stick with parallel pools?",
        "created_at": "2020-09-24T15:47:28.961000+00:00",
        "attachments": null
    }
]