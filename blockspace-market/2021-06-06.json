[
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is my latest API proposal based on the wish list:\nhttps://gist.github.com/zsfelfoldi/473e29106d38525de6b4413e2ebcddf1",
        "created_at": "2021-06-06T14:32:33.045000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The percentile is by gas used?",
        "created_at": "2021-06-06T14:41:15.533000+00:00",
        "attachments": []
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2021-06-06T14:41:36.482000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Might be good to specify that explicitly in your doc.",
        "created_at": "2021-06-06T14:41:45.154000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I prefer optional parameters rather than sentinel values for triggering different behavior in JSON-RPC like you are with the `rewardPercentile`.",
        "created_at": "2021-06-06T14:42:58.006000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "```\nfeeHistory(blockCount) ([]baseFee, []usedRatio)\nfeeHistory(blockCount, rewardPercentile) ([]reward, []baseFee, []usedRatio)\n```",
        "created_at": "2021-06-06T14:43:54.481000+00:00",
        "attachments": []
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thanks, fixed",
        "created_at": "2021-06-06T14:49:01.018000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I like the idea of having a single function to get all relevant data, since most often you need it all and I believe the cost of the lookups amortizes well when you do them both at the same time.",
        "created_at": "2021-06-06T14:50:56.714000+00:00",
        "attachments": []
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also, basefee is a lot cheaper to obtain than the reward.",
        "created_at": "2021-06-06T14:53:40.691000+00:00",
        "attachments": []
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hence the \"no reward\" option. I think a \"no basefee\" version is totally unnecessary.",
        "created_at": "2021-06-06T14:54:37.142000+00:00",
        "attachments": []
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://youtu.be/SpU6WACP2cM",
        "created_at": "2021-06-06T16:06:09.495000+00:00",
        "attachments": []
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Actually my geeky mind would also add 'feeHistory(blockCount, []rewardPercentile) ([][]reward, []baseFee, []usedRatio)' as an advanced option because it would be interesting to look at the rewards as a 2d map (block number, percentile) and it's not a lot more expensive to calculate all 100 percentiles than to calculate a single one.",
        "created_at": "2021-06-06T16:24:05.356000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That may be tricky to implement in all languages.",
        "created_at": "2021-06-06T16:26:15.739000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Probably worth multiple endpoints at that point.",
        "created_at": "2021-06-06T16:26:23.659000+00:00",
        "attachments": []
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Definitely, i'd want to define it as optional to implement, just like the support for pending block. Would be probably fun and interesting to watch the reward vs percentile curve of the pending state evolve as new txs are coming in. If you want such a feature, you can just use a client that implements it.",
        "created_at": "2021-06-06T16:37:17.799000+00:00",
        "attachments": []
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you meant the function name overloading being tricky, sure, a different name is fine for me.",
        "created_at": "2021-06-06T16:41:05.572000+00:00",
        "attachments": []
    }
]