[
    {
        "author": "halfinney.",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://twitter.com/tayvano_/status/1397725861575421953?s=21",
        "created_at": "2021-05-27T02:12:46.336000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Tell Taylor to join Discord.  üôÇ",
        "created_at": "2021-05-27T03:20:56.774000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I regret missing the call, as it seems perhaps premium pricing strategy wasn't appropriately conveyed (based on that Twitter thread).",
        "created_at": "2021-05-27T03:21:27.761000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i did my best üôÇ but also wrote it up in reply to Taylor, to clear any misunderstanding: https://twitter.com/barnabemonnot/status/1397731718723821569",
        "created_at": "2021-05-27T03:26:52.279000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think part of the confusion is how often there will be 2x congestion that lasts many blocks.",
        "created_at": "2021-05-27T03:40:00.509000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My suspicion is that 6 block 2x congestion will be **extremely** rare.",
        "created_at": "2021-05-27T03:40:31.235000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think other people are trying to build a UX around the assumption that it happens often enough that it needs to be dealt with.",
        "created_at": "2021-05-27T03:40:54.839000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "MEV definitely causes problems with the premium, especially if miners start tuning their base fee requirements based on transient MEV opportunities.",
        "created_at": "2021-05-27T03:41:33.296000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "she wasn't on the call, to be clear",
        "created_at": "2021-05-27T03:45:54.107000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "üòâ  https://twitter.com/trent_vanepps/status/1397738671491719172?s=20",
        "created_at": "2021-05-27T03:46:35.791000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "she seems to miss the forest for the API trees",
        "created_at": "2021-05-27T03:49:10.990000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and gets hung up on \"tx costs aren't guaranteed to decrease\"",
        "created_at": "2021-05-27T03:50:43.035000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "to be fair she touches on the more knotty parts of the mechanism, and I am sure there are still a lot of people who share the same view. from a wallet dev POV who spent the last 5 years with one paradigm i think it's a pretty big shift",
        "created_at": "2021-05-27T03:51:15.957000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't understand why legitimate critique has to be couched in all caps, and a bunch of half-truths.",
        "created_at": "2021-05-27T03:52:30.438000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "maybe these statements are confusing actually: https://twitter.com/barnabemonnot/status/1397743407615725573 we should in general avoid equating priority fee with gas prices",
        "created_at": "2021-05-27T03:52:50.044000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah, well, twitter üôÇ",
        "created_at": "2021-05-27T03:52:58.350000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it's also my bad, i didn't pick it up when i read the cheatsheet, but i think it'd be more correct to present priority fee as a simple extra. i do believe estimating it during demand shifts is much simpler than current models of gas price estimation",
        "created_at": "2021-05-27T03:54:10.448000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "twitter is no excuse for spreading misinformation. decreasing gas costs was never a goal of the mechanism. frustrating when we are trying to do genuine outreach and user education",
        "created_at": "2021-05-27T03:54:36.446000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "completely happy to modify the existing content",
        "created_at": "2021-05-27T03:55:10.274000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Up until very recently, it was assumed that minPremium would be very stable.  The fact that it might be unstable definitely complicates things.  üò¢",
        "created_at": "2021-05-27T03:56:26.917000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "anyways.. we're organizing a 1559 API call for next week.",
        "created_at": "2021-05-27T03:56:44.807000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i am still curious about this https://twitter.com/barnabemonnot/status/1397746242789072900\n\ndo people genuinely want to avoid oracles or they simply don't know how to build them?",
        "created_at": "2021-05-27T03:56:47.637000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Originally we thought that miners would set `minPremium` as a launch config, or use a default of `1 nanoeth`.  However, given MEV the rational strategy is to have it vary based on MEV in current block.",
        "created_at": "2021-05-27T03:57:05.588000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My recommendation is that we build clients that just have a hard coded `minPremium` and see if miners bother mutating it (they may not).",
        "created_at": "2021-05-27T03:57:20.440000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yeah but it's not hard to build an oracle for that, that would be infrequently changed, based on the last 100 blocks with MEV",
        "created_at": "2021-05-27T03:57:37.061000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the thing is you never know when MEV will be 0.1 ETH or 20",
        "created_at": "2021-05-27T03:57:49.654000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No?  It changes based on the pending pool for the *current block*.",
        "created_at": "2021-05-27T03:57:53.705000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "MEV based minPremium is unknown by anyone until the block is built and you know what the MEV of it is.",
        "created_at": "2021-05-27T03:58:21.522000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so there is no point trying to predict forward, or rather the best you can do is a simple average of latest values, which maybe you add a couple weis on top of to be sure",
        "created_at": "2021-05-27T03:58:25.202000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "which is why i think that minPremium for MEV cannot be varying that much",
        "created_at": "2021-05-27T03:58:49.808000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm secretly praying that no miner bothers to implement a more complex minPremium than a hard coded value.  The pending pool starts to suck *a lot* if they do.",
        "created_at": "2021-05-27T03:59:00.246000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is a really good point. I feel like this is the information that will reveal itself after a short period on mainnet. Once it is known how thirsty the network is for sequential 2x blocks, you can identify and convey that as a standard message (\"pay X for inclusion in 45s\"), where that strategy fails 2% of the time",
        "created_at": "2021-05-27T03:59:18.380000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and also agreed miners might not bother, they'd not include if it was in a sufficiently heavy block MEV-wise, otherwise would probably do it",
        "created_at": "2021-05-27T03:59:19.137000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`minPremium` can range massively.  üò¢",
        "created_at": "2021-05-27T03:59:30.224000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no it can but what i am saying is that you cannot know by any kind of estimation by how much",
        "created_at": "2021-05-27T03:59:47.476000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it's much more nonlinear than gas prices",
        "created_at": "2021-05-27T04:00:00.660000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh, yeah.",
        "created_at": "2021-05-27T04:00:24.043000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so best to target some average reasonable value with a small extra to achieve 99% confidence",
        "created_at": "2021-05-27T04:00:28.699000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and i doubt the average reasonable value varies quite that fast",
        "created_at": "2021-05-27T04:00:44.725000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If we assume that you cannot account for MEV `minPremium` changes, or that they won't happen, then `maxGasPremium` will become known very quickly after London launches and probably won't change hardly ever.",
        "created_at": "2021-05-27T04:01:17.439000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You could probably just have a human manually check once a week to see if you need to adjust.",
        "created_at": "2021-05-27T04:01:28.766000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes exactly, or if you are not against oracles, ping an endpoint that just says \"it's still 2 Gwei, same as last week btw\"",
        "created_at": "2021-05-27T04:02:12.905000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It sounds like we need to do a better job of conveying this simple solution to wallets.  Perhaps part of the problem is that people like you and I like to be explicitly clear about edge cases, and maybe we shouldn't be overwhelming wallet authors with those details if they *probably* won't need to worry about them.",
        "created_at": "2021-05-27T04:03:53.259000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Same with the 2x congestion stuff.  We all believe that it will rarely happen, but when discussing with wallet authors we always bring it up as a thing and that is what they latch on to.  Maybe we need to simplify messaging and just recommend that the set the `maxFeePerGas` to `baseFee * 2`?",
        "created_at": "2021-05-27T04:05:10.388000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "**Micah's Wallet Recommendations**:\n* Set `maxFeePerGas = latestBlock.baseFee * 2`\n* At launch set `maxPremiumPerGas = 1 nanoeth`\n* A week after launch see what `minPremiumPerGas` miners are using and change `maxPremiumPerGas` to match 95th percentile.",
        "created_at": "2021-05-27T04:06:58.715000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(open to thoughts on the above)",
        "created_at": "2021-05-27T04:07:57.404000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "a lot of the wireframes presented in the call are very much derived from the current experience, with sliders for priority fee etc. I think there are two ways to go about this:\n- let wallets incrementally move from the current model to 1559 (remove the training wheels as they go, e.g., autoset all parameters by default at some point)\n- or push wallets to use a reduced, simplified 1559-native format, where everything is autoset, demand shifts are detected by looking at the previous block (is it full or not?) and in case of demand shift show three maxPremium options, 2 gwei, 3 gwei, 4 gwei (or if they want a fancier version, 60th/80th/95th percentile of previous block tips)",
        "created_at": "2021-05-27T04:08:25.433000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "obviously I prefer the second option but I think from the wallet team perspectives option 1 is more palatable",
        "created_at": "2021-05-27T04:09:16.502000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and over time the second option can be refined, it's really a conservative and simple model, there are many ways to make it fancier",
        "created_at": "2021-05-27T04:09:42.677000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In the case of a demand spike (which I don't think wallets necessarily need to build for) I actually recommend increasing the baseFee multiplier rather than the premium.",
        "created_at": "2021-05-27T04:09:48.439000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Rather than trying to compete with a bunch of apes, just setup your transaction to be included once the aping dies down.",
        "created_at": "2021-05-27T04:10:13.553000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the argument from wallet devs here is they don't want their users to overpay compared to other wallets, dan had a tweet about it, let me find it...",
        "created_at": "2021-05-27T04:10:27.187000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The strategy you proposed could result in the user overpaying too.",
        "created_at": "2021-05-27T04:10:54.285000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In fact, I tentatively will contend that it results in overpayment *more often* than my strategy.",
        "created_at": "2021-05-27T04:11:08.217000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://twitter.com/danfinlay/status/1392131157777551364",
        "created_at": "2021-05-27T04:11:12.628000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Once we know the frequency at which we see 2x congestion we will be able to better calculate which strategy is actually optimal.",
        "created_at": "2021-05-27T04:12:17.800000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i agree! i think on average either yields the same result (blocks are limited after all, so some will go through anyways). from the UX side though the impression of control and competitivity by setting your premium versus the fee cap might win out",
        "created_at": "2021-05-27T04:13:04.393000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Another option for messaging is to just tell wallet authors, \"wait for London to be out for a couple weeks before you launch anything\".",
        "created_at": "2021-05-27T04:13:11.516000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Once London has been out for a bit we'll get a *much* better idea for some reasonable settings and might be able to give a much more clear picture to wallet authors.",
        "created_at": "2021-05-27T04:14:00.602000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if no one adopts 1559 i am not sure, i think the dynamics observed in a 1559-environment with everyone using legacy systems wouldn't be so representative",
        "created_at": "2021-05-27T04:15:05.287000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm, good point.",
        "created_at": "2021-05-27T04:16:32.533000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "as a thought experiment if wallet went with the \"upping premium\" route for 2x congestion, an \"oracle-free\" method could even be to add 1 Gwei to each price option (assuming in the 2x case the wallet reverts to \"slow\", \"medium\", \"fast\") for every block that was full previously in a sequence of full blocks. so if 5 blocks were full suggest 6/7/8 Gwei for the three defaults, if 6 were full 7/8/9 etc...",
        "created_at": "2021-05-27T04:19:41.749000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "not saying it's a good oracle but it's one that relies on a very limited set of data",
        "created_at": "2021-05-27T04:20:09.038000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the more blocks full in a row, the lower the chance the next block will also be full?",
        "created_at": "2021-05-27T04:20:12.417000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes but also the longer the bidding war would have gone on",
        "created_at": "2021-05-27T04:20:34.224000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Demand decreases as base fee increases.",
        "created_at": "2021-05-27T04:20:41.620000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there are two opposing forces of course, but you don't really know when the next block won't be full",
        "created_at": "2021-05-27T04:20:59.411000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "you do know blocks keep being full, so people might be trying to outwin each other",
        "created_at": "2021-05-27T04:21:20.434000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Any wallet that implements such a strategy is effectively bidding against other users of wallets that implement the same strategy.",
        "created_at": "2021-05-27T04:21:26.051000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So you are pitting your own users against each other if you are the only (or the dominant) wallet using that strategy.",
        "created_at": "2021-05-27T04:21:38.968000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i guess it's true üôÇ",
        "created_at": "2021-05-27T04:22:21.021000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Really, you want to wait and see what strategy other wallets use and then beat that, you don't want to try to beat theoretic strategies because strategy execution is not free.",
        "created_at": "2021-05-27T04:22:25.701000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In a hyper competitive environment, I think the optimal strategy is to start with a naive strategy and then wait for some other wallets to implement a \"better\" strategy, and then you beat *that* strategy specifically.",
        "created_at": "2021-05-27T04:23:05.445000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This way you remain competitive, but you never waste user money on an unnecessary strategy.",
        "created_at": "2021-05-27T04:23:49.789000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What will `eth_getGasPrice` return post EIP-1559? Is there a node-specific way to determine the recommended tip?",
        "created_at": "2021-05-27T06:50:37.387000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I‚Äôm adding eip-1559 support to ethers, and trying to figure out the best way to arrive at sane defaults for values not explicitly set.",
        "created_at": "2021-05-27T06:51:42.756000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Recommendation for sane defaults:\n```\nmaxFeePerGas = latestBlock.baseFee * 2\nmaxPriorityFeePerGas = 10**9\n```",
        "created_at": "2021-05-27T07:30:35.308000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "10 gwei?",
        "created_at": "2021-05-27T07:30:59.238000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1.",
        "created_at": "2021-05-27T07:31:02.343000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh!",
        "created_at": "2021-05-27T07:31:08.982000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right. Maths.",
        "created_at": "2021-05-27T07:31:12.332000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1e9. üôÇ",
        "created_at": "2021-05-27T07:31:21.820000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But this is going into a library. Which might not get updated often. Is hard-coding the value the recommendation?",
        "created_at": "2021-05-27T07:31:55.779000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you have access to a good sampling of historic blocks, you can look at the 95th percentile of lowest premium per gas included in the last `n` blocks.",
        "created_at": "2021-05-27T07:31:57.636000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There isn‚Äôt an rpc call going in to get current same values?",
        "created_at": "2021-05-27T07:32:20.538000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Assuming no MEV, 1 is *above* the calculated opportunity cost for miners, so it would be irrational for them to set higher.",
        "created_at": "2021-05-27T07:32:21.302000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We can't say for certain which miners will behave rationally though until after London.",
        "created_at": "2021-05-27T07:32:31.585000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`baseFee` will be returned in the block header from `eth_getBlockBy*`.",
        "created_at": "2021-05-27T07:33:16.598000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't know if any clients plan on providing a time weighted histogram of historic min fee per gas in non-full blocks (which is what you want if you want to do better than `1`).",
        "created_at": "2021-05-27T07:33:57.380000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ok. So current advice is to hardcode 1 as a default.",
        "created_at": "2021-05-27T07:34:04.346000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Sounds good to me. üôÇ",
        "created_at": "2021-05-27T07:34:09.919000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is my advice for a reasonable default.",
        "created_at": "2021-05-27T07:34:11.167000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Some time after London (maybe a month or two) I recommend checking back to see if there is a better recommendation.",
        "created_at": "2021-05-27T07:34:26.589000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah. I was hoping for a getFeeStats.",
        "created_at": "2021-05-27T07:34:35.823000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Once we start seeing 1559 transactions on-chain we'll start being able to guess what minPremiumFee miners are setting.",
        "created_at": "2021-05-27T07:34:52.193000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah. I‚Äôm sure people will complain too, it ethers is causing transactions to fail. :p",
        "created_at": "2021-05-27T07:34:57.882000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "People are quick to complain. üòâ",
        "created_at": "2021-05-27T07:35:16.063000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks! üôÇ",
        "created_at": "2021-05-27T07:35:20.159000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you don't care about your user's users wasting money, you could set `minPriorityFeePerGas = maxFeePerGas`.  üò¨",
        "created_at": "2021-05-27T07:35:47.818000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(which just mirrors legacy transaction handling and gives you no benefits of EIP-1559)",
        "created_at": "2021-05-27T07:35:58.908000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I‚Äôd rather not do that in the library level. :p",
        "created_at": "2021-05-27T07:36:05.642000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But then you'll get complaints about something else.  üòÑ",
        "created_at": "2021-05-27T07:36:11.799000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Although for type: null transactions, I think that will be there default.",
        "created_at": "2021-05-27T07:36:21.127000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Basically, you *will* get complaints no matter what.  I think `1e9` is a very reasonable default for a London launch.",
        "created_at": "2021-05-27T07:36:31.719000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But I plan to make type 2 the default for networks that support it.",
        "created_at": "2021-05-27T07:36:37.331000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And if anyone complains about that being your London launch parameter you can send them to me.  üòÑ",
        "created_at": "2021-05-27T07:37:11.361000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And maybe schedule an August release to update that, since we'll hopefully have more information by then and be able to make better recommendations.",
        "created_at": "2021-05-27T07:37:41.222000+00:00",
        "attachments": null
    },
    {
        "author": "ricmoo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Haha! Deal. üôÇ",
        "created_at": "2021-05-27T07:39:11.720000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://twitter.com/tayvano_/status/1397725874577829888?s=20",
        "created_at": "2021-05-27T08:14:18.479000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I've been reading through the thread, I guess others have seen this?",
        "created_at": "2021-05-27T08:14:37.608000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "we discussed it here! https://discord.com/channels/595666850260713488/692078615269212180/847296243007881256",
        "created_at": "2021-05-27T08:26:51.612000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "okay great",
        "created_at": "2021-05-27T08:32:42.017000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I've been tweeting like a mad man. lol",
        "created_at": "2021-05-27T08:32:52.817000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I made an illustrated version about reducing overpaying fees.",
        "created_at": "2021-05-27T08:34:35.887000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2021-05-27T08:34:38.504000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "E2YOnhlVoAESraU.png",
                "content": "fca6babaf67b340ba3451a2d9cf4f1244f54149526058376c125e0e63c9fb6f0"
            }
        ]
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is good stuff.",
        "created_at": "2021-05-27T08:39:04.127000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think it will be more like it works 99% of the time. There are 6.5k blocks a day. Fee spikes probably won't happen once a day, and if they do it might be a couple blocks.",
        "created_at": "2021-05-27T08:42:58.208000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The base_fee doubles really quick. Sequentially full blocks should be *really* rare",
        "created_at": "2021-05-27T08:44:28.148000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!486501030046203915\u003e do you have the rate at which the fee doubles if the blocks are full?",
        "created_at": "2021-05-27T08:55:57.539000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I am reading through articles and not finding it.",
        "created_at": "2021-05-27T08:56:12.597000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There is another thread there: https://twitter.com/barnabemonnot/status/1397787439201021956?s=20",
        "created_at": "2021-05-27T08:57:14.023000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But the rate is 6 full blocks double basefee",
        "created_at": "2021-05-27T08:57:25.478000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://twitter.com/JHancock/status/1397850683122982914?s=20",
        "created_at": "2021-05-27T09:47:25.822000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Visualized part 2",
        "created_at": "2021-05-27T09:47:35.381000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "should have waited till it wasn't 3 am so my grammar actually made sense",
        "created_at": "2021-05-27T10:03:54.216000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Nah.  3am with a foggy brain is the right way to use Twitter.",
        "created_at": "2021-05-27T10:10:47.167000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!187490121698770945\u003e this is great! Small nit is that your \"fee pyramid\" would go down as well, from 800 -\u003e 400 -\u003e 200 -\u003e etc. back to the normal level",
        "created_at": "2021-05-27T14:35:32.843000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "gonna add this to the Cheatsheet if you're ok with that?",
        "created_at": "2021-05-27T14:57:08.370000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "shouldn't it also dip below the average of 50?",
        "created_at": "2021-05-27T15:16:17.350000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Here is an idea for a live fee tracker\n\nI depict the basefee as a platform with a heavy weight on it. Transactions enter from the purple mempool into the green \"latest mined block\", and it can be seen how full that block is.\n\nThe historical blocks in blue demonstrate recent basefee values. \n\nLooking at the graph you can immediately see the state of the fee market. If the purple zone is high vs blue or vice versa, you can instantly grok the vibe\n\nSorry for the low res!",
        "created_at": "2021-05-27T15:20:33.277000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "basefee_diagram.png",
                "content": "c7018db190dd5fe70cb6693403044d6feb221eaa4968c70af937abc9d8dede7f"
            }
        ]
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In that image, the recently mined green Txs fill up about 50% of a normal block (25% of the max), and so the basefee will lower. You can see that a few of the purple txs would then qualify for inclusion, but not many, so again the basefee is likely to fall. An interested party might place the orange Tx as a thrifty bet that after a few minutes (~6-12 blocks) all the mempool Txs ahead of them might have been included and their Tx will be included.",
        "created_at": "2021-05-27T15:25:58.746000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not necessarily? If the bulk of the demand is at 50 gwei, it will stabilize back to that. Reality is the entire grey area will be a bit noisier and not perfectly smooth",
        "created_at": "2021-05-27T16:00:45.876000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "oops, I am conflating baseFee with gas limit",
        "created_at": "2021-05-27T16:44:20.756000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://twitter.com/trent_vanepps/status/1397959686247301123?s=20",
        "created_at": "2021-05-27T16:56:58.555000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It will be smoother than that in reality.  Every block the baseFee can change by up to 12.5%, but in your chart it jumps after 6  blocks.",
        "created_at": "2021-05-27T21:33:38.434000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yep yep",
        "created_at": "2021-05-27T22:49:59.085000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I left this part out because at that point the blocks aren't full and the \"first price auction\" isn't what gets you into a block anymore. I wanted to focus on that point in particular.",
        "created_at": "2021-05-27T22:51:28.160000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For the fee to go down the same rate blocks would need to be empty. Which that is pretty unlikely, a good representation of the base fee price wouldn't show blocks being full as well.",
        "created_at": "2021-05-27T22:53:55.318000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think sometimes we get so caught up in being very accurate about some of the nuance that the general points get lost to people.",
        "created_at": "2021-05-27T22:56:49.824000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The nuance of \"we are at higher gas fees, but blocks aren't full anymore so we still have the improvements of the fee mechanisms(i.e. you can still get into a block in a reasonable time if you want to)\"",
        "created_at": "2021-05-27T22:58:27.691000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Fair enough!",
        "created_at": "2021-05-27T22:59:05.713000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At that point they get caught up on \"gas fees high\" and somehow conflate that with \"blocks are still full\"",
        "created_at": "2021-05-27T22:59:17.134000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There is probably better ways to get that across",
        "created_at": "2021-05-27T22:59:35.800000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and, Not sure i'm up for to many iterations on this. üòÖ",
        "created_at": "2021-05-27T23:00:30.050000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You could probably bounty someone to do it though. A set of EIP-1559 visual representations for people to share.",
        "created_at": "2021-05-27T23:03:23.360000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this is in my wheelhouse actually",
        "created_at": "2021-05-27T23:08:36.355000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i've done other diagrams",
        "created_at": "2021-05-27T23:08:45.462000+00:00",
        "attachments": null
    },
    {
        "author": "madeof_tin7509",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Cool cool üëç",
        "created_at": "2021-05-27T23:13:35.028000+00:00",
        "attachments": null
    }
]