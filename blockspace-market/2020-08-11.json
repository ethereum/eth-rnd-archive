[
    {
        "author": "tkstanczak",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yo",
        "created_at": "2020-08-11T13:50:07.742000+00:00",
        "attachments": null
    },
    {
        "author": "matkt0",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hi \u003c@!489256758989029405\u003e",
        "created_at": "2020-08-11T13:53:06.295000+00:00",
        "attachments": null
    },
    {
        "author": "matkt0",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The genesis for the EIP1559 testnet",
        "created_at": "2020-08-11T13:53:50.861000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "genesis.json",
                "content": "085ec00444974c835130a6e4141f945b5fc8493dbda379a04dd7d6a234c8423a"
            }
        ]
    },
    {
        "author": "matkt0",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "static-nodes for EIP1559 testnet",
        "created_at": "2020-08-11T13:54:45.386000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "static-nodes.json",
                "content": "9fd08f2a18b477c5a62d7eabbf978142413070f4e2847529c44bdf58a4ca436e"
            }
        ]
    },
    {
        "author": "matkt0",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Blockchain explorer : http://eip1559-testnet.ops.pegasys.tech:3000/",
        "created_at": "2020-08-11T13:56:26.182000+00:00",
        "attachments": null
    },
    {
        "author": "talkabhi4601",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@201034288693510145\u003e  if I eat a lot doesn't authorise me to shit on others.",
        "created_at": "2020-08-11T16:55:13.392000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e \u003c@!376568077950910466\u003e Did you indicate that currently Geth/Besu truncate (round to 0) rather than round to negative infinity when doing integer division?\n\u003c@!301186049323958275\u003e Hey yeah both besu and geth are using euclidean division. This is standad in geth, which employs https://golang.org/pkg/math/big/ for its integer operations and which uses euclidean.",
        "created_at": "2020-08-11T17:08:33.801000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Gonna take a look at your PR updates today",
        "created_at": "2020-08-11T17:09:19.396000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is Euclidian truncate?",
        "created_at": "2020-08-11T17:09:21.554000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm, looks like it is round towards infinity.",
        "created_at": "2020-08-11T17:11:11.472000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah it rounds to neg infinity",
        "created_at": "2020-08-11T17:11:23.619000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do the clients round toward infinity elsewhere?  If not, what was the reason for choosing that over truncation?",
        "created_at": "2020-08-11T17:11:35.116000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "geth already uses big.Int, just continuing that usage",
        "created_at": "2020-08-11T17:12:01.235000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Would be a pain to switch tbh",
        "created_at": "2020-08-11T17:12:13.720000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So for Geth it was the simple path, but no other compelling reason?",
        "created_at": "2020-08-11T17:12:21.236000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah",
        "created_at": "2020-08-11T17:12:38.040000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Geth already uses big.Int, doesn't make sense to change that",
        "created_at": "2020-08-11T17:13:06.173000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Unless there is a compelling reason",
        "created_at": "2020-08-11T17:13:11.447000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well, the compelling reason would be because the change is similarly difficult in other languages going the other direction.  ðŸ˜‰",
        "created_at": "2020-08-11T17:13:28.427000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well, what other implementations are we considering? Besu and geth are in line.",
        "created_at": "2020-08-11T17:13:48.062000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Python, for example, has built in integer division but it rounds toward 0.  So adding \"round toward infinity\" would be a pain for any Python client.",
        "created_at": "2020-08-11T17:13:49.801000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't know about Java or C#.",
        "created_at": "2020-08-11T17:14:01.013000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I haven't formed a strong opinion yet, just thinking out loud really.",
        "created_at": "2020-08-11T17:14:19.465000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm generally weary of picking a side for something like this because \"it was easiest for the first person to implement it\" and would prefer we do it for stronger reasons.",
        "created_at": "2020-08-11T17:14:52.243000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I dont think there is a stronger reason, its either easier for one or the other",
        "created_at": "2020-08-11T17:15:10.313000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "since geth was first, we went with what was already used there",
        "created_at": "2020-08-11T17:15:21.169000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Prior to this, I didn't even know anyone thought rounding toward negative infinity was reasonable.  ðŸ˜›",
        "created_at": "2020-08-11T17:15:37.279000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I always thought rounding toward 0 made the most intuitive sense and I was surprised to hear someone had code that rounded toward negative infinity.",
        "created_at": "2020-08-11T17:16:06.150000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I wonder why that package you linked rounds toward infinity while the rest of Go (according to their own docs) rounds toward 0.",
        "created_at": "2020-08-11T17:16:58.113000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's a bit of a peculiarity of the go big.Int libary, which is heavily used in geth. Normal go integer division rounds to 0.",
        "created_at": "2020-08-11T17:17:13.197000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Feels like quite the divergence, perhaps they had some compelling reason?",
        "created_at": "2020-08-11T17:17:14.143000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "jinx lol",
        "created_at": "2020-08-11T17:17:22.416000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think euclidean division is more formally correct",
        "created_at": "2020-08-11T17:17:39.604000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "or some jazz",
        "created_at": "2020-08-11T17:17:45.874000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Dr. Math in 2007 says that \"antitruncate\" is more rare than \"truncate\".  ðŸ˜›",
        "created_at": "2020-08-11T17:18:41.793000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(no idea if Dr. Math knows what they are talking about... I assume it is kinda like Jeeves...)",
        "created_at": "2020-08-11T17:18:58.586000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Rounding to neg infinity conforms with euclidean division https://en.wikipedia.org/wiki/Euclidean_division whereas to 0 does not",
        "created_at": "2020-08-11T17:20:30.013000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Which I guess is what I mean by \"formal\"",
        "created_at": "2020-08-11T17:20:38.418000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Why does one care about conforming with Euclidian division?",
        "created_at": "2020-08-11T17:20:56.464000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We don't really, but why do we care one way or the other at all?",
        "created_at": "2020-08-11T17:21:11.909000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It seems completely arbitrary, so going with  the option already heavily utilized in geth makes sense imo",
        "created_at": "2020-08-11T17:21:50.816000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Esp if besu is already matched",
        "created_at": "2020-08-11T17:22:06.255000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I feel like `((x / y) * y) + (x % y) == x` should always be true, and I *think* it is only true if you truncate on `/`?",
        "created_at": "2020-08-11T17:23:08.772000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(please double check my math, I'm very low confidence in my above statement)",
        "created_at": "2020-08-11T17:23:44.853000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is, I feel like the division should be reversible (assuming you have the remainder, which you get from `%`).",
        "created_at": "2020-08-11T17:23:55.751000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Rounding toward infinity bugs me because I *think* the above equality is no longer true if you do that (again, please check my math).",
        "created_at": "2020-08-11T17:24:47.958000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not here to argue the merits of euclidean division",
        "created_at": "2020-08-11T17:25:49.794000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't think it actually matters here, but I *do* feel like we should have a consistent rounding policy throughout the consensus protocol, and for that reason I think we should pick the option most likely to not cause problems down the road.",
        "created_at": "2020-08-11T17:26:09.750000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So I'm hesitant to pick the one that isn't reversible because that could bite us later if we actually need reversibility.",
        "created_at": "2020-08-11T17:26:44.705000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe Euclidian division has other properties that are desirable though?",
        "created_at": "2020-08-11T17:26:56.338000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Would be nice to get a mathy person to weigh in on why someone would want truncation vs antitruncation.",
        "created_at": "2020-08-11T17:27:12.596000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Agreed, but this feels rather nitpicky. Both full client imps are currently using euclidean, geth uses it everywhere else as well which means if it is relevent to consensus anywhere else it must be what is used in every client",
        "created_at": "2020-08-11T17:28:08.006000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "IIUC, Besu did \"truncate\" first and then switched to \"divide\" just because there was a consensus failure?",
        "created_at": "2020-08-11T17:28:38.179000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah",
        "created_at": "2020-08-11T17:28:43.965000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Geth is a stable piece of software harder to make changes everywhere",
        "created_at": "2020-08-11T17:29:06.124000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I am curious if there are any other places in consensus where we have negative numbers divided.",
        "created_at": "2020-08-11T17:29:27.245000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe in the block size voting code?",
        "created_at": "2020-08-11T17:29:36.818000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Me too, will look into that.",
        "created_at": "2020-08-11T17:29:39.318000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The think the max negative vote may use division.",
        "created_at": "2020-08-11T17:29:57.177000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If we have an established precedent in consensus then that would sway me pretty heavily.",
        "created_at": "2020-08-11T17:30:09.333000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At this point I think we will need to be swayed in the other direction to make a change",
        "created_at": "2020-08-11T17:31:33.352000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So far haven't found anywhere else negative integer division is relevent to consensus in the geth code",
        "created_at": "2020-08-11T17:44:16.047000+00:00",
        "attachments": null
    },
    {
        "author": "iannorden",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e I feel like `((x / y) * y) + (x % y) == x` should always be true, and I *think* it is only true if you truncate on `/`?\n\u003c@!301186049323958275\u003e This is true, based on my check. Not sure how relevent that is, though. Idk that we need to conform to `((x / y) * y) + (x % y) == x`  any more or less than we need to conform to the rules of euclidean division:\n```\nGiven two integers a and b, with b â‰  0, there exist unique integers q and r such that\n\na = bq + r\nand\n0 â‰¤ r \u003c |b|\n```\nSurely there are theoretical advantages of euclidean division but idk enough to put those forward.",
        "created_at": "2020-08-11T17:57:06.971000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!740996787548061849\u003e those seem to be pending transactions. They aren't included in blocks because their gas price is too low. They aren't really \"congesting\" anything on the network, aside from nodes' transaction pools. If you look at transactions _actually_ included in blocks, you'll see the vast majority have gas prices close to what EthGasStation recommends at a certain time (or higher, but not much lower): https://etherscan.io/txs?block=10641117",
        "created_at": "2020-08-11T21:36:19.946000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In the future, I recommend you use the \u003c#595721451651465227\u003e channel for such questions: this channel is meant for chat about the EIP-1559 implementation.",
        "created_at": "2020-08-11T21:38:03.285000+00:00",
        "attachments": null
    }
]