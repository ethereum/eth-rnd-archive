[
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I agree",
        "created_at": "2021-06-10T00:44:56.863000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Pseudocode aside, I think the list percentiles should be \"nearest rank, inclusive\"\n\nhttps://en.m.wikipedia.org/wiki/File:Frequency_histogram_and_exclusive_and_inclusive_percentiles_2.png\n\nPlus a final extra value at the end of the list for the maximum",
        "created_at": "2021-06-10T01:14:24.764000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But maybe what we need is a set of test cases",
        "created_at": "2021-06-10T01:15:40.936000+00:00",
        "attachments": null
    },
    {
        "author": "zsfelfoldi",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You are right, i wanted to write the nearest rank inclusive version but looks like the check is in the wrong place, should be after the addition. Thanks, i'll fix it :)",
        "created_at": "2021-06-10T09:08:10.397000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I made a transaction generator and graphed some dummy results from your API \u003c@!202397237962211328\u003e \n\nhttps://github.com/perama-v/fee-history/blob/main/viz.ipynb\n\nIt simulates the part of the API where you specify the list of percentiles you are interested in. I also included a\ncomparison of gas-weighted and non-weighted versions.\n\nEverything looks good AFAICT.",
        "created_at": "2021-06-10T14:50:02.309000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Here is a sample:",
        "created_at": "2021-06-10T14:53:37.146000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "svgxmlbase64PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxv0AbmU9Im5vIj8CjwhRE9DVFlQRSB.png",
                "content": "cfe691ebd4b8224d661e02618a378cef34d1abb3438f45480068b62e16511022"
            }
        ]
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Where the blue gas-weighted percentile calculation diverges from the yellow count-based method. \n\nThis is the result of a very large transaction",
        "created_at": "2021-06-10T14:55:46.273000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Which can be seen here as the outlier at about 58 gwei/gas",
        "created_at": "2021-06-10T14:56:58.332000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "svgxmlbase64PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiIHN0YW5kYWxv0AbmU9Im5vIj8CjwhRE9DVFlQRSB.png",
                "content": "e7873c598a0aff34eb9c4d5d16fe822605b48389a4ec7158dd2a40fac0fcabb7"
            }
        ]
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So, the API returns the blue rather than the yellow in general\n\nIt is more of a philosophical design choice. I think it works, and see no obvious problems.",
        "created_at": "2021-06-10T15:00:31.637000+00:00",
        "attachments": null
    }
]