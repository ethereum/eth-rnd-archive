[
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "When you set the max priority fee, is that amount dynamic? Or does the miner always get it?",
        "created_at": "2022-06-29T11:29:00.241000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's dynamic. The miner gets anything between 0 and that amount, depending on the base fee of the block and the max fee per gas you set.",
        "created_at": "2022-06-29T11:29:54.296000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks. Do you recommend using web3 or another API for constructing transactions with the EIP1559 fee schema?",
        "created_at": "2022-06-29T11:30:35.928000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is etherscan a good API to use to get the gas fees?",
        "created_at": "2022-06-29T11:31:08.410000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I want to guarantee that my tx goes through in the next 3-6 blocks",
        "created_at": "2022-06-29T11:31:21.147000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can set `max_fee_per_gas` high (like double the base fee of the current block), and set `priority_fee_per_gas` to like 1 or 2 gwei. Only in very rare circumstances would you then not be included in 5 blocks (when they're all doubly full).\nUse whatever you were using before to send transactions.",
        "created_at": "2022-06-29T11:33:13.224000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Great advice. Also, how is the max priority fee/tip dynamic? I thought that if you set it to 3, then it's hard coded to be 3 forever. Or does it go down based on what other people put down? For example if everyone else has a priority fee of 2 but you put 4 down. Does the tip you pay also go down to 2?",
        "created_at": "2022-06-29T11:35:44.355000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Say you set `max_priority_fee_per_gas` to 100, and `max_fee_per_gas` to 100. If you get included in a block with a base fee of 60 gwei, then 60 gwei is burned, and 40 gwei goes to the miner. You pay a total of 100 gwei per gas.\n\nNow if you set  `max_priority_fee_per_gas` to 2 (and `max_fee_per_gas` is still 100), and you get included in that same block with `60 gwei` base fee, then `60 gwei` is burned, and 2 goes to the miner. You pay a total of 62 gwei per gas.",
        "created_at": "2022-06-29T11:39:13.068000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks. One more question. What is a good priority fee to set? Should I make this dynamic in my code or is 2 a good number to use?",
        "created_at": "2022-06-29T11:40:22.446000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Like I said I want the transaction to always go through within 6 blocks. (So this is an extra detail/constraint)",
        "created_at": "2022-06-29T11:40:36.822000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1 or 2 is good enough yes. I think I have it always at 1. \n\nThere is no guarantee to always go through, it always depends on what other people offer. In long spikes of demand, you might miss out on that 6 block requirement.",
        "created_at": "2022-06-29T11:41:51.230000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The base fee increases with 12.5% if the block is doubly full (the maximum that can fit). So if you want to get in in 6 blocks, then your `max_fee_per_gas` should be 1.125^6 ~= 2 times the current base fee. Then if _any_ of those 6 blocks are _not_ doubly full, you'll get in with your 1 or 2 gwei max priority fee transaction.",
        "created_at": "2022-06-29T11:44:42.633000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And do you think that this will save on gas fees for the constructor of txns vs using the old type 0 transactions (as a side effect)",
        "created_at": "2022-06-29T11:44:49.561000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Or what was the benefit of EIP 1559 in your own words?",
        "created_at": "2022-06-29T11:45:50.541000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Old transactions are just interpreted as `max_fee_per_gas == max_priority_fee_per_gas`",
        "created_at": "2022-06-29T11:45:52.652000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That has been talked about ad nauseum here. You can find plenty of that info on the wider internet (starting with https://eips.ethereum.org/EIPS/eip-1559, and https://ethereum-magicians.org/t/eip-1559-fee-market-change-for-eth-1-0-chain/2783). And a good overview of all kinds of blogs/posts/etc is https://hackmd.io/@timbeiko/1559-resources",
        "created_at": "2022-06-29T11:46:41.652000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@397389662085185547\u003e do you know what happens with send all eth operations?",
        "created_at": "2022-06-29T15:57:29.708000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "will there be a refund?",
        "created_at": "2022-06-29T15:57:32.595000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not if you set the base fee to equal the priority fee.",
        "created_at": "2022-06-29T15:59:04.821000+00:00",
        "attachments": null
    },
    {
        "author": "node_dood",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "great thanks",
        "created_at": "2022-06-29T15:59:12.814000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://hackmd.io/@timbeiko/why-1559 this is specifically about the benefits",
        "created_at": "2022-06-29T17:32:10.616000+00:00",
        "attachments": null
    }
]