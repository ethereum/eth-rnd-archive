[
    {
        "author": "monkeyontheloose.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hey hey, don't know if this is the right place to ask this, I got some questions about eip1559, pls point me to the right place if this is not it\n\nQ1. whats the diff between gas limit and gas used, does the base fee increase if the gas limit is 30M but gas used it just 9M?\n\nQ2. https://etherscan.io/block/13713486 this block seems to have a gas limit of over 30M, is there no max gas limit?, plus the gas used in this block is 0, wtf?",
        "created_at": "2021-11-30T07:32:47.125000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e does the base fee increase if the gas limit is 30M but gas used it just 9M?\n1) No, it decreases if gas used is below half the limit (/target = 15 M gas). \n\n2) There indeed is no max gas limit. Miners can increase it as they see fit. The gas limit _does_ have a maximum allowed rate of change per block though.",
        "created_at": "2021-11-30T07:39:20.538000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "See https://eips.ethereum.org/EIPS/eip-1559 for more details.\n\n1)  gas used less than target:\n```python\n        else:\n            gas_used_delta = parent_gas_target - parent_gas_used\n            base_fee_per_gas_delta = parent_base_fee_per_gas * gas_used_delta // parent_gas_target // BASE_FEE_MAX_CHANGE_DENOMINATOR\n            expected_base_fee_per_gas = parent_base_fee_per_gas - base_fee_per_gas_delta\n```\n\n2) gas limit acceptable or not:\n```python\n        # check if the block changed the gas limit too much\n        assert block.gas_limit \u003c parent_gas_limit + parent_gas_limit // 1024, 'invalid block: gas limit increased too much'\n        assert block.gas_limit \u003e parent_gas_limit - parent_gas_limit // 1024, 'invalid block: gas limit decreased too much'\n```",
        "created_at": "2021-11-30T07:40:30.965000+00:00",
        "attachments": null
    },
    {
        "author": "monkeyontheloose.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "üôèüèª  great answers!\n\nQ3. why are there some blocks that don't use up all the gas? cuz no txs with miner tip for specific base fee? or is it complicated?\n\nQ4. so miners can eventually take the gas_limit up to 1000M?",
        "created_at": "2021-11-30T08:37:33.096000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Q3. why are there some blocks that don't use up all the gas? cuz no txs with miner tip for specific base fee? or is it complicated?\nWhat do you mean by _all_ gas? Do you mean 30 M gas? \nBlocks can only include transactions that satisfy the base fee. If a block is doubly full (30 M gas), then the base fee increases by 12.5%. If the next one is also full, it increases again with 12.5%. Etc. Soon you will end up with a situation where there just aren't enough people willing to pay the base fee anymore, and you stabilize around some base fee where there's on average ~15 M gas used.\n\n\u003e Q4. so miners can eventually take the gas_limit up to 1000M?\nYes. But miners also listen to devs and users on what a good gas limit is (opinions differ of course).",
        "created_at": "2021-11-30T10:04:55.912000+00:00",
        "attachments": null
    },
    {
        "author": "chainhanta",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!397389662085185547\u003e why does the base fee increase when blocks are full?",
        "created_at": "2021-11-30T10:05:50.714000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm a bit confused, how else do you think it would adjust?",
        "created_at": "2021-11-30T10:08:04.634000+00:00",
        "attachments": null
    },
    {
        "author": "chainhanta",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Appreciate your response, well I guess you're right. Full blocks means there's a lot of transactions on the blockchain, so the base fee is increased to reduce the traffic?",
        "created_at": "2021-11-30T10:10:34.683000+00:00",
        "attachments": null
    },
    {
        "author": "chainhanta",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But I'm still kind of confused, why would the base fee need to be increased, did I answer my own question?",
        "created_at": "2021-11-30T10:10:58.956000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You kind of did üôÇ",
        "created_at": "2021-11-30T10:11:25.270000+00:00",
        "attachments": null
    },
    {
        "author": "chainhanta",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess my next question is what would happen if the base fee was not increased and every single block was full? Why is that bad?",
        "created_at": "2021-11-30T10:12:09.139000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Then we get what we had before EIP-1559, which is a first-price auction.",
        "created_at": "2021-11-30T10:12:31.438000+00:00",
        "attachments": null
    },
    {
        "author": "chainhanta",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Being new and from my naive perspective, EIP-1559 did not improve the gas problems. I still pay a ton of gas and I get front ran by txs with higher gwei",
        "created_at": "2021-11-30T10:13:46.589000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah yes, there indeed was a common misconception (not on this server, but the wider internet) that EIP-1559 would lower fees",
        "created_at": "2021-11-30T10:14:27.179000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "On average it sort of does a little, with that I mean it reduces the risk of overpaying.",
        "created_at": "2021-11-30T10:14:47.637000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do take a look at the Q\u0026A here if you haven't already https://www.youtube.com/watch?v=ndNyx-Oj9Wk",
        "created_at": "2021-11-30T10:15:57.700000+00:00",
        "attachments": null
    },
    {
        "author": "chainhanta",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have a lot to learn, exciting thank you for your response \u003c@!397389662085185547\u003e",
        "created_at": "2021-11-30T10:16:27.810000+00:00",
        "attachments": null
    },
    {
        "author": "monkeyontheloose.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thanks for the answers",
        "created_at": "2021-11-30T15:17:44.657000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it looks like fees are almost twice as high after a spike than before a spike üî•",
        "created_at": "2021-11-30T22:06:14.449000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "bbf233bf0bbb24db8ff5fcce127e65a76a91b7c92faeb2b732ce2ef2a095a15c"
            }
        ]
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "imo the basefee bounces on top of the pending transaction pool making it take forever to clear.",
        "created_at": "2021-11-30T22:13:02.442000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "f534a30eb3bb40fee6719d683ca88187778378a034d718989d284bd42d868bca"
            }
        ]
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It looks that way, but it isn't though (~130 -\u003e ~150 Gwei from what I can tell). It is a little higher indeed, but I'm not sure what your point is. I would say that's still well within the usual range in which the base fee fluctuates during the day, even without spikes.",
        "created_at": "2021-11-30T22:29:07.335000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e imo the basefee bounces on top of the pending transaction pool making it take forever to clear.\nWell, from what I can tell the transaction pool of eligible transactions clears just fine because the base fee goes down again?",
        "created_at": "2021-11-30T22:35:57.686000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the backlog is not allowed to clear if the transactions waiting offer less than 12.5% less than the basefee in the previous block. So it just created a small block instead. and then maybe it will take a shot at the backlog in the next block if no new transactions happened in those ~13 seconds between blocks. But most of the time that is the case, There is about 13 transactions per second afaik. But in the end its \"just\" an inefficiency that leads to higher fees overall. Maybe 50%-100% higher?",
        "created_at": "2021-11-30T22:40:58.541000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not quite sure what you mean. Are you saying that the base fee is not allowed to change to a new equilibrium between supply and demand?",
        "created_at": "2021-11-30T23:06:56.087000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And what do you mean by backlog? There's basically infinite demand of you go down to a base fee of zero, is this also part of this backlog? Or is it just transactions that were sent just before this peak with a very tight maximum fee per gas (e.g. just a few gwei over the average base fee at the time)?",
        "created_at": "2021-11-30T23:10:31.498000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In a sense EIP1559 reduces scaling because it increases the inefficiency of the fee market leading to higher overall fees but there is also the dust thing. These are probably only issues that will affect the long term tho üôÇ",
        "created_at": "2021-11-30T23:38:32.015000+00:00",
        "attachments": null
    }
]