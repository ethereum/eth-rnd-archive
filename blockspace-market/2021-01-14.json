[
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I wrote up the current state of my thinking on 1559 transaction sorting in the mempool once again:\nhttps://hackmd.io/@adietrichs/1559-transaction-sorting-part2",
        "created_at": "2021-01-14T01:27:35.328000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Will talk about it more on tomorrow's call, hopefully that's a good basis for some helpful discussion.",
        "created_at": "2021-01-14T01:28:34.160000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have to say, 1559 is one of these topics where one still continues to find new aspects even after having already spent quite some time on it üôÇ",
        "created_at": "2021-01-14T01:30:02.354000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Interesting insight on changes to mining.",
        "created_at": "2021-01-14T01:32:41.972000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Would append-only actually *append* and not re-sort?  This does some really interesting things to gas price auctions for position!",
        "created_at": "2021-01-14T01:33:10.205000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It would be faster for a miner to append only, though one can imagine a miner that first appends and starts working on that block while it sorts and re-executes the entire block.",
        "created_at": "2021-01-14T01:33:55.253000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@415548822983278593\u003e",
        "created_at": "2021-01-14T01:34:05.932000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So I think one thing miners could also do would be \"append immediately, fully re-build the block once every second\"",
        "created_at": "2021-01-14T01:34:54.640000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but this is an interesting question in general, not obvious to me why miners would even want to not just do append-only while there is still room",
        "created_at": "2021-01-14T01:35:23.081000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In theory, you want higher gas price transactions at the front so they are more likely to execute fully rather than revert.",
        "created_at": "2021-01-14T01:36:02.330000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is specifically related to GPA value extraction bidding wars.",
        "created_at": "2021-01-14T01:36:22.944000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah, fair. so this would be a simple heuristic for finding the optimal ordering",
        "created_at": "2021-01-14T01:36:38.970000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, still pretty naive, but better than no sorting at all.",
        "created_at": "2021-01-14T01:36:52.522000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "because in theory any possible ordering could be the most profitable for the miner",
        "created_at": "2021-01-14T01:36:57.398000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "makes sense",
        "created_at": "2021-01-14T01:37:01.762000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I still think the \"immediately append\" would be a valuable addition though for miners, otherwise they just miss out on some of the bribes",
        "created_at": "2021-01-14T01:37:53.974000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My opinion is that Ethereum clients should generally build \"altruistic\" software first, and if people want to spend engineering resources building more advanced things they can.",
        "created_at": "2021-01-14T01:38:03.095000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "altruistic in what sense here?",
        "created_at": "2021-01-14T01:38:26.822000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In the case of mining, I think append only is reasonably \"altruistic\", and anyone can do a custom client if they want more advanced sorting.",
        "created_at": "2021-01-14T01:38:27.757000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In theory, FIFO is more \"fair\" than GPA.",
        "created_at": "2021-01-14T01:38:42.547000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It cuts down on generalized front runners a bit.",
        "created_at": "2021-01-14T01:39:06.894000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah. I think that makes sense. Although geth already has the \"re-build block on timer\" logic for mining, probably easiest to just keep it",
        "created_at": "2021-01-14T01:39:13.080000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Possibly.  Personally, I love deleting code in my projects and maybe the Geth team feels similarly.  üòÑ",
        "created_at": "2021-01-14T01:39:39.960000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Haha fair",
        "created_at": "2021-01-14T01:39:59.908000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "although, I assume you still want it for the occasional situation where blocks are still full (i.e. at the 2x cap)",
        "created_at": "2021-01-14T01:40:25.582000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For Geth specifically, it would be nice to see more client diversity in mining, and one way to achieve that is to make Geth miners more \"dumb\" and therefore marginally less profitable than Nethermind/OpenEthereum miners.",
        "created_at": "2021-01-14T01:40:38.621000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As an incentive for people to switch around their clients.",
        "created_at": "2021-01-14T01:40:48.985000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Although to be fair I think we should make an effort to make the 1559 transition as \"nice\" for the miners as possible",
        "created_at": "2021-01-14T01:41:18.980000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but I guess that would be a topic for the new \u003c#798586271445680129\u003e channel üòâ",
        "created_at": "2021-01-14T01:41:39.186000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Insightful notes! would it be helpful to try out simulations of various rules? it's a bit abstract since we don't have actual user data but we could detect systematic trends. i was interested to run simulations based on the two rules here: https://github.com/barnabemonnot/abm1559/blob/master/notebooks/eviction.ipynb (specifically looking at how much each fares w/r/t lost fees, transaction pool length etc.)",
        "created_at": "2021-01-14T03:21:37.513000+00:00",
        "attachments": null
    },
    {
        "author": "jc6763",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "hi Ansgar, is the tldr to use \u003c@!370136219927052298\u003e   https://hackmd.io/@VVsmryteTEWuiOBecRGFhw/Hy0ZyFn3w  for mempool sorting?  Or what adjustments did you have?",
        "created_at": "2021-01-14T06:08:34.322000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@552133098075193354\u003e Can we get all of the various links added to https://hackmd.io/@timbeiko/1559-updates/?  Like a link to the EIP, a link to the discussions-to, a link to the original proposal in ethresear.ch, a link to my blog posts on the topic, a link to other people's blog posts on the topic, a link to the other hackmds that people have created for it, etc.?",
        "created_at": "2021-01-14T07:56:07.745000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Then we can just pin that one document and use it as a starting point for everything else.",
        "created_at": "2021-01-14T07:56:21.013000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, my plan was to also in the last step now try to compare and validate these assumptions / different approaches with simulations. Initially I was thinking this was primarily a question of computational efficiency, in which case a simulation with focus on accurately recreating the actual mempool structure makes sense. Now it seems like the most relevant questions a simulation could answer would be more in the area of network efficiency and economics, so maybe that could even re-use some of your simulation framework! Would be happy to talk about that some more with you.",
        "created_at": "2021-01-14T09:41:35.002000+00:00",
        "attachments": null
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So, this approach by \u003c@!370136219927052298\u003e (great work btw!) would be an optimization for the miner sorting. It seems like that optimization is not immediately necessary though, given that mining will be simpler than it is currently and currently there are no issues even without a comparable optimization. So it seems to me at least initially there would be no need for it, but this is one of these things to explore further once we have real world experience with 1559.",
        "created_at": "2021-01-14T09:44:42.068000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Good idea. I'll try and whip something up with the next update üëç",
        "created_at": "2021-01-14T15:13:26.592000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1559 call in ~50 minutes\n\nZoom: https://consensys.zoom.us/j/95453250677 \nAgenda: https://github.com/ethereum/pm/issues/234\n\nA few writeups:\n- Transaction pool sorting by \u003c@!415548822983278593\u003e: https://hackmd.io/@adietrichs/1559-transaction-sorting-part2\n- Block size spikes concerns by \u003c@!273808422753796097\u003e: https://notes.ethereum.org/@vbuterin/eip_1559_spikes",
        "created_at": "2021-01-14T15:14:09.333000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do we want to have 2 new transaction types, one with access list and one without, or do we want one new transaction type with access lists?",
        "created_at": "2021-01-14T17:29:35.274000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My weak vote is one new transaction type which includes access list field, but I'm curious what other people think and why.",
        "created_at": "2021-01-14T17:29:58.659000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If we go with one new type, then any transaction that doesn't include an access list will require one extra byte (placeholder for an empty access list).",
        "created_at": "2021-01-14T17:31:54.648000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "also my weak vote",
        "created_at": "2021-01-14T18:20:48.061000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As per \u003c@!301186049323958275\u003e's suggestion, I've put together a list of 1559 resources we can pin in this channel and on the updates I send. You can find it at https://hackmd.io/@timbeiko/1559-resources\n\nIf you have anything you think should be added, please let me know and I'll do so üòÑ",
        "created_at": "2021-01-14T22:59:25.225000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2021-01-14T22:59:41.138000+00:00",
        "attachments": null
    }
]