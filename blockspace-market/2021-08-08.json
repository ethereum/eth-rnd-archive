[
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "One of the questions that will help wallets decide on their logic is: How much and how often does the base fee rise?\n\nOr, to reword this: If I set a max fee as some multiple of the base fee, how often will this become non-viable in the near future?\n\nI took a look at that question, with combinations of base fee multiples in range 1.3-3x and time windows 30-240s. For each block I generated a fee (`base_fee * multiple`) and selected the latest mined block in the specified window. \n\nI called a multiple 'non-viable' if the final mined block in some interval (e.g. 30s) had a base fee greater than the multiple.\n\nThat is to say, regardless of what the base fee did during the window, the multiple was considered viable if it the transaction could have been mined using base fee as the only criteria. The priority fee is excluded from all calculations.\n\nThe result was that the multiple was viable in the range 97.7%-100% of the time, details and data in the link.\n\nhttps://gist.githubusercontent.com/perama-v/d23a8d7a446fe8b235889d1a896ab9a2/raw/e3d8e3c51ed5bc156b3d40ac2539dbd681490033/result.txt",
        "created_at": "2021-08-08T04:40:27.196000+00:00",
        "attachments": null
    },
    {
        "author": "andi9314",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is really cool. I think it would also be interesting to see how likely it is that a fee slightly lower than the current base fee gets me included in the next x seconds.",
        "created_at": "2021-08-08T05:01:06.239000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A fee 0.5x current base fee was viable at some point within 30s TBD% of the time.",
        "created_at": "2021-08-08T05:42:36.394000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The Yin to the Yang",
        "created_at": "2021-08-08T05:43:33.383000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The deed is done:\n\nhttps://gist.github.com/perama-v/4c6b5088b18dfb928e9675f8aca869a5",
        "created_at": "2021-08-08T08:00:45.069000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is a family of curves, it shows two things, based purely on the movement of the base fee with real blocks since the fork:\n\n- If you set a low max fee to save money, what is the 'waiting situation' like?\n- If you set a high max fee, what is the 'safety situation' like?",
        "created_at": "2021-08-08T08:06:27.065000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Which would be very nice as a Dune dashboard if anyone has the skills and wants to replicate a live version.\n\n```\n* Curve 1: 30s\n- Curve 2: 90s\n\n100 |      *   *  *  *\n    |   *    - - - - -\n    | *    -\n    | *   -\n    |*  -\n    | -\n     -------------------\n   0     b_f_multiple  3\n\ny-axis: cumulative probability\nx-axis: base fee multiple.\n```",
        "created_at": "2021-08-08T08:12:08.188000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I won't try to do too much interpretation of the results, other than to say that:\n\n1. Early data (YMMV)\n2. \n- If you try to save money and get in within a few minutes, the base fee to target is ~0.95x, which has enjoyed an 80% chance of viability.\n- If you want safety 1.2x base fee has been okay ~92% of the time, and 1.5x 99% of the time. \n\nThis is all for \"will the protocol accept the transaction\"\nAs for what miners have been accepting, spot checks have shown miners to be tolerant of 1 nanoether per gwei priority fees.",
        "created_at": "2021-08-08T08:19:05.973000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in a thread somewhere you were pointing out that basefee essentially prices something that is out-of-date, with an example of blocks that have 1 slot and two users who want in, there was efficiency loss because waiting for basefee to lower would get you in at a better price. definitely agree there is something to explore here, my intuition though is that demand is rather smooth, so in practice I'd expect the efficiency loss to be not so large. it's true too that there is downward pressure on basefee because of the multiplicative rule, but it only leads to the pathological case of basefee to 0 when demand is exactly as large as the 15M target supply\n\nit still looks like it would be a good problem to formalise, thinking something like \"if demand at t and demand at t+1 are epsilon close, the efficiency is some small function of epsilon close to optimal efficiency\", at least to get clarity on how to compare update/pricing rules with one another",
        "created_at": "2021-08-08T08:47:40.545000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this is very cool. it's hard to build counterfactuals to compare bidding strategies but this seems like a simple approach that gives good insight. in a sense you are looking at whether in hindsight your parameter choice was individually rational or not, as if you were the only one changing your max fee while everyone else keeps it constant. i expect that if we want users to delegate control of the max fee to their wallet the default multiple needs to be viable for a high percentage of outcomes",
        "created_at": "2021-08-08T08:57:14.641000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks, yes I agree.",
        "created_at": "2021-08-08T09:06:52.269000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i dont think you should ever put a basefee that is higher than the basefee of the last full block, unless you are in a hurry in which case you probably have to MEV?",
        "created_at": "2021-08-08T10:39:32.538000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i like how blockchain transactions teaches people to \"set it and forget it\" patience",
        "created_at": "2021-08-08T10:41:01.496000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "its an important concept ðŸ™‚",
        "created_at": "2021-08-08T10:41:24.247000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Seems like you can reliably save at least $0.5 on an ERC20 transfer if you pick a basefee that is no higher than the basefee in the last full block. You will have to wait about 10 minutes or so. But thats the least you can save. You can get lucky and save more than double that it seems.",
        "created_at": "2021-08-08T10:50:03.159000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe that strategy will stop working if most people do it",
        "created_at": "2021-08-08T11:03:03.633000+00:00",
        "attachments": null
    },
    {
        "author": "ghosts_in_the_code",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "can finally put to rest the concept of bidding 2x",
        "created_at": "2021-08-08T11:11:13.143000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is early in the life of this new market, I feel that there will be more insights as the participants evolve and the dynamics are exposed",
        "created_at": "2021-08-08T11:29:14.440000+00:00",
        "attachments": null
    },
    {
        "author": "ghosts_in_the_code",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the fact that we dont already know what the dynamics will be prove there's no guaranteed improvement of UX",
        "created_at": "2021-08-08T12:43:08.409000+00:00",
        "attachments": null
    },
    {
        "author": "_strangelet",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Can anyone tell me an approximation cost per kb or byte to send and store metadata on Ethereum?",
        "created_at": "2021-08-08T12:45:16.901000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks \u003c@!743395542196944977\u003e this is super valuable! I'll make sure to share with wallets on our call next Friday. If you'd like to join and present your work, you are welcome to ðŸ˜„ https://github.com/ethereum/pm/issues/369",
        "created_at": "2021-08-08T15:48:48.048000+00:00",
        "attachments": null
    },
    {
        "author": "jacknelson",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thanks for sharing!",
        "created_at": "2021-08-08T16:03:11.087000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "excuse me if this is exactly an MEV question, because i am slow when it comes to that",
        "created_at": "2021-08-08T16:08:50.121000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but am I understanding correctly that the miner of this block received 2ETH?",
        "created_at": "2021-08-08T16:09:03.786000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://etherchain.org/block/0xd91baed0cff173c4ad0568b80887865d13fb51efe5e7aecbb3bcedeef75e2deb",
        "created_at": "2021-08-08T16:09:05.066000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if so... post 1559, why shouldn't every miner just mine blocks with no transactions in them?",
        "created_at": "2021-08-08T16:09:22.224000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "they can, but if the priority fee is larger than the uncling risk, it's in their own interest to include those transactions\nSee https://notes.ethereum.org/@barnabe/rk5ue1WF_",
        "created_at": "2021-08-08T16:10:33.060000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "can you explain that a bit further please?",
        "created_at": "2021-08-08T17:12:26.713000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The earlier you broadcast a block, the more likely it is to become the canonical one. Including transactions takes a little work/time, but there's a reward associated with doing so as well (the priority fee).",
        "created_at": "2021-08-08T17:13:17.015000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So by including transactions you increase the risk of no longer being the canonical block (uncling), but also increase your tx rewards. There's a trade-off there, which has been worked out in more detail in the link I posted.",
        "created_at": "2021-08-08T17:14:04.913000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and that trade off makes it worth more than 2ETH? I guess i'm just surprised that in the case of 0 transactions, we don't burn the base fee still but rather give the whole 2ETH to the miner",
        "created_at": "2021-08-08T17:16:06.761000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The 2 ETH is the block reward no? That is related to providing security to the blockchain",
        "created_at": "2021-08-08T17:16:31.677000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "right but i thought (and that's really my question, cause i'm not sure) that out of the 2ETH+transaction fees we deduct the basefee and burn it",
        "created_at": "2021-08-08T17:17:09.957000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and in the link i provided above, it makes it seem 0 was burned, hence the miner getting the full 2ETH",
        "created_at": "2021-08-08T17:17:21.429000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes, because there were no transactions included. No gas used, no `base_fee_per_gas * gas_used` to be burned",
        "created_at": "2021-08-08T17:17:56.485000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "right, but that seems like a much higher payoff than the one with transactions...",
        "created_at": "2021-08-08T17:18:13.296000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "example:",
        "created_at": "2021-08-08T17:18:20.321000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "almost a full block:",
        "created_at": "2021-08-08T17:18:39.657000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://etherchain.org/block/0xdf97ead3ba08b06c72fdd27e612c00aa007e0f0dd5f53560c0ad04f7358fa0e9",
        "created_at": "2021-08-08T17:18:41.027000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1.334ETH going to the miner...",
        "created_at": "2021-08-08T17:18:59.470000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "with that kind of a ratio, why not mine everything empty?",
        "created_at": "2021-08-08T17:19:08.409000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and collect 2ETH all the time",
        "created_at": "2021-08-08T17:19:17.430000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "less risk, more reward",
        "created_at": "2021-08-08T17:19:23.085000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "again, it's a trade-off",
        "created_at": "2021-08-08T17:19:30.356000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "would you pick $0.01 off the ground?",
        "created_at": "2021-08-08T17:19:36.164000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "or keep walking",
        "created_at": "2021-08-08T17:19:41.909000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "now ask yourself the same for $0.10, and for $1.00 (or $10.00)",
        "created_at": "2021-08-08T17:20:01.986000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "at a certain point you will stop (even if you were in a hurry), and pick up the change",
        "created_at": "2021-08-08T17:20:38.808000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "2.6 going to the miner*",
        "created_at": "2021-08-08T17:21:26.641000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "oh? explain",
        "created_at": "2021-08-08T17:21:46.761000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2021-08-08T17:21:59.027000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "e7e30a2abaf9d9f909a31b83b5b2d9539484be316c893a23c8f0a4a89e61d269"
            }
        ]
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "isn't it Reward-Burnt fees?",
        "created_at": "2021-08-08T17:22:07.793000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "2.60-1.27",
        "created_at": "2021-08-08T17:22:22.118000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "?",
        "created_at": "2021-08-08T17:22:22.992000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no",
        "created_at": "2021-08-08T17:22:28.027000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "okay well in that case, the explanation about risk/reward makes a whole lot more sense",
        "created_at": "2021-08-08T17:22:41.126000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thank you!",
        "created_at": "2021-08-08T17:22:42.791000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so you're saying that without burning, the reward here would have been 2.6+1.27?",
        "created_at": "2021-08-08T17:22:59.287000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2021-08-08T17:23:09.510000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i see, now i understand",
        "created_at": "2021-08-08T17:23:15.714000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Glad to help. I won't attend, but thanks ðŸ˜„ \n\nThere are some methodology notes and sample data in the gist I linked just prior to that one.",
        "created_at": "2021-08-08T17:40:33.142000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well, that was a decent mainnet stress test I guess. Base fee went up to 798 Gwei ðŸ™‚ Now back at ~50 Gwei as it was before the NFT thingy",
        "created_at": "2021-08-08T18:48:07.870000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2021-08-08T18:50:07.308000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "d332348f7e89a0e7432bd274cb33ff433a85f9418d3b424a78b705cc74faee13"
            }
        ]
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "on ethresearch, I saw the following statement\n\u003e The goal (of 1559) is to make it so a user can submit a transaction with a max fee that is the highest they are willing to pay and be sure that their transaction will be included at the lowest price possible.\nhow so? what mechanism guarantees the tx will be included at the lowest price possible?",
        "created_at": "2021-08-08T19:02:59.790000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://ethresear.ch/t/eip-1559-is-not-making-fees-predictable/10274/5",
        "created_at": "2021-08-08T19:03:04.719000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "to be specific, the tip amount is a fixed value, which in no way guarantees no overpaying\nwhat am I missing?",
        "created_at": "2021-08-08T19:06:11.996000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you set a max base fee of 100Gwei, and the base fee of the block in which the tx is included is 60Gwei, you will be refunded the 40Gwei*gas used",
        "created_at": "2021-08-08T19:06:51.050000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "interesting.. but now I'm more confused ðŸ˜„\nfirst, I don't see any mentioning of a refund on the eip 1559 page (maybe I should read it again)\nalso, does that mean I specify tip == 0 in your case? then who decides the tip amount for me?",
        "created_at": "2021-08-08T19:08:58.195000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if there are more txs with tip ==0 than can be fit in a block, who decides who gets in?",
        "created_at": "2021-08-08T19:09:33.175000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The protocol decides which transactions can be put in a block.  Only transactions with base fee \u003e= the block's base fee are eligible for inclusion.\n\nMiners decide which eligible transactions are put in a block.  That is wholly up to them, but usually they go in based on the value of the tip.",
        "created_at": "2021-08-08T19:10:49.827000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think I understand now. so it'll get sorted by (max - base)",
        "created_at": "2021-08-08T19:11:14.144000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thank you",
        "created_at": "2021-08-08T19:12:01.644000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "```python\n# priority fee is capped because the base fee is filled first\npriority_fee_per_gas = min(transaction.max_priority_fee_per_gas, transaction.max_fee_per_gas - block.base_fee_per_gas)\n# signer pays both the priority fee and the base fee\neffective_gas_price = priority_fee_per_gas + block.base_fee_per_gas  \n```\nThat's the part in the spec. Note that `effective_gas_price` can (and often will) be lower than `max_fee_per_gas`. They will be equal if `max_fee_per_gas == max_priority_fee_per_gas`",
        "created_at": "2021-08-08T19:12:06.051000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this matches my original understanding. however, in this case there's no guarantee of \"lowest price possible\"",
        "created_at": "2021-08-08T19:14:03.484000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "say the base fee is 40G, I set max to be 100G. what priority fee should I set?",
        "created_at": "2021-08-08T19:14:34.438000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1",
        "created_at": "2021-08-08T19:14:42.793000+00:00",
        "attachments": null
    },
    {
        "author": "jacknelson",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "wait so are fees and tip different?",
        "created_at": "2021-08-08T19:14:50.302000+00:00",
        "attachments": null
    },
    {
        "author": "jacknelson",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so now we have fees and tip???",
        "created_at": "2021-08-08T19:14:56.880000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "See https://notes.ethereum.org/@barnabe/rk5ue1WF_ for why 1-2 Gwei is good enough most of time",
        "created_at": "2021-08-08T19:15:26.272000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "according to the code, the effective gas will be 40G",
        "created_at": "2021-08-08T19:15:26.313000+00:00",
        "attachments": null
    },
    {
        "author": "jacknelson",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thanks!",
        "created_at": "2021-08-08T19:15:40.442000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "which doesn't guarantee inclusion even though I'm willing to pay 100G",
        "created_at": "2021-08-08T19:15:54.938000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no, the effective gas price will be the base fee (40 Gwei) _plus_ whatever priority fee the user specified, as long as the sum doesn't exceed the max fee per gas the user specified",
        "created_at": "2021-08-08T19:15:57.774000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "right, but you said 1 right?",
        "created_at": "2021-08-08T19:16:17.221000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so 40G + 1?",
        "created_at": "2021-08-08T19:16:29.702000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, that'd be a typical good value to set for the max prioirty fee per gas",
        "created_at": "2021-08-08T19:16:31.209000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's to compensate the miner for the uncling risk, see the link I just posted",
        "created_at": "2021-08-08T19:16:54.485000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "how does that help me? I'm willing to pay 100G in total. but my eff gas is not 40.000000001G",
        "created_at": "2021-08-08T19:17:12.805000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "*now",
        "created_at": "2021-08-08T19:17:18.639000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I understand the base price can rise",
        "created_at": "2021-08-08T19:18:00.781000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wait, what? If you always want to pay 100 Gwei, set the `max_fee_per_gas` too 100 Gwei, _and_ the `max_priority_fee_per_gas` to 100 Gwei. That's basically the way transactions worked until London",
        "created_at": "2021-08-08T19:18:10.798000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "correct. so there's nothing \"dynamic\" about the priority fee. only the base fee is dynamic. right?",
        "created_at": "2021-08-08T19:18:50.265000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well, not entirely. The uncling risk does increase if the value of tx rewards already included in the block gets higher, so the priority fee for additional transactions to include should also be higher. In practice miners are often not _that_ sophisticated",
        "created_at": "2021-08-08T19:19:46.513000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and in case of demand exceeding the available block space (2 * gas_target), inclusion of transactions reverts to a first-price auction based on the priority fee of course",
        "created_at": "2021-08-08T19:20:17.575000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "50 M gas of tx are eligible (max_fee_per_gas \u003e base_fee), block only fits 30 M, so the miner picks the ones with the highest priority fees. But the expectation is that the number of eligible transactions is often ~15 M gas (and \u003c 30 M gas), and that the base fee is able to adjust to keep it that way.",
        "created_at": "2021-08-08T19:21:58.753000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "got it. so setting base + 1 _almost_ guarantees inclusion, unless block is full",
        "created_at": "2021-08-08T19:23:07.104000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yep!",
        "created_at": "2021-08-08T19:23:16.610000+00:00",
        "attachments": null
    },
    {
        "author": "vagabond2971",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "thanks!",
        "created_at": "2021-08-08T19:23:21.618000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In case the base fee is 40 Gwei, you can just set the `max_priority_fee_per_gas` to 1 Gwei (to compensate the miner for the uncling risk), and the `max_priority_fee_per_gas` to 60 Gwei or something (assuming you are willing to pay that much). \nIn many cases you will be included in the next block with 40 Gwei base fee, and you will end up paying 41 Gwei per gas (40 of which is burned, 1 goes to miner). But just in case the block is full, you will be included in the one after (that has a base fee of about 1.125 * 40 = 45 Gwei), and pay 46 Gwei (45 of which is burned, 1 goes to miner).",
        "created_at": "2021-08-08T19:27:58.737000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "was there some NFT sale or something? why did gas go to 800?",
        "created_at": "2021-08-08T20:17:49.059000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "along with some mad burning during those blocks",
        "created_at": "2021-08-08T20:22:47.694000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "what causes that?",
        "created_at": "2021-08-08T20:22:49.856000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's there data to this or is it a gut feeling? I would have expected ordering to do more with MEV than fee",
        "created_at": "2021-08-08T21:23:14.522000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes if MEV is there then transactions would go more in order of total revenue to the miner, but that's not very helpful to those trying to decide how much of a tip to put on their transaction.",
        "created_at": "2021-08-08T21:26:42.877000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(Much like miners can put in 0-tip transactions to pay their pool, for example, there are always exceptions)",
        "created_at": "2021-08-08T21:27:00.452000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Right but that's why I think that priority fee may end up being irrelevant, and therefore the average user should always use 1",
        "created_at": "2021-08-08T22:33:27.884000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Since presumably whatever he chooses may not even come into play if mev is orders of magnitude larger",
        "created_at": "2021-08-08T22:34:07.960000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That only matters if MEV takes the entire block gas limit.  If not, then the remaining transactions will be ordered by tip.\n(And if so, then the tx won't get in regardless.)",
        "created_at": "2021-08-08T22:44:43.703000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "How does the stock client, say catalyst, order transactions for inclusion? After the merge, a validator that doesn't run geth-mev, nor grabs his blocks from elsewhere. What algorithm is he using for transaction inclusion? Is it tips? I would have guessed here a FIFO scheme",
        "created_at": "2021-08-08T22:49:09.905000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`geth` orders by fee, give or take.  Don't know about the others.",
        "created_at": "2021-08-08T22:53:36.047000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So what's a nice strategy here?\n\nMaybe a rational wallet might use feeHistory to calculate the 200 block exponential moving average. Set the max fee to 2x that number",
        "created_at": "2021-08-08T22:56:15.636000+00:00",
        "attachments": null
    },
    {
        "author": "perama",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It was a round-trip of 20mins though. So a bit of a wait. \n\nMaybe a wallet could have a little alert bar \"fees are popping, perhaps get a coffee\"",
        "created_at": "2021-08-08T23:00:12.309000+00:00",
        "attachments": null
    }
]