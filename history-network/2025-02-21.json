[
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Thanks for setting this up. I ran it locally, I got some errors but they seem explainable.",
        "created_at": "2025-02-21T12:58:54.261000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "4a021bf728730e760ab319236f03b32a8ce349ed02484f9f4485f740eb989357"
            }
        ]
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "They are post-merge headers, which fluffy will not accept currently (always fail validation). I do have a branch to do this but will only merge this at a later stage.",
        "created_at": "2025-02-21T12:59:35.178000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "And for the PutContent test, when I look at the logs is due to an error on not accepting offered data post-merge.",
        "created_at": "2025-02-21T12:59:59.184000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "So I think it looks good.",
        "created_at": "2025-02-21T13:00:09.423000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I did have an error when running this on the build step for \u003c@\u00261331663186088431788\u003e , not sure if that is something known or specific to my setup.",
        "created_at": "2025-02-21T13:00:51.174000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "```\nFeb 21 14:01:15.352 ERR image build failed image=hive/clients/ultralight:latest err=\"The command '/bin/sh -c echo \\\"Cloning: $github - $tag\\\"     \u0026\u0026 git clone https://github.com/$github ultralight     \u0026\u0026 cd ultralight     \u0026\u0026 git checkout $tag     \u0026\u0026 npm i     \u0026\u0026 mv .git /.git' returned a non-zero code: 128\"\n```",
        "created_at": "2025-02-21T13:01:40.369000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "lemme take a look at it this morning",
        "created_at": "2025-02-21T16:07:45.198000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003c@510413979080720385\u003e try with this commit - a5437099da0423ed2ef0e4e42fc11e43f9a1e04c (we merged our union removal PR into master) and it's building and running for me locally",
        "created_at": "2025-02-21T16:30:56.046000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "will let it all run locally and report results here once they're ready",
        "created_at": "2025-02-21T16:31:53.598000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I've been working on updating trin's bridge for post-merge data and looking for some feedback on an idea...\n\nInitially the plan was to maintain an `era1` bridge for pre-merge, an `era` bridge for post-merge (non-ephemeral) and then a `latest` bridge for ephemeral. \n\nHowever, `era` files don't have receipts, so we could either use a live provider (which has mixed performance in terms of being able to deliver those receipts) or we define a new `era` format that contains the receipts. It seems like the best option here is to define a new `era` format.\n\nOk, so if we have to define a new `era` format, then maybe we can define this format to be compatible pre \u0026 post merge, by updating `Header` to be `HeaderWithProof` \n\nPros:\n- we have a single era file format for all non-ephemeral history data\n- the bridge can be relatively \"dumb\" and just gossip the deserialized content without having to generate proofs on-the-fly, which involves some overhead based on the height. \n\nCons: \n- the height-based proof generation overhead moves into the tooling that generates these files, but now the proof-generation only has to happen once when you're creating the file, rather than on-the-fly every time you want to gossip a particular epoch\n- we'll have to maintain some architecture that generates/uploads a public endpoint to access these files for each new epoch (a la `https://mainnet.era.nimbus.team/`) but that'll be required regardless\n- work required to regenerate pre-merge files in the new format, but this only needs to happen once\n\nmaybe the only concern I can think of is that the new era files will be based on a portal-defined type, rather than more \"established\" native ethereum types. so, let's say we want to change `HeaderWithProof` at some point in the future, we will have to re-generate all of the files (though, imo after the recent union removal, this type has solidified)",
        "created_at": "2025-02-21T17:06:54.787000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Quick note, \u003chttps://github.com/ethereum/hive/pull/1246\u003e we now have a valid build for testing shisui avaliable, ultralight has updated their commit hash as well",
        "created_at": "2025-02-21T17:45:07.522000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I am for this proposal, we need to create a new format regardless, by doing it this way we can bridge block 0-latest minus ~8192, and have much simpler bridge logic. Not needing to always download portal-accumulators will be very nice as well. Having the proofs pre-generated seems like a no brainer ðŸš€",
        "created_at": "2025-02-21T17:48:07.793000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I've created a pr with a proposed file format, any feedback / ideas would be great!\nhttps://github.com/ethereum/portal-network-specs/pull/368",
        "created_at": "2025-02-21T19:43:00.832000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "This is a great idea and we'll be happy to support.",
        "created_at": "2025-02-21T20:45:15.224000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I've run all the `history-interop` tests locally and it \"seems\" like everything is okay.  All the post-merge tests are currently failing for Ultralight and I can't remember if only the pre-merge proofs were updated to the new format or not in the hive test vectors so not sure if that's an issue on the Ultralight side or not",
        "created_at": "2025-02-21T20:46:37.997000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "That should be good enough for the deployment on Monday",
        "created_at": "2025-02-21T20:47:16.518000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "We also have a couple of gossip tests failing for premerge but it doesn't appear to be related to deserializing the data",
        "created_at": "2025-02-21T20:47:32.534000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I'll have to run the tests locally to try and decipher that",
        "created_at": "2025-02-21T20:47:54.390000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "The post merge test vectors were updated to the new format for pre-capella proofs",
        "created_at": "2025-02-21T20:47:59.726000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "We don't have any post-capella test vectors active next week, hopefully they are added in a week, they are commented out for the time being",
        "created_at": "2025-02-21T20:48:45.745000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "ok, so maybe we have an issue I didn't spot then with post merge set since I thought I'd run all of them and it was only post capella that was failing validation for us",
        "created_at": "2025-02-21T20:49:59.594000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "hmm, ok, we've definitely got a bug with pre-capella header proof structure that I missed.  Will update the PR once we get it resolved",
        "created_at": "2025-02-21T21:10:31.726000+00:00",
        "attachments": null
    }
]