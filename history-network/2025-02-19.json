[
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003c@439193900096290816\u003e \u003c@261161007982968833\u003e \u003c@240180844130598912\u003e I updated my test vectors PR (https://github.com/ethereum/portal-spec-tests/pull/34) to include update of the hive test vector file, however only for pre-merge headers, and I added a TODO for post merge.",
        "created_at": "2025-02-19T15:46:56.917000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I'd like to get that merged soon and ideally before the PR of \u003c@439193900096290816\u003e (https://github.com/ethereum/portal-spec-tests/pull/39). Reason being that I have fluffy PR's that depend on each other (incrementally doing the changes of Union removal, enabling post merge proofs, etc), and it would be nice if I can also incrementally update the test vectors repo revision for those.",
        "created_at": "2025-02-19T15:48:59.164000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I would personally comment out post-merge headers, as they wouldn't decode properly (and I think we have a code that iterates over all entries in that file and performs the test)",
        "created_at": "2025-02-19T15:51:03.500000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "You use the hive test vectors in fluffy‚Äôs? Codebase?",
        "created_at": "2025-02-19T15:51:36.535000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "lol, no. But the individual files, yes.",
        "created_at": "2025-02-19T15:52:04.298000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I thought I made it pretty clear already that I dislike that 0.5MB yaml file üôÇ",
        "created_at": "2025-02-19T15:53:22.368000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Ok so you don‚Äôt depend on \u003chttps://github.com/ethereum/portal-spec-tests/blob/master/tests/mainnet/history/hive/test_data_collection_of_forks_blocks.yaml\u003e",
        "created_at": "2025-02-19T15:53:22.548000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Nope",
        "created_at": "2025-02-19T15:54:06.378000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I can comment it out, but I thought it was not preferred.",
        "created_at": "2025-02-19T15:54:42.769000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I don‚Äôt understand this claim then",
        "created_at": "2025-02-19T15:54:44.496000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Without commenting it out the history hive tests wouldn‚Äôt run at all",
        "created_at": "2025-02-19T15:55:16.146000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I am pretty sure consensus-spec-tests has bigger yaml files then that",
        "created_at": "2025-02-19T15:56:00.404000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Make up your minds please. What do you want now?",
        "created_at": "2025-02-19T15:56:21.456000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Might be, but I think they typically separate test cases. I might be wrong though.",
        "created_at": "2025-02-19T15:57:27.726000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I repeated what Milos said, that is consistent. I don‚Äôt think we are in a rush to update the hive test files, it will be done by the end of the day by Nick, so remove it from your PR then",
        "created_at": "2025-02-19T15:57:54.487000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Well, that is not consistent with was said before. Sigh.",
        "created_at": "2025-02-19T15:59:39.534000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "The PR seperation as it is now makes sense imo.",
        "created_at": "2025-02-19T16:00:27.444000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "As it is in line with the steps we outline for the different functionality",
        "created_at": "2025-02-19T16:00:50.413000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "But sure, if it is preferred, I'll revert and then merge",
        "created_at": "2025-02-19T16:00:58.248000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003c@439193900096290816\u003e \u003c@403636673914863626\u003e As I was testing the HWP test vectors for bellatrix/capella, I realized I still had to make adjustment to use a `List` for the `ExecutionBlockProof` (we changed that in the PR because in deneb the proof size increases from 11 to 12, as you pointed out \u003c@403636673914863626\u003e ). When implementing it now it seems to me better to just stick with `Vector` as the gIndex changes anyhow for building and verification of the proof. I'll revisit this after my week off.\nDid you implement that fully yet for deneb?",
        "created_at": "2025-02-19T17:18:05.155000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I did implement as a list but happy to revisit (especially since we've got discrete containers for the proofs now)",
        "created_at": "2025-02-19T17:20:42.628000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003e Did you implement that fully yet for deneb?\n\nThe change you're talking about would also affect `Capella` data / vectors, right?",
        "created_at": "2025-02-19T17:24:35.583000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Yes, it would.",
        "created_at": "2025-02-19T17:25:37.919000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I also used a `List`, but no strong feelings bw `List` \u0026 `Vector`",
        "created_at": "2025-02-19T17:25:41.942000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Though in terms of rolling out the new `HeaderWithProof` type, I guess this change doesn't block us for stage 1 on monday? since it's only post-merge (specifically, post-Capella) data. and the following steps are something like\n- update spec\n- update test vectors\n- implement changes into bridges / clients\nsound about right? since i'm in the middle of this right now, I might just go ahead and pre-emptively implement these changes to the vectors/trin if we're üëç that this is the direction we're going?",
        "created_at": "2025-02-19T17:29:09.019000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Nope, it does not block for stage 1 on monday. important only for post-capella headers",
        "created_at": "2025-02-19T17:34:35.437000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "ok, cool. i'm just gonna go ahead and implement this new change, unless you think there's any potential for pushback to it?",
        "created_at": "2025-02-19T17:37:18.926000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Well, did Trin implement the capella vs deneb proof building/verification difference yet?",
        "created_at": "2025-02-19T17:38:31.532000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "nope, i haven't touched anything past capella yet",
        "created_at": "2025-02-19T17:39:08.094000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "maybe \u003c@690224518383534174\u003e has?",
        "created_at": "2025-02-19T17:39:21.960000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "tbf, i'm also ok with just using `List` for now, and if we decide on this change later, it's not a very heavy lift",
        "created_at": "2025-02-19T17:42:51.842000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Basically in Deneb the `ExecutionPayload` of the beacon blocks changed in amount of fields such that the proofs change.\nProofs go from 11 to 12 digests, and GeneralizedIndex changes. For this reason we swapped to a List instead in the specs PR, so that the same type could remain to be used. \n\nBut as I am now implementing this ... it feels counter productive. As it is not just the Vector size that changes but also the gIndex, so you would have to make a selection based on the slot number anyhow.\nAnd when using a List, you also will need to check the size of the list, so then it seems like one might just as well go for the Vector, as it will give better type safety.",
        "created_at": "2025-02-19T17:51:18.061000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "But in terms of spec it does mean we would have to define a `BlockProofHistoricalSummariesDeneb`.",
        "created_at": "2025-02-19T17:52:28.865000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "We only have types implemented, but we don't have proof verification/building (some verification work is done, but I don't think it works properly)\n\nI'm in favor using Vector for proofs. But if we decide to stay with List for capella/deneb, we might use List for pre-capella as well (or is there a reason why that would be different?)",
        "created_at": "2025-02-19T18:48:37.270000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Using a Vector does seem cleaner then specifing an additional proof type üëç, as then you can just select the gindex by header timestamp",
        "created_at": "2025-02-19T19:00:47.594000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I've updated all pre-capella test vectors for the updated `HeaderWithProof` type that are used inside Hive. Decided to leave post-capella alone until the spec is updated with the final changes discussed above. But if any other teams have a moment to validate the vectors \u0026 the proofs they contain, that would be great! \nhttps://github.com/ethereum/portal-spec-tests/pull/40",
        "created_at": "2025-02-19T19:17:51.110000+00:00",
        "attachments": null
    }
]