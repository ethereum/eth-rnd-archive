[
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Forgot to mention this in call yesterday, but \u003c@261161007982968833\u003e already pointed it out in the meanwhile (https://github.com/ethereum/portal-spec-tests/pull/34#issuecomment-2665425356). Hive test vectors also need to get updated. \u003c@240180844130598912\u003e do you have a script/tool for that or is it semi-manual work?",
        "created_at": "2025-02-18T14:18:24.193000+00:00",
        "attachments": []
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Speaking of upcoming migration and hive, we should aim to test clients in hive environment before next Monday (similar how we did it for ping extensions).\nSo we will need help/instructions from all clients on how to get/build proper docker image.",
        "created_at": "2025-02-18T14:26:56.015000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Yes, that too would be useful. But in this case I think it would be slightly different and would require a hive branch which has those hive test vectors updated to test from (and then similar as the yaml file with the different git revision of the clients to be tested).",
        "created_at": "2025-02-18T14:42:40.097000+00:00",
        "attachments": []
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I didn't yet look into how exactly we do it, but we should do it. I think Nick will look into doing required work for hive. As a first step, I think we don't have to worry about post-merge content as most clients might not support it initially anyway (maybe a test that old types without content values without proof are not stored).\n\nI plan today/tomorrow to have a branch that can be used to build trin.",
        "created_at": "2025-02-18T14:48:05.519000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Another item is to turn of gossip of latest headers/bodies/receipts in the bridges as no client will accept them anymore anyhow until that gets implemented.",
        "created_at": "2025-02-18T14:50:28.280000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I will disable this today already in our single history bridge. And just set the config to randomly gossip headers/bodies/receipts from pre-merge.",
        "created_at": "2025-02-18T14:51:06.596000+00:00",
        "attachments": []
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "we already turned off our bridges ~2 weeks ago and we won't enable them until at least some clients accept this type of content (we also need to implement our bridges to support new types)\nIf you check Glados, \"latest\" is basically zero for a while",
        "created_at": "2025-02-18T14:53:36.738000+00:00",
        "attachments": []
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "we will also change our bridge infrastructure a bit. I think current plan is to have:\n- random era1 bridge (for pre-merge data), which might be enabled next week (or when ready)\n- random era bridge (once some clients supports valid proofs)\n    - we might ship this paritally if there is support for historical roots only\n- head of the chain bridge\n    - maybe this one will gossip beacon data as well... tbd",
        "created_at": "2025-02-18T14:58:13.843000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "When I made the hive test data file for history I made a script on the spot for it, for the state network I reused the data already generated",
        "created_at": "2025-02-18T15:00:18.430000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003e maybe a test that old types without content values without proof are not stored\nWouldn't just adding a test for false cases cover that?",
        "created_at": "2025-02-18T15:12:32.481000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Sounds good. We will probably do something very similar.",
        "created_at": "2025-02-18T15:19:37.559000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "ok, well I can update the hive test vectors if needed, but it does mean that I will just delete all that is post merge in there, as I think that would fail else",
        "created_at": "2025-02-18T15:27:11.475000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Do we do that in separate PRs?",
        "created_at": "2025-02-18T15:27:53.822000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "so is your plan to update the vectors, or just delete all post-merge vectors?",
        "created_at": "2025-02-18T15:28:06.673000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Seperate from what?",
        "created_at": "2025-02-18T15:28:16.868000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Update pre-merge, delete post merge.",
        "created_at": "2025-02-18T15:28:31.367000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "From the existing PR with test vector update that is typically used in client CIs",
        "created_at": "2025-02-18T15:28:48.040000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003c@439193900096290816\u003e do we have the code ready to generate historical roots and historical summary proofs yet? Because I would prefer to have test cases for all proof types",
        "created_at": "2025-02-18T15:30:43.923000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "We will see what Nick says, I am assuming it will be a seperate PR",
        "created_at": "2025-02-18T15:31:24.470000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Creating test vectors and testing this functionality in unit tests is not the same as having the client ready and activated for this. I understand that no clients would have this at the moment.\nBut we could just let those tests fail of course or have them marked in some way (I don't know what functionality hive has regarding something like that).",
        "created_at": "2025-02-18T15:34:11.444000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "We do",
        "created_at": "2025-02-18T15:35:41.450000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "So your client is ready to accept headers with proof post merge, based both on historical roots and historical summaries?",
        "created_at": "2025-02-18T15:36:24.111000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "For HistoricalRoots, I don't see a reason for not including the test cases for historical summaries though",
        "created_at": "2025-02-18T15:36:41.845000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Yes, historical roots is fairly easy addition ðŸ™‚",
        "created_at": "2025-02-18T15:37:00.008000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Currently we don't validate HistoricalSummaries, so the tests would pass if the data was there",
        "created_at": "2025-02-18T15:37:14.761000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Well, I rather test something that actually tests something",
        "created_at": "2025-02-18T15:37:34.840000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "You would need to add false cases to test that",
        "created_at": "2025-02-18T15:37:49.465000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "It would be testing the encoding/decoding of historicalsummary proofs",
        "created_at": "2025-02-18T15:38:06.360000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "true",
        "created_at": "2025-02-18T15:38:06.713000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Anyway, I will not activate this on fluffy in such way, as it allows for garbage to be stored, and I'm already putting effort on pruning that",
        "created_at": "2025-02-18T15:38:34.844000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Nothing wrong with that",
        "created_at": "2025-02-18T15:38:49.934000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I don't see that as a reason to avoiding adding valid test data though",
        "created_at": "2025-02-18T15:39:03.837000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Sure, it can be added. I will not focus on updating hive test vectors then.",
        "created_at": "2025-02-18T15:39:53.374000+00:00",
        "attachments": []
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "As the first step and being done asap, I'm fine with having only pre-merge content in hive tests (as said above, clients will most likely fail post-merge anyway). This will let us test the next week's rollout. \u003c@510413979080720385\u003e if it is easy, I would include it in your PR (migrate pre-merge, delete or comment post-merge).\n\nI'm also fine adding tests for post-merge content as well, but I see that as a lower priority, therefore it can go in the followup PR. And I'm fine if some clients fail those tests.",
        "created_at": "2025-02-18T15:46:32.444000+00:00",
        "attachments": []
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "i should have historical roots done by eod today, and summaries by eod tm (just estimating there)",
        "created_at": "2025-02-18T16:30:10.077000+00:00",
        "attachments": []
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I can generate both pre and post capella as well if you need some samples",
        "created_at": "2025-02-18T19:23:34.507000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003c@403636673914863626\u003e \u003c@510413979080720385\u003e (I am not sure if this was linked in a chat), but \u003chttps://github.com/ethereum/portal-spec-tests/pull/39#issuecomment-2666328013\u003e Nick made a PR to add testvectors for headers with historical roots and historical summary proofs yesterday I believe if you want to check it out",
        "created_at": "2025-02-18T19:41:18.934000+00:00",
        "attachments": []
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "ah, sorry, maybe I missed that in the conversation",
        "created_at": "2025-02-18T19:41:37.504000+00:00",
        "attachments": []
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "will take a look",
        "created_at": "2025-02-18T19:41:47.791000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I am not sure if it was posted to be honest",
        "created_at": "2025-02-18T19:41:56.996000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I just have email notifications on",
        "created_at": "2025-02-18T19:42:06.527000+00:00",
        "attachments": []
    },
    {
        "author": "kolbyml",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Oh Nick shared it up here very cool",
        "created_at": "2025-02-18T19:42:54.944000+00:00",
        "attachments": []
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I am aware yes but I wanted to focus first on the union removal for Monday",
        "created_at": "2025-02-18T20:29:29.520000+00:00",
        "attachments": []
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I'm currently working on generating post-capella proofs in trin, and once that's done, i'll update https://github.com/ethereum/portal-spec-tests/blob/master/tests/mainnet/history/hive/test_data_collection_of_forks_blocks.yaml - which hive pulls from, so then clients shouldn't have to do anything special to be tested against the updated HWPs",
        "created_at": "2025-02-18T20:39:13.414000+00:00",
        "attachments": []
    }
]