[
    {
        "author": "qizhou",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Summary on EIP-4844 stress test on devnet-12: we spent 6.3 days to send 21485 Txs with 44455 BLOBs.  All Txs use 2000 ETH.  We also download all uploaded BLOBs from CL and store them in our EthStorage BLOB network.   All are running well!  (except that https://rpc.dencun-devnet-12.ethpandaops.io seems to be out of sync).",
        "created_at": "2023-12-14T02:50:38.774000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "did you get any replies for it?",
        "created_at": "2023-12-14T08:54:58.397000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I wonder if the idea is that when user does `eth_sendTransaction` with blob, the client would calculate the proofs and commitments, and then sign it and send the raw transaction to node?",
        "created_at": "2023-12-14T08:55:38.453000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We discussed it a bit in \u003c#804019759934078987\u003e. Seems to me that you don't need full \"network\" form of tx  for `eth_multicallV1`, just `blobVersionedHashes` field. You can't access proof/commitments/blobs anyway.",
        "created_at": "2023-12-14T09:05:49.749000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But in this way proofs and commitments will not be accessible by your code, which may be important for contract call(you might want to pass commitment and proof for precompile I guess). `eth_fillTransaction` is a separate method that may help with calculation of them",
        "created_at": "2023-12-14T09:07:45.580000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that's right. However, we feel that it would be also useful to be able to simulate exact transactions multicall and eth_call. So you can just take existing transaction, remove signature fields and you are good to go",
        "created_at": "2023-12-14T09:08:14.199000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "before, you could estimate gas cost of transaction by just passing it to estimate gas method. You can no longer do that with the current spec",
        "created_at": "2023-12-14T09:09:10.572000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why?",
        "created_at": "2023-12-14T09:09:33.163000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "because the transaction object is different",
        "created_at": "2023-12-14T09:09:44.128000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do you mean network form?",
        "created_at": "2023-12-14T09:10:00.781000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yea",
        "created_at": "2023-12-14T09:10:05.822000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think it would make sense to be able to take in all the fields as the normal transaction has, and then add support for only passing the hashes",
        "created_at": "2023-12-14T09:11:09.520000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, seems like you have to store payload form and blobs/commitments/proofs container separately for `eth_multicallv1` and then make network form later when really call `eth_sendTransaction` or so",
        "created_at": "2023-12-14T09:17:17.214000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "well, we are planning to support both: \n1) pass just hashes\n2) pass blobs, hashes, commitments and proofs\n\nwe feel just the other methods should be doing that as well",
        "created_at": "2023-12-14T09:18:53.896000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My intuition says more specialized and simple methods are better. It also says that a lot of EL implementers will provide a lot more arguments against handling both forms by methods",
        "created_at": "2023-12-14T09:23:32.274000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "right. I feel its more complex that multicall would not take a normal transaction to do simulation for",
        "created_at": "2023-12-14T09:24:45.119000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "the current methods support that, after 4844 they won't be. Which I feel is a big mistake",
        "created_at": "2023-12-14T09:25:34.013000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I see your point. Which is also inconvenient is that you cannot even have payload form as a subarray of the network form",
        "created_at": "2023-12-14T09:30:44.290000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We can describe it as an issue or a hackmd note and discucss during ACDE or so",
        "created_at": "2023-12-14T09:31:34.996000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah. I don't understand why the network form adds one layer to the transaction, that we didn't have before",
        "created_at": "2023-12-14T09:31:37.806000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Wrapper data (blob/commitments/proofs) belongs to DA layer which is separate from EL. If we had it in transaction we had to store it forever on EL side, but by definition it should be on DA layer(CL plays this role) and disappear after some time. EL executes payload form if it wants to sync blocks.",
        "created_at": "2023-12-14T09:35:10.346000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm ah i see",
        "created_at": "2023-12-14T09:35:20.934000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "How does a dapp (which only connects to the EL via JSON-RPC API) submit a blob?",
        "created_at": "2023-12-14T09:35:47.905000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so I feel eth_call and such methods should be able to take the whole wrapper",
        "created_at": "2023-12-14T09:35:49.353000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e  has a solution for it in form of `eth_fillTransaction` to prepare blob related fields and then you can just send it via `eth_sendRawTransaction`",
        "created_at": "2023-12-14T09:37:00.738000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```ts\n{\n    method: 'eth_sendTransaction'\n    params: [{\n        ...,\n        blobs: [0x..., 0x..]\n    }]\n}\n```\nlike this I think?",
        "created_at": "2023-12-14T09:37:51.157000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If you have kzg lib (I think it's possible for web) you can do it fully on client side and just send raw tx",
        "created_at": "2023-12-14T09:38:03.894000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "and then a wallet would bundle the rawtransaction from eth_sendtransaction",
        "created_at": "2023-12-14T09:38:36.330000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003chttps://etclabscore.github.io/core-geth/JSON-RPC-API/modules/eth/#eth_filltransaction\u003e hmm I didn't know about this method",
        "created_at": "2023-12-14T09:40:10.118000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Cos it's not a standard method yet and it does not yet help with blobs, we are just discussing it",
        "created_at": "2023-12-14T09:41:41.210000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah. I failed to find a proper spec for it :D",
        "created_at": "2023-12-14T09:42:19.982000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So the application doesn't need to create proof/commitment/hashes?  It just needs the blob data?",
        "created_at": "2023-12-14T09:45:04.821000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`eth_sendRawTransaction` includes both the `blobs` array as well as the commitments/proofs/hashes (all RLP encoded)?",
        "created_at": "2023-12-14T09:45:50.875000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it can be outsourced to wallet as well",
        "created_at": "2023-12-14T09:45:58.587000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "thats right",
        "created_at": "2023-12-14T09:46:20.109000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Just fyi: it's one of approaches in discussion that is not implemented afaik. The only working way for now is to send `eth_sendRawTransaction`",
        "created_at": "2023-12-14T09:48:49.815000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ewe, that seems terrible on the surface (only being able to send via raw transaction).  Is there an argument *against* making blob transactions work with `eth_call` or `eth_sendTransaction`?",
        "created_at": "2023-12-14T09:52:07.703000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "complexity, also the wrapped transaction is bit ugly as the other transactions are not wrapped",
        "created_at": "2023-12-14T09:52:55.275000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What do you mean \"wrapped transaction\"?",
        "created_at": "2023-12-14T09:53:15.353000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\"Blob transactions have two network representations. During transaction gossip responses (PooledTransactions), the EIP-2718 TransactionPayload of the blob transaction is wrapped to become:\n\n`rlp([tx_payload_body, blobs, commitments, proofs])`\n\"",
        "created_at": "2023-12-14T09:54:40.385000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "eth_call just takes `tx_payload_body`",
        "created_at": "2023-12-14T09:55:14.487000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Need to mention tx type byte also",
        "created_at": "2023-12-14T09:56:11.973000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh right",
        "created_at": "2023-12-14T09:57:25.109000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "network form `BLOB_TX_TYPE || rlp([tx_payload_body, blobs, commitments, proofs])` vs payload form `BLOB_TX_TYPE || rlp(tx_payload_body)`",
        "created_at": "2023-12-14T09:59:27.545000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "~~Hm the eip does not have it~~ Nevermind, I guess mention of EIP-2718 there is enough",
        "created_at": "2023-12-14T09:59:51.477000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, this feels wrong.  Can we still change this?",
        "created_at": "2023-12-14T10:06:37.821000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It doesn't follow the paradigm of the rest of the API, which is that you pass human readable JSON and do not need an RLP encoder in your app.",
        "created_at": "2023-12-14T10:06:56.599000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, I see.",
        "created_at": "2023-12-14T10:07:11.430000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, if the commitments and proofs are derived, why are they passed around the network?",
        "created_at": "2023-12-14T10:07:29.760000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Seems like it would make more sense to *not* pass around commitments and proofs and instead derive them on each client, rather than wasting network bytes on it.",
        "created_at": "2023-12-14T10:07:55.589000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You need to know them in advance",
        "created_at": "2023-12-14T10:10:06.937000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "this is my understanding of the situation: https://hackmd.io/dBHSRpVRTVi3KEnw4MJuSQ",
        "created_at": "2023-12-14T10:14:08.969000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Then how does `eth_sendTransaction` work with only the blob data supplied?",
        "created_at": "2023-12-14T10:18:26.198000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e Just fyi: it's one of approaches in discussion that is not implemented afaik. The only working way for now is to send `eth_sendRawTransaction`",
        "created_at": "2023-12-14T10:18:59.720000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003chttps://github.com/ethereum/execution-apis/blob/431cf72fd3403d946ca3e3afc36b973fc87e0e89/src/eth/submit.yaml#L1\u003e spec says it works, so it must :D",
        "created_at": "2023-12-14T10:19:01.553000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "OK.  So blob body, commitments, and proofs are all required.  It is only the hashes that can be derived from those?",
        "created_at": "2023-12-14T10:19:36.783000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh. I thought commitments and proofs can be derived from blob?",
        "created_at": "2023-12-14T10:19:57.747000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm seems like you cannot",
        "created_at": "2023-12-14T10:20:53.951000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is what I would expect:\n```json\n{\n    ...\n    \"method\": \"eth_call\",\n    \"params\": [{\n        \"type\": \"0x3\",\n        \"to\": ...,\n        \"data\": ...,\n        \"blobs\": [\n            {\n                \"payload\": \"0x...\",\n                \"commitment\": \"0x...\",\n                \"proof\": \"0x...\",\n            },\n            {\n                \"payload\": \"0x...\",\n                \"commitment\": \"0x...\",\n                \"proof\": \"0x...\",\n            }\n        ]\n    ...\n    }\n}\n```",
        "created_at": "2023-12-14T10:21:55.331000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Same format for `eth_sendTransaction`.",
        "created_at": "2023-12-14T10:22:12.120000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You can",
        "created_at": "2023-12-14T10:23:32.861000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And hash is made from commitment",
        "created_at": "2023-12-14T10:23:51.920000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Recommend changing the suggestion to have the blobs be an array of objects, not 3 arrays that all have to be exactly the same length and align.",
        "created_at": "2023-12-14T10:23:58.859000+00:00",
        "attachments": null
    },
    {
        "author": "killari.",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I feel that array format aligns more to the rlp representation, but I guess it doesn't need to align that",
        "created_at": "2023-12-14T10:24:29.091000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c:crazycry:932693133546889216\u003e",
        "created_at": "2023-12-14T10:24:35.088000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, ☝️ you implied that the payload alone isn't sufficient?  Did I misunderstand?",
        "created_at": "2023-12-14T10:24:43.032000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Network format has very different requirements from JSON-RPC.  Network format cares about size on wire and speed of decoding, JSON-RPC cares about readability and dev UX.",
        "created_at": "2023-12-14T10:25:11.210000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I mean when you post blobs you may sometimes want to pass commitments and proofs via calldata. And you need to calculate them on client side before sending",
        "created_at": "2023-12-14T10:25:43.333000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Commitments and proofs can be computed from the blob payload though?  They are derived purely from the blob alone?",
        "created_at": "2023-12-14T10:26:32.283000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes",
        "created_at": "2023-12-14T10:26:55.232000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is the derivation time for the commitments and proofs significant enough that we don't want clients generating them for some reason?",
        "created_at": "2023-12-14T10:26:57.414000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Like is the proof a zkProof of some kind that is incredibly expensive to compute, or is it more like a merkle proof?",
        "created_at": "2023-12-14T10:27:27.372000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Quite a quick process, you just need kzg library to do this work on client side which is not always the case(we do not expect it to present in all clients (like web ones for example))",
        "created_at": "2023-12-14T10:28:16.538000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "OK, in that case I think `eth_sendTransaction` and `eth_call` should have `commitment` and `proof` fields optional.  If they are present and they don't match the `payload`, then an error is returned (INVALID_PARAMETERS probably).",
        "created_at": "2023-12-14T10:29:30.002000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This gives application developers a way to verify that they generated commitment and proof correctly, and also a way to provide blob data without having to have all of the necessary libraries to compute the commitment and proof themselves if they don't need it.",
        "created_at": "2023-12-14T10:30:12.767000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We may want to consider providing a mechanism for applications to ask the client to generate the commitment and proof for them (and return it), but I think that is out of scope for `eth_sendTransaction` and `eth_call`/`eth_multicallV1`.",
        "created_at": "2023-12-14T10:30:43.610000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sounds exactly like `eth_fillTransaction`",
        "created_at": "2023-12-14T10:31:42.817000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Similar discussion happening in https://discord.com/channels/595666850260713488/1184595055055470762/1184596394049282108, we should probably consolidate.",
        "created_at": "2023-12-14T10:33:33.332000+00:00",
        "attachments": null
    }
]