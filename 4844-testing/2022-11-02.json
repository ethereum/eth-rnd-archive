[
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I doubt we'll reach consensus, or at least not without some people complaining. I don't really understand why do you guys need to couple withdrawals with 4844 testing. It's much easier to remove the withdrawal paths from clients that implement something that may need to be gone.",
        "created_at": "2022-11-02T01:38:38.300000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My guess is some teams already have withdrawals as part of state and block. It's cleaner to rebase 4844 on top than on top of Bellatrix",
        "created_at": "2022-11-02T01:56:59.810000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But it's worst to add withdrawals queue to state if you haven't that's at a risk of having them removed in a week",
        "created_at": "2022-11-02T01:57:43.545000+00:00",
        "attachments": null
    },
    {
        "author": "realbigsean",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In lighthouse we can’t easily support “turning off a fork” in our consensus types (we can feature flag the processing logic easily though), so the following would be implemented as 3 separate forks.  \n\nMerge -\u003e capella \nMerge -\u003e capella -\u003e 4844\nMerge -\u003e 4844\n\nSince the general consensus is that withdrawals *will* go into capella, for us, building out Merge -\u003e 4844 looks like wasted effort.  The instability in the withdrawals spec is unfortunate but I don’t think people expected 4844 to be moving along more quickly than withdrawals.  I think we should still target building on the capella types it seems most likely we’ll go with. But if it really looks up in the air and this is a lot of trouble for other teams it will be some more work on our end but that’s ok, we will make it work",
        "created_at": "2022-11-02T02:47:24.647000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i cant see 4844 shipping pre-withdrawals, spec instability or no...",
        "created_at": "2022-11-02T02:50:07.489000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "with all the trips etc i'm only really starting on capella now, but i'd expect that 4844 either gets built on that or somehow we have a dev flag until we know where it lives",
        "created_at": "2022-11-02T02:51:17.421000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "would be nice to just call it `deneb` or something",
        "created_at": "2022-11-02T02:52:37.297000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "guessing at some time soon we need to decide if it's in capella or not though",
        "created_at": "2022-11-02T02:53:30.254000+00:00",
        "attachments": null
    },
    {
        "author": "hsiaowei",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think it’s not okay to disable it in this way in `dev` branch. Plus, CL clients do need it + test vectors as the sanity check before interop. I guess what you want is maintaining a `devnet-3` specific branch? Spec can do it, but I hope we can reduce the complexity of versioning. e.g., there will be 4844 and non-4844 spec test vectors simultaneously and CL clients may be more confused.",
        "created_at": "2022-11-02T04:06:51.857000+00:00",
        "attachments": null
    },
    {
        "author": "hsiaowei",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Beyond 4844, I think [withdrawal, 4844] probably won’t be the last feature set that clients will work on in parallel, so it is worth considering the in-parallel patches (multiple separate forks of the same parent fork) style design for the long term.",
        "created_at": "2022-11-02T04:07:47.725000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it's a fair point that they need to be worked on in parallel, we're basically in a similar boat to lighthouse where we would have to do a little trickery at the moment to make something work - feature toggle or similar, the infrastructure for forks doesn't really lend itself well to this kind of development, at least our model doesn't...",
        "created_at": "2022-11-02T04:11:28.762000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's the same for us. My point is not to make a different fork but that I'm more likely to revert the capella PRs that went into prysm than to continue implementing the current specification for the sake of 4844 testing",
        "created_at": "2022-11-02T08:32:58.943000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Agree.\n\nNimbus isn't participating yet in 4844 testing, but definitely will not do so with a 4844 being part of merge, as far as I understand the relative likelihoods of 4844 and withdrawals (already-capella) being included. That is to say, I'm operating on the assumption/belief that withdrawals _will_ be in Capella, while there's a strong push for 4844, but it's still a bit uncertain.",
        "created_at": "2022-11-02T09:00:35.463000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Our approach is to broadly treat 4844 as part of Capella, and since it's not actually part of Capella, yet, it's not in scope for testing, yet",
        "created_at": "2022-11-02T09:01:16.970000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It’s definitely something we’ve considered but implementing it generically in a strongly typed language whilst with decent compile-time guarantees isn’t trivial. For example, trying to describe to a compiler that fork C can exist without fork B, but fork D needs B but not C can get a bit out of hand.\n\nOnce we know that we should be working on two forks in parallel then we can easily make that work. However, if we think we’re doing them in series and we can keep the code simpler by not adding toggling, then we’ll do that.\n\nI think the problem here is that we don’t have the direction we need in order to work efficiently; we’re trying to save time but then making the wrong call which costs us more time. I’m not blaming anyone for it, I think it’s just a significant (and well known) problem with how we’re all positioned for withdrawals and 4844.",
        "created_at": "2022-11-02T09:28:53.510000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "4844 is a complex change, so one goal is to minimize any rebase pain if it does get approved for Shanghai/Capella.   This is why I favor implementing on top of the withdrawal changes rather than in parallel.",
        "created_at": "2022-11-02T14:01:47.213000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "...and hoping we get some clarity around withdrawal queue issue during the call tomorrow.",
        "created_at": "2022-11-02T14:06:06.495000+00:00",
        "attachments": null
    }
]