[
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@427491045308235776\u003e Plop. Just saw that gokzg changed the definition of a Blob to be a dynamic type. Any particular reason for this?",
        "created_at": "2023-10-09T06:49:55.939000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "With no major version change, anyone who depends on go-ethereum as a library now gets a broken dep hierarchy, because Go just fetches the new gokzg",
        "created_at": "2023-10-09T06:50:20.603000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Which is not backwards compatible with the old one",
        "created_at": "2023-10-09T06:50:29.019000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hey, prysm wanted a way to do both Mainnet tests and Minimal tests",
        "created_at": "2023-10-09T06:51:52.230000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are the minimal tests different blob sizes?",
        "created_at": "2023-10-09T06:53:15.998000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah kind of annoying that go doesnâ€™t respect semver, pre 1.0",
        "created_at": "2023-10-09T06:53:35.931000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah they are not 4096, they are sized 4",
        "created_at": "2023-10-09T06:53:44+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Was just wondering if this is long term teh direction and then just pull the change ourselves too",
        "created_at": "2023-10-09T06:53:52.798000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ok, will open a PR to update our code too",
        "created_at": "2023-10-09T06:54:06.347000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "thx",
        "created_at": "2023-10-09T06:54:06.935000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Will you be okay with supporting minimal configs too?",
        "created_at": "2023-10-09T06:54:47.736000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Alright let me know when the PR is open and I can review",
        "created_at": "2023-10-09T06:55:42.321000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No, I just need to unfuckup the types ðŸ˜„",
        "created_at": "2023-10-09T06:55:42.928000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just need to fix https://github.com/ethereum/go-ethereum/issues/28285",
        "created_at": "2023-10-09T06:56:03.981000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Curious question tho, do we need to support minimal configs?",
        "created_at": "2023-10-09T06:56:31.096000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess yes",
        "created_at": "2023-10-09T06:56:35.414000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But how does that work?",
        "created_at": "2023-10-09T06:56:39.022000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That would mean blobs thoughout can be arbitrary size",
        "created_at": "2023-10-09T06:57:01.717000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Does CKZG support it? We depend on both libs, so that's would be a prerequisite",
        "created_at": "2023-10-09T06:57:34.259000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, btw\n\n\u003e Because we use generics, the minimum golang version is 1.18, which seems to be fairly conservative. However, if a lower version is needed, replacing the generics is fairly straightforward.\n\nGo only backports security fixes to one previous version (e.g. now 1.21 and 1.20), so my suggestion is - especially for crypto libs - to be very agressive in cutting off old versions of Go. You won't be able to track what weird big.Int bug isn't hotfixed and how it might impact you.",
        "created_at": "2023-10-09T07:01:07.893000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Itâ€™s mainly used for testing, so technically no, but itâ€™s a CL concept that I think most EL clients are looking to support\n\nCKzg currently supports it but required a separate compile to get it working, Iâ€™ll check if thatâ€™s changed to compile time",
        "created_at": "2023-10-09T07:01:08.095000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Good point â€” I didnâ€™t want to be too aggressive and maybe cause issues for geth which may be more conservative with the minimum supported geth version",
        "created_at": "2023-10-09T07:05:28.865000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We only ever support the last 2 versions of Go due to the same reasons",
        "created_at": "2023-10-09T07:05:55.608000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "+it allows us to semi-reasonably fast use new features of the language",
        "created_at": "2023-10-09T07:06:09.638000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I mean, it's up to you. Just saying what we do and why ðŸ™‚",
        "created_at": "2023-10-09T07:06:51.821000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@206016661470314496\u003e If geth doesnâ€™t plan to support minimal, let me go back to the previous minor bump and then open a conversation with prysm as to how we can move forward",
        "created_at": "2023-10-09T07:07:33.272000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You wonâ€™t need to make any changes in that respects",
        "created_at": "2023-10-09T07:08:00.404000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do you have a rundown of what exactly minimal would need from EL side?",
        "created_at": "2023-10-09T07:11:17.036000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm somewhat reluctant though to support it if there's no real network need behind it",
        "created_at": "2023-10-09T07:11:48.499000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Mainly to support two blob sizes, which implies two trusted setup files and two initialiser methods\n\nIâ€™m not aware of anything else, though \u003c@755590043632140352\u003e can give more context here",
        "created_at": "2023-10-09T07:13:58.460000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The second trusted setup for minimal is small because you only need to support blobs of size 4. You can probably hide that complexity by using the init in go-kzg that embeds the minimal trusted setup",
        "created_at": "2023-10-09T07:15:17.759000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Have made two releases:\n\n- 0.5.0 fixes the issue by going back to mainnet only blobs\n- 0.6.0 bumps the MSGV and updates the policy to what you noted above. We now test for 1.18, one version behind latest and latest.\n\nI cherrypicked the changes for minimal onto a new branch (opened a PR) so that prysm folks are not completely blocked while we discuss support for minimal.",
        "created_at": "2023-10-09T08:33:45.643000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Does geth support trusted setup files via flags already?\ne.g in Teku: `  - --Xtrusted-setup=/network-config/trusted_setup.txt`. We use that to change setup files early on when things weren't stable yet. But if the feature exists, then you don't need to do anything to support minimal tests since the test runner can pass a minimal trusted setup file.",
        "created_at": "2023-10-09T08:55:15.135000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It doesn't look like you can change it currently as it uses go:embed -- so main thing to implement would be a runtime flag and the change to slices",
        "created_at": "2023-10-09T09:05:17.569000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Afaik there's no real network need for it. However a big chunk of our testing depends on minimal configs. Prysm runs a network from genesis and runs all forks on CI, for this we use minimal configs or it would take several hours per run. Other test environments like antithesis also run on minimal configs. It's not really required that geth supports it but it would make our life much easier instead of having to fork presumably geth just for our testing environment",
        "created_at": "2023-10-09T10:13:04.944000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Probably posted in the wrong channel, so reposting here, I think we can safely make minimal and mainnet blob sizes be the same, this should require no changes to client codes and no addition of runtime checks. CC \u003c@415109946682769408\u003e do you feel anything against this on the pyspec tests?",
        "created_at": "2023-10-09T16:58:07.119000+00:00",
        "attachments": null
    }
]