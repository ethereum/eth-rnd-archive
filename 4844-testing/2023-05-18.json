[
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Can someone verify my logic of understanding how to calculate `excess_data_gas`?\n\nThe first post-fork block is the first block which meets the fork requirements (so the first Cancun block).\n\nThis block will assume that `parent.excess_data_gas` is 0, but if it (the first post-fork block) has \"excess blobs\" (in current spec more than 2 blobs), then the `excess_data_gas` field of this \"first post-fork block\" will be nonzero.",
        "created_at": "2023-05-18T09:20:06.974000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "ad19006cb10c8b1ea5e75dd28c563e7fc6a4556eaa9f3546ac7f17c94f2a20c2"
            }
        ]
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I know this is somewhat rubber duck stuff but I just want to verify. If this is true then this is currently not tested, since we currently hardcode the `excess_data_gas` of the first post-fork block as 0. (CC \u003c@892053833121923094\u003e, I think that there are no tests of the fork transition yet (?) - or at least this specific test: the post-fork block has nonzero excess data gas, if there are \u003e 2 blobs in the first post-fork block)",
        "created_at": "2023-05-18T09:20:59.165000+00:00",
        "attachments": null
    },
    {
        "author": "techbro_ccoli",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This was my understanding as well!\n\nWe have 2 fork transition tests in our current release: https://github.com/ethereum/execution-spec-tests/releases/tag/v0.2.5 (`fixtures-cancun.tar.gz` - blobs don't have the kzg version yet) with one test that adds an invalid blob (0 excess data gas) to the first Cancun block and another that adds an array of correct blobs I believe ðŸ˜„\n\nWe could have another where the first invalid blob contains data gas \u003c target but not zero",
        "created_at": "2023-05-18T13:03:41.656000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh wait a second I just realized that I never ran the transition tests",
        "created_at": "2023-05-18T13:07:22.785000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If there is a test in there where the first block has \u003e target (so excessDataGas \u003e 0) then we should fail it I think",
        "created_at": "2023-05-18T13:07:48.088000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I will try to run it soon",
        "created_at": "2023-05-18T13:07:56.131000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is this the fork network or are there more? `ShanghaiToCancunAtTime15k`",
        "created_at": "2023-05-18T13:11:31.463000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That's the only one, it forks to Cancun on 15,000 timestamp",
        "created_at": "2023-05-18T13:11:56.613000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Great ðŸ˜„",
        "created_at": "2023-05-18T13:12:02.901000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Disregard my comment about the tests, I don't know why I did not realize I didn't even look if there were transition tests ðŸ˜‚",
        "created_at": "2023-05-18T13:12:20.092000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Or realized that if there were I never ran them ðŸ˜…",
        "created_at": "2023-05-18T13:12:32.342000+00:00",
        "attachments": null
    },
    {
        "author": "marioevz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "no worries ðŸ™Œ  I think we should have that test case you mention, but I will double-check",
        "created_at": "2023-05-18T13:13:05.395000+00:00",
        "attachments": null
    }
]