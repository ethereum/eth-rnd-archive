[
    {
        "author": "inphi",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@607055410104500244\u003e \u003c@898563924440543283\u003e has implemented the execution API changes for geth. You should be able to run interop between lighthouse and geth. The interop repo hasn't synced the latest geth changes. You'll have to update the geth submodule in your PR to use the APIs.",
        "created_at": "2022-11-30T00:15:14.587000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yes just checkout the eip-4844 branch of https://github.com/mdehoog/go-ethereum",
        "created_at": "2022-11-30T00:18:00.166000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003crealbigsean\u003e Nice! Iâ€™ll see if I can get it working tomorrow",
        "created_at": "2022-11-30T00:27:05.794000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, a lot better. It doesn't show in absolute numbers on the `time`or `mgas/s`, but the allocs are _way_ down, and that definitely brings down the benchmark fluctuations a lot, since it's not as affected by the gc.  Some numbers - the gas per second oddly enough went _down_ for some of them\n```\nname                                                    old mgas/s     new mgas/s     delta\nPrecompiledPointEvaluationFail/fuzzcorp-4-Gas=50000-8       43.5 Â± 3%      44.1 Â± 6%     ~     (p=0.548 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-40-Gas=50000-8      42.8 Â± 4%      43.3 Â± 6%     ~     (p=0.841 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-42-Gas=50000-8      36.0 Â± 3%      38.2 Â±15%     ~     (p=0.151 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-44-Gas=50000-8      41.0 Â± 6%      38.3 Â±24%     ~     (p=0.310 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8      42.0 Â± 4%      34.1 Â±12%  -18.91%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-46-Gas=50000-8      40.6 Â± 4%      37.7 Â±21%     ~     (p=0.222 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-49-Gas=50000-8      42.0 Â± 2%      33.6 Â± 3%  -19.98%  (p=0.008 n=5+5)\n```",
        "created_at": "2022-11-30T08:25:51.191000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The allocs went down a _lot_:\n```\nname                                                    old alloc/op   new alloc/op   delta\nPrecompiledPointEvaluationFail/fuzzcorp-4-Gas=50000-8     58.8kB Â± 0%     7.1kB Â± 0%  -87.97%  (p=0.029 n=4+4)\nPrecompiledPointEvaluationFail/fuzzcorp-40-Gas=50000-8    58.8kB Â± 0%     7.1kB Â± 0%  -87.96%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-42-Gas=50000-8    58.8kB Â± 0%     7.1kB Â± 0%  -87.96%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-44-Gas=50000-8    56.9kB Â± 0%     7.1kB Â± 0%  -87.56%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8    56.8kB Â± 0%     7.1kB Â± 0%  -87.53%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-46-Gas=50000-8    58.8kB Â± 0%     7.1kB Â± 0%  -87.96%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-49-Gas=50000-8    56.8kB Â± 0%     7.1kB Â± 0%  -87.52%  (p=0.000 n=5+4)\n\nname                                                    old allocs/op  new allocs/op  delta\nPrecompiledPointEvaluationFail/fuzzcorp-4-Gas=50000-8        363 Â± 0%        60 Â± 0%  -83.47%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-40-Gas=50000-8       363 Â± 0%        60 Â± 0%  -83.47%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-42-Gas=50000-8       363 Â± 0%        60 Â± 0%  -83.47%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-44-Gas=50000-8       359 Â± 0%        60 Â± 0%  -83.29%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8       356 Â± 0%        60 Â± 0%  -83.15%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-46-Gas=50000-8       363 Â± 0%        60 Â± 0%  -83.47%  (p=0.008 n=5+5)\nPrecompiledPointEvaluationFail/fuzzcorp-49-Gas=50000-8       355 Â± 0%        60 Â± 0%  -83.10%  (p=0.008 n=5+5)\n```",
        "created_at": "2022-11-30T08:26:27.475000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Quite odd, actually. Contrary to what I said, the fluctuations are larger now\n```\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8    1.19ms Â± 5%    1.48ms Â±11%  +24.01%  (p=0.008 n=5+5)\n```",
        "created_at": "2022-11-30T08:28:19.523000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I did an extra check on that specific one. It is ever so slightly slower, and larger variance, despite a much improved memory usage\n```\nname                                                    old time/op    new time/op    delta\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8    1.13ms Â± 3%    1.16ms Â± 7%     ~     (p=0.529 n=10+10)\n\nname                                                    old mgas/s     new mgas/s     delta\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8      44.1 Â± 3%      43.3 Â± 7%     ~     (p=0.529 n=10+10)\n\nname                                                    old alloc/op   new alloc/op   delta\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8    56.8kB Â± 0%     7.1kB Â± 0%  -87.53%  (p=0.000 n=9+10)\n\nname                                                    old allocs/op  new allocs/op  delta\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8       356 Â± 0%        60 Â± 0%  -83.15%  (p=0.000 n=10+10)\n```",
        "created_at": "2022-11-30T08:30:27.750000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks so much for this!\n\nI'll check out 45 in a bit more detail, and remove the failing test cases which exit early which may be skewing",
        "created_at": "2022-11-30T12:26:36.796000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "How do I parse those last two lines?\n\n```\nname                                                    old alloc/op   new alloc/op   delta\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8    56.8kB Â± 0%     7.1kB Â± 0%  -87.53%  (p=0.000 n=9+10)\n\nname                                                    old allocs/op  new allocs/op  delta\nPrecompiledPointEvaluationFail/fuzzcorp-45-Gas=50000-8       356 Â± 0%        60 Â± 0%  -83.15%  (p=0.000 n=10+10)\n```\n\nIt seems like the same test was ran but with different old and new allocs?",
        "created_at": "2022-11-30T12:27:40.629000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, and the delta is how much the allocs went down",
        "created_at": "2022-11-30T12:28:54.634000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's a tool that can compute the difference between two test runs",
        "created_at": "2022-11-30T12:30:06.123000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Here old is both 56.8kB and 356",
        "created_at": "2022-11-30T12:33:01.016000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "~~I think one is overall and one for one single call, don't know though, haven't looked at the tests (allocs vs alloc)~~ nope number of allocs vs allocated amount as per \u003c@211091239112671234\u003e",
        "created_at": "2022-11-30T12:35:12.869000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I _think_ it's that one is in `kB`, and one is the number of times that allocation is performed (?)",
        "created_at": "2022-11-30T12:45:46.841000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So one is how much was allocated, and one is how many times did allocation happen",
        "created_at": "2022-11-30T12:46:17.142000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The tool is `benchstat` btw. Pretty neat",
        "created_at": "2022-11-30T12:46:52.553000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`n=10+10` means that the stat was based on data with 10 benchmark executions each",
        "created_at": "2022-11-30T12:47:27.768000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`golang.org/x/perf/cmd/benchstat`",
        "created_at": "2022-11-30T12:47:59.578000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ahh okay thanks, super helpful, will look more into that as I would have expected the mgas/s to also increase",
        "created_at": "2022-11-30T12:52:18.119000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yep, me too, it's suprising to see such a _massive_ reduction in allocs but no improvement in speed",
        "created_at": "2022-11-30T12:59:00.108000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Well, I guess, it being what it is, the resource expenditure on allocs is marginal compared to the math it does",
        "created_at": "2022-11-30T13:00:02.095000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thats a good point, also because the test cases that you noted are the ones that give \"invalid kzg proof\" which means that those cases executed the whole function.\n\nI'll do more pprof on the underlying functions and see if I can arrive at a logical answer. The one with the less allocs should be more efficient imo, not only due to the allocs but also due to the optimisations done on the maths",
        "created_at": "2022-11-30T13:05:00.445000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "cc \u003c@898563924440543283\u003e you don't have to open it as  a PR. \u003c@206016661470314496\u003e is back now, and will pick it up from our side",
        "created_at": "2022-11-30T13:11:09.920000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks we will add this benchmark too. Do such benchmarks exist in some common repo? ethereum/benchmarking holds output only, looks like cc: \u003c@552133098075193354\u003e",
        "created_at": "2022-11-30T18:34:22.738000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/ethereum/go-ethereum/pull/26283",
        "created_at": "2022-11-30T20:22:56.418000+00:00",
        "attachments": null
    },
    {
        "author": "dcbuilder",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "At Worldcoin we are working on preparing our infra for devnet v3 by trying to run a local instance of devnet v2. What is the best way to tweak the setup guide to not have to connect to the nodes specified in the guide, and set it up from scratch? referencing https://hackmd.io/@inphi/SJKLtgJXs. Also \u003c@159152274659082240\u003e I see you deleted your prysm branch for devnet v2 any way I can recover it? or what would you suggest to prepare our infra for devnet v3?",
        "created_at": "2022-11-30T20:27:50.588000+00:00",
        "attachments": null
    },
    {
        "author": "roberto.bayardo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oops, misread this as \"open it as a PR\" ðŸ™‚ \u003c@206016661470314496\u003e feel free to close it.",
        "created_at": "2022-11-30T21:16:39.883000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, I saw ðŸ™‚ ... didn't quite know how to react ðŸ™‚",
        "created_at": "2022-11-30T21:29:49.091000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it's \u003c@211091239112671234\u003e's repo ðŸ™‚",
        "created_at": "2022-11-30T21:37:32.226000+00:00",
        "attachments": null
    }
]