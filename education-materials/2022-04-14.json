[
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "A basic question regarding Ethereum clients. Are they required to maintain a full Merkle Tree for the entire state? or Do they maintain a partial tree?",
        "created_at": "2022-04-14T05:27:48.812000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You need a full tree to calculate the state root every block.",
        "created_at": "2022-04-14T05:47:20.679000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "Can such a big tree be stored in RAM?",
        "created_at": "2022-04-14T05:48:37.577000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Depends on how much RAM you have.  ðŸ˜„",
        "created_at": "2022-04-14T05:48:48.039000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "To calculate the state root, you only actually need the mutated branches, which is a *much* smaller set than the full tree.",
        "created_at": "2022-04-14T05:49:13.285000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So one can imagine a design where you keep the recently touched set of branches in RAM or something, and you only go to disk when you need to read in a new one.",
        "created_at": "2022-04-14T05:49:53.268000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That being said, for failure recovery you *do* want to constantly be writing updates to disk.  Maybe you only write every 100th update to disk though, since you can just re-execute the last 100 transactions on failure recovery.",
        "created_at": "2022-04-14T05:50:06.774000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "Hmm... Thanks...",
        "created_at": "2022-04-14T05:50:57.192000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "general",
        "parent": "",
        "content": "I guess Erigon approach is a little different.., Or is it?",
        "created_at": "2022-04-14T05:51:19.564000+00:00",
        "attachments": []
    },
    {
        "author": "yperbasis",
        "category": "general",
        "parent": "",
        "content": "We maintain the upper part of the Merkle-Patrcia trie in the DB.",
        "created_at": "2022-04-14T10:27:00.546000+00:00",
        "attachments": []
    }
]