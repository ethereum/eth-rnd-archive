[
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Hey all, does anyone use the `step` parameter in the `beacon_blocks_by_range` RPC method?",
        "created_at": "2019-12-09T11:58:01.774000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Hey \u003c@498009160982724610\u003e , yeap we do",
        "created_at": "2019-12-09T11:58:24.284000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Are you using it to interleave blocks from multiple peers?",
        "created_at": "2019-12-09T11:58:56.512000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "We use as part of our initial sync routine to distribute requested blocks across peers",
        "created_at": "2019-12-09T11:59:08.272000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeap",
        "created_at": "2019-12-09T11:59:10.769000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "How do you handle a peer sending you an invalid block or an empty slot?",
        "created_at": "2019-12-09T11:59:47.729000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "if its a skip slot its easy to handle, as you can infer it when processing all the received blocks in one go. If a peer cant respond to our request, we redistribute it to our remaining peers",
        "created_at": "2019-12-09T12:01:32.109000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "We dont have any logic currently to ban/score peers for sending us invalid blocks",
        "created_at": "2019-12-09T12:02:12.756000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Also, if you set the start slot to 0 and count to 100.. and skip slot is 2 for example.. and there are 50 skip slots, do you expect blocks over slot 100 to be returned?",
        "created_at": "2019-12-09T12:02:41.432000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yep, so to clarify.. consider 2 peers with interleved blocks. You get 50 blocks and every second one comes from a different peer. When you process them, you have a system of identifying which peer has sent the wrong block and remove it from sync?",
        "created_at": "2019-12-09T12:03:48.837000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "In the case of skip slots, we expect peers not to send us any blocks in that case. So we expect the slot to still be 100. \n\nWe dont have anyway to identify if a peer did send us a bad block",
        "created_at": "2019-12-09T12:07:41.771000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So we aggregate all our interleaved blocks",
        "created_at": "2019-12-09T12:08:15.164000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "And then process them",
        "created_at": "2019-12-09T12:08:20.088000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ok cool. So the RPC response is always in the range `[start_slot, start_slot+count)` correct?",
        "created_at": "2019-12-09T12:08:35.890000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I'm asking because we currently only use step=1 and I should add support to what you guys expect and perhaps make the spec a lil more explicit",
        "created_at": "2019-12-09T12:10:12.720000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Ah no",
        "created_at": "2019-12-09T12:15:52.959000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Actually it would be  \n```\n[Start_slot, start_slot + count *step]\n```",
        "created_at": "2019-12-09T12:16:37.313000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Ah yep, my bad. And skip-slots don't effect this range? and the last block there is non-inclusive right?",
        "created_at": "2019-12-09T12:17:38.353000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The last block is inclusive",
        "created_at": "2019-12-09T12:18:01.964000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Is the spec non-inclusive ?",
        "created_at": "2019-12-09T12:18:13.749000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So if start_slot = 1 and count =100 and step=1.. you would expect 101 blocks to be returned?",
        "created_at": "2019-12-09T12:18:41.606000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Nope skip slots dont affect this range",
        "created_at": "2019-12-09T12:18:52.900000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Would the first slot be inclusive ? If not we might defer there",
        "created_at": "2019-12-09T12:20:28.792000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah. I take the first slot and inclusive and the last as exclusive",
        "created_at": "2019-12-09T12:20:46.517000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Ah k I think we are on the same page then",
        "created_at": "2019-12-09T12:21:21.209000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The count will be the number of blocks returned",
        "created_at": "2019-12-09T12:21:26.475000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So 100 should be correct",
        "created_at": "2019-12-09T12:21:32.958000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Ok, cool thanks. Will conform ðŸ™‚",
        "created_at": "2019-12-09T12:22:28.858000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Great ðŸ˜€",
        "created_at": "2019-12-09T12:36:28.401000+00:00",
        "attachments": null
    }
]