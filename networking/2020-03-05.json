[
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Hey all. Wondering what others are using to check for peer liveness? \nLibp2p has a ping protocol, but it's not spec'd for eth2. We were using that but are thinking of potentially using STATUS to act as the ping. \nCurious what others are using?",
        "created_at": "2020-03-05T12:57:35.141000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "technically, if you're gossiping with the peer, can't you make an assumption about traffic / bytes on wire and some timeout?",
        "created_at": "2020-03-05T12:59:39.846000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Sure. But couldn't we have peers that are not on any of our subscribed topics, so won't receive traffic?",
        "created_at": "2020-03-05T13:01:02.578000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I guess we should get at least get gossip on the main channels",
        "created_at": "2020-03-05T13:01:44.871000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Prysm fetches status from all connected peers periodically, and drops them if they don't respond",
        "created_at": "2020-03-05T13:02:31.354000+00:00",
        "attachments": null
    },
    {
        "author": "dryajov",
        "category": "Consensus Layer",
        "parent": "",
        "content": "That's actually a bit of a problem in libp2p, there is no way of actively detect dead peers, as \u003c@498009160982724610\u003e has noted. Status could work, but it might be too heavy for that.",
        "created_at": "2020-03-05T13:03:13.574000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "^ I was thinking this. \nAlso we haven't really discussed the option of peers supporting gossip and not rpc",
        "created_at": "2020-03-05T13:03:39.656000+00:00",
        "attachments": null
    },
    {
        "author": "dryajov",
        "category": "Consensus Layer",
        "parent": "",
        "content": "One way of doing it, is to have a ping when the peer has been silent for some time in order to not to spam the peer too heavyly",
        "created_at": "2020-03-05T13:04:10.969000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah, so the question becomes, do we use a seperate protocol, or try use one of the ones we have specd",
        "created_at": "2020-03-05T13:04:57.882000+00:00",
        "attachments": null
    },
    {
        "author": "dryajov",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I think a separate protocol is more flexible, how heavy is the status message and do you have to send it periodically, if yes then that could work",
        "created_at": "2020-03-05T13:06:25.630000+00:00",
        "attachments": null
    },
    {
        "author": "dryajov",
        "category": "Consensus Layer",
        "parent": "",
        "content": "If not, I'd say it probably end up being too chatty",
        "created_at": "2020-03-05T13:06:44.455000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Fetching status periodically is useful for us as we use the information from it to decide who to sync against if we fall behind.  And if a fork occurred we would use it to drop peers that are on a different fork",
        "created_at": "2020-03-05T13:07:28.448000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "How often do you status? Is it a fixed time or dependent on some peer heuristic?",
        "created_at": "2020-03-05T13:08:07.593000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "*Think* it's twice an epoch but not 100% on that",
        "created_at": "2020-03-05T13:12:31.729000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah cool thanks. I think I'll adopt this approach for the time being, unless we decide to do a ping-like protocol",
        "created_at": "2020-03-05T13:13:20.703000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus Layer",
        "parent": "",
        "content": "",
        "created_at": "2020-03-05T18:27:08.965000+00:00",
        "attachments": null
    }
]