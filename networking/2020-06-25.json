[
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Hey all, \nCan everyone post their extended goodbye numbers, we may as well spec them so that we can interpret other clients goodbye's. \nI'm using (but can change to whatever) \n250 = BadScore (we disconnect you if you have behaved badly)\n251 = Banned (You got banned)\nI saw Teku were using a number that we didn't know of, curious if others have their own goodbye's also",
        "created_at": "2020-06-25T02:49:40.578000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I might add some others like \n252 = Stale (Cycle peers to let new ones in and you got disconnected)\n253 = Full (Have reached max peer count)",
        "created_at": "2020-06-25T02:52:56.413000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Don't forget 418: I'm a teapot",
        "created_at": "2020-06-25T02:53:31.046000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "oh yeah of course, its high on our priority, 418 = I'm a teapot",
        "created_at": "2020-06-25T02:54:13.788000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "everytime we send a goodbye we should do a coin flip to send 418",
        "created_at": "2020-06-25T02:54:36.430000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "We have 129 - too many peers and 128 - failed to verify network (I think that's if the peer fails to respond to our initial requests to confirm their finalized state matches ours)",
        "created_at": "2020-06-25T02:55:28.447000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "oh awesome! good to know. I think we've hit one of those recently",
        "created_at": "2020-06-25T02:55:55.693000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Our too many peers is a bit like stale as well - we can send it even if you've been connected for a while because we got new peers that pushed us over the peer limit and we decided they were better than you.",
        "created_at": "2020-06-25T02:57:22.635000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ahah yeah. I guess I could combine Full and Stale. I imagine Full we would send when being dialed, and Stale we send spotaneously. In either case, I'll make sure our Full is 129 to match you guys",
        "created_at": "2020-06-25T02:58:21.315000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "That makes sense, we haven't had any extra goodbye message codes because of the fact that the other clients wouldn't understand it lol",
        "created_at": "2020-06-25T03:03:44.769000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "on this \n\u003e 250 = BadScore (we disconnect you if you have behaved badly)\n\u003e 251 = Banned (You got banned)\nThis would be the same no ?",
        "created_at": "2020-06-25T03:03:58.441000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "if a peer tries to reconnect, we would end up disconnecting anyway because they have a bad score",
        "created_at": "2020-06-25T03:04:51.717000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "No, they are different for us.. because peers can do different things.. depending on what you've done, we may disconnect you.. if it's not severe, we let you reconnect if you want (provided we have enough spots available for you).",
        "created_at": "2020-06-25T03:06:43.062000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Banning kicks you for quite an amount of time.",
        "created_at": "2020-06-25T03:07:13.041000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "gotcha, so if they reconnect back , you wont hold their previous behaviour against them depending on their score ?",
        "created_at": "2020-06-25T03:07:47.576000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah we will.. they can reconnect, but will have to work harder to increase their score, if they do more  bad things, they'll likely get banned",
        "created_at": "2020-06-25T03:08:19.953000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "gotcha makes sense",
        "created_at": "2020-06-25T03:08:33.643000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ü§∑‚Äç‚ôÇÔ∏è - This is initial logic, will be very much exerpimenting with the scoring with the testnets, so nothing is set in stone yet",
        "created_at": "2020-06-25T03:09:04.374000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "also how does peer scoring work right now in lighthouse ? what values/actions do you guys use\nwhen deciding how to positively/negatively score a peer",
        "created_at": "2020-06-25T03:09:23.685000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "There's a whole heap of things that can go wrong. Some are verifibly malicious, others could be due to chain pruning etc and forks.. so for example if we ask for a block with a hash and you respond with some other block that doesn't match that hash, that's bad. However if you return that you don't know of a block that one of your attestations referenced, it oculd be that you've pruned that block, so you get scored less harshly... Theres a whole heap in sync that  can go wrong also",
        "created_at": "2020-06-25T03:11:06.934000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Encoding errors and junk sent.. or duplicates on gossip, things like these",
        "created_at": "2020-06-25T03:11:34.004000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "interesting, that makes sense. There are definitely some things that we can mark as malicious and appropriately score them, while for others less so. Are you guys planning on using the peer scoring in gossipsub 1.1 to influence your global peer score ?",
        "created_at": "2020-06-25T03:17:14.422000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "not sure. It's very experimental at the moment. The gossipscore should be good for handling malicious attacks on gossip, we might include it in, but weight it very low",
        "created_at": "2020-06-25T03:18:10.880000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "not really thought through the consequences of using gossipscore yet",
        "created_at": "2020-06-25T03:18:39.542000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah I was looking at using gossip scoring, but still haven't found a way to not get a peer negatively scored when syncing.",
        "created_at": "2020-06-25T03:25:46.960000+00:00",
        "attachments": []
    },
    {
        "author": "agemanning",
        "category": "Consensus Layer",
        "parent": "",
        "content": "If you wanted to, you could identify syncing peers via range requests and add them to the allow list (forgot the gossipsub name)",
        "created_at": "2020-06-25T03:43:47.475000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "which of these numbers do you actively use in logic? else, we can add a string like in the request error reason - basically, whatever number the peer sends, the logic on the oher side will be similar: reconnect later (ie even if a peer sends \"you got banned\", the rational thing for me to do is to try and reconnect (because it might have been a bug in that client, they might have restarted etc)",
        "created_at": "2020-06-25T07:08:22.968000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "thus, it's mostly a debugging help what happened and in that case, we don't really need numbers",
        "created_at": "2020-06-25T07:08:45.010000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "another example: \"irrelevantnetwork\" is something I can detect without the other client telling me, in a goodbye: we do a status exchange",
        "created_at": "2020-06-25T07:09:40.992000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "point is, often these error numbers end up just being volumnious annoyances in the spec that people need to implement but don't really end up using actively, beyond displaying them",
        "created_at": "2020-06-25T07:10:34.339000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus Layer",
        "parent": "",
        "content": "On using NOISE as the default instead of SECIO , I do not have an issue with it. Although I would like to confirm that NOISE works as expected with other clients before Altona's genesis, otherwise we would have a messy altona launch üôÇ",
        "created_at": "2020-06-25T15:01:23.227000+00:00",
        "attachments": []
    }
]