[
    {
        "author": "zsfelfoldi",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I am reading up on the latest design plans concerning light clients and I have a question: while it seems to make sense that there is a separate \"light client committee\", how is its correctness guaranteed/incentivized? In case of attestations, there is a reward for attesting on the canonical chain and there is slashing for double attestation. Will the light committee work similarly? Is is somehow enforced that the validator's light client vote should always be the same head block as the one it's attesting to? And why do light client votes only contain the current head? Why not source/target checkpoints, just like in case of regular attestations?\nI guess if it's enforced by slashing that your light vote should always equal your latest attestation target (and you only get the reward for a given slot if both of your signatures are in the final canonical aggregates) then that answers my questions but I haven't found a reference to such a requirement yet.",
        "created_at": "2021-03-26T13:36:19.477000+00:00",
        "attachments": null
    },
    {
        "author": "zsfelfoldi",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Btw why has the original design (where light clients can follow the attestations of a random shard) been changed? It seemed to make sense to me and it did not require an extra mechanism.",
        "created_at": "2021-03-26T13:37:56.221000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "members of the sync committee are rewarded for getting valid contributions on-chain (along w/ the proposer of the block)",
        "created_at": "2021-03-26T17:40:13.137000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "a contribution is only valid if it indeed references the prior block with respect to that chain",
        "created_at": "2021-03-26T17:40:46.816000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "there is no slashing or mechanism that prevents or discourages a validator from signing two conflicting chains",
        "created_at": "2021-03-26T17:41:45.311000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "much of the security is relying on an honest majority assumption backed by the size of the sync committee",
        "created_at": "2021-03-26T17:42:46.149000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if we assume that a majority of the entire validator set is honest then sampling a committee above a certain size also implies the committee is honest",
        "created_at": "2021-03-26T17:43:44.285000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the size of the sync committee (~8 times the size of an attestation committee) along w/ the frequency of rotation (~1 day) also guards against adaptive attacks on the sync committee",
        "created_at": "2021-03-26T17:44:58.352000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and re: light clients of shards, i don't see why we could not still have that design -- the sync committees in altair just allow for light client construction following the beacon chain (where you can subsequently get proofs about any facts of the shards that you would like)",
        "created_at": "2021-03-26T17:48:19.012000+00:00",
        "attachments": null
    },
    {
        "author": "zsfelfoldi",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks for the detailed reply. Just to be sure that I understand correctly: is the \"sync committee\" the same as the \"light client committee\"? And it the \"attestation committee\" the same as the \"shard committee\"?\nAbout the honest majority assumption: as far as I understand, we can have that assumption because there is a severe punishment mechanism for publishing misleading attestations that deactivates and slashes the offenders. If slashing does not work for light client committee signatures then I think it's entirely possible that an attacking group publishes correct attestations but incorrect light client votes for an extended period. So I believe that on the long term we should have a slashing mechanism for voting differently in the two committees. Probably it's not urgent though and it's something that we can easily add later.",
        "created_at": "2021-03-26T19:11:12.842000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "definitely -- so we have \"sync committees\" in altair and they can be used to build efficient light clients so we can go ahead and also call them \"light client committees\"",
        "created_at": "2021-03-26T19:38:49.359000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "then we have \"beacon committees\" or we can also call them \"attestation committees\" but \"beacon\" is a bit more precise imo bc their job is to attest to the beacon chain + shard chains",
        "created_at": "2021-03-26T19:39:58.750000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "there is a third committee type (although the exact specs aren't entirely finalized) that changes more slowly w/ the intent to maintain stability on each shard -- the \"persistent committee\" or \"shard committee\"",
        "created_at": "2021-03-26T19:41:39.784000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah, there is room to explore some kind of slashing",
        "created_at": "2021-03-26T19:42:27.894000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the big thing will just be keeping in-protocol complexity down for any type of disincentive",
        "created_at": "2021-03-26T19:42:51.968000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "a nearer-term idea is to just strengthen randomness (e.g. VDFs on top of the RANDAO mechanism) and use a sufficiently large/rotating sync committee (like we have in altair)",
        "created_at": "2021-03-26T19:43:39.642000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so one thing to note is that the light client protocol does admit \"finality proofs\"",
        "created_at": "2021-03-26T19:44:57.925000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so while an attacker could try to provide conflicting finality data to a light client that would imply slashable behavior that (allegedly) is captured by the broader network of full nodes",
        "created_at": "2021-03-26T19:45:51.493000+00:00",
        "attachments": null
    },
    {
        "author": "zsfelfoldi",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I see. So the \"beacon/attestation committees\" create the links between beacon and shard blocks and they are frequently shuffled so that individual validators switch shards frequently. On the other hand, \"shard committees\" stick to each shard for a longer period (I guess the shard block proposers will be selected from these committees). Is that correct?",
        "created_at": "2021-03-26T21:36:11.723000+00:00",
        "attachments": null
    },
    {
        "author": "zsfelfoldi",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "About the \"finality proof\": how does finality work for light clients? Is this documented somewhere? The Casper FFG finality condition says that a justified block becomes finalized if there is a supermajority link to its direct child. But as far as I understand that's too expensive to directly verify for a light client (that's why there is the smaller \"light committee\").",
        "created_at": "2021-03-26T21:36:29.858000+00:00",
        "attachments": null
    }
]