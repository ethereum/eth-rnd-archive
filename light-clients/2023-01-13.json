[
    {
        "author": "nashatyrev",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You can actually use `Union[null, FieldType]`  to represent `Optional`",
        "created_at": "2023-01-13T13:04:25.216000+00:00",
        "attachments": null
    },
    {
        "author": "nashatyrev",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But it looks more like a workaround TBH",
        "created_at": "2023-01-13T13:05:22.890000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Unions are not too well supported among SSZ implementations, and are not currently used anywhere across core Ethereum",
        "created_at": "2023-01-13T13:19:54.608000+00:00",
        "attachments": null
    },
    {
        "author": "robzajac",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@881905303011086387\u003e why is the SSZ format unaffected? if we serialize `LightClientUpdate`  per  https://github.com/ethereum/beacon-APIs/blob/master/apis/beacon/light_client/updates.yaml#L37 which will contain `LightClientHeader`",
        "created_at": "2023-01-13T18:12:27.654000+00:00",
        "attachments": null
    },
    {
        "author": "robzajac",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "separate question, how commonly is the SSZ response used over JSON?",
        "created_at": "2023-01-13T18:13:05.769000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "When the entire object is fixed-size, SSZ will simply send each field in sequence.\nAs for `hash_tree_root()`, because the extra container only has a single item, there is no extra tree layers being generated, so root is the same.",
        "created_at": "2023-01-13T18:30:54.616000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "SSZ is the only format used on libp2p, and is also recommended on REST in any situation, as the response size is much smaller.\nthe JSON format is used when easy access from JavaScript is needed, and for developers to better investigate issues.\nOn REST, you can select SSZ format with a HTTP `Accept` header",
        "created_at": "2023-01-13T18:32:52.138000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Note that for the `/events` stream, only JSON is supported due to limitation with HTTP Server sent events",
        "created_at": "2023-01-13T18:33:12.411000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "At least for Nimbus, `/events` encoding was bugged until yesterday, so I doubt anyone was using that one yet",
        "created_at": "2023-01-13T18:33:54.457000+00:00",
        "attachments": null
    },
    {
        "author": "robzajac",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ah makes sense, after the change the object is still the same on the wire\ngood to know re: SSZ benefits in REST\nthanks!",
        "created_at": "2023-01-13T18:44:18.160000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Exactly. SSZ doesn't encode the structure itself, just the content",
        "created_at": "2023-01-13T18:47:57.275000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "JSON is very poor for compressing all those sha256 hashes. it sends them as a hex string on the wire, needing 2 characters for each byte of data",
        "created_at": "2023-01-13T18:48:39.124000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "BTW: For the light server you will also need the two topics here:\nhttps://github.com/ethereum/beacon-APIs/blob/master/apis/eventstream/index.yaml",
        "created_at": "2023-01-13T19:31:27.214000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And sorry for the noise with the `beacon` wrapper while you are implementing it. Hope it's not too painful",
        "created_at": "2023-01-13T19:32:09.939000+00:00",
        "attachments": null
    },
    {
        "author": "robzajac",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks I must have missed these. when are they consumed?",
        "created_at": "2023-01-13T21:26:16.469000+00:00",
        "attachments": null
    },
    {
        "author": "robzajac",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "no worries, should be easy to change ðŸ™‚",
        "created_at": "2023-01-13T21:27:33.975000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "just an alternative to polling. e.g., a wallet could use this endpoint to stay up to date w.r.t. latest header",
        "created_at": "2023-01-13T21:40:16.026000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "also useful in case you don't want to miss intermediate headers",
        "created_at": "2023-01-13T21:40:50.632000+00:00",
        "attachments": null
    }
]