[
    {
        "author": "80raghavendra",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I understand that Light clients need to specify a Ethereum Server end point. Where to specify this? Can we configure on how often we PULL updates from Ethereum Server? Or is it the case that the Server needs to PUSH updates?",
        "created_at": "2023-07-25T14:50:09.908000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Depends on what software you are using. Light client data is available on libp2p (decentralized) and REST (via beacon-API). You pull the full `LightClientUpdate` to track the sync committee, and can use either pull or push mechanisms for following `LightClientFinalityUpdate` and `LightClientOptimisticUpdate`.\nSee https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/light-client.md\n\nFor libp2p, no server needs to be specified. An example could be https://nimbus.guide/el-light-client.html\nFor REST, a server needs to be specified, but all information sent by the server is verifiable. The server is only trusted for data availability. Example: https://eth-light.xyz",
        "created_at": "2023-07-25T14:57:39.530000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thank you. A newbie question: How does one connect to a P2P network so that the updates are pushed rather than pulled?",
        "created_at": "2023-07-25T15:01:39.230000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the pull/push mechanism is also available via REST (pull via HTTP call, and push via HTTP EventSource)",
        "created_at": "2023-07-25T15:04:13.642000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You can use a libp2p library to connect to the network. Then, the equivalent to the push mechanism are the gossip topics, and the pull mechanism is req/resp",
        "created_at": "2023-07-25T15:04:47.372000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/p2p-interface.md",
        "created_at": "2023-07-25T15:05:00.199000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So, we can set up our own BeaconNode and allow it to be a REST endpoint for our light clients. Correct?",
        "created_at": "2023-07-25T15:05:18.549000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "REST:\nhttps://ethereum.github.io/beacon-APIs/#/Beacon/getLightClientBootstrap\nhttps://ethereum.github.io/beacon-APIs/#/Beacon/getLightClientUpdatesByRange\nhttps://ethereum.github.io/beacon-APIs/#/Beacon/getLightClientFinalityUpdate\nhttps://ethereum.github.io/beacon-APIs/#/Beacon/getLightClientOptimisticUpdate\nhttps://ethereum.github.io/beacon-APIs/#/Events/eventstream (push)",
        "created_at": "2023-07-25T15:05:59.360000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yes",
        "created_at": "2023-07-25T15:06:40.550000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "not all beacon nodes support light client endpoint. lodestar and nimbus support it, I think prysm also has it or is working on it",
        "created_at": "2023-07-25T15:07:00.340000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thanks. I understand",
        "created_at": "2023-07-25T15:07:21.263000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "One more question. Suppose I want to validate an event e on Ethereum. Then one way could be to set up a node and run a Beacon client and Ethereum execution full node client on that node. Set up a light client and subscribe to the light client updates. Additionally subscribe to the events of my interest from my Ethereum execution full node client. And validate that my interested events are correct by checking the receipts_root and the Merkle proofs for it.  Is this a (1) correct and (2) efficient way to go about it?",
        "created_at": "2023-07-25T15:16:37.761000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Sounds good, yeah. Until EIP-6466, you will have to obtain the full receipt + merkle proof within receipts_root. With EIP-6466, you can obtain proof just for an individual event.",
        "created_at": "2023-07-25T15:19:06.414000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And, there is no standardized proof endpoint yet, so if you want to go with public APIs, you will have to obtain _all_ receipts in a block, then check them against receipts_root.\nStandardizing before EIP-6466 doesn't make too much sense, as the proof format will change.",
        "created_at": "2023-07-25T15:20:01.214000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I thought receipt = event. But looks like it is not. Receipt can contain many events?",
        "created_at": "2023-07-25T15:21:42.701000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Receipt contains all info from a single transaction. There may be mulitple operations within a transaction",
        "created_at": "2023-07-25T15:22:32.486000+00:00",
        "attachments": []
    },
    {
        "author": "80raghavendra",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I see. Thanks for all the info",
        "created_at": "2023-07-25T15:23:08.569000+00:00",
        "attachments": []
    }
]