[
    {
        "author": "claravanstaden",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://prestwich.substack.com/p/altair?utm_source=substack\u0026utm_medium=email\u0026utm_content=new-from-twitter-with-post Any thoughts on this? Building a bridge using the Altair sync protocol and this raises some worrying points.",
        "created_at": "2023-01-25T06:11:55.355000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It's pretty clear that the eth core team doesn't like bridges",
        "created_at": "2023-01-25T06:30:42.608000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Otherwise they'd have added misbehaviour detection and slashing mechanics to the sync committee",
        "created_at": "2023-01-25T06:31:01.259000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "IMO we should make sync committee messages slashable in a future hard fork. I think \u003c@881905303011086387\u003e had a PR for this but I canâ€™t find it.\n\n(Iâ€™m also in favour of making aggregate attestations slashable to help prevent fork choice view splits, but thatâ€™s another story).",
        "created_at": "2023-01-25T09:13:51.370000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think this is the branch https://github.com/etan-status/consensus-specs/commit/lc-slashing",
        "created_at": "2023-01-25T09:16:23.835000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "We literally discussed this yesterday.  From the scope, slashing is probably an E-fork thing (the one after Deneb/Cancun (EIP4844))",
        "created_at": "2023-01-25T09:22:19.300000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Brilliant! I'm sorry I couldn't be there",
        "created_at": "2023-01-25T09:23:40.314000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Meeting notes here",
        "created_at": "2023-01-25T09:23:57.847000+00:00",
        "attachments": null
    },
    {
        "author": "claravanstaden",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thanks \u003c@881905303011086387\u003e ! From a perspective of a bridge, I'm wondering if making sync committee messages slashable would make a significant difference in securing the light client? Ie if the max slashable amount for a sync committee is 512 x 32 ETH = 16 384 ETH = around $25 million, so if the bridge holds a larger value the light client protocol would no longer serve as an effective deterrent? That is also assuming the full validator balance is slashable (ie slashing penalty could be less, like 1ETH).",
        "created_at": "2023-01-25T09:32:05.501000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If slashing is implemented, then with a challenge window you can detect equivocation and report that to the beacon chain (see https://medium.com/composable-finance/trustless-bridging-ii-byzantine-fault-tolerance-591e8b2d196e). \n\n\nIf it's a data withholding attack then you'll need need an emergency shut down button (All bridges should have this)",
        "created_at": "2023-01-25T10:11:35.652000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you don't need _slashing_ per se, you can track equivocations in the bridge and just handle the logic there",
        "created_at": "2023-01-25T12:49:16.764000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we would have to answer what happens when the entire committee is corrupted but that is a different question",
        "created_at": "2023-01-25T12:49:51.418000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the current protocol has an honest majority assumption and the only way to get around this is some kind of fault proof of the entire ethereum protocol",
        "created_at": "2023-01-25T12:50:57.475000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For high value use cases, you could still combine this with existing security methods, e.g., a multisig.\nA multisig takeover would no longer be solely sufficient to take-over the bridge, you would also have to identify and take over a supermajority of sync committee members.\n\nFurthermore, you could require the bridge operators that can submit light client data to lock an additional stake (flexible amount), that can be made subject to additional slashing in case of abusing the protocol. As in, submitting sync committee slashing evidence would also slash that additional stake. The bridge operators would have to cross-check the sync committee messages against a locally fully validated node.",
        "created_at": "2023-01-25T12:59:17.993000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If there's no repercussions for misbehaviour, then we're indirectly incentivizing malicious behaviour",
        "created_at": "2023-01-25T13:01:11.285000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "They only need to succeed once",
        "created_at": "2023-01-25T13:01:24.543000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Problem with these kinda hybrid solutions though is that although the bridge becomes more secure against fraud, it gets less secure against censorship/being shut down since the multi-sig likely gets control over availability of the bridge.",
        "created_at": "2023-01-25T13:08:28.415000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Isn't there also an issue where there is no equivocation to track/detect, ie, the sync committee just produces a single fraudulent block header (with no valid header, and so no equivocation to detect) and intentionally disregards their Ethereum duties to fool the bridge?",
        "created_at": "2023-01-25T13:10:01.455000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I suppose at least with slashing for fraudulent blocks, if there's then a valid sync committee in a later block, then that slashing and fraudulent block can be proven to the light client even when the slashing is not related to equivocation",
        "created_at": "2023-01-25T13:12:37.821000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Though latency to finality on the light client becomes much worse now, since it needs to wait for some additional future block to detect potential future slashing",
        "created_at": "2023-01-25T13:13:14.893000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "(and ofc there's the risk of a compromised sync committee over multiple blocks, so the proof-of-slash is hidden from the light client longer term by the sync committees)",
        "created_at": "2023-01-25T13:13:27.068000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, I was running into the same issue when sketching up a slashing mechanism. If the entire committee ever only signs a single block, and that is not part of the history, then it is not possible to punish. However, the entire committee will forfeit the entire sync committee rewards (and will also additional leak about the equal amount by missing their duties).",
        "created_at": "2023-01-25T13:14:01.313000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes, but the new sync contribution is created by a new sync committee, so you can't really deduce which one is the incorrect one",
        "created_at": "2023-01-25T13:14:50.636000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "unless there's a contract on-chain that can verify and incentivize fraud ðŸ˜›",
        "created_at": "2023-01-25T13:15:11.972000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so, incentivize committees to collude after they've been created, rather than before",
        "created_at": "2023-01-25T13:15:32.810000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but honest majority assumption is a lot stronger over multiple blocks, so safer to rely on in that case",
        "created_at": "2023-01-25T13:15:45.761000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes, sure, the bridge could decide to only act if it receives multiple compatible sync contributions per period",
        "created_at": "2023-01-25T13:16:09.254000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Like, if you only ever receive a single contribution during a day, assume something is fishy and go into failsafe mode",
        "created_at": "2023-01-25T13:16:28.606000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Overall, I'm just saying, the current protocol is not yet optimal, the slashing will not make it optimal, but it still makes sense to gradually increase security and usability.\nFor now, hybrid use case still beats the plain multisig on security, but doesn't improve on censorship.",
        "created_at": "2023-01-25T13:17:35.672000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "would it not be safe to assume that if:\n - first sync contribution is created\n - no other later sync contribution contains evidence that the first contribution was slashed\n - some amount of time has passed\n\nthen the first contribution is valid?",
        "created_at": "2023-01-25T13:38:01.311000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The sync committee can always just go completely rogue and sign a malicious chain during all 8192 slots. As long as they only sign a single chain, they can't be slashed.",
        "created_at": "2023-01-25T13:43:01.284000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "As in, operating a validator that is synced to a wrong chain is not slashable in Ethereum. Only contradicting oneselves is",
        "created_at": "2023-01-25T13:44:04.380000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah, so then \"some amount of time\" in the above example needs to be really long, ie, days/weeks, so in practice it doesn't really work",
        "created_at": "2023-01-25T13:44:11.437000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ah i think the above example also assume that this could become slashable",
        "created_at": "2023-01-25T13:45:32.808000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, right now, validators can't be slashed for just syncing to the wrong head (e.g., malicious checkpoint).\nYou are asking for making that concept stricter overall in the context of sync committee duties",
        "created_at": "2023-01-25T13:47:59.071000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "slashing on a single fraudulent block sounds nontrivial though, since it'd require the slashing system to understand the EVM state and state transition logic too",
        "created_at": "2023-01-25T13:48:10.517000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, would prefer to split those two kinds of slashing. First, focus on the slashings that follow the same concept of only slashing on self-contradiction, but still allowing syncs to incorrect head.",
        "created_at": "2023-01-25T13:48:53.579000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Aka data withholding attack",
        "created_at": "2023-01-25T13:51:31.913000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah - actually maybe incorrect-head slashing wouldn't be too challenging to add a slashing condition for later since it would just require comparing the sync-committee head to the real consensus head",
        "created_at": "2023-01-25T13:51:33.695000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Slashing won't make it better, but it will at least prevent equivocation",
        "created_at": "2023-01-25T13:54:40.168000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah but the emergency shutdown solution for a data withholding attack introducing a griefing vector, unless you can prove the data withholding through a full consensus proof rather than a sync committee proof, to slash false alarms?",
        "created_at": "2023-01-25T13:54:48.335000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Emergency shutdown should be done with some sort of admin keys",
        "created_at": "2023-01-25T13:55:40.656000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Because there's literally no proof for it",
        "created_at": "2023-01-25T13:55:58.632000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "meh",
        "created_at": "2023-01-25T13:56:21.305000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Maybe if data availability proofs is introduced to the sync committee",
        "created_at": "2023-01-25T13:56:27.971000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Then it becomes impossible for data withholding attacks",
        "created_at": "2023-01-25T13:56:42.595000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah but you could prove a false alarm by proving correct chain after the shutdown",
        "created_at": "2023-01-25T13:56:45.202000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "How do you prove that the data is available for this \"correct\" chain",
        "created_at": "2023-01-25T13:57:32.980000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It's not elegant, but it'll save billions of dollars",
        "created_at": "2023-01-25T13:57:58.002000+00:00",
        "attachments": null
    },
    {
        "author": "musnit",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah you'd maybe fallback to a true PoS light client proof rather than altair sync committee proof for this. Or tbh even just governance/vote to prove false alarm could be an improvement *(this could then allow anyone to emergency shutdown, for a price/stake that they risk to the false alarm governance)*",
        "created_at": "2023-01-25T13:59:57.633000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Not everyone should be able to initiate shutdown",
        "created_at": "2023-01-25T14:00:54.450000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Just admins",
        "created_at": "2023-01-25T14:01:04.838000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Maybe we can add data availability proofs to sync committee \u003c@881905303011086387\u003e ?",
        "created_at": "2023-01-25T14:01:38.553000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "EIP-4848 should be deployed before the e-fork right?",
        "created_at": "2023-01-25T14:02:12.478000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "That and slashing and we have a really good bridge support",
        "created_at": "2023-01-25T14:03:01.360000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "L2s will need this as well",
        "created_at": "2023-01-25T14:03:12.770000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "EIP-4884 is D-fork",
        "created_at": "2023-01-25T14:05:28.458000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes, slashing will need exhaustive testing, slashing protection, and thorough reviews, but EIP-4884 is already more advanced (going through devnets already). So, slashing would be the one after, to not delay EIP-4884",
        "created_at": "2023-01-25T14:06:14.647000+00:00",
        "attachments": null
    },
    {
        "author": "ncitron",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Would slashing even be that useful since you can only slash members of the sync committee, which are relatively few? The sync committee only represents ~16k ETH, so if hacking a LC bridge yields more than $30M or so, it's advantageous to slash yourself.",
        "created_at": "2023-01-25T15:32:35.190000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Here's a better way to think about it, There's only 2 ways the sync committee can misbehave. They double sign (equivocation), or data withholding.\n\nIn the first case, double signing is very easily detectable. You present a light client with two headers that have the same height but two different hashes and valid signatures for both. You can dis-incentivise this behaviour by allowing anyone report this equivocation back to the beacon chain.\n\nIn the second case, it's unfortunately undetectable in the cryptographic sense. Unless we add data availability commitments to sync committee.",
        "created_at": "2023-01-25T15:43:49.337000+00:00",
        "attachments": null
    },
    {
        "author": "ncitron",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Isn't there a third case where you sign an invalid block? This can't be detected",
        "created_at": "2023-01-25T15:44:55.525000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "that's still data withholding",
        "created_at": "2023-01-25T15:45:16.541000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "because you can't gossip that block to full nodes, they'd reject it and slash you",
        "created_at": "2023-01-25T15:45:33.988000+00:00",
        "attachments": null
    },
    {
        "author": "ncitron",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah exactly, so in this case you can wreck a bridge",
        "created_at": "2023-01-25T15:46:09.855000+00:00",
        "attachments": null
    },
    {
        "author": "ncitron",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "At the cost of 30M if u slash for this offense",
        "created_at": "2023-01-25T15:46:43.848000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah for sure, the stop gap for that is admin keys that detect data withholding attacks and freeze the bridge",
        "created_at": "2023-01-25T15:46:59.998000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But ideally, this would be prevented by the ethereum protocol itself by forcing sync committee commit to the full block data",
        "created_at": "2023-01-25T15:47:38.857000+00:00",
        "attachments": null
    },
    {
        "author": "ncitron",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "How can you enforce that beyond slashing or some (not very feasible) zk stuff",
        "created_at": "2023-01-25T15:49:05.934000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Enforce data availability?",
        "created_at": "2023-01-25T15:49:29.395000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "beyond committing to the data, there's nothing much that can be done",
        "created_at": "2023-01-25T15:50:02.229000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "data commitments won't be zk, it'll still be the same 2d erasure coded, kzg commitments eip-4844 already uses",
        "created_at": "2023-01-25T15:50:57.062000+00:00",
        "attachments": null
    },
    {
        "author": "ncitron",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Oh I just meant zk to provide a proof that each state transition is valid which is obviously not feasible",
        "created_at": "2023-01-25T15:52:49.509000+00:00",
        "attachments": null
    },
    {
        "author": "seunlanlege",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah that's super far out",
        "created_at": "2023-01-25T15:53:13.861000+00:00",
        "attachments": null
    }
]