[
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, relying on infura seems really unnecessary and we should definitely not introduce it for things that did not need it before",
        "created_at": "2021-04-29T21:43:39.995000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Why not just stick state files on a traditional torrent protocol?",
        "created_at": "2021-04-29T21:43:54.958000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think the point is that you can get the initial state from anywhere - Teku takes any http url.  The only issue is that despite me repeatedly saying how great it would be if block explorers and other places made a state available, Infura is the first to actually do so.",
        "created_at": "2021-04-29T21:50:59.788000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So it's not a problem of could we get this some other way, it's a problem of someone actually making that way happen.",
        "created_at": "2021-04-29T21:51:13.798000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Why can't we just make a proper decentralized solution and make that the default?",
        "created_at": "2021-04-29T22:09:13.319000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It could just be a torrent magnet link if desired",
        "created_at": "2021-04-29T22:09:27.771000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Mainly because no one has.  But I'm not sure a torrent is a particularly good solution because you need to update the state quite regularly.  The state itself isn't that big so getting it from a http endpoint is very well suited technically, but other protocols would likely be fine too.",
        "created_at": "2021-04-29T22:11:58.651000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For weak subjectivity syncing, you can focus on syncing states of one particular slot every week",
        "created_at": "2021-04-29T22:12:30.745000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So you would only have one new file per week to distribute",
        "created_at": "2021-04-29T22:12:46.008000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ultimately you always come back to the question of how do you know which state to get? If you get it from p2p you wind up trusting the peers you happen to find, if you get a hash of the state from somewhere, why not just get the whole state from there.  If you get it from a torrent how do you know which torrent is the right one etc.",
        "created_at": "2021-04-29T22:12:57.421000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And if you get the hash from light client protocol, how do you resolve the weak subjectivity problem to know which light clients to trust.",
        "created_at": "2021-04-29T22:13:17.390000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e if you get a hash of the state from somewhere, why not just get the whole state from there\n\nI think the main issue here is just that the set of users who can contribute their trust to a hash is much greater than the set of users who are capable of serving state",
        "created_at": "2021-04-29T22:13:35.863000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Especially to large numbers of users",
        "created_at": "2021-04-29T22:13:43.987000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And so if we promote a norm that you get the state from the same place you get the state hash, that naturally leads to more centralized trust models from the state hash",
        "created_at": "2021-04-29T22:14:03.989000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\"if we already trust user X for Y, why not just lean on that assumption further and trust X for Z\" is exactly the kind of reasoning that leads to all the centralized chains we see today",
        "created_at": "2021-04-29T22:15:00.155000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm just not seeing the difference between get a state from somewhere convenient and then verify the hash against some decentralised protocol vs get a hash from some decentralised protocol and then hope it's actually available from somewhere.  Both wind up with the same level of verification but the first way gets you a more recent state more easily.",
        "created_at": "2021-04-29T22:17:04.613000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "In the first case, \"somewhere convenient\" turns into a liveness assumption",
        "created_at": "2021-04-29T22:17:30.383000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e and then hope it's actually available from somewhere\n\nI don't think this is what I'm advocating for. I'm advocating for downloading it from bittorrent and checking it",
        "created_at": "2021-04-29T22:18:12.869000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "liveness of bittorrent is more likely than liveness of [centralized provider X], because centralized provider X can always be one of the seeders on bittorrent",
        "created_at": "2021-04-29T22:18:39.147000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm totally fine with someone getting a more distributed system up and running, but I've heard talk about how it could be done for a couple of years now and it still doesn't exist.  I really don't want to let perfect be the enemy of good though.  Syncing from genesis is vulnerable to weak subjectivity problems so it's not a secure option and the user experience is awful.\nCurrently users either get a wss checkpoint hash from beaconscan or a full state from Infura.  The full state from Infura is by far the better option of those two.  If a third fully decentralised option comes along in the future then I'm all for it but we shouldn't let that stop us from taking smaller steps using what's available today.",
        "created_at": "2021-04-29T22:22:39.572000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I definitely think there's a \"perfect being the enemy of the good\" problem with decentralized state syncing",
        "created_at": "2021-04-29T22:23:08.128000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think treating the state as a static file and only focusing on specific states that come once a day or once a week is a good example of something that we can safely sacrifice to make the problem easier",
        "created_at": "2021-04-29T22:23:47.345000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And we should be open to \"just sticking it on bittorrent\"",
        "created_at": "2021-04-29T22:23:55.109000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But yeah, this stuff can just be done by some team in parallel to everything else",
        "created_at": "2021-04-29T22:24:30.193000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'd be personally interested in looking at introducing bittorrent for data replication.",
        "created_at": "2021-04-29T22:24:48.736000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It sounds like a project that the right person can hackathon out in 6 hours, no?",
        "created_at": "2021-04-29T22:25:05.218000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes, likely, but you're probably looking for something that works for the long run too?",
        "created_at": "2021-04-29T22:25:47.360000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "One way to make it forward-compatible is for the WSS provider to provide a link, and that link can be extensible to arbitrary protocols so it can support centralized HTTP POST request, or magnet link, or IPFS link, or...",
        "created_at": "2021-04-29T22:26:24.137000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "One key downside of bittorrent is that beacon node clients can't just embed it (ie I can do `teku --initial-state http://\u003cany-node\u003e/eth/v1/debug/beacon/states/finalized` and teku will download the state if it needs it). But it's probably reasonable to just provide a small dedicated bittorrent client that downloads the state for you.  Done right it could run as an ongoing process and start seeding new states from the node it originally supplied as time rolls forward.",
        "created_at": "2021-04-29T22:27:25.740000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "In the long run I'm sure we'll have a harmonized protocol for downloading historical blobs",
        "created_at": "2021-04-29T22:28:06.504000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Which can apply to eth1 states and eth2 states and lumps of history",
        "created_at": "2021-04-29T22:28:18.115000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "how does this compare to devp2p snap/1 ? And then I'll excuse myself, I didn't mean to barge in.",
        "created_at": "2021-04-29T22:28:47.363000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think the harmonized protocol would be safer because it would check each chunk it receives directly against the hash",
        "created_at": "2021-04-29T22:29:07.319000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For *any* state",
        "created_at": "2021-04-29T22:29:15.816000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ah I guess snap sync does that for the eth1 state",
        "created_at": "2021-04-29T22:29:26.612000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah doing something in libp2p is possible as well but nodes already have a pretty high bandwidth requirement so I'm not sure if we want to force them to serve states as well.  Then again, that may be the best/only way to get the decentralisation we're after.",
        "created_at": "2021-04-29T22:30:47.391000+00:00",
        "attachments": null
    }
]