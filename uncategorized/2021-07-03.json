[
    {
        "author": "jqphu7380",
        "category": "general",
        "parent": "",
        "content": "Hey, noob question (feel free to link me to some resources).\n\nFrom what I understand, a smart contract is just a transaction with the data being the code to execute. How do we efficiently lookup the smart contract without doing a linear search of all transactions? Or is the linear search feasible since it's just a hash comparison?\n\nThanks ðŸ˜„",
        "created_at": "2021-07-03T20:23:10.623000+00:00",
        "attachments": null
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "Ethereum stores state in a merkle Patricia tree, so there's ways to efficiently get to specific contracts",
        "created_at": "2021-07-03T20:28:30.732000+00:00",
        "attachments": null
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "When you sync your node you don't just get transactions you also get the state (technically you can compute the state by starting from genesis but that's not useful now anyways)",
        "created_at": "2021-07-03T20:29:28.067000+00:00",
        "attachments": null
    },
    {
        "author": "jqphu7380",
        "category": "general",
        "parent": "",
        "content": "Ah! I thought it was a plain merkle tree. Thanks olk! Follow up, does that mean the lookup is O(n*log(k)) where n is the number of blocks and k is the maximum depth over all the merkle patricia tries?",
        "created_at": "2021-07-03T20:34:21.239000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "general",
        "parent": "",
        "content": "no, the clients do not *have to* store state in a merkle trie - only need to compute merkle commitment for each block",
        "created_at": "2021-07-03T21:05:25.108000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "general",
        "parent": "",
        "content": "for one, we don't have trie at all - our state are simple key-value pairs of `address =\u003e data`, while merkle commitment is computed separately",
        "created_at": "2021-07-03T21:06:56.683000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Even if you store state in a merkle trie, contract lookup is nearly constant time since you just have to walk the true down the appropriate path.",
        "created_at": "2021-07-03T23:10:27.200000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "With maybe one additional path walk in there to get the contracts state (which you probably want).",
        "created_at": "2021-07-03T23:11:06.236000+00:00",
        "attachments": null
    }
]