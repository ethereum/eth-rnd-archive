[
    {
        "author": "leobago",
        "category": "general",
        "parent": "",
        "content": "Hi folks, I was told by someone that top-ups go trough a faster queue than the Activation queue, but looking at EIP-7251, it says \"Churn invariants\nThis proposal maintains the activation and exit churn invariants limiting active weight instead of validator count. Balance top-ups are now handled explicitly, being subject to the same activation queue as full deposits.\"\nCan someone confirm this?",
        "created_at": "2025-09-19T12:19:46.418000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "When you send a deposit, it gets processed immediately with the payload in [process_deposit_request](https://github.com/ethereum/consensus-specs/blob/master/specs/electra/beacon-chain.md#new-process_deposit_request). This adds a pending deposit to a list in the beacon state. These are then processed in [process_pending_deposit](https://github.com/ethereum/consensus-specs/blob/master/specs/electra/beacon-chain.md#new-process_pending_deposits) at epoch transition. This last function uses the exact same loop and churn for any pending deposit, the only disctintion that is made is that when we call [apply_pending_deposit](https://github.com/ethereum/consensus-specs/blob/master/specs/electra/beacon-chain.md#new-apply_pending_deposit) the we call `add_validator_to_registry` if it's a new deposit vs a top-up.",
        "created_at": "2025-09-19T14:32:30.381000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Notice that this deals with the deposits requests. There's still the old path of `process_deposit` for deposits directly in the contract.",
        "created_at": "2025-09-19T14:34:01.214000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "But that path was modified to call `apply_deposit` which just adds a `PendintDeposit` anyway and gets processed later as a request",
        "created_at": "2025-09-19T14:34:55.091000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So this was a convolted way of confirming that they are both subject to the same churn",
        "created_at": "2025-09-19T14:35:09.475000+00:00",
        "attachments": null
    },
    {
        "author": "leobago",
        "category": "general",
        "parent": "",
        "content": "Excellent explanation, very clear. Thanks \u003c@755590043632140352\u003e !",
        "created_at": "2025-09-19T15:01:12.763000+00:00",
        "attachments": null
    }
]