[
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "\u003c@354681205842771973\u003e Moving the discussion here. Maybe starting with: Are infra providers actually users of Ethereum? To some degree you could argue \"yes\" - that line gets blurry. Validators aren't users but liquid staking protocols arguably are (they have smart contracts); Oracles definitely are users. RPC providers aren't users but enable users to interact with Ethereum.",
        "created_at": "2022-05-11T14:02:39.897000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Where a user is anyone who interacts with contracts or EOAs, or provides contracts for others to interact with (dApp projects); and a service provider are the people handling attestations and block generation.",
        "created_at": "2022-05-11T14:03:46.392000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "By infrastructure providers I mean Ethereum infrastructure providers, **not** Server infrastructure proviers.",
        "created_at": "2022-05-11T14:03:52.457000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Nothing to do with RPC providers.",
        "created_at": "2022-05-11T14:04:06.930000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "That was the meaning I was going with yes.",
        "created_at": "2022-05-11T14:04:09.027000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "\u003e RPC providers aren't users but enable users to interact with Ethereum.\nThen sorry, this confused me.",
        "created_at": "2022-05-11T14:04:25.423000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "An RPC provider like Infura does provide Ethereum infrastructure, do they not?",
        "created_at": "2022-05-11T14:04:30.614000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "They are, but they more like a managed SaaS",
        "created_at": "2022-05-11T14:05:15.522000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Yep",
        "created_at": "2022-05-11T14:05:21.686000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Infrastructure providers are the \"builders\" of Ethereum - the ones who make Ethereum what it is right now",
        "created_at": "2022-05-11T14:05:51.329000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Ethereum without infrastructure/ecosystem is just like a computer without software",
        "created_at": "2022-05-11T14:06:09.611000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Completely pointless.",
        "created_at": "2022-05-11T14:06:23.667000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "In the past I've seen a definition more or less along these lines:",
        "created_at": "2022-05-11T14:06:53.742000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Miners / validators are service providers to Ethereum",
        "created_at": "2022-05-11T14:07:02.168000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "dApps are users; and people interacting with contracts and EOAs are users",
        "created_at": "2022-05-11T14:07:13.254000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Infrastructure providers could be users if they interact with contracts (example Oracles); or they could be service providers if they create blocks or enable RPC access.",
        "created_at": "2022-05-11T14:07:52+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "In some ways the line can get blurry: A liquid staking protocol is both a service provider (validates and creates blocks) and a user (offers a dApp that creates liquidity)",
        "created_at": "2022-05-11T14:08:26.901000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Why does this matter? As we saw with 1559, users have a relatively large voice, and service providers (miners/validators) a relatively small. Relatively small to the point of  smol.",
        "created_at": "2022-05-11T14:09:24.843000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "And that's by design.",
        "created_at": "2022-05-11T14:09:34.671000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "So. With definitions out of the way: What do infra providers need from Ethereum, that users likely do not care about greatly or don't use to the same extent?",
        "created_at": "2022-05-11T14:10:06.712000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Putting JSON-RPC and WS on the same port ðŸ™‚",
        "created_at": "2022-05-11T14:10:35.508000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "God Yes. You had to find my pet peeve in one sentence.",
        "created_at": "2022-05-11T14:10:57.163000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Been bugging me forever, too.",
        "created_at": "2022-05-11T14:11:37.113000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Closely followed by the expectation that trawling logs is in any way useful, rather than providing relevant metrics.\n\nWhich is itself closely followed by structured log formats that are totally destroyed by multi-line messages.",
        "created_at": "2022-05-11T14:15:00.619000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I specifically care about a certain class of user, which are those who want/need censorship resistant finance and coordination tools.",
        "created_at": "2022-05-11T14:20:54.396000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I don't personally care much about users who are using centralized/censorable/trusted systems to play ponzi games for example, even though they make up most of the transaction volume.",
        "created_at": "2022-05-11T14:21:32.419000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Structured log format I feel should be JSON. That's really the only sane way to parse logs.",
        "created_at": "2022-05-11T14:30:19.070000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "I guess that's a \u003c@291925846556540928\u003e question: To change clients to have RPC/WS on the same port and use structured logs is a decent amount of work. Not merge-size but decent. Is this something the EF would fund, or is it up to each client team to fund the work for it?",
        "created_at": "2022-05-11T14:31:31.202000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "FWIW Geth could easily use log15's logfmt, it's the default option. Much more human readable, yet perfectly understandable by machines. But for some reason they chose to just leave the same user-oriented logs just without color when ran in non-TTY mode.",
        "created_at": "2022-05-11T14:39:46.436000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Forget about what happens inside the chain - that is barely affected by hard forks. I'm talking about service providers like exchanges, payment gateways, banks, information service providers, crypto companies, miners, etc.",
        "created_at": "2022-05-11T14:42:20.081000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "And what do those need from Ethereum, to make their life easier?",
        "created_at": "2022-05-11T14:45:24.231000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Scheduled forks with proper professional upgrade coordination \u0026 preparation",
        "created_at": "2022-05-11T14:46:01.669000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Oh Boy ðŸ˜„",
        "created_at": "2022-05-11T14:49:00.433000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Wayyy above my pay grade. Ethereum governance is a notoriously opaque and complicated thing (again by design), and it doesn't lend itself well to scheduled forks afaik, because that'd need a degree of centralized control over timeline that doesn't exist.",
        "created_at": "2022-05-11T14:50:24.467000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Not to say they aren't scheduled, but a month+ in advance, not a year+",
        "created_at": "2022-05-11T14:50:58.739000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "By scheduled forks I mean the idea Micah proposed",
        "created_at": "2022-05-11T18:31:51.584000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "general",
        "parent": "",
        "content": "I wouldn't say it's *opaque*",
        "created_at": "2022-05-11T18:36:56.700000+00:00",
        "attachments": null
    },
    {
        "author": "treyzania",
        "category": "general",
        "parent": "",
        "content": "it's difficult to find well collated information, but it's all out there",
        "created_at": "2022-05-11T18:37:29.764000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "The ethereum.org website has a page about governance which I think is pretty accurate: https://ethereum.org/en/governance/",
        "created_at": "2022-05-11T19:42:29.289000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "That may be the best portable way, but by far, the best log format that suits me is journald, I can parse log with lightning speed with journald C API, and it's much faster and finely grained than metrics. Also you get to choose the granularity by changing the log level, something that clients tend not to do on metrics. And logs are mostly captured by the OS so they are quite often already occupying space. This is universally true for any Linux system (most staking boxes are) that logs in the background. So in my case this makes the metrics a waste of resources.",
        "created_at": "2022-05-11T19:48:03.709000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "syslog.",
        "created_at": "2022-05-11T20:27:05.774000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e has/had a fork that supports it.",
        "created_at": "2022-05-11T20:27:42.706000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Or journald, sure.",
        "created_at": "2022-05-11T20:28:27.519000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Iâ€™m not sure weâ€™re even allowed to talk about all that without having Prometheus metrics at first ðŸ˜…",
        "created_at": "2022-05-11T20:44:54.060000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "And this lol ðŸ˜‚",
        "created_at": "2022-05-11T20:46:35.271000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "That was my very first PR to prysm. Log fields in journald are awesome",
        "created_at": "2022-05-11T20:47:21.280000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Prometheus is just stupid if you care about timing issues, unless the client is smart enough to have a metric with the timing itself",
        "created_at": "2022-05-11T20:48:22.037000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Enabling a log backend is trivial for most logging frameworks, and all two clients I've looked at use a framework of some kind",
        "created_at": "2022-05-11T20:52:01.890000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Are the journald APIs backward compatible with syslog?",
        "created_at": "2022-05-11T20:52:32.213000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "Or in other words, does using the journald APIs necessitate using journald?",
        "created_at": "2022-05-11T20:52:54.461000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So journald will import syslog to it's naive format but then you'd lose most of the nice features, since fields will become part of the message and you'll resort to parsing the message. Currently if prysm logs a message like \"synced new block\" with fields block: root, slot: number, etc, you can ask journald to give you all slots with a given range and the such",
        "created_at": "2022-05-11T21:00:35.342000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Timing issues?",
        "created_at": "2022-05-11T21:03:26.067000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Also, I think that we are going back to the issue of fulfilling needs of core developers, not target users themselves. IMO there's no point to manage logging unless you tinker with the node, which is what target users are barely doing.",
        "created_at": "2022-05-11T21:06:36.197000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "general",
        "parent": "",
        "content": "https://datatracker.ietf.org/doc/html/rfc5424#section-6.3\n\nPretty sure syslog is structured.",
        "created_at": "2022-05-11T21:07:31.653000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Like you want to know exactly when an event happened you need to rely on the client passing this info in the metric or you'll have the granularity of your scraping",
        "created_at": "2022-05-11T21:07:50.983000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "I don't think that you understand me - prometheus metrics are useful for debugging infra issues",
        "created_at": "2022-05-11T21:09:30.105000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "You can't fit that much metrics into the logs, and tons of metrics is exactly what devops people would want to have.",
        "created_at": "2022-05-11T21:09:53.147000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "In my experience it's exactly the opposite: the most involved logging and monitoring mechanisms I've seen come from users not devs. I'm also taking about a niche field of users of a CL client, but I don't see why would be different for execution",
        "created_at": "2022-05-11T21:09:53.319000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Why would a regular user even need to manage logging? I didn't even think of that throughout my entire time working with Geth",
        "created_at": "2022-05-11T21:11:11.931000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I think I do understand, metrics and logs are complementary. Both are useful. Just for me personally, as a staker, need only logs and not metrics",
        "created_at": "2022-05-11T21:11:12.316000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Ahhhh, for staking of course.",
        "created_at": "2022-05-11T21:11:35.437000+00:00",
        "attachments": null
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "This discussion was about making things better for infra providers.",
        "created_at": "2022-05-11T21:12:29.994000+00:00",
        "attachments": null
    }
]