[
    {
        "author": "sarahhh_81",
        "category": "general",
        "parent": "",
        "content": "Hi there.  I'm posting it here first because I don't know if there's a channel dedicated to some basic programming help.  Let me introduce myself first.\n\nI'm a Lisp programmer (Racket, that is) and there is no Ethereum package or anything close to it for Racket, so I'm writing a library.  I bet from this library a lot of Lispers will do something.  I started with the RLP encoding, which is satisfactorily done.  Now I'm working on understanding how to hash a transaction and I have read Mastering Ethereum and have also looked at other books such as goethereumbook.org, but nobody describes it in words, so I'm having to read the source code and that's how I'm moving.  I don't know Go, though, so that makes it a bit tricky.\n\nMy question.  What bytes do I give which hash function to get the exact hash of a transaction?  For instance, in this [sample](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md), I can get the \"signing data\" just fine, but I can't get the hash of the \"signing hash\".  How did that example go from \"signing data\" to \"signing hash\"?  I suppose Keccak256 was used, but what bytes exactly were given to it?",
        "created_at": "2021-01-20T11:06:32.079000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "```\nkeccak256(rlp(transaction))\n```",
        "created_at": "2021-01-20T11:27:18.182000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "```ts\nTransaction =\n    AccountNonce: UInt64\n    Price: UInt256\n    GasLimit: UInt64\n    Destination: UInt160\n    Amount: UInt256\n    Payload: Bytes\n    V: UInt256\n    R: UInt256\n    S: UInt256\n```",
        "created_at": "2021-01-20T11:28:48.554000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Essentially RLP encode a list of variables, where those are the list items (in order).",
        "created_at": "2021-01-20T11:29:46.376000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "Can’t forget to: value and data.",
        "created_at": "2021-01-20T11:29:53.743000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "~~Hmm, you are right.  That does look like it is missing `to`...~~ fixed",
        "created_at": "2021-01-20T11:30:19.908000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "A contract will have a to: with a null value.",
        "created_at": "2021-01-20T11:30:32.708000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I don't remember what position to is.",
        "created_at": "2021-01-20T11:30:44.168000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "Ah off hand I don’t know either.",
        "created_at": "2021-01-20T11:30:55.162000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "It does matter though",
        "created_at": "2021-01-20T11:31:03.863000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "As the hash is a concatenation",
        "created_at": "2021-01-20T11:31:10.352000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "*bad engineer moment*",
        "created_at": "2021-01-20T11:31:24.678000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "`keccak256(rlp([nonce, price, gasPrice, gasLimit, destination, amount, payload, v, r, s]))`",
        "created_at": "2021-01-20T11:31:49.705000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "Value and data are optional?",
        "created_at": "2021-01-20T11:32:05.686000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "Oh payload is data likely",
        "created_at": "2021-01-20T11:32:23.532000+00:00",
        "attachments": null
    },
    {
        "author": "zerowei4320",
        "category": "general",
        "parent": "",
        "content": "And amount is value",
        "created_at": "2021-01-20T11:32:33.595000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Fixed it all.",
        "created_at": "2021-01-20T11:33:34.024000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Someone should fix the wiki.",
        "created_at": "2021-01-20T11:34:02.002000+00:00",
        "attachments": null
    },
    {
        "author": "sarahhh_81",
        "category": "general",
        "parent": "",
        "content": "Here's an RLP encoding of a transaction: 0xec098504a817c800825208943535353535353535353535353535353535353535880de0b6b3a764000080018080 (That's this [example](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md.)  Should I Keccak256(\"0xec...080\") or Keccak256(\"ec...8080\") or actually feed it the byte sequence of the number 0xec...8080?  By the way, the Keccak256 procedure I use is actually the RPC web3_sha3 of my Ethereum node.  (I don't yet have a Keccak256 hash function in my Lisp.)",
        "created_at": "2021-01-20T11:41:54.742000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Keccak the bytes, not a hex string encoding of them.",
        "created_at": "2021-01-20T11:43:09.176000+00:00",
        "attachments": null
    },
    {
        "author": "sarahhh_81",
        "category": "general",
        "parent": "",
        "content": "Okay, but since I'm using the RPC web3_sha3, I'm sending these bytes on a JSON-string, so I figure I must format these bytes a hexstring because that's what web3_sha3 is expecting.  Perhaps you'll say that web3_sha3 does not decode this hex-string into its corresponding bytes.  If that's the case, then I will have to implement Keccak256 in Lisp first.",
        "created_at": "2021-01-20T11:50:26.056000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It probably wants a hex string with a leading `0x` then.",
        "created_at": "2021-01-20T11:55:57.218000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@643137323831132186\u003e I recommend asking these questions over in https://discord.gg/z3T6VWF2",
        "created_at": "2021-01-20T11:56:19.584000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "`{ \"jsonrpc\":\"2.0\", \"id\": 1, \"method\": \"web3_sha3\", params: [\"0xec...080\"] }` I think?",
        "created_at": "2021-01-20T11:58:05.238000+00:00",
        "attachments": null
    },
    {
        "author": "sarahhh_81",
        "category": "general",
        "parent": "",
        "content": "That's what I tried, but that does not yield the desired output, though.  I'll double check this just to be sure.",
        "created_at": "2021-01-20T11:58:36.651000+00:00",
        "attachments": null
    },
    {
        "author": "sarahhh_81",
        "category": "general",
        "parent": "",
        "content": "Problem solved.  Double checking it, I caught a little typo on my part.  So I confirm now that the hex-string is decoded by the RPC web3-sha3 and it is computing the Keccak-256 of the bytes encoded by the hex-string.  I can now move with my work.  Thank you so much for your help!",
        "created_at": "2021-01-20T12:03:10.533000+00:00",
        "attachments": null
    }
]