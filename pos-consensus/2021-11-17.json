[
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Fork choice question:\n\nFrom https://github.com/ethereum/annotated-spec/blob/master/phase0/fork-choice.md I understand that only the initial block of each epoch (or the latest block at that time if there were skipped blocks) may become a checkpoint block. However, on Prater, when I load the block `1183646` , and look into its post-state, it refers to epoch `36986`  with block at slot `1183549`  in its `finalized_checkpoint` . There were 2 more blocks that came after the finalized block in that epoch, though: https://prater.beaconcha.in/epoch/36985\n\nI'd like to better understand the conditions when this can happen, so would appreciate any pointers.",
        "created_at": "2021-11-17T14:19:40.824000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "right the \"epoch boundary block\" is the first block (or the nearest block at the time) in the epoch under question",
        "created_at": "2021-11-17T19:11:27.815000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "block 1183552 for epoch 36986 is missing so you would find the most recent block in the `state`'s block roots",
        "created_at": "2021-11-17T19:12:20.874000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "which should be the block at slot 1183551 -- do you have a link to the state you are referring to?",
        "created_at": "2021-11-17T19:13:05.137000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "my prater nodes are returning state not found which im guessing is either some pruning or i need to adjust my api call...",
        "created_at": "2021-11-17T19:13:31.327000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Is there a way to link the state?\n\nOn Nimbus:\n``` \n    dag.withState(dag.headState, headRef.atSlot(1183646.Slot)):\n      withStateAndBlck(stateData.data, dag.get(blck).data):\n        debug \"Finalized  \",\n          root = state.data.finalized_checkpoint.root,\n          epoch = state.data.finalized_checkpoint.epoch,\n          slot = dag.get(state.data.finalized_checkpoint.root).get.refs.slot\n``` \n``` \nFinalized             topics=\"beacnde\" root=f45d84ba epoch=36986 slot=1183549\n```",
        "created_at": "2021-11-17T22:04:31.461000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Or here for Lodestar (but this link will not live that long anymore as this block is falling out of weak subjectivity period):\nhttps://prater.lodestar.casa/eth/v1/lightclient/best_updates?from=144\u0026to=144\n`header`  =\u003e 1183549\n`finality_header`  =\u003e 1183646",
        "created_at": "2021-11-17T22:07:51.903000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "(just in case it goes offline)",
        "created_at": "2021-11-17T22:11:12.610000+00:00",
        "attachments": [
            {
                "type": "application/json; charset=utf-8",
                "origin_name": "lodestar_144.json",
                "content": "de45738609d8086e057edb64ed7c06c52676a252ba73c4f897af75c215d72e38"
            }
        ]
    }
]