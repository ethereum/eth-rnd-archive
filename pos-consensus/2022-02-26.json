[
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Hi all,\n\ncould anybody help me to decypher this formula from Vitalik (showing the yield depending on staked amount)?:\nhttps://twitter.com/vitalikbuterin/status/1326445197526331392?lang=en\n\n\nexp(31556926 / 384 * 64 / 31622 / total_staked ** 0.5) - 1\ni can understand it except for why there is an exponential of 0.5 above (like why 0.5 and not 0.25 for example). I am doing advanced mathematic research on Proof of Stake systems\n\nKindly let me know if it is not the best channel to ask this question",
        "created_at": "2022-02-26T08:02:11.714000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It's down t how you handle rewards with a variable number of validators.  At one end of the scale you can have constant rewards per validator, at the other you can have total constant rewards.  The square root provides a middle ground, where total rewards increase with the number of validators, but rewards per validator decline.  This allows rewards to not be too much per validator when the number of validators is small, but not so much in total when the number of validators is large.",
        "created_at": "2022-02-26T09:03:35.814000+00:00",
        "attachments": null
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok very interesting, thanks a lot!\nSo basically the square root is a middle ground, I see.\n\nIf instead of a middle ground at \"^0.5\" (i.e. square root), we had \"1\", I guess that the reward would evolve more gradually? And if we had \"^0.25\", this would evolve more \"exponentially\"? \n\nDo you think it would make sense to tweak this variable in a PoS system (i am talking about even more broadly than ethereum) to change the incentive mechanism for the stakers? Or is 0.5 really the only number which would make sense?",
        "created_at": "2022-02-26T10:56:23.208000+00:00",
        "attachments": null
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i plotted ethereum policy on Python following vitalik's tweet:",
        "created_at": "2022-02-26T10:56:59.088000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Figure_1.png",
                "content": "00ca46eef9da4487c272b2b010ccdef613cf0b6c4e8513616d00b9e59cfe3d75"
            }
        ]
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "import matplotlib.pyplot as plt\nimport numpy as np\nimport math\nimport matplotlib.ticker as mtick\n\n# source: https://twitter.com/vitalikbuterin/status/1326445197526331392?lang=en\npower_variable = 0.5\nseconds_per_year = 31556926\nseconds_per_epoch = 384\nbase_reward_factor = 64\nsqrt_of_gwei_per_eth = (10 ^ 9) ^  power_variable\n\n# PART 1: Amount depending on yield\ndef calc_staked(reward_yield):\n    return ((seconds_per_year / seconds_per_epoch * base_reward_factor / sqrt_of_gwei_per_eth / (math.log(reward_yield +1))) ** ( 1 / power_variable) )\n\n# 100 linearly spaced numbers\nx = np.linspace(0.05,0.20,100)\n\n# the function\nvectorized_calc_staked = np.vectorize(calc_staked)\ny = vectorized_calc_staked(x)\n\n# setting the axes at the centre\nfig = plt.figure()\nax = fig.add_subplot(2, 1, 1)\nplt.ticklabel_format(style = 'plain')\nax.xaxis.set_ticks_position('bottom')\nax.xaxis.set_major_formatter(mtick.PercentFormatter())\nax.yaxis.set_ticks_position('left')\n\n# plot the function\nx_in_percent = x * 100\ny_in_million_of_token = y * 10000000\nplt.plot(x_in_percent,y, 'r')\n\n# plot the labels\nplt.title(\"Ethereum yield policy (Demand)\")\nplt.xlabel(\"Yield (%)\")\nplt.ylabel(\"Staked Amount (in ETH)\")\n\n# show the plot\nplt.show()",
        "created_at": "2022-02-26T10:58:27.462000+00:00",
        "attachments": null
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "this is the code to clarify.\n\nBasically I am wondering if it would make sense to change \"power_variable\" in this code to change the incentive mechanism (like giving more tokens to early stakers, etc...)",
        "created_at": "2022-02-26T10:59:38.081000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The axes are more commonly the other way around, but that looks about right.\n\nCould the square root be a different power?  Sure, and there's no magic as to why a square root is the perfect solution, but it provides the two things I listed and works.",
        "created_at": "2022-02-26T11:00:46.162000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "rewards.png",
                "content": "e8324fda7a42cf1bfc08dba8be26d9ceef4e9abd32e586889253a6a25f71e80e"
            }
        ]
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yep i inversed both axis because i wanted to have a look at \"protocol\" side. Protocol \"chooses\" the yield they want to offer in order to get a specific amount of validators they target\n\nyep commonly this is the other way around, this is stakers having a look at the chart and looking at how much yield they would get",
        "created_at": "2022-02-26T11:02:16.474000+00:00",
        "attachments": null
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok ok.\n\nSo you think 0.5 is kind of a working solution but this could be potentially tweaked in PoS system???\n\nI do think 0.5 is the simplest way to have a look at it.",
        "created_at": "2022-02-26T11:03:20.410000+00:00",
        "attachments": null
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "did you get this graph by running a specific code? Do you have the source (URL or code?)?",
        "created_at": "2022-02-26T11:03:44.301000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You probably want to start with what you are attempting to do and then pick the maths that supports it.  If you have no initial stakers you may want to increase the yield at low numbers.  If you want a stable monetary model you may want fixed issuance, _etc._  The numbers themselves are arbitrary in that they can be altered, but were chosen to meet certain aims.\n\nThere are probably commentary on this in either Vitalik's or Ben's annotated Ethereum specs.\n\n(Graph came from the same equation just with reversed axes.)",
        "created_at": "2022-02-26T11:09:24.905000+00:00",
        "attachments": null
    },
    {
        "author": "medicyp",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yep agreed, thanks a lot for the interesting discussion",
        "created_at": "2022-02-26T14:45:01.658000+00:00",
        "attachments": null
    }
]