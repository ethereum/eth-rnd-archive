[
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i feel like the honest validator guide could be a bit more precise when talking about the construction of eth1 data re: the deposit root",
        "created_at": "2020-02-06T01:03:07.029000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "wait nevermind...",
        "created_at": "2020-02-06T01:03:49.830000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i missed the part where we mix in the length *inside* that function (`get_deposit_root`)",
        "created_at": "2020-02-06T01:04:26.077000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Has there been any more thought into revisiting the parameters of the effective balance hysteresis? It is a terrible UX that if you missed your first epoch then you are penalized with a rewards reduction for 6 months or longer while you crawl to 32.5 ETH with the effective balance of 31.",
        "created_at": "2020-02-06T05:24:32.411000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Assuming you sent the deposit amount of 32 ETH exactly to start ^",
        "created_at": "2020-02-06T05:24:51.785000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "There's an open issue on GH, it was brought up during the AMA on Reddit and more research folks started to recognize is at as a problem",
        "created_at": "2020-02-06T05:32:54.638000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "just saw it",
        "created_at": "2020-02-06T05:33:08.207000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/eth2.0-specs/issues/1609",
        "created_at": "2020-02-06T05:33:08.809000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I will follow there",
        "created_at": "2020-02-06T05:33:12.713000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ty",
        "created_at": "2020-02-06T05:33:14.404000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "added my feedback tere",
        "created_at": "2020-02-06T05:39:22.099000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Would it cause safety loss if we'd use a general rounding rule for effective balance calculation? As this rule is organic, would provide hysteresis and get rid of that issue. What is the rationale behind hysteresis introduction?",
        "created_at": "2020-02-06T07:23:48.858000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think the issue was that if balances drifted around an integer (e.g. they go back and forth between 29.999 and 30.001) they cause common updates to effective balance and that would cause significant work with recalculation of some internal data structures (not sure which, never found out).  So the hysteresis cuts down on the computational load on the node.",
        "created_at": "2020-02-06T09:20:49.049000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It makes sense. It causes a recalculation of merkle root of the validator registry. Massive balance drift would result into significant increase of hashing time during epoch processing.",
        "created_at": "2020-02-06T09:29:12.842000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Rounding would still have this as a potential issue.  Perhaps the hysteresis could be brought in closer, so that effective balance increases after `x.05` rather than `x.5`.  That should stop flip-flopping but reduce the time that a validator has lots of Ether lying around dormant.",
        "created_at": "2020-02-06T09:37:40.904000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Right, rounding just shifts a flip-flop boundary and is not a solution for it. It seems there need to be an interval like `[x-0.05; x+0.05]` during which effective balance stays the same. Effective balance stays the same if balance was increased unless it reaches `x+0.05`  and the opposite for `x-0.05` boundary. Is that what Vitalik suggested in a solution 1?",
        "created_at": "2020-02-06T10:24:53.318000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Not sure of the impact of having an effective balance higher than actual balance, might cause some unexpected knock-on effects.  `[x,x+0.05]` would be safer I think (and should be significantly less code pertubation).\n(I believe Vitalik's comments were regarding deposits rather than balance, but could be wrong or thinking about a different comment).",
        "created_at": "2020-02-06T10:30:08.054000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yep, fair point. Probably `[x, x+0.05]` would be sufficiently enough to prevent massive flip-flops.",
        "created_at": "2020-02-06T10:38:40.341000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "when attesting, validators should not check that the eth1 hash submitted by the proposer seems sensible, beyond applying the block? ie the voting in the voting period is considered sufficient?",
        "created_at": "2020-02-06T13:48:02.570000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The voting itself with current constants seem to be sufficient enough. Assuming 1/3 of validator registry experiencing failures (or just being malicious) the probability of violating safety/liveness of the voting is very low (about `3*10^-28` according to binomial distribution).",
        "created_at": "2020-02-06T14:30:53.318000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Do you guys verify the unaggregated attestation's a valid signature by the validator in the right committee before aggregating?",
        "created_at": "2020-02-06T19:04:33.491000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If not, how do you prevent a single bad attestation pollute the aggregated attestation",
        "created_at": "2020-02-06T19:05:10.776000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if you are aggregating, you must verify the individual attestations when receiving them on the gossip channel",
        "created_at": "2020-02-06T19:05:55.771000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so you would definitely need to verify",
        "created_at": "2020-02-06T19:06:01.553000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "pretty much the first thing you do with any signed message is check signature. if bad, reject",
        "created_at": "2020-02-06T19:06:26.989000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so the attestaitons you have available for aggregation should only be valid",
        "created_at": "2020-02-06T19:06:37.972000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "how strict is this verification? the spec says  \"this is a valid signature\" but it doesn't say that the signature must belong to the correct person",
        "created_at": "2020-02-06T19:07:34.026000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The only way you can check an attestation signature is via the bitfield mapping to the committee",
        "created_at": "2020-02-06T19:07:58.258000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so in that case, it must be the right person",
        "created_at": "2020-02-06T19:08:08.014000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Can we clarify that language in the spec? A valid BLS signature is not the same requirement as valid and belonging to the correct public key",
        "created_at": "2020-02-06T19:09:26.691000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "There is a condition that requires that it be for a singular participant (only 1 bit fipped) and another that the signature is valid. I thought this was sufficient because I'm not sure what other pubkey could be used to validate it.\n\nbut if it is confusing as is, I welcome a PR with clarifying text",
        "created_at": "2020-02-06T19:12:20.328000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "What I understood was \"Is this a bls signature?\" I.e. something that could be serialized to the bls curve vs some random bytes",
        "created_at": "2020-02-06T19:13:16.683000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The reason I understood this is that it's faster in propagation",
        "created_at": "2020-02-06T19:14:27.124000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e What I understood was \"Is this a bls signature?\"\nI see the confusion! Got it. We can use specific language like `bls.Verify`",
        "created_at": "2020-02-06T20:14:07.040000+00:00",
        "attachments": null
    }
]