[
    {
        "author": "odyxes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Is there anything in the spec that prevents validators from voting twice in the same epoch if they're supposed to vote at different slots?\nIf a situation occurs as in the shema, where a fork lasts for several epochs to the point where the seed to determine the roles in each branch differs (seed being drawn for `epoch-2`). If a validator is supposed to cast an attestation in the first slot on one branch and the last slot on the other branch, and it just happens that the fork choice rule changes the canonical chain during the epoch to allow him to vote on the other branch; would he do it?",
        "created_at": "2022-10-31T11:35:17.644000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "unknown.png",
                "content": "2f133c39c09e72e65afa12f1044271fd1d030758799bd280560f2e6e132d17e3"
            }
        ]
    },
    {
        "author": "odyxes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I admit that this situation needs a lot of 'if' to occur, but I don't see in the specs something preventing an honest validator from doing a slashable action (double voting)",
        "created_at": "2022-10-31T11:36:41.328000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This would be part of the honest validator specs, it is required for validator clients to have the appropriate slashing protection mechanisms configured to prevent them from double voting in an epoch:\nhttps://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/validator.md#attester-slashing",
        "created_at": "2022-10-31T11:42:41.614000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#is_slashable_attestation_data\n\nisn't it just `(data_1 != data_2 and data_1.target.epoch == data_2.target.epoch)` that is violated?",
        "created_at": "2022-10-31T12:44:38.883000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes that's the point, that the action is slashable, that's why a validator needs to rely on its slashing protection dbase",
        "created_at": "2022-10-31T16:35:01.675000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Well, yes.. but they're asking about where in the specs it says it's slashable no?",
        "created_at": "2022-10-31T16:37:13.488000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ah I think both Nishant and I read something on that question and you something else ðŸ˜›",
        "created_at": "2022-10-31T16:38:08.763000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "IIUC They are saying that in a sufficiently long fork a validator may end up being required to attest in different slots on each branch.",
        "created_at": "2022-10-31T17:47:38.959000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Would it be a slashable offense to validate on both branches in that case, or is it only slashable to vote twice on a single slot?",
        "created_at": "2022-10-31T17:48:18.822000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For example on branch A you need to attest in slot 5 but in branch B you need to attest in slot 7.  Can you attest to A in 5 and B in 7 without being slashed?",
        "created_at": "2022-10-31T17:49:21.375000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It would still be slashable.  A validator should have a view of what it thinks the chain looks like at the time it comes to validate, and vote according to that view.  Voting on an multiple alternative views of the chain at the same time is pretty much the definition of slashable.",
        "created_at": "2022-10-31T17:50:01.191000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Not at the same time, at two different times (but within the same epoch).",
        "created_at": "2022-10-31T17:50:33.470000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Looking at the spec linked above, it appears only the epoch is checked, so I think \u003c@144468805697929216\u003e's answer is correct.  \u003chttps://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#is_slashable_attestation_data\u003e",
        "created_at": "2022-10-31T17:51:57.629000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Doesn't matter what slot you attest in within an epoch, only that you attested twice (to any two different things) within an epoch.",
        "created_at": "2022-10-31T17:52:59.692000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Sorry, \"same time\" == \"same epoch\" (as far as attestations are concerned)",
        "created_at": "2022-10-31T17:53:06.582000+00:00",
        "attachments": null
    }
]