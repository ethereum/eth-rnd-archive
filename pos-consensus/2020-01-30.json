[
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Why can't we have a BLS verify on chain?",
        "created_at": "2020-01-30T01:30:52.299000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "What's the technical difficulty, or push back from All core devs?",
        "created_at": "2020-01-30T01:31:21.111000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "An pre compile would suffice",
        "created_at": "2020-01-30T01:32:51.598000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I donâ€™t think there is. Main blocker is that no one has written an EIP yet",
        "created_at": "2020-01-30T01:41:44.716000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Iâ€™ll defo put eyes on it if you draft something ðŸ™‚",
        "created_at": "2020-01-30T01:42:03.621000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Makes sense w/ the BLS standardization on the eth2 side now complete",
        "created_at": "2020-01-30T01:42:32.213000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "oh",
        "created_at": "2020-01-30T04:16:37.156000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ya",
        "created_at": "2020-01-30T04:16:37.918000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok",
        "created_at": "2020-01-30T04:16:38.535000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i will",
        "created_at": "2020-01-30T04:16:39.644000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "becasue i think its dumb that if the queue is really long",
        "created_at": "2020-01-30T04:16:53.891000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and your client side validation fails",
        "created_at": "2020-01-30T04:17:00.499000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you have no idea if your deposit went through",
        "created_at": "2020-01-30T04:17:10.687000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'll work on smoething tomorrow and submit it",
        "created_at": "2020-01-30T04:17:17.587000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The deposit will be included based on the eth1data voting period. There is no queue for deposit inclusion except for the maximum of 16 deposits per block. Activation is the longer queue. In short youâ€™ll know in a few hours that clients refuse to include the deposit, if you didnâ€™t already know, regardless of activation queue",
        "created_at": "2020-01-30T04:21:59.251000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think Prysm will complain as soon as it observes a bad deposit in eth1. \u003c@476250636548308992\u003e could confirm that",
        "created_at": "2020-01-30T04:23:17.740000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes that is correct, we will still include it in our trie but will complain that it is a bad deposit",
        "created_at": "2020-01-30T04:55:30.259000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This was brought up for discussion in the last eth1 hardfork but was not accepted -- https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1829.md",
        "created_at": "2020-01-30T15:40:39.470000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm not sure why it was not accepted. There is a todo to expand upon it to \"Consider a double-word version\" which would aid in supporting bls12-381 and similar curves",
        "created_at": "2020-01-30T15:41:55.826000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": ".\nI think it'd be a net benefit to get this or similar EIP through even if it is after the launch of the deposit contract. \n\nA standard flow could become to submit your deposit through a wrapper contract that checks the BLS sig and then passes it to the deposit contract\n\nplus just useful to be able to verify things from eth2 inside of eth1",
        "created_at": "2020-01-30T15:43:21.955000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "why would you want to verify your own deposits on-chain?",
        "created_at": "2020-01-30T16:22:29.185000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so that you don't burn 32 eth",
        "created_at": "2020-01-30T16:22:57.481000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you might verify them locally but if there is a single source of truth blocking you from making a mistake that is better than not, imo",
        "created_at": "2020-01-30T16:23:15.002000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but not currently possible",
        "created_at": "2020-01-30T16:23:22.773000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You could locally use some domain for your signature",
        "created_at": "2020-01-30T16:23:51.192000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and then verify it",
        "created_at": "2020-01-30T16:23:53.154000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but that domain could be wrong",
        "created_at": "2020-01-30T16:23:57.394000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "whereas the deposit contract could know it statically for the testnet it serves",
        "created_at": "2020-01-30T16:24:06.299000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah",
        "created_at": "2020-01-30T17:08:09.895000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "honestly its a failsafe",
        "created_at": "2020-01-30T17:08:14.304000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Eip,1962 will add BLS verification",
        "created_at": "2020-01-30T18:55:54.599000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@291925846556540928\u003e how difficult would it be to add this to the deposit contract",
        "created_at": "2020-01-30T18:56:12.663000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "probably 1 to 2 weeks of FV work after it was integrated into the contract, but would depend on the availability of those that worked on it originally",
        "created_at": "2020-01-30T18:57:18.324000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I might be overestimating on that. Could be closer to a couple of days, but not 100% sure",
        "created_at": "2020-01-30T18:59:15.232000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Could we reaudit the contract in time?",
        "created_at": "2020-01-30T19:00:45.925000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm sure that would be lower cost to add a few lines for verification",
        "created_at": "2020-01-30T19:01:04.562000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "due to the nature of the vyper compiler, I would only feel comfortable with a bytecode level audit/verification",
        "created_at": "2020-01-30T19:01:37.912000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "this would also might depend on an update to the vyper compiler. but maybe not. I think they have a direct function to call precompiles",
        "created_at": "2020-01-30T19:03:04.370000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "let me see",
        "created_at": "2020-01-30T19:03:05.355000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think `raw_call` allows calls to precompiles, but not 100% sure\n\nhttps://vyper.readthedocs.io/en/v0.1.0-beta.6/built-in-functions.html#raw-call\n\nIf so, would not require a quick update to the vyper compiler",
        "created_at": "2020-01-30T19:07:38.272000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think it should be prioritized",
        "created_at": "2020-01-30T19:41:08.169000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Do I hear an EIP champion stepping up?",
        "created_at": "2020-01-30T20:45:06.194000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "apparently there is one that exists",
        "created_at": "2020-01-30T20:48:37.926000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I will champion it",
        "created_at": "2020-01-30T20:48:40.286000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if its not already being led",
        "created_at": "2020-01-30T20:48:49.004000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "according to Alexey https://eips.ethereum.org/EIPS/eip-1962 this eip should give us BLS_Verify",
        "created_at": "2020-01-30T20:51:24.090000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I am unaware of the status. I know that there was a contingent that wanted it in instanbul but it was dropped. Might have been lack of testing, implementations, or just some sort of apathy. \n\nLet's reach out to Alex Vlasov to see what he has to say on what happened and go from there.",
        "created_at": "2020-01-30T20:51:24.256000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Seems like it needs 1109 to get rid of the cost to staticcall otherwise you can't use these building blocks in an efficient way",
        "created_at": "2020-01-30T20:51:52.901000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "wait wouldn't this wokr:\n https://github.com/kfichter/solidity-bls/blob/master/contracts/BLS.sol",
        "created_at": "2020-01-30T20:52:55.219000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "without a HF?",
        "created_at": "2020-01-30T20:53:31.908000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i tlooks like its implemented using solidty 0.4.0",
        "created_at": "2020-01-30T20:53:57.343000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "My understanding is that the cost to do a BLSVerify without specific support will be too huge",
        "created_at": "2020-01-30T20:54:05.795000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "looking into it",
        "created_at": "2020-01-30T20:55:36.060000+00:00",
        "attachments": null
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thanks for looking  into this \u003c@322222239850168331\u003e. It would be valuable to new users in ETH2.",
        "created_at": "2020-01-30T21:23:27.867000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Another valuable thing would be able to easily validate a deposit against a _synced_ (or syncing) node. This node would presumably be on the expected chain and have the good information wrt `GENESIS_FORK_VERSION`",
        "created_at": "2020-01-30T21:24:50.044000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": ".\n\u003c@!322222239850168331\u003e was the failure on your deposits an incorrect `GENESIS_FORK_VERSION` and thus incorrect signature domain?",
        "created_at": "2020-01-30T21:25:21.043000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yes",
        "created_at": "2020-01-30T21:38:48.115000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "That's what caused my issues",
        "created_at": "2020-01-30T21:38:52.795000+00:00",
        "attachments": null
    }
]