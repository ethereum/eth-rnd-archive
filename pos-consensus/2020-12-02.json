[
    {
        "author": "chaserxy",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "then I must be wrong assuming that only blocks in the first slot of an epoch can be checkpoints. this was my impression from the Gasper paper, but I'll re-read it.",
        "created_at": "2020-12-02T00:01:22.328000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "checkpoints are an epoch and root, the root is the root of the state at the transition, this is independent of having or not a block",
        "created_at": "2020-12-02T00:24:27.719000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The root is the root of the last block, not the state.  the only place the eth2 spec uses a state root is putting it in the block. Otherwise everything is just slot + blockRoot which is enough to identify a state precisely.",
        "created_at": "2020-12-02T00:27:05.401000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it's processed by `get_block_root`",
        "created_at": "2020-12-02T00:27:23.401000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "which returns the root of the last block at",
        "created_at": "2020-12-02T00:27:33.843000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I guess ultimately it is `return state.block_roots[slot % SLOTS_PER_HISTORICAL_ROOT]` that line",
        "created_at": "2020-12-02T00:28:31.753000+00:00",
        "attachments": []
    },
    {
        "author": "chaserxy",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I see, thank you! then how to describe the 3-epoch lag at epoch 3 on the chart? what caused that?",
        "created_at": "2020-12-02T00:29:53.924000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You can't finalize anything until the end of epoch 3.  Epochs 0 and 1 are a bit weird, so you can first justify things at the end of epoch 2 and you have to justify before you finalize, so in perfect network conditions you finalize epoch 2 as you transition from epoch 3 to 4.",
        "created_at": "2020-12-02T00:31:58.071000+00:00",
        "attachments": []
    },
    {
        "author": "chaserxy",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "eureka. then it all checks out. thanks Adrian! and may I ask what's the reason epoch 0 and 1 can't be justified?",
        "created_at": "2020-12-02T00:39:40.970000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Lots of the state transition calculations refer back two epochs so rather than special casing them all, we just don't run the full epoch transition for the first couple of epochs.  Basically, the system is just booting up for those two epochs. ðŸ™‚",
        "created_at": "2020-12-02T00:43:31.622000+00:00",
        "attachments": []
    }
]