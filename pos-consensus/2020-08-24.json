[
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The majority of the slashings were due to users misplacing their validator db. Observing how users ran their validators, there were a few interesting situations:\n- Users running in docker, a few of them forgot to set the appropriate volume in docker. So on each restart they would get a fresh validator db losing all record of their previous history.\n- Some of them pointed to a wrong directory on restart for some reason, so their 'real' validator db was unused. And instead they used a new one and ended up getting slashed again. \n\nThe other causes of getting slashed were similar, it was mostly user error with misplacing their db. And a common theme was that for some trivial reason they ended up pointing to the wrong directory and ended up getting slashed. The whole medalla slashing event probably showed that it is too easy for an average user to get slashed. \n\nThe attestation/proposal history of different keys and the access to those keys are too decoupled in my opinion. I am assuming that most clients have a common slashing protection db which aggregates histories of all different keys. However there is nothing preventing any user from accessing those keys and proposing/attesting to them without that db. What would make a difference here would be to tightly couple access to those keys and the attestation/proposal history of that particular key by storing it in the same directory. \n\nBeing able to attest/propose would be dependant on the att/proposal record stored next to the key. This makes it much harder to accidentally 'lose' your attestation/proposal history. \n\nThe cons of doing something like this would be increased duplication of histories for different keys, slower start up times for users running a lot of keys. However the benefits of something like this make it worthwile imo. I was curious on what the other clients think on safety mechanisms to prevent users from slashing themselves.",
        "created_at": "2020-08-24T11:33:41.006000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "hi \u003c@!291925846556540928\u003e",
        "created_at": "2020-08-24T14:40:19.444000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I am a new dev on the Prysm team and I wanted to ask you something about my issue: https://github.com/ethereum/eth2.0-specs/issues/2012",
        "created_at": "2020-08-24T14:40:49.279000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you submitted a PR for it",
        "created_at": "2020-08-24T14:41:01.231000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I added a comment after the PR has been submitted and you probably didn't have the chance to see it before the issue got automatically closed",
        "created_at": "2020-08-24T14:41:34.652000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/eth2.0-specs/issues/2012#issuecomment-677909187",
        "created_at": "2020-08-24T14:41:43.125000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "taking a look",
        "created_at": "2020-08-24T14:41:44.036000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks!",
        "created_at": "2020-08-24T14:41:47.204000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/eth2.0-specs/issues/2012#issuecomment-679170802",
        "created_at": "2020-08-24T14:45:56.581000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "let me know if that makes sense to you",
        "created_at": "2020-08-24T14:46:03.684000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "this is clear to me",
        "created_at": "2020-08-24T14:47:56.989000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I am talking about a different part of the Honest Validator spec",
        "created_at": "2020-08-24T14:48:11.055000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e If over half of the block proposers in the current Eth1 voting period vote for the same eth1_data then state.eth1_data updates immediately allowing new deposits to be processed",
        "created_at": "2020-08-24T14:48:15.316000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If we are at the last slot of an epoch",
        "created_at": "2020-08-24T14:48:32.650000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I see",
        "created_at": "2020-08-24T14:48:49.291000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And the vote count for block X is e.g. 49.99%",
        "created_at": "2020-08-24T14:48:55.604000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "then the current proposer would move it to over 50%",
        "created_at": "2020-08-24T14:49:05.088000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what is the \"last proposer\" here?",
        "created_at": "2020-08-24T14:49:16.883000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the proposer in the last slot",
        "created_at": "2020-08-24T14:49:25.600000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "should have named it \"current\"",
        "created_at": "2020-08-24T14:49:36.986000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "their block is processed before the epoch transition",
        "created_at": "2020-08-24T14:49:48.754000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "in slot `N - 2` to `N - 1`, the slot transition is applied and the `N - 1` block is processed (thus adding the \"last\" proposer's votes)\nin slot `N - 1` to `N`, the slot and epoch transition is applied and then the `N` block is processed (thus starting the new period)",
        "created_at": "2020-08-24T14:51:46.521000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but the `N` block peaked at the result of the epoch transition when producing their block and thus knows they should be voting in a new period",
        "created_at": "2020-08-24T14:52:08.818000+00:00",
        "attachments": null
    },
    {
        "author": "radekkapka",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thank you for the explanation, I actually got a little confused when it comes to 50% of votes calculation. I was looking at block proposals in the codebase and mixed it with transitions.\nEverything is clear now, thanks once again!",
        "created_at": "2020-08-24T14:56:06.782000+00:00",
        "attachments": null
    }
]