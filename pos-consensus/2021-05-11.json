[
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Had a question on the modified `Process_Attestations` in Altair. \nhttps://github.com/ethereum/eth2.0-specs/blob/dev/specs/altair/beacon-chain.md#modified-process_attestation\n```py\n    if is_matching_source and state.slot \u003c= data.slot + integer_squareroot(SLOTS_PER_EPOCH):\n        participation_flag_indices.append(TIMELY_SOURCE_FLAG_INDEX)\n```\nWith `SLOTS_PER_EPOCH` being 32 , `integer_squareroot(SLOTS_PER_EPOCH)` being 5, this gives a much shorter timeframe to get attestations with a matching source included. I understand that 5 was chosen so as to incentivize quicker packing in of attestations. But I wonder if it introduces a disincentive here too with the shorter bound here. In the event there is any chain instability all attestations with a different target will be thrown away if they cant make into the provided timeframe of 5 slots.",
        "created_at": "2021-05-11T00:58:45.434000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Why will they be thrown away? you can have `TIMELY_TARGET_FLAG_INDEX` and not `TIMELY_SOURCE_FLAG_INDEX` as they are now independent",
        "created_at": "2021-05-11T01:02:19.790000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah but they have a different target",
        "created_at": "2021-05-11T01:03:11.043000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so its not counted",
        "created_at": "2021-05-11T01:03:24.044000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "oh so you mean an attestation that is matching source, not target and is past the 5 blocks",
        "created_at": "2021-05-11T01:04:20.696000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "correct",
        "created_at": "2021-05-11T01:04:32.795000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah, that's thrown away. I have asked before several times in the eth2 channel why this was chosen this way instead of the opposite (put stronger conditions on the target instead of source) and never got an answer",
        "created_at": "2021-05-11T01:05:09.071000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The only explanation I could think was \"to not give source for free\"",
        "created_at": "2021-05-11T01:05:30.877000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ah k, do you have a link to the convo ? Might be helpful for me to understand",
        "created_at": "2021-05-11T01:05:50.951000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what do you mean by combo? just my asking for this? if it's that, then I think this was the last time I asked\nhttps://discord.com/channels/595666850260713488/598292067260825641/825329189708234814",
        "created_at": "2021-05-11T01:07:27.842000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeap, correct that is enough",
        "created_at": "2021-05-11T01:08:59.398000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I guess that makes sense, although it introduces a disincentive here. You could potentially have a fork, and have all these validators basically penalised",
        "created_at": "2021-05-11T01:11:15.058000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "another thing that makes your point a bit more worrisome is that this is coming in Altair, and forks (if any) will be expected presumably when we test largely for the merge. Which will come later. So presumably if this really becomes an issue, it would have to be rolled back.",
        "created_at": "2021-05-11T01:15:41.623000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah it could end up exacerbating a bad situation. Also puts validators attesting at epoch transitions at a bigger risk. Now instead of losing the target reward, you lose everything and end up being penalised.",
        "created_at": "2021-05-11T01:22:24.893000+00:00",
        "attachments": []
    },
    {
        "author": "nishant0",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Opened an issue in the specs repo, \nhttps://github.com/ethereum/eth2.0-specs/issues/2403\nit is probably better to track this there",
        "created_at": "2021-05-11T05:18:05.203000+00:00",
        "attachments": []
    }
]