[
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Some help here: I am playing with the spec using `u64` values\n\nWhen we compute the FFG rewards with `get_base_reward(state, index) * attesting_balance // total_balance`\n\nWe get that if we assume the `attesting_balance` above to be the `total_balance` of `get_base_reward`, then at the first product we would be getting a `u64` overflow.\n\nI made the following spreadsheet to test for some values (screenshot below): https://docs.google.com/spreadsheets/d/1h8p9_RzV7lnfaFYn_SwSR3KEvRv_tZ-XBsx_SnhIyUU/edit?usp=sharing\n\nWhat I am overlooking here? Should I just switch to `i128`?",
        "created_at": "2020-02-10T00:52:06.973000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "",
        "created_at": "2020-02-10T00:52:42.322000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "Screenshot_from_2020-02-10_00-52-22.png",
                "content": "caece6e7053ed75315572bd9e757dfc1fe012793561c8dfbd7b077093d9691ab"
            }
        ]
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah, you're right\n\nwow, can't believe we missed that ğŸ˜£ , and thank you for finding it ğŸ™‚ ğŸ™Œ ğŸ¤œ ğŸ¤› \u003c:eth2:595693639913570305\u003e ğŸ™ ğŸ’ª",
        "created_at": "2020-02-10T01:43:32.505000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "We discontinued our bounty program when we unfroze the phase 0 spec, but this certainly qualifies. You're the first bounty recipient. congrats :)\n\nI'll reinstate the bounty program in about 2 weeks following the release of the post-audit spec release",
        "created_at": "2020-02-10T01:45:47.084000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So get_base_reward returns values of about 14 bits \n\n1M is about 20 bits\n10^9 is about 30 bits",
        "created_at": "2020-02-10T01:46:19.715000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and those get multiplied",
        "created_at": "2020-02-10T01:46:25.256000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so there's 64 bits.",
        "created_at": "2020-02-10T01:46:29.152000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "`process_slashings` has a mechanism for avoiding such an overflow\nwe'll parallel that code in the rewards",
        "created_at": "2020-02-10T01:48:09.545000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": ".\nWe don't have huge v-sets in the test vectors because they make vector files huge, but we'll need to add something to catch this and maybe uncover similar issues.\n\nWe're also now doing a comprehensive review of calculations",
        "created_at": "2020-02-10T01:49:38.778000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ooh, great catch!",
        "created_at": "2020-02-10T07:16:27.657000+00:00",
        "attachments": null
    }
]