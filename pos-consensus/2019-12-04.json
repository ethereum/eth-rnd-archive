[
    {
        "author": "huntingisland",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Who wrote the deposit contract for ETH 1.x?",
        "created_at": "2019-12-04T13:20:12.207000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Github gives me JustinDrake as the main culprit",
        "created_at": "2019-12-04T13:46:19.135000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "Screenshot_from_2019-12-04_13-45-14.png",
                "content": "2a9055158eaf77f8328da60fc1a351523f6a5d042fe3789807ffd5ee6f6b5e6b"
            }
        ]
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The deposit contract was developed in a separate repo, then moved into the specs",
        "created_at": "2019-12-04T13:50:45.501000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "See https://github.com/ethereum/deposit_contract\nand https://github.com/ethereum/eth2.0-specs/issues/980\nAn even older version was in the specs, but that history is not connected to the current code",
        "created_at": "2019-12-04T13:53:31.441000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@203220829473996800\u003e Changing subjects. Do you know what happens if one deposit has a Validator key V1, a withdrawal credential W1: and then a second deposit has a Validator key V1, and a withdrawal credential W2?",
        "created_at": "2019-12-04T14:06:42.046000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@456226577798135808\u003e First deposit will define withdrawal credentials, all subsequent deposits will just top up balance\nhttps://github.com/ethereum/eth2.0-specs/blob/v0.9.2/specs/core/0_beacon-chain.md#deposits",
        "created_at": "2019-12-04T14:08:54.191000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Most appreciated, Marin.",
        "created_at": "2019-12-04T14:13:33.794000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Where can I get up to speed with how the EF Eth2 tests work? I want to look for (or eventually PR) two tests:\na) If I insert a second deposit for a validator key V, with a different withdrawal credential W2, should the former key W1 remain or change?\nb) If I use the same withdrawal credential W for a deposit V2, will this pass or be an error.",
        "created_at": "2019-12-04T14:54:00.028000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ah https://github.com/ethereum/eth2.0-specs/tree/dev/test_generators",
        "created_at": "2019-12-04T14:56:06.702000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "(answering myself duh)",
        "created_at": "2019-12-04T14:56:12.815000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "a) what do you mean by \"validator key\"? For a private key there is a corresponding pubkey in the deposit. If that pubkey already exists the deposit will count as a top-up.\nb) Same withdrawal credentials for different validators are allowed currently, as the deposit contract does not check them, and validators will need to be created on  the first deposit.",
        "created_at": "2019-12-04T14:56:17.153000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "a) Yes validator public key ðŸ˜“",
        "created_at": "2019-12-04T14:56:44.820000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "b) Yes, that what it is inferred from the specs, but I want to be a pedantic person and see whether there exists a test for that.",
        "created_at": "2019-12-04T14:57:14.869000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "There are a series of pytest test files, and the test generator simply takes those tests, runs them, and collects the yielded data from the actual unit test, and writes that to the generator output.",
        "created_at": "2019-12-04T14:57:24.958000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Test format description: https://github.com/ethereum/eth2.0-specs/tree/dev/specs/test_formats\nOrigin pytests of deposit beacon tests for client implementers: https://github.com/ethereum/eth2.0-specs/blob/dev/test_libs/pyspec/eth2spec/test/phase_0/block_processing/test_process_deposit.py\nAnd then the contract has its own tests and formal verification.",
        "created_at": "2019-12-04T14:59:29.173000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This is perfect. Will go back to the workbench. Thank you Proto!",
        "created_at": "2019-12-04T15:00:17.049000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The easiest would be to just add more test cases to deposit tests file. The make file helps you run them, but they are just pytests, so loading up a venv and debugging in an IDE works too ðŸ™‚",
        "created_at": "2019-12-04T15:02:37.256000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Appreciate testing help, I've been busy with too many different other research/dev things ðŸ˜…",
        "created_at": "2019-12-04T15:03:12.401000+00:00",
        "attachments": null
    },
    {
        "author": "huntingisland",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thanks \u003c@456226577798135808\u003e !",
        "created_at": "2019-12-04T15:53:44.018000+00:00",
        "attachments": null
    }
]