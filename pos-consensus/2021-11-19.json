[
    {
        "author": "butta",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "cc \u003c@!514429265001971732\u003e",
        "created_at": "2021-11-19T08:32:16.977000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks! yeah we had some bugs when switching to the standard api - i thought i have fixed everything but still leftovers in the db",
        "created_at": "2021-11-19T08:44:34.735000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "will go through every block",
        "created_at": "2021-11-19T08:44:48.504000+00:00",
        "attachments": []
    },
    {
        "author": "etan_status",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Appreciate the quick analysis from everyone ðŸ™‚ Seems like my understanding of fork choice is actually better than I thought after running into this case ðŸ˜…",
        "created_at": "2021-11-19T11:10:44.014000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@!755590043632140352\u003e \u003c@!144468805697929216\u003e do you know of a way to get orphan blocks by slot via the current standard-eth2-api? with the prysm-grpc-api you can query all blocks on a slot known by the node",
        "created_at": "2021-11-19T13:42:02.325000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "there is `/eth/v1/debug/beacon/heads`",
        "created_at": "2021-11-19T13:43:36.766000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but only for head",
        "created_at": "2021-11-19T13:43:39.443000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You mean after finalization? Before another branch is finalized how can you know if a block is orphaned or not?",
        "created_at": "2021-11-19T13:44:12.437000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "after finalization yes",
        "created_at": "2021-11-19T13:44:29.033000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i mean its nothing i really need, just was wondering",
        "created_at": "2021-11-19T13:44:56.401000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Then isn't it easier to traverse the finalization chain backwards until your previous finalized point?",
        "created_at": "2021-11-19T13:45:12.563000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it would be cool to query orphan blocks and make them available on the explorer",
        "created_at": "2021-11-19T13:45:20.691000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "historically",
        "created_at": "2021-11-19T13:45:32.967000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Oh I see, I don't thing this is in the standard API but Jim or Radek would know better",
        "created_at": "2021-11-19T13:46:03.492000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it is a different thing for the user when she sees \"missed block\" instead of \"orphaned block\"",
        "created_at": "2021-11-19T13:46:43.765000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, but you're storing your blocks anyways as you see them, so why not update their status after finalization?",
        "created_at": "2021-11-19T13:54:39.156000+00:00",
        "attachments": []
    },
    {
        "author": "ppf.",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "right",
        "created_at": "2021-11-19T14:38:12.705000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Teku has an option to keep these blocks and a custom api to return them. Itâ€™s not currently part of the standard api but I wouldnâ€™t be against adding it. By default I imagine clients would still delete orphaned blocks once the chain finalises past them.",
        "created_at": "2021-11-19T21:55:48.805000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "That's a little tricky cause this API call would be not so useful before finalization, and certainly cannot be forced on clients to keep them after finalization. I feel like we should strive to keep the standard API to be the really strict minimum we need to require for clients to function in a cohesive way, and this would require some engineering for the benefit of just few",
        "created_at": "2021-11-19T22:21:55.132000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Itâ€™s still useful before finalisation and itâ€™s up to clients and how theyâ€™re configured whether they then keep them. \nIf we keep the standard api to the absolute minimum weâ€™ll wind up with real world use cases like this that have to be implemented using client specific apis. \nWe likely need to move to a place where we can specify standard apis like this but consider them optional, either individually or in a package (eg a set of apis to support light clients).",
        "created_at": "2021-11-19T22:34:51.662000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah I wouldn't oppose having a standard that clearly states some points are optional. There's no harn done in suggesting work, there is in demanding it",
        "created_at": "2021-11-19T22:37:38.509000+00:00",
        "attachments": []
    }
]