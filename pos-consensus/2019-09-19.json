[
    {
        "author": "hatter_hats_finance",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "while implementing the slasher I noticed something that can be problematic in the https://github.com/ethereum/eth2.0-specs/blob/dev/specs/core/0_beacon-chain.md#proposer-slashings code.\na validator can sign two blocks on the same epoch on two forks without satisfying the slashing condition. wdyt?",
        "created_at": "2019-09-19T10:03:23.525000+00:00",
        "attachments": []
    },
    {
        "author": "mpetrunic",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think thats how it's suppose to be, othewise if fork on which he didn't sign block would get finalized he would miss his slot and lost reward, maybe even got slashed.",
        "created_at": "2019-09-19T12:42:15.077000+00:00",
        "attachments": []
    },
    {
        "author": "hatter_hats_finance",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So he can go on signing on both forks ?",
        "created_at": "2019-09-19T13:04:13.632000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "According to honest validator doc it has to propose a block atop of canonical chain's head. Canonical chain is defined with validator's view of the network (blocks, attestations) applied to fork choice rule.",
        "created_at": "2019-09-19T13:58:48.123000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@499114472594604044\u003e how is the slashing avoided?",
        "created_at": "2019-09-19T13:59:17.286000+00:00",
        "attachments": []
    },
    {
        "author": "hatter_hats_finance",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "When validating that the signatures match we use the same state to extract epoch and domain. If the domain is not the same then it doesn't verify the signature. Which doesn't satisfy slashing condition",
        "created_at": "2019-09-19T14:24:03.682000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if the domain is different here, the idea is that we are on a different chain",
        "created_at": "2019-09-19T15:22:09.621000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so i could make two valid blocks for the same epoch across two _different_ chains",
        "created_at": "2019-09-19T15:23:30.322000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and wrt my activity on one chain, i don't care about what is happening on another chain",
        "created_at": "2019-09-19T15:23:46.341000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what i definitely want to slash is double signing on the _same_ chain",
        "created_at": "2019-09-19T15:24:03.408000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "signing two blocks at the same epoch on \"one chain\" is signing two forks of the same chain and is definitely slashable a la Casper slashing conditions",
        "created_at": "2019-09-19T15:25:04.728000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "whereas afaiui you are describing the situation across two different chains",
        "created_at": "2019-09-19T15:25:30.344000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "there is some imprecision in the terms \"chain\" and \"fork\" as commonly used here which may lead to some confusion",
        "created_at": "2019-09-19T15:25:52.445000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and it is worth noting that the way we calculate the domain when validating proposer slashings, we still get the behavior we want across a fork boundary",
        "created_at": "2019-09-19T15:27:04.930000+00:00",
        "attachments": []
    },
    {
        "author": "hatter_hats_finance",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Got it, thanks",
        "created_at": "2019-09-19T15:40:44.218000+00:00",
        "attachments": []
    }
]