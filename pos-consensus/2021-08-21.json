[
    {
        "author": "thegostep",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e \u003c@301186049323958275\u003e So when a block builder is constructing a block for slot `n`, they would figure out which validator is scheduled to sign the block in slot `n` and they would construct a block where the block builder is the coinbase and they would submit a conditional payment to the validator of slot `n`.\n\nHow do you make the payment conditional?",
        "created_at": "2021-08-21T06:40:44.865000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "To receive the payment you would have to submit an on-chain proof of inclusion of the block.",
        "created_at": "2021-08-21T06:44:04.530000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If no such proof is provided within some amount of time, the payment is refunded to the block builder.",
        "created_at": "2021-08-21T06:44:40.212000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "In fact, I think this actually provides some built in DoS protection since every block that a builder submits would need a separate bond, so spamming blocks at validators requires you to lock up a non-trivial amount of capital.",
        "created_at": "2021-08-21T06:49:50.231000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You could do all of that on an L2 solution.  Might be a great use case for a zkRollup since the contract would be quite simple (in terms of cyclomatic complexity).",
        "created_at": "2021-08-21T06:50:44.617000+00:00",
        "attachments": []
    },
    {
        "author": "thegostep",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Wouldnâ€™t you consider an L2 a side channel payment?",
        "created_at": "2021-08-21T07:13:36.123000+00:00",
        "attachments": []
    },
    {
        "author": "thegostep",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Iâ€™m the designs Iâ€™ve explored, the problem is for it to be trustless, you canâ€™t reuse bonds across multiple validators",
        "created_at": "2021-08-21T07:15:25.116000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Correct, you would need a separate bond per block submission.",
        "created_at": "2021-08-21T07:23:37.581000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I don't see a problem with having payments to slot validators happen off-protocol.",
        "created_at": "2021-08-21T07:24:06.942000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It would mean that a particular L2 becomes quasi-enshrined",
        "created_at": "2021-08-21T07:24:27.279000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ah, if we built this out as part of the core protocol that is true.",
        "created_at": "2021-08-21T07:26:16.430000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm not against having a very narrowly focused zkRollup as part of the core protocol though.  ðŸ¤·",
        "created_at": "2021-08-21T07:26:37.743000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "A zkRollup that can *only* handle this specific use case would not bother me, as long as it is censorship resistant (meaning no centralized sequencer).",
        "created_at": "2021-08-21T07:27:08.630000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e Just replying while I'm reading so perhaps someone pointed this already but I didn't understand this comment at all. While it's reasonable to hope that we have one execution client for each beacon node. It's not reasonable to expect the same about validators. You can run a lot of validators at home, help decentralize the network being a solo staker and honestly do not want to publicly expose the same coinbase showing that you hold hundreds of validators making you a target\n\u003c@755590043632140352\u003e I don't believe you are helping decentralize the network if you are running a consensus client and not an execution client.",
        "created_at": "2021-08-21T08:51:36.347000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I didn't say this! I said you run one execution client, one beacon, and 200 validators on a single validator client",
        "created_at": "2021-08-21T08:52:15.134000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The argument of hiding your wealth is an interesting one.  ðŸ¤”",
        "created_at": "2021-08-21T08:52:23.397000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "then you want to propose blocks on different coinbases",
        "created_at": "2021-08-21T08:52:27.740000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and not having the functionality proposed will force these honest privately oriented validators to script their own eth1 engine",
        "created_at": "2021-08-21T08:52:55.459000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and those are the most valuable validators we want to keep!",
        "created_at": "2021-08-21T08:53:12.093000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I need to think on it more, but the \"ability to hide your wealth\" is compelling to me at first glance.",
        "created_at": "2021-08-21T08:53:38.515000+00:00",
        "attachments": []
    },
    {
        "author": "thegostep",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Whats the advantage of moving the payment to L2 as opposed to putting them in the beacon chain?",
        "created_at": "2021-08-21T09:09:41.291000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Beacon chain doesn't do any execution, so payments are either L2 or L1 Ethereum.  L1 is just expensive is all, and it would be *nice* to move this off to L2 if possible.",
        "created_at": "2021-08-21T09:17:39.574000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Would lower cost for all parties involved, and reduce unnecessary blockspace usage.",
        "created_at": "2021-08-21T09:17:52.820000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e This is going somewhat off-topic from the original point.  But to be clear: I said attempting to force 1:1 will result in the ratio decreasing.  Because there is an option 3), which is \"run a consensus client and let someone else run the execution client\", and that is the one that will be increasingly chosen as the burden of running your own execution client  increases.\n\u003c@144468805697929216\u003e How is that different from option (2) in https://discord.com/channels/595666850260713488/692062809701482577/878552296315826176 ?",
        "created_at": "2021-08-21T09:30:26.282000+00:00",
        "attachments": []
    },
    {
        "author": "thegostep",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Beacon chain has accounts though correct? Could it have accounts for block builders making payments to block producers?",
        "created_at": "2021-08-21T09:31:33.321000+00:00",
        "attachments": []
    },
    {
        "author": "thegostep",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Agreed having these commitments in execution blocks should be avoided",
        "created_at": "2021-08-21T09:32:14.160000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "No.  There is only one Ethereum with a single state trie and account set, it just is broken up into more components after The Merge.",
        "created_at": "2021-08-21T09:37:04.484000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "This is not entirely the case. If we were doing a much more complicated merge, we could solve the issue of multiple coinbases and at the same time satisfy your concern and not allow validators to request coinbase, by simply increasing the proposer balance in the beacon-chain and burning the same amount in the execution layer. Something along these lines I guess is the line of thought of \u003c@385978868131168259\u003e, just that we are far from implementing any sync like this between beacon-chain and execution",
        "created_at": "2021-08-21T11:53:25.479000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Would you be in favour of bundling the clients more tightly and increasing the technical barrier for anyone who wants to run one without the other?",
        "created_at": "2021-08-21T20:16:21.424000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "To make run both the default option",
        "created_at": "2021-08-21T20:16:36.386000+00:00",
        "attachments": []
    }
]