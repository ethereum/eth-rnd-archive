[
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Can anyone elaborate on the condition this solves? https://github.com/ethereum/eth2.0-specs/pull/1468\n\u003c@203220829473996800\u003e \u003c@291925846556540928\u003e \u003c@361447803194441738\u003e \n\nAs a validator deciding my eth1data vote to include in a block, why do I need to read the state's eth1 data votes?",
        "created_at": "2019-11-13T19:29:07.511000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e The previous version was incorrectly assuming that there was an eth1_data_vote per slot, but this is not the case when 100% of proposers don't get blocks into the chain. Instead the period tail should be based upon the actual slot.\n\nWhere do you need more details?",
        "created_at": "2019-11-13T19:32:11.316000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "why do i need to read the state at all for determining my view of eth1?",
        "created_at": "2019-11-13T19:33:08.466000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "To have fewer different votes. But only after some margin to allow for unique new votes.",
        "created_at": "2019-11-13T19:33:33.820000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "maybe this is question bigger than this PR",
        "created_at": "2019-11-13T19:33:40.116000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The reason we check existing votes is to increase the likelihood that validators vote on the same eth1 block. I think this has been called the ‚Äúpile on effect‚Äù.\n\nBasically, if validators are looking at different (but overlapping) windows of eth1 blocks, if they consider other votes they‚Äôll still vote on the same thing.",
        "created_at": "2019-11-13T19:34:11.209000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what is this voting mechanism? Agree with everyone else some of the time,  cast your actual vote some of the time?",
        "created_at": "2019-11-13T19:34:33.240000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It‚Äôs more like ‚Äúvote with the majority, as long as the majority vote is valid (from your view)‚Äù",
        "created_at": "2019-11-13T19:35:12.328000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "valid == the correct view of eth1?",
        "created_at": "2019-11-13T19:35:48.960000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, valid from your view of the eth1 chain",
        "created_at": "2019-11-13T19:36:23.695000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Very simplified it‚Äôs ‚Äúselect a range of blocks and vote on the latest one, unless one of the other blocks in that range already has more votes than the latest one‚Äù",
        "created_at": "2019-11-13T19:37:42.104000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "hmm, and that is not defined? I suppose valid would mean \"any canonical eth1 block in the eth1 voting period\"",
        "created_at": "2019-11-13T19:37:45.241000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I‚Äôm not sure I follow, everyone‚Äôs view of the eth1 chain is subjective",
        "created_at": "2019-11-13T19:38:30.979000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "when we are in the tail period, why would we consider votes from the previous eth1 voting period?",
        "created_at": "2019-11-13T19:38:58.458000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "wouldn't that almost always be a majority in the tail period?",
        "created_at": "2019-11-13T19:39:17.252000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and also wouldn't be the same range of blocks",
        "created_at": "2019-11-13T19:39:36.946000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "all_eth1_votes should (in non-broken circumstances) be a superset of new_eth_votes",
        "created_at": "2019-11-13T19:40:32.604000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Mm.. actually perhaps that‚Äôs not true if we select a new block in the middle of the voting period",
        "created_at": "2019-11-13T19:41:29.443000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "lets say everyone in previous period voted on 0x0A 1024 votes, when we are in the tail period of 992 to 1024, the votes in the new_eth1_votes are not the majority",
        "created_at": "2019-11-13T19:41:56.172000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we'd favor an old vote?",
        "created_at": "2019-11-13T19:42:25.696000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "The votes from the previous period are discarded",
        "created_at": "2019-11-13T19:42:26.357000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "They‚Äôre simply not in the state anymore",
        "created_at": "2019-11-13T19:42:35.702000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ah",
        "created_at": "2019-11-13T19:42:54.965000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok",
        "created_at": "2019-11-13T19:43:06.139000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "still triyng to wrap my head around this method",
        "created_at": "2019-11-13T19:43:33.625000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we look at all of the votes in the state, then filter out some?",
        "created_at": "2019-11-13T19:43:52.590000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i think my confusion is coming from these\n```python\n    new_eth1_data = [get_eth1_data(distance) for distance in range(ETH1_FOLLOW_DISTANCE, 2 * ETH1_FOLLOW_DISTANCE)]\n    all_eth1_data = [get_eth1_data(distance) for distance in range(ETH1_FOLLOW_DISTANCE, previous_eth1_distance)]\n\n```",
        "created_at": "2019-11-13T19:44:37.643000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "imagining `get_eth1_data` since it's not defined",
        "created_at": "2019-11-13T19:44:59.634000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "distance is the eth1 block number?",
        "created_at": "2019-11-13T19:45:05.740000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Oh let me find an issue, I tried to define this",
        "created_at": "2019-11-13T19:45:18.600000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ty",
        "created_at": "2019-11-13T19:45:23.198000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we've had an eth1data mechanism working since april and doesn't do this majority selection algorithm",
        "created_at": "2019-11-13T19:45:51.239000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i suppose it only works because single client",
        "created_at": "2019-11-13T19:45:59.899000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/eth2.0-specs/issues/1439",
        "created_at": "2019-11-13T19:46:04.809000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "See the ‚Äúclarification‚Äù section",
        "created_at": "2019-11-13T19:46:14.015000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ty",
        "created_at": "2019-11-13T19:48:12.577000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "hmm",
        "created_at": "2019-11-13T19:49:07.178000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "```python\n\n  last_block_number = [block.number for block in entire_eth1_chain() if block.timestamp \u003e= time][0]\n```",
        "created_at": "2019-11-13T19:49:10.770000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so we just take the head of the eth1 chain?",
        "created_at": "2019-11-13T19:49:34.164000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "let me explain what we have today:\n1) determine the timestamp of the start of the eth1 voting period\n2) read the eth1 chain to find the block closest (but not before) this timestamp\n3) use that block as our vote",
        "created_at": "2019-11-13T19:50:52.089000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so i'm trying to factor in a step, 2.5, which is this \"pile on effect\"",
        "created_at": "2019-11-13T19:51:35.724000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "my understanding so far is\n- determine our vote (with the algorithm above)\n- look at the state's eth1 data votes\n- if there is a majority eth1data vote that doesn't equal our vote\n- determine is the majority vote \"is valid\" (to be defined)\n- if valid, agree with majority vote as our eth1data vote, otherwise use our vote from step 0",
        "created_at": "2019-11-13T19:53:59.158000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "am i on the right track here?",
        "created_at": "2019-11-13T19:54:26.480000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You're missing the delay part: we wait in the beginning of the eth1 vote period to encourage new better votes, and then only after having that as a start we get to consider to copy the majority vote.",
        "created_at": "2019-11-13T19:56:29.560000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what delay?",
        "created_at": "2019-11-13T19:56:50.511000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "`period_tail = state.slot % SLOTS_PER_ETH1_VOTING_PERIOD \u003e= integer_squareroot(SLOTS_PER_ETH1_VOTING_PERIOD)`",
        "created_at": "2019-11-13T19:57:10.431000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok so only check the state for majority if we are in the tail period?",
        "created_at": "2019-11-13T19:57:33.126000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "that's a pretty small window, only 32 slots",
        "created_at": "2019-11-13T19:58:07.863000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "oh wait i had it inverted, i thought tail period was the last 32 slots (tail)",
        "created_at": "2019-11-13T19:58:38.286000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the tail is actually very long lol",
        "created_at": "2019-11-13T19:58:50.192000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Maybe a worded it badly, what I'm trying to say is that during that start period we want to collect fresh votes. Not necessarily the majority if the majority is for older data",
        "created_at": "2019-11-13T19:59:09.520000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "gotcha",
        "created_at": "2019-11-13T19:59:14.210000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "OK",
        "created_at": "2019-11-13T19:59:15.203000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so what can i use to determine validity?",
        "created_at": "2019-11-13T19:59:21.454000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "since it is subjective, i can lazily say \"if the block number is not N then its not a valid eth1 vote for this period\"",
        "created_at": "2019-11-13T20:00:14.669000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "which kind of defeats the whole process",
        "created_at": "2019-11-13T20:00:25.930000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It's about emergent behavior. If every honest validator does a good effort to produce some fresh data, and pile on net-positive progress with a majority vote, there will be progress in eth1 processing.",
        "created_at": "2019-11-13T20:01:18.363000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@539495253418180618\u003e and you had this exact discussion 2 months ago, you may want to revisit it with him",
        "created_at": "2019-11-13T20:02:42.923000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks, I think we need some clarification here because this process, being subjective, is unlikely to converge unless there is clear communication around the process",
        "created_at": "2019-11-13T20:03:36.605000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "is there disparity in eth1 clients wrt block timestamps?",
        "created_at": "2019-11-13T20:04:36.191000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "timestamps are set by the miners an included in the block hash",
        "created_at": "2019-11-13T20:04:55.536000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Right, the spec is trying to dictate the approach for honest validators to get the network to agree on something as a whole. It's not strictly enforced as part of consensus (apart from the process eth1 data conditions in the beacon spec)",
        "created_at": "2019-11-13T20:05:10.798000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah, but we all see the same eth1 chain?",
        "created_at": "2019-11-13T20:05:16.038000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "hopefully we all see the same eth1 chain, that's what we're trying to vote on. if we don't our eth1 linking is broken.",
        "created_at": "2019-11-13T20:05:44.707000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "im not sure how this pile on effect is going to save us if the linking is broken",
        "created_at": "2019-11-13T20:06:11.379000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "trying to rationalize this complexity but struggling to do so",
        "created_at": "2019-11-13T20:06:22.989000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if the linking is broken (e.g., every validator sees a different eth1 chain) then we're \"up shit creek without a paddle\" as my dad would say",
        "created_at": "2019-11-13T20:07:12.021000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "there is an underlying honest majority assumption",
        "created_at": "2019-11-13T20:07:32.348000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the pile-on effect helps us if the chain views are slightly different",
        "created_at": "2019-11-13T20:07:39.953000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so that eventually the beacon chain tracks the eth1 chain, possibly w/ some delay",
        "created_at": "2019-11-13T20:07:45.934000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "maybe someone can describe a scenario where this logic solves a problem",
        "created_at": "2019-11-13T20:07:48.595000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the pile-on bit you mean?",
        "created_at": "2019-11-13T20:08:08.094000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah",
        "created_at": "2019-11-13T20:08:10.883000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the idea is to avoid lazy validators from slowing (halting?) progress on eth1 data",
        "created_at": "2019-11-13T20:08:23.228000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "rather than always casting my vote as i describe it",
        "created_at": "2019-11-13T20:08:29.713000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we can dig up the backing issues",
        "created_at": "2019-11-13T20:08:36.830000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "how does this mitigate lazy validators?",
        "created_at": "2019-11-13T20:08:47.588000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "sounds like it encourages lazy validators",
        "created_at": "2019-11-13T20:08:58.016000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/eth2.0-specs/issues/722",
        "created_at": "2019-11-13T20:09:39.081000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "basically this scenario: https://github.com/ethereum/eth2.0-specs/issues/722#issue-417813521",
        "created_at": "2019-11-13T20:10:17.396000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if we have an honest majority then you'll make as much progress as possible during the initial part of the voting period as we don't just \"pile on\" -- which is what the original honest validator suggestion gave rise to",
        "created_at": "2019-11-13T20:11:18.117000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i'm not sure that is your actual question tho",
        "created_at": "2019-11-13T20:11:27.511000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "my question is \"if we have an honest majority, why do we need pile on?\"",
        "created_at": "2019-11-13T20:11:44.662000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what problem does this solve",
        "created_at": "2019-11-13T20:11:47.661000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if we have honest majority, we will converge without pile on effect",
        "created_at": "2019-11-13T20:12:05.134000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "for the situation prior to what is currently in the doc -- the \"honest\" behavior was essentially to copy the first vote",
        "created_at": "2019-11-13T20:12:21.006000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so if the first vote is stale, then you degrade liveness of the eth1 mechanism",
        "created_at": "2019-11-13T20:12:39.161000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "how does this mitigate it though?",
        "created_at": "2019-11-13T20:12:42.194000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i can still do that",
        "created_at": "2019-11-13T20:12:47.029000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you can still have an honest majority w/ one bad actor",
        "created_at": "2019-11-13T20:12:50.912000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "still do what?",
        "created_at": "2019-11-13T20:13:33.819000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if an honest majority follows my algorithm above (not reading state at all to determine eth1data vote) then we dont need pile on effect",
        "created_at": "2019-11-13T20:13:35.628000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e how does this mitigate it though?",
        "created_at": "2019-11-13T20:13:36.349000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "by changing the default behavior from \"copy the first vote\" to \"submit your latest view of the chain\" basically",
        "created_at": "2019-11-13T20:13:56.086000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but that's not what it is right now, it's \"copy the majority vote after 32 slots\"",
        "created_at": "2019-11-13T20:14:28.393000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so you want to get rid of the \"copying\" part entirely?",
        "created_at": "2019-11-13T20:14:39.711000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "my proposal above is always \"submit your view of the chain\"",
        "created_at": "2019-11-13T20:14:56.518000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "no copying at all, no reading state",
        "created_at": "2019-11-13T20:15:02.895000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but then you need validators to converge on  a particular block to get consensus, right?",
        "created_at": "2019-11-13T20:15:18.508000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if i just always submit my head, there will be `VOTING_PERIOD` different block hashes",
        "created_at": "2019-11-13T20:15:35.130000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yes, which would happen if there was an honest majority",
        "created_at": "2019-11-13T20:15:37.966000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you dont submit the head always",
        "created_at": "2019-11-13T20:15:46.936000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "you submit the block at the start of the eth1 voting period",
        "created_at": "2019-11-13T20:15:56.357000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it's not a moving target",
        "created_at": "2019-11-13T20:16:03.495000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "gotcha",
        "created_at": "2019-11-13T20:16:14.811000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "what happens under this new algo if there is a heavy chain split so that we can't come to consensus on the block at the start of the eth1 voting period?",
        "created_at": "2019-11-13T20:17:28.005000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i'd have to think about it a bit more, but it seems you gain some resistance to forks if you can mix in some info from other validators",
        "created_at": "2019-11-13T20:18:14.748000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah so lets say eth1 hardforks and only 50% of eth2 validators upgraded, we are in big trouble and pile on effect wouldn't help",
        "created_at": "2019-11-13T20:18:20.460000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "the majority vote from pile on wouldnt be valid in the view of 50% of validators",
        "created_at": "2019-11-13T20:18:44.066000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i gotta run but if you think we should change it, we can move this to a PR -- i will say, some what separately, i do think this part of the spec is p confusing",
        "created_at": "2019-11-13T20:20:16.285000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e you submit the block at the start of the eth1 voting period\n\nThose first few validators are doing that more or less. Just with more validators, a smaller window of possible votes, and convergence.\n\n\u003e my proposal above is always \"submit your view of the chain\"\n\nWhen you are voting after that initial period, you take whatever your view of the chain is, starting after the last eth1 checkpoint. And then see what others are voting for to determine the best candidate. You don't copy things outside of your own view.",
        "created_at": "2019-11-13T20:20:32.472000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "pile on would help in the scenario where all the validators have latest eth1 blocks that are somewhere within the period where we're supposed to vote",
        "created_at": "2019-11-13T20:21:16.677000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "do i have the wrong understanding that we are voting on \"what was the eth1 block at the start of the voting period?\"",
        "created_at": "2019-11-13T20:21:35.711000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i.e., if eth1 became \"unavailable\" for several hours",
        "created_at": "2019-11-13T20:21:37.256000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I would say we are voting for any recent (`ETH1_FOLLOW_DISTANCE, 2 * ETH1_FOLLOW_DISTANCE`) part of your view in that initial period (`integer_squareroot(SLOTS_PER_ETH1_VOTING_PERIOD)` slots) and then for all data (`ETH1_FOLLOW_DISTANCE, previous_eth1_distance`) after that, to at least make some progress when there is no clear recent eth1 data winner. And you prefer votes in your own subjective window that others are voting for as well, to increase your chances of something in your view to get the majority, and at minimum put a vote to any progress.",
        "created_at": "2019-11-13T20:26:26.519000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Scenario where pile-on helps:\n\nImagine if you had two validators. Both of these validators have a view of the eth1 chain where the head block is less than the start of the current eth1 voting period. Both validators are on the same eth1 chain, but validator A has block #41 and validator B has block #42.\n\n_Without_ pile-on, one would vote #41 and the other #42. But, _with_ pile-on, if the validator A votes first, then validator B will also vote #41 (not #42)",
        "created_at": "2019-11-13T20:29:13.613000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so we aren't voting on the block at the start of the voting period?",
        "created_at": "2019-11-13T20:29:53.834000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we are asking validators to converge on any block in a 3.5 hour range of blocks?",
        "created_at": "2019-11-13T20:30:11.045000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if that is the case, i think its very unlikely that the first 32 votes will agree",
        "created_at": "2019-11-13T20:32:25.625000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "They don't have to agree",
        "created_at": "2019-11-13T20:32:45.927000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "?",
        "created_at": "2019-11-13T20:32:49.848000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thats the whole point though, right?",
        "created_at": "2019-11-13T20:33:00.614000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Those first votes are like seeds; others in the period will have their own view, and pick whatever seed matches theirs and has the most support.",
        "created_at": "2019-11-13T20:33:41.208000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we could simplify the eth1 voting process to be\n- determine the timestamp at the start of the voting period\n- select the highest slot block, before the timestamp, and choose the next descendant (to mitigate miner influenced timestamp issues, maybe)\n- use this block as your vote\n\nno need to read state\n\nedit: you can read state to ensure the following\n- the newly cast vote is eth1 block number is greater than the previous eth1data in state",
        "created_at": "2019-11-13T20:34:49.604000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "And if seeding with votes for recent data fails, it will fall back on majority of any progressive vote (within the view of the validator) that has as many votes as possible",
        "created_at": "2019-11-13T20:35:22.116000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e Those first votes are like seeds; others in the period will have their own view, and pick whatever seed matches theirs and has the most support. \nthis is going to lead to almost everyone choosing the vote on the 32rd slot",
        "created_at": "2019-11-13T20:35:27.829000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i imagine that none of the first 32 votes are the same because its a moving target",
        "created_at": "2019-11-13T20:35:48.492000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so they are going to choose the oldest one",
        "created_at": "2019-11-13T20:35:53.463000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "this just changes the problem that alex described from lazy peeople choosing slot 1 to lazy people choosing slot 32",
        "created_at": "2019-11-13T20:36:10.975000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "They can be, there still is a preference for majority, just in a smaller window of most recent data.",
        "created_at": "2019-11-13T20:36:27.293000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i think the problem is that we aren't voting on a single thing",
        "created_at": "2019-11-13T20:36:40.670000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we are voting on this moving target now",
        "created_at": "2019-11-13T20:36:46.176000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "or voting on such a wide range of options",
        "created_at": "2019-11-13T20:37:04.388000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But this reduces the problem of \"lazy vote for any newer eth1 data\" to \"prefer recent data and vote lazy for it, only if there is no such data try to come up with something recent if you are in the initial period, otherwise settle on copying any majority in-view vote\"",
        "created_at": "2019-11-13T20:38:10.792000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i disagree",
        "created_at": "2019-11-13T20:38:27.290000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "lazy actors can still be lazy, they aren't penalized here",
        "created_at": "2019-11-13T20:38:46.692000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "everyone else is penalized with higher complexity",
        "created_at": "2019-11-13T20:38:54.693000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if we have an honest majority, we don't need such a complex eth1 data voting process",
        "created_at": "2019-11-13T20:39:21.688000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if we don't have honest majority, this solution doesn't help either",
        "created_at": "2019-11-13T20:39:38.407000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It's also about speed. The sooner we can get to a majority the better. If you get lazy validators to copy recent honest votes, then that's great. That's what we are looking for here Afaik. And is improved with pile-on.",
        "created_at": "2019-11-13T20:42:25.644000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i don't see how pile on helps the honest majority",
        "created_at": "2019-11-13T20:44:07.752000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "What about my scenario above?",
        "created_at": "2019-11-13T20:44:27.055000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It‚Äôs pretty extreme, but it exists",
        "created_at": "2019-11-13T20:44:35.469000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@361447803194441738\u003e is this a scenario where eth1 is stalled?",
        "created_at": "2019-11-13T20:44:41.779000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "You increase your chances of honest validators forming a quick recent majority for lazy validators to copy",
        "created_at": "2019-11-13T20:44:41.913000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@203220829473996800\u003e this doesn't influence lazy validators at all",
        "created_at": "2019-11-13T20:45:09.536000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If a lazy validator just copies the majority, then it should",
        "created_at": "2019-11-13T20:45:26.791000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "that's not very lazy",
        "created_at": "2019-11-13T20:45:43.149000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Correct",
        "created_at": "2019-11-13T20:45:43.410000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "lazy would be just take the first one",
        "created_at": "2019-11-13T20:45:47.201000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "or put random data or 0x0",
        "created_at": "2019-11-13T20:45:59.241000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Dishonest \u003e lazy \u003e honest...",
        "created_at": "2019-11-13T20:46:20.268000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if im truly lazy, i wouldn't even bother with eth1data",
        "created_at": "2019-11-13T20:46:25.386000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "i'm not trying to harm anyone or be dishonest, i'm just lazy and not incentivized for eth1data",
        "created_at": "2019-11-13T20:46:49.227000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "if you wanted to be lazy where you just take the majority vote from the state that would be pile on but why does the honest majority have to think about it?",
        "created_at": "2019-11-13T20:47:55.306000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "honest majority would agree anyway, they are the majority",
        "created_at": "2019-11-13T20:48:11.560000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "however, if we aren't voting on a single block such as \"what was the eth1 block at the start of the eth1 voting period\" then we need to define what that is",
        "created_at": "2019-11-13T20:52:29.153000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Going to give it some thought, others can chime in, it's an interesting topic. Also have lots of other stuff to do, can't hang in chat all day üòÖ",
        "created_at": "2019-11-13T20:53:35.995000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "maybe we can schedule a meeting some time, eth1 is the biggest blocker for cross client so it seems important that we agree on implementation requirements",
        "created_at": "2019-11-13T20:54:38.736000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "As I see it, the spec fully defines how Eth1 voting works. Perhaps it could be stated more clearly, but it‚Äôs there.",
        "created_at": "2019-11-13T20:54:52.662000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "or at least can clarify it so we are all on the same understanding",
        "created_at": "2019-11-13T20:54:53.078000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Actually, except for the timestamp thing that I tried to define",
        "created_at": "2019-11-13T20:55:15.204000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "But I don‚Äôt think it makes much of a difference",
        "created_at": "2019-11-13T20:55:32.544000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "can you clarify it in one sentence? what are we voting on exactly?",
        "created_at": "2019-11-13T20:55:53.874000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "‚Äúselect a range of blocks and vote on the latest one, unless one of the other blocks in that range already has more votes than the latest one‚Äù",
        "created_at": "2019-11-13T20:56:53.197000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "so it's the eth1 block at the end of the eth1 voting period",
        "created_at": "2019-11-13T20:57:17.299000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "not the beginning",
        "created_at": "2019-11-13T20:57:23.031000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "correct",
        "created_at": "2019-11-13T20:57:43.091000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ok we'll switch to that",
        "created_at": "2019-11-13T20:58:02.568000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "(but theres a `follow_distance` gap)",
        "created_at": "2019-11-13T20:58:05.419000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I think the algorithm for getting `all_eth1_data` and `new_eth1_data` is easier explained using iterators",
        "created_at": "2019-11-13T20:58:34.644000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "we'll consider this pile on effect, but i dont see it solving a real problem at the moment so we may not implement it",
        "created_at": "2019-11-13T20:58:38.001000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "sure, you do you",
        "created_at": "2019-11-13T20:58:56.450000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I find this way easier to understand than whats in the spec, but that might just be because I like and am familiar with iterators. Sorry if the Rust is confusing.\n\n```\nlet new_eth1_data = eth1_blocks\n        .iter()\n        .rev()\n        .skip_while(|eth1_block| eth1_block.timestamp \u003e voting_period_start_seconds)\n        .skip(eth1_follow_distance)\n        .take(eth1_follow_distance);\n```\n\n```\nlet all_eth1_data = eth1_blocks\n        .iter()\n        .rev()\n        .skip_while(|eth1_block| eth1_block.timestamp \u003e voting_period_start_seconds)\n        .skip(eth1_follow_distance)\n        .take_while(|eth1_block| eth1_block.hash != prev_eth1_hash);\n```",
        "created_at": "2019-11-13T21:02:25.018000+00:00",
        "attachments": []
    },
    {
        "author": "prestonvanloon",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "thanks, that is easier to understand",
        "created_at": "2019-11-13T21:07:18.707000+00:00",
        "attachments": []
    }
]