[
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@539495253418180618\u003e https://github.com/Zoltu/recoverable-wallet/",
        "created_at": "2020-10-09T02:08:48.815000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Can't be implemented off chain because it needs a time delay, which it gets from Ethereum.",
        "created_at": "2020-10-09T02:09:21.124000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "for the v1.0.0-rc1 phase 0 spec test vectors, is it expected that the `BeaconState` (and only `BeaconState`-related objects, so far that I've foun ) would mismatch \u003c@!203220829473996800\u003e's `zcli hash-tree-root state` command? For example,\n```\n$ zcli hash-tree-root state tests-v1.0.0-rc.0/mainnet/phase0/ssz_static/BeaconState/ssz_random/case_2/serialized.ssz\n0xc7556f825134204c8f2524856868cd4a3128baed2831aa25bb471c94af06faca\n$ cat tests-v1.0.0-rc.0/mainnet/phase0/ssz_static/BeaconState/ssz_random/case_2/roots.yaml \n{root: '0x3e4ec1601f33c253e7c32497d5c62f3b50880a3293476201c1454cf4585cda7b'}\n```\nFor the 0.12.3 phase 0 spec test vectors, zcli and roots.yaml match, as do other `tests-v1.0.0-rc.0/mainnet/phase0/ssz_static/` directories that I've tried (e.g., attestations). Sure, the current zcli/zrnt is 0.12.3-targeted, but diff between that 1.0.0-rc.0 doesn't show any obvious-to-me data structure/type differences.",
        "created_at": "2020-10-09T12:04:56.414000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I recently updated zcli to use a new SSZ backend. Still, it was passing tests in ZRNT in v0.12.3. Will check latest test vectors and cli.",
        "created_at": "2020-10-09T12:07:25.231000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yeah, it's still consistent with the v0.12.3 test vectors",
        "created_at": "2020-10-09T12:08:00.936000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "(that I've been able to determine; haven't tried all of them)",
        "created_at": "2020-10-09T12:08:30.831000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Thanks. Afk now, but can check in an hour from now",
        "created_at": "2020-10-09T12:09:20.065000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "sounds good; it's not urgent, but definitely curious.",
        "created_at": "2020-10-09T12:09:55.806000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "If you're feeling adventurous you can also open the eth2spec package in a python shell, and load a BeacknState, then htr it",
        "created_at": "2020-10-09T12:10:31.619000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "it's also possible I'm just missing something in `git diff v0.12.3 v1.0.0-rc.0` that should explain this",
        "created_at": "2020-10-09T12:10:54.737000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Maybe you're looking at phase1 types accidentally?",
        "created_at": "2020-10-09T12:11:27.654000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "no, for Nimbus I started to exclude phase1 test vectors from being extracted at all for the moment (for sort of devops reasons)",
        "created_at": "2020-10-09T12:12:08.923000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "and see the command lines above -- they're explicitly referencing `phase0`, for `zcli`/`cat foo/roots.yaml`",
        "created_at": "2020-10-09T12:12:54.852000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Hmm, I looked at the GitHub diff quickly from my phone, and it looks like just the roots changed, but not the input data. Probably a bug then. Will investigate",
        "created_at": "2020-10-09T12:14:24.002000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Ok, it appears it's mostly still the same merkle tree, but with a larger eth1-votes list. The `EPOCHS_PER_ETH1_VOTING_PERIOD` config value changed from 32 to 64, and affects the merkle tree depth in the state. This makes the release candidate incompatible with v0.12. The test repo has the right configurations for reference. Was not aware of this change myself yet, but the release notes do state configuration changes.",
        "created_at": "2020-10-09T14:22:16.002000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "FYI, the new ZCLI has a flag to use custom configuration files. So you can check and debug tests with ZCLI",
        "created_at": "2020-10-09T14:31:53.861000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "For example (take config and test state from tests repo):\n```\nzcli hash-tree-root state --spec=rc0_config.yaml test_state_3.ssz \n0xa7c045ff3a2087d0c9b426c95ddda61f52c5b4c05d33e7db90faff9e8f7a6a31\n```\nMatches https://github.com/ethereum/eth2.0-spec-tests/tree/v1.0.0-rc.0/tests/mainnet/phase0/ssz_static/BeaconState/ssz_random/case_3",
        "created_at": "2020-10-09T14:33:05.165000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003c@!654267572107083777\u003e Let me know if you have more testing questions, happy to help ðŸ™‚",
        "created_at": "2020-10-09T14:34:12.797000+00:00",
        "attachments": []
    }
]