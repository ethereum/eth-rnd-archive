[
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, this is one of the most tricky part of the fork choice. The other one is coupled with proposer's logic:\n```To propose, the validator selects the BeaconBlock, parent, that in their view of the fork choice is the head of the chain during slot - 1.```\nIn other words it means that parent is selected *before* attestations to the previous slot get applied in the fork choice. We need fork choice tests to check that all clients are on the same page. Those two detail are not so obvious when you're working on the implementation. But apparently they are important parts of the fork choice's expected behaviour.",
        "created_at": "2020-02-01T04:15:28.852000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e my point was mainly that the source of truth is still not the deposit contract, so as long as the eth2 side is authorative, even a check inside the deposit contract would not be enough - you'd indeed need a bridge back to be really safe\nRight, but what else checks do we have in `process_deposit` and what checks do we anticipate to be included later on? For now it's a BLS signature verification only. And if major part of the clients follow the protocol there will be only one check on Eth2 side until another check is added on the protocol level which I guess is unlikely to happen. BLS verification in the deposit contract is more about UX than a formal proof of guarantee of deposit being included on beacon chain.",
        "created_at": "2020-02-01T04:29:09.164000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "\u003e Maybe we can spec something that logs invalid deposits into a tree, of which the root is maintained in the beacon state? Then refund deposits with invalid signatures once we have a (slow) bridge? It doesn't have to affect the already formally verified deposit contract\nIt requires a bridge which is probably more complicated thing than adding a check into a contract and updating its formal model. Bridge, also, adds an uncertainty on how much time users will have to wait to get a refund. Regarding BLS precompile, some of bridge designs has this precompile as a requirement too.",
        "created_at": "2020-02-01T04:35:20.724000+00:00",
        "attachments": null
    }
]