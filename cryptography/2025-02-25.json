[
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "libsecp256k1 uses the addchain of `x^((P+1)/4)` to compute a square root. Do you know if they may exist better methods?",
        "created_at": "2025-02-25T11:12:36.085000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "what is the length of the chain? and is the problem with efficiency or you don't want an addition chain?",
        "created_at": "2025-02-25T13:58:51.797000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "253 squares 13 multiplies",
        "created_at": "2025-02-25T14:00:22.334000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Some said that the addchain is great for inversion, but turned out it is 5x slower than GCD. I'm wondering if we can get similar effect with sqrt.",
        "created_at": "2025-02-25T14:01:32.457000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah this is surprising, unless maybe the add-chain was not great",
        "created_at": "2025-02-25T15:37:12.640000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For secp256k1, we have p = 3 mod 4 so the introduction in this paper: https://eprint.iacr.org/2020/1407.pdf\n\nshould be the state of the art, re Tonelli-Shanks bieng good on average",
        "created_at": "2025-02-25T15:39:02.405000+00:00",
        "attachments": null
    },
    {
        "author": "kevaundray",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also links to a Bernstein paper on using precomputations to speed up TS -- I've never benchmarked TS vs the addition chain for secp256k1, so you might need to experiment to see if it faster on average",
        "created_at": "2025-02-25T15:40:54.083000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To be precise, the numbers are from the addchain used in evmone and generated by a tool. However, libsecp256k1 has very similar or identical chain. The code in libsecp256k1 is very old (12 years), but maybe they strictly prefer constant-time code... https://github.com/bitcoin-core/secp256k1/commit/f8ccd9befdb22824ef9a845a90e3db57c1307c11",
        "created_at": "2025-02-25T16:32:39.770000+00:00",
        "attachments": null
    },
    {
        "author": "0xsqualo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@425274498732916736\u003e I was reviewing silkpre as part of a potential integration and believe I have found a potential bug - what's the usual reporting practice? Saw you were the most active in the repo",
        "created_at": "2025-02-25T16:32:57.485000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is this a security issue? If yes, follow https://ethereum.org/en/bug-bounty. Erigon and evmone (probably) are included so they will forward it to me or others. Otherwise, you can report a bug at https://github.com/erigontech/silkworm.",
        "created_at": "2025-02-25T16:35:08.972000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We can also talk about the \"potential integration\" because we are going to ditch silkpre soon.",
        "created_at": "2025-02-25T16:41:35.712000+00:00",
        "attachments": null
    },
    {
        "author": "0xsqualo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Got it thanks! yes was more speculative / inital review than anything - will go through those channels and reach out separately if there's anything else",
        "created_at": "2025-02-25T16:45:40.843000+00:00",
        "attachments": null
    },
    {
        "author": "0xsqualo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is there already a roadmap for whats next?",
        "created_at": "2025-02-25T16:45:58.106000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not strictly a roadmap, but at some point evmone should have implementation of all precompiles. Currently only expmod is missing but can fallback to silkpre (GMP) or potentially to OpenSSL. We are working on builtin implementation too. In other words, if you need a library with all precompiles, evmone may be better option long term. silkpre is unmaintained. It has been merged back to silkworm. evmone uses it mostly as a fallback.",
        "created_at": "2025-02-25T16:50:15.582000+00:00",
        "attachments": null
    },
    {
        "author": "chfast",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hm... I'm reading this as: because p = 3 mod 4 the exponentiation to (p-3)/4 is the best we can get.",
        "created_at": "2025-02-25T17:04:19.320000+00:00",
        "attachments": null
    },
    {
        "author": "paulmillr",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Correct",
        "created_at": "2025-02-25T20:23:53.286000+00:00",
        "attachments": null
    },
    {
        "author": "paulmillr",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Tonneli is really slow",
        "created_at": "2025-02-25T20:24:01.137000+00:00",
        "attachments": null
    },
    {
        "author": "paulmillr",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "3 mod 4 fastest, 5 mod 8 fast",
        "created_at": "2025-02-25T20:24:14.268000+00:00",
        "attachments": null
    }
]