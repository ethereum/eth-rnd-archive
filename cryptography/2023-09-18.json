[
    {
        "author": "sleepingshell",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm implementing KZG and multiproofs in evaluation form (with the domain defined at roots of unity). How can I properly perform the division at a point outside of the domain? Won't this point also end up just being one of the roots of unity?",
        "created_at": "2023-09-18T01:39:24.412000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There is the KZG multiproofs blog post by Dankrad",
        "created_at": "2023-09-18T08:21:30.099000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "for division off domain https://github.com/mratsim/constantine/blob/master/constantine/math/polynomials/polynomials.nim#L137-L155\n\n\n```Nim\nfunc differenceQuotientEvalOffDomain*[N: static int, Field](\n       r: var PolynomialEval[N, Field],\n       poly: PolynomialEval[N, Field],\n       pZ: Field,\n       invRootsMinusZ: array[N, Field]) =\n  ## Compute r(x) = (p(x) - p(z)) / (x - z)\n  ##\n  ## for z != ωⁱ a power of a root of unity\n  ##\n  ## Input:\n  ##   - invRootsMinusZ:  1/(ωⁱ-z)\n  ##   - poly:            p(x) a polynomial in evaluation form as an array of p(ωⁱ)\n  ##   - rootsOfUnity:    ωⁱ\n  ##   - p(z)\n  for i in 0 ..\u003c N:\n    # qᵢ = (p(ωⁱ) - p(z))/(ωⁱ-z)\n    var qi {.noinit.}: Field\n    qi.diff(poly.evals[i], pZ)\n    r.evals[i].prod(qi, invRootsMinusZ[i])\n```",
        "created_at": "2023-09-18T08:23:46.023000+00:00",
        "attachments": null
    },
    {
        "author": "sleepingshell",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah yes, thank you. I read the article and implemented basically this, but wasn't sure about simply using the point itself and not doing some sort of transformation regarding the domain.",
        "created_at": "2023-09-18T17:33:52.713000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Sometimes when implementing math, you can just implement what's written on the box.",
        "created_at": "2023-09-18T17:57:33.201000+00:00",
        "attachments": null
    },
    {
        "author": "sleepingshell",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yup, I've come to realize that. Implementing it has made me understand the math better, though.",
        "created_at": "2023-09-18T17:58:42.518000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh I was joking, too many times something looks deceptively simple and then you have a rabbit hole.\n\nLike you pick the formula for elliptic curve addition in the Elliptic Formula Database and then you learn that they don't deal with doubling, negation and infinity points ....",
        "created_at": "2023-09-18T18:02:36.235000+00:00",
        "attachments": null
    },
    {
        "author": "sleepingshell",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Deceptively simple is definitely a good term for it!",
        "created_at": "2023-09-18T18:25:08.098000+00:00",
        "attachments": null
    }
]