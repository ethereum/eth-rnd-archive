[
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I doubt avx1024 is coming soon, they removed avx512 already in Alder lake due to space and efficiency core compat",
        "created_at": "2023-05-14T05:49:39.833000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@755590043632140352\u003e \u003c@449019668296892420\u003e bitcoin also has hardcoded padding for merkle trees with intrinsics and C fallback. Unsure about ARM though",
        "created_at": "2023-05-14T05:53:20.622000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "They do here: https://github.com/bitcoin/bitcoin/blob/master/src/crypto/sha256_arm_shani.cpp#L9",
        "created_at": "2023-05-14T05:55:43.267000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And for \u003c@784446040073175040\u003e , you can use the Rpi GPU for sha256 using this: https://github.com/obijywk/qpusha",
        "created_at": "2023-05-14T05:57:56.006000+00:00",
        "attachments": null
    },
    {
        "author": "jcrtp",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Thanks, but I don't use the Pi anymore - I'm an rk3588 guy now",
        "created_at": "2023-05-14T05:59:15.732000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah both hardcoding the padding block and multi buffer hashing are not my ideas, but looping them in merkle trees is the difference. Adapting bitcoind's algo for us is not entirely trivial. I gave up when realized that dealing with RPIs with neon and no crypto extensions was going to be impossible",
        "created_at": "2023-05-14T09:43:25.785000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is really cool! I wasn't aware of this one, what's the cost of calling the GPU here? I suppose it's not justified to hash an attestation but definitely better to hash the full validator set",
        "created_at": "2023-05-14T09:46:34.765000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There's also AMX since Sapphire rapids that may be a game changer. I don't think it's currently useful since the only accelerator is TMUL, but if new ones are added one could load entire chunks to one tile with a single instruction",
        "created_at": "2023-05-14T11:33:03.910000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "didn't try, Rpi 4 are too low powered anyway now. But if Rpi5 (next year hopefully) uses something similar, I'll look intousing its GPU.",
        "created_at": "2023-05-14T11:35:11.744000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'll try to find the blog post, iirc it was 14x faster than CPU",
        "created_at": "2023-05-14T11:35:28.089000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://forums.raspberrypi.com/viewtopic.php?t=77231",
        "created_at": "2023-05-14T11:38:20.997000+00:00",
        "attachments": null
    },
    {
        "author": "mratsim",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "a different impl it seems",
        "created_at": "2023-05-14T11:38:58.733000+00:00",
        "attachments": null
    }
]