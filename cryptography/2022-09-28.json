[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Commit reveal probably.",
        "created_at": "2022-09-28T04:46:18.507000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Someone on the ZK podcast TG actually suggested a super good solution.",
        "created_at": "2022-09-28T04:46:39.545000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the cheapest ZK proof verification is around 500,000 gas.",
        "created_at": "2022-09-28T04:46:42.260000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The commitment can be an Ethereum address, and the proof can be a signature of any important parameters.",
        "created_at": "2022-09-28T04:47:35.560000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Then you just ecrecover",
        "created_at": "2022-09-28T04:48:05.839000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Oh, yeah.  If you can pick an arbitrary preimage then just \"sign\" something.",
        "created_at": "2022-09-28T04:48:19.069000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The tricky part was figuring out a preimage that doesn't restrict the proof from varying.",
        "created_at": "2022-09-28T04:49:35.099000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The idea here is that you just treat the preimage as a private key?",
        "created_at": "2022-09-28T04:50:58.238000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "IIRC, there are a handful of 32 byte values that aren't valid as private keys, so take care with that.",
        "created_at": "2022-09-28T04:51:52.513000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The rough goal here is that I'm specifying an Ethereum address as the salt to a CREATE2-generated address, the init code for the contract being nothing more than a signature verification and a delegatecall to the signed target.",
        "created_at": "2022-09-28T04:52:40.373000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So you can generate an address, have someone send to it, then have a wallet contract (e.g. an EIP-4337 wallet) drain any supported assets into your account in its ledger by deploying the code + providing its own function as a signed target.",
        "created_at": "2022-09-28T04:54:05.945000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The overall point of which is that when using a pooled contract wallet which maintains a hidden ledger, you don't have to identify yourself to receive assets using a standard address.",
        "created_at": "2022-09-28T04:55:39.394000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What do you mean by a \"hidden ledger\"?",
        "created_at": "2022-09-28T04:56:17.426000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "E.g. a ZK merkle ledger (viz. Tornado Nova)",
        "created_at": "2022-09-28T04:56:34.481000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The assets in the consumed address are pulled into the wallet contract, and you perform a ZK merkle update to credit yourself.",
        "created_at": "2022-09-28T04:57:36.406000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah, this is for depositing assets such that you define the withdraw address at deposit time but without linking deposit and withdraw?",
        "created_at": "2022-09-28T04:57:56.969000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not quite",
        "created_at": "2022-09-28T04:58:28.887000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Think of this perhaps as having an unwitting sender create a deposit for you.",
        "created_at": "2022-09-28T04:59:02.727000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The CREATE2-generated address acts as a sort of deposit note",
        "created_at": "2022-09-28T04:59:21.735000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Since you're not deploying the contract until after the sender has made the transfer, they know nothing about that they're sending to an anonymity pool",
        "created_at": "2022-09-28T05:00:21.540000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And, if this can all be done in init code, there's no runtime code actually stored in the deposit contract.",
        "created_at": "2022-09-28T05:01:35.904000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ooh, that is clever.",
        "created_at": "2022-09-28T05:02:13.678000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not even sure what it'd look like on etherscan, honestly. It'd probably require an archival node to see the history",
        "created_at": "2022-09-28T05:02:19.429000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So you could do a centralized exchange withdraw directly to an anonymity pool?",
        "created_at": "2022-09-28T05:02:34.375000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah",
        "created_at": "2022-09-28T05:02:39.920000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is L1 private transfers in high-efficiency form, IMO",
        "created_at": "2022-09-28T05:02:56.378000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The depositor would be able to link to the withdraw though, couldn't they?",
        "created_at": "2022-09-28T05:02:58.863000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "All they will see is the pool contract address and some proof data which specifies a merkle root transition",
        "created_at": "2022-09-28T05:03:29.574000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And that'll only be after the fact.",
        "created_at": "2022-09-28T05:04:06.061000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do you have a more complete writeup of this design somewhere?",
        "created_at": "2022-09-28T05:04:18.029000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/TheFrozenFire/slurp This is where I'm working on it",
        "created_at": "2022-09-28T05:04:34.243000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not following it fully, and I suspect I'll need to see the full design to understand better.",
        "created_at": "2022-09-28T05:04:34.565000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm currently ripping out the use of any ZK proof. That was early thinking.",
        "created_at": "2022-09-28T05:04:54.725000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Someone else created a version of my deterministic deployment proxy that has support for salts, which it sounds like you need here.",
        "created_at": "2022-09-28T05:13:01.107000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/Arachnid/deterministic-deployment-proxy/",
        "created_at": "2022-09-28T05:14:27.143000+00:00",
        "attachments": null
    },
    {
        "author": "frozenfire.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, found that. ðŸ™‚",
        "created_at": "2022-09-28T05:15:15.259000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm, I'm still not following how exactly this works/provides privacy.  I think it would be helpful if the readme included an example with Alice, Bob, Carol, Dave, etc. going through the process and describing what each know at each point in time.",
        "created_at": "2022-09-28T05:17:01.359000+00:00",
        "attachments": null
    }
]