[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Current situation:\n* Core devs do not have the cryptography background to review and/or fix bugs post-release for BLS stuff.\n* BLS is desired/needed for a number of different highly desirable use cases on Ethereum, and alternatives available are less secure or don't work.",
        "created_at": "2021-01-18T17:08:59.029000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(please correct me if above is wrong)",
        "created_at": "2021-01-18T17:09:05.949000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Open question: How do we get core devs to be more confident that either there will be *no* bugs in any of the client implementations or that if there are bugs they will get fixed quickly.  Core dev confidence + need of BLS in the community must be perceived as greater than the risk of bugs in BLS (chain split).",
        "created_at": "2021-01-18T17:11:10.889000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes. I personally would like to see the second point expanded. What I got from the call was:\n1. Interop with Eth2. AIUI, this doesn't matter until the merge. \n2. Interop with other chains (e.g. Celo). \n3. Improving the security of current ZK apps (h/t \u003c@!539495253418180618\u003e)\n4. Enabling new ZK apps (but it seems like BLS isn't the only option here).",
        "created_at": "2021-01-18T17:11:51.212000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also, yes, what is the contigency plan if something breaks on the major implementation.",
        "created_at": "2021-01-18T17:12:45.413000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Perhaps it would help to put together a more concrete list of what BLS brings to the table for Ethereum?  Rather than trying to increase core dev confidence we can focus on increasing the perception of value-add to Ethereum (such that it outweighs the fear)?",
        "created_at": "2021-01-18T17:13:08.820000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What specific apps have reduced security on mainnet?  What specific applications need BLS?  What other options are available to either of those sets of apps and what are the tradeoffs they are making by choosing a different primitive?",
        "created_at": "2021-01-18T17:14:05.908000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Or, on the flip side, maybe we'll realize that we don't really need BLS that badly after all.",
        "created_at": "2021-01-18T17:14:28.668000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "to elaborate on the above, the current elliptic curve precompile we have for altbn256 is known to suffer some attack reducing its security level below 128 bits (generally accepted by cryptographers as \"secure\")",
        "created_at": "2021-01-18T17:16:12.151000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so ideally we can deploy a curve that meets this threshold, e.g. BLS12-381",
        "created_at": "2021-01-18T17:16:34.490000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is there a simpler curve (one easier for core devs to audit themselves, or something with more battle tested libraries available) that meets those requirements?",
        "created_at": "2021-01-18T17:17:13.426000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i don't think it works like that",
        "created_at": "2021-01-18T17:17:24.205000+00:00",
        "attachments": null
    },
    {
        "author": "prestwich",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!552133098075193354\u003e even before the merge there are some cool tricks to allow group ownership of eth2 staking rewards via smart contract. these are very unlikely to be built tho",
        "created_at": "2021-01-18T17:23:17.620000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The security level of BLS12-381 is estimated to be somewhere between 117 and 120 bits: https://hackmd.io/@benjaminion/bls12-381#Security-level",
        "created_at": "2021-01-18T17:24:03.029000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah so 128 is a magic number üôÇ",
        "created_at": "2021-01-18T17:25:21.579000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "either way, from what i understand, altbn256 fails to meet the \"considered secure by cryptographers\" standard",
        "created_at": "2021-01-18T17:25:49.062000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "bls12-381 does meet the standard",
        "created_at": "2021-01-18T17:25:56.717000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\"mostly psychological\" üòÄ",
        "created_at": "2021-01-18T17:26:06.520000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e  Interop with Eth2. AIUI, this doesn't matter until the merge. \ndeeper than \"interop\", bls is a native curve to ethereum at this point so elevating it to a first class citizen in the EVM will open up many use cases around validators and accounts in general. A ton of ETH is secured and controlled by BLS so not being able to interact with this curve in the EVM will be restrictive\n^ not a terribly concrete argument...\n\nAlso of note: there are many BLS libs used in production today and the most performant (blst) is undergoing extensive formal verification. I would argue for not reinventing the wheel and re-using this libs as much as possible in any EVM exposed functionality",
        "created_at": "2021-01-18T17:29:18.135000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e bls is a native curve to ethereum\nYou mean for ETH2 specifically, or is it somewhere in ETH1 as well right now?",
        "created_at": "2021-01-18T17:31:48.925000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "eth2 specifically\nI consider eth2 the be the PoS consensus bootstrapped for Ethereum (eth1), so consider it native at this point. But... don't mean to squabble over semantics\n\nAssuming eth2 is to be the PoS consensus for Ethereum in the relative near future, BLS becomes a pretty native curve to the stack. Exposing it to the EVM/user-layer is very natural. (1) it will open up many use cases simply related to the fact that a ton of ETH is secured/controlled by BLS and (2) there are many robust implementations so we don't need to re-invent the wheel by rewriting the crypto libs",
        "created_at": "2021-01-18T17:34:52.622000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e deeper than \"interop\", bls is a native curve to ethereum at this point so elevating it to a first class citizen in the EVM will open up many use cases around validators and accounts in general.\n\nThis reveals the limit of my knowledge about the inner workings of clients, but does the precompile vs. evm384 make a difference to how \"first class\" of a citizen BLS is?",
        "created_at": "2021-01-18T17:48:07.332000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e Also of note: there are many BLS libs used in production today and the most performant (blst) is undergoing extensive formal verification. I would argue for not reinventing the wheel and re-using this libs\nI think the tradeoff here is we _could_ have all clients use the same library, which would reduce consensus failure risks, but it does lead us away from the \"multiple implementations\" ethos.",
        "created_at": "2021-01-18T17:49:32.681000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do eth2 clients use multiple BLS libraries?",
        "created_at": "2021-01-18T17:49:59.365000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To me it feels like we should be targeting native BLS long term, since we need native BLS for The Merge anyway.  Building something that lets people implement BLS in the EVM doesn't solve The Merge problem, which will still need BLS in the protocol.",
        "created_at": "2021-01-18T17:54:03.014000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There are multiple implementations available, not sure who uses what but Herumi used to be used a fair bit separate to BLST.  Not sure about the python/javascript libraries, they may be independent implementations.",
        "created_at": "2021-01-18T17:54:51.071000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My **feeling** or the matter is that this is really a question of \"when BLS precompile\" more than \"precompile vs 384\".",
        "created_at": "2021-01-18T17:55:05.078000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Perhaps not terribly concrete, but thanks for the perspective.",
        "created_at": "2021-01-18T17:56:35.632000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Some of the question of single vs multiple implementations comes down to the amount it is used.  Ethereum 2 is BLS-heavy, so all client implementations will gravitate to the fastest library.  If it is used rarely within the EVM then there may be more of a desire to use different implementations, even if that makes one client slower than another.",
        "created_at": "2021-01-18T17:57:53.409000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Why do we care about Celo?",
        "created_at": "2021-01-18T18:01:34.892000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!206016661470314496\u003e IMO I don't think Celo's roadmap should influence what Ethereum wants to do, but if we are going to do it anyways, working together makes sense?",
        "created_at": "2021-01-18T18:03:35.150000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What's in it for Ethereum to make it worth the risk?",
        "created_at": "2021-01-18T18:04:48.633000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think it is valuable to collect a list of uses for BLS on Ethereum.  Not all will be individually convincing for everyone, but in aggregate having the full set available may be useful in decision making.",
        "created_at": "2021-01-18T18:05:00.545000+00:00",
        "attachments": null
    },
    {
        "author": "karalabe",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(I'm deliberately a bit blunt here, no negativity meant tho' üôÇ",
        "created_at": "2021-01-18T18:05:34.544000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For me, the Celo case is not a strong factor in decision making.",
        "created_at": "2021-01-18T18:05:46.854000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e agreed. The Eth2 use case seems clear to me, but my fear with the ZK ones is that if BLS isn't the only curve or ends up not being suitable for whatever reason, it would be good to know in advance.",
        "created_at": "2021-01-18T18:05:47.135000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I forget who said it, but I was reasonably convinced by the argument that BLS is the best curve currently that fits a set of requirements.",
        "created_at": "2021-01-18T18:06:37.496000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And also that it is the only curve of those available that is actively seeking standardization.",
        "created_at": "2021-01-18T18:07:32.004000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A lot of that is trusting the cryptographers though.  I assumed arguments made were all true statements.",
        "created_at": "2021-01-18T18:07:58.362000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I heard: \n\n\u003e Diff for EVM384: 598 additions and 43 deletions\n\u003e Diff EIP-2537: +15,572 ‚àí487\n\nFor me, that makes a _huge_ difference.",
        "created_at": "2021-01-18T18:08:59.461000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What is a fundamental objection to use a single C library ‚Äúby default‚Äù?",
        "created_at": "2021-01-18T18:09:14.870000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You mean define the precompile as \"whatever this lib returns\", not define it as bls12-384, basically?",
        "created_at": "2021-01-18T18:10:55.840000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I mean call a single lib a reference, same as for secp256k1",
        "created_at": "2021-01-18T18:14:50.189000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "EVM384 is less code and cheaper audits, but then billions of burned from gas inefficiencies, and also questionable complexity difference for end users as it will be necessary to audit completely unorthodox implementation of the pairing itself using custom byte code generator",
        "created_at": "2021-01-18T18:17:41.839000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You'll still have to integrate 2537 eventually (The Merge) though, so all you are doing here is buying time IIUC.",
        "created_at": "2021-01-18T18:21:22.187000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I liked an idea to implement a single set of opcodes for a variable length modulus up to some bound, but it would require a lot of butchering of the EVM internals to have it efficient",
        "created_at": "2021-01-18T18:27:00.306000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it would seem like there would be a significant slowdown for variable length modulus.  Unless you had an additional opcode which takes the modulus/montgomery parameter and generates fast arithmetic code for subsequent use.",
        "created_at": "2021-01-18T18:34:36.238000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Montgomery reduction constant would be user supplied, but it should be possible to almost not loose the speed with just a few additional ‚Äúbreak‚Äù statements. The larger problem is that gas cost of such opcodes need to depend on the input to be efficient in the ‚Äúshort‚Äù modulus cases",
        "created_at": "2021-01-18T18:40:47.121000+00:00",
        "attachments": null
    }
]