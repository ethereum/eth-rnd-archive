[
    {
        "author": "tobiwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "A short question out of curiosity (I kind of just started to dig into Eth2.0 üòâ): Did I get it right that beside Witti or the Prysm testnet, there will be an \"official\" eth2-testnet soon (based on spec 0.12.1)?",
        "created_at": "2020-06-04T07:38:09.572000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "wohoo, my nimbus is synced up to head ü•≥",
        "created_at": "2020-06-04T08:28:50.226000+00:00",
        "attachments": []
    },
    {
        "author": "tersec",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!710132892197453824\u003e https://github.com/goerli/witti/issues/17",
        "created_at": "2020-06-04T08:47:45.387000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@203220829473996800\u003e do you know the metrics url for nimbus for the eth2stats client? There's no docu yet for this in the repo..",
        "created_at": "2020-06-04T13:49:20.744000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'll look, 1 sec",
        "created_at": "2020-06-04T13:53:55.282000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, I don't have the metrics configured for my previous schlesi nimbus node",
        "created_at": "2020-06-04T13:54:51.836000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But nimbus should support it, although with less metrics gauges than prysm/teku/lighthouse",
        "created_at": "2020-06-04T13:55:20.231000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "quick search in their source says `BASE_METRICS_PORT=8008` and configurable with:\n```\n  --metrics \\\n  --metrics-address=\"127.0.0.1\" \\\n  --metrics-port=\"some port here\" \\\n```",
        "created_at": "2020-06-04T13:56:51.912000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!645357884300853258\u003e Hope that helps. It's awesome that you're pushing nimbus onto witti. I currently don't have time for that, but will join with a nimbus node later again for sure üôÇ",
        "created_at": "2020-06-04T13:57:44.933000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "help message says the same, but even with all those options set the port doesn't show up in `netstat -nlp`. \u003c@449019668296892420\u003e bug?",
        "created_at": "2020-06-04T14:12:26.198000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "the metrics sit behind an insecure http server, so they need to be enabled with an extra `make NIMFLAGS=\"-d:insecure\" witti` during build (https://github.com/status-im/nim-beacon-chain#visualising-simulation-metrics)",
        "created_at": "2020-06-04T14:15:34.722000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@449019668296892420\u003e \u003c@!386151184869752834\u003e getting there, but it still fails because process_resident_memory_bytes is not explicitly declared as `TYPE gauge`. Better fix this in nimbus or in eth2stats?",
        "created_at": "2020-06-04T14:54:16.138000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "eth2stats doesn't realize that the whole section is marked as `gauge`",
        "created_at": "2020-06-04T14:55:45.204000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not sure tbh - that would largely depend on what the prometheus specification says is correct - let me summon our metrics wizard \u003c@456226577798135808\u003etalpalaru",
        "created_at": "2020-06-04T14:59:59.987000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It appears like this, on http://127.0.0.1:8008/metrics:\n```text\n# HELP process_info CPU and memory usage\n# TYPE process_info gauge\nprocess_virtual_memory_bytes 471379968.0\nprocess_resident_memory_bytes 253702144.0\nprocess_start_time_seconds 1591283054.55\nprocess_cpu_seconds_total 22.41\nprocess_max_fds 1024.0\nprocess_open_fds 19.0\n```",
        "created_at": "2020-06-04T15:05:58.879000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\"All lines for a given metric must be provided as one single group, with the optional HELP and TYPE lines first (in no particular order).\" - https://prometheus.io/docs/instrumenting/exposition_formats/#grouping-and-sorting",
        "created_at": "2020-06-04T15:08:17.251000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are you assuming that those HELP and TYPE lines are mandatory?",
        "created_at": "2020-06-04T15:08:34.707000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "For the other clients each of the metric fields has its own `HELP` and `TYPE` line.\nI wouldn't say those are mandatory, but they are expected by the current eth2stats client",
        "created_at": "2020-06-04T15:09:42.877000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "OK.",
        "created_at": "2020-06-04T15:10:08.719000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It would make my code more verbose, but it's doable on my side.",
        "created_at": "2020-06-04T15:11:47.721000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/Alethio/eth2stats-client/blob/9ebd46e2415c0e50b54c9eab504ec1bb31f33235/watcher/metrics/metrics.go#L85\n\nThis is what eth2stats client currently does for metrics extraction",
        "created_at": "2020-06-04T15:11:53.556000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do you have the exact error produced by that for our metrics?",
        "created_at": "2020-06-04T15:16:46.123000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Found `TextToMetricFamilies()`: https://github.com/prometheus/common/blob/df021da9b3f7560c0f38880d5817e9db13f63fdd/expfmt/text_parse.go#L100",
        "created_at": "2020-06-04T15:21:14.904000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The error I'm getting is this one:\nhttps://github.com/Alethio/eth2stats-client/blob/9ebd46e2415c0e50b54c9eab504ec1bb31f33235/watcher/metrics/metrics.go#L101",
        "created_at": "2020-06-04T15:24:18.533000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Any idea where `GetGauge()` is coming from?",
        "created_at": "2020-06-04T15:27:23.072000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The default type for a sample that doesn't match a \"# TYPE\" comment in a metric family seems to be `dto.MetricType_UNTYPED`",
        "created_at": "2020-06-04T15:34:07.391000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so looking at the prom docs, it looks like putting multiple metrics without a type line each is valid: https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exposition_formats.md#text-format-example",
        "created_at": "2020-06-04T16:53:16.031000+00:00",
        "attachments": []
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it may be the prometheus library that we are using to extract the data , it s quite picky, and a gauge type is expected",
        "created_at": "2020-06-04T17:19:19.848000+00:00",
        "attachments": []
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "will try and look at it later tonight as well",
        "created_at": "2020-06-04T17:19:32.915000+00:00",
        "attachments": []
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e The default type for a sample that doesn't match a \"# TYPE\" comment in a metric family seems to be `dto.MetricType_UNTYPED`\n\u003c@519657611394547732\u003e  GetGauge is from a prometheus parsing lib",
        "created_at": "2020-06-04T17:20:58.458000+00:00",
        "attachments": []
    },
    {
        "author": "stefantalpalaru",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So is `GetUntyped()` ;-)",
        "created_at": "2020-06-04T17:22:40.978000+00:00",
        "attachments": []
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah, which would then make it fail for prysm and teku :)))",
        "created_at": "2020-06-04T17:27:00.057000+00:00",
        "attachments": []
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i could make it try untyped if it fails gauge",
        "created_at": "2020-06-04T17:27:20.799000+00:00",
        "attachments": []
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but sooo fugly üôÇ",
        "created_at": "2020-06-04T17:27:29.886000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, making it typed identically for all clients sounds cleaner imo",
        "created_at": "2020-06-04T18:32:18.937000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "just by looking at that example from spec, I'd assume it's stateful and uses whatever type it last saw?",
        "created_at": "2020-06-04T18:56:14.973000+00:00",
        "attachments": []
    },
    {
        "author": "jonny.derp",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Should next_fork_version on Witti be 113?  If so, I'm  seeing a node with the correct fork_digest and next_fork_epoch, but the wrong next_fork_version.  Does anyone recognize this node? \n\nI am omitting your ip, but this is the info i have\n\n```json\n[\n    {\n        \"node_id\": \"9262472bf7063668ac1fc20dc3db9027abbddba4bb0f6fb29d1588e24954ecf4\",\n        \"next_fork_version\": 0,\n        \"next_fork_epoch\": 18446744073709552000,\n        \"fork_digest\": \"f6775d07\",\n        \"tcp4\": 13000,\n        \"udp4\": 12000,\n        \"subnet_ids\": [14],\n        \"seq_no\": 2140,\n        \"city\": \"Madrid\",\n        \"country\": \"Spain\"\n    }\n]\n```",
        "created_at": "2020-06-04T19:22:50.163000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Witti is small, the only user in spain on eth2stats is \"Agusx1211 üêô\" running Prysm",
        "created_at": "2020-06-04T19:25:01.524000+00:00",
        "attachments": []
    },
    {
        "author": "jonny.derp",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm ... is it tracking the head?",
        "created_at": "2020-06-04T19:26:40.522000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Client version says: \"Prysm/Git commit: {STABLE_GIT_COMMIT}. Built at: 2020-06-03T16:47:23Z\"  - looks like git was not available during the build. But at least we've the build time",
        "created_at": "2020-06-04T19:26:55.830000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, it's tracking the head",
        "created_at": "2020-06-04T19:27:02.660000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Question really is, do we have another user from spain? Eth2stats says it's running in madrid. Does that match your info?",
        "created_at": "2020-06-04T19:28:04.811000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Nvm, can't read, yes it matches",
        "created_at": "2020-06-04T19:28:28.178000+00:00",
        "attachments": []
    },
    {
        "author": "jonny.derp",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I can also tell you that this node is subscribed to subnet_id 14",
        "created_at": "2020-06-04T19:28:57.506000+00:00",
        "attachments": []
    },
    {
        "author": "jonny.derp",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so it *seems* like a validating node with one validator attached",
        "created_at": "2020-06-04T19:29:15.019000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sounds right, Agus is likely validating, he has attestations in his attestation pool showing on eth2stats",
        "created_at": "2020-06-04T19:30:06.579000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I tagged you in prysm discord, we can find just talk with Agus and see what prysm version is affected. I think it's an older bug",
        "created_at": "2020-06-04T19:30:39.523000+00:00",
        "attachments": []
    },
    {
        "author": "jonny.derp",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ok thanks...i'll dbl check and see if i see other Madrid nodes.  BTW, it would make sense bc i see quite a few fork_id mismatches on topaz",
        "created_at": "2020-06-04T19:34:29.182000+00:00",
        "attachments": []
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "update eth2stats client to try extracting mem from untyped as well, did not have a chance to test it yet with lighthouse",
        "created_at": "2020-06-04T20:46:32.948000+00:00",
        "attachments": []
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003chttps://goerli.etherscan.io/tx/0xa2784acaf5fdcf8cb1e9fe4d416d84a23aa5ff37677846f2a4bf1ce7f9bb1dd4\u003e\n\u003c@!203220829473996800\u003e  :^)",
        "created_at": "2020-06-04T21:21:19.286000+00:00",
        "attachments": []
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "*waiting*",
        "created_at": "2020-06-04T21:21:28.653000+00:00",
        "attachments": []
    },
    {
        "author": "torfbolt",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!386151184869752834\u003e looks like it's working, at least for prysm, lighthouse, nimbus \u0026 teku",
        "created_at": "2020-06-04T21:28:34.206000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Cool, was about to make one for Topaz \u003c@!97774605351010304\u003e",
        "created_at": "2020-06-04T21:32:01.600000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do we know who owns that validator? It would be nice if we can learn how they ended up making the bad deposit, and fix whatever tool they used",
        "created_at": "2020-06-04T21:32:38.660000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "*not make a deposit, but sign other operations",
        "created_at": "2020-06-04T21:33:02.947000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "For witti, before we get the bad validator slashed, it would be fun to try and make an attestation using it",
        "created_at": "2020-06-04T21:33:31.240000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, not to take away the fun, but Milagro BLS, through the python bindings at least, accepts the signature",
        "created_at": "2020-06-04T21:35:54.328000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So what's left is: checking teku BLS, and possibly Nimbus. And there is always a chance that a client has an edge case for this special BLS point, and splits off not due to BLS",
        "created_at": "2020-06-04T21:36:58.948000+00:00",
        "attachments": []
    },
    {
        "author": "butta",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e Do we know who owns that validator? It would be nice if we can learn how they ended up making the bad deposit, and fix whatever tool they used\n\u003c@203220829473996800\u003e  i wish, maybe if this gets public üôâ",
        "created_at": "2020-06-04T21:38:43.434000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I have a malicious proposer branch. Let me know If anyone is keen to slash my validators. https://github.com/prysmaticlabs/prysm/pull/6056",
        "created_at": "2020-06-04T21:53:50.401000+00:00",
        "attachments": []
    }
]