[
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Schlesi hasn't finalized for 50 epochs and if schlesi.beaconcha.in is correct, has probably forked.  Lighthouse blocks are being reported as orphaned after a teku block with 27 attestations (https://schlesi.beaconcha.in/block/8f288d29456e0cad006df54489ce2254c0e2fadf8b807eb6c6c3cfd985a07543).  The suspicious thing is I know there's a bug in Teku's block production where it's not including attestations from other validators in it's blocks - so usually it only has one attestation in the block.  27 attestations suggests something quite unusual has happened.",
        "created_at": "2020-05-17T06:34:49.970000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh interesting, my node also says ~50 epochs since finality",
        "created_at": "2020-05-17T06:36:30.740000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So Teku is rejecting Lighthouse blocks?",
        "created_at": "2020-05-17T06:36:39.308000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "interesting",
        "created_at": "2020-05-17T06:36:47.542000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My guess is that unusual thing (whatever it turns out to be) has found a consensus bug in either Lighthouse or Prsym causing a network split (that or there's enough Teku validators now to cause a split?).",
        "created_at": "2020-05-17T06:36:53.281000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not really sure what Teku is accepting right now.  The node I'm running locally is struggling for memory but has blocks from close to head, still digging in to see what's going on.",
        "created_at": "2020-05-17T06:37:17.738000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think there are 64 teku validators now ? \u003c@!557201004060213248\u003e  spun up a large amount a few days ago I think",
        "created_at": "2020-05-17T06:38:12.015000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Teku is definitely rejecting blocks - would have really helped if we'd included the actual block hash in the error message though...",
        "created_at": "2020-05-17T06:38:34.933000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "for prysm I am getting this right now \n```\n[2020-05-17 06:37:48]  INFO blockchain: Synced new block block=0x79e22324... epoch=4468 finalizedEpoch=4410 finalizedRoot=0xb0a6cdf0... slot=142989\n```",
        "created_at": "2020-05-17T06:38:50.790000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I can see this in my logs:\n\n```\n17 15:43:48.575 WARN Invalid gossip beacon block             block slot: 142719, block root: 0xaa21‚Ä¶5c48, outcome: InvalidSignature\n```",
        "created_at": "2020-05-17T06:39:29.657000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Latest valid block my Teku found was:",
        "created_at": "2020-05-17T06:39:45.088000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```teku_1           | 06:19:19.213 INFO  - Slot Event *** Slot: 142896, Block: 0x6c4b..7704, Epoch: 4465, Finalized checkpoint: 4410, Finalized root: 0xb0a6..3e26, Peers: 8```",
        "created_at": "2020-05-17T06:39:47.454000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is the last valid for lighthouse: `143002`",
        "created_at": "2020-05-17T06:40:40.175000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it just got one for ...004",
        "created_at": "2020-05-17T06:40:56.412000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The node in AWS which isn't struggling as much with memory issues has `\"head_slot\": \"141587\",\n  \"head_epoch\": \"4424\",\n  \"head_block_root\": \"0xcd86b6ca271fd09044b7543da1778dd2e09899f61058aa7eea357b9b9f5158ca\",`",
        "created_at": "2020-05-17T06:41:45.386000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "looks like beaconcha.in isn't following head",
        "created_at": "2020-05-17T06:42:45.867000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "latest block 5hrs ago",
        "created_at": "2020-05-17T06:42:51.932000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it says they are re-indexing",
        "created_at": "2020-05-17T06:43:40.698000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "looks like lighthouse is importing prysm blocks",
        "created_at": "2020-05-17T06:44:17.971000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i have a block with this graffitti `prysm/v0.12 - handelaar\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000`",
        "created_at": "2020-05-17T06:44:27.563000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "there are multiple forked branches right now in the blocktree \n\u003c@!361447803194441738\u003e one of prysm's branches does have 143002",
        "created_at": "2020-05-17T06:44:35.017000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "143012 now",
        "created_at": "2020-05-17T06:45:10.738000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that's in my canonical chain too",
        "created_at": "2020-05-17T06:45:38.406000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "there is also a completely separate branch with \n```\n142665\n```\nas the head",
        "created_at": "2020-05-17T06:46:02.573000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e 143012 now\n\u003c@!476250636548308992\u003e I also have this, graffitti is `Happy Schlesi Launch Everyone\\!\u0000`",
        "created_at": "2020-05-17T06:46:33.216000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "seems like we agree on the current head then",
        "created_at": "2020-05-17T06:46:51.448000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah",
        "created_at": "2020-05-17T06:46:54.962000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!340345049063882753\u003e do you know what is your current head right now ?",
        "created_at": "2020-05-17T06:47:04.209000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm running a teku node on schlesi and it just reported:\n```\nEpoch Event *** Epoch: 4470, Justified checkpoint: 4411, Finalized checkpoint: 4410, Finalized root: 0xb0a6..3e26\n```",
        "created_at": "2020-05-17T06:48:44.611000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm seeeing 141587 as the latest block on Teku.",
        "created_at": "2020-05-17T06:49:10.254000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My (potentially wrong) guess is that Prysm and Lighthouse agree and Teku disagrees",
        "created_at": "2020-05-17T06:50:24.011000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah that is part of the forked branch",
        "created_at": "2020-05-17T06:50:29.917000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "might explain our finality issues",
        "created_at": "2020-05-17T06:50:44.537000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not surprised Teku has disagreed, I'm just surprised we have enough validators to prevent finality.",
        "created_at": "2020-05-17T06:50:51.695000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But maybe we got popular thanks to Ben linking to his instructions from eth2.news....",
        "created_at": "2020-05-17T06:51:11.257000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But why does beaconcha.in currently report every teku block I can find as \"proposed\" and not \"orphaned\"?",
        "created_at": "2020-05-17T06:52:05.154000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah no some are orphaned, some are proposed.",
        "created_at": "2020-05-17T06:53:35.228000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that last ~50 blocks on there have 0 attestations",
        "created_at": "2020-05-17T06:53:46.126000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "take that, finality!",
        "created_at": "2020-05-17T06:54:06.372000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh no",
        "created_at": "2020-05-17T06:54:31.039000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "sorry i'm horribly wrong",
        "created_at": "2020-05-17T06:54:35.810000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah, someone may be running the same keys on multiple validators (or beaconcha.in is just confused):",
        "created_at": "2020-05-17T06:55:42.825000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "unknown.png",
                "content": "846ab2b677072e50d839e7a2c45018bfb3292c5145404959790b11e9dd216dd8"
            }
        ]
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oof",
        "created_at": "2020-05-17T06:55:57.874000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I saw a duplicate proposal warning on lighthouse before too",
        "created_at": "2020-05-17T06:56:21.392000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that guy needs to be slashed",
        "created_at": "2020-05-17T06:56:24.118000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do we have any slashing detection running on schlesi?  Because that may be the key to getting some finality.",
        "created_at": "2020-05-17T06:56:51.172000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "afaik we do not have users running a slasher in schlesi",
        "created_at": "2020-05-17T06:57:16.377000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "although I can start running one",
        "created_at": "2020-05-17T06:57:23.215000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "validators 164 and 240 are both create duplicate blocks as well.",
        "created_at": "2020-05-17T06:57:42.551000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think there's a lot of money to be made running a slasher at the moment.",
        "created_at": "2020-05-17T06:57:54.483000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are the \"Happy Schlesi Launch...\" graffiti's \u003c@!557201004060213248\u003e?",
        "created_at": "2020-05-17T06:58:27.454000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I was gonna look into it \u003c@476250636548308992\u003e",
        "created_at": "2020-05-17T06:58:28.438000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Been thinking about getting one running lol",
        "created_at": "2020-05-17T06:58:40.996000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah a slasher would be very useful here",
        "created_at": "2020-05-17T06:58:56.244000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "alright running a slasher now",
        "created_at": "2020-05-17T07:04:24.486000+00:00",
        "attachments": null
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "damn it... just as i sent my deposits in :))",
        "created_at": "2020-05-17T07:39:51.642000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It‚Äôs a testnet we‚Äôre supposed to test this stuff.",
        "created_at": "2020-05-17T07:48:21.352000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think what should happen from here is that one of the forks should wind up long enough that inactivity penalties kick out enough validators who reject that fork for it to start finalising. That may happen on multiple forks (ie chain split) but at least we should get a clear picture of which clients are on which side of the split.",
        "created_at": "2020-05-17T07:49:30.988000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That will actually take very long to mainfest",
        "created_at": "2020-05-17T07:49:51.925000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "if we are using mainnet params",
        "created_at": "2020-05-17T07:49:58.510000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah ^ isn't that what the weak subjectively period is for?",
        "created_at": "2020-05-17T07:50:24.018000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Another option is to pump up the validator count with clients that agree",
        "created_at": "2020-05-17T07:50:48.615000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah but validators can't get accepted no?",
        "created_at": "2020-05-17T07:51:31.945000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Due to a lack of finality",
        "created_at": "2020-05-17T07:51:41.687000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "depends, we only need 50% for eth1 blocks",
        "created_at": "2020-05-17T07:51:51.749000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Maybe we could swap the Teku validators somewhere else",
        "created_at": "2020-05-17T07:51:56.064000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but that's a good point",
        "created_at": "2020-05-17T07:52:04.478000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Even if eth1 data updates, validator set won't add new validators until finality is reached",
        "created_at": "2020-05-17T07:53:12.185000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh yeah right.. haven't poked around in that code for ages. Might be a bit rusty.",
        "created_at": "2020-05-17T07:53:49.137000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Whos got the most Teku validators? Lol",
        "created_at": "2020-05-17T07:53:50.812000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It would be cool if we could find the first block that the LH/Prysm chain agrees upon but Teku doesn't",
        "created_at": "2020-05-17T07:54:33.795000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's not immedately clear how to do that.. but I suspect we'd need to use the Teku DB",
        "created_at": "2020-05-17T07:55:22.532000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think we can, give me a sec.",
        "created_at": "2020-05-17T07:55:37.355000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/ethereum/eth2.0-specs/blob/dev/specs/phase0/beacon-chain.md#is_eligible_for_activation",
        "created_at": "2020-05-17T07:55:37.401000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah I have a teku db I can dig into more tomorrow.  I'm also thinking I'll sync a lighthouse and prysm then try syncing teku off of only them (no discovery) and see where it stops.",
        "created_at": "2020-05-17T07:55:49.043000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh that's a good idea too!",
        "created_at": "2020-05-17T07:56:18.434000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Perhaps not a 6pm Sunday evening job lol",
        "created_at": "2020-05-17T07:56:27.026000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We've done enough pretending that testnet problems deserve a mainnet response for this week üòõ",
        "created_at": "2020-05-17T07:56:50.582000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah on a Sunday evening I like running the drill where I've been hit by a bus and everyone else has to work it out. üôÇ",
        "created_at": "2020-05-17T07:57:18.731000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But I have a little time now so am just starting to sync a local lighthouse.",
        "created_at": "2020-05-17T07:57:33.282000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is master the right branch to use?",
        "created_at": "2020-05-17T07:57:38.218000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yep",
        "created_at": "2020-05-17T07:57:51.617000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Get in now before I drop our massive refactor in an hour or so üòõ",
        "created_at": "2020-05-17T07:58:12.651000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We had to re-write our concurrency stuff to suit Rust's new async/await language feature",
        "created_at": "2020-05-17T07:58:32.882000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2020-05-17T08:04:26.415000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "fork.png",
                "content": "6e0896dec1f3fdbeb5c177f671887bcea483245d957aecebf2b8ed2c8fdcbe28"
            }
        ]
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is from prysm's block tree, this is where the initial fork happens",
        "created_at": "2020-05-17T08:04:50.787000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "prysm/lighthouse are on the bottom most branch , while teku is in the branch above",
        "created_at": "2020-05-17T08:05:43.009000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "seems like \n```\nslot: 141185\nvotes: 232\nweight: 7684\ngraffiti: 4861707079205363\n```\nwas a problematic block, although I dont have its root",
        "created_at": "2020-05-17T08:06:19.564000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://gist.github.com/ajsutton/35b7447bd1d7ebafa728efaf471e9150 is what I have for the block at slot 141185.",
        "created_at": "2020-05-17T08:07:39.124000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "From teku",
        "created_at": "2020-05-17T08:07:41.988000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "what about 141218 ?",
        "created_at": "2020-05-17T08:08:28.445000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No block at that slot.",
        "created_at": "2020-05-17T08:09:02.648000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "141214 was the closest we accepted.",
        "created_at": "2020-05-17T08:09:22.357000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah k , interesting",
        "created_at": "2020-05-17T08:09:39.013000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm",
        "created_at": "2020-05-17T08:12:14.865000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "this is confusing",
        "created_at": "2020-05-17T08:12:17.937000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://schlesi.beaconcha.in/block/141218",
        "created_at": "2020-05-17T08:12:18.899000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "seems like teku proposed the block...",
        "created_at": "2020-05-17T08:12:28.291000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I have no idea how it's possible, but I have been trying to work out why my metrics suggest that the teku validator published a block and yet it's chain head hasn't progressed.",
        "created_at": "2020-05-17T08:12:57.733000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The validators in the same process, so we import the block without any extra validation..",
        "created_at": "2020-05-17T08:13:22.628000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "probably what complicates this is that prysm and teku are running a common set of validators",
        "created_at": "2020-05-17T08:13:44.413000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah so the gossip network probably split as well since you don't rebroadcast a block for a slot you've already seen.",
        "created_at": "2020-05-17T08:14:22.887000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "the votes for each block are all messed up, because you have double proposals and attestations",
        "created_at": "2020-05-17T08:14:31.839000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e Yeah so the gossip network probably split as well since you don't rebroadcast a block for a slot you've already seen.\nwonder if its a good idea now",
        "created_at": "2020-05-17T08:15:17.862000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "we have two different set of committee assingments",
        "created_at": "2020-05-17T08:15:28.977000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so its very likely a slot can have two different blocks now",
        "created_at": "2020-05-17T08:15:41.981000+00:00",
        "attachments": null
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e I think what should happen from here is that one of the forks should wind up long enough that inactivity penalties kick out enough validators who reject that fork for it to start finalising. That may happen on multiple forks (ie chain split) but at least we should get a clear picture of which clients are on which side of the split.\n\u003c@340345049063882753\u003e  would love to see that in action",
        "created_at": "2020-05-17T08:18:30.508000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not sure we're going to be that patient.  I hadn't thought about how long it can take.",
        "created_at": "2020-05-17T08:18:59.199000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's about 20 days for a 50/50 split iirc. For the inactivity leak to start kicking off validators.",
        "created_at": "2020-05-17T08:20:21.793000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "30 days on current params, by my calcs. Split proportion is irrelevant of course.",
        "created_at": "2020-05-17T08:23:00.906000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My lighthouse sync has stopped making progress",
        "created_at": "2020-05-17T08:23:39.869000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\nMay 17 18:18:18.032 INFO Syncing                                 est_time: 1 hrs 26 mins, speed: 9.33 slots/sec, distance: 48068 slots (7 days 16 hrs), peers: 16, service: slot_notifier\nMay 17 18:18:30.036 INFO Syncing                                 est_time: --, speed: 0.00 slots/sec, distance: 48069 slots (7 days 16 hrs), peers: 16, service: slot_notifier\n```",
        "created_at": "2020-05-17T08:23:48.329000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's been repeating that last line since.",
        "created_at": "2020-05-17T08:24:02.360000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "haha yeah schlesi is a wild place at the moment",
        "created_at": "2020-05-17T08:24:21.919000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "generally it resumes",
        "created_at": "2020-05-17T08:24:28.314000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "you can try restarting it",
        "created_at": "2020-05-17T08:24:31.640000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "or you can try the `stable-futures` branch which has all the latest patches",
        "created_at": "2020-05-17T08:24:45.849000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm happy to just restart.",
        "created_at": "2020-05-17T08:24:56.330000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yep it's off again.",
        "created_at": "2020-05-17T08:25:23.472000+00:00",
        "attachments": null
    },
    {
        "author": "jc6763",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm please keep and start a new testnet instead so we can see inactivity leak actually tested?",
        "created_at": "2020-05-17T08:25:40.688000+00:00",
        "attachments": null
    },
    {
        "author": "jc6763",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My lighthouse is still ok. Slot 143531",
        "created_at": "2020-05-17T08:26:10.680000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We will get to running those tests, but in a more deliberate way.  Fixing the chain split is top priority and bringing fixed nodes onto schlesi and seeing them rejoin is the best test of that.",
        "created_at": "2020-05-17T08:26:39.187000+00:00",
        "attachments": null
    },
    {
        "author": "jc6763",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e ```\n\u003e May 17 18:18:18.032 INFO Syncing                                 est_time: 1 hrs 26 mins, speed: 9.33 slots/sec, distance: 48068 slots (7 days 16 hrs), peers: 16, service: slot_notifier\n\u003e May 17 18:18:30.036 INFO Syncing                                 est_time: --, speed: 0.00 slots/sec, distance: 48069 slots (7 days 16 hrs), peers: 16, service: slot_notifier\n\u003e ```\n\u003c@340345049063882753\u003e  anyone else seeing this? My lighthouse still seems ok",
        "created_at": "2020-05-17T08:28:38.810000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@527027407228502037\u003e this is for a new peer doing its initial sync.  It's going again so not a big deal (especially since it sounds like there's more fixes already on another branch)",
        "created_at": "2020-05-17T08:29:13.475000+00:00",
        "attachments": null
    },
    {
        "author": "jc6763",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e \u003c@527027407228502037\u003e this is for a new peer doing its initial sync.  It's going again so not a big deal (especially since it sounds like there's more fixes already on another branch)\n\u003c@340345049063882753\u003e  thank you got it. Since i missed that, it‚Äôs why i thought by ‚Äúrestart‚Äù you meant restarting the whole testnet",
        "created_at": "2020-05-17T08:41:24.973000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Restarting the whole testnet definitely solves a bunch of sync problems but is maybe a bit excessive. üôÇ",
        "created_at": "2020-05-17T08:42:47.994000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "do we know why?",
        "created_at": "2020-05-17T09:17:03.976000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e My guess is that unusual thing (whatever it turns out to be) has found a consensus bug in either Lighthouse or Prsym causing a network split (that or there's enough Teku validators now to cause a split?).\n\u003c@!340345049063882753\u003e my 64 teku validators activated tonight",
        "created_at": "2020-05-17T09:22:21.081000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e Are the \"Happy Schlesi Launch...\" graffiti's \u003c@!557201004060213248\u003e?\n\u003c@!361447803194441738\u003e yes",
        "created_at": "2020-05-17T09:22:36.243000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think a few of them share the same keys as the prysm validators",
        "created_at": "2020-05-17T09:23:11.142000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e ah, someone may be running the same keys on multiple validators (or beaconcha.in is just confused):\n\u003c@!340345049063882753\u003e this must be an issue with the beacon chain explorer. validator 42 is mine and there is no way I'm sharing keys between teku and prysm, these nodes don't even run on the same machine.",
        "created_at": "2020-05-17T09:28:52.881000+00:00",
        "attachments": null
    },
    {
        "author": "alex.g.t",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i had 5 teku validators jn the queue as well, but they did not reach activation",
        "created_at": "2020-05-17T09:33:39.953000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "even with the 64 teku validators, we should still have more than 70% on the other chain, I'm surprised we lost finality",
        "created_at": "2020-05-17T09:33:46.764000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I can swap over my teku validators to lighthouse to restore finality.",
        "created_at": "2020-05-17T09:34:16.767000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "there is not much missing to get finality back",
        "created_at": "2020-05-17T09:34:25.005000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "how many votes do we see on the latest blocks?",
        "created_at": "2020-05-17T09:34:33.499000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "let me check if all my validators are in good shape",
        "created_at": "2020-05-17T09:34:43.945000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "my prysm logs are a blood bath",
        "created_at": "2020-05-17T09:36:32.817000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "Screenshot_at_2020-05-17_11-36-08.png",
                "content": "ec447b3d4ed878342d9df0aafb295a2793c86f156b5111c42f302d186cbd0b9c"
            }
        ]
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "do we know what causes that? It's really noisy",
        "created_at": "2020-05-17T09:36:45.943000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "those are mostly cosmetic, I will get them fixed in a new PR",
        "created_at": "2020-05-17T09:37:42.542000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I will move the validators tomorrow if you don't mind üôÇ",
        "created_at": "2020-05-17T09:47:59.217000+00:00",
        "attachments": null
    },
    {
        "author": "donschoe",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "let's enjoy the sunday",
        "created_at": "2020-05-17T09:48:09.021000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "no worries, enjoy your sunday üôÇ",
        "created_at": "2020-05-17T09:48:49.322000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Could the many attestations and failed signature check be related to the empty-aggregation bits chain split possibility I described a while back?",
        "created_at": "2020-05-17T10:31:14.782000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, 100% now that I'll rush to get that eth2 data vote tracking + deposit tracking website online. Seems important to see what is happening here",
        "created_at": "2020-05-17T10:33:52.661000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, if I can get my hands on the duplicate block headers, I could get some slashings on schlesi gossip",
        "created_at": "2020-05-17T10:35:50.631000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, you can hover your mouse on eth2stats on the head slot, to see what the head block root is. And all the teku nodes are basically on their own branch. Including mine.",
        "created_at": "2020-05-17T10:45:26.822000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Sounds like the block explorer was just confused and there aren‚Äôt likely to be slashable blocks around. Will be very interesting to eventually hear from their side what happened - especially as it appeared to pick the teku branch as canonical and I‚Äôm pretty sure they‚Äôre not running teku.",
        "created_at": "2020-05-17T11:05:37.609000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Found 15 double proposals in the explorer. Will figure out some way to extract the header data, then verify signatures, and slash if they are valid",
        "created_at": "2020-05-17T11:26:54.147000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I dont think they are accurate",
        "created_at": "2020-05-17T11:27:13.550000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It basically showed the same proposer proposing for the same slot with 2 different validator clients",
        "created_at": "2020-05-17T11:27:55.248000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it might be indexing the blocks incorrectly",
        "created_at": "2020-05-17T11:28:16.945000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`We are currently re-indexing our database. Displayed data might be inaccurate and outdated.`",
        "created_at": "2020-05-17T11:29:09.164000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "will verify one manually as sanity check",
        "created_at": "2020-05-17T11:29:33.208000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "sounds good thanks üëç , I tried running the slasher but it found no double proposals",
        "created_at": "2020-05-17T11:29:55.779000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "only instances of double votes",
        "created_at": "2020-05-17T11:30:10.098000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, explorer doesn't show body-roots. Will try fetch it from my schlesi nodes",
        "created_at": "2020-05-17T11:30:36.527000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ok, fetched the latest duplicate block (according to explorer) from one of my lighthouse nodes, and it actually has two different proposers. Can confirm that the explorer data is wrong.",
        "created_at": "2020-05-17T11:37:30.092000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Interestingly, the `141185` slot is just after an epoch transition.",
        "created_at": "2020-05-17T11:55:30.006000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "$10 on balances üòõ",
        "created_at": "2020-05-17T11:55:58.125000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And I've debug logging on my teku node, and yet it didn't log anything special, it just continued on like nothing happened there",
        "created_at": "2020-05-17T11:56:46.514000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Here is the log surrounding that block: https://gist.github.com/protolambda/c12f14c14119e96a96d8df6c2e3ecaa8",
        "created_at": "2020-05-17T11:58:09.217000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "maybe we can give tcli the prestate + block at 141185",
        "created_at": "2020-05-17T11:58:13.306000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it should give some sort of error from it",
        "created_at": "2020-05-17T11:58:47.902000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh just saw the logs",
        "created_at": "2020-05-17T11:59:15.699000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so it was valid ?",
        "created_at": "2020-05-17T11:59:19.642000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm",
        "created_at": "2020-05-17T11:59:22.733000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It didn't log any errors, it just kept on going",
        "created_at": "2020-05-17T11:59:34.449000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yes, will extract some states and blocks",
        "created_at": "2020-05-17T11:59:38.547000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'll check my lighthouse and prysm logs now",
        "created_at": "2020-05-17T11:59:44.943000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "sounds good , interested to know the root cause of this.",
        "created_at": "2020-05-17T12:00:36.311000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "seems like that block was valid to teku nodes from the logs, wonder why \nit ended up forking",
        "created_at": "2020-05-17T12:01:01.655000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also have my lighthouse node in debug verbosity. And when I search the log I see some node is requesting blocks-by-range sync from specifically 141184",
        "created_at": "2020-05-17T12:02:46.696000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just started getting some invalid SSZ on my Schlesi node:\n\n```\nMay 17 22:03:42.434 WARN RPC Error                               Error: SSZDecodeError(OffsetOutOfBounds(1970365778)), request_id: 18446744073709551615, Peer: PeerId(\"QmatuVHteVNhjQxAyKukhLpVCWFgALenyLN2CsjYSAgcNK\"), service: router\n```",
        "created_at": "2020-05-17T12:08:22.023000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Came from Nimbus it seems",
        "created_at": "2020-05-17T12:10:50.703000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!498009160982724610\u003e's `lighthouse/connected_peers` endpoint is handy:\n\n```\n{\n        \"peer_id\": \"QmaS97bSZmR63eYADD283q9DKGnJqWFCQ7hcZijfv8bv9G\",\n        \"peer_info\": {\n            \"_status\": \"Healthy\",\n            \"reputation\": 35,\n            \"client\": {\n                \"kind\": \"Lighthouse\",\n                \"version\": \"v0.2.0-unstable\",\n                \"os_version\": \"x86_64-linux\",\n                \"protocol_version\": \"lighthouse/libp2p\",\n                \"agent_string\": \"Lighthouse/v0.2.0-unstable/x86_64-linux\"\n            },\n            \"connection_status\": {\n                \"Connected\": {\n                    \"in\": 0,\n                    \"out\": 1\n                }\n            },\n            \"listening_addresses\": [\n                \"/ip4/54.164.192.55/tcp/13000\",\n                \"/ip4/127.0.0.1/tcp/13000\",\n                \"/ip4/10.3.3.115/tcp/13000\"\n            ],\n            \"sync_status\": {\n                \"Synced\": {\n                    \"info\": {\n                        \"status_head_slot\": 144625,\n                        \"status_head_root\": \"0x19c00e4fa5f4d754c189309ad7f8147827b177d8f985dac639f384890bd3aa7b\",\n                        \"status_finalized_epoch\": 4410,\n                        \"status_finalized_root\": \"0xb0a6cdf0af8cdbd28defefebfdf9a005476254e6025775186f4397e113003e26\"\n                    }\n                }\n            },\n            \"meta_data\": {\n                \"seq_number\": 1,\n                \"attnets\": \"0x0000000000000000\"\n            }\n        }\n    }\n```",
        "created_at": "2020-05-17T12:11:45.590000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!361447803194441738\u003e Thanks, will check my nimbus logs",
        "created_at": "2020-05-17T12:14:36.774000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "From lighthouse:\n```\nMay 17 00:37:00.677 DEBG Successfully processed gossip block     root: 0x95f578cd1a3a5bfdeb8aa43322c7ca7ea87f1aa1a43b384c7a2e2a96165679e5, slot: 141185, graffiti: Happy Schlesi Launch Everyone\\!\n```\nSo at least lighthouse could see that \"Happy schlesi\" (`4861707079207363686c657369`) branch that completely forked off in the screenshot of Nishant.",
        "created_at": "2020-05-17T12:17:24.363000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right after it was even the head of the lighthouse node.",
        "created_at": "2020-05-17T12:18:14.907000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\nMay 17 00:37:12.469 DEBG Successfully processed gossip block     root: 0xde8e865a1bb4257cb45664d5ffd0bbb82753cecf7ff416b4c1fa697d9af4efaf, slot: 141186, graffiti: prysm/v0.12 - handelaar\nMay 17 00:37:12.481 DEBG Head beacon block                       slot: 141186, root: 0xde8e‚Ä¶efaf, finalized_epoch: 4410, finalized_root: 0xb0a6‚Ä¶3e26, justified_epoch: 4411, justified_root: 0xc8f9‚Ä¶51ce, service: beacon\n```",
        "created_at": "2020-05-17T12:22:18.906000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\nMay 17 00:43:46.002 DEBG Successfully processed gossip block     root: 0x1039b2996ce46f882ef3bbcf564399215a4ffede9d43458b2e9062ab4d5c7b60, slot: 141217, graffiti: teku/v0.11.2-dev-fb7cc253\nMay 17 00:43:46.319 DEBG Successfully processed gossip block     root: 0x458f7ed1425108b450d6eb9a16a6fceecda13eda17e992853552e3020b0c71fa, slot: 141218, graffiti: teku/v0.11.2-dev-fb7cc253\n```",
        "created_at": "2020-05-17T12:23:27.399000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And right after that, it doesn't change its head to the smaller chain, and stays on 141214:\n```\nMay 17 00:43:48.557 DEBG Sending Status Request                  head_slot: 141214, head_root: 0x1b31‚Ä¶4a1d, finalized_epoch: Epoch(4410), finalized_root: 0xb0a6cdf0af8cdbd28defefebfdf9a005476254e6025775186f4397e113003e26, fork_digest: [153, 37, 239, 214], peer: PeerId(\"16Uiu2HAmSUvW1q4yH4QzZGpWHrLvpCzPdufSFex5odbhNj6zDEjQ\"), service: network\n```",
        "created_at": "2020-05-17T12:28:39.695000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Meanwhile, my teku logs show 141218 as empty slot",
        "created_at": "2020-05-17T12:31:02.254000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Prysm:\n```\ntime=\"2020-05-17 00:43:45\" level=info msg=\"Synced new block\" block=0x458f7ed1... epoch=4413 finalizedEpoch=4410 finalizedRoot=0xb0a6cdf0... prefix=blockchain slot=141218\ntime=\"2020-05-17 00:43:45\" level=info msg=\"Finished applying state transition\" attestations=0 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\n```",
        "created_at": "2020-05-17T12:36:22.312000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "wierdest part is that block was produced by a teku validator",
        "created_at": "2020-05-17T12:37:06.809000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\ntime=\"2020-05-17 00:44:32\" level=error msg=\"Failed to handle p2p pubsub\" error=\"attestation is not aggregated\" prefix=sync topic=\"/eth2/9925efd6/beacon_aggregate_and_proof/ssz_snappy\"\ntime=\"2020-05-17 00:44:36\" level=debug msg=\"Executing state transition on block\" prefix=blockchain root=0x5dadfd03... slot=141223\n```",
        "created_at": "2020-05-17T12:37:27.540000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is prysm",
        "created_at": "2020-05-17T12:37:40.646000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, I'm getting sick of the long `\"Fork ENR mismatches between peer and local node\"` (lots of unformatted data afterwards) debug lines. We should fix the topaz \u003c\u003e schlesi collision in discovery",
        "created_at": "2020-05-17T12:39:50.945000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And another one:\n```\ntime=\"2020-05-17 00:42:56\" level=error msg=\"Failed to handle p2p pubsub\" error=\"attestation is not aggregated\" prefix=sync topic=\"/eth2/9925efd6/beacon_aggregate_and_proof/ssz_snappy\"\n```",
        "created_at": "2020-05-17T12:41:16.605000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What does it mean if an attestation is not aggregated?",
        "created_at": "2020-05-17T12:42:44.629000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "you can ignore that error for now",
        "created_at": "2020-05-17T12:43:17.032000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/prysmaticlabs/prysm/issues/5649",
        "created_at": "2020-05-17T12:43:18.048000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And eventually Prysm ends up with:\n```\ntime=\"2020-05-17 07:22:38\" level=error msg=\"Failed to handle p2p pubsub\" error=\"could not process block: could not execute state transition: could not process block in slot 143213: could not process block header: proposer index: 316 is different than calculated: 289\" prefix=sync topic=\"/eth2/9925efd6/beacon_block/ssz_snappy\"\n```\nJust being completely out of sync with whatever the block is from",
        "created_at": "2020-05-17T12:43:24.446000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Grepped 2850 of those \"failed to handle p2p pubsub\" messages, in the last 70000 debug log lines.",
        "created_at": "2020-05-17T12:45:06.405000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "First prysm failing state transition:\n```\ntime=\"2020-05-17 00:51:25\" level=error msg=\"Failed to handle p2p pubsub\" error=\"could not process block: could not execute state transition: could not process block in slot 141257: could not process block header: proposer index: 317 is different than calculated: 150\" prefix=sync topic=\"/eth2/9925efd6/beacon_block/ssz_snappy\"\n```",
        "created_at": "2020-05-17T12:46:47.909000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh no, shuffling! i just lost $10",
        "created_at": "2020-05-17T12:47:20.830000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This proposer difference actually matches the double proposer error in the explorer",
        "created_at": "2020-05-17T12:47:42.868000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://schlesi.beaconcha.in/block/69e7939e68fb95bc95387badcdabe37c52a6522f5d648e089379ed5293c666d8\nhttps://schlesi.beaconcha.in/block/01fccd4e1c6a8abcfc27d12256ea275758291f817bf81df38e91e66bb7dabe65",
        "created_at": "2020-05-17T12:48:32.274000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Both marked as 150, while one of them should be 317",
        "created_at": "2020-05-17T12:49:06.919000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "137 ?",
        "created_at": "2020-05-17T12:49:37.728000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "whoops, 317",
        "created_at": "2020-05-17T12:49:45.949000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah k",
        "created_at": "2020-05-17T12:49:58.968000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "317: https://gist.github.com/protolambda/f318745349e852022a93869292b39f72",
        "created_at": "2020-05-17T12:52:28.074000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "retrieved from lighthouse",
        "created_at": "2020-05-17T12:52:34.634000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "150: https://gist.github.com/protolambda/bdbc43705771fe943c7394c0dfc194b1\nalso retrieved from lighthouse",
        "created_at": "2020-05-17T12:54:05.784000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "2 blocks at the same slot from different side of the fork",
        "created_at": "2020-05-17T12:55:14.421000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "did lighthouse process both these blocks fine ?",
        "created_at": "2020-05-17T12:55:26.698000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "exactly, but a deep fork. And lighthouse processed them fine",
        "created_at": "2020-05-17T12:55:36.712000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So prysm likely has a proposer index computation or caching bug",
        "created_at": "2020-05-17T12:56:38.154000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "seems like it...",
        "created_at": "2020-05-17T12:57:07.751000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "However, that doens't have to be the cause of the fork which induced this. Still investigating",
        "created_at": "2020-05-17T12:57:09.446000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah but nevertheless a good find üôÇ",
        "created_at": "2020-05-17T12:57:25.684000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e oh no, shuffling! i just lost $10\nNot quite yet, the fork could be caused by something else. This is \"just\" a bug afterwards that makes the fork worse.",
        "created_at": "2020-05-17T12:59:46.144000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e May 17 22:03:42.434 WARN RPC Error                               Error: SSZDecodeError(OffsetOutOfBounds(1970365778)), request_id: 18446744073709551615, Peer: PeerId(\"QmatuVHteVNhjQxAyKukhLpVCWFgALenyLN2CsjYSAgcNK\"), service: router\n\u003c@!361447803194441738\u003e That is not my nimbus node. My nimbus node is `16Uiu2HAmTJRxgKBMLKNdXJjGh4b2ZwTcNpXbyQMh8hdZGti2nuoL`",
        "created_at": "2020-05-17T13:19:22.022000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Maybe it's from Lodestar? They have been syncing the chain, to epoch 3k or so I heard",
        "created_at": "2020-05-17T13:20:00.222000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Lighthouse identifies the peer as Nimbus",
        "created_at": "2020-05-17T13:20:30.877000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But perhaps it's wrong?",
        "created_at": "2020-05-17T13:20:42.548000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is the peerID I got from cat'ing the beacon address enr in the nimbus storage",
        "created_at": "2020-05-17T13:21:06.341000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'll try look for the id in the logs",
        "created_at": "2020-05-17T13:21:16.755000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`docker logs beacon --tail 100000 2\u003e\u00261 | grep QmatuVHteVNhjQxAyKukhLpVCWFgALenyLN2CsjYSAgcNK` doesn't show up anything in my nimbus node",
        "created_at": "2020-05-17T13:22:32.285000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Nor do lighthouse, teku or prysm node I'm debugging with show that peer ID in the logs",
        "created_at": "2020-05-17T13:24:58.143000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What is your peer ID? I can search for that. \u003c@!361447803194441738\u003e",
        "created_at": "2020-05-17T13:26:11.732000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\nDBG 2020-05-17 13:26:41+00:00 Error processing request                   topics=\"networking\" tid=1 file=eth2_network.nim:331 errMsg=\"Request full data not sent in time\" peer=16Uiu2HAkuzooRZN7zXzbWZzayZ4sz6oDGror5t36dxCkNpipfNxw responseCode=InvalidRequest\n```\nI'm seeing this in the nimbus logs now, you are not alone \u003c@!361447803194441738\u003e",
        "created_at": "2020-05-17T13:27:22.687000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!361447803194441738\u003e That `1970365778` is `52657175` in hex. Or `Requ` in ascii üòÇ  It looks like someone made a bad mistake with debug data or input formatting",
        "created_at": "2020-05-17T13:35:38.342000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Some \"Request\" is interpreted wrong. Or some client has a really messy RPC input",
        "created_at": "2020-05-17T13:36:14.271000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "~~Oh wow, I checked the finalized-block via API for my lighthouse, teku and prysm node. And they all match~~ Should have looked at head root",
        "created_at": "2020-05-17T13:49:07.760000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, block roots for slot 145133 still match",
        "created_at": "2020-05-17T13:54:22.264000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "is it possible its a forkchoice bug ?",
        "created_at": "2020-05-17T13:55:18.324000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "if prysm + lighthouse are on one fork but teku isn't converging to it",
        "created_at": "2020-05-17T13:55:44.256000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No, otherwise it wouldn't return the same block for that slot",
        "created_at": "2020-05-17T13:55:46.667000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Let me post the outputs, I wonder if it just resolved",
        "created_at": "2020-05-17T13:55:59.159000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://gist.github.com/protolambda/3bde7e31d813e67f692c2ff73228a33a\nPrysm, Lighthouse, Teku returning the same block for a recent-ish slot",
        "created_at": "2020-05-17T13:58:07.966000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And can also confirm that the chain-head endpoints for the node now return the same roots",
        "created_at": "2020-05-17T14:00:42.805000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I wonder what's up with eth2stats, there teku still seems to be on a different chain",
        "created_at": "2020-05-17T14:03:49.977000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "can you check what is the current head of your teku node ?",
        "created_at": "2020-05-17T14:05:02.290000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, now they differ.",
        "created_at": "2020-05-17T14:05:17.177000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i dont think it is on prysm/lighthouse's fork branch. It does seem to be able to process the blocks from the other side of the fork, but it can't resolve for some reason",
        "created_at": "2020-05-17T14:06:30.669000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Looks like my Teku node is reporting both heads, switching between them continuously!",
        "created_at": "2020-05-17T14:07:43.860000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\n$ curl localhost:4000/beacon/head\n{\"slot\":\"145233\",\"block_root\":\"0x52ec509875237eba13c369c229a9bb919e717d1795fae5deb5db42d6c07cb857\",\"state_root\":\"0x8dee7935c9dd3b54f4fcf80030fd83bcfdc9c3c7a17df779c42b196a7292241a\"}ubuntu@ip-172-31-33-150:~$ \n$ curl localhost:4000/beacon/head\n{\"slot\":\"145235\",\"block_root\":\"0x823af69714480988ab125b2db3dcea39509d8d16d58fba5a4a9c63242dcf2abb\",\"state_root\":\"0xb3cf6613d49c24ae9f087ff4096b59b8d75b257560af73520ce2951686f25da0\"}ubuntu@ip-172-31-33-150:~$ \nubuntu@ip-172-31-33-150:~$ \n```",
        "created_at": "2020-05-17T14:07:59.202000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\ncurl localhost:4000/beacon/head\n{\"slot\":145235,\"block_root\":\"0x823af69714480988ab125b2db3dcea39509d8d16d58fba5a4a9c63242dcf2abb\",\"state_root\":\"\n```\nAnd this is lighthouse",
        "created_at": "2020-05-17T14:08:24.565000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "interesting",
        "created_at": "2020-05-17T14:08:42.470000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "looks like a forkchoice bug then",
        "created_at": "2020-05-17T14:08:47.968000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I feel like I'm going crazy, it may be a difference in Teku API endpoints:\n```\n$ curl localhost:4000/beacon/chainhead\n{\"head_slot\":\"145246\",\"head_epoch\":\"4538\",\"head_block_root\":\"0x51c71c464ac8b8fd71d431d7e73976c8f3c4093c076c0c572a854e7d3f36acea\",\"finalized_slot\":\"141120\",\"finalized_epoch\":\"4410\",\"finalized_block_root\":\"0xb0a6cdf0af8cdbd28defefebfdf9a005476254e6025775186f4397e113003e26\",\"justified_slot\":\"141152\",\"justified_epoch\":\"4411\",\"justified_block_root\":\"0xc8f907af703e377692020b8b8a4931c41cdec40d92636a09f8b4fa45211b51ce\",\"previous_justified_slot\":\"141152\",\"previous_justified_epoch\":\"4411\",\"previous_justified_block_root\":\"0xc8f907af703e377692020b8b8a4931c41cdec40d92636a09f8b4fa45211b51ce\"}\n$ curl localhost:4000/beacon/head\n{\"slot\":\"145246\",\"block_root\":\"0x8148262150697fd745c678e9395934e825b48868ab878cbf345d3e04019f899f\",\"state_root\":\"0x85528db1ff7a8424bf9457f49d3c47b9957a13662eb5060e2ad082b50f763b94\"}\n```",
        "created_at": "2020-05-17T14:10:28.178000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!340345049063882753\u003e The teku API head endpoints contradict eachother",
        "created_at": "2020-05-17T14:11:40.149000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Well that is strange.",
        "created_at": "2020-05-17T14:14:40.568000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So I think two things happened (if not more):\n- forkchoice bug in Teku, getting something out of sync internally, while still being able to follow the correct head, just not in all teku parts?\n- prysm bug in deep chain fork, failing to calculate proposers correctly",
        "created_at": "2020-05-17T14:17:05.079000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thinking about how we can test deep reorgs with consensus tests. Might be able to induce it with alex's new fork choice tests",
        "created_at": "2020-05-17T14:18:52.985000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Looks like there was a bug in the parallel BLS verification in Teku which caused block 139813 to fail to import. We then got stuck there and so when Teku instances eventually had a turn to propose a block it created a fork.",
        "created_at": "2020-05-17T20:50:31.375000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do you use parallel verification for the consensus tests?",
        "created_at": "2020-05-17T21:14:00.327000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If so, might be an interesting case to try to reproduce for test vectors",
        "created_at": "2020-05-17T21:14:30.844000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not sure - I worry that we don't.",
        "created_at": "2020-05-17T21:14:47.857000+00:00",
        "attachments": null
    },
    {
        "author": "handelaar2",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e afaik we do not have users running a slasher in schlesi\n\u003c@476250636548308992\u003e  I‚Äôm running one since last week.",
        "created_at": "2020-05-17T21:14:54.114000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Funnily enough this problem is distracting me from an overhaul of how we run the reference tests...",
        "created_at": "2020-05-17T21:15:06.508000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Keep me updated. Want to make sure we capture this in the tests if needbe",
        "created_at": "2020-05-17T21:21:10.111000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ha",
        "created_at": "2020-05-17T21:21:11.830000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@219523277163331586\u003e  in schesi? Awesome lol",
        "created_at": "2020-05-17T21:25:48.721000+00:00",
        "attachments": null
    },
    {
        "author": "kiwi.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Did you catch anything?",
        "created_at": "2020-05-17T21:25:52.756000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "When I said \"parallel\" I should have said \"batch\". Sorry.",
        "created_at": "2020-05-17T21:27:32.257000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Figured",
        "created_at": "2020-05-17T21:28:05.617000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Was it a bad deposit sig?",
        "created_at": "2020-05-17T21:28:15.551000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also interestingly, my local teku which is setup to only connect to my local lighthouse has, after a bit of encouragement and generous helpings of RAM, reached chain head.",
        "created_at": "2020-05-17T21:28:19.166000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No not a bad deposit - `NullPointerException` so something internal about the logic but I haven't chased it down yet.",
        "created_at": "2020-05-17T21:28:39.184000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And does it report it correctly on both head and chainhead endpoints?",
        "created_at": "2020-05-17T21:28:53.095000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Still weirded out by that difference",
        "created_at": "2020-05-17T21:29:27.779000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, but it's only ever seen one fork - the one that my lighthouse thinks is canoncial.",
        "created_at": "2020-05-17T21:29:46.584000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Haven't had a chance to look into that difference yet either - other than to see that for some reason they are going through two separate code paths.",
        "created_at": "2020-05-17T21:30:13.380000+00:00",
        "attachments": null
    },
    {
        "author": "handelaar2",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e Did you catch anything?\n\u003c@!118185622543269890\u003e  This is from the metrics of the slasher: \n\n`# HELP double_proposals_detected_total The # of double propose slashable events detected\n# TYPE double_proposals_detected_total counter\ndouble_proposals_detected_total 0\n# HELP double_votes_detected_total The # of double vote slashable events detected\n# TYPE double_votes_detected_total counter\ndouble_votes_detected_total 142`",
        "created_at": "2020-05-17T21:31:47.022000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!203220829473996800\u003e Actually that one's easy to explain - it's a bug in the chainhead implementation:",
        "created_at": "2020-05-17T21:33:06.926000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```    this.head_block_root = latestBlockHeader.body_root;``` . Not what it should be getting....",
        "created_at": "2020-05-17T21:33:18.014000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "should be;\n```\nheader = latestBlockHeader.copy()\nheader.state_root = htr(state)\nhead_block_root = htr(header)\n```\nOr something like that, I don't know where that latest-block-header is coming from, or if it's from the correct state. But if sourced from a state, it should have a correct state root first.",
        "created_at": "2020-05-17T21:36:32.856000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It can just get the best block root directly - it's just gotten a little mixed up and tried to do something clever.",
        "created_at": "2020-05-17T21:37:27.539000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, if you've the block and it's trusted, that would be better",
        "created_at": "2020-05-17T21:38:09.038000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So the interesting thing is that the error I hit is a) on a block much earlier than the fork b) definitely did not happen on at least one of the Teku nodes I'm running that wound up on the fork and c) I now have an unmodified Teku which has completely synced the chain lighthouse views as canonical (hence we consider all those blocks valid).  Which suggests this is a fork choice bug.",
        "created_at": "2020-05-17T21:50:47.167000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Does teku use these tests? https://github.com/ethereum/eth2.0-spec-tests/issues/17#issuecomment-612116022",
        "created_at": "2020-05-17T21:56:23.751000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Prysm and LH have similar set of fork choice tests. I adopted our proto array fork choice tests from LH when we implemented proto array. With that said, I'm very interested to integrate Alex's tests into Prysm",
        "created_at": "2020-05-17T21:56:31.361000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't think we've fully integrated them yet, but I believe we did get Alex to do a run of them over teku.  I'm not too familiar with that area and where it's at to be honest.",
        "created_at": "2020-05-17T21:57:27.202000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No worries! I wonder what it will take to merge these fork choice tests into the official  spec tests repo",
        "created_at": "2020-05-17T21:58:56.298000+00:00",
        "attachments": null
    }
]