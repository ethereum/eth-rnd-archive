[
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e Probably worth putting a rationale for \"Why does the envelope have a nonce?\" in 2733.",
        "created_at": "2020-10-13T02:34:42.337000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I figured it out, but it took me a bit and I looked in Rationale for an answer first.",
        "created_at": "2020-10-13T02:34:54.497000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Also, why RLP?  I think the consensus is that RLP isn't great for transactions.  Just to avoid being the EIP that introduces SSZ formally into ETH 1?",
        "created_at": "2020-10-13T02:35:50.482000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The child transaction says:\n\u003e The type field is used to denote whether the Child signer wishes to delegate the max_gas_price and gas_limit choice to the TransactionPackage signer.\nyet the TransactionPackage doesn't have a spot to put the gas limit.",
        "created_at": "2020-10-13T02:38:49.048000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Step 6 of Execution says to prepare result, but it doesn't specify if that result will be available the first frame of the next `ChildPackage` if it is the last transaction in a `ChildPackage` or not.",
        "created_at": "2020-10-13T02:40:59.894000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The discussion in 2711 has arguments for why gas limit, gas price, one, or both should be decided by the sponsor vs the signer.  In 2733 you only have 2 options, all by sponsor or all by signer.  Recommend adding a rationale on why you do not provide an option for sponsor setting one and signer setting the other.",
        "created_at": "2020-10-13T02:43:18.013000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Consider defining two `ChildTransaction` types, one that has a `gas_limit` and one that does not.",
        "created_at": "2020-10-13T02:44:57.005000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e  Probably worth putting a rationale for \"Why does the envelope have a nonce?\" in 2733.\n\u003c@!301186049323958275\u003e  yes good point, will do\n\n\u003e Also, why RLP?  I think the consensus is that RLP isn't great for transactions.  Just to avoid being the EIP that introduces SSZ formally into ETH 1?\nMainly the latter, if there is very strong consensus i'm not against adding.\n\n\u003e yet the TransactionPackage doesn't have a spot to put the gas limit.\nyes, if the type is `0x01` then the package signer can choose *whatever* limit they wish for each `ChildTransaction`, because the child signer didn't sign over the limit\n\n\u003e Step 6 of Execution says to prepare result, but it doesn't specify if that result will be available the first frame of the next ChildPackage if it is the last transaction in a ChildPackage or not.\ndo you think it's confusing as is? step 4 says \"f there are no more child transactions, goto 8\" -- thus bypassing the result computation and therefore no result would be present for the first tx in the next package\n\n\u003e Recommend adding a rationale on why you do not provide an option for sponsor setting one and signer setting the other.\nwill do\n\n\u003e Consider defining two ChildTransaction types, one that has a gas_limit and one that does not.\nDo you think that the `type` field does not offer the same functionality?",
        "created_at": "2020-10-13T05:12:43.717000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Ah, I missed the skip in step 4.",
        "created_at": "2020-10-13T05:20:25.985000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Re: type field\nIt does, but it references an object that is never defined IIRC.",
        "created_at": "2020-10-13T05:21:09.163000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e I don't have the EIP open at the moment (and on mobile) but IIRC one of them has an array of \"child transactions without gas limit\".  The type of that should be explicitly defined somewhere.  For example, should the gas limit need to be set to zero, or omitted?",
        "created_at": "2020-10-13T05:22:34.541000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Rather than just having a variable that says \"type is `X - Y` in the variable name.",
        "created_at": "2020-10-13T05:23:10.258000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "it would be omitted completely, i can define more explicitly",
        "created_at": "2020-10-13T05:23:34.103000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Note: this suggestion is a non-normative change, just a clarity improvement.",
        "created_at": "2020-10-13T05:23:43.995000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Re: \"package signer can choose whatever limit they wish\", I get the idea here, there is just nowhere to put that value in the defined type.  ðŸ™‚",
        "created_at": "2020-10-13T05:25:31.222000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "```go\nstruct TransactionPackage { chain_id: u256, children: [ChildPackage], nonce: u64, gas_price: u256, v: u256, r: u256, s: u256 }\n```\nNo spot for limit here.",
        "created_at": "2020-10-13T05:26:52.179000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "the limit would be defined per child tx",
        "created_at": "2020-10-13T05:27:18.953000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Oh, I'm against that weakly because it makes signing more complicated since the signature isn't over the whole transaction.  If you go this route, I think the limit should be *after* the signature.",
        "created_at": "2020-10-13T05:28:12.599000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "On that general note, I recommend putting the whole signed data into an array.  I did this in https://eips.ethereum.org/EIPS/eip-2972",
        "created_at": "2020-10-13T05:29:45.751000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The idea being that you don't have to pluck pieces out of the transaction and then re-encode it in order to validate the signature (QoL improvement).",
        "created_at": "2020-10-13T05:30:34.247000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "My perspective is that these \"signature structures\" are being defined on the fly anyways: https://github.com/ethereum/go-ethereum/blob/66c3eb2f1a5c6bb4b5a678ce819f9984ac09e246/core/types/transaction_signing.go#L155-L165",
        "created_at": "2020-10-13T05:30:42.818000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't have that strong of an opinion though, mostly just erring on the side of simplicity atm",
        "created_at": "2020-10-13T05:33:54.544000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Same, but simplicity for all of the tools that sign and validate transactions.",
        "created_at": "2020-10-13T05:35:10.613000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Having written a signer, I can say that having to encode twice is annoying and error prone.",
        "created_at": "2020-10-13T05:35:25.410000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "i appreciate the perspective",
        "created_at": "2020-10-13T05:38:11.680000+00:00",
        "attachments": null
    }
]