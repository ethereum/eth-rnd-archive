[
    {
        "author": "poojaranjan",
        "category": "Execution Layer",
        "parent": "",
        "content": "Breakout room meeting in 1 hr",
        "created_at": "2020-10-09T12:58:20.720000+00:00",
        "attachments": null
    },
    {
        "author": "poojaranjan",
        "category": "Execution Layer",
        "parent": "",
        "content": "Join Zoom Meeting\nhttps://us02web.zoom.us/j/86761310326?pwd=cGJzYXRTNmdQWERvOG9BaEZvY1hDQT09\n\nMeeting ID: 867 6131 0326\nPasscode: 193505",
        "created_at": "2020-10-09T12:58:22.851000+00:00",
        "attachments": null
    },
    {
        "author": "poojaranjan",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e \u003c@!425279588009246720\u003e \u003c@!415548822983278593\u003e \u003c@!543900561460822016\u003e",
        "created_at": "2020-10-09T13:00:09.279000+00:00",
        "attachments": null
    },
    {
        "author": "poojaranjan",
        "category": "Execution Layer",
        "parent": "",
        "content": "Addling clients team - \u003c@!211091239112671234\u003e \u003c@!489256758989029405\u003e \u003c@!364458974906548225\u003e \u003c@!414247794375655424\u003e \u003c@456226577798135808\u003e",
        "created_at": "2020-10-09T13:01:50.948000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "In the \"rich tx ftw\" section I propose to introduce a data/code field, whereas today there's only data which is used differently based on what the transaction is doing, i.e. if it is a creation transaction it is considered as code, otherwise as calldata.\n\nI think that split seems to be okay and one could map the existing transactions into it the following way:\n\nRegular transaction:\n- code: empty\n- data: optionally set\n\nCreation transaction:\n- code: set\n- data: empty\n\nRich tx:\n- code: set\n- data: optionally set",
        "created_at": "2020-10-09T14:03:43.919000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Also \u003c@!543900561460822016\u003e regarding unobservability of gas there's this interesting idea from https://ethresear.ch/t/counter-proposal-to-oil-karma-per-account-gas-limits/7433: \n\n\u003e Option 1: Allow a transaction to specify a table T: {account: gaslimit}. A call to an account A in T would only be assigned a maximum of T[A] gas, and otherwise calls would be assigned all the remaining gas.\n\nI think that could work well with this flag based transaction format.\n\nI'd call this the `AccountGasLimits` list, which is mutually exclusive with `GasLimit`. The `GasLimit` sets the limit for the account specified by the signature.",
        "created_at": "2020-10-09T14:04:31.900000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "I keep some notes here: https://hackmd.io/CccouoTaRUu8gCrFPLB1fg",
        "created_at": "2020-10-09T14:25:54.015000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "thanks for recording that info \u003c@!425279588009246720\u003e",
        "created_at": "2020-10-09T15:01:26.641000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "The number of use cases still feel quite slim ðŸ™‚",
        "created_at": "2020-10-09T15:02:27.043000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Personally, I am really hoping to be convinced of the long-term viability of Rich Transactions so I can drop interest/support in all of the alternatives.",
        "created_at": "2020-10-09T15:02:31.230000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "At least one thing we can agree on is that sponsoring is needed unless AA would be introduced.",
        "created_at": "2020-10-09T15:02:46.393000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "yes",
        "created_at": "2020-10-09T15:02:55.691000+00:00",
        "attachments": null
    },
    {
        "author": "poojaranjan",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e I keep some notes here: https://hackmd.io/CccouoTaRUu8gCrFPLB1fg\nThanks \u003c@!425279588009246720\u003e",
        "created_at": "2020-10-09T15:03:01.646000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Sponsoring and an account \"doing multiple things in a row\" are the two features that I think we all agree need to be solved for.",
        "created_at": "2020-10-09T15:03:13.406000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e are you adamant on having multi-sender in the batching (outside of richtx) ?",
        "created_at": "2020-10-09T15:03:44.001000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!425279588009246720\u003e Where is that hackmd where you were putting together all of the various options?",
        "created_at": "2020-10-09T15:04:37.795000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Not the one linked above, the other one.",
        "created_at": "2020-10-09T15:04:49.223000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "If we can make sponsoring txs and doing multiple things in in a row in berlin, I would be more than happy to champion that effort (w/o multi-sender batching)",
        "created_at": "2020-10-09T15:05:08.596000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "https://notes.ethereum.org/@axic/Hyrc1i7ED",
        "created_at": "2020-10-09T15:05:10.806000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "and generally, its not a hill i want to die on, but if we're looking beyond berlin, i'd like to implement both",
        "created_at": "2020-10-09T15:05:37.549000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e actually started writing an alternative to 2711, but figured out the notation isn't all that bad, just hard to understand first ðŸ™‚",
        "created_at": "2020-10-09T15:05:37.798000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Oh, the other use case \u003c@!543900561460822016\u003e was create2 from EOA.",
        "created_at": "2020-10-09T15:05:49.257000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e Oh, the other use case \u003c@!543900561460822016\u003e was create2 from EOA.\n\nRight, that's a new one.",
        "created_at": "2020-10-09T15:06:12.225000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "Is create2 from EOA that useful? I would think we'd want to use a deployer contract anyways?",
        "created_at": "2020-10-09T15:06:26.572000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "There's no need for a deployer if you can do it from an EOA.",
        "created_at": "2020-10-09T15:06:40.157000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "yes, but what is the use case for doing so from an EOA (besides the small gas savings)",
        "created_at": "2020-10-09T15:06:58.651000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "The same as doing it through a deployer/proxy: to use create2 functionality.",
        "created_at": "2020-10-09T15:07:15.381000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "It simplifies things a bit, though not much in the common case.  It does give every user their own \"namespace\", but that is pretty marginal.",
        "created_at": "2020-10-09T15:07:26.823000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "yeah, agreed that the benefit is very marginal",
        "created_at": "2020-10-09T15:08:04.145000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "~~Conditional executions are another use case.~~",
        "created_at": "2020-10-09T15:08:34.058000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Though, really that is just more of the \"breaking `isHuman` checks\" I guess.",
        "created_at": "2020-10-09T15:08:54.143000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e https://notes.ethereum.org/@axic/Hyrc1i7ED\n\nBased on this I have two changes to 2711:\n- Split code and data fields (this has the further benefit of not analyzing EVM bytecode twice, e.g. as part of the deployer vs. as part of deployed code)\n- Introduce a flag based encoding\n\nThis is what I'm writing as an EIP, just did not found too much time this week.",
        "created_at": "2020-10-09T15:09:22.285000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "As someone with a contract wallet, I'm extremely annoyed that I cannot use my wallet with a bunch of contracts out there because of `isHuman` checks and similar, which is why I push so hard to break them.",
        "created_at": "2020-10-09T15:09:53.958000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Why do people do `isHuman` checks?",
        "created_at": "2020-10-09T15:10:15.788000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Primarily because they are trying to protect against conditional execution.",
        "created_at": "2020-10-09T15:10:45.607000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "That is, they don't want people taking some action only if certain conditions are met.  e.g., \"do X if timestamp is after Y\".",
        "created_at": "2020-10-09T15:11:09.023000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "When really it just says, \"this contract is insecure, but only miners can exploit this contract\".",
        "created_at": "2020-10-09T15:11:35.358000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The other is rollups, because they want to ensure that transaction `data` field is laid out a particular way so they don't have to inspect the transaction.",
        "created_at": "2020-10-09T15:12:32.009000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e The other is rollups, because they want to ensure that transaction `data` field is laid out a particular way so they don't have to inspect the transaction.\n\nHow is this related? A contract cannot trust the data no matter whether it is part of the an EOA or `CALL` calldata.",
        "created_at": "2020-10-09T15:13:22.918000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e I suspect the root of our disagreement comes mostly down to complexity.  If you ignore multi-sender sponsored transactions and I ignore `isHuman` breakage, then I think you still prefer batch because you think it is lower complexity and I prefer rich because I think it is lower complexity.",
        "created_at": "2020-10-09T15:13:38.863000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "With rollups, Etehreum is the data availability layer.  They achieve this cheaply by including all of the rollup data in the transaction's calldata, which the layer 2 chain then parses and operates on.",
        "created_at": "2020-10-09T15:14:44.876000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think complexity is comparable just differs at where the complexity lies at. And richtx has the potential to be more flexible.",
        "created_at": "2020-10-09T15:14:54.742000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "On layer 1, that data is just hashed and aggregated essentially.  On layer 2, that data is calldata for a contract execution.  The layer 2 chain has it slightly easier if they can just look at the layer 1 transaction list for any transactions with a `to` field for their rollup contract and then just read the `data`.",
        "created_at": "2020-10-09T15:16:04+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "If contracts were allowed to call into the rollup contract on layer 1, then they would have to simulate every transaction to find the rollup calls (since they could be internal).",
        "created_at": "2020-10-09T15:16:34.218000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Contracts **are** allowed to call rollup contracts.",
        "created_at": "2020-10-09T15:17:06.942000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Not needing an EVM (just something that speaks devp2p) does have its appeal.",
        "created_at": "2020-10-09T15:17:07.379000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Sure, they can \"reject\" incoming transactions, but they can't reject incoming coinbase/selfdestruct.",
        "created_at": "2020-10-09T15:17:26.026000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e Contracts **are** allowed to call rollup contracts.\nNot all of them.",
        "created_at": "2020-10-09T15:17:27.446000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Not sure why rollup people would want to solve user error really.",
        "created_at": "2020-10-09T15:17:42.270000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "It isn't solving user error in this case.",
        "created_at": "2020-10-09T15:17:51.848000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "It is making their tooling development easier.",
        "created_at": "2020-10-09T15:17:57.590000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "If their rules state \"we only parse EOA calldata and ignore anything else\" then it doesn't matter if someone tries to call it. It is user error, ignored by L2.",
        "created_at": "2020-10-09T15:18:01.010000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Maybe this is too pragmatic for users ðŸ˜¬",
        "created_at": "2020-10-09T15:18:31.336000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The rollup contract needs to *not* rollup the transaction.",
        "created_at": "2020-10-09T15:18:43.218000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Otherwise the transaction list rollup won't match the layer 2 transaction list.",
        "created_at": "2020-10-09T15:19:08.127000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "ðŸ¤”  Though, perhaps you are saying that the transaction would still show up in the L2 transaction list, it would just be executed as a no-op?",
        "created_at": "2020-10-09T15:19:28.503000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't think that would work because you would still need to *see* that transaction to know to turn it into a no-op.",
        "created_at": "2020-10-09T15:19:47.906000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I guess you could fire a really lightweight event so you at least know *something* was rolled up, but you can turn it into a no-op if it wasn't a direct call from an EOA.",
        "created_at": "2020-10-09T15:20:19.859000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Wait a second, isn't the batching/checkpointing on L1 done by trusted nodes from L2 anyway?",
        "created_at": "2020-10-09T15:21:56.019000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Not in a good rollup.  ðŸ™‚",
        "created_at": "2020-10-09T15:22:11.566000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Some of the crappier ones do that.  ðŸ˜›  (highly opinionated hot take)",
        "created_at": "2020-10-09T15:22:24.439000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The most censorship resistant/trustless way to do a rollup is to have every transaction sent directly to layer 1, and those are executed (in order they appeared on layer 1) on layer 2.",
        "created_at": "2020-10-09T15:22:57.774000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Though I'd argue they should look at emitted events and consider that as canon, and not transactions lists.",
        "created_at": "2020-10-09T15:23:11.683000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Emitting an event increases gas costs pretty significantly, almost 2x I think?",
        "created_at": "2020-10-09T15:23:34.870000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Most of the cost on L1 is the calldata payload size IIRC.  Stuffing all that into an event increases that portion.",
        "created_at": "2020-10-09T15:23:59.213000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Sure, they either improve their tooling (support executing transactions) or pay more gas, right?",
        "created_at": "2020-10-09T15:24:04.012000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "FWIW, I am not a fan of the `isHuman` checks for rollups.  It is just \"the other case for `ishuman`\".",
        "created_at": "2020-10-09T15:24:45.061000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "The system is so convoluted due to all the workarounds added in order to keep \"everyone happy\", when it should be recognized that it is not possible to keep everyone happy and we just dig deeper in complexity with trying to avoid that.",
        "created_at": "2020-10-09T15:25:02.154000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e why do you think the `AccountGasLimit` list is a bad solution compared to tx-level batching?",
        "created_at": "2020-10-09T15:27:12.590000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "it just feels like a workaround, further increasing the evm complexity",
        "created_at": "2020-10-09T15:31:19.765000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think `AccountGasLimits` could be nice in general. Would have to come with making `GAS` return ~0 and `CALL` ignoring gas limits.",
        "created_at": "2020-10-09T15:31:48.578000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "fair enough, i don't have a strong argument against it other than it just *feels* unnecessarily obtuse",
        "created_at": "2020-10-09T15:32:39.270000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "It does feel like more \"brutal\" and not fine-tuned, not sure if that is a problem.",
        "created_at": "2020-10-09T15:33:37.409000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "What is AccountGasLimit?",
        "created_at": "2020-10-09T15:39:06.037000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "option 1 from this post: https://ethresear.ch/t/counter-proposal-to-oil-karma-per-account-gas-limits/7433",
        "created_at": "2020-10-09T15:49:03.915000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution Layer",
        "parent": "",
        "content": "Actually the messy part of it is that one would need to maintain that list an continuously deduct form it.\n\nI wonder if the main thing needed would be `GasLimit` and `CallGasLimit` or `ReservedGasLimit`, where the goal is to keep some extra gas for `depth = 0`, but ignore any further call depths.",
        "created_at": "2020-10-09T15:57:06.555000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "That is pretty constraining, means your logic *must* be at the root of the stack.",
        "created_at": "2020-10-09T17:37:55.217000+00:00",
        "attachments": null
    }
]