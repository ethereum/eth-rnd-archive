[
    {
        "author": "trentmohay2268",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e we updated web3signer such that signing below the low_watermark is completely forbidden - which means we're never going to pass the ref tests :/\nWondering if we can alter the concept of the reference tests somewhat - such that it is recognised that a signing _could_ happen, but is not required to?",
        "created_at": "2020-11-30T01:19:00.219000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I don't follow... signing below the low watermark _should_ be forbidden and that's what the ref tests test for. Are you setting the low watermark to the maximum entry from the import file? (a la Teku?) In which case this provision from the README applies:\n\n\u003e Your test-runner should attempt to sign a block with signing_root at the given slot from the given pubkey. The should_succeed field describes whether this signing should be accepted (true) or rejected (false). **Clients using a slashing protection mechanism that admits false positives may consider a rejection as success even if should_succeed is true.**\n\n[emphasis added]",
        "created_at": "2020-11-30T01:26:59.657000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "returning `false` when attempting to sign _any_ message would technically be compliant with the ref tests",
        "created_at": "2020-11-30T01:27:39.851000+00:00",
        "attachments": []
    },
    {
        "author": "trentmohay2268",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ok - trying again ğŸ™‚ RE-signing below the watermark is currently forbidden - i.e. if we sign Block-3, then import from Blocks 5-7, web3signer would update its watermark to 5, and never sign below this value (not even 3)",
        "created_at": "2020-11-30T03:02:47.136000+00:00",
        "attachments": []
    },
    {
        "author": "trentmohay2268",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ğŸ‘ I just re-read your bolded comment ğŸ™‚",
        "created_at": "2020-11-30T03:03:27.649000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Hmm, I didn't think the tests required re-signing below the lower watermark. That would be a bug. Which test case does that?",
        "created_at": "2020-11-30T06:24:34.016000+00:00",
        "attachments": []
    },
    {
        "author": "trentmohay2268",
        "category": "Consensus Layer",
        "parent": "",
        "content": "could well be a mistake in our code ğŸ˜‰",
        "created_at": "2020-11-30T23:57:21.546000+00:00",
        "attachments": []
    },
    {
        "author": "trentmohay2268",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I'll look into it today and get back to you",
        "created_at": "2020-11-30T23:57:29.726000+00:00",
        "attachments": []
    }
]