[
    {
        "author": "trentmohay2268",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e at some stage (I think) there. was a concept that a gap IN an import is ok (i.e. no need to move watermarks) - however, there's a chance that what is being imported is the result of a prior import/export operation - meaning the gap is potentially \"dangerous\" :/\nEg:\n* Blocks 1-40 are signed (watermark = 1)\n* Import 50-60 (watermark = 50, as is moved up to the skip the gap between records, and imported data)\n* export data\n* Import data to new database (watermark is reset to 1, and ignores that 41-49 should not be signed)\nSeems like, on import, the watermark must be moved up to the max value in the import, to be sure ...\nAny thoughts?",
        "created_at": "2020-11-18T22:34:37.302000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003e \u003c@!602753420033785856\u003e at some stage (I think) there. was a concept that a gap IN an import is ok (i.e. no need to move watermarks) - however, there's a chance that what is being imported is the result of a prior import/export operation - meaning the gap is potentially \"dangerous\" :/\n\u003e Eg:\n\u003e * Blocks 1-40 are signed (watermark = 1)\n\u003e * Import 50-60 (watermark = 50, as is moved up to the skip the gap between records, and imported data)\n\u003e * export data\n\u003e * Import data to new database (watermark is reset to 1, and ignores that 41-49 should not be signed)\n\u003e Seems like, on import, the watermark must be moved up to the max value in the import, to be sure ...\n\u003e Any thoughts?\n\u003c@!681273808841474198\u003e Damn, that's a good point. The strategy I've adopted for Lighthouse is to _delete_ existing data from below the watermark on import, which feels a bit dangerous in itself, but does avoid this problem. I'm hesitant to recommended/require that in general however. An alternative would be keeping the data and exporting only from the watermark and higher?",
        "created_at": "2020-11-18T23:29:08.836000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Moving the watermark to the max value of the import would prevent us from dealing with the clock sync bug we saw on Medalla (and would reduce the interchange format to the single-message variant as used by Teku)",
        "created_at": "2020-11-18T23:30:18.051000+00:00",
        "attachments": []
    }
]