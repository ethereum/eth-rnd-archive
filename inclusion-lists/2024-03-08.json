[
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I am against committing to the block so 1,2 ✅ ,  and 3 ❌ and 4  I lean no but I don't mind sending them together as a start point.",
        "created_at": "2024-03-08T00:14:22.428000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I dislike the market that 3 brings",
        "created_at": "2024-03-08T00:14:36.953000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "among all the other cases that were debated above",
        "created_at": "2024-03-08T00:14:50.394000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "And by the way: it's much simpler, no need to add extra handling of a field that is not used",
        "created_at": "2024-03-08T00:15:19.676000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok sure, lets go with \n\n1. unconditional (guaranteed inclusion with a 3mm gas limit on the IL)\n2. anywhere-in-block (the transactions in the slot N IL must appear anywhere in either the slot N payload or the slot N+1 payload) \n3. not committed to in beacon block\n4. gossiped-with-block (the IL is part of the beacon block p2p object, same topic)",
        "created_at": "2024-03-08T00:16:10.482000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e 3 still needs to be edited",
        "created_at": "2024-03-08T00:16:44.749000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "well, good to be aware of. I don't ... deeply care about most details of this, except (4).",
        "created_at": "2024-03-08T00:16:46.479000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e done (re @potuz0: 3 still needs to be edited)",
        "created_at": "2024-03-08T00:17:02.243000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e sure (re @InclusionList_bot: \u003ctersec\u003e [reply]: well, good to be aware of. I don't ... deeply care about most details of this, except (4).)",
        "created_at": "2024-03-08T00:17:18.245000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e working on a doc pulling this all together",
        "created_at": "2024-03-08T00:17:22.858000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e",
        "created_at": "2024-03-08T00:17:32.645000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_1.jpg",
                "content": "83d81eb4bc94419915ea10852bc63ca8c43c40e5c6b8e3094891c6401a8787bf"
            }
        ]
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "the rest stay kind of localized to the IL code",
        "created_at": "2024-03-08T00:17:33.433000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "(4) does not",
        "created_at": "2024-03-08T00:17:35.878000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This sounds good to me to have a PoC, I need to make some changes in my working spec (I have something in parallel for ePBS) but I can work in implementing this on Prysm",
        "created_at": "2024-03-08T00:17:46+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e am trying to get the minimal viable spec together into a single doc",
        "created_at": "2024-03-08T00:18:22.376000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "as in, I don't care at some level, how many seconds of earlier it might send something. if it _can_ miss arrival, it will, and all the same infrastucture has to be built. does not matter. 1 second or 60 seconds.",
        "created_at": "2024-03-08T00:18:55.247000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@654267572107083777\u003e missing the IL is not that critical either though... you would simply not attest on the block, but it will be canonical anyway and you'll request it by RPC,  it's exactly the same as missing the block (which becomes more likely by having a larger block sent now together) but anyway I agree it may be simpler to start with them coupled, we can always decouple later if we think it causes trouble",
        "created_at": "2024-03-08T00:20:37.363000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "okay, so the block is still valid, for fork choice considerations?",
        "created_at": "2024-03-08T00:21:17.738000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "better but not by enough",
        "created_at": "2024-03-08T00:21:35.468000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "but, would you consider it 100% fully a \"valid\" block, except for ... what?",
        "created_at": "2024-03-08T00:21:58.118000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I just don't want this to become a weird source of glitchy slot-by-slot behavior we all end up debugging for years",
        "created_at": "2024-03-08T00:23:20.762000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e you would simply not attest on the block\n\ngets people DM'ing us on Discord and telegram",
        "created_at": "2024-03-08T00:24:04.666000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "that's not \"simply\"",
        "created_at": "2024-03-08T00:24:09.537000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "No no the block is not inserted in forkchoice until you've validated a single IL, it's just like blobs. If you didn't get the blobs on time and others did, you'll request them when you see the block is canonical. I agree with you that this is critical in the sense that you miss syncing the block, but this is something that also happens with the single message scenario: if you don't get the IL you also don't get the block",
        "created_at": "2024-03-08T00:39:49.800000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "meh then no",
        "created_at": "2024-03-08T00:40:12.093000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I sympathize with this",
        "created_at": "2024-03-08T00:40:17.236000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Bah it was the discord part:)",
        "created_at": "2024-03-08T00:40:36.090000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@520034910149410861\u003e thinking about the above: if we let the block be synced but not attested, shouldn't this be fine? The next proposer can base in it if he has an IL or can reorg it if it doesn't, what's the risk? I guess if there are enough dishonest parties that attest to it without a valid IL but this happens anyway right?",
        "created_at": "2024-03-08T00:43:07.156000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok, have a draft doc started here: https://notes.ethereum.org/@mikeneuder/il-poc-spec\n\ntook a stab at our feature set for beacon-chain, p2p-networking, and validator. trying to keep it simple as possible. also updated the files and description of https://github.com/ethereum/consensus-specs/pull/3617 to reflect.",
        "created_at": "2024-03-08T00:59:15.023000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e will work on engine api and execution specs tomorrow. those will largely be the same as https://notes.ethereum.org/@mikeneuder/il-spec-overview i believe. but will double check",
        "created_at": "2024-03-08T01:01:36.756000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I haven't yet even looked at these specs since we had ours, but from this doc I don't see any mention of a `notify_newInclusionList` engine method that the CL should pass to the EL for IL validation before attesting the block. I would not want to have this be handled by `notify_NewPayload` and send at the same time the IL proposed on N with the payload of N",
        "created_at": "2024-03-08T01:05:06.146000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Another quick feedback, IL txs shouldn't be part of payload attribute object. EL client already has this info",
        "created_at": "2024-03-08T01:07:23.405000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e its not in the payload attributes anymore! removed it (re @terencechain: Another quick feedback, IL txs shouldn't be part of payload attribute object. EL client already has this info)",
        "created_at": "2024-03-08T01:09:54.913000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e @potuz0 wouldnt engine_newPayloadV4 cover this ideally? b/c the IL is gossiped with the beacon_block",
        "created_at": "2024-03-08T01:11:35.893000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_2.jpg",
                "content": "89a6bf2b6b94f91aa227772946f5d589d5eb4be747b6aa3e3ac31eed781356d5"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Is https://github.com/michaelneuder/execution-apis/pull/1 the latest?",
        "created_at": "2024-03-08T01:12:13.968000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e sorry, have been focused on beacon specs. https://github.com/ethereum/consensus-specs/pull/3617",
        "created_at": "2024-03-08T01:12:43.402000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e will work on engine api and execution specs tomorrow.",
        "created_at": "2024-03-08T01:12:54.663000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I really don't want this to happen because it's openly breaking ePBS, I would want to keep CL validity independent of the presence of the payload",
        "created_at": "2024-03-08T01:18:02.222000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think it's good to have them separated. It's a cleaner separation and makes it future-proof. Another example: execution ticket where it would be separated",
        "created_at": "2024-03-08T01:22:30.206000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok sounds good! will separate them in the engine apis tomorrow! (re @InclusionList_bot: \u003cpotuz\u003e [reply]: I really don't want this to happen because it's openly breaking ePBS, I would want to keep CL validity independent of the presence of the payload)",
        "created_at": "2024-03-08T01:33:36.235000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e first on my list :)",
        "created_at": "2024-03-08T01:33:45.499000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "question: are any changes in the builder API necessary for this to work?",
        "created_at": "2024-03-08T01:34:12.791000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "or does that automatically follow from, the builder API relies on, well, builders using the engine API",
        "created_at": "2024-03-08T01:34:53.648000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't think the builder API needs to change in this version",
        "created_at": "2024-03-08T01:35:31.515000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Take a look at this, because it is the latest version I think",
        "created_at": "2024-03-08T01:35:34.234000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Oh interesting the bot doesn't work well for this",
        "created_at": "2024-03-08T01:36:34.600000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "what's supposed to be there?",
        "created_at": "2024-03-08T01:36:46.897000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://github.com/fradamt/execution-apis/blob/d0e03f045fc368d918aa62ca83dc44e3b59baa37/src/engine/experimental/eip7547.md",
        "created_at": "2024-03-08T01:37:00.699000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "That's what \u003c@520034910149410861\u003e was linking",
        "created_at": "2024-03-08T01:37:17.842000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e @fradamt did you have a look at this? (re @InclusionList_bot: \u003cpotuz\u003e @fradamt thinking about the above: if we let the block be synced but not attested, shouldn't this be fine? The next proposer can base in it if he has an IL or can reorg it if it doesn't, what's the risk? I guess if there are enough dishonest parties that attest to it without a valid IL but this happens anyway right?)",
        "created_at": "2024-03-08T13:32:46.808000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Seems to make life easier if possible",
        "created_at": "2024-03-08T13:32:56.011000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Do you mean import the block and just have the inclusion list availability and validity be a condition for it to be considered in the fork-choice?",
        "created_at": "2024-03-08T14:44:30.587000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Re builder API \u003c@654267572107083777\u003e \u003c@755590043632140352\u003e \nIt willl change if we couple IL and block as a single gossip object.\n\nDecoupled version:\n- Proposer submits IL\n- Builder sumits blocks\n\nCoupled version:\n- Proposer returns IL to relayer via getHeader or submitBlindBlock\n-Relayer needs to assemble everything together\n- More work for the relayer and builder API, another downside to consider",
        "created_at": "2024-03-08T14:47:02.719000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I mean let a validator import the block but not attest to it if it hasn't seen an IL (specifically attest for the parent) and propose on top of the parent if it hasn't seen the IL, but let it be in forkchoice. (re @fradamt: Do you mean import the block and just have the inclusion list availability and validity be a condition for it to be considered in the fork-choice?)",
        "created_at": "2024-03-08T14:47:21.405000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "interesting, can see it. Will consider how hardline my opposition to the decoupled version is, but it's so far still there.",
        "created_at": "2024-03-08T14:47:57.865000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "the distinction is random flakiness vs deterministically/locally testable additional parameters",
        "created_at": "2024-03-08T14:48:49.793000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I think most of Dustin's complains should be gone if we let the block be in forkchoice, anyway the next proposer resolves the existence of the IL",
        "created_at": "2024-03-08T14:50:30.801000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "maybe? there's still the additional block quarantine thing. I'm envisioning how this would work",
        "created_at": "2024-03-08T14:51:32.318000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e What’s the advantage of having some ad-hoc attestation and proposal logic instead of just doing this filtering when running the fork-choice?\n\n\n`children = [\n   root for (root, block) in blocks.items()\n      if block.parent_root == head\n      and is_inclusion_list_available(root)\n]` (re @potuz0: I mean let a validator import the block but not attest to it if it hasn't seen an IL (specifically attest for the parent) and propose on top of the parent if it hasn't seen the IL, but let it be in forkchoice.)",
        "created_at": "2024-03-08T14:51:36.314000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "because in principle the Nimbus BN (or other BNs) don't know until almost the slot itself if REST beacon API users will want to propose",
        "created_at": "2024-03-08T14:52:10.106000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e None, they are equivalent, I'm proposing exactly this (re @fradamt: What’s the advantage of having some ad-hoc attestation and proposal logic instead of just doing this filtering when running the fork-choice?\n\n```\nchildren = [\n   root for (root, block) in blocks.items()\n      if block.parent_root == head\n      and is_inclusion_list_available(root)\n]\n```)",
        "created_at": "2024-03-08T14:52:12.090000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e what is this block quarantine? (re @InclusionList_bot: \u003ctersec\u003e maybe? there's still the additional block quarantine thing. I'm envisioning how this would work)",
        "created_at": "2024-03-08T14:52:35.845000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "so one will have more ... degrees of half-trustedness which have to be tracked",
        "created_at": "2024-03-08T14:52:37.241000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "right, a Nimbus-specific idea though other clients might have some notion which maps",
        "created_at": "2024-03-08T14:53:02.919000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "it's where, e.g., Nimbus gets a block which needs blobs but the blobs have not been received. or a block which looks valid but the parents haven't been received. etc.",
        "created_at": "2024-03-08T14:53:34.442000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "so it can't actually be checked yet",
        "created_at": "2024-03-08T14:53:41.922000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "there's the specific Nimbus data structures, etc, but there's the general idea of a received-but-half-trusted-block which has to be locally tracked",
        "created_at": "2024-03-08T14:54:20.122000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I am proposing that you do not need this at all, you just import the block and act as normal, add a bool to the forkchoice node and whenever you import the IL you set it to true.",
        "created_at": "2024-03-08T14:54:21.850000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "there's just a fundamental difference between having that and not",
        "created_at": "2024-03-08T14:54:31.187000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "proposal only or otherwise",
        "created_at": "2024-03-08T14:54:37.295000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "and 1s or 1h latency tolerance or not",
        "created_at": "2024-03-08T14:54:48.887000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Oh ok then yeah I think this is the correct way to do it. I also think it would be preferable to do it for blobs, because that way if we have B with some children B’ whose blobs are seen as available by some but not all validators, the attestations to B’ count for B even for validators that see B’ as unavailable temporarily (re @potuz0: None, they are equivalent, I'm proposing exactly this)",
        "created_at": "2024-03-08T14:55:17.336000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "so \"optimistic sync\" part 2",
        "created_at": "2024-03-08T14:55:22.812000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e yes, this implies having an extra boolean in forkchoice which should not affect block processing and only head computing... I'm not really following now (re @InclusionList_bot: \u003ctersec\u003e and 1s or 1h latency tolerance or not)",
        "created_at": "2024-03-08T14:55:29.923000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e no, this is not about validity (re @InclusionList_bot: \u003ctersec\u003e [reply]: so \"optimistic sync\" part 2)",
        "created_at": "2024-03-08T14:55:42.916000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "well, it's a kind of validity",
        "created_at": "2024-03-08T14:55:54.759000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e right, I think this works as well for blobs (re @fradamt: Oh ok then yeah I think this is the correct way to do it. I also think it would be preferable to do it for blobs, because that way if we have B with some children B’ whose blobs are seen as available by some but not all validators, the attestations to B’ count for B even for validators that see B’ as unavailable temporarily)",
        "created_at": "2024-03-08T14:56:12.499000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "\"I'm not really following now (re @InclusionList_bot: \u003ctersec\u003e and 1s or 1h latency tolerance or not)\" well, in general the idea that there are all these mitigating conditions, that it's unlikely things can go wrong very often etc",
        "created_at": "2024-03-08T14:56:32.071000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "and from my perspective it doesn't really matter how mitigated it is, all edge cases must be handled",
        "created_at": "2024-03-08T14:56:56.409000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "it just makes them harder to find",
        "created_at": "2024-03-08T14:57:04.319000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "so the only true solution is a structural one where the failure mode literally does not exist",
        "created_at": "2024-03-08T14:57:31.493000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Which failure mode do you see arising from importing a block with an unavailable blob/IL but not considering blocks in its subtree as head candidates? Versus the status quo of not importing the block at all",
        "created_at": "2024-03-08T15:00:05.047000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Even if everything goes wrong and you never see any IL, what is the problem/complication that you are seeing? I am giving very concrete examples of advantages to decoupling them. There is one concrete advantage of coupling them that I see in that you can synchronously set the forkchoice node and you know that the IL was valid when you imported the block, other than that I see the list of advantages to decoupling vastly outweigh this: \n- Better pipelining (can use CPU and broadcast 10 seconds before your slot)\n- Lighter blocks (you don't need to send the IL with them and you don't need to validate it at the same time as the payload)\n- Better gossip validation (you do not need to enter the message to check that it was a block that you already imported) \n- Better Builder API (no changes) \n\nI would agree with you that falling back to RPC to request the IL would actually make me think twice, but if you don't I don't see how the list above is not contundent",
        "created_at": "2024-03-08T15:00:15.587000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "no, the status quo (right now. I mean, pre-IL) is importing the block",
        "created_at": "2024-03-08T15:02:00.827000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "maybe that's the disconnect?",
        "created_at": "2024-03-08T15:02:05.227000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Probably better to keep the discussion separate but for blobs the next proposer being malicious and a collusion with some stake can cause a block to be canonical without DA. This doesn't happen with ILs since if a block is included later it will have to produce the IL (re @fradamt: Which failure mode do you see arising from importing a block with an unavailable blob/IL but not considering blocks in its subtree as head candidates? Versus the status quo of not importing the block at all)",
        "created_at": "2024-03-08T15:02:10.831000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm starting from no-IL scenario, and seeing liveness reduction",
        "created_at": "2024-03-08T15:02:15.779000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I'm saying import the block, with or without an IL (re @InclusionList_bot: \u003ctersec\u003e maybe that's the disconnect?)",
        "created_at": "2024-03-08T15:02:53.348000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "where attesting is fine",
        "created_at": "2024-03-08T15:04:10.940000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e By status quo I meant to use is_inclusion_list_available as we do now for blobs, i.e., in on_block (re @InclusionList_bot: \u003ctersec\u003e [reply]: no, the status quo (right now. I mean, pre-IL) is importing the block)",
        "created_at": "2024-03-08T15:04:12.626000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "and sync committee is fine",
        "created_at": "2024-03-08T15:04:14.324000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah I don't care about that status quo because it doesn't exist",
        "created_at": "2024-03-08T15:04:28.313000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e It’s not clear to me if you are arguing against potuz’s proposal or against ILs in general",
        "created_at": "2024-03-08T15:05:11.499000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "broadly: to the extent all of this is additional beacon chain logic, it's just some beacon chain logic, it can be added/tested, not ultimately a problem",
        "created_at": "2024-03-08T15:05:29.332000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "not against ILs here",
        "created_at": "2024-03-08T15:05:43.952000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "there are a couple versions of \"potuz's proposal\":\n- decoupled with validity for attesting (and sync committee too maybe) dependent on ILs every block, in time; and\n- decoupled with validity for only proposing dependent on ILs this way\n\nif I understand correctly?",
        "created_at": "2024-03-08T15:07:55.813000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "for the second case, are ILs sufficiently specified that one can either apply them to a block or throw them away within a slot or two? or avoid unbounded buffers for maybe-valid-ILs which point to maybe-valid-blocks which might not have yet come in?",
        "created_at": "2024-03-08T15:12:00.755000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Since I don't follow let me rephrase in the sense that Franceso put it cause it's more readable: \n\n- A block comes, you do everything exactly as you do today, you import it and add it to forkchoice\n- An IL comes you look/add for the node in forkchoice and add the il_present = true. \n- When calling get_head in forkchoice, it will filter out the leaves that don't have an IL. \n\nYour main concern was the fact that you couldn't consider the blocks valid until you had the blobs, this is no longer an issue here, blocks are valid, you can gossip them, act on them etc.. only thing is that get_head will filter out some leaves if they don't have a validated IL (re @InclusionList_bot: \u003ctersec\u003e there are a couple versions of \"potuz's proposal\":\n- decoupled with validity for attesting (and sync committee too maybe) dependent on ILs every block, in time; and\n- decoupled with validity for only proposing dependent on ILs this way\n\nif I understand correctly?)",
        "created_at": "2024-03-08T15:14:42.408000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e As for this, ILs can be thrown out just after one slot (re @InclusionList_bot: \u003ctersec\u003e for the second case, are ILs sufficiently specified that one can either apply them to a block or throw them away within a slot or two? or avoid unbounded buffers for maybe-valid-ILs which point to maybe-valid-blocks which might not have yet come in?)",
        "created_at": "2024-03-08T15:15:17.121000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e in fact the CL should not ever keep them",
        "created_at": "2024-03-08T15:15:28.405000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e and it's up to the EL to keep them and they can throw them after one slot",
        "created_at": "2024-03-08T15:15:51.875000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "say, one gets, in sequence as a CL:\n- IL 1 (to block one hasn't seen)\n- IL 2 (to block one hasn't seen)\n- ...\n- IL 1000 (to block one hasn't seen)\n\nfor correct slot. those don't have to be kept until a block might come in?",
        "created_at": "2024-03-08T15:16:30.984000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e you discard all ILs after the first one",
        "created_at": "2024-03-08T15:17:29.629000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e which slot/parent root are these for? All for the same/current slot?",
        "created_at": "2024-03-08T15:17:32.323000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e and you pass the first one to the EL",
        "created_at": "2024-03-08T15:17:36.300000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I'm assuming you are seeing ILs for the same slot/proposer index",
        "created_at": "2024-03-08T15:18:16.197000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e This would depend on whether we allow missed slots to \"deactivate  the IL\", meaning if you build B at slot n+1 on B' at slot n-1 you don't have to satisfy the IL of B'. Right? (re @potuz0: As for this, ILs can be thrown out just after one slot)",
        "created_at": "2024-03-08T15:20:12.249000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e otherwise you might have to keep one IL per non-finalized block, both in case you need to propose on top of it or in case someone asks you about it, no?",
        "created_at": "2024-03-08T15:21:51.920000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e The EL keeps them, so the EL only needs to keep the last one (re @fradamt: This would depend on whether we allow missed slots to \"deactivate  the IL\", meaning if you build B at slot n+1 on B' at slot n-1 you don't have to satisfy the IL of B'. Right?)",
        "created_at": "2024-03-08T15:23:06.121000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e It will be an implementation detail of keeping a few ones in case it gets an FCU to an old head/fork to be able to build a block on top of that IL",
        "created_at": "2024-03-08T15:23:49.418000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Right. What do you do if you are syncing and you need to request it though? (re @potuz0: The EL keeps them, so the EL only needs to keep the last one)",
        "created_at": "2024-03-08T15:25:51.680000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e In our original ePBS branch we considered is_il_available == true for every past slot. Importing a child guarantees the availability of the IL",
        "created_at": "2024-03-08T15:27:09.047000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "it could be for multiple parent roots in a forked network",
        "created_at": "2024-03-08T15:27:25.273000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e then you are getting very different ILs for different roots, if all these are proposers that are supposed to propose in the current slot according to your view you can save them for the current slot. If this happens however, a node will simply take the unique one in its head view, and ignore the others (re @InclusionList_bot: \u003ctersec\u003e [reply]: it could be for multiple parent roots in a forked network)",
        "created_at": "2024-03-08T15:29:37.079000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e if the other branch actually becomes canonical it's fine cause any block that builds will have to include the IL",
        "created_at": "2024-03-08T15:30:01.480000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e If you then have to build a block on top of one of these blocks where you marked the IL to be available, you'd need to extract the IL from the block + child essentially (re @potuz0: In our original ePBS branch we considered is_il_available == true for every past slot. Importing a child guarantees the availability of the IL)",
        "created_at": "2024-03-08T15:30:01.709000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e you mean you were syncing and suddenly caught up to head and realize that you need to reorg it? yeah this seems true (re @fradamt: If you then have to build a block on top of one of these blocks where you marked the IL to be available, you'd need to extract the IL from the block + child essentially)",
        "created_at": "2024-03-08T15:30:50.239000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Yeah. Someone that actually has the IL in their EL would be ok, but you don't and need to get one, even if you know it is in principle available (re @potuz0: you mean you were syncing and suddenly caught up to head and realize that you need to reorg it? yeah this seems true)",
        "created_at": "2024-03-08T15:31:39.268000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e What's wrong with just keeping the IL associated with non-finalized blocks? Other than a bit of extra redundant storage",
        "created_at": "2024-03-08T15:31:47.790000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I don't think there's any problem at all (re @fradamt: What's wrong with just keeping the IL associated with non-finalized blocks? Other than a bit of extra redundant storage)",
        "created_at": "2024-03-08T15:32:35.285000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e but another thing I like about decoupling is that you don't need to be getting the IL in the block to serve ranges for example",
        "created_at": "2024-03-08T15:32:59.600000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e syncing is much harder if it's coupled cause then the CL will need to keep them",
        "created_at": "2024-03-08T15:33:12.008000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I think we should just serve the bare blocks",
        "created_at": "2024-03-08T15:33:26.769000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e and have an RPC requests for ILs",
        "created_at": "2024-03-08T15:33:36.242000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e in addition with the condition that the EL keeps the unfinalized ILs, this should cover all cases",
        "created_at": "2024-03-08T15:33:53.604000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e didn't read everything so sorry if this was already discussed...\nquick question: `n` block is in fork choice `has_il` is `false`, `n+1` block builds on `n`, and `has_il` is `true`. Can `n+1` be head? or it need the `n`'s' IL",
        "created_at": "2024-03-08T15:36:47.422000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e N+1 builds in n including its il",
        "created_at": "2024-03-08T15:39:28.566000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e So n has a valid IL by definition",
        "created_at": "2024-03-08T15:39:41.542000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e",
        "created_at": "2024-03-08T15:39:46.755000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_3.jpg",
                "content": "3789c257d7c100b849473c62a985ad5b7093f82c3bd846f0ad2d37e80d51e5f0"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok this is what im thinking for engine apis for POC spec",
        "created_at": "2024-03-08T15:39:53.839000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e https://notes.ethereum.org/@mikeneuder/il-poc-spec#Execution-API-%E2%80%93-link-to-draft-PR",
        "created_at": "2024-03-08T15:39:54.750000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e",
        "created_at": "2024-03-08T15:40:16.700000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_4.jpg",
                "content": "7416e1724aaed7a1235aeb20e7992f1fa60960cb74914a7c43732177ef8e40d4"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e super simple",
        "created_at": "2024-03-08T15:40:19.830000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e nice b/c it decouples the IL stuff from other APIs making it just the two new APIs. that look like what you expected?",
        "created_at": "2024-03-08T15:41:27.201000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e lgtm, likely the node will call `newIL` before `newPayload` but that's just cosmetic",
        "created_at": "2024-03-08T15:41:27.516000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e I think we are still debating coupling or not coupling for p2p",
        "created_at": "2024-03-08T15:41:40.062000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e sure",
        "created_at": "2024-03-08T15:42:47.351000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e but for PoC im going for",
        "created_at": "2024-03-08T15:43:05.059000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_5.jpg",
                "content": "9abd6dec0179cfa9d8745e4e2cd554c80c38d6f7788d770a45e03b8bb0186808"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e we can debate till we are blue in face lol",
        "created_at": "2024-03-08T15:43:09.983000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e my goal is to make the full minimal spec good enough for the poc",
        "created_at": "2024-03-08T15:43:28.724000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i dont see value in debating more",
        "created_at": "2024-03-08T15:43:33.686000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e that's fine as long as PoC doens't involve builder API",
        "created_at": "2024-03-08T15:43:48.425000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess to say generally, my view is that the coupled version has relatively bounded costs, and the uncoupled version more potential for surprise.\n\nto pick up this, at least some of those are real advantages, to acknowledge this",
        "created_at": "2024-03-08T15:43:49.365000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e it'll suck to work on builder API for coupled version then having to revert back to de-coupled version, wasted work",
        "created_at": "2024-03-08T15:44:06.012000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "but yeah, agree for PoC, I'd frame those as generally optimizations",
        "created_at": "2024-03-08T15:44:11.186000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e",
        "created_at": "2024-03-08T15:44:14.109000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_6.jpg",
                "content": "32328f1a423d694d078660843387a498a028021adbf6724736051c3cfc6026e6"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Well, I'm increasingly convinced that it's much simpler to have them separated and from the looks of it it seems that we need to convince only you Mike and Dustin",
        "created_at": "2024-03-08T15:44:20.870000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e reordered, this look right @terencechain ?",
        "created_at": "2024-03-08T15:44:21.386000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e This still seems weird to me, because it might be that the IL wasn't available (in the normal format) except to the proposer of n+1, and after a reorg no one can build on n without extracting the IL. I think it makes sense to not output as head a block which has ancestor with has_il = false, regardless of whether it has valid children or not (re @potuz0: So n has a valid IL by definition)",
        "created_at": "2024-03-08T15:44:55.214000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Specially since forkchoice deals with presence at filtering",
        "created_at": "2024-03-08T15:44:58.462000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ive gone back and forth too many times lol. the PoC spec im making will have them coupled (re @potuz0: Well, I'm increasingly convinced that it's much simpler to have them separated and from the looks of it it seems that we need to convince only you Mike and Dustin)",
        "created_at": "2024-03-08T15:45:08.035000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e can use or not use based on your preference, but this is what im going with for now!",
        "created_at": "2024-03-08T15:45:32.803000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "and one premise from before which I asked about was about size of an individual IL. relatively small, apparently, 16 transactions at the moment",
        "created_at": "2024-03-08T15:45:43.740000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i changed that",
        "created_at": "2024-03-08T15:45:52.568000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh, what is it now",
        "created_at": "2024-03-08T15:45:57.395000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e",
        "created_at": "2024-03-08T15:46:08.152000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_7.jpg",
                "content": "1ea879ecc0514a6795a11dd4ab4a6cc8828e0c27a1bf8000872e95695554b00a"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e the const is just to specify the max length of the array right?",
        "created_at": "2024-03-08T15:46:23.750000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e hmm this is a good point, a collusion like this would force the EL to extract an IL from the last two blocks :( (re @fradamt: This still seems weird to me, because it might be that the IL wasn't available (in the normal format) except to the proposer of n+1, and after a reorg no one can build on n without extracting the IL. I think it makes sense to not output as head a block which has ancestor with has_il = false, regardless of whether it has valid children or not)",
        "created_at": "2024-03-08T15:46:31.887000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e so it should be the max number of txns that can fit in 3mm",
        "created_at": "2024-03-08T15:46:35.190000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e \u003c@750824368438771842\u003e the max length could be millions",
        "created_at": "2024-03-08T15:46:50.213000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e it's just for SSZ",
        "created_at": "2024-03-08T15:46:53.579000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "as in, stuff the entire block with forced transactions?",
        "created_at": "2024-03-08T15:46:54.470000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "what's the use case?",
        "created_at": "2024-03-08T15:46:58.576000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e im just trying to bound the size of the IL by the max number of valid transactions that could be in 3mm gas",
        "created_at": "2024-03-08T15:47:25.848000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e which seems to be 143 to me",
        "created_at": "2024-03-08T15:47:29.894000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e is that not correct ?",
        "created_at": "2024-03-08T15:47:38.236000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e You want to bound the message size tightly but this may not be good in future forks. It's already incentive aligned to send a valid IL, the proposer can already flood with very long blocks if it wants",
        "created_at": "2024-03-08T15:48:33.508000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e so it's safer to just set that limit to 2²0",
        "created_at": "2024-03-08T15:48:41.432000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e 2^20",
        "created_at": "2024-03-08T15:48:44.293000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e or something like that, it's just for hashing",
        "created_at": "2024-03-08T15:48:51.098000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e interesting. why was it set to 16 in the previous versions ? just for convenience ?",
        "created_at": "2024-03-08T15:50:06.379000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "hm, this changes the coupled/decoupled thing a bit. would still question the value of a million-length IL, but also, the longer the IL, the more \"blob-like\" the network use case is. which, for blobs is unavoidable",
        "created_at": "2024-03-08T15:52:43.682000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "for this it's not",
        "created_at": "2024-03-08T15:52:47.434000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "but as Potuz notes, it's in control of the proposer, so a proposer can just send a short list",
        "created_at": "2024-03-08T15:53:16.561000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e happy to set it back to 16 if we think thats more reasonable",
        "created_at": "2024-03-08T15:55:17.329000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e you mean the ePBS spec? we were checking this as a CL validity and enforcing a small size based on txs instead of only gas. Gas only and up to the EL seems a simpler and easier design (re @mikeneuder: interesting. why was it set to 16 in the previous versions ? just for convenience ?)",
        "created_at": "2024-03-08T15:55:36.390000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e but setting it to 16 could not be big enough for 3mm gas",
        "created_at": "2024-03-08T15:57:43.911000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e if e.g., 17,  21k gas  transactions are being censored",
        "created_at": "2024-03-08T15:58:28.818000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think you are right here \u003c@520034910149410861\u003e, are there EL devs paying attention here? \u003c@122421399213047814\u003e would it be hard on the EL  from a valid payload and summary (satisfied in this payload and its parent) to give me the full IL that was satisfied? reason being that the alternative is tweaking forkchoice to not consider for forkchoice these payloads either and then it starts smelling like invasive to forkchoice.",
        "created_at": "2024-03-08T15:59:36.106000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e yep, we had a combination that would bound tighter the payload. Those numbers were mostly placeholders, my rationale was that I am not sure how much \"byte data\" becomes a problem for the next proposer to include in his block if it is forced to send larger blocks (re @mikeneuder: if e.g., 17,  21k gas  transactions are being censored)",
        "created_at": "2024-03-08T16:01:45.084000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e wasn't sure if this could be an attack vector",
        "created_at": "2024-03-08T16:02:00.217000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e (sidenote: I am leaving now for vacation and will only sporadically check here for the next 12 days)",
        "created_at": "2024-03-08T16:02:59.729000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e (fwiw decoupled seems simpler to me)",
        "created_at": "2024-03-08T16:03:25.708000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e before you go, a quick comment, the edge case you mention is pretty weird still: you wouldn't consider the parent for head normally since it has no il available, so why would you even need to reorg the incoming block? (re @fradamt: (sidenote: I am leaving now for vacation and will only sporadically check here for the next 12 days))",
        "created_at": "2024-03-08T16:04:12.625000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e he is on a plane lol",
        "created_at": "2024-03-08T16:05:01.551000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e bye bye king fra",
        "created_at": "2024-03-08T16:05:07.902000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e lol",
        "created_at": "2024-03-08T16:05:11.390000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e enjoy vacations Francesco",
        "created_at": "2024-03-08T16:05:19.700000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Have fun francesco!",
        "created_at": "2024-03-08T16:05:41.042000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Yeah I think you shouldn't consider reorging to the parent (re @potuz0: before you go, a quick comment, the edge case you mention is pretty weird still: you wouldn't consider the parent for head normally since it has no il available, so why would you even need to reorg the incoming block?)",
        "created_at": "2024-03-08T16:08:44.819000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e You shouldn't mark the parent has having IL available because it has a valid child",
        "created_at": "2024-03-08T16:09:00.570000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e But you can consider the child to be ok",
        "created_at": "2024-03-08T16:09:08.686000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e yeah ok, so we are on the same boat here",
        "created_at": "2024-03-08T16:09:20.421000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Ok",
        "created_at": "2024-03-08T16:09:26.945000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Bye!",
        "created_at": "2024-03-08T16:09:28.956000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e enjoy",
        "created_at": "2024-03-08T16:09:32.708000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok i have all the links in place in https://notes.ethereum.org/@mikeneuder/il-poc-spec. just need to remember how to avoid the chain[-1] ref in the EELS spec",
        "created_at": "2024-03-08T16:10:45.431000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "Cross-layer",
        "parent": "",
        "content": "seems fairly easy, you just iterate through the parent+current block",
        "created_at": "2024-03-08T16:21:34.537000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Danny didn't  really like this and preferred something like storing the transaction addresses in the state, to not introduce extra dependencies on the parent in the state transition",
        "created_at": "2024-03-08T18:20:59.933000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e See here for an attempt at doing this: https://github.com/ethereum/execution-specs/compare/master...fradamt:execution-specs:eip-7547",
        "created_at": "2024-03-08T18:23:13.877000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Yeah with this I agree, but still the issue is if it's worth to have an endpoint in the EL to retrieve it from the last block and the contract vs complicating forkchoice to avoid the reorg (re @fradamt: Danny didn't  really like this and preferred something like storing the transaction addresses in the state, to not introduce extra dependencies on the parent in the state transition)",
        "created_at": "2024-03-08T18:38:31.462000+00:00",
        "attachments": null
    }
]