[
    {
        "author": "nc1234",
        "category": "Cross-layer",
        "parent": "",
        "content": "Given many IL designs floating around, I think it will be hard to get everyone to agree on a finalized spec at this point without prototyping any of the designs. On the other hand, we can't just prototype every designs, so narrowing down to several promising ones and prototype them would be cool. Curious what others think",
        "created_at": "2024-03-06T06:18:20.816000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e I wouldn't say there are many IL designs floating around. There is one design that has been fairly stable at a high level for a while, and where I think the main point of contention at this point is whether the IL sidecar should be gossiped separately or with the block. (re @InclusionList_bot: \u003cnc1234\u003e [reply]: Given many IL designs floating around, I think it will be hard to get everyone to agree on a finalized spec at this point without prototyping any of the designs. On the other hand, we can't just prototype every designs, so narrowing down to several promising ones and prototype them would be cool. Curious what others think)",
        "created_at": "2024-03-06T14:02:46.823000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e I would feel comfortable going ahead with that design, with the IL coupled with the block for the time being",
        "created_at": "2024-03-06T14:04:20.779000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Have we decided whether to commit the summary in block or not? I think that's another major design decision",
        "created_at": "2024-03-06T14:05:38.417000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I thought Francesco was referring to this although on a second read he was referring to something else, yeah, I think my current preference would be like the original design without committing the summary to the block and broadcasting a completely independent sidecar.",
        "created_at": "2024-03-06T14:07:13.858000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Same. I think I like:\n- Not commit\n- Order: top of next block\n- Network: independent sidecar",
        "created_at": "2024-03-06T14:08:22.547000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Yeah I was referring to this. Going ahead with either option is ok with me.",
        "created_at": "2024-03-06T14:09:07.111000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is the simplest design, and at the same time I think is the lesser of evils",
        "created_at": "2024-03-06T14:09:44.680000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@750824368438771842\u003e I think we'll need to update the specs to reflect them",
        "created_at": "2024-03-06T14:10:05.131000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Why top of block? (re @InclusionList_bot: \u003cterence0083\u003e Same. I think I like:\n- Not commit\n- Order: top of next block\n- Network: independent sidecar)",
        "created_at": "2024-03-06T14:15:07.466000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ya i think the top of block is not good personally",
        "created_at": "2024-03-06T14:26:09.630000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e since thats an el specific change we could maybe prototype both easily tho ?",
        "created_at": "2024-03-06T14:26:51.634000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm thinking ToB `n+1` in the context that these txs should really be bottom of `n`. The ability to front run `n+1` is much less concern imo. It's hard to do because they need to trust the proposer of `n`, then it needs additional software support... etc\n\nWhat is the main reason to not to ToB in you guys imo?",
        "created_at": "2024-03-06T15:04:12.432000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e I don't see what it achieves, and it introduces needless MEV considerations",
        "created_at": "2024-03-06T15:08:02.404000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "But there is also MEV consideration not to do ToB right? `n+1` builder can now front run `n` 's inclusion list",
        "created_at": "2024-03-06T15:17:55.451000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e the inclusion list isn't frontrunning protection",
        "created_at": "2024-03-06T15:20:49.588000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e I really think we should stick with the original principle of making it as \"useless\" as possible, except for censored transactions. We are already compromising on this with the unconditional design",
        "created_at": "2024-03-06T15:22:12.390000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e (it also just won't be any good at this regardless, for transactions from the public mempool) (re @fradamt: the inclusion list isn't frontrunning protection)",
        "created_at": "2024-03-06T15:24:53.444000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I also like ToB better because it is much simpler to specify: you just loop once for transactions in order and a single if-else: the address is in the summary or is in the contract. And that' s it. But I don't feel as strong on this as the other design conditions (I do think that not committing to the block is strictly better), so I don't mind if this is left out and only colloquially written as (check that all tx in the summary are there or in the contract list), frontrunning of censored transactions is not much of a worry unless a frontrunner can alter their execution pre-state  in exploitable manner (I'm not thinking in MEV here).",
        "created_at": "2024-03-06T15:27:29.469000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "Cross-layer",
        "parent": "",
        "content": "With ToB vs non-ToB, MEV risk is too broad and opaque of a term. You could front-run an IL, sure, but with ToB, isn't the risk that the space much more valuable? Two very different failure modes",
        "created_at": "2024-03-06T15:43:24.155000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "Cross-layer",
        "parent": "",
        "content": "IL space being valuable \"enough\" (whatever enough is) leads to proposers giving up their newfound agency for profit, in comparison ability to frontrun seems like a better tradeoff",
        "created_at": "2024-03-06T15:49:00.524000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The point is that by not committing to any summary at all, this interaction with the proposer can never be trustless in any way.  The \"buyer\"  of the IL space has zero guarantees that his tx will be included, even if he obtains a signed summary with his tx.",
        "created_at": "2024-03-06T17:00:55.861000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "At anyrate these are really minor issues and can be implemented either way in the EL and contained to a simple change",
        "created_at": "2024-03-06T17:01:19.110000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "so I think this is not a deterrent to implement and have PoC right now, as long as we agree on the other design decisions that do require spec changes",
        "created_at": "2024-03-06T17:01:43.871000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Made what I think are the needed changes to the CL spec https://github.com/ethereum/consensus-specs/commit/bca66b05a21dd02871bf1edf1fffc664d171990c",
        "created_at": "2024-03-06T17:11:32.967000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e The CL verification is back to just checking the previous proposer signature on the summary included in the payload (with the previous proposer index save in the beacon state)",
        "created_at": "2024-03-06T17:13:32.548000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e The IL sidecar needs to explicitly contain the summary since the EL can't verify the signature, but there's no CL check about the summary being consistent with the actual IL, that would be part of EL validation",
        "created_at": "2024-03-06T17:14:37.486000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Let me know if it seems reasonable given what we discussed",
        "created_at": "2024-03-06T17:14:47.884000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes these look reasonable to me, what I had in the ePBS branch is to not include the signed summary in the payload to avoid the EL storing something useless in their block, rather include the summary itself and the signature in the envelope",
        "created_at": "2024-03-06T17:21:42.563000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "the CL then assembles the object and verifies signature before sending to the EL",
        "created_at": "2024-03-06T17:21:55.153000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e @fradamt, the changes look good to me\n- we probably want to define what domain to use to sign `SignedInclusionListSidecar.Signature`, I think that's part of validator spec which we need to update anyway\n- I think you can get away from from caching the prev slot preoposer index by verifying `previous_inclusion_list_summary` before header. That's ugly though. I think what you are doing is much better...",
        "created_at": "2024-03-06T18:15:44.541000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e - right, I only defined one for the summary\n- I didn't really want to make this check in process_block_header because it seems like a weird place to do it ðŸ˜„ (re @terencechain: @fradamt, the changes look good to me\n- we probably want to define what domain to use to sign SignedInclusionListSidecar.Signature, I think that's part of validator spec which we need to update anyway\n- I think you can get away from from caching the prev slot preoposer index by verifying previous_inclusion_list_summary before header. That's ugly though. I think what you are doing is much better...)",
        "created_at": "2024-03-06T18:22:17.578000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "Cross-layer",
        "parent": "",
        "content": "i see, makes sense",
        "created_at": "2024-03-06T18:28:50.597000+00:00",
        "attachments": []
    }
]