[
    {
        "author": "pawandhananjay",
        "category": "Cross-layer",
        "parent": "",
        "content": "This might be a dumb question, but why not include the `summary` and `inclusion_list_txs` in the `BeaconBlockBody` instead of in separate containers?",
        "created_at": "2024-03-18T09:19:26.900000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "There are three questions here:\n1. Why do we not commit to a Summary in the block?\n2. Why do we not commit to txs in the block?\n3. Why do we not send them jointly with the block?\n\n2) is because that would provide free DA (see the design docs on the matter). For 3) I argue this https://hackmd.io/@potuz/Sk_Xg0x06\n\nFor 1) the main reason is the ease to generate split views on head which is also the main reason I'm giving to separate them",
        "created_at": "2024-03-18T09:30:36.459000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e hello! looking forward to the call in a bit â€“â€“ https://github.com/ethereum/pm/issues/981#issuecomment-2003812773\n\ni put together a little more explicit agenda ^ is there anything there we can add ?",
        "created_at": "2024-03-18T12:46:39.358000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cnero_eth\u003e maybe, to add to potuz's question:\nHow big is the DA problem and could it be prevented with max size limits (either on the individual tx in the IL or on the total IL)?",
        "created_at": "2024-03-18T13:01:59.544000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e sure! added to open qs!",
        "created_at": "2024-03-18T13:10:01.737000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Cross-layer",
        "parent": "",
        "content": "The design in the no free lunch post talks about it solving the free DA problem because of:\n1. potential for multiple ILs\n2. reduced specificity of the txs\n(2) makes sense to me. I don't see how (1) helps. How is allowing the proposer to make multiple ILs help with the free DA problem?\n\nIn the instantiation for that in the current spec, does that mean that the proposer can send multiple `SignedBeaconBlockAndInclusionList` for a given slot with different summaries in the `SignedInclusionList`?",
        "created_at": "2024-03-18T13:30:21.464000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e we can discuss in the call! but the long story short: if a proposer can only sign a single IL, then the txns in the IL could get free DA by being invalidated by another txn that lands in the block (re @InclusionList_bot: \u003cpawandhananjay\u003e The design in the no free lunch post talks about it solving the free DA problem because of:\n1. potential for multiple ILs\n2. reduced specificity of the txs\n(2) makes sense to me. I don't see how (1) helps. How is allowing the proposer to make multiple ILs help with the free DA problem?\n\nIn the instantiation for that in the current spec, does that mean that the proposer can send multiple `SignedBeaconBlockAndInclusionList` for a given slot with different summaries in the `SignedInclusionList`?)",
        "created_at": "2024-03-18T13:32:16.510000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e you actually donâ€™t need to be able to sign multiple ILs, its more about the IL only committing the the single address",
        "created_at": "2024-03-18T13:32:50.869000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e (earlier designs actually have a commitment to the IL in the beacon block, so only one summary per block)",
        "created_at": "2024-03-18T13:33:18.423000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e commit vs not commit is one of the design considerations",
        "created_at": "2024-03-18T13:33:30.853000+00:00",
        "attachments": null
    },
    {
        "author": "pawandhananjay",
        "category": "Cross-layer",
        "parent": "",
        "content": "but if it gets invalidated by another tx that lands in the block, there is no need to include the original tx that was in the IL.\nThat's what the reduced specificity of txs alludes to right?\nI might have multiple designs all mixed up in my head lol ðŸ˜…",
        "created_at": "2024-03-18T13:40:14.934000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e hahah no you are right ! its all about reduced specificty",
        "created_at": "2024-03-18T13:44:49.332000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e that solves the free da problem",
        "created_at": "2024-03-18T13:44:55.394000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e the fact that multiple lists of txns can satisfy the same il",
        "created_at": "2024-03-18T13:45:08.651000+00:00",
        "attachments": null
    },
    {
        "author": "christine_galaxy",
        "category": "Cross-layer",
        "parent": "",
        "content": "as a heads up tim is muted on the YT livestream",
        "created_at": "2024-03-18T15:01:16.873000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e lol it's always the same",
        "created_at": "2024-03-18T15:02:50.521000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e lol",
        "created_at": "2024-03-18T15:04:27.371000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ok some random thoughts from the EL side for validating the IL. The current execution spec (https://github.com/michaelneuder/execution-apis/blob/93881a5ea971892e54a60a80d48a8294c39ba3e5/src/engine/experimental/eip7547.md) does not include blob txs. This is going to be rather complex since it also needs to pay enough gas for blobs (and there cannot be more than the max blobs in the IL ðŸ˜® )",
        "created_at": "2024-03-18T15:08:25.958000+00:00",
        "attachments": null
    },
    {
        "author": "pintail_xyz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I was listening in but unfortunately wasn't able to contribute (and seems like there was little time available anyway). I wondered if there has already been a discussion about paying proposers the tip from any transactions in the N+1 block which were in their inclusion list.\n\nThe reason is that the current design still relies effectively on altruism. Proposers may face a bigger risk of being reorged by specifying a non-empty IL, so at least if they can earn the tips from those transactions which were omitted by the builder of block N, then incentives are aligned",
        "created_at": "2024-03-18T15:09:19.320000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I want to leave here in writing \u003c@792822129019584562\u003e's idea to remove the contract keeping track of previous blocks txs and instead tie validation of the payload N+1 to nonces. The idea is simply the following:\n- The summary consists of addresses and nonces, \n- The proposer of N+1 includes the signed summary and a payload. \n- For each entry in the summary, the EL verifies that there is a transaction in the payload that has that address and nonce, and if not it checks that the current state's  nonce for the account with the given address, equals the nonce of the summary. \n\nThis removes the requirement for the contract. Is this the approach Gajinder? It looks good to me",
        "created_at": "2024-03-18T15:11:03.291000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ty! this is slick and lgtm too",
        "created_at": "2024-03-18T15:12:37.418000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is sth we're considering with \u003c@981249983196041218\u003e and \u003c@725415098331430932\u003e , in the context of COMIS but also applicable to ILs. I think there are a few more arguments to be written, to understand what the tip pays for (reorg protection? censorship resistance?) and how it should be set in some economic model, but morally it seems like a correct direction to me (\"the tip pays for inclusion\", is what we learned in school ;), and who includes you if not the IL maker?)",
        "created_at": "2024-03-18T15:18:17.819000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I have nothing against this, except that it looks like it may be quite difficult to implement outside of full ePBS: the next builder has no notion of who is the previous proposer, and tying payload validity to a CL struct is something that we haven't explored even remotely.",
        "created_at": "2024-03-18T15:23:20.397000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "the IL will have to include a new address to get the fee recipient",
        "created_at": "2024-03-18T15:24:52.935000+00:00",
        "attachments": null
    },
    {
        "author": "soispoke",
        "category": "Cross-layer",
        "parent": "",
        "content": "Something I didn't quite get from the call: why wouldn't transactions included in the IL influence the next block base fee? What's the rationale behind this?",
        "created_at": "2024-03-18T15:25:06.294000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think they should",
        "created_at": "2024-03-18T15:25:36.706000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "and the current specification is that they do AFAIK",
        "created_at": "2024-03-18T15:25:44.908000+00:00",
        "attachments": null
    },
    {
        "author": "soispoke",
        "category": "Cross-layer",
        "parent": "",
        "content": "ah, ok makes sense then ty",
        "created_at": "2024-03-18T15:26:10.559000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i think its about the slot n+1 block. for sure if slot n IL txns are included in slot n payload, they count towards that gas used",
        "created_at": "2024-03-18T15:32:34.648000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e but for the next slot, we extend based on the IL entries that were not satisfied in slot n",
        "created_at": "2024-03-18T15:32:58.382000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e thats the part i need to double check",
        "created_at": "2024-03-18T15:33:04.837000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah even for n+1 I think they should count for gas, otherwise it makes changing the total gas used a very complicated subject",
        "created_at": "2024-03-18T15:33:16.917000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "when it should be a simple parameter that it's adjusted in the clients",
        "created_at": "2024-03-18T15:33:26.386000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e right",
        "created_at": "2024-03-18T15:33:33.704000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i agree :D",
        "created_at": "2024-03-18T15:33:36.157000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e spec updates:\n- bundled -\u003e unbundled (gossip separately)\n- add nonce and address to commitment (makes EELS spec easier)\n- slot \u0026 proposer index in IL summary\n- check gas limit re 1559 in slot n+1 block\n\nanything else ? working on this today !",
        "created_at": "2024-03-18T15:38:35.126000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "looks good imo after these updates",
        "created_at": "2024-03-18T15:39:12.136000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e slot and proposer index in the IL needs to be in the summary",
        "created_at": "2024-03-18T15:39:33.001000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e modified ty (re @potuz0: slot and proposer index in the IL needs to be in the summary)",
        "created_at": "2024-03-18T15:39:58.138000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e great! (re @InclusionList_bot: \u003cg11tech\u003e looks good imo after these updates)",
        "created_at": "2024-03-18T15:40:00.836000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e So regarding the actual envelope",
        "created_at": "2024-03-18T15:40:25.484000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I am not sure what you are planning to include, so slot and proposer index may be outside of summary, but it should be inside of the signed message",
        "created_at": "2024-03-18T15:40:57.069000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e right. might need a sig over the envelope and a sig over the summary",
        "created_at": "2024-03-18T15:41:45.392000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Something like \n```\nclass InclusionListSummary(Container)\n    slot: Slot,\n    proposer_index: ValidatorIndex\n    summary: List[InclusionListSummaryEntry, MAX_TRANSACTIONS_PER_INCLUSION_LIST]```",
        "created_at": "2024-03-18T15:41:53.013000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ya nice",
        "created_at": "2024-03-18T15:42:15.679000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e and Entry will have nonce now",
        "created_at": "2024-03-18T15:42:20.199000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e we need to bring back `InclusionListSummaryEntry` as a container class cause now it has an address and the nonce",
        "created_at": "2024-03-18T15:42:21.210000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e yup",
        "created_at": "2024-03-18T15:42:23.942000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e exactly",
        "created_at": "2024-03-18T15:42:24.497000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e xD",
        "created_at": "2024-03-18T15:42:27.313000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hi, notes from breakout room #2's here. Feel free to leave comments: https://hackmd.io/@ttsao/Bkg53AHAT",
        "created_at": "2024-03-18T15:43:07.672000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e tyvm terence! (re @InclusionList_bot: \u003cterence0083\u003e Hi, notes from breakout room #2's here. Feel free to leave comments: https://hackmd.io/@ttsao/Bkg53AHAT)",
        "created_at": "2024-03-18T15:44:51.562000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e and ty all for attending! \u003c3",
        "created_at": "2024-03-18T15:45:14.642000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e commit updating beacon-chain.md : https://github.com/ethereum/consensus-specs/pull/3617/commits/335b6b5504196fc94caf17d3078a4aa8b4a54181\n\nchangelog\n- redefine summary type to include nonce and address\n- add slot and val index to the summary type\n- remove prev val index from the beacon state (yay!)\n- add is_inclusion_list_available \n- make is_inclusion_list_available is part of verify_and_notify_new_payload",
        "created_at": "2024-03-18T16:31:10.833000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i think it cleans up nicely! going to go thru other files ASAP and update il spec PoC doc. also will respond to comments on the pr",
        "created_at": "2024-03-18T16:31:45.064000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Thank you. I'll do a deep dive on the spec today. Ping me when everything is done  : )",
        "created_at": "2024-03-18T16:54:39.591000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok!",
        "created_at": "2024-03-18T16:56:43.447000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cgr3999\u003e we also need to think how checkpoint sync will work , when finality is there i see no issue (basically one would checkpoint sync finalized, sync to head, get the head's IL from gossip/req/resp, propose if need to)\n\nBut on non finality, one lets say checkpoint sync to head epoch checkpoint, and lets say no IL/block is available for blocks post it because of deteriorated conditions, proposer wouldn't be able to build a block if his EL doesn't has the txs\n\nI think we will be at some sort of a stuck condition instead of letting a fork be created, so we might need to modify checkpoint state download (the serving BN needs to) to give the IL corresponding to the checkpoint\n\n(there could be a way out, i haven't put more thought into it)",
        "created_at": "2024-03-18T17:03:56.258000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "Cross-layer",
        "parent": "",
        "content": "I was under the impression that e.g. checkpoint syncing is done _only_ to finalized checkpoints? Not to arbitrary checkpoints",
        "created_at": "2024-03-18T17:08:25.335000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cgr3999\u003e it can be done to any, to force start from a state, specially during non finality to perform a rescue operation to network",
        "created_at": "2024-03-18T17:09:44.491000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cgr3999\u003e I believe Pari has done it couple of times (correct me if i am wrong)",
        "created_at": "2024-03-18T17:10:04.915000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cgr3999\u003e I would like to propose to extend checkpoint sync specification to provide this data (correct IL at checkpoint root, or a constructed IL by batching txs of checkpoint root block + its valid child block)",
        "created_at": "2024-03-18T17:11:43.511000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cgr3999\u003e this way one would be able to build a top the synced checkpoint in rescue mode (as well as to verify that the checkpoint is valid even for a finalizing network)",
        "created_at": "2024-03-18T17:12:21.223000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't see what is your worry \u003c@792822129019584562\u003e. You get your checkpoint state and requests blocks just as usual. Any descendant of it already made you guarantee that the IL was available. So either you get no blocks at all or you get a valid chain",
        "created_at": "2024-03-18T18:09:17.039000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, in normal scenario, thats how it will work, i am thinking about the where we do chain rescue in super deteriorated devnets (for now, hopefully never comes to mainnet), where no one can serve the further blocks \n\nso lets say the proposers are brought back online with checkpoint sync to a \"head\" checkpoint, so to build a block a top (and fork/continue the chain), they need IL corresponding to checkpoint",
        "created_at": "2024-03-18T18:12:43.090000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "ideally, at checkpoint \u003e last finalized, BN nodes should keep ILs (umm if they have valid next block, then ofcourse they can construct and throw away the IL) of the roots corresponding to checkpoints so they can also serve valid IL at those checkpoints",
        "created_at": "2024-03-18T18:13:58.408000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "although, the beacon node could req/resp the IL from the BN node which served the checkpoint , as soon as it can find it in the maze of peers, but may be directly serving it would be nice",
        "created_at": "2024-03-18T18:24:54.429000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e updated https://github.com/ethereum/consensus-specs/pull/3617 based on discussions this morning!\n\nmodified the pr description and https://notes.ethereum.org/@mikeneuder/il-poc-spec to match. thanks @potuz0 and @gr3999 for the recent round of comments, responded to them and think i got everything. \n\n@terencechain should be good to take a look!",
        "created_at": "2024-03-18T19:03:27.195000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok updated the engine API spec: https://github.com/michaelneuder/execution-apis/pull/1\n\nty marius and dan for taking a look, addressed the comments.",
        "created_at": "2024-03-18T19:21:29.627000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ok also took a stab at the EELS spec. removing the syscall and doing the nonce check on the sender accounts instead. https://github.com/michaelneuder/execution-specs/pull/1\n\nalso modified the gas checks to make sure that the IL gas is tracked in `block_gas_used`. this is the set of changes im least comfortable with, but its quite simple so hopefully it makes sense",
        "created_at": "2024-03-18T19:44:15.260000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Hi @mikeneuder, Thanks for the nice work, I left a bunch of comments. Some high level notes:\n1. It seems like we are still using `is_inclusion_list_available` as a validity check. Instead, we should remove that and use fork choice (ie track `seen` for block tips)\n2. Why did we move `state.parent_proposer_index`. Even if `summary` contains `proposer_index`, we still need to check alignment between proposer indices across slot or else an evil proposer can change the previous proposer index to its own index\n3. We verify summary signature twice (forkchoice.md and beacon-chain.md). I think we can remove once\n4. Currently p2p spec rejects IL that's not current slot. Instead we should make a note that an IL can arrive earlier before slot start. Client may queue it or even import it",
        "created_at": "2024-03-18T20:27:30.757000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e We need to verify summary signature twice, one on IL arrival, another one on payload validation",
        "created_at": "2024-03-18T20:32:50.239000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e IL arrival here means p2p gossip?",
        "created_at": "2024-03-18T20:33:35.235000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Right",
        "created_at": "2024-03-18T20:51:12.534000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e We need a handler for forkchoice and a separate one for payload validation",
        "created_at": "2024-03-18T20:51:43.196000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e I didn't say this on the call but I would also favor removing the signature from the payload",
        "created_at": "2024-03-18T20:52:03.519000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Not strongly",
        "created_at": "2024-03-18T20:52:13.289000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e But I think it's cleaner",
        "created_at": "2024-03-18T20:52:14.782000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "we don't have signature on payload now as per the latest refactor",
        "created_at": "2024-03-18T20:52:57.745000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Right so includig p2p gossip, we are verifying summary signature three times\n1.) p2p\n2.) beacon-chain\n3.) forkchoice\n\nI think we can remove the one on 2.) (re @potuz0: Right)",
        "created_at": "2024-03-18T20:53:46.506000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Ah nice, thanks for that it's assembled then from the block+payload? (re @InclusionList_bot: \u003cg11tech\u003e we don't have signature on payload now as per the latest refactor)",
        "created_at": "2024-03-18T20:56:31.180000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Beacon chain I would keep and remove forkchoice (re @terencechain: Right so includig p2p gossip, we are verifying summary signature three times\n1.) p2p\n2.) beacon-chain\n3.) forkchoice\n\nI think we can remove the one on 2.))",
        "created_at": "2024-03-18T20:57:16.072000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e And just have the handler in forkchoice that forwards to the EL",
        "created_at": "2024-03-18T20:57:33.417000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Beacon chain has to be part of process execution payload",
        "created_at": "2024-03-18T20:57:56.106000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Ok that makes sense",
        "created_at": "2024-03-18T20:58:15.208000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "yea, so singed IL is validated p2p, beacon chain validate signed summary (from p2p or from req/resp), and EL just deals with summary and il txs",
        "created_at": "2024-03-18T20:59:41.358000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "but how will someone who didn't get IL (or is syncing forward by get blocks by range) validate that the new block has the correct IL, so we need prev signed summary in beacon block? or that doesn't matter?",
        "created_at": "2024-03-18T21:03:09.148000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "i think it does",
        "created_at": "2024-03-18T21:03:27.597000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "prev signed summary is in the payload no?",
        "created_at": "2024-03-18T21:03:47.576000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "what I had in mind is the node will only verify IL if the block is received over gossip, the block will not verify the IL if it's requested over RPC at all",
        "created_at": "2024-03-18T21:04:54.574000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "no, we need signed summary here: https://github.com/ethereum/consensus-specs/pull/3617/files#diff-7822dbde1ddb26183c70798cdd62ffe483bcf8f9cbfa767bfdb0e22df935128fR123",
        "created_at": "2024-03-18T21:04:56.542000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "lemme add the comment",
        "created_at": "2024-03-18T21:05:01.885000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "I see, you want forward syncing to verify the signature too",
        "created_at": "2024-03-18T21:06:02.582000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "yea, otherwise a node which didn't see gossiped IL will not be able to verify that it was correct or a made up previous summary embedded in the block",
        "created_at": "2024-03-18T21:07:26.725000+00:00",
        "attachments": null
    }
]