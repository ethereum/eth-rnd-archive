[
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e agree this all looks like minor design differences that shouldn’t impact the PoC/scoping process",
        "created_at": "2024-03-07T05:51:36.515000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e also added an agenda item to plan another IL breakout room: https://github.com/ethereum/pm/issues/973#issuecomment-1982454614",
        "created_at": "2024-03-07T05:54:39.622000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003ctbenr\u003e A nit: \n`previous_proposer_index` should be set when `Upgrading the state` (re @fradamt: Made what I think are the needed changes to the CL spec https://github.com/ethereum/consensus-specs/commit/bca66b05a21dd02871bf1edf1fffc664d171990c)",
        "created_at": "2024-03-07T13:00:33.370000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e heyo! based on the ACDC today, i made an upstream PR in the consensus spec repo: https://github.com/ethereum/consensus-specs/pull/3617. this pulls moslty from fradamts latest version incorporating hsiao-wei’s portions too! will keep editing from here, but hoping this can be the source of truth (re @tbenr: A nit: \nprevious_proposer_index should be set when Upgrading the state)",
        "created_at": "2024-03-07T20:16:24.165000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i tried to make the description comprehensive, and will update it if/when the spec moves",
        "created_at": "2024-03-07T20:17:21.407000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "link to current IL specs/proposals?",
        "created_at": "2024-03-07T20:24:51.610000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "or is it all in that PR",
        "created_at": "2024-03-07T20:25:02.241000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i think fradamts summary captures it well",
        "created_at": "2024-03-07T20:29:17.208000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_0.jpg",
                "content": "e04f5c2c0a627aeed48f537b0bb17e6d963ceb99dd7e3b25462a62c065b1e837"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e fwiw, these small modifications arent really “different designs”. just small differences",
        "created_at": "2024-03-07T20:29:52.775000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e https://ethresear.ch/t/unconditional-inclusion-lists/18500",
        "created_at": "2024-03-07T20:30:15.183000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "so it doesn't create a condition where previous proposer broadcasts block + (list of ILs) and if next proposer doesn't get them for whatever reason in time (latency, gossip failures, etc) can't propose, or?",
        "created_at": "2024-03-07T20:30:51.180000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "second bullet point",
        "created_at": "2024-03-07T20:31:13.296000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "or the IL has to be there but the split views just related to the block header",
        "created_at": "2024-03-07T20:31:45.609000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i mean this is why i think its easier to broadcast them together",
        "created_at": "2024-03-07T20:31:46.169000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i prefer commit in block and gossip il together with beacon block",
        "created_at": "2024-03-07T20:32:13.295000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, so far that's my main instinctive skepticism here. blobs being separate was ... probably warranted? anyway, separated discussion from a year ago. but point being that even if justified that created a lot of network deadlocks/races/processing inconsistency/testing difficulty",
        "created_at": "2024-03-07T20:32:57.978000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "and created a need for a quarantine for \"almost valid\" blocks",
        "created_at": "2024-03-07T20:33:34.938000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e right. why not do them together? to avoid all races",
        "created_at": "2024-03-07T20:33:45.541000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "i.e. blocks without blobs yet arrived",
        "created_at": "2024-03-07T20:33:46.028000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I do not want yet another such quarantine absent a strong argument for it",
        "created_at": "2024-03-07T20:34:00.491000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "they're attack surfaces in various ways",
        "created_at": "2024-03-07T20:34:10.413000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "okay, well, that's my first specific/concrete feedback then, on the current IL design",
        "created_at": "2024-03-07T20:34:39.703000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e commit and gossip IL and block together was my initial version hehe",
        "created_at": "2024-03-07T20:35:42.379000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok, why did it get separated then?",
        "created_at": "2024-03-07T20:35:55.542000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e not sure. ig i thought you all preferred them gossiped separately",
        "created_at": "2024-03-07T20:36:35.499000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "the general argument with blobs is they're big and there are several of them",
        "created_at": "2024-03-07T20:36:58.290000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "in last interop meeting",
        "created_at": "2024-03-07T20:37:05.866000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "can send multiple in parallel",
        "created_at": "2024-03-07T20:37:25.440000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e right. ils feel simpler to bundle with block",
        "created_at": "2024-03-07T20:37:30.687000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes, ILs are presumably small?",
        "created_at": "2024-03-07T20:37:40.921000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e and it doesnt compromise on fixing the free da problem",
        "created_at": "2024-03-07T20:37:41.884000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ya (re @InclusionList_bot: \u003ctersec\u003e yes, ILs are presumably small?)",
        "created_at": "2024-03-07T20:37:49.320000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "if there are IL-specific reasons to want separate broadcasting, alright, but I think it'd be lower-risk and to bundle them. the reasons for the blobs being separated can be further discussed if that's of interest, but those began as bundled until it was convincing enough in that specific case it was worth splitting. would suggest same course here, not cargo-culting that one",
        "created_at": "2024-03-07T20:39:31.541000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "as some kind of general principle",
        "created_at": "2024-03-07T20:39:37.005000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "how many transactions, order of magnitude, are anticipated in\n```python\n\nclass InclusionListSidecar(Container):\n    transactions: List[Transaction, MAX_TRANSACTIONS_PER_INCLUSION_LIST]\n    proposer_index: ValidatorIndex\n    parent_root: Root\n    slot: Slot\n    signed_inclusion_list_summary: SignedInclusionListSummary\n```\n?",
        "created_at": "2024-03-07T20:41:38.248000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e cool! sounds good to me. will wait for @potuz0 to comment too",
        "created_at": "2024-03-07T20:41:51.257000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah he was around for the blob discussions too",
        "created_at": "2024-03-07T20:42:21.368000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e ya i prefer limiting by gas consumption (eg 2mm gas) rather than number of txns. we set the const to 16 to start (re @InclusionList_bot: \u003ctersec\u003e how many transactions, order of magnitude, are anticipated in\n```python\n\nclass InclusionListSidecar(Container):\n    transactions: List[Transaction, MAX_TRANSACTIONS_PER_INCLUSION_LIST]\n    proposer_index: ValidatorIndex\n    parent_root: Root\n    slot: Slot\n    signed_inclusion_list_summary: SignedInclusionListSummary\n```\n?)",
        "created_at": "2024-03-07T20:42:25.207000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e i like the general 1/10 size of full block idea",
        "created_at": "2024-03-07T20:42:42.524000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e just as a gut check",
        "created_at": "2024-03-07T20:42:55.230000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "small enough to start with not-separate-broadcast then, yes",
        "created_at": "2024-03-07T20:43:06.683000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e for sure",
        "created_at": "2024-03-07T20:43:19.337000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "```python\n\nclass PayloadAttributes(object):\n    timestamp: uint64\n    prev_randao: Bytes32\n    suggested_fee_recipient: ExecutionAddress\n    withdrawals: Sequence[Withdrawal]\n    parent_beacon_block_root: Root\n    inclusion_list_transactions: List[Transaction, MAX_TRANSACTIONS_PER_INCLUSION_LIST]  # [New in EIP7547]\n```\nwill be another constraint on that size anyway",
        "created_at": "2024-03-07T20:46:54.633000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "i.e. it's easily doubling the size or more of that structure",
        "created_at": "2024-03-07T20:47:06.806000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "usually that's a localhost arrangement, but not always",
        "created_at": "2024-03-07T20:47:20.595000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e This needs to be updated, the payload attributes do not need to be changed",
        "created_at": "2024-03-07T20:47:58.223000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think we need to update the validator spec for this, last time I checked, it's slightly behind. Happy to look more into it tonight",
        "created_at": "2024-03-07T20:48:03.744000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e The EL will have the IL already",
        "created_at": "2024-03-07T20:48:04.857000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e The payload attributes should not include the IL",
        "created_at": "2024-03-07T20:48:13.953000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Yes the PR mentions that validator.md and fork-choice.md have to be updated (re @InclusionList_bot: \u003cterence0083\u003e I think we need to update the validator spec for this, last time I checked, it's slightly behind. Happy to look more into it tonight)",
        "created_at": "2024-03-07T20:48:37.987000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Yeah. We really should update the execution API",
        "created_at": "2024-03-07T20:48:44.867000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "another question is, these are all CL/EL interactions. but the whole point of these, I thought, was to react to builder/MEV/etc. Does this EIP address that per se at all?",
        "created_at": "2024-03-07T20:50:17.337000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "it mainly defines beacon chain mechanics",
        "created_at": "2024-03-07T20:50:33.301000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "historically, the pure CL/EL system hasn't had broad-based censorship challenges of which I'm aware",
        "created_at": "2024-03-07T20:53:35.624000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@654267572107083777\u003e the reason I want the list to be sent separately is to not have to tweak external p2p libraries for dos protection. That is, we rely on a hash to quickly see a block that we have already received and drop it. By binding the two messages an honest proposer can send different P2P messages that are strictly the same block. This is something new. It's not a blocker but I think it's more of a headache to work with than the already tested path of blobs. Secondly it allows the proposer to send the IL almost a slot in advance, which makes for the builder of N also to be aware of this and make become more execution efficient",
        "created_at": "2024-03-07T20:53:50.730000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "because of the multiple ILs-per-block possibility?",
        "created_at": "2024-03-07T20:54:46.508000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes",
        "created_at": "2024-03-07T20:54:52.392000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The ability to send the IL before hand makes it easy for propagation and better usage of the CPU",
        "created_at": "2024-03-07T20:55:39.663000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "okay, well, will look into this, but it's my biggest please, no, veto reaction so far to anything of this, I'll say that",
        "created_at": "2024-03-07T20:55:43.788000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "integrating separate blob broadcast in a robust way has absolutely not been simple",
        "created_at": "2024-03-07T20:56:06.467000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Agree",
        "created_at": "2024-03-07T20:56:19.465000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "it was months of fuzzing finding endless-seeming edge cases",
        "created_at": "2024-03-07T20:56:23.495000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "But there's only one set of blobs for a block",
        "created_at": "2024-03-07T20:56:31.868000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, so there is some motivation",
        "created_at": "2024-03-07T20:57:08.634000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm partly viewing this based on experiences, too, with sync committee/aggregate messages, which don't block the next block but one can see as a sort of casual simulation of sorts how many get in, and, on mainnet, it's typically high 90s-% but it's not 100%",
        "created_at": "2024-03-07T20:59:13.129000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "they're sent a bit later in the slot, to be fair",
        "created_at": "2024-03-07T20:59:51.206000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "Cross-layer",
        "parent": "",
        "content": "noob q: why can there be multiple ILs per block?",
        "created_at": "2024-03-07T21:03:08.365000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "explained by https://ethresear.ch/t/no-free-lunch-a-new-inclusion-list-design/16389 (just now reading)",
        "created_at": "2024-03-07T21:03:32.347000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "but I'm not convinced yet it has to be unbounded numbers of ILs",
        "created_at": "2024-03-07T21:03:55.968000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "another thing that probably is handled fine but the NFL design description is odd about is handling of missed slots:\n\u003e By signing over the list of (`address`, `gasLimit`) pairs, the proposer is saying: “I commit that during slot `n` or slot `n+1`, a transaction from address will be included as long as the remaining gas in the slot `n+1` payload is less than `gasLimit`.”",
        "created_at": "2024-03-07T21:06:13.439000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "is it really only slot `n+1` or is it the next block",
        "created_at": "2024-03-07T21:06:25.521000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "it seems like the basic claims of the ethresear.ch post, the plausible deniability, are satisfiable with two ILs",
        "created_at": "2024-03-07T21:07:46.441000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "more generally, this all requires CLs to be significantly more aware of transactions as non-block-boxes than currently. not sure that's necessarily bad, but it ties into the questions about using SSZ (or some other format) for transactions. right now CLs don't know/care, and this adds another dependency",
        "created_at": "2024-03-07T21:10:05.133000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "at least based on https://ethresear.ch/t/no-free-lunch-a-new-inclusion-list-design/16389#appendix-1-rebuilder-encoding-strategy-11",
        "created_at": "2024-03-07T21:13:02.816000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah but now the IL can even be sent 10 seconds before the slot starts",
        "created_at": "2024-03-07T21:31:36.178000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "It's a substantial difference",
        "created_at": "2024-03-07T21:31:52.878000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "Note: The proposer can send multiple ILs but it's important node only re-gossip one \u0026 import one IL or it becomes a cheap dos vector",
        "created_at": "2024-03-07T21:36:04.816000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, sure, but doesn't even two ILs allow plausible deniability?",
        "created_at": "2024-03-07T21:38:30.775000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Even one",
        "created_at": "2024-03-07T21:39:26.117000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e That's one of the things I like about not committing, even if you get an IL with your tx, you can't trust the proposer that it will be included",
        "created_at": "2024-03-07T21:40:12.523000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "which means it's not critical that they be sent separate just in case one wants to send 10 of them",
        "created_at": "2024-03-07T21:40:31.774000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e It's not critical, as I said above I believe it's just easier to deal with this and allow them to be sent and verified in the dead part of the slot, and having to tweak the P2P libraries to consider different hashes for the same message",
        "created_at": "2024-03-07T21:41:43.029000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cfradamt\u003e Yes, this doesn't matter. Even if an IL is sent with the block, you could always also send the same block with a different IL (re @InclusionList_bot: \u003ctersec\u003e which means it's not critical that they be sent separate just in case one wants to send 10 of them)",
        "created_at": "2024-03-07T21:42:00.263000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't believe for a moment the \"just easier\" for separate block-to-block critical things",
        "created_at": "2024-03-07T21:42:17.069000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e Yeah, so dealing with this, even if it doesn't happen, is what I think it's a bit of a headache (re @fradamt: Yes, this doesn't matter. Even if an IL is sent with the block, you could always also send the same block with a different IL)",
        "created_at": "2024-03-07T21:42:31.821000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cpotuz0\u003e But it may be fine too",
        "created_at": "2024-03-07T21:42:36.502000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "It's not ideal to tweak p2p block's validation step to allow the same block with different inclusion lists. Maybe it's easier than I thought. Haven't looked...",
        "created_at": "2024-03-07T21:43:56.122000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I am not sure pinging \u003c@476250636548308992\u003e, will this involve libp2p for us?",
        "created_at": "2024-03-07T21:44:41.057000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess, I saw the same argument early on with blobs. but it was not true, and lots of edge cases hadn't been anticipated, and by the time it was clear, even though maybe it would have been worthwhile anyway, that was underestimated",
        "created_at": "2024-03-07T21:45:35.271000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "oh, it's just like optimistic sync and we know how to do that",
        "created_at": "2024-03-07T21:45:44.518000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "but it's not.",
        "created_at": "2024-03-07T21:45:52.446000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "but the different hashes for same messages, I guess maybe I don't understand this part. the block is what it is",
        "created_at": "2024-03-07T21:48:41.068000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "So fwiw, if we go with separated, prysm will send this list together with FCU, which happens at around 2-3 seconds in the happy case",
        "created_at": "2024-03-07T21:49:05.827000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "so it's possible I'm underestimating that difficulty too, the bundled case difficulty",
        "created_at": "2024-03-07T21:49:27.499000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The bundled case is fine too IMO, it's definitely easier to deal with validation in a synchronous way, bad thing is that the EL needs to execute N while validating the IL for N+1",
        "created_at": "2024-03-07T21:50:41.410000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "Has anyone measured the performance penality for such?",
        "created_at": "2024-03-07T21:51:26.099000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "If i understand the conversation correctly, it is simply about maintaining a gossip validation cache for  particular slot + proposer index to verify that the node has only seen 1 IL. That is easy enough to do, we do something very similar for other gossip messages",
        "created_at": "2024-03-07T21:54:24.930000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Nah it's a different issue, it's that different messages will be sending the same block, it's probably fine but I'm guessing we will have two tweak libp2p",
        "created_at": "2024-03-07T22:05:10.968000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "i.e. block+IL1 and block+IL2",
        "created_at": "2024-03-07T22:06:21.092000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "what about block+List[IL,max 2]",
        "created_at": "2024-03-07T22:06:47.134000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "but isn't the point to gossip IL1 to some peers and gossip IL2 to some peers?",
        "created_at": "2024-03-07T22:07:34.645000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "the plausible deniability, fair enough, yeah",
        "created_at": "2024-03-07T22:07:55.325000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "this breaks that",
        "created_at": "2024-03-07T22:07:59.667000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "That is fine too, you can just drop a message if you have already seen block + IL1 first and you receive a new message sith the same block",
        "created_at": "2024-03-07T22:08:43.111000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess, `block+IL1` and `block+IL2` are just separate messages, for libp2p",
        "created_at": "2024-03-07T22:08:49.838000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't see why it'd need special-casing",
        "created_at": "2024-03-07T22:09:06.737000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah i dont think we do need to special case it here",
        "created_at": "2024-03-07T22:10:05.984000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "The issue is that we won't drop it immediately at the libp2p level",
        "created_at": "2024-03-07T22:10:31.363000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "We will have to process the message to find out and drop",
        "created_at": "2024-03-07T22:10:46.205000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Its not the only gossip topic where you could receive 2 distinct libp2p message and only propagate 1",
        "created_at": "2024-03-07T22:10:50.992000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ex: att aggregates",
        "created_at": "2024-03-07T22:10:59.687000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, I see now what you're getting at at least",
        "created_at": "2024-03-07T22:11:10.685000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "but that's one reason there are reject/ignores at different levels",
        "created_at": "2024-03-07T22:11:28.706000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "one could already spam the block channel with blocks which aren't gossip-valid but which aren't libp2p dups",
        "created_at": "2024-03-07T22:11:47.581000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "and then the reject/ignore provide the feedback mechanism for that peer",
        "created_at": "2024-03-07T22:12:01.237000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "exactly, yeah",
        "created_at": "2024-03-07T22:12:10.731000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "well, this is already true for malicious near-but-not-exact-copies, and for cases of not-actually-many-ILs, it's very bounded",
        "created_at": "2024-03-07T22:17:57.827000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "instead of remembering one hash per block it's 2 or 3 or 5",
        "created_at": "2024-03-07T22:18:11.449000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "(in libp2p)",
        "created_at": "2024-03-07T22:18:20.091000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e for simplicity of the Proof-of-Concept version, can we all get behind:\n\n1. unconditional (guaranteed inclusion with a 3mm gas limit on the IL)\n2. anywhere-in-block (the transactions in the slot N IL must appear anywhere in either the slot N payload or the slot N+1 payload) \n3. committed to in beacon block (the slot N beacon block contains a slot N IL summary)\n4. gossiped-with-block (the IL is part of the beacon block p2p object, same topic)",
        "created_at": "2024-03-07T23:07:33.101000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e to me, this seems like the simplest thing to do for the PoC. when the convo splinters around technical details, it feels like we are running in circles, so to try and end that i propose we just nail down the scope of the PoC and run with that for the next two weeks",
        "created_at": "2024-03-07T23:08:41.799000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e happy to get pushback on any of those 4 core features, just want us to define something so we can finalize the PoC spec ASAP",
        "created_at": "2024-03-07T23:09:15.033000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "ok with me",
        "created_at": "2024-03-07T23:09:29.019000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "(but I wasn't involved with discussions as much around (1)-(3), so maybe I'm opinionated about those and just don't know it yet. but looks reasonable so far)",
        "created_at": "2024-03-07T23:10:08.623000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "I dont think we are doing 3 anymore. cc \u003c@520034910149410861\u003e and \u003c@755590043632140352\u003e \nThe splitting attack and having to request sidecar through RPC is a greater evil of the two",
        "created_at": "2024-03-07T23:12:13.761000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "✅ 1,2,4  and ❌ 3 for me",
        "created_at": "2024-03-07T23:13:37.720000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e if you gossip with the IL, where is the splitting attack coming in",
        "created_at": "2024-03-07T23:15:10.234000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e no sidecar",
        "created_at": "2024-03-07T23:15:42.961000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e Oh I missed 4. If it's gossip'ed together then it's probably fine. Thinking more about this tonight...",
        "created_at": "2024-03-07T23:17:42.355000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cterencechain\u003e I retract my prev statement about 3",
        "created_at": "2024-03-07T23:18:09.947000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e nifty",
        "created_at": "2024-03-07T23:19:10.017000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e just dont want us to miss the forest for the trees :D",
        "created_at": "2024-03-07T23:19:50.790000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "and with `PayloadAttributes` changes noted above?",
        "created_at": "2024-03-07T23:36:35.755000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Cross-layer",
        "parent": "",
        "content": "or reversions of changes I guess",
        "created_at": "2024-03-07T23:36:43.849000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e yup will remove that from the payload attributes (re @fradamt: This needs to be updated, the payload attributes do not need to be changed)",
        "created_at": "2024-03-07T23:40:58.793000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cmikeneuder\u003e FWIW, these four decisions are reflected as “design considerations” in this doc: https://notes.ethereum.org/@mikeneuder/il-spec-overview#Key-design-considerations",
        "created_at": "2024-03-07T23:58:41.346000+00:00",
        "attachments": null
    }
]