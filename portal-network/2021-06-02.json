[
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ddht is crashing on a `Nodes` with `total == 0`",
        "created_at": "2021-06-02T03:01:17.739000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The spec doesn't seem to prohibit that, although I _think_ nodes should always at least return themselves in `Nodes` (as opposed to an empty response)?",
        "created_at": "2021-06-02T03:02:05.207000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've probably gotten a bit off topic with https://github.com/carver/trin/pull/30 but compatibility with ddht is improved ðŸ˜›",
        "created_at": "2021-06-02T03:11:55.516000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!425615769280315392\u003e I think the handshake is taken care of by `discv5`, but I wanted to double-check before closing #19",
        "created_at": "2021-06-02T03:15:11.785000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Just tried your branch, it works for ping:\n```\nJun 02 09:39:20.496 DEBUG trin::portalnet::protocol: Got overlay ping request Ping(Ping { enr_seq: 1, data_radius: 115792089237316195423570985008687907853269984665640564039457584007913129639935 })    \nJun 02 09:39:20.496 DEBUG discv5::service: Sending TALK response to Node: 0x77e1..d444, addr: 192.168.1.34:9009\n```\nand on our side\n```\nTRC 2021-06-02 09:39:20.497+02:00 Received message packet                    topics=\"discv5\" tid=353091 file=protocol.nim:387 srcId=c8*9cc078 address=127.0.0.1:9000 kind=talkresp\n(enrSeq: 1, dataRadius: ffffffffffffffff)\n```",
        "created_at": "2021-06-02T07:41:17.534000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm, in the `Nodes` message on discv5 layer `total` means the amount of actual response messages to return, not the amount of ENRs. So I think that should be at minimum 1 (as an empty response is still 1 response). I think the Nim implementation might actually also return 0 here, have to double check.\nAnyhow, I see there is some discrepancy about this for the `Nodes` message in the Portal spec.",
        "created_at": "2021-06-02T07:54:28.357000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "However, I don't think that a peer should always at least return their own ENR. It is fine to send back an empty list, as the requests are done for a specific distance or set of distances.",
        "created_at": "2021-06-02T07:56:27.887000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The own ENR should be returned on a request with distance 0.",
        "created_at": "2021-06-02T07:57:08.411000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Our protocol implementation is located on our nim-eth repo (still on a branch): https://github.com/status-im/nim-eth/tree/portal-wire/eth/p2p/portal\nThere are some instructions there on how to use / test. For the actual light client we will probably create a new repo.\nPut some quick notes regarding tests I did in a gist for now: https://gist.github.com/kdeme/36795f5deae7d02ce1785e9c7d501e53",
        "created_at": "2021-06-02T12:06:18.184000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What's the discrepancy in the Portal spec?",
        "created_at": "2021-06-02T22:02:34.547000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Portal spec says number of ENRs, discv5 normally says number of messages, IIUC",
        "created_at": "2021-06-02T22:02:58.284000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/ethereum/stateless-ethereum-specs/blob/master/state-network.md#nodes-0x04\n\u003e The total number of Nodes response messages being sent.",
        "created_at": "2021-06-02T22:03:27.053000+00:00",
        "attachments": null
    },
    {
        "author": "jason.carver",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Where are you seeing number of ENRs?",
        "created_at": "2021-06-02T22:03:57.796000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "gah, I was looking at a specific commit.",
        "created_at": "2021-06-02T22:03:59.636000+00:00",
        "attachments": null
    }
]