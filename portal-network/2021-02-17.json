[
    {
        "author": "__lithp__",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, let me go back and look at this. I was only considering the (value), but you're right a more accurate count would be (address, value) for accounts and (address, slot, value) for storage items.",
        "created_at": "2021-02-17T02:08:09.422000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Isn't that number like 100x smaller than *current state*.",
        "created_at": "2021-02-17T02:15:03.935000+00:00",
        "attachments": []
    },
    {
        "author": "__lithp__",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right now I think I'm slightly overestimating and I'm getting ~31GiB when considering every (address, value) and every (address, slot, value)",
        "created_at": "2021-02-17T02:59:21.800000+00:00",
        "attachments": []
    },
    {
        "author": "__lithp__",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I shouldn't be surprised that the hashes are so heavy, but I'm still surprised! Currently writing something to include intermediate nodes in that count",
        "created_at": "2021-02-17T03:00:03.697000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "From a geth node that fast synced:\n\n```\n| Key-Value store | Contract codes     | 1.65 GiB   |    342754 |\n| Key-Value store | Trie nodes         | 90.95 GiB  | 734913979 |\n| Key-Value store | Trie preimages     | 1.48 GiB   |  22404303 |\n| Key-Value store | Account snapshot   | 5.28 GiB   | 112674883 |\n| Key-Value store | Storage snapshot   | 28.08 GiB  | 395129891 |\n```",
        "created_at": "2021-02-17T16:11:31.431000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not 100% sure how to interpret each of those numbers but my guess is that the snapshot storage doesn't de-duplicate so for the leaf data we can expect something around 5.28+28.08GB  But those 90.95GB of trie nodes are.... large\n\nWe'll also have to duplicate contract code....",
        "created_at": "2021-02-17T16:14:02.250000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What is a storage snapshot in this context?",
        "created_at": "2021-02-17T16:17:09.639000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Geth's flat database layout",
        "created_at": "2021-02-17T16:17:19.953000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What is trie nodes then?",
        "created_at": "2021-02-17T16:17:31.078000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And the storage is the contract storage part (I'm infering)",
        "created_at": "2021-02-17T16:17:31.781000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "geth uses both flat and naive database layouts concurrently IIRC.  I don't know exactly why...",
        "created_at": "2021-02-17T16:17:57.996000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, trie nodes are non-leafs, account/storage are leaves?",
        "created_at": "2021-02-17T16:17:58.698000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If so, I didn't previously realize how much more expensive trie maintenance was compared to actual data storage.",
        "created_at": "2021-02-17T16:18:52.906000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess I shouldn't be surprised given that most storage is less than 256-bits, and it will require \u003e256-bits of branch space in most cases.",
        "created_at": "2021-02-17T16:19:35.617000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Not definitive but I think \"Trie nodes\" is the full trie, both intermediate and leaf nodes.  and \"XXX snapshot\" are just the leaf data.  I don't know what preimages are referring to",
        "created_at": "2021-02-17T16:20:05.953000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "preimage will be the original key and then it's actually stored in the trie under the hash to ensure an even distribution.",
        "created_at": "2021-02-17T20:04:23.356000+00:00",
        "attachments": []
    }
]