[
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "I think interop should still work even without the csc changes. We are waiting for the PR to be merged in before updating prysm",
        "created_at": "2024-09-03T02:59:05.178000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "The metadata csc SSZ type needs to be the same though.",
        "created_at": "2024-09-03T03:09:01.622000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "We didn't merge our `uint8` PR, so LH is still using `uint64` for metadata csc type",
        "created_at": "2024-09-03T03:09:51.897000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "oh LH hasn't changed it to the current one ? Yeah that will be problematic then. If we want to start testing sooner rather than later we can just revert our PR and start interoping with the old spec.",
        "created_at": "2024-09-03T03:11:40.266000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "\"old spec\" - you mean the new spec after reverting or the spec before reverting (current) ðŸ˜‚",
        "created_at": "2024-09-03T03:13:17.528000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "Its technically the same thing ðŸ™‚ It would be back to uint64 for metadata and in the enr it doesn't really matter since any excess bytes are just truncated when rlp encoding",
        "created_at": "2024-09-03T03:14:23.341000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "The only difference is that the new spec has a bit more clarity/comments on the types",
        "created_at": "2024-09-03T03:14:44.188000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e can we have Kurtosis config for the next devnet in the pinned message with the clients that are believed to be ready for it?",
        "created_at": "2024-09-03T07:08:20.886000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yup, whoever thinks they're ready please post a branch here and i can verify and pin a config",
        "created_at": "2024-09-03T08:10:14.827000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "lighthouse: https://github.com/sigp/lighthouse/tree/unstable",
        "created_at": "2024-09-03T10:56:22.702000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Prysm: https://github.com/prysmaticlabs/prysm/tree/peerDAS",
        "created_at": "2024-09-03T14:44:41.913000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "is this flag needed for lighthouse?\n`    cl_extra_params: [--subscribe-all-data-column-subnets]`",
        "created_at": "2024-09-03T15:48:17.903000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Trying to respond for \u003c@466006586477772831\u003e while he might sleep.\nAs indicated, this flag will register all data column subnets, and very probably, as a consequence, make this node a \"super node\" (aka, a node custodying all data columns.)",
        "created_at": "2024-09-03T16:18:14.512000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "(On Prysm, you can do the same with `--subscribe-all-subnets`, which will subscribe to all subnets, including all data column subnets.)",
        "created_at": "2024-09-03T16:19:03.265000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Perfect, yeah i wanna try a prysm/lh super node combo locally to see if it works",
        "created_at": "2024-09-03T16:29:59.049000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I get a bunch of these messages btw:\n```\n[cl-1-prysm-geth] sync message time 2024-09-03 16:22:41 +0000 UTC (message slot 19) not within allowable range of 2024-09-03 16:22:53 +0000 UTC to 2024-09-03 16:22:58.069035273 +0000 UTC m=+287.364414278 (current slot 20)\" prefix=p2p\n```\nfrom prysm",
        "created_at": "2024-09-03T16:30:37.979000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "any idea why?",
        "created_at": "2024-09-03T16:30:40.378000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Can you share your kurtosis config ?",
        "created_at": "2024-09-03T16:32:06.073000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "I'll try to reproduce",
        "created_at": "2024-09-03T16:33:03.779000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Note this config still doesnt work, but is a starting point for peerDAS devnets\n```\nparticipants:\n# Supernodes\n  - cl_type: prysm\n    cl_image: ethpandaops/prysm-beacon-chain:peerDAS-751a7a0\n    cl_max_mem: 4096\n    cl_extra_params: [--subscribe-all-subnets, --minimum-peers-per-subnet=1]\n  - cl_type: lighthouse\n    cl_image: ethpandaops/lighthouse:unstable-4e675cf\n    cl_extra_params: [--subscribe-all-data-column-subnets]\n# Non-supernodes\n  - cl_type: prysm\n    cl_image: ethpandaops/prysm-beacon-chain:peerDAS-751a7a0\n    cl_max_mem: 4096\n    cl_extra_params: [--minimum-peers-per-subnet=1]\n  - cl_type: lighthouse\n    cl_image: ethpandaops/lighthouse:unstable-4e675cf\nnetwork_params:\n  eip7594_fork_epoch: 0\n  eip7594_fork_version: \"0x50000038\"\n  #preset: minimal\nsnooper_enabled: true\nglobal_log_level: debug\nadditional_services:\n  - dora\n  - goomy_blob\n  - prometheus_grafana\ndora_params:\n  image: ethpandaops/dora:peerdas-as-deneb\nethereum_metrics_exporter_enabled: true\n```",
        "created_at": "2024-09-03T16:33:08.635000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "^ alpha kt config, so pls dont use that as a source of truth",
        "created_at": "2024-09-03T16:33:21.454000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "I have to break for a few hours, will try after dinner!",
        "created_at": "2024-09-03T16:34:29.630000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "sounds good ðŸ˜„ i'm also off for a bit ðŸ˜„",
        "created_at": "2024-09-03T16:40:09.869000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "There is something strange.\nWhen running Prysm BN with\n```\n  - cl_type: prysm\n    cl_image: ethpandaops/prysm-beacon-chain:peerDAS-751a7a0\n```\n\nI get this logs:\n```\n[2024-09-03 20:02:32]  DEBUG sync: No peers found subscribed to attestation gossip subnet with committee index 0. Searching network for peers subscribed to the subnet.\n```\n\nHowever, this log has been removed precisely in the commit `751a7a0`: https://github.com/prysmaticlabs/prysm/commit/751a7a00eee00f70bfe1a92147f2aa8162c48f54#diff-75e33ac18ab76e5853743737bca3d49b0d566959eb9b37381557a6a65f227c30L511\n\nIt's like if the `ethpandaops/prysm-beacon-chain:peerDAS-751a7a0` image does not point to the `751a7a0` commit.",
        "created_at": "2024-09-03T20:13:08.583000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "That's weird.... Let me trigger a rebuild and see what's up",
        "created_at": "2024-09-03T20:15:41.116000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I may be wrong as well (I'll re-triple check)",
        "created_at": "2024-09-03T20:16:04.835000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "i think the builder is wrong!",
        "created_at": "2024-09-03T20:59:08.935000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "```\ndocker run ethpandaops/prysm-beacon-chain:peerDAS-751a7a0 --version                   \nbeacon-chain version Prysm/Unknown/e25161c5d77a5fa2e70da0350aa850f1d5f2169f. Built at: 2024-08-30 09:52:03+00:00\n```",
        "created_at": "2024-09-03T20:59:23.119000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "ill look into whats happening",
        "created_at": "2024-09-03T20:59:30.688000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "but maybe use a locally built image for now?",
        "created_at": "2024-09-03T20:59:40.360000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "```\nBuilt at: 2024-08-30 09:52:03+00:00\n```\n\nYeah definitely `751a7a0` was pushed today (September 3rd), so the date does not match.",
        "created_at": "2024-09-03T21:01:56.166000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yeah im trying to see what happened to our builder... no changes to the respective file in months, so it doesnt make sense immediately",
        "created_at": "2024-09-03T21:02:48.515000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Yes, I run Kurtosis a Prysm image locally built + the LH image you gave in your kurtosis config.\n\n**Issue 1:** I think I introduced a regression when the number of peers is lower than 6.\nIn my kurtosis configs with 2 or 3 nodes in total, I always used this flag in beacon node:\n```\n--minimum-peers-per-subnet=1\n```\n\n(The default of this value is `6`.)\n\nWithout setting this flag to a low value, there is some issues (even with Prysm nodes only). ==\u003e I need to fix this.\nWith setting `--minimum-peers-per-subnet=1` with Prysm nodes only, everything runs fine.\n\nHowever, with `{LH, Prysm} * {1 Full Node, 1 Super Node}` I get a fork party.",
        "created_at": "2024-09-03T21:05:56.558000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "**Issue 2:** Prysm nodes agree between them, LH nodes agree between them, but Prysm does not agree with LH.",
        "created_at": "2024-09-03T21:06:41.352000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "719db6a9525a8e630aea10239815c9ab45f569bfb0910aee93d1808dd446c502"
            }
        ]
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "==\u003e I'll look at those 2 issues tomorrow!",
        "created_at": "2024-09-03T21:07:14.748000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "can you pls add this to the default flags?",
        "created_at": "2024-09-03T21:07:28.530000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "probably a sane default to have",
        "created_at": "2024-09-03T21:07:36.180000+00:00",
        "attachments": null
    },
    {
        "author": "barnabasbusa",
        "category": "Testing",
        "parent": "",
        "content": "we can approve that pr very quickly",
        "created_at": "2024-09-03T21:07:45.033000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "It may not be normal needing to set this flag with a low value, even with a low number of nodes in the network.\n==\u003e I have to look at the behaviour implemented before my changes and the behaviour we really want regarding this flag with the team.",
        "created_at": "2024-09-03T21:09:39.552000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2024-09-03T21:12:05.597000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "My intuition is, if this flag is set to a value higher than the number of nodes in the network, then everything should run normally.\nThe difference is we should continuously search for other nodes in the network as long as all subnets do not have the required amount of peers.",
        "created_at": "2024-09-03T21:12:12.153000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I've aded the flag here, note this still doesnt work but is probably a useful starting point",
        "created_at": "2024-09-03T21:12:23.379000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Thanks! I will let you know if we decide that needing this flag is a bug, when a fix is merged.",
        "created_at": "2024-09-03T21:13:28.651000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "About **Issue 2**, Prysm nodes are only connected to Prysm nodes. Same for LH.\nI know on what I'll work tomorrow morning ðŸ™‚",
        "created_at": "2024-09-03T21:15:31.954000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "```\n[2024-09-03 21:13:55.55]  INFO p2p: Connected peers inboundTCP=0 outboundTCP=1 total=1\n```",
        "created_at": "2024-09-03T21:15:38.711000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "(Should be `total=3`)",
        "created_at": "2024-09-03T21:15:45.993000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Is this possible that the build issue is the same for the LH image (by any chance)?\n\u003c@199561711278227457\u003e",
        "created_at": "2024-09-03T21:16:27.106000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I actually just did a docker system prune and then re-pulled the image and it was fine :/",
        "created_at": "2024-09-03T21:25:15.385000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "so really unsure what happened",
        "created_at": "2024-09-03T21:25:19.865000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "also about to head to bed, but i can look back in tomorrow",
        "created_at": "2024-09-03T21:25:37.482000+00:00",
        "attachments": null
    }
]