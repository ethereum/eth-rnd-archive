[
    {
        "author": "dapplion",
        "category": "Testing",
        "parent": "",
        "content": "Charts get cropped if the legend is too big due to big labels. How can I do that at query time?",
        "created_at": "2025-03-13T00:08:01.475000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "The latest commit on the Prysm `peerDAS` branch uses `engine_getBlobsV2` (thanks \u003c@656728086410297356\u003e !) but **not yet** `engine_getPayloadV5`. It still uses `engine_getPayloadV4` for both Electra and **Fulu**.\n\nUsing the `ethpandaops/geth:engine-getblobs-v2-050c4c7z`, I have some troubles in Deneb.\n\nPrysm log error:\n```\n[2025-03-13 10:05:50.08]  ERROR rpc/validator: Finished building block error=rpc error: code = Internal desc = Could not get local payload: could not get cached payload from execution client: timeout from http.Client sinceSlotStartTime=1.082151s slot=3\nvalidator=55\n```\n\nGeth equivalent log:\n```\nDEBUG[03-13|10:05:50.112] Served engine_getPayloadV3               conn=172.16.0.13:52402 reqid=12 duration=1.030044751s\n```\nWe see here `engine_getPayloadV3` (and not V4) because this is a Deneb slot.\n\nWe see in Geth log `duration=1.030044751s` while Prysm timeouts at 1 second.\n\nUsing this Geth image: `docker.ethquokkaops.io/dh/ethpandaops/geth:PeerDAS`  (but which does **not** support `engine_getBlobsV2`),  building time seems a lot more reasonable:\n\n```\nDEBUG[03-13|10:28:06.098] Served engine_getPayloadV3               conn=172.16.0.15:60106 reqid=127 duration=8.678736ms\n```",
        "created_at": "2025-03-13T10:29:15.183000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "cc \u003c@360491619402776577\u003e\n(cc \u003c@199561711278227457\u003e )",
        "created_at": "2025-03-13T10:30:37.274000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yes thats expected, I recalculate the proof right now on every getPayload",
        "created_at": "2025-03-13T10:57:55.409000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Its not final code, this is just a mock version so CLs can get started testing",
        "created_at": "2025-03-13T10:58:20.744000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "OK thanks, I missed the whole thread dealing with this topic actually.",
        "created_at": "2025-03-13T11:31:54.375000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Block building timeout of 1 sec is kinda unsafe btw",
        "created_at": "2025-03-13T11:32:15.877000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/ethereum/execution-apis/blob/main/src/engine/prague.md#engine_getpayloadv4 says it is 1s?",
        "created_at": "2025-03-13T11:33:45.813000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "also v3 says the same thing",
        "created_at": "2025-03-13T11:34:03.712000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Hmm its very close to the max time we see some blocks take",
        "created_at": "2025-03-13T11:35:07.820000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@199561711278227457\u003e would you mind opening up edit permission for devnet-6 spec page, so i can add kurtosis config there?\nhttps://notes.ethereum.org/@ethpandaops/peerdas-devnet-6#",
        "created_at": "2025-03-13T11:53:02.063000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "done!",
        "created_at": "2025-03-13T11:53:24.738000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "ty!",
        "created_at": "2025-03-13T11:53:43.907000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "Good news, I'm able to produce some blocks with \u003c@360491619402776577\u003e 's geth `engine-getblobs-v2` image! Beacon nodes no longer do any computation üéâ . I've added the image and config to the `peerdas-devnet-6` spec page above.",
        "created_at": "2025-03-13T12:32:25.769000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "d90e9189236f2280f09b818bb0d662bc38dd60cfba3f46b30141a4a07a39a5c5"
            }
        ]
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Yaaay:\n```\n[2025-03-13 12:34:32.09]  DEBUG execution: Data columns successfully reconstructed from EL root=0x8c5b62add601024f62bc2bd40563cdfc5aad825da22392bf6df94f1d4517b686 slot=78\n```\n\n(GetBlobsV2 only at the moment.)",
        "created_at": "2025-03-13T12:35:32.898000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "However ATM I have a lot of orphaned blobs (even on Deneb). Have to check why.",
        "created_at": "2025-03-13T12:36:42.224000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "b7a1fae513505049b49fbac82967e5d0831aeb88997acb8396a7ddb9016010bd"
            }
        ]
    },
    {
        "author": "agnxsh",
        "category": "Testing",
        "parent": "",
        "content": "nice, i'll start implementing this tomorrow",
        "created_at": "2025-03-13T12:37:16.018000+00:00",
        "attachments": null
    },
    {
        "author": "agnxsh",
        "category": "Testing",
        "parent": "",
        "content": "and we can interop",
        "created_at": "2025-03-13T12:37:23.548000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "i also had to increase the slot time back to 12 - im not sure how parallelised \u0026 optimised the compute cells operation is in geth right now, given it's a quick impl to get interop started (cc \u003c@360491619402776577\u003e )\nWhen we did it in the BN, we compute cells in parallel, maybe that's why?",
        "created_at": "2025-03-13T12:42:08.560000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "Thanks \u003c@360491619402776577\u003e for the quick turnaround implementing this on the ELüôè",
        "created_at": "2025-03-13T12:43:49.669000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "No issue any more with slot time set at 6 sec (was previously set at 4 sec).",
        "created_at": "2025-03-13T12:54:37.668000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "qq, how are you checking if the EL is doing the cell proof computation or the CL? some metric or some other way?",
        "created_at": "2025-03-13T13:18:51.622000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "The CL no longer has code to compute proofs",
        "created_at": "2025-03-13T13:20:33.867000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "it gets cells \u0026 proofs via either getPayloadV5 (block production) or getBlobsV2",
        "created_at": "2025-03-13T13:20:57.358000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Should  the CL verify proofs, or we trust the EL we are connected to?",
        "created_at": "2025-03-13T13:21:13.834000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "We do verify the proof during block production. The blob and proofs could be from external builder.",
        "created_at": "2025-03-13T13:21:38.259000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "And they are not verified by the EL before responding to the CL?",
        "created_at": "2025-03-13T13:22:15.114000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "So what happens if we have a malicious EL that returns a block without proofs? or if a blob isnt available in the mempool?",
        "created_at": "2025-03-13T13:22:28.317000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "The EL is a trusted component right? if we have EL returning a bad payload then we're kinda screwed anyway?",
        "created_at": "2025-03-13T13:23:46.012000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "\u003e So what happens if we have a malicious EL that returns a block without proofs\nThat joins my question: \"Should a CL trust the EL it is connected to?\"",
        "created_at": "2025-03-13T13:23:55.086000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "oh actually i think i might wrong - in the blinded block proposal flow the CL doesn't actually see the blob until signed block is submitted and payload is revealed",
        "created_at": "2025-03-13T13:26:01.183000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Hmm, you aren't wrong in itself. I think its so far a semi-trusted relationship, we do need to think about attacks if its fully trusted. \n\nAlso i guess if a blob comes from a private mempool, then its pulled by cl and needs verification?",
        "created_at": "2025-03-13T13:29:26.185000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "exactly, the CL can't verify the block, blobs, or anything else with the builder API",
        "created_at": "2025-03-13T13:29:50.221000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "that's not new nor is it PeerDAS-specific",
        "created_at": "2025-03-13T13:30:09.490000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "CLs have no concept of \"private mempool\"?",
        "created_at": "2025-03-13T13:33:04.888000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "yeah possibly - proofs verification is supposed to be really fast though (I dont have the numbers) so might be worth it. \nAlthough now the CL will need to compute the extended cells  in order to verify all proofs - this is a fast operation too - but be great to know how much it cost to compute cell + verify proofs for a large blob count",
        "created_at": "2025-03-13T13:33:32.199000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "I mean EL mempool, not CL (there's no mempool anyway) - so the question is about the builder workflow",
        "created_at": "2025-03-13T13:34:39.500000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "builders and relays already use \"optimistic\" (...) validation, I'm skeptical they'd suddenly care about spending the additional milliseconds to verify this",
        "created_at": "2025-03-13T13:37:46.916000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Testing",
        "parent": "",
        "content": "Yup! That's my argument, that the CL needs to have the verification logic since we can't rely on builders and (*maybe* shouldnt) rely on the ELs to do all the verifications",
        "created_at": "2025-03-13T13:39:53.280000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "that gets back to the point of, how can they know:\n- for the proposer it's too late, by design, it's committed and the relay sends it out regardless of proposer action when it gets the signature (and later returns it to the proposer); and\n- other CLs can't/shouldn't have logic to determine builder API block or not",
        "created_at": "2025-03-13T13:41:39.121000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Testing",
        "parent": "",
        "content": "I'm not seeing how this would operationally work",
        "created_at": "2025-03-13T13:41:44.638000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Hum maybe I spoke a little bit to fast.\nActually it works only for blocks without commitments. So... It does not work. (This log was displayed even for blocks without commitments.)",
        "created_at": "2025-03-13T15:10:53.545000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "I don't understand this line in geth:\nhttps://github.com/jimmygchen/go-ethereum/blob/engine-getblobs-v2/eth/catalyst/api.go#L586",
        "created_at": "2025-03-13T15:13:49.664000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "```go\ncellProofs, err := kzg4844.ComputeCells(blobs[i])\n```",
        "created_at": "2025-03-13T15:14:11.617000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "`kzg4844.ComputeCell` computes cells, not proofs",
        "created_at": "2025-03-13T15:14:26.003000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "And then `cellProofs` are added as proofs:\nhttps://github.com/jimmygchen/go-ethereum/blob/engine-getblobs-v2/eth/catalyst/api.go#L591-L597",
        "created_at": "2025-03-13T15:15:22.078000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "I believe it's a bug, should get proofs out directly from the blobsidecar",
        "created_at": "2025-03-13T15:17:09.807000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I think so. `GetBlobsV2` in geth does not behave as expected.",
        "created_at": "2025-03-13T15:18:02.447000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "I'll make a fix.",
        "created_at": "2025-03-13T15:18:17.848000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "(cc \u003c@360491619402776577\u003e )",
        "created_at": "2025-03-13T15:18:39.605000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Oh",
        "created_at": "2025-03-13T15:19:09.974000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "No, actually no. Blob proof (in blob sidecar) != cells proofs if I'm not wrong.",
        "created_at": "2025-03-13T15:19:33.026000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Proofs have to be computed with \n```\nckzgCells, ckzgProofs, err := ckzg4844.ComputeCellsAndKZGProofs(ckzgBlob)\n```",
        "created_at": "2025-03-13T15:20:09.052000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "After the change, blob proof will be changed to cell proofs",
        "created_at": "2025-03-13T15:20:09.114000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "But yeah, since we don't have txs with cell proofs yet, I believe Marius mentioned that he's auto converting it for CL to do testing",
        "created_at": "2025-03-13T15:21:04.580000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Are you sure? ComputeCell computes the proofs afaik",
        "created_at": "2025-03-13T15:22:30.786000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "\u003e I believe it's a bug, should get proofs out directly from the blobsidecar\nOnce tx senders compute (cells) proofs, yes.\n\nBut right now, geth kindly does the heavy lifting for CL.\nSo, IMO geth should use, ATM, `ckzg4844.ComputeCellsAndKZGProofs`",
        "created_at": "2025-03-13T15:22:33.192000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "I use computeCellsANDKZGProofs",
        "created_at": "2025-03-13T15:23:27.851000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Quite sure `computeCells` computes... cells and `ComputeCellsAndKZGProofs` computes... cells and KZG proofs",
        "created_at": "2025-03-13T15:23:32.011000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Nope, computeCells uses ComputeCellsAndKZGProofs internally",
        "created_at": "2025-03-13T15:23:56.868000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Maybe my naming is off, but kzg4844.COmputeCells computes the proofs not the cells",
        "created_at": "2025-03-13T15:24:27.161000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/jimmygchen/go-ethereum/blob/engine-getblobs-v2/crypto/kzg4844/kzg4844_gokzg.go#L100-L112",
        "created_at": "2025-03-13T15:25:22.432000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, I guess it's a naming issue",
        "created_at": "2025-03-13T15:25:27.723000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "There will be a new ComputeCell method that just computes Cells, and would be needed later",
        "created_at": "2025-03-13T15:25:40.077000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "But as of now, this function works üòÉ",
        "created_at": "2025-03-13T15:25:48.399000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Ah okay",
        "created_at": "2025-03-13T15:29:29.529000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Will rename then",
        "created_at": "2025-03-13T15:29:33.457000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "ComputeCellProofs",
        "created_at": "2025-03-13T15:29:38.058000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "The initial reason why I looked into geth is because, when calling getBlobsV2, I get correctly the blobs, but empty cells proofs.\nNot sure where does the issue come from ATM.\n\n```\n[2025-03-13 14:56:56.59]  INFO execution: GetBlobsV2 result blobLen=131072 cellProofsLen=0 index=0\n[2025-03-13 14:56:56.59]  INFO execution: GetBlobsV2 result blobLen=131072 cellProofsLen=0 index=1\n[2025-03-13 14:56:56.59]  INFO execution: GetBlobsV2 result blobLen=131072 cellProofsLen=0 index=2\n[2025-03-13 14:56:56.59]  INFO execution: GetBlobsV2 result blobLen=131072 cellProofsLen=0 index=3\n[2025-03-13 14:56:56.59]  INFO execution: GetBlobsV2 result blobLen=131072 cellProofsLen=0 index=4\n[2025-03-13 14:56:56.59]  INFO execution: GetBlobsV2 result blobLen=131072 cellProofsLen=0 index=5\n```",
        "created_at": "2025-03-13T15:44:35.408000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "```\nblobLen=131072 cellProofsLen=0\n```",
        "created_at": "2025-03-13T15:44:41.438000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Oh we might or might not have the blobs in our blobpool",
        "created_at": "2025-03-13T15:48:12.494000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "There's no guarantee on us having the blobs in getBlobs",
        "created_at": "2025-03-13T15:48:31.375000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Hum, in my case I have blobs (`blobLen=131072`) but no proofs (`cellProofsLen=0`)",
        "created_at": "2025-03-13T15:49:04.360000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Yeah thats weird",
        "created_at": "2025-03-13T15:49:10.670000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "Maybe the issue comes from Prysm, looking after meeting",
        "created_at": "2025-03-13T15:49:24.544000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "Are you looking for `cell_proofs` or `cellProofs`?",
        "created_at": "2025-03-13T15:49:55.974000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "uh, ok, I'm actually working on that part, currently prysm decodes it from kzg_proofs, not cell_proofs",
        "created_at": "2025-03-13T15:50:09.224000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "OK \u003c@656728086410297356\u003e will let you work on it.",
        "created_at": "2025-03-13T15:50:41.353000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "can you change to cellProofs, camel case which matches the latest execution-api PR?",
        "created_at": "2025-03-13T15:51:05.387000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "already did",
        "created_at": "2025-03-13T15:51:21.800000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "https://github.com/MariusVanDerWijden/go-ethereum/tree/engine-getblobs-v2",
        "created_at": "2025-03-13T15:51:46.311000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "With `engine_getBlobsV2`, should the EL serve the **non**-extended blob and corresponding cell proofs (64 cells and 64 proofs) or the extended blob and corresponding cells proofs (128 cells and 128 proofs)?\nAnd, before the EL, should the tx sender compute normal blob and cells proofs or extended ones?\n\nIf we go with the non-extended version, then the CL will still have to extend (cheap) but to compute extra 64 cells proofs (expensive) to be able to store / reseed 64 extra data column sidecars.",
        "created_at": "2025-03-13T17:32:38.845000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "I think it's the `extended` one, it defeats the purpose of saving proof generation time if it's just half the cell \u0026 proofs?",
        "created_at": "2025-03-13T17:36:41.231000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "I agree. Unless I'm wrong, currently geth sends only the **non**-extended blob.\nhttps://github.com/jimmygchen/go-ethereum/blob/engine-getblobs-v2/eth/catalyst/api.go#L583\n\nIt matches what I see in Prysm.\n```\nGetBlobsV2 result blobLen=131072\n```\n\n```131_072/(2*2**10) = 64```",
        "created_at": "2025-03-13T17:40:44.418000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "(A blob cell is 2KB size)",
        "created_at": "2025-03-13T17:41:07.901000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "Testing",
        "parent": "",
        "content": "So I should add the cells to the blob?",
        "created_at": "2025-03-13T17:41:58.244000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "I see, I think the change currently only applies to proof, so the return is\n1. blob bytes\n2. proofs (128 of them)\n\nAnd you'll need to do `ComputeCells` from blob on CL yourself",
        "created_at": "2025-03-13T17:41:59.590000+00:00",
        "attachments": null
    },
    {
        "author": "francis.li",
        "category": "Testing",
        "parent": "",
        "content": "I believe that's the idea from my talk with \u003c@427491045308235776\u003e , because `ComputeCells` is cheap",
        "created_at": "2025-03-13T17:42:23.323000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Testing",
        "parent": "",
        "content": "Compute cells is very cheap. It‚Äôs like 3ms.",
        "created_at": "2025-03-13T17:42:43.975000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "So, the tx sender should send:\n- ~~non-extended blob (64 cells of 2kB)~~ aka. the blob\n- **extended** cells proofs (128 cells proofs of 48 B)\n\n?",
        "created_at": "2025-03-13T17:44:25.501000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Testing",
        "parent": "",
        "content": "I would just call it the blob.",
        "created_at": "2025-03-13T17:45:31.008000+00:00",
        "attachments": null
    },
    {
        "author": "jtraglia",
        "category": "Testing",
        "parent": "",
        "content": "We just made a new [ckzg v2.1.0 release](https://github.com/ethereum/c-kzg-4844/releases/tag/v2.1.0).",
        "created_at": "2025-03-13T18:37:08.183000+00:00",
        "attachments": null
    },
    {
        "author": "fradamt",
        "category": "Testing",
        "parent": "",
        "content": "Fwiw, this is what the PR to the EIP says too üòÑ",
        "created_at": "2025-03-13T19:00:04.731000+00:00",
        "attachments": null
    }
]