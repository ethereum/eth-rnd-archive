[
    {
        "author": "jimmygchen",
        "category": "Testing",
        "parent": "",
        "content": "Has any team started implementing validator custody? got a few Qs:\n- When the validator balance changes / new validator attached, the node may have to increase its custody count, the node would have to \"backfill\" the additional columns right (request from peers and store in db)? \n- During this time, the node may not be able to serve these additional columns yet - do we update the ENR once the \"backfill\" is complete and node is ready to serve the columns?",
        "created_at": "2025-01-10T06:10:41.314000+00:00",
        "attachments": null
    },
    {
        "author": "manunlp",
        "category": "Testing",
        "parent": "",
        "content": "\u003e When the validator balance changes / new validator attached, the node may have to increase its custody count, the node would have to \"backfill\" the additional columns right (request from peers and store in db)?\nIMO, yes.\n\n\u003e During this time, the node may not be able to serve these additional columns yet - do we update the ENR once the \"backfill\" is complete and node is ready to serve the columns?\nI did not start to implement the validator custody yet, but it sounds to be a good idea.\n\nActually, the same issue is here even without validator custody, when a node starts on a checkpoint sync and did not yet backfill the content of the retention window. At this time, the node claims (via its ENR/metadata) it custodies some groups, while it is not true (yet). Should nodes downscore a peer in this case? I feel we lack some indicator in ENR/metadata \"backfill not yet finished\", indicating a freshly started node did not had time to finish the backfill.\n\nI have an additional question: If a `t = 0` a node manages `n` validators, and at `t = 1` it manages only `m` validators (with `m \u003c n`), should the node delete in the DB the columns not any more needed? (My intuition is it should not delete anything until the retention window is over)",
        "created_at": "2025-01-10T08:58:47.746000+00:00",
        "attachments": null
    }
]