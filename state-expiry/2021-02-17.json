[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What is the context of that statement?  Not a single auditor I know of would not give incredibly harsh feedback if they saw `blockhash` being used as a source for randomness in an unbounded profit-per-block system.",
        "created_at": "2021-02-17T03:10:21.328000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A very random question without much thought: what if selfdestruct is turned into `call(\u003caddr\u003e, 0, \u003ceth balance\u003e, ...)` (i.e. \"transfer\")?\n\nWhat downsides would that have? What upsides would that have?",
        "created_at": "2021-02-17T03:18:32.280000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think that would a) avoid the situation of locking up funds; b) introduce a useful feature; c) would only \"break\" things like gas contracts?",
        "created_at": "2021-02-17T03:25:50.032000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would worry about the potential for reentrancy attacks by doing a call where previously there was no call.",
        "created_at": "2021-02-17T03:28:01.794000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Not a big fear, though I also don't have a problem with just turning that OPCODE into a no-op.",
        "created_at": "2021-02-17T03:28:16.256000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Basically selfdestruct is two instructions today:\n1) Undeniable transfer (similar to how the coinbase address behaves)\n2) The resetting of the account",
        "created_at": "2021-02-17T03:29:06.700000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Some people think the undeniable transfer feature is good. What I wrote above was a `call`, which as you point out may be subjec to reentrancy. Another option to consider is keeping its undeniable transfer quality without the resetting.",
        "created_at": "2021-02-17T03:29:51.422000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And for the \"some people\" I have actual examples and I'm not one of them ðŸ™‚",
        "created_at": "2021-02-17T03:30:08.785000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The context (as I understand it) is that the blockhash is _less_ malleable than the other information that could be accessed by apps, but it doesn't go into details about the strength of randomness that the blockhash can give which is confusing:\n\u003e 12.2. Random Numbers.\n\u003e ... we can approximate with pseudo-random numbers by utilising data which is generally unknowable at the time of transacting. Such data might include the blockâ€™s hash, the blockâ€™s timestamp and the blockâ€™s benefi- ciary address. In order to make it hard for malicious miners to control those values, one should use the BLOCKHASH operation in order to use hashes of the previous 256 blocks as pseudo-random numbers. ...",
        "created_at": "2021-02-17T04:26:49.470000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not initially opposed to changing selfdestruct to be undeniabletransfer.",
        "created_at": "2021-02-17T04:28:39.721000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "*grumble* And the yellowpaper doesn't have any mention of how that is a bad idea?",
        "created_at": "2021-02-17T04:29:22.794000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Probably worth submitting a PR to the yellow paper to remove that.",
        "created_at": "2021-02-17T04:29:31.177000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We will have to change this section once `RANDOM` opcode is introduced in the EVM anyway",
        "created_at": "2021-02-17T05:52:22.431000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That could work too!",
        "created_at": "2021-02-17T23:37:43.259000+00:00",
        "attachments": null
    }
]