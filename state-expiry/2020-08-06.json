[
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yesterday I talked to Tyler from Ava labs about pre-consensus and Sybil attacks. After some more thinking, I have added another two sections into the plan document: https://ledgerwatch.github.io/regenesis_plan.html#Pre-consensus-and-Sybil-attacks",
        "created_at": "2020-08-06T15:33:14.608000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "second section just follows the one about Sybil attacks",
        "created_at": "2020-08-06T15:33:44.190000+00:00",
        "attachments": null
    },
    {
        "author": "gballet",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i was wondering: the top part of a transaction proof will be duplicated many times, would it be possible for the miner to aggregate all tx proofs at block level? Segregate the witnesses, so to speak. It would save some bytes on the final block size.",
        "created_at": "2020-08-06T15:43:23.475000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So the suggestion is to use coin-age for pre-consensus weight?\nI'm concerned adding a second consensus mechanism here is going to introduce massive complexity compared to the gain",
        "created_at": "2020-08-06T15:59:11.613000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no, coin-age is used not as a weight, but as a joining condition for the pre-consensus network",
        "created_at": "2020-08-06T16:01:48.448000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!353136597522448385\u003e yes, because there is now both transaction witness and block witness, the miner can do that. But the miner won't get paid for it",
        "created_at": "2020-08-06T16:03:07.637000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "one of the reason I would like to have most of the proofs in the transactions, is that it avoid the problem of allocating the cost of block witness to the individual transactions, and leads to either more repricing or to oil/karma things. If we can avoid all of that, it would be good",
        "created_at": "2020-08-06T16:04:28.064000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "plus, transaction witnesses will not be required to include bits of the proof that are at the top",
        "created_at": "2020-08-06T16:05:01.553000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it is still a TODO in the text to describe how this is going to be done",
        "created_at": "2020-08-06T16:05:15.841000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "that is the reason transaction witness is defined as a \"collection\" of multiproofs rather than a single multiproof",
        "created_at": "2020-08-06T16:05:41.277000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so that the top parts that are already in the active state, can be omitted",
        "created_at": "2020-08-06T16:06:00.023000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!291925846556540928\u003e there is always a concern about complexity. But I believe with a good dev process, it can be well managed",
        "created_at": "2020-08-06T16:06:41.645000+00:00",
        "attachments": null
    },
    {
        "author": "gballet",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "OK, only passing the non-redundant bits of the multiproof also solve the problem. And I just realize that there is another problem with having one single proof to rule them all: the miner can actually arbitrage between the situations in which the proof data is available and the one it's not, and tamper execution this way.",
        "created_at": "2020-08-06T16:11:23.585000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Am I correct in understanding the pre-consensus network as only an intermediate solution during the soft fork phase?",
        "created_at": "2020-08-06T16:13:47.038000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "well, it started off that way, until I understood that it can also be used to massively improve the propagation of large blocks",
        "created_at": "2020-08-06T16:14:56.138000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "large blocks would be one of the biggest criticism for both Stateless Ethereum and ReGenesis, so it matters",
        "created_at": "2020-08-06T16:15:36.014000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So the goal is to improve the propagation of large blocks. Is it correct to say that the (avalanche) pre-consensus mechanism helps achieve the goal by zeroing in on blocks with smaller witnesses than had a miner naively constructed the block?",
        "created_at": "2020-08-06T16:17:33.475000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "not quite. Pre-consensus allows all the participants to know in advance most of the information about the block that is going be mined next. The only information that is missing is miner's coinbase and mining nonce (28 bytes). Having those 28 bytes and the info that is already pre-agreed, participants can create the full block, instead of having to receive from peers",
        "created_at": "2020-08-06T16:55:56.310000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "of course, if you missed the propagation, then you will need to request it from peers, and the block will have to be delivered to you (but only you) in full",
        "created_at": "2020-08-06T16:56:30.982000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "you can think about this way - when transactions are created and sent to the network, they are usually not super-urgent (they cannot really be due to uncertainty of how much gas price one needs to give). But once the miner produced a block with those transactions in it, it suddenly becomes very urgent to move these transactions (inside the block) around. This feels weird. And pre-consensus resolves this weirdness",
        "created_at": "2020-08-06T16:58:43.320000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "in fact, think blocks get us already half-way there",
        "created_at": "2020-08-06T16:59:28.893000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but pre-agreed blocks are even better",
        "created_at": "2020-08-06T16:59:42.362000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "of course, there could be consensus failures in the pre-consensus, in which case block has to be propagated as thin-block",
        "created_at": "2020-08-06T17:00:11.173000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "okay this makes a lot more sense, thank you",
        "created_at": "2020-08-06T17:00:25.970000+00:00",
        "attachments": null
    },
    {
        "author": "zkfloof",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "love the re-genesis concept. Is it possible to somehow make it a continuous process vs periodically batch from active -\u003e inactive state? I'm guessing it might not make sense from an efficiency standpoint.",
        "created_at": "2020-08-06T23:45:40.249000+00:00",
        "attachments": null
    }
]