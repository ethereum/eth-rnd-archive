[
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm, this is probably a bug in Catalyst then. Do you have a database which this bug can be reproduced with?",
        "created_at": "2021-05-19T07:16:14.266000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's still happening on every block I propose",
        "created_at": "2021-05-19T10:04:23.910000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not sure how to help you here as I don't know anything about Catalyst",
        "created_at": "2021-05-19T10:04:56.094000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But both nodes are still trying to send the transactions on every block",
        "created_at": "2021-05-19T10:06:02.681000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We could try to dump Teku and Catalyst databases and transactions to feed them to the transaction pool to reproduce this issue. \u003c@!353136597522448385\u003e \u003c@!402853454126776320\u003e do you think it worth doing? Or could we enable Catalyst to trace transactions for both, block creation and block processing phases?",
        "created_at": "2021-05-19T10:21:26.514000+00:00",
        "attachments": []
    },
    {
        "author": "garyrong",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!425572898787426305\u003e yes, I can also help with the debugging. And regarding the tracing, it's not supported for the runtime tracing. But we do offer a `traceCall` API so that you can trace the \"call\" without sending it.",
        "created_at": "2021-05-19T11:05:38.890000+00:00",
        "attachments": []
    },
    {
        "author": "garyrong",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Perhaps it's useful to dump out the execution traces directly",
        "created_at": "2021-05-19T11:05:56.579000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It would be great if we could grab two traces and compare them. The issue is that transaction execution on `assembleBlock` results in a different state root comparing to what it gets from execution a block on `newBlock`. This discrepancy occurs on a single Catalyst instance.",
        "created_at": "2021-05-19T11:09:08.233000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "the good thing about this bug is that we can predict precisely when it will happen as proposals are scheduled in advance",
        "created_at": "2021-05-19T11:17:38.417000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but other than grabbing the log from catalyst (that I already posted above) or directly packing my dbase and putting it online, I do not know how to help you",
        "created_at": "2021-05-19T11:18:25.495000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Could you please grab database and all transactions that you suspect are in transaction pool now?",
        "created_at": "2021-05-19T11:21:13.462000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "don't really know how to do that, I can pack the chaindata directory",
        "created_at": "2021-05-19T11:21:46.421000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "another thing which I am not sure if it' s a bug or intended behaviour, if you stop Catalyst, Teku recognizes is not connecting and it doesn't  reconnect at relaunch. Prysm correctly resyncs after you relaunch Catalyst",
        "created_at": "2021-05-19T11:23:58.806000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Teku should try to connect on relaunch, at least execution payload will be produced and inserted correctly. Deposits should also be fetched even after a period of eth1 endpoint outage.",
        "created_at": "2021-05-19T11:30:31.413000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it's not happening, if I force Teku to relaunch then it does connect to the running Catalyst node",
        "created_at": "2021-05-19T11:31:04.209000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "How can I grab and send you the dbase? now's a good time cause soon I become a daycare manager at my place",
        "created_at": "2021-05-19T11:31:35.502000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so, if you stop Catalyst and then start it again, Teku won't be able to insert or produce execution payload?",
        "created_at": "2021-05-19T11:31:46.360000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also proto will soon stop his validators",
        "created_at": "2021-05-19T11:31:55.086000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "you may stop nodes and tar/gz a folder with databases. Then you may send it here",
        "created_at": "2021-05-19T11:32:46.570000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah ok",
        "created_at": "2021-05-19T11:33:03.489000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also, it would be great to get a set of transactions you used",
        "created_at": "2021-05-19T11:33:15.135000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "thought you wanted something more refined",
        "created_at": "2021-05-19T11:33:17.995000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't know what you mean by that, I can send you the hashes",
        "created_at": "2021-05-19T11:34:21.017000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "and the raw strings",
        "created_at": "2021-05-19T11:34:30.752000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Raw strings would be enough. You've used `sendRawTransaction`, right?",
        "created_at": "2021-05-19T11:35:32.539000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yes",
        "created_at": "2021-05-19T11:35:50.066000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "cool",
        "created_at": "2021-05-19T11:36:29.943000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "even if the network is going to die, I can use my local node to force block creation which should be enough to reproduce this bug",
        "created_at": "2021-05-19T11:37:26.237000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Attaching the chaindata and the beacondata soon, Teku's logs are a pain to compress for my laptop, will DM you both in case there's personal info. Thought I saved the raw strings but can't find them for the transactions. The logs of the bad block message only show the transaction hash",
        "created_at": "2021-05-19T11:41:50.957000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh they won't fit here, I'll put them online and send you the link soon",
        "created_at": "2021-05-19T11:44:10.881000+00:00",
        "attachments": []
    },
    {
        "author": "garyrong",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, I can also help the debug, but I have to afk for a while",
        "created_at": "2021-05-19T11:45:15.967000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "could you please grab them with hashes via JSON-RPC?",
        "created_at": "2021-05-19T11:46:33.280000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh stupid me, sure",
        "created_at": "2021-05-19T11:49:59.286000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "```\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\n    \"blockHash\": null,\n    \"blockNumber\": null,\n    \"from\": \"0x9b00b3150ec14bbbae9d45e82da1141d18e06237\",\n    \"gas\": \"0x17318\",\n    \"gasPrice\": \"0x4\",\n    \"hash\": \"0x5fe9328c10c5a1dd360dc1486682abf07fffaa2b3d06bc57e7f949db6eb579c2\",\n    \"input\": \"0x22895118000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120e07643e20beb17889de5500f7bc650592e87ffa11c68a1e593864ec69e3fbe6e0000000000000000000000000000000000000000000000000000000000000030af06645654d11f0a3c43992667e197b95b265b0e12d46b6f6abcc00144b9fe41565aafaa94d54a83788262e87f7854dd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200006d8955fe9a391c7d658704099724bfa555db254161388b315473c6e10ad5b0000000000000000000000000000000000000000000000000000000000000060b38961d60d4af68505b24db2f44819d949a4c07c3d9f35f0f032b003839e61487267ad4acb576af9d56808f6a23ee866040705100f229de55d4570a4a3f0c022ca0ed1ef4495e84a2d72856c7c7eefdc68b502702c7a938e6aa2b864b59ccf35\",\n    \"nonce\": \"0x12c\",\n    \"to\": \"0x4242424242424242424242424242424242424242\",\n    \"transactionIndex\": null,\n    \"value\": \"0x1bc16d674ec800000\",\n    \"type\": \"0x0\",\n    \"v\": \"0x59f\",\n    \"r\": \"0xe0e7aca3ea35a23dbf1d7ed72e5c992ff1ac85ed40fd7f5060aaf0ca313ee400\",\n    \"s\": \"0x57389effd638ef0f68f7d5b39966e3915c198385561f4c5491e97d524e1a44ac\"\n  }\n}\n```",
        "created_at": "2021-05-19T11:54:13.365000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That's one of the deposits",
        "created_at": "2021-05-19T11:54:17.897000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'll send you the links for the tar.gz in a bit",
        "created_at": "2021-05-19T11:54:53.049000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thank you so much!",
        "created_at": "2021-05-19T12:02:16.031000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I tarred all my Teku logs which are almost 4Gb, mostly useless except the last ones, but anyway...",
        "created_at": "2021-05-19T12:03:31.611000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "FYI: the Nocturne devnet was scheduled to close today, but we're looking through some next eth1 sync development steps first, before closing the current best option. Will close it later today likely.",
        "created_at": "2021-05-19T12:55:46.595000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i've been away for a bit, are there any new commits i should recompile and rebuild for to help the effort?",
        "created_at": "2021-05-19T13:32:05.080000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think you don't need to update anything as long as Nocturne is about to be shut down soon",
        "created_at": "2021-05-19T13:34:07.798000+00:00",
        "attachments": []
    },
    {
        "author": "schone_wizard",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "cool just let me know, i can do whatever is needed or keep it running for as long as",
        "created_at": "2021-05-19T13:36:18.832000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "PSA: shutting down explorer, fork-monitor, and nodes. Thanks everyone for participating in the testnet, I'm looking forward to the next round of public Merge testnets after Altair!",
        "created_at": "2021-05-19T18:24:16.938000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cterencechain\u003e Shutting down prysm nodes and validators. Thanks and great work everyone!",
        "created_at": "2021-05-19T18:29:53.140000+00:00",
        "attachments": []
    }
]