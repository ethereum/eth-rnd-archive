[
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hi, apologies for the question, I never ran Teku before, trying to peer directly a prysm node ran locally to a Teku BN+VC. Teku is running fine with catalyst locally. Now I'd like to get an ENR for the node, is it printed somewhere or should I generate it? I can see \n```\n10:12:56.130 INFO  - Listening for connections on: /ip4/192.168.1.143/tcp/9000/p2p/16Uiu2HAm97WibM71THbYZLP326DaksJRR1Q9AYrWUQvNMffZj9JT\n```",
        "created_at": "2021-05-03T13:19:21.339000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is the ENR you should use",
        "created_at": "2021-05-03T13:21:17.493000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I might miss the question you have",
        "created_at": "2021-05-03T13:21:40.489000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That doesn't seem to have the form of the typical enr:  ```enr:-Ku4QFrzIH_DETC3gh3Dhl_rMzNOdlUH427ef3lbtArKVvbaX_YVs6_zEB0Z5Q72a6ZKlgvXJjS-yt20UXhftrFS2EoCh2F0dG5ldHOIAAAAAAAAAACEZXRoMpB5-A5dAAAHAf__________gmlkgnY0gmlwhANDKQyJc2VjcDI1NmsxoQIOfbH-pbhkBiSvD0wJxyjm8vA4DROacA7uT4Nfdc5QDYN1ZHCCIyg```",
        "created_at": "2021-05-03T13:22:18.423000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, I see. This is multiaddr string, you may use static peering",
        "created_at": "2021-05-03T13:23:38.847000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "no, cause I want to debug discovery issues",
        "created_at": "2021-05-03T13:23:51.836000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "let me see how to grab ENR with Teku",
        "created_at": "2021-05-03T13:23:52.956000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cbenjaminion\u003e The ENR is available via the â€‹/ethâ€‹/v1â€‹/nodeâ€‹/identity REST endpoint, or grep the log for \"ENR\".",
        "created_at": "2021-05-03T13:23:57.610000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ohh thanks!",
        "created_at": "2021-05-03T13:24:13.333000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks Ben!",
        "created_at": "2021-05-03T13:24:14.965000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "my bad I was running without discovery, running it with it enabled the right ENR appears right there at launch... sorry for the noise",
        "created_at": "2021-05-03T13:28:46.353000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ohhh... I'm not sure if I should be happy or sad about this: Running on the same local network, I got prysm + Teku + catalyst running without trouble. Discovery is working fine, they both follow the same chain.",
        "created_at": "2021-05-03T13:40:41.871000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "During rayonism I couldn't sync getting lots of discovery bad headers errors. Here both nodes are talking perfectly fine",
        "created_at": "2021-05-03T13:41:29.383000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "They are finalizing even with transactions included",
        "created_at": "2021-05-03T13:42:11.212000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is not giving me anything to debug ðŸ™‚",
        "created_at": "2021-05-03T13:42:25.020000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The hard thing with discv5 is that its behavior is different with local network addresses",
        "created_at": "2021-05-03T13:42:38.651000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah this time I didn't expose the external IP address as we were forced to do on rayonism",
        "created_at": "2021-05-03T13:43:07.379000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That is really wierd",
        "created_at": "2021-05-03T13:43:30.707000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I could try to go outside the local network",
        "created_at": "2021-05-03T13:43:31.702000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You shouldnt need to expose your external ip",
        "created_at": "2021-05-03T13:43:45.294000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but I think \u003c@!203220829473996800\u003e got it right, the ENR I am feeding prysm as a bootnode is for a local IP address",
        "created_at": "2021-05-03T13:43:53.540000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It doesnt even  work that way in mainnet. A lot of users dont have any idea for  their ip",
        "created_at": "2021-05-03T13:44:16.962000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "we needed this on rayonism, well, we needed to hide the local one",
        "created_at": "2021-05-03T13:44:19.108000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And are you using the eth2-bootnode thing? It worked for some time on external nets, and it worked fine for me on local nets, but on/off we've been having issues with the geth implementation.",
        "created_at": "2021-05-03T13:44:27.129000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so no address would work, I am not doing this",
        "created_at": "2021-05-03T13:44:32.102000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah thats the wierd part",
        "created_at": "2021-05-03T13:44:33.936000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "First time i ever encountered it",
        "created_at": "2021-05-03T13:44:46.177000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In go discv5 we simply use the source ip from udp packets. So this should  not be an issue",
        "created_at": "2021-05-03T13:45:25.821000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am simply running Teku, getting an ENR and then booting a prysm beacon with that enr as a bootstrap-node",
        "created_at": "2021-05-03T13:45:35.427000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it' s working flawlesly",
        "created_at": "2021-05-03T13:45:42.416000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah but we were being rejected by the bootnode without this as \u003c@!361447803194441738\u003e noted. Now locally this is working, It will take me a while to set it up faking different external interfaces",
        "created_at": "2021-05-03T13:46:53.055000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ultimately we did need it, but seems like there might be some other issue here. Havent had time to dig into it",
        "created_at": "2021-05-03T13:48:30.797000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There were weird bugs in the geth discv5 implementation before. E.g. concurrent hash function usage that would silently break on later Go versions. It may be something like that.",
        "created_at": "2021-05-03T13:50:08.211000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it couldn't have been the bootnode itself cause I tried connecting directly to Teku's bootnode that was ran by proto and couldn't either with specific \"bad headers\"  errors",
        "created_at": "2021-05-03T13:50:36.924000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Although weird enough, when we moved the bootnode key to a rust bootnode tool on the same machine, that wouldn't work either, some people were still reporting bad peering (or they may have had different issues locally)",
        "created_at": "2021-05-03T13:51:08.820000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "interesting ðŸ¤”",
        "created_at": "2021-05-03T13:52:03.883000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It may have been after a teku restart though, teku for a while would change their p2p key every reboot, breaking the ENR. Not sure if that's still the case though, and if it would cause that error.",
        "created_at": "2021-05-03T13:53:26.287000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ahh ok, found trouble: submitted a transaction and then I was dropped as a peer",
        "created_at": "2021-05-03T13:54:10.323000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I got something to debug it seems",
        "created_at": "2021-05-03T13:54:23.288000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "stopped finalizing here",
        "created_at": "2021-05-03T13:54:44.082000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "with which clients?",
        "created_at": "2021-05-03T13:55:05.259000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Teku+Prysm+Catalyst",
        "created_at": "2021-05-03T13:55:32.625000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "using the minimal config? Worth checking if prysm included all latest fixes in that build variant",
        "created_at": "2021-05-03T13:56:47.573000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "what the transaction it was?",
        "created_at": "2021-05-03T13:56:50.341000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "1) Launched Teku pre-genesis, launched Prysm after and synced from Teku without trouble\n2) Finalized for 47 epochs\n3) After a transaction they diverged on a block proposed by prysm, Teku droped prysm node (it could have been the other way around, didn't run with debug logs) and stopped finalizing",
        "created_at": "2021-05-03T13:57:01.722000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "simple transfer in `example-transaction.py` I think if it's reproducible it should be immediate to double check",
        "created_at": "2021-05-03T13:57:35.696000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but interesting is that not only they diverge, but also they drop the peer",
        "created_at": "2021-05-03T13:57:52.844000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "perhaps some peer scoring mechanism is not really working here?",
        "created_at": "2021-05-03T13:58:08.187000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it could drop the peer that sent bad block immediately",
        "created_at": "2021-05-03T13:58:35.093000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "prysm does not accept a block from Teku and I guess it drops it\n```\n[2021-05-03 10:49:54]  WARN sync: Rejected block blockSlot=394 error=signature did not verify\ngithub.com/prysmaticlabs/prysm/beacon-chain/core/helpers.init\n    beacon-chain/core/helpers/signing_root.go:23\nruntime.doInit\n    GOROOT/src/runtime/proc.go:6265\nruntime.doInit\n    GOROOT/src/runtime/proc.go:6242\nruntime.doInit\n    GOROOT/src/runtime/proc.go:6242\nruntime.doInit\n    GOROOT/src/runtime/proc.go:6242\nruntime.main\n    GOROOT/src/runtime/proc.go:208\nruntime.goexit\n    GOROOT/src/runtime/asm_amd64.s:1371\n```",
        "created_at": "2021-05-03T13:58:43.328000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "unless the fork digest is mis-configured or something, that looks like a difference in hash-tree-root, causing the signed message to be different",
        "created_at": "2021-05-03T14:00:02.766000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are you running from docker? Minimal or mainnet config?",
        "created_at": "2021-05-03T14:00:26.655000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "minimal config, built both from source",
        "created_at": "2021-05-03T14:00:45.224000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!363800010518822915\u003e could this be ssz issue on prysm?",
        "created_at": "2021-05-03T14:01:33.017000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Using bazel? Up until a day before the testnet the hash-tree-root code had bugs, and they patched a dependency to make it work",
        "created_at": "2021-05-03T14:01:43.586000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that was on transactions, I am including that patch, the error then was different",
        "created_at": "2021-05-03T14:02:11.530000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But it may be a related or similar issue that' s why the tag to Terence",
        "created_at": "2021-05-03T14:02:32.551000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's about time we ship spec tests for merge anyway, I think that will help fix a lot of these state-transition and merkleization things. Thank you for debugging this though",
        "created_at": "2021-05-03T14:04:10.919000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks for the tag guys, I agree we likely have an issue with ssz HTR and that will be resolved soon once we begin spec testing. I also have the reproducible blocks and state so I will get a head start on this today",
        "created_at": "2021-05-03T14:06:28.347000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just realized that being a validator in a 64 vals network is a risky business! Missed just the first few slots and the balance is 31.93 ETH ðŸ¤£",
        "created_at": "2021-05-03T14:07:07.319000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Was Stkelo minimal? I thought it's mainnet",
        "created_at": "2021-05-03T14:07:13.870000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is a local testnet we were talking about",
        "created_at": "2021-05-03T14:07:29.550000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Got it. But yes, likely the same issue we saw last friday",
        "created_at": "2021-05-03T14:07:56.669000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm running my own testnet with two clients \u003c@!363800010518822915\u003e I'm free after my bikeride today, but I think It'll take me days to get up-to-date on your branch ðŸ™‚",
        "created_at": "2021-05-03T14:08:12.646000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Fyi, I'll update the multi-client script in the tutorial to fix prysm validator keys loading, and do the rayonism office-hour today, but otherwise AFK. Will work on spec tests tomorrow",
        "created_at": "2021-05-03T14:10:15.464000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "also paths should be fixed in the tutorial for prysm running, as written, bazel has to be run within `clients/prysm` and the paths to wallets, etc. are relative to `../..`",
        "created_at": "2021-05-03T14:12:03.899000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "thanks, will include that in my PR",
        "created_at": "2021-05-03T14:14:33.270000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We'll be improving the prysm instructions this week to just use go build",
        "created_at": "2021-05-03T15:34:42.269000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "and a make file and/or bash scripts",
        "created_at": "2021-05-03T15:34:53.449000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "For a devnet bazel is good as it gives you reliable debugging environments. It also helps that it triggers automatic recompiling on quick changes",
        "created_at": "2021-05-03T15:48:34.205000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Agreed, perhaps we can offer both choices",
        "created_at": "2021-05-03T15:49:43.993000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "we just want to minimize friction for people trying out prysm for rayonism",
        "created_at": "2021-05-03T15:49:59.736000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Reminder: office hour today like every week, starting in 15 min. We did a lot last week, and we're working on spec-tests and client improvements, but if you've any questions or want to discuss new things, just hop on the call.",
        "created_at": "2021-05-03T16:44:17.030000+00:00",
        "attachments": null
    },
    {
        "author": "lukaszrozmej",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Missed office hours. Any notes?",
        "created_at": "2021-05-03T18:13:04.577000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No special notes, we had Mikhail, me and primarily end-users on the call. I'm going to reach out to those working on sharding outside of the call. Tomorrow we'll try do a pre-release of test vectors for eth2 clients. For eth1, you can review https://github.com/protolambda/mergenet-tutorial/pull/15 which should make the tutorial a whole lot more consistent, and hopefully helps you with automation of local testing.",
        "created_at": "2021-05-03T18:24:04.732000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If we can get eth2 clients to run and pass the test-vector pre-release this week, we'll do a 1-week devnet start next week, same as with Steklo, but should be more stable.",
        "created_at": "2021-05-03T18:25:57.344000+00:00",
        "attachments": null
    }
]