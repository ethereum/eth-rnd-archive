[
    {
        "author": "schone_wizard",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "is it possible to join this hackathon by just running diff pieces of the architecture? ie without coding anything",
        "created_at": "2021-03-31T00:17:36.061000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i'd love to help running things as we did with the phase 0 testnets a year ago",
        "created_at": "2021-03-31T00:17:47.815000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There are some local testnet setups you can try already. Prysm just published one today. We'll make a few tweaks to it in the next 2 weeks, start with small devnets and all that, and then may have something during the hackathon to run as end-user.",
        "created_at": "2021-03-31T00:57:10.136000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "These are prototypes though, we'll start with the merge at genesis. Later testnets (likely after hackathon) will focus on the fork transition and more production quality.",
        "created_at": "2021-03-31T00:59:35.166000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Just had an idea for a potential hackathon project: use the `NewBlock` and `NewHead` messages from https://hackmd.io/@n0ble/ethereum_consensus_upgrade_mainnet_perspective but instead of having them go from an beacon node -\u003e eth1 node have them go from eth1 node A to eth1 node B.  Might be a good way to test that the eth1 client is handling the messages correctly, and could be a cool way to keep two eth1 nodes in sync w/ each other.",
        "created_at": "2021-03-31T03:00:20.580000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I wonder if you could achieve the same thing with a smart proxy between the beacon node and the eth1 client.  You'd have two eth1 nodes behind the proxy - one that is just following the current Eth1 MainNet and the other which is acting as if the merge had happened and delegating consensus to the beacon node.  Most requests would go to the post-merge node, but requests to create an eth1 block would just go to the \"real\" MainNet node and request whatever the next block actually was and pass it back to the beacon node.\n\nAs long as all beacon node proposers used that system, the beacon chain should follow the real MainNet, albeit possibly with some lag.",
        "created_at": "2021-03-31T03:44:31.535000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Mainnet state under PoS consensus will start to slightly diverge from the real mainnet from one block to another. Which could make some transactions invalid and invalidate a block eventually. Both nodes will have to keep building application chain as if it was post-merge then transaction pool of the node that is connected to the mainnet will be able to sort out invalid transactions.",
        "created_at": "2021-03-31T09:53:04.365000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hmm true. There‚Äôs no block reward on the merged chain. Keeping the transactions in the same order would likely keep them a lot closer and give longer before the states diverged too much for most transactions though.",
        "created_at": "2021-03-31T09:59:43.401000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, this drift should not be significant and it should take a while to get stuck with an invalid block",
        "created_at": "2021-03-31T10:02:32.643000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cpjickling\u003e testing bridge",
        "created_at": "2021-03-31T15:24:08.509000+00:00",
        "attachments": null
    },
    {
        "author": "paulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "testing bridge",
        "created_at": "2021-03-31T15:24:18.073000+00:00",
        "attachments": null
    },
    {
        "author": "paulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "there is now a bridge connecting the telegram and discord Eth R\u0026D rayonism channels.",
        "created_at": "2021-03-31T15:25:03.696000+00:00",
        "attachments": null
    },
    {
        "author": "hudsonjameson",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ü•≥",
        "created_at": "2021-03-31T15:25:23.736000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "sounds good, ill look into the current testnet prysm is offering",
        "created_at": "2021-03-31T16:17:28.892000+00:00",
        "attachments": null
    },
    {
        "author": "schone_wizard",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "i'm very excited about Ethereum taking some bold steps in this direction, i think everybody is ready for a big change",
        "created_at": "2021-03-31T16:17:57.524000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess the \"smart proxy\" you mentioned could instead _pretend_ to be a beacon node, but it would in fact be getting it's blocks from a normal eth1 node (e.g. via new head subscriptions).  Basically the proxy subscribes to new blocks on eth1 node A and then ships them to node B via `NewBlock` and `NewHead`.  This is cleaner than what I originally proposed since it doesn't require one to hack in the beaconchain side of the API to a eth1 node.  The only sort of tricky part is rebuilding the full block RLP needed for `NewBlock` messages from existing JSONRPC endpoints (IIRC existing RPCs don't give you enough data to reconstruct the block body of a block that has any ommers so you'd have to limit this to testing on a no-ommer testnet).",
        "created_at": "2021-03-31T16:27:11.670000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It'd be a kind of \"mock beacon node\" for testing the eth1 side of the API.",
        "created_at": "2021-03-31T16:27:51.521000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Happy to answer questions on the Prysm side for anyone building anything related to the merge in Go. We are working towards something like a public devnet soon",
        "created_at": "2021-03-31T16:28:47.328000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think that would be easy to do on top of the turbogeth API, its pretty modular... our RPC daemon has full access to the DB so it can construct whatever data structure it needs based on the latest block.\nand it supposed to be possible to use it as a dependency for the proxy. so as long as we have some specs I can help to organize this \"proxy\" and publish it somewhere available",
        "created_at": "2021-03-31T20:09:56.229000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Looking forward to this!",
        "created_at": "2021-03-31T20:10:56.962000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So, does it mean that it should basically work as in \u003c@425572898787426305\u003e‚Äôs document? I will re-read it tomorrow and look for more details",
        "created_at": "2021-03-31T20:26:25.349000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There's also the catalyst fork from https://hackmd.io/@prysmaticlabs/prysm-catalyst-interop which I just started looking at.  It looks to be implementing a slightly different protocol (https://hackmd.io/T9x2mMA4S7us8tJwEB3FDQ)",
        "created_at": "2021-03-31T20:35:03.831000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've been meaning to get more familiar with T-G so maybe this is the best chance yet for me to do so!",
        "created_at": "2021-03-31T20:36:01.817000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Happy to discuss that more in details with you. I spent some time a while ago to make sure that one can plug into the RPC or sync easily",
        "created_at": "2021-03-31T20:37:01.455000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Note the detailed API may differ there's many variations out there. 1.) old executable spec 2.) latest quick merge spec and some others. The general flow is similar. `insert_block`, `produce_block`. We'll be ironing out the details to align everyone in thursday's call",
        "created_at": "2021-03-31T20:38:04.702000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Like here: https://github.com/mandrigin/turbo-api-examples/tree/master/cmd/supply both custom RPC methods and custom sync based off turbogeth core",
        "created_at": "2021-03-31T20:39:01.397000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, what \u003c@!363800010518822915\u003e says is right. The existing prototypes work, but we're looking to align on an updated spec before going into a shared testnet",
        "created_at": "2021-03-31T20:39:30.177000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So that means that P2P responsibilities are move to eth2 node as well, right? eth1 is essentially a state provider/validator?",
        "created_at": "2021-03-31T20:41:36.113000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "tx pool P2P would still be done by the application node as I understand",
        "created_at": "2021-03-31T20:41:56.842000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Also state sync",
        "created_at": "2021-03-31T20:41:58.813000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "mempool and its associated p2p layer is still managed by the eth1 node",
        "created_at": "2021-03-31T20:42:00.576000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hmm, okay, isn‚Äôt that too messy to have 2 p2p stacks?",
        "created_at": "2021-03-31T20:42:38.008000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It is",
        "created_at": "2021-03-31T20:42:43.373000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The merge is ugly",
        "created_at": "2021-03-31T20:42:49.769000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We already are working on splitting p2p",
        "created_at": "2021-03-31T20:43:01.959000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We have some draft specs",
        "created_at": "2021-03-31T20:43:13.521000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Maybe we can extend the api somehow?",
        "created_at": "2021-03-31T20:43:20.912000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We're doing it this way so that we can stop bleeding a billion dollars a month sooner, and then we'll do subsequent cleanup forks/protocol upgrades in later stages",
        "created_at": "2021-03-31T20:43:21.892000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "counter-point: there's really not much conceptual overlap between the block and tx p2p in eth1 other than that they share devp2p as a transport layer",
        "created_at": "2021-03-31T20:43:53.136000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Fair; though realistically if the consensus layer is on libp2p we should just move everything to libp2p",
        "created_at": "2021-03-31T20:44:27.057000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I agree",
        "created_at": "2021-03-31T20:44:39.133000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "tx pool api fron p2p perspective isn‚Äôt that complicated too",
        "created_at": "2021-03-31T20:45:05.301000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But that's a longer-term concern; as I said above the merge optimizes for simplicity of the transition procedure and not total simplicity, it's the job of post-merge cleanup hard forks to achieve total simplicity",
        "created_at": "2021-03-31T20:45:08.825000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "An call and and a subsciption",
        "created_at": "2021-03-31T20:45:24.534000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That said, if there's people who want to implement a merger of the p2p layer and it's done by merge time then excellent!",
        "created_at": "2021-03-31T20:45:35.123000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I‚Äôll take a look at our work, on sentry splitting and see the protocol there",
        "created_at": "2021-03-31T20:46:06.951000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "actually having a API for providing txs that kind of mirrors how the merge API is a means to providing blocks might allow for more experimentation on that front",
        "created_at": "2021-03-31T20:46:39.998000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "actually i guess thats pretty easy to emulate, just turn off devp2p on a merge-API enabled eth1 node and feed it txs via `eth_sendRawTransaction`",
        "created_at": "2021-03-31T20:48:17.789000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The proposed merged specs are not complicated, let's align on that first before we take it further. And the p2p unification can very well be a later fork, instead of a waterfall of changes before it.",
        "created_at": "2021-03-31T20:48:52.802000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "True, delivering consensus change first and then we will see",
        "created_at": "2021-03-31T20:49:36.377000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ideally, the p2p changes can follow without hardfork. It's just embedding of the block we have to get right in consensus, and then improve on the p2p afterwards.",
        "created_at": "2021-03-31T20:50:46.951000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I just like libp2p much more, so was excited to get rid of devp2p ASAP üôÇ",
        "created_at": "2021-03-31T20:51:38.587000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But sure you don‚Äôt need a protocol change per se for that but there should be some point at ‚Äúno txs are gossiped on devp2p‚Äù",
        "created_at": "2021-03-31T20:52:37.589000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "after we can use the TG and other eth1 clients for variety in PoS-EVM testnets, you're very welcome to continue developing on the p2p layer. And I'm happy to help with that (worked on and reviewed a lot of the eth2 lib p2p code)",
        "created_at": "2021-03-31T20:52:53.858000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Maybe we could do some libp2p workshop call(s) during the scaling hackathon, after we have the Merge work done (implement those RPCs).",
        "created_at": "2021-03-31T20:54:23.621000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so all in all, so I'm exactly understood from that:\n- eth2 client does POS check, block gossip (send/receive), and work with eth1 client\n- eth1 client still does txpool gossip, block tx execution (received from eth2 client), state update, hash checks, JSON-RPC APIs for Dapps\n- \"smart proxy\" emulates eth2 but using current eth1 mainnet for that",
        "created_at": "2021-03-31T20:56:48.286000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The \"smart proxy\" is a very new idea, not familiar with it, the essentials are easier than that.",
        "created_at": "2021-03-31T20:58:48.726000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah, and also eth2 client uses eth1 client's API to get data to actually construct a new block for the beacon chain",
        "created_at": "2021-03-31T21:00:33.947000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right, the essentials are a few RPC methods (or different API format if we have to), and maybe a new opcode in the EVM to inform of beacon chain details (block roots, randao mix, state roots, TBD).",
        "created_at": "2021-03-31T21:01:44.530000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think expanding json-rpc should be fine, that allows a good mix of different implementations",
        "created_at": "2021-03-31T21:04:02.591000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "on the other hand, eth1 JSON-RPC is supposed to be public, so not sure we wanna reuse the same port for this kinda exchanges",
        "created_at": "2021-03-31T21:05:42.528000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Teku, Lighthouse and Prysm are all at a point where they can use the old RPC spec to keep Catalyst (the geth fork) in sync with the chain. The latest spec tweaks the beacon block format and the RPC spec may have improved (out of the loop with the exact details).\nIn the next week or two we need to coordinate on the Merge specs for the hackathon purposes. After that solidifies, eth1 clients can build against it, and Eth2 clients can swap their prototypes (e.g. add additional block type, instead of modifying the existing client).",
        "created_at": "2021-03-31T21:06:40.729000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "so you can, say, bind these APIs only to `localhost` when \"regular\" JSON-RPC is bound to `0.0.0.0` or whatever",
        "created_at": "2021-03-31T21:07:09.043000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, others have proposed similar things, to separate the API for security purposes. Something to discuss in the merge chat / call tomorrow.",
        "created_at": "2021-03-31T21:08:08.671000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "exciting times üòÑ",
        "created_at": "2021-03-31T21:08:38.937000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is _incredibly cool_ BTW.  I really need to start digging into turbo-geth.",
        "created_at": "2021-03-31T21:27:10.347000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "thanks! it still powers this bot btw https://twitter.com/turbobot9",
        "created_at": "2021-03-31T21:27:44.782000+00:00",
        "attachments": null
    },
    {
        "author": "mandrigin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "but I need to update it to Berlin soon, didn't keep it up to date",
        "created_at": "2021-03-31T21:28:09.807000+00:00",
        "attachments": null
    }
]