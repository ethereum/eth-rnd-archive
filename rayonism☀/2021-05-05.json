[
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This sounds weird to me. As long as teku and prysm are building the same beacon chain fork there should not be any reorgs on execution side unless there are missed slots. Which I assume was not the case",
        "created_at": "2021-05-05T06:58:24.706000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Morning!, indeed you're right, but the problem is that I wanted to debug a non-smooth situation. While Teku and Prysm are building the same chain there's no problem at all. The issue here is that I wanted to debug a problem that prysm cannot verify the signature of a block when it includes  transactions. This is the actual underlying issue, but when running with one eth1 endpoint, lots of ghosts problems appeared that gave the impression that the actual bug was something else. For example I'd send the transaction, it would be always be seen first by Teku, that would propose a block, and then, over a minute later, prysm would try to include the same transaction in a different block. I spent hours trying to find where this delay was coming from, tricking prysm into proposing with that transaction as soon as it appears, but actually this apparent delay wasn't really there, it was due to a fork in eth1 caused by the separation of the eth2 chains: the transaction would stay in the mempool of one of the forks and then would be later included in the fork that prysm was following. As soon as I started running with separate nodes, it went back to being clear that the problem actually lies in the computation of the HTR of the block.",
        "created_at": "2021-05-05T09:22:20.622000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So the lesson learned here is that in order to debug anything we need to be running each eth2 node with its own eth1 node.",
        "created_at": "2021-05-05T09:22:52.799000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/protolambda/eth2.0-spec-tests/releases/tag/v1.1.0-alpha.4-pre1\n\nI made an unofficial pre release with just the merge SSZ test vectors.\n\nWe're working on more complete beacon-processing Merge test coverage, see https://github.com/ethereum/eth2.0-specs/pull/2380\nI think we'll make an alpha release this week with the latest Altair work, and if everything is going well, that includes those merge test vectors",
        "created_at": "2021-05-05T09:49:57.472000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah those won't work for my case here ðŸ™‚ blocks without transactions are correctly encoded... I need test vectors for transactions",
        "created_at": "2021-05-05T09:56:21.435000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "These SSZ tests have those",
        "created_at": "2021-05-05T09:56:46.134000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It randomizes the SSZ contents in many different ways",
        "created_at": "2021-05-05T09:57:09.549000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The minimal config variant especially",
        "created_at": "2021-05-05T09:57:33.273000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I read wrong then, thought they all had the empty transaction list",
        "created_at": "2021-05-05T09:58:29.927000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/protolambda/eth2.0-spec-tests/tree/altair-alpha4-pre/tests/minimal/merge/ssz_static",
        "created_at": "2021-05-05T09:59:12.996000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah nice these are different",
        "created_at": "2021-05-05T10:00:18.676000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The tests were available in a PR to specs for a week already, but made a pre-release so devs can start integrating them earlier without generating the vectors themselves",
        "created_at": "2021-05-05T10:00:53.211000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It essentially covers the min/max value/max length/random/chaotic contents. Serialization and hash-tree-root. Hope that uncovers bugs like that one in Prysm",
        "created_at": "2021-05-05T10:03:01.979000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I see. It makes sense to me now, thanks for the explanation",
        "created_at": "2021-05-05T13:09:40.066000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hi, has anyone tested Teku with Ninbus or lighthouse sending transactions? Or are those spec tests passing on Teku? I can now send transactions prysm --\u003e prysm without trouble and I have no indication if the signature verification is an issue on prysm or Teku ðŸ˜¦",
        "created_at": "2021-05-05T19:49:57.249000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!363800010518822915\u003e could the above be caused by that ExecutionPayload thing, you said it would fail the SSZ test with non-empty transactions?",
        "created_at": "2021-05-05T19:53:10.633000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "we're trying to get the merge spec tests to pass and indeed execution payloads with transactions in them fail the spec tests for us",
        "created_at": "2021-05-05T19:53:44.364000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "working on it",
        "created_at": "2021-05-05T19:53:45.862000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes. Very likely. We'll have a resolution soon",
        "created_at": "2021-05-05T19:58:53.897000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ahh you already have the tests",
        "created_at": "2021-05-05T20:00:34.849000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "great",
        "created_at": "2021-05-05T20:00:39.290000+00:00",
        "attachments": null
    },
    {
        "author": "raulj",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yes merge spec tests are integrated into our spectest suite now",
        "created_at": "2021-05-05T20:00:50.265000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am planning to do another spec-test pre-release today with phase0 tests ported to Merge spec. (See open PR https://github.com/ethereum/eth2.0-specs/pull/2380 )\nAnd then there's another PR that works on execution-payload processing testing, but that will take some more time.",
        "created_at": "2021-05-05T20:03:46.039000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://github.com/protolambda/eth2.0-spec-tests/releases/tag/v1.1.0-alpha.4-pre2\nNew unofficial spec tests pre-release. Phase0 transition tests ported to Merge spec (+ same ssz tests as in the other pre-release earlier today).",
        "created_at": "2021-05-05T21:50:52.387000+00:00",
        "attachments": null
    }
]