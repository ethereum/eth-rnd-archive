[
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cdannyryan\u003e Yeah, initial devnet won’t do a transition so it’s just a matter of slotting execution-layer funciton calls into phase 0 specs. This looks extremely similar when done in a post-altair context.\nagreed that it’s probably not worth spending *too* much time on fork mechanics until it’s rebased on altair. High value is giving something for execution-layer to work against",
        "created_at": "2021-04-07T01:01:36.898000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cdannyryan\u003e High value in the immediate term*",
        "created_at": "2021-04-07T01:05:29.280000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "An initial merge spec for Rayonism is available now, https://notes.ethereum.org/@n0ble/rayonism-the-merge-spec\n*Note:* We will set a certain commit hash for the beacon chain spec this week, now it's just a link to the most recent version in eth2.0-specs repo",
        "created_at": "2021-04-07T14:07:10.254000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Reminder: call in 4 hours from now",
        "created_at": "2021-04-07T15:59:31.793000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yay!!",
        "created_at": "2021-04-07T16:23:13.466000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I added a couple commments; it looks good!",
        "created_at": "2021-04-07T16:23:19.389000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "`    is_total_difficulty_reached = block.total_difficulty \u003e= TRANSITION_TOTAL_DIFFICULTY`",
        "created_at": "2021-04-07T16:24:22.414000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Do we want to also check `block.parent.total_difficulty \u003c TRANSITION_TOTAL_DIFFICULTY` ?",
        "created_at": "2021-04-07T16:24:36.236000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ok I understand the fork choice now; it *is* requiring the first embedded block to point to a PoW block that's not inserted into the beacon chain",
        "created_at": "2021-04-07T16:27:14.600000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yay",
        "created_at": "2021-04-07T16:27:15.722000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh also, do we want to adjust total difficulty to make it be dynamically calculated based on time instead of a constant",
        "created_at": "2021-04-07T16:27:39.037000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "eg. my suggestion that we set `TRANSITION_PREP_SLOT` and then dynamically set `TRANSITION_TOTAL_DIFFICULTY` to be `B.total_difficulty + B.difficulty * (86400 * 2 // 13)` where `B = get_pow_block(get_post_state(get_block_at_slot(TRANSITION_PREP_SLOT)).eth1data.block_hash)`",
        "created_at": "2021-04-07T16:30:18.494000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Another option is to make the prep trigger be an eth1-side block height; less calculation that way",
        "created_at": "2021-04-07T16:31:51.285000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "though that's more vulnerable to attack",
        "created_at": "2021-04-07T16:32:07.039000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yes, and the parent may satisfy transition conditions as well, beacon node picks the most recent block",
        "created_at": "2021-04-07T16:33:36.443000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The initial devnet is post-merge from the start, so we can get eth2-eth1 client integration started, and not block eth1 development on the merge. The transition part can follow soon after, but not part of this first rayonism iteration.",
        "created_at": "2021-04-07T16:34:44.666000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We definitely do! This is what I am going to work on once we settle down with the initial spec for Rayonism",
        "created_at": "2021-04-07T16:35:31+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "My preference is to have a merge trigger on beacon chain side and handle all the transition logic there as well (except for adding PoW block info endpoints to the RPC if it would be required). I also see this approach as more flexible one",
        "created_at": "2021-04-07T16:38:40.440000+00:00",
        "attachments": []
    },
    {
        "author": "dkdkdkdkdkdk",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "is it explained anywhere when the new consensus_* methods are called?",
        "created_at": "2021-04-07T16:40:42.448000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Should `consensus_newBlock` first check that `parentHash` exists as part of the chain?",
        "created_at": "2021-04-07T16:40:55.487000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(I guess that could be a \"sub step\" of 3)",
        "created_at": "2021-04-07T16:42:10.648000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I see the confusion. It would be better to explicitly add the pre-condition or block tree checks step",
        "created_at": "2021-04-07T16:42:53.988000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is a good question. As some of the methods are not that obvious and `setHead`, `finaliseBlock` are not gonna be a part of the beacon chain spec, at least for now. I'll add a section describing these methods from consensus standpoint, i.e. when should they be called.",
        "created_at": "2021-04-07T16:45:33.214000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!425572898787426305\u003e Been reading through the doc, looks really good! It should probably define a chain_id/network id in the discovery section, or should there be a second spec for the actual testnet?",
        "created_at": "2021-04-07T18:16:16.414000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!360491619402776577\u003e yes, we've been discussing the option of discovery, but have not fully specified it yet. We'll focus on it later, as it's less of a priority. The way it works now in eth2 is that each ENR has a field with `eth2` as key, and standard Eth2 fork digest + directional fork info (next version, next fork epoch) to make it clear what a node is interested in. I imagine we have something similar with eth1, and chainID/networkID, Felix probably has a vision about future discv5 usage in eth1.",
        "created_at": "2021-04-07T18:20:09.961000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks Marius! I would keep the spec clean and specify particular network/chain parameters in a separate doc, right as you have mentioned it.",
        "created_at": "2021-04-07T19:05:19.260000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "https://ethereumfoundation.zoom.us/j/94183073707\n\nCall starts in 5 min",
        "created_at": "2021-04-07T19:55:12.082000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Meeting requires a login with zoom, is that intended?",
        "created_at": "2021-04-07T19:59:54.447000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "you need a zoom account, but it's open to join.",
        "created_at": "2021-04-07T20:00:13.811000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Will there be a recording?",
        "created_at": "2021-04-07T20:01:01.529000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cSouptacular\u003e Zoom accounts are free afaik",
        "created_at": "2021-04-07T20:01:16.396000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's not about paying for that...",
        "created_at": "2021-04-07T20:01:39.235000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'll take notes, no recording. Zoom is indeed free. Had to pick this, or a waiting room as option when I created this meeting. Apologies for the inconvenience",
        "created_at": "2021-04-07T20:01:47.782000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Call notes: https://notes.ethereum.org/W-abMNqMTtexfiLwY1Y7rQ",
        "created_at": "2021-04-07T21:45:27.383000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Random thought, I forgot to bring this up earlier. On the eth2 side, would it be wise to have some sort of quick spec tests before devnet?\n\nIt will suck to experience consensus failure (i.e. client bug) and to be only discovered during the the dev net",
        "created_at": "2021-04-07T22:21:12.849000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yea good point, we'll try to do something like that, although I don't think it will live in the eth2 specs repo, we can definitely do some block-processing tests.",
        "created_at": "2021-04-07T22:22:24.950000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That said, the first net will be a devnet, and very short-lived. If we fail we can learn and do the next one better, part of the process.",
        "created_at": "2021-04-07T22:23:17.672000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think at the minimal, we should make sure the ssz operations of the extended /new containers are sound across clients. I'm less worried on the state transition",
        "created_at": "2021-04-07T22:30:45.114000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cadiasg\u003e @hwwang and I are planning to add tests to the https://github.com/adiasg/eth2-quick-merge-poc over the next few days\nThese can be used as standardized tests on both eth1 \u0026 eth2 side for all implementations! (re @ef_general_chat_bridge_bot: \u003cterence\u003e Random thought, I forgot to bring this up earlier. On the eth2 side, would it be wise to have some sort of quick spec tests before devnet?\nIt will suck to experience consensus failure (i.e. client bug) and to be only discovered during the the dev net)",
        "created_at": "2021-04-07T23:15:49.216000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003cadiasg\u003e There are also a few edge cases for the transition process which are tricky\nEg, the first eth2 block that includes an eth1 block gets reorganized so that there’s no eth1 block included in the new canonical chain (re @ef_general_chat_bridge_bot: \u003cterence\u003e I think at the minimal, we should make sure the ssz operations of the extended /new containers are sound across clients. I'm less worried on the state transition)",
        "created_at": "2021-04-07T23:19:05.561000+00:00",
        "attachments": []
    }
]