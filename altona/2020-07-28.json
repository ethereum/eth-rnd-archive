[
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!449019668296892420\u003e Someone is running a funky nimbus node on altona, that doesn't support any RPC protocols. \nOn this address: 110.174.142.112:33934 with this peer-id: 16Uiu2HAmVSxdZw2ZdE6xBTwYNwYwu8VgadRvKT9VmaaFPkWyfo97\n\nKnow what's going on here?",
        "created_at": "2020-07-28T08:30:36.398000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Actually, the identify says it doesn't support protocols, but when asking it for blocks, it returns only a single block",
        "created_at": "2020-07-28T08:31:18.445000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "afair we're not publishing the protocols in the identify thingie - apparently it's optional (ping \u003c@!453997683431178243\u003e )",
        "created_at": "2020-07-28T08:32:49.596000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah sure, identify is just a debugging tool. But its responding with a single block, that lazy node....",
        "created_at": "2020-07-28T08:33:20.143000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "single block response sounds curious though",
        "created_at": "2020-07-28T08:33:22.343000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "what are you asking for?",
        "created_at": "2020-07-28T08:33:31.618000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "64 blocks",
        "created_at": "2020-07-28T08:33:37.022000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "oh that is interesting",
        "created_at": "2020-07-28T08:33:38.590000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "we have faced the same issue too...",
        "created_at": "2020-07-28T08:33:46.626000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "range request?",
        "created_at": "2020-07-28T08:33:51.802000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yep",
        "created_at": "2020-07-28T08:33:55.450000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeap",
        "created_at": "2020-07-28T08:33:56.580000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "we would always get 1 block instead of 64",
        "created_at": "2020-07-28T08:34:07.403000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "yeah, this nimbus node just doesn't want to do db lookups.. it's just chillin",
        "created_at": "2020-07-28T08:34:35.126000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think its a boot-node",
        "created_at": "2020-07-28T08:38:13.637000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "must be our `if node != nimbus` check in action",
        "created_at": "2020-07-28T08:38:17.430000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "let me take a look, we should generally be pretty generous",
        "created_at": "2020-07-28T08:38:52.453000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah yes, of course. I forgot to send `self = nimbus` to it",
        "created_at": "2020-07-28T08:39:00.576000+00:00",
        "attachments": null
    },
    {
        "author": "cheatfate",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Returning 1 block when you requesting 64 is absolutely legal according to spec, the only problem that this 1 block should be in range of blocksByRange request. I saw this many times and this behavior is not what `nimbus` can do.",
        "created_at": "2020-07-28T08:52:42.742000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!614867244312166413\u003e well, we don't have any code that intentionally limits to 1 block, but it could very well be a bug",
        "created_at": "2020-07-28T08:56:16.919000+00:00",
        "attachments": null
    },
    {
        "author": "agemanning",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It may be legal, but its not friendly ðŸ˜¦",
        "created_at": "2020-07-28T09:11:48.593000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "while legal it does slowdown sync for new clients as they will assume the other 63 spots were skipped slots rather than the node just returning 1 block. On the plus side this has helped us in assessing peers for scoring who are giving us incorrect block ranges",
        "created_at": "2020-07-28T09:20:17.339000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "otoh there are valid reasons to send less than the requested range as well, which means that leaning peer scoring too much on it might backfire",
        "created_at": "2020-07-28T09:24:10.977000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "ah true, I guess depends on how often the peer sends us less than the requested range",
        "created_at": "2020-07-28T09:35:40.071000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "well, kind of - ie the way the spec is written, there is no built-in assumption that the slot is empty when the peer doesn't send it - that's simply not something one can base a rule on",
        "created_at": "2020-07-28T09:58:47.176000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "for example, it's fair to measure the number of useful blocks a peer sent as a way to measure their quality, but beyond that, you're venturing into heuristics with corner cases/ non-spec territory",
        "created_at": "2020-07-28T09:59:53.875000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm not saying that it's friendly to not send the blocks (and nimbus should be sending all of them for reasonably sized requests, ie a few epochs - we're investigating), but..",
        "created_at": "2020-07-28T10:01:38.888000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "there are tradeoffs (your own sync status, load on the node, racy situations etc)",
        "created_at": "2020-07-28T10:02:17.296000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "if a peer consistently sends us less blocks then there are in actuality a range it does make sense to prefer other peers who are reliably able to send the requested blocks over it.",
        "created_at": "2020-07-28T10:15:19.272000+00:00",
        "attachments": null
    }
]