[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@689161464829050960\u003e What are your thoughts on \u003c@415548822983278593\u003e's suggestion to rework 3074?  I'm starting to come around to the argument a bit...",
        "created_at": "2021-03-12T04:36:01.149000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I love it.",
        "created_at": "2021-03-12T04:36:19.010000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is essentially an \"approve\" transaction for the entire blockchain (not just ERC-20s).",
        "created_at": "2021-03-12T04:36:32.493000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\"This is my representative, they can do whatever they want (or whatever they are programmed to do) as me\".",
        "created_at": "2021-03-12T04:36:49.459000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah! Sorta like dai's `permit(...)`",
        "created_at": "2021-03-12T04:36:51.005000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Interestingly, you could could create contract wallets this way...",
        "created_at": "2021-03-12T04:37:20.851000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Couple outstanding points I'm undecided on though",
        "created_at": "2021-03-12T04:37:43.333000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Create a one-time use address which gives a replayable approval to a particular contract.",
        "created_at": "2021-03-12T04:37:51.750000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yep, exactly. \u003c@!415548822983278593\u003e has really been exploring that space",
        "created_at": "2021-03-12T04:38:14.778000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The address would have no known private key associated with it, so the contract would be the sole owner of the assets.  However, the account would *appear* to be an EOA.",
        "created_at": "2021-03-12T04:38:41.051000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Biggest one is that I kinda want to reserve a stack argument for \"value from sponsee\"",
        "created_at": "2021-03-12T04:38:50.369000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Exactly. You can trustlessly transfer control of an EOA that way.",
        "created_at": "2021-03-12T04:39:12.911000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It's super elegant.",
        "created_at": "2021-03-12T04:39:20.130000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Input argument to the `AUTHORIZEDCALL`?  Why do you think this is necessary?",
        "created_at": "2021-03-12T04:39:34.734000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would like to be able to deduct funds from the sponsee's account",
        "created_at": "2021-03-12T04:39:53.662000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But you can't without a new transaction type",
        "created_at": "2021-03-12T04:40:02.310000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It already has a `value` input.",
        "created_at": "2021-03-12T04:40:19.034000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That's value from the invoker though",
        "created_at": "2021-03-12T04:40:27.023000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Just like a normal call",
        "created_at": "2021-03-12T04:40:31.502000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ü§î",
        "created_at": "2021-03-12T04:41:15.916000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess I assumed it was from the sponsee!",
        "created_at": "2021-03-12T04:41:21.748000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Unfortunately not üò¶",
        "created_at": "2021-03-12T04:41:27.703000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In fact, I think it *should* be from the sponsee.",
        "created_at": "2021-03-12T04:41:30.426000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, so does everyone *sigh*",
        "created_at": "2021-03-12T04:41:43.378000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If the invoker wants to send money to the sponsee first, it can do that via regular `CALL`.",
        "created_at": "2021-03-12T04:41:44.333000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You just can't, without changing the mempool rules",
        "created_at": "2021-03-12T04:42:23.815000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm, this is the issue with having an account's balance change without a transaction signed by the account holder?",
        "created_at": "2021-03-12T04:42:49.666000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`value` doesn't go to the sponsee though, it goes along with the `AUTHORIZEDCALL`",
        "created_at": "2021-03-12T04:42:51.181000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, you could invalidate a bunch of txs from `A` if `A` is sponsored by `B`",
        "created_at": "2021-03-12T04:43:17.263000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Even worse, you could invalidate transactions from dozens (or more) accounts with a single transactions from `B`.",
        "created_at": "2021-03-12T04:43:46.115000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Can we mitigate this by having `AUTHORIZEDCALL` cost ~21,000 gas?",
        "created_at": "2021-03-12T04:44:25.255000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(as a starting point for discussion, maybe lower once we get into the details)",
        "created_at": "2021-03-12T04:44:36.908000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Huh. So the same idea as commit_gas from AA?",
        "created_at": "2021-03-12T04:44:51.256000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Currently, you can invalidate all transactions in the mempool from account A at a cost of 21,000 gas.",
        "created_at": "2021-03-12T04:45:26.559000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'll think about that. It certainly sounds plausible...",
        "created_at": "2021-03-12T04:45:33.401000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It seems like if we keep that invariant, then we at least aren't *increasing* the DoS risk (which I believe is the primary concern).",
        "created_at": "2021-03-12T04:45:49.835000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yep",
        "created_at": "2021-03-12T04:45:54.413000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It does kinda hurt the case for batched transactions though",
        "created_at": "2021-03-12T04:46:18.020000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If we agree on that, we can then discuss how much of the 21,000 gas is \"DoS protection\" and how much is stuff like \"bytes in a block\".",
        "created_at": "2021-03-12T04:46:23.408000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can still batch, you just don't get a gas savings.  I have never been a fan of transaction batching for gas savings though since you are still consuming just as much resources in a batch vs individually.",
        "created_at": "2021-03-12T04:46:52.989000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "With perhaps a minor exception due to calldata compression that a contract may be able to achieve.",
        "created_at": "2021-03-12T04:47:10.947000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My alternative thinking was to introduce a couple new transaction types anyway:\n\n - expiring transactions\n - account access lists",
        "created_at": "2021-03-12T04:47:49.398000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And then use the new stack element, or introduce an `AUTHORIZEDTAKE` opcode.",
        "created_at": "2021-03-12T04:48:23.795000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We still have to validate a signature, warm two accounts, update two balance, etc. so 21,000 gas seems like an appropriate gas cost for `AUTHORIZEDCALL` anyway.",
        "created_at": "2021-03-12T04:48:31.159000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That's only true if you're sending value though. If you aren't, it should be much cheaper, no?",
        "created_at": "2021-03-12T04:49:02.839000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You don't have to update balances, so maybe we can have the gas cost vary depending on whether value is set or not?",
        "created_at": "2021-03-12T04:49:27.985000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah... hm...",
        "created_at": "2021-03-12T04:49:39.875000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I still almost prefer the `authorizedtake` approach, just because `authorizedcall` is then, well, just a call.",
        "created_at": "2021-03-12T04:50:17.017000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, but IMO `authorizedcall` should act as though it was called directly by the signer.",
        "created_at": "2021-03-12T04:50:38.841000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Which means `value` is pulled from the signer.",
        "created_at": "2021-03-12T04:50:46.831000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And `SENDER` is the signer.",
        "created_at": "2021-03-12T04:50:59.245000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`SENDER` is the signer, no?",
        "created_at": "2021-03-12T04:51:17.548000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think it will be weird if `msg.sender.balance` doesn't refer to the balance of the account that `msg.value` is from.",
        "created_at": "2021-03-12T04:51:58.654000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It would introduce a gotcha that future contract authors would have to deal with.",
        "created_at": "2021-03-12T04:52:19.769000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What use case would require checking the sender's balance?",
        "created_at": "2021-03-12T04:52:36.451000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Seems like a weird pattern",
        "created_at": "2021-03-12T04:52:46.874000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm sure some ponzi scheme uses it for something.  üòõ",
        "created_at": "2021-03-12T04:52:49.360000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\"send 100% of your ether, and we'll send back 200% of what you have left!\"",
        "created_at": "2021-03-12T04:53:13.962000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You get a lot more flexibility with `value` coming from the invoker though, no? Assuming that we later have `authorizedtake`.",
        "created_at": "2021-03-12T04:54:18.845000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the opposite?",
        "created_at": "2021-03-12T04:54:32.284000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The invoker already can send ETH to the sponsee and then execute an authorized call if you want.",
        "created_at": "2021-03-12T04:54:51.639000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Which is why you need an *additional* opcode (`authorizedtake`) to fulfill the same set of possible behaviors.",
        "created_at": "2021-03-12T04:56:40.468000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In the contract wallet case, the assets would all be held by the sponsee, not the invoker I would assume.",
        "created_at": "2021-03-12T04:57:11.712000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "True",
        "created_at": "2021-03-12T04:57:30.637000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(worth noting, AA is still desirable because it allows the contract to pay for gas)",
        "created_at": "2021-03-12T04:57:40.509000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah, that's a good point. An AA contract can't check an EOAs balance before `PAYGAS`",
        "created_at": "2021-03-12T04:58:22.992000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But a user could deposit ETH into the AA contract ahead of time.",
        "created_at": "2021-03-12T04:58:53.737000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Would an AA contract be able to PAYGAS via authorizedcall?",
        "created_at": "2021-03-12T04:58:57.574000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It would check the signature and all that, then `PAYGAS`, then `AUTHORIZE` and `AUTHORIZECALL`.",
        "created_at": "2021-03-12T04:59:33.341000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Buuut the user could deposit funds in the AA contract, then the AA contract could send them after `PAYGAS`, so that would be safe.",
        "created_at": "2021-03-12T05:00:00.312000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If I was combining AA and `AUTHORIZEDCALL` I would want to be able to PAYGAS with funds from the EOA directly.",
        "created_at": "2021-03-12T05:00:27.812000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hm, how would that work?",
        "created_at": "2021-03-12T05:00:50.019000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Otherwise we are back where we are now with contract wallets, where you have to \"fund\" the caller as a separate transaction essentially.",
        "created_at": "2021-03-12T05:00:52.008000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "AA contracts would let you do transactions with Dai without a sponsor, at least.",
        "created_at": "2021-03-12T05:01:23.510000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(Or any ERC-20)",
        "created_at": "2021-03-12T05:01:32.319000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "How?",
        "created_at": "2021-03-12T05:01:37.676000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(the short version, enough to remind me since I probably already know)",
        "created_at": "2021-03-12T05:01:48.592000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Welllll, either the token contract is the AA contract, or you have to deposit your ERC-20s into the AA contract.\n\nThere may have been a better scheme, but it's been awhile for me too ^^;;",
        "created_at": "2021-03-12T05:03:15.848000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hm interesting, I think I like Micah‚Äòs idea. Have `value` be paid from the EOA, but make it costly if not set to `0`.",
        "created_at": "2021-03-12T10:18:18.324000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "btw, just looked at the `CALL` gas cost and a non-zero value transfer is already priced at `9000` today. So maybe increasing that cost to `21000` for `AUTHORIZEDCALL` would not be all that unreasonable...",
        "created_at": "2021-03-12T14:23:24.509000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The one thing it does break though is the invariant that miners can independently select txs to include in a block. Now these can invalidate each other (without any indication from the outside)",
        "created_at": "2021-03-12T14:33:33.919000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "While I generally think that‚Äôs okay, it might just be pushing the amount of untested security assumptions for this EIP to a level that‚Äôs too much for London, given the short timeline here.",
        "created_at": "2021-03-12T14:34:31.593000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "One alternative would be to just force value to be 0 for now and lift that with the next hard fork. Not sure we would need the alternative option to pass in value from the invoker though, given that EOAs with ETH can always just send a tx directly. So maybe just not having a way to pass in ETH for now might be okay...",
        "created_at": "2021-03-12T14:36:33.287000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I like the idea of just saying that the `value` must be `0` for now.",
        "created_at": "2021-03-12T14:48:03.240000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It gets us most of the features in London, and we can continue to discuss (with a wider audience) how `value` should be handled.",
        "created_at": "2021-03-12T14:48:30.138000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Spitballing a bit: What about `AUTHORIZEDDELEGATECALL` instead?  üò¨",
        "created_at": "2021-03-12T14:48:56.469000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i'm not a big fan of having a noop argument for something that *may* happen in the future",
        "created_at": "2021-03-12T15:07:08.924000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The idea is that it would *definitely change* in Shanghai, this would just allow us to delay the \"hard decision\" of how to handle `value` until after London.",
        "created_at": "2021-03-12T15:51:22.879000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Why would it ‚Äúdefinitely change‚Äù?",
        "created_at": "2021-03-12T16:22:46.474000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Perhaps definitely is a strong word.  My point is that one of the two uses will be chosen eventually, it isn't just \"reserved space for unknown future thing\".",
        "created_at": "2021-03-12T17:00:29.086000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We can hit London with `value==0` as a requirement, then in Shanghai make use of it since that is likely to be the biggest point of contention and delay.",
        "created_at": "2021-03-12T17:01:05.803000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No need to hold up the entire feature because there is uncertainty around one part of the feature that isn't strictly required.",
        "created_at": "2021-03-12T17:01:21.543000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "my point is that the `value==0` restriction may always exist and then it would be a `noop` argument for something that *may* happen in the future?",
        "created_at": "2021-03-12T18:12:49.817000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would agree with you if we had the ability to ever deprecate anything in the EVM.",
        "created_at": "2021-03-12T18:22:12.627000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As it is, if we launch without the parameter then in Shanghai or later want to add `value` (which we almost certainly do), we would have to use a new opcode.",
        "created_at": "2021-03-12T18:22:55.721000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "that sounds great?",
        "created_at": "2021-03-12T18:23:06.868000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`AUTHORIZETAKE`",
        "created_at": "2021-03-12T18:23:12.487000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Opcodes are a limited resource.",
        "created_at": "2021-03-12T18:23:20.178000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "meh",
        "created_at": "2021-03-12T18:23:27.685000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No, I mean like `AUTHORIZEDCALL2` or `AUTHORIZEDWITHVALUECALL`.",
        "created_at": "2021-03-12T18:23:52.579000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if i thought there was a reasonable chance of taking sponsee value then maybe i'd be on board, but i don't see it happening in the near future",
        "created_at": "2021-03-12T18:24:31.798000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Because of the invalidation issue?",
        "created_at": "2021-03-12T18:24:52.934000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yep, that's a fundamental invariant",
        "created_at": "2021-03-12T18:25:03.457000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do you not think that setting an appropriately high gas cost is sufficient mitigation?",
        "created_at": "2021-03-12T18:25:12.642000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it may mitigate ddos, but it's not clear what the future impacts are",
        "created_at": "2021-03-12T18:25:47.184000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would want a more compelling argument than \"maybe something else will benefit from the invariant in the future\".",
        "created_at": "2021-03-12T18:26:21.706000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(though, doesn't have to be much more)",
        "created_at": "2021-03-12T18:26:34.970000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "you could possibly grief MEV bots by submitting txs that look like they will move a market, but invalidate it with another tx that transfers all eth out of the account",
        "created_at": "2021-03-12T18:27:41.723000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i'm guessing there are more things of that format that we may care about more than MEV bots",
        "created_at": "2021-03-12T18:28:02.885000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wouldn't work against current MEV bots since they always run at the head of the block.",
        "created_at": "2021-03-12T18:28:40.382000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "only ones with miner relationships",
        "created_at": "2021-03-12T18:29:00.357000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Or any that win the PGA.",
        "created_at": "2021-03-12T18:29:23.782000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "GPA?",
        "created_at": "2021-03-12T18:29:37.387000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can already invalidate all of an account's transactions via RBF, so there shouldn't be any particularly strong invariants around this.",
        "created_at": "2021-03-12T18:30:47.187000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would love to give you an extra 3-6 months to come up with some good example scenarios.  üòâ  I just don't want to delay all of the EIP while we think hard on the subject.",
        "created_at": "2021-03-12T18:31:23.830000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i think this is exactly why we shouldn't worry about it at all üôÇ",
        "created_at": "2021-03-12T18:31:58.096000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And I don't want to launch with the weird \"invoker pays\" behavior (and possibly a need for `AUTHORIZEDTAKE`) just because we didn't have time to vet \"sender pays\" thoroughly.",
        "created_at": "2021-03-12T18:32:37.751000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this is much more in line with `CALL` though",
        "created_at": "2021-03-12T18:32:50.314000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I just want to comment, Micah, you're an absolute machine for reviewing EIPs.",
        "created_at": "2021-03-12T18:35:35.956000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`2AUTHORIZED2CALL`",
        "created_at": "2021-03-12T18:36:29.456000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1. Launch with sender pays in London.\n2. Launch with invoker pays in London.\n3. Launch with `reqeire(value==0)` in London.\n1a. Realize there was a scenario we didn't fully consider and now we are stuck with more tech debt.\n1b. Get lucky and realize sender pays is good.\n2a. Realize sender pays is what we really wanted, and launch `AUTHORIZEDCALL2`.\n2b. Get lucky and find an issue with sender pays after London, before Shanghai.\n3a. Remove constraint is Shanghai with confidence in sender pays.\n3b. Remove constraint in Shanghai glad we waited to think harder.",
        "created_at": "2021-03-12T18:37:16.631000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We're literally on a zoom call talking about this.",
        "created_at": "2021-03-12T18:37:38.209000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wanna join?",
        "created_at": "2021-03-12T18:37:42.003000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm supposed to be sleeping.",
        "created_at": "2021-03-12T18:38:22.608000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "sorry to upset you so late",
        "created_at": "2021-03-12T18:38:37.666000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Construction starts on the floor above me in 7.5 hours.  üòñ",
        "created_at": "2021-03-12T18:38:42.691000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Heh, I was already up too late before you got here.  üòú",
        "created_at": "2021-03-12T18:39:04.993000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So I think the _safest_ option is to require `value == 0` for now.",
        "created_at": "2021-03-12T18:39:46.965000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This came up in the last EIPIP call.  Turns out, being a machine is unsustainable.  üòñ",
        "created_at": "2021-03-12T18:40:43.481000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At least, for now...",
        "created_at": "2021-03-12T18:40:49.683000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Go sleep üò†",
        "created_at": "2021-03-12T18:41:20.582000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "What's New in EIP-3074\n=================\n\nThese are the options for `value`:\n\n1. Value from sponsee\n2. Value from invoker\n3. Undecided (require `value == 0`)\n4. Have `valueFromInvoker` and `valueFromSponsee`.\n\nWe've settled on (2), and not without a lot of debate. Our thinking is that sending value from the invoker _has_ definite use cases, and is easy to implement, so we go with that for London. Adding an `AUTHORIZEDTAKE` opcode is harder, and can be added down the road.\n\n---\n\nWe've agreed to ban self-sponsoring for London. It blocks what we believe to be an uncommon use-case, but also means we don't have to reason about an entire class of possible security issues in contracts.\n\nIf someone, down the road, makes the case for allowing self-sponsoring and does the work to prove it is safe, removing the restriction should be trivial.",
        "created_at": "2021-03-12T19:35:29.054000+00:00",
        "attachments": []
    }
]