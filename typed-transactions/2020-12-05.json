[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "A single byte with a value less than 55 doesn't get a length prefix IIRC.",
        "created_at": "2020-12-05T02:10:39.588000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "However, the following transaction would get a length prefix, which would be in a different location between B and C.",
        "created_at": "2020-12-05T02:11:32.345000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can have a list with one byte in it and one byte, is that where the difference comes from?",
        "created_at": "2020-12-05T02:11:37.950000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`type || length || payload` vs `length || type || payload`",
        "created_at": "2020-12-05T02:12:48.350000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have it as the first right now",
        "created_at": "2020-12-05T02:14:03.862000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So you have C then it sounds like.",
        "created_at": "2020-12-05T02:14:18.988000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yup",
        "created_at": "2020-12-05T02:14:23.225000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "```py\n# A\ntransaction1 = rlp_encode([nonce1, ...])\ntransaction2 = Bytes.concat(1, rlp_encode([chainId2, nonce2, ...]))\ntransaction3 = rlp_encode([nonce3, ...])\ntransaction4 = Bytes.concat(1, rlp_encode([chainId4, nonce4, ...]))\ntransactionList = rlp_encode([transaction1, transaction2, transaction3, transaction4]) \n\n# B\nrlp([\n  [nonce1, ...],\n  Bytes.concat([1], rlp([chainId2, nonce2, ...]))\n  [nonce3, ...],\n  Bytes.concat([1], rlp([chainId4, nonce4, ...])),\n]) \n\n#C\nrlp([\n  [nonce1, ...],\n  1,\n  rlp([chainId2, nonce2, ...]),\n  [nonce3, ...],\n  1,\n  rlp([chainId4, nonce4, ...]),\n)] \n```",
        "created_at": "2020-12-05T02:16:04.928000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm surprised C is what naturally fell out for you \u003c@213672586264051717\u003e.  Any idea why?  Do you find it the most ergonomic?",
        "created_at": "2020-12-05T02:18:23.302000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It didn't feel that natural tbh haha. That's why I reached out with this message. I didn't realize when I was implementing it that it is valid rlp that represents a structure like C. I thought it was some hodge-podge of rlp and a random byte thrown in there.",
        "created_at": "2020-12-05T02:21:03.704000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I agree, I wouldn't have come up with C had I thought about the structure it validly represents",
        "created_at": "2020-12-05T02:21:24.933000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If you see in that message I refer to \"rlp decoding [picking up] at the next byte\". In my head it was an exception to rlp, not valid rlp, which didn't raise alarms for me because this is the first time I've seen byte concatenation used in serialization as opposed to just another rlp list wrapping the value `rlp_encode([tx_type, rlp_encode([chainId...]))`",
        "created_at": "2020-12-05T02:28:22.217000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "On a human level, I think I didn't promote my confusion to objections because I didn't have enough trust in my understanding of all the nuances.",
        "created_at": "2020-12-05T02:29:53.831000+00:00",
        "attachments": null
    }
]