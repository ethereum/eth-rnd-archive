[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "*grumble* on both.  ðŸ˜¢",
        "created_at": "2021-03-13T03:32:53.827000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have a usecase for you: approve/permit",
        "created_at": "2021-03-13T03:33:39.074000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The pattern occurs in probably the majority of Ethereum transactions, and self sponsorships would make it so we no longer need either.",
        "created_at": "2021-03-13T03:34:31.717000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Approve is a horrible UX of ERC20 that *everyone* would love to get rid of and self sponsoring would achieve this goal.",
        "created_at": "2021-03-13T03:34:58.370000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So I see this as *the most common* use case, not an uncommon one.",
        "created_at": "2021-03-13T03:35:28.831000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ooo, that's a good one.",
        "created_at": "2021-03-13T06:16:53.862000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "So instead of approving, you call into uniswap V4 with a TLP?",
        "created_at": "2021-03-13T06:20:03.944000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "TLP?",
        "created_at": "2021-03-13T06:20:38.583000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The old name for the signed bundle",
        "created_at": "2021-03-13T06:20:47.012000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "sorry ðŸ˜›",
        "created_at": "2021-03-13T06:20:48.755000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\"transaction-like package\" - back when it had gas/value/etc",
        "created_at": "2021-03-13T06:21:05.044000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://eips.ethereum.org/EIPS/eip-2612",
        "created_at": "2021-03-13T06:22:29.741000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yep",
        "created_at": "2021-03-13T06:22:37.460000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I've used it (or something similar) with dai",
        "created_at": "2021-03-13T06:22:46.653000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This pattern could be replaced *globally* with `AUTHORIZEDCALL`, but only if origin == sponsee are allowed.",
        "created_at": "2021-03-13T06:22:55.215000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "On top of that, we could allow single-transaction approve + call pattern, but again only if origin == sponsee is allowed.",
        "created_at": "2021-03-13T06:23:39.586000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Who would act as the invoker though?",
        "created_at": "2021-03-13T06:24:20.212000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Have some standard contract that calls approve?",
        "created_at": "2021-03-13T06:24:29.816000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Some smart contract.  Could be a globally shared one, or each dapp could build their own.",
        "created_at": "2021-03-13T06:24:37.868000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "That is a solvable problem though in either case.",
        "created_at": "2021-03-13T06:24:44.901000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For sure",
        "created_at": "2021-03-13T06:24:48.632000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I *believe* that those two use cases improve the user flow for the majority of transactions on Ethereum today.",
        "created_at": "2021-03-13T06:25:29.594000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Users would no longer need to pre-approve all, for example.  Which helps protect users.",
        "created_at": "2021-03-13T06:25:57.493000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And transaction ordering and complications go away (e.g., stuck pending transactions).",
        "created_at": "2021-03-13T06:26:14.370000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "There is just sooo much good that comes of allowing origin == sponsee IMO that I am very reticent to disallow it.",
        "created_at": "2021-03-13T06:26:32.702000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The one saving grace to your argument though is that we can always loosen constraints later pretty easily.",
        "created_at": "2021-03-13T06:26:44.342000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Which is basically the same argument I was making for `require(value == 0)`.  We can launch with that to \"buy us time\" to figure out the best path forward so we don't have to feel like we are rushing to make a decision.",
        "created_at": "2021-03-13T06:27:23.011000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e sending value from the invoker has definite use cases\nCan you share or do you have these use cases written up?",
        "created_at": "2021-03-13T06:27:54.301000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Only holding wrapped eth (or other ERC-20) and swapping it for the sponsee is the first that came to mind.",
        "created_at": "2021-03-13T06:31:00.223000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can definitely do it by sending it to the sponsee and then taking from their account.",
        "created_at": "2021-03-13T06:31:24.516000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e had another one IIRC",
        "created_at": "2021-03-13T06:31:33.515000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think in the case of WETH, it actually is *harder* to do it with invoker pays.",
        "created_at": "2021-03-13T07:27:31.882000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Really? `AUTHCALL` to transfer to the invoker, unwrap, `AUTHCALL` with value?",
        "created_at": "2021-03-13T07:28:41.647000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess you can just straight up unwrap in a single authcall.",
        "created_at": "2021-03-13T07:29:26.337000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "```\n// invoker pays\nauthorize(signature)\nweth.transfer{type: authorizedcall}(this, amount)\nweth.withdraw(amount)\ntarget.method{type: authorizedcall, value: amount}()\n\n// sponsee pays\nauthorize(signature)\nweth.withdraw{type: authorizedcall}(amount)\ntarget.method{type: authorizedcall, value: amount}()\n```",
        "created_at": "2021-03-13T07:29:28.760000+00:00",
        "attachments": []
    }
]