[
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e , compare output for this command?\n```\n 7 ~/wrk/besu yolov3 ‚Åò curl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getTransactionByBlockNumberAndIndex\",\"params\":[\"0x1d\", \"0x0\"], \"id\":1}' localhost:8545\n{\n  \"jsonrpc\" : \"2.0\",\n  \"id\" : 1,\n  \"result\" : {\n    \"blockHash\" : \"0xc7ece0d6e40a70074d02a98515d93a2f3ca335c33aca63a7f75e952e7f35cae2\",\n    \"blockNumber\" : \"0x1d\",\n    \"chainId\" : \"0x796f6c6f7633\",\n    \"from\" : \"0x8a8eafb1cf62bfbeb1741769dae1a9dd47996192\",\n    \"gas\" : \"0x62d4\",\n    \"gasPrice\" : \"0x3b9aca00\",\n    \"hash\" : \"0x4443a27a9b95505b8522307937be52a6be5b530d6267de0eb39717a4fd306ce4\",\n    \"input\" : \"0x\",\n    \"nonce\" : \"0x0\",\n    \"publicKey\" : \"0x78988201fbceed086cfca7b64e382d08d0bd776898731443d2907c097745b7324c54f522087f5964412cddba019f192de0fd57a0ffa63f098c2b200e53594b15\",\n    \"raw\" : \"0xb8a701f8a486796f6c6f763380843b9aca008262d4948a8eafb1cf62bfbeb1741769dae1a9dd479961928080f838f7940000000000000000000000000000000000001337e1a0000000000000000000000000000000000000000000000000000000000000000080a0775101f92dcca278a56bfe4d613428624a1ebfc3cd9e0bcc1de80c41455b9021a06c9deac205afe7b124907d4ba54a9f46161498bd3990b90d175aac12c9a40ee9\",\n    \"to\" : \"0x8a8eafb1cf62bfbeb1741769dae1a9dd47996192\",\n    \"transactionIndex\" : \"0x0\",\n    \"value\" : \"0x0\",\n    \"v\" : \"0xf2ded8deec89\",\n    \"r\" : \"0x775101f92dcca278a56bfe4d613428624a1ebfc3cd9e0bcc1de80c41455b9021\",\n    \"s\" : \"0x6c9deac205afe7b124907d4ba54a9f46161498bd3990b90d175aac12c9a40ee9\"\n  }\n}% \n```",
        "created_at": "2021-02-08T15:00:42.724000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "AFK for next 2 hours but will when I return",
        "created_at": "2021-02-08T15:06:08.120000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I changed sign hash and first test data (those 10 blocks that we had as first test) fails with wrong nonce:\n```Bad block detected: Error(Execution(InvalidNonce { expected: 0, got: 1 }), State { next_error: None, backtrace: InternalBacktrace { backtrace: None } })```",
        "created_at": "2021-02-08T15:24:19.993000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "on block 2:",
        "created_at": "2021-02-08T15:26:04.129000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "message.txt",
                "content": "08c56f99ff4cb8b0a2260a4f9600fda426209c62579ce6823b336c1f592d763f"
            }
        ]
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!213672586264051717\u003e i get the same response",
        "created_at": "2021-02-08T17:25:29.368000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!213672586264051717\u003e  \u003c@!543900561460822016\u003e your raw tx has wrapper bytes is that expected?",
        "created_at": "2021-02-08T17:35:30.389000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "only typed txs have wrappers in the block body",
        "created_at": "2021-02-08T17:36:17.158000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I get that, but you are putting wrapper as part of raw transaction",
        "created_at": "2021-02-08T17:38:22.055000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would expect there to be only transaction without wrapper",
        "created_at": "2021-02-08T17:38:33.057000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I would expect similar.",
        "created_at": "2021-02-08T17:42:22.070000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The raw transaction is the byte array, not an RLP encoded byte array.",
        "created_at": "2021-02-08T17:42:41.874000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!429719902363058177\u003e i'm not sure i follow?",
        "created_at": "2021-02-08T17:44:18.912000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess I kind of get where the other side is coming from as well.  It leaves a sour taste in my mouth though since legacy transactions are the \"sucky thing that we have to lug around\" so I'm not a fan of having them dictate the raw format for all future transactions.",
        "created_at": "2021-02-08T17:44:43.985000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "`1||rlp([chainId, ...])` is the raw transaction bytes for typed transactions IMO.",
        "created_at": "2021-02-08T17:45:10.055000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And `rlp([nonce, ...)])` is the raw transaction for legacy IMO.",
        "created_at": "2021-02-08T17:46:34.968000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(I realize I may have misread above, if the above is what you already do ignore me)",
        "created_at": "2021-02-08T17:47:22.507000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is what Micah said. I was talking about \"raw\" field in rai response.",
        "created_at": "2021-02-08T17:50:24.428000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah okay, yeah in the RPC that seems reasonable",
        "created_at": "2021-02-08T17:53:28.295000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "and \"hash\" in rai response is done over its \"raw\" transaction and not over  `1|rlp([chainId, ...])`",
        "created_at": "2021-02-08T20:06:55.469000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "btw are we nuking yolo3, with change in spec, we will need new test network.",
        "created_at": "2021-02-08T20:08:08.319000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!213672586264051717\u003e sorry, i made a mistake generating the diff and used your input for both side üòÜ  here is the correct diff (x is me, y is you):\n```\n$ diff x y\n6a7\n\u003e       \"chainId\":\"0x796f6c6f7633\",\n10c11\n\u003c       \"hash\":\"0x212a85be428a85d00fb5335b013bc8d3cf7511ffdd8938de768f4ca8bf1caf50\",\n---\n\u003e       \"hash\":\"0x4443a27a9b95505b8522307937be52a6be5b530d6267de0eb39717a4fd306ce4\",\n12a14,15\n\u003e       \"publicKey\":\"0x78988201fbceed086cfca7b64e382d08d0bd776898731443d2907c097745b7324c54f522087f5964412cddba019f192de0fd57a0ffa63f098c2b200e53594b15\",\n\u003e       \"raw\":\"0xb8a701f8a486796f6c6f763380843b9aca008262d4948a8eafb1cf62bfbeb1741769dae1a9dd479961928080f838f7940000000000000000000000000000000000001337e1a0000000000000000000000000000000000000000000000000000000000000000080a0775101f92dcca278a56bfe4d613428624a1ebfc3cd9e0bcc1de80c41455b9021a06c9deac205afe7b124907d4ba54a9f46161498bd3990b90d175aac12c9a40ee9\",\n16,26c19\n\u003c       \"accessList\":[\n\u003c          {\n\u003c             \"address\":\"0x0000000000000000000000000000000000001337\",\n\u003c             \"storageKeys\":[\n\u003c                \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n\u003c             ]\n\u003c          }\n\u003c       ],\n\u003c       \"type\":\"0x1\",\n\u003c       \"chainId\":\"0x796f6c6f7633\",\n\u003c       \"v\":\"0x0\",\n---\n\u003e       \"v\":\"0xf2ded8deec89\",\n```",
        "created_at": "2021-02-08T20:34:36.796000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "sorry, are you getting the same hash as geth is in the input above? (`0x212a85be428a85d00fb5335b013bc8d3cf7511ffdd8938de768f4ca8bf1caf50`)",
        "created_at": "2021-02-08T20:35:36.674000+00:00",
        "attachments": null
    },
    {
        "author": "draganrakita",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes, it is same. \u003c@!543900561460822016\u003e \n```\n{\"jsonrpc\":\"2.0\",\"result\":{\"accessList\":[[\"0x0000000000000000000000000000000000001337\",[\"0x0000000000000000000000000000000000000000000000000000000000000000\"]]],\"blockHash\":\"0xc7ece0d6e40a70074d02a98515d93a2f3ca335c33aca63a7f75e952e7f35cae2\",\"blockNumber\":\"0x1d\",\"chainId\":\"0x796f6c6f7633\",\"condition\":null,\"creates\":null,\"from\":\"0x8a8eafb1cf62bfbeb1741769dae1a9dd47996192\",\"gas\":\"0x62d4\",\"gasPrice\":\"0x3b9aca00\",\"hash\":\"0x212a85be428a85d00fb5335b013bc8d3cf7511ffdd8938de768f4ca8bf1caf50\",\"input\":\"0x\",\"nonce\":\"0x0\",\"publicKey\":\"0x78988201fbceed086cfca7b64e382d08d0bd776898731443d2907c097745b7324c54f522087f5964412cddba019f192de0fd57a0ffa63f098c2b200e53594b15\",\"r\":\"0x775101f92dcca278a56bfe4d613428624a1ebfc3cd9e0bcc1de80c41455b9021\",\"raw\":\"0x01f8a486796f6c6f763380843b9aca008262d4948a8eafb1cf62bfbeb1741769dae1a9dd479961928080f838f7940000000000000000000000000000000000001337e1a0000000000000000000000000000000000000000000000000000000000000000080a0775101f92dcca278a56bfe4d613428624a1ebfc3cd9e0bcc1de80c41455b9021a06c9deac205afe7b124907d4ba54a9f46161498bd3990b90d175aac12c9a40ee9\",\"s\":\"0x6c9deac205afe7b124907d4ba54a9f46161498bd3990b90d175aac12c9a40ee9\",\"standardV\":\"0x0\",\"to\":\"0x8a8eafb1cf62bfbeb1741769dae1a9dd47996192\",\"transactionIndex\":\"0x0\",\"type\":1,\"v\":\"0xf2ded8deec89\",\"value\":\"0x0\"},\"id\":1}```",
        "created_at": "2021-02-08T21:11:10.538000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ok, so I'll nuke yolov3 tomorrow then?",
        "created_at": "2021-02-08T23:04:33.807000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Should we update the networkid / chainid to make syncing easier, or not?",
        "created_at": "2021-02-08T23:05:06.689000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think there's few of us on it so let's just not change anything and resync haha",
        "created_at": "2021-02-08T23:16:07.194000+00:00",
        "attachments": null
    },
    {
        "author": "0xraino",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'll shut mine down now",
        "created_at": "2021-02-08T23:19:43.105000+00:00",
        "attachments": null
    }
]