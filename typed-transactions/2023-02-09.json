[
    {
        "author": "etan_status",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Managed to kill `tx_subtype` to distinguish EIP-155 / Legacy. There is a chain ID value that EIP-155 does not support, so using that one as my out.\n– \u003c@322222239850168331\u003e confirmed to me that EIP-3788 meant `chain ID nil` (legacy TX without chain ID).\n– \u003c@474796222738202636\u003e 's EIP-2294 and its discussion further suggests that `chain ID 0` may be reservable, if that happens we can use that one as `CHAIN_ID_LEGACY` to make caller code more concise.",
        "created_at": "2023-02-09T15:22:09.829000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Also split away the SSZ `Optional` type so that it can be adopted by EIP-4844 regardless of EIP-6404's timeline.\n– https://eips.ethereum.org/EIPS/eip-6475 based on \u003c@553610810652622860\u003e 's original idea.",
        "created_at": "2023-02-09T15:24:38.683000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Only things left now, re 6404:\n– Union vs normalized TX discussion (next wednesday --\u003e https://github.com/ethereum/pm/issues/721)\n– SSZ signature / ID hash derivations (avoid malleability, and make compatible with union vs normalized TX --\u003e https://github.com/ethereum/EIPs/pull/6385)\n– Adding tests, cleaning it up\n– Devp2p can figure out later whether to move to SSZ for history exchange as well. Out of scope for now.",
        "created_at": "2023-02-09T15:25:24.210000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Can I get context on this please?",
        "created_at": "2023-02-09T15:29:38.849000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As part of https://eips.ethereum.org/EIPS/eip-6404, I ran into an ambiguity where a `LegacyTransaction` can either be an EIP-155 transaction, or a legacy transaction that lacks chain ID. \n\nIn EIP-3788 you mentioned that \"a transaction with a chainId = 0 [...] was a feature to offer developers the ability to sumbit replayable transactions across different chains\". Therefore, I assumed that `chain_id = 0` would generally indicate replayability, across all transaction types.\n\nThis then leads to a problem, though, where a `LegacyTransaction` could either have a `v` value of `{35,36}` to denote `chain_id = 0`, or otherwise have a `v` value of `{27,28}` to denote `chain_id = nil`. To distinguish between those two cases of explicit replayability vs implicit replayability, I added an additional field to remember which of the two cases it originally was, to be able to recompute the original TXID and sighash.\n\nHowever, as it turns out, if I understand our conversation correctly, `chain_id = 0` does in fact, not, indicate replayability — only `chain_id = nil` (`v = {27,28}`) does. Any other transaction types beyond `LegacyTransaction` do not support replayability anymore. Therefore, I updated EIP-6404 to use `chain_id = 2^255 - 4` instead to denote lack of chain ID (which ends up at a `v` value of `{27,28}` when reconstructed), and could remove the extra `tx_subtype` field to track `0` vs `nil` cases.",
        "created_at": "2023-02-09T15:36:45.038000+00:00",
        "attachments": null
    },
    {
        "author": "gregthegreek",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "right right, yeah that must be a typo on my end, 27,28 are the naughty v values hahaha",
        "created_at": "2023-02-09T16:29:51.676000+00:00",
        "attachments": null
    }
]