[
    {
        "author": "ryanleeschneider",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e  it will be the network encoding without the RLP string header\n\nWait are you both saying that the payload for `eth_sendRawTransaction` will include the additional `blobs, commitments, proofs` fields from the Networking section?  I assumed it was just the tx format specified in the \"Blob transaction\" section.",
        "created_at": "2023-08-21T20:25:39.785000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Execution Layer",
        "parent": "",
        "content": "My reading of geth's code implies that the additional fields are required for the txs to make it into geth's mempool.  IMO we need either a execution-apis PR or clarification in the EIP, as I don't think it's at all obvious from reading the EIP that `eth_sendRawTransaction` payloads are expected to include those additional fields.",
        "created_at": "2023-08-21T20:46:05.323000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "Execution Layer",
        "parent": "",
        "content": "yes, if `eth_sendRawTransaction` were to not include the `blobs, commitments, proofs`, the transaction lifecycle would lack a blob insertion step",
        "created_at": "2023-08-21T21:12:51.551000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "Execution Layer",
        "parent": "",
        "content": "i.e. you'd have this:\n1. user calls `eth_sendRawTransaction` for a blobtx (without blobs, commitments, proofs) to the node\n2. node sends `NewPooledTransactionHashes` to peer\n3. peer requests txs using `GetPooledTransactions`\n4. node cannot fulfill request because it doesn't have blobtx sidecar",
        "created_at": "2023-08-21T21:17:04.073000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "Execution Layer",
        "parent": "",
        "content": "agree on this though",
        "created_at": "2023-08-21T21:35:57.906000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Execution Layer",
        "parent": "",
        "content": "Yep, after looking at it I agree, but I feel like the EIP is rather underspecified in that regard, IMO we need to list somewhere the _exact_ format of the eth_sendRawTransaction payload.  Geth's implementaton currently expects the payload to be something like:\n\n` 0x03 || rlp([tx_payload_body, blobs, commitments, proofs])`\n\nwhich IMO seems correct but that's not mentioned anywhere in the EIP",
        "created_at": "2023-08-21T21:36:06.254000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Execution Layer",
        "parent": "",
        "content": "Currently the execution-api forgoes specifying any details of the tx payload itself, `params[0]` is just typed `bytes`: https://github.com/ethereum/execution-apis/blob/fe8e13c288c592ec154ce25c534e26cb7ce0530d/src/eth/submit.yaml#L12-L22\n\nThis probably makes sense given the limitations of OpenRPC/OpenAPI, so IMO I'd be in favor of expanding the Networking section of the EIP to include the `eth_sendRawTransaction` payload, but I'm curious what \u003c@543900561460822016\u003e thinks on the subject.",
        "created_at": "2023-08-21T21:41:43.691000+00:00",
        "attachments": []
    }
]