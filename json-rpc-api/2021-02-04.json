[
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "OpenRPC has language generators for JSON-RPC",
        "created_at": "2021-02-04T01:28:58.681000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "if perf is an issue you can cut down on overhead with things like messagepack.",
        "created_at": "2021-02-04T01:33:33.023000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "but by-position vs by-name already cuts down on a lot over the wire",
        "created_at": "2021-02-04T01:33:56.941000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "so with messagepack we eliminate readability argument",
        "created_at": "2021-02-04T03:08:00.154000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "it does not for Rust, not a modern, working one at least",
        "created_at": "2021-02-04T03:08:24.397000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "by contrast, Tokio project maintains its own gRPC implementation",
        "created_at": "2021-02-04T03:08:39.471000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "most importantly, we at turbo-geth have been extremely successful at breaking up the client into microservices connected through gRPC, so some positive experience right there",
        "created_at": "2021-02-04T03:09:25.926000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "it has a rust generator, if there’s any bugs could you submit an issue?",
        "created_at": "2021-02-04T03:23:22.927000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "last I looked it was a JS script that manually wrote out Rust code. Not only this is wrong - all Rust code should be generated using Rust macros - but it is also horribly outdated, outputting sync I/O code.",
        "created_at": "2021-02-04T03:54:51.657000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "so, in a sense, this generator is one giant bug and should be rewritten from scratch",
        "created_at": "2021-02-04T03:55:15.136000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "I did set out to do it half a year ago, but OE and later turbo-geth consumed my resources completely",
        "created_at": "2021-02-04T03:56:00.196000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e all Rust code should be generated using Rust macros\nWhy?",
        "created_at": "2021-02-04T03:57:09.575000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "Because it's how it should be done",
        "created_at": "2021-02-04T03:57:24.976000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "That feels overly prescriptive to me.",
        "created_at": "2021-02-04T03:57:37.298000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "do you write Rust?",
        "created_at": "2021-02-04T03:57:44.605000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I do not, which is why I wan to better understand the advantages of using Rust macros here.",
        "created_at": "2021-02-04T03:57:56.679000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "because Rust macros are part of Rust for starters",
        "created_at": "2021-02-04T03:58:19.194000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "Cargo integrates with them",
        "created_at": "2021-02-04T03:58:24.725000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "so if you edit the macro, it will autogen everything for you",
        "created_at": "2021-02-04T03:58:42.647000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "There is certainly something to be said for not needing multiple toolsets.  I definitely hate it when people write native code for node and then require Python and C++ build tools in order to install a JS dependency.",
        "created_at": "2021-02-04T03:59:26.329000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't think I have seen ***anyone*** generate Rust code using external tooling",
        "created_at": "2021-02-04T03:59:47.363000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "(well, except for OpenRPC)",
        "created_at": "2021-02-04T04:00:04.535000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "and I've been writing Rust for full 5 years now",
        "created_at": "2021-02-04T04:00:11.386000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "If you already have a tool that does 90% of the work, it may make more sense (from a maintainability standpoint) to just add a Rust output to that code rather than rewriting (and maintaining) the whole tool in another language.",
        "created_at": "2021-02-04T04:00:53.612000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "no",
        "created_at": "2021-02-04T04:01:04.321000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't know if this is the case for OpenRPC or not, but I can totally imaging that making the most sense (one tool to output to 5 languages, rather than 5 tools).",
        "created_at": "2021-02-04T04:01:13.857000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "again, no",
        "created_at": "2021-02-04T04:01:50.188000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "I'm not adding node to the build requirements of my openrpc-dependent lib if I ever get to write one",
        "created_at": "2021-02-04T04:02:29.236000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "we have cargo, it handles everything",
        "created_at": "2021-02-04T04:02:56.452000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "most importantly, build scripts",
        "created_at": "2021-02-04T04:03:06.683000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think the hope would be that the wire protocol specification would live in a repository somewhere and spit out modules for each of the targeted languages.  So you would just pull down a Rust dependency (via cargo), you wouldn't (ideally) need to have the generator as part of your code.",
        "created_at": "2021-02-04T04:03:40.737000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "we do make exception for cmake and autotools, for C dependencies, but slowly weed them out as the Rust ecosystem matures",
        "created_at": "2021-02-04T04:03:55.200000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I generally agree with you that having multiple build systems for a single project is a pain and I similarly discourage it.",
        "created_at": "2021-02-04T04:04:22.471000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "again, to me personally, OpenRPC is in the wrong era - it should have been 10 years ago",
        "created_at": "2021-02-04T04:05:07.364000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "today we have gRPC",
        "created_at": "2021-02-04T04:05:12.287000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't think the era of easy-for-humans wire protocols is over, or likely to be over anytime soon.",
        "created_at": "2021-02-04T04:06:08.352000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "and REST should do just that - rest in peace\n\nwho even thought it was a good idea to mix HTTP internals with business logic, anyway?",
        "created_at": "2021-02-04T04:06:12.764000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think there is space for both easy-for-humans and easy-for-computers and space-conserving all to live side by side (right tool for the job).",
        "created_at": "2021-02-04T04:06:44.518000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "gah",
        "created_at": "2021-02-04T04:07:15.082000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think we just need Postman for gRPC",
        "created_at": "2021-02-04T04:07:23.235000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "JSON-RPC isn’t going away, the entire ecosystem is built on it. OpenRPC is a specification that gets us modern tooling for JSON-RPC, improving what’s already there.",
        "created_at": "2021-02-04T04:13:38.097000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "eth1 isn't going away, the entire ecosystem is built on it. eth1x is a project that gets us scalability upgrade for eth1, improving what's already there.\n\nextending your logic: why bother with eth2 then?",
        "created_at": "2021-02-04T04:16:00.448000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "and FWIW, \"ecosystem\" is using Infura, not real clients, so the point is mostly moot anyway",
        "created_at": "2021-02-04T04:19:09.336000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don’t think eth2 should break userland either fwiw",
        "created_at": "2021-02-04T04:35:37.772000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "to help with the upgrade path",
        "created_at": "2021-02-04T04:35:58.901000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@329594653097721856\u003e you're just hammering on how great grpc is, and how bad everything else is. What about the points raised be Peter and me?\n\nThe encoding overhead is tiny, compared to all the actual work the node performs to answer the query and process blocks.",
        "created_at": "2021-02-04T06:31:38.085000+00:00",
        "attachments": null
    },
    {
        "author": "belfordz",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!329594653097721856\u003e FWIW, the intent was never to provide *THE* rust client generator, but rather to provide something that works within a grander abstraction, allowing for multi language (including documentation and other generated artifacts) generation. \n\nI really hope that someone will put in the time to make a rust macro based generator. Until then, rust users can use the node cli to generate rust clients. In fact, if you are willing, we have an open collective that I've donated to already, and would be happy to award a bounty for such a rust client.",
        "created_at": "2021-02-04T06:38:25.866000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Did ETH2 end up going with REST in the end (from that issue, it looks like it)?",
        "created_at": "2021-02-04T06:46:57.610000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The arguments made by Peter and Martin in that thread are basically much more elquent versions of my argument.  REST over HTTP has incredibly broad tooling support and human readability (when the query/response are something like JSON or query string).",
        "created_at": "2021-02-04T06:48:41.618000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I really liked the statements about things like infrastructure components (edge servers/services, pipelining services, reverse proxies, TOR, etc.) all supporting REST *extremely* well (zero integration work).",
        "created_at": "2021-02-04T06:49:24.877000+00:00",
        "attachments": null
    },
    {
        "author": "holiman",
        "category": "Execution Layer",
        "parent": "",
        "content": "... And in that context -- pursuing 50 or even let's say 100% improvements in the encoding-step, is really nothing compared to if you can let the surrounding infrastructure handle 99% of all the load.",
        "created_at": "2021-02-04T07:50:08.186000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "yeah, why bother when everyone uses Infura, right?",
        "created_at": "2021-02-04T08:52:53.626000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "In a past life, a common meme at the office was that engineers are far more expensive than hardware.",
        "created_at": "2021-02-04T08:54:51.870000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Execution Layer",
        "parent": "",
        "content": "Yes.  Very roughly summarising, proponents of gRPC (of which I was one) preferred the compactness of the format, the low overhead, and the strong typing (bytes are bytes, integers are integers, etc.).  Proponents of REST preferred the simplicity of human-legible input and output, the statelessness, and the additional features that came from existing infrastructure (caches, reverse proxies, etc.).  We ended up with the position that if this the interactions were designed for pure computer-to-computer interaction then the benefits of gRPC may have swung it, but given that users would be directly involved in crafting, sending and receiving requests and responses the friendliness of REST won out.\n\nIs it inefficient compared to gRPC?  Yes, but not noticeably in terms of overall work involved.  Are there potential confusions by having only a single number type, and one with limitations at that?  Yes, but that was addressed by defining standards for the information.\n\nUltimately there is no single correct choice (although there can, of course, be incorrect choices).  And having written a few tools that use the API I have to say that it does its job in easing interaction with the chain data.",
        "created_at": "2021-02-04T09:32:51.296000+00:00",
        "attachments": null
    },
    {
        "author": "vorot93",
        "category": "Execution Layer",
        "parent": "",
        "content": "It's easier to keep small typed snippet of code than manage huge Postman collections.",
        "created_at": "2021-02-04T09:49:03.491000+00:00",
        "attachments": null
    }
]