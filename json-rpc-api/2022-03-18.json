[
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I'm extremely loath to tell people to write code like this \u003c@!425572898787426305\u003e \u003c@!291925846556540928\u003e:\n```typescript\ntry {\n    eth_getBlockByNumber('finalized')\n    // TODO: PoS finalized-based decision making\n} catch (error) {\n    if (error.message === NO_FINALIZED_BLOCK_YET_MESSAGE) {\n        // TODO: PoW confirmation-based decision making\n    }\n}\n```\nThere are books (probably) written on why this is ~~bad~~ terrible code.",
        "created_at": "2022-03-18T14:51:45.376000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "I agree. This is an anti pattern",
        "created_at": "2022-03-18T15:02:01.219000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Execution Layer",
        "parent": "",
        "content": "If your basis on this being terrible is the try/catch I don't see why that's needed:\n\n```\nresponse = eth_getBlockByNumber('finalized')\nif response.error \u0026\u0026 response.error.message == NO_FINALIZED_BLOCK_YET_MESSAGE { \n   // POW\n} else {\n   // POS\n}\n```\n\nBut maybe you meant having to check the blockbynumber result at all?",
        "created_at": "2022-03-18T17:19:20.961000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "That assumes that you don't have some higher level architecture for dealing with errors (which feels like ae bad design in the first place).",
        "created_at": "2022-03-18T17:21:46.705000+00:00",
        "attachments": []
    }
]