[
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@\u00261070471163219824730\u003e \u003c@\u0026836981603216654336\u003e Is anyone on your teams working on implementing `eth_multicall` at the moment?  We are looking to finalize the spec, and we want to make sure that you both had an opportunity to give input before we do.",
        "created_at": "2023-12-18T13:53:08.179000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "how would you guys feel if we deprecated `eth_sendTransaction` from the Ethereum nodes. And then spec out a `wallet_sendTransaction` method that is not included to the nodes, but intended to be in wallet interface only. The `wallet_sendTransaction` could be the only method that will include blobs",
        "created_at": "2023-12-18T14:01:51.181000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "there was some discussion in twitter about making a method for wallet that would support sending of multple transactions at once. Eg, `wallet_sendTransactions`. The effort for that could be joined with this as well",
        "created_at": "2023-12-18T14:02:38.592000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution Layer",
        "parent": "",
        "content": "I would love if we could deprecate `eth_sendTransaction` and only provide `eth_sendRawTransaction` moving forwards",
        "created_at": "2023-12-18T14:05:41.268000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "We've skimmed over the spec but no one is concretely working on it as of this time. One thing I'd note is that for me personally the spec is pretty hard to read",
        "created_at": "2023-12-18T15:14:47.005000+00:00",
        "attachments": []
    },
    {
        "author": "robocopsgonemad",
        "category": "Execution Layer",
        "parent": "",
        "content": "nobody is working on multicall yet, and no word (at the moment) on possible scheduling. i'll see what we can come up with.",
        "created_at": "2023-12-18T15:15:48.565000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Is this just due to the nature of OpenRPC, or something in particular about this method in particular?",
        "created_at": "2023-12-18T15:21:04.475000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "The yaml spec itself is really really big and its unclear what the reasoning behind a lot of it is (e.g. the eth transfers -\u003e erc20 event logs feature). The mutlicall notes doc is a bit messy/leaves out a lot of details as well",
        "created_at": "2023-12-18T15:26:15.162000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "My personal feeling on it, but other than that we haven't really put it on our internal schedule either",
        "created_at": "2023-12-18T15:26:39.431000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "shoot us questions and we are happy to answer.\nThe reasoning for eth transfers:\n1) When doing eth_call there is no way to get logs at all\n2) When looking at logs, you can see how all other tokens move around between accounts, but not ETH\n3) So its quite natural to create logs for ETH so that that you can see movements of all assets\n4) We were thinking of putting eth logs separately with the other logs, but then you lose the ordering of the logs. We could have made separate list that lists an index that denotes after which real log it comes, but this felt quite cumbersome",
        "created_at": "2023-12-18T15:37:01.831000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "We should put those points in the `.md` file, since this isn't the first time people have expressed curiosity/uncertainty with the ETH logs.",
        "created_at": "2023-12-18T15:38:39.407000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "we also have blog post \u003chttps://mirror.xyz/killaridev.eth/NXR9v4r8b4SWl-hbqJqRQyIAcE4GACobzMObREvL0fo\u003e and a presentation: \u003chttps://docs.google.com/presentation/d/1lEaqHTY3ud8pe6VAFwLkb-jdoHpTMBfuF1K9OKy-azs/edit#slide=id.g29706cecfe6_0_24\u003e that explain some reasoning",
        "created_at": "2023-12-18T15:39:40.245000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "Similar question about the motivation for being able to relocate precompiles, set nonces and balances etc. for precompiles. Afaik a lot of EVM impls assume precompiles are \"static\" when you build the runtime, so they are handled differently than normal accounts and EOAs",
        "created_at": "2023-12-18T15:39:43.675000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "Most precompiles are statless with the exception of the new dencun precompile",
        "created_at": "2023-12-18T15:40:15.410000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "This wasn't the point of the `.md` file initially. But I could modify it more to explain reasoning of things",
        "created_at": "2023-12-18T15:40:25.330000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "the motivation with balances is that you often need ETH to perform operations on the chain. So its handy to be able to mint ETH out of thin air. For nonce, there's less reason, but its more for completionist (why not be able to set the whole state). Setting the state variables, is also quite handy (eg, the ecrecover example in the blog post / presentation)",
        "created_at": "2023-12-18T15:42:08.554000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "precompile moving is mostly to be able to spoof `ecRecover`",
        "created_at": "2023-12-18T15:42:24.547000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "are you aware which assume this? Geth and Nethermind does not seem to do this",
        "created_at": "2023-12-18T15:42:58.592000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "Off the top of my dome, revm, evmodin, sputnik",
        "created_at": "2023-12-18T15:43:29.746000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "`revm` is what `reth` uses?",
        "created_at": "2023-12-18T15:43:51.180000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "Yes",
        "created_at": "2023-12-18T15:43:54.273000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Hmm, would love to dig into this a bit more.  The ability to override precompiles is a pretty critical feature, and I would hate to lose it, but I also want to make sure all of this is implementable in all clients.",
        "created_at": "2023-12-18T15:44:26.548000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "Essentially the assumption until the new precompile for beacon root was added was that precompiles are just pure functions with an address",
        "created_at": "2023-12-18T15:44:28.602000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "If we constrained the override to still be pure does that help?",
        "created_at": "2023-12-18T15:44:52.031000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "Can you unpack that a bit?",
        "created_at": "2023-12-18T15:45:26.805000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Right now, if you override a precompile you can do anything in the override that a normal contract can do, which includes reading/writing state.  Is your concern around allowing precompiles to be overriden specifically due to the overrides not being pure (they can read/write state), or is there more to the concern than that?",
        "created_at": "2023-12-18T15:46:34.159000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "hmm. It would be difficult to add a mapping before a contract is called, that could forward the call to another address?",
        "created_at": "2023-12-18T15:46:41.770000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "If the overrides had a pure requirement you would have to hard-code any values into it.",
        "created_at": "2023-12-18T15:47:08.293000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think this limitation would add complexity to other clients, so I don't want to promise anything here.  I just want to understand where the pain points for reth/revm are around precompile overrides.",
        "created_at": "2023-12-18T15:47:46.182000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "I'll talk with the team and we'll get back to you",
        "created_at": "2023-12-18T15:49:53.835000+00:00",
        "attachments": []
    },
    {
        "author": "nordbjerg",
        "category": "Execution Layer",
        "parent": "",
        "content": "Thanks for the clarifications",
        "created_at": "2023-12-18T15:50:04.112000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "please check the blog post. The .md was not intended to explain reasoning, or even explain what multicall is :). It was intended to communicate edge cases that we couldn't communicate easily in the open api",
        "created_at": "2023-12-18T15:54:28.330000+00:00",
        "attachments": []
    },
    {
        "author": "killari.",
        "category": "Execution Layer",
        "parent": "",
        "content": "I guess it would make sense to modify the markdown to give more reasoning on things. Maybe I move some information from the blog to the .md ðŸ¤”",
        "created_at": "2023-12-18T15:55:28.748000+00:00",
        "attachments": []
    }
]