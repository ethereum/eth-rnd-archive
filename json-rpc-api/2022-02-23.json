[
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "There is an issue with `eth_chainId`, this method is used at least by Lighthouse and Teku to check `DEPOSIT_CHAIN_ID` value from the config with what does actual EL endpoint returns. It seems like formally we can't include `eth_chainId` into a subset of methods that EL must exposed at Engine API endpoint as it's not a part of execution apis spec ðŸ¤”",
        "created_at": "2022-02-23T09:26:40.664000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The execution APIs page is not complete (there is no complete specification, which is part of the problem).",
        "created_at": "2022-02-23T09:55:40.005000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "So just because a method isn't listed there doesn't mean it isn't supported by all clients.",
        "created_at": "2022-02-23T09:56:02.316000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't know if `eth_chainId` is supported by all clients or not.  Easiest is to just manually test them all.",
        "created_at": "2022-02-23T09:56:20.727000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Hopefully they all return the same datatype as well, this isn't alway the case.",
        "created_at": "2022-02-23T09:56:55.341000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Yes, this is true. I was going to say that each of these methods is specified in `eth` section of... which is easy to do",
        "created_at": "2022-02-23T09:57:33.090000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "but now I think that it would be easier to avoid saying anything like that",
        "created_at": "2022-02-23T09:58:53.247000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Btw, what is the actual spec document? Is it this one: https://raw.githubusercontent.com/ethereum/eth1.0-apis/assembled-spec/openrpc.json ?",
        "created_at": "2022-02-23T10:03:38.976000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "~~Yes, but there is a renderer for that.~~ No, I'm not sure what that is.",
        "created_at": "2022-02-23T10:04:36.409000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "https://playground.open-rpc.org/?schemaUrl=https://raw.githubusercontent.com/ethereum/eth1.0-apis/assembled-spec/openrpc.json\u0026uiSchema%5BappBar%5D%5Bui:splitView%5D=false\u0026uiSchema%5BappBar%5D%5Bui:input%5D=false\u0026uiSchema%5BappBar%5D%5Bui:examplesDropdown%5D=false",
        "created_at": "2022-02-23T10:05:00.559000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "So, if I want to reference the spec I should use this renderer, right?",
        "created_at": "2022-02-23T10:05:22.975000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Er, actually, I'm not sure what that file is: https://github.com/ethereum/execution-apis/tree/main/src/eth",
        "created_at": "2022-02-23T10:05:26.201000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Edit files in that folder if you want to add methods, update things, etc.",
        "created_at": "2022-02-23T10:05:50.599000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Ideally, the engine API would be in the same format so it could be rendered with the same system.",
        "created_at": "2022-02-23T10:06:02.388000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "e.g., an `engine` folder with files in it with a similar shape to those in the `eth` folder.",
        "created_at": "2022-02-23T10:06:10.537000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Right, but Engine API specification goes beyond a schema as it describes behaviour which some times is complicated. Schema should be accompanying in this case, IMO",
        "created_at": "2022-02-23T10:07:44.978000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "The schema supports text fields with in it.  You could specify certain behavior in there.",
        "created_at": "2022-02-23T10:08:11.374000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "I see. Schema renderer is focused rather on params and return value than on the behaviour. But need to try it out to see how does it work",
        "created_at": "2022-02-23T10:09:23.303000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "There is `summary`, `title`, and `description` fields depending on context.",
        "created_at": "2022-02-23T10:09:33.380000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "For example, `eth_feeHistory` has this:\n\u003e \"description\": \"Requested range of blocks. Clients will return less than the requested range if not all blocks are available.\",",
        "created_at": "2022-02-23T10:09:57.684000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Which specifies the behavior of that method under certain conditions.",
        "created_at": "2022-02-23T10:10:12.831000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "A longer example:\n\u003e \"description\": \"A monotonically increasing list of percentile values. For each block in the requested range, the transactions will be sorted in ascending order by effective tip per gas and the coresponding effective tip for the percentile will be determined, accounting for gas consumed.\",",
        "created_at": "2022-02-23T10:10:28.117000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Also, Engine API has Routines and Message ordering sections which might not fit this format well",
        "created_at": "2022-02-23T10:11:25.857000+00:00",
        "attachments": null
    },
    {
        "author": "dock_boss",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!425572898787426305\u003e \u003c@!301186049323958275\u003e   The spec detailing the behavior is almost done. The current version I have is based off of geth's behavior only. I have been writing edge case tests for the majority of the endpoints and should be finishing up later today. I will have a document detailing the inconcinnities and behavioral decisions that need to be agreed upon before I can finish the spec. I am also finishing up a spreadsheet that compares each clients response to all of the edge case tests I ran.",
        "created_at": "2022-02-23T19:47:11.181000+00:00",
        "attachments": null
    },
    {
        "author": "dock_boss",
        "category": "Execution Layer",
        "parent": "",
        "content": "Also `eth_chainId` is supported by all clients",
        "created_at": "2022-02-23T19:47:28.242000+00:00",
        "attachments": null
    }
]