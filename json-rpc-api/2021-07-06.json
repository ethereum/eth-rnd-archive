[
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "ah yeah it was cancelled because it seemed that we had reached consensus. Here's the OpenRPC spec ready for review \u003c@!301186049323958275\u003e \u003c@!543900561460822016\u003e \u003c@!489256758989029405\u003e https://github.com/ethereum/eth1.0-apis/pull/2",
        "created_at": "2021-07-06T07:06:21.894000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "Thanks for the review \u003c@!88765147048333312\u003e! Could you possibly help me understand the preferred layout of openrpc specs, with respect to alias types to specific meanings in the spec? For example, the `miner` property of `block` is an `address`, is there a need to also create a `Miner` alias for `address`? Would a `title` not suffice?",
        "created_at": "2021-07-06T16:21:40.986000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "not sure, i think \u003c@!104006934562107392\u003e was referring to `methods =\u003e content descriptors =\u003e json schemas`, and content descriptors as the alias in that example",
        "created_at": "2021-07-06T16:22:47.420000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "what is the difference between `content descriptors` and `json schemas`?",
        "created_at": "2021-07-06T16:23:41.139000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "to keep the parameter name separate from a type",
        "created_at": "2021-07-06T16:25:50.167000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "i thought that was the purpose of the key in `properties`?",
        "created_at": "2021-07-06T16:27:13.586000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "https://github.com/ethereum/eth1.0-apis/blob/29ebf73b0c6c465d3e9c9c6348aa6ea50c4dcfca/openrpc.json#L910-L913",
        "created_at": "2021-07-06T16:27:27.313000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "for typescript and typed languages you get named params:\n\n`type Addition = (first: Integer, second: Integer)`\n\nfor jsonrpc it gets you \n\n`paramStructure: \"by-name\"` or `\"by-position\"`  and defaults to `either`",
        "created_at": "2021-07-06T16:29:30.098000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "i guess i don't understand why that isn't derived from the property key?",
        "created_at": "2021-07-06T16:30:22.817000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "because this gives you the same spec for both, and if you just had a json schema you'd need to rewrite the whole spec with an `anyOf` to support both arrays and objects as params",
        "created_at": "2021-07-06T16:31:20.028000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "ah so json-rpc by default accept either an object or array?",
        "created_at": "2021-07-06T16:32:26.081000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "yea",
        "created_at": "2021-07-06T16:32:39.454000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "if so, i guess i still don't understand why you can't use the property keys? ðŸ˜¦ what about that is different from aliasing a type?",
        "created_at": "2021-07-06T16:33:23.552000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "properties key =\u003e object key, properties order =\u003e array order",
        "created_at": "2021-07-06T16:34:13.016000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "lol its definitely been brought up, but the separation is better for code generation, and lines up with openapi that we forked, having `name, summary, description, schema, deprecated`",
        "created_at": "2021-07-06T16:34:21.136000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "and the property keys would just be for by-name, and you'd need `type: \"array\", items: {}` for by-position",
        "created_at": "2021-07-06T16:53:31.983000+00:00",
        "attachments": null
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e yeah the repeating is purely a workaround for the way that schemas work in open rpc",
        "created_at": "2021-07-06T17:34:49.800000+00:00",
        "attachments": null
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "alternatively we could automatically do this in the compile step",
        "created_at": "2021-07-06T17:35:42.264000+00:00",
        "attachments": null
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "to avoid repeats",
        "created_at": "2021-07-06T17:35:47.881000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "it sounds like it has to do with client generation though, not openrpc",
        "created_at": "2021-07-06T17:35:49.227000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "but let me keep looking into this",
        "created_at": "2021-07-06T17:36:20.258000+00:00",
        "attachments": null
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "sounds good, not exactly sure what you mean.",
        "created_at": "2021-07-06T17:36:47.959000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003e for typescript and typed languages you get named params\nto me this is unrelated to openrpc, but has to do with how you automatically convert a spec to a client",
        "created_at": "2021-07-06T17:38:01.370000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "object keys aren't required to be order preserving",
        "created_at": "2021-07-06T17:52:21.712000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "how do content descriptors fix this though? they're still objects",
        "created_at": "2021-07-06T17:55:31.213000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "i don't see anywhere where a canonical ordering is set?",
        "created_at": "2021-07-06T17:55:43.040000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "params is an array of content descriptors that have names",
        "created_at": "2021-07-06T17:55:51.882000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "i see",
        "created_at": "2021-07-06T17:56:34.575000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "for by-position, just uses the ordering in the array, for by-name, uses the names as keys",
        "created_at": "2021-07-06T17:56:43.668000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "but in the etc spec, you aren't defining the ordering, you're linking to a content descriptor? https://github.com/etclabscore/ethereum-json-rpc-specification/blob/97178e7dc3b417318e2977171254f6e21d080076/openrpc.json#L180",
        "created_at": "2021-07-06T17:57:20.482000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "so i don't understand the need for the indirection - why not just link to the schema there?",
        "created_at": "2021-07-06T17:57:38.140000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "which eventually refs back to the unorder tx schema: https://github.com/etclabscore/ethereum-json-rpc-specification/blob/97178e7dc3b417318e2977171254f6e21d080076/openrpc.json#L1473",
        "created_at": "2021-07-06T17:58:47.887000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "that maps to `params: [{from: \"0x0\"}]` nicely, but if geth support by name, it would support `params: { transaction: { from: \"0x0\" } }`",
        "created_at": "2021-07-06T17:58:49.271000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "so it's only necessary to create content descriptors for top level params of methods?",
        "created_at": "2021-07-06T18:01:41.364000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "e.g. `nonce` doesn't need a content descriptor because it always has to be named, but `transaction` should?",
        "created_at": "2021-07-06T18:02:05.698000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "yes, and they are used as top level result 'descriptors'",
        "created_at": "2021-07-06T18:02:18.478000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "result descriptors are debatable, as they are pretty simple, but it helps lib builders and tooling if they just have to deal with top level contentdescriptors",
        "created_at": "2021-07-06T18:03:11.154000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "okay i think can get on board with that, but things like `Miner` IMO shouldn't have content descriptors since they are not exposed at the top level",
        "created_at": "2021-07-06T18:03:50.286000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "yea, i actually liked the way you had your rewrite with no reffed content descriptors",
        "created_at": "2021-07-06T18:05:10.214000+00:00",
        "attachments": null
    },
    {
        "author": "superfreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "but at some point you probably gotta re-use em",
        "created_at": "2021-07-06T18:05:59.412000+00:00",
        "attachments": null
    }
]