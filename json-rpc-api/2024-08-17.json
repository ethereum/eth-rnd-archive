[
    {
        "author": "jochembrouwer",
        "category": "Execution Layer",
        "parent": "",
        "content": "Hey all, has there been a discussion somewhere regarding JSON-RPC for EOF? For instance, what should `eth_getCode` return when called on an EOF contract? ðŸ¤” \u003c@403707149043105803\u003e",
        "created_at": "2024-08-17T11:54:11.020000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Execution Layer",
        "parent": "",
        "content": "The same goes for 7702. Should it return the actual code, or the code it is delegated to? \u003c@543900561460822016\u003e",
        "created_at": "2024-08-17T11:54:29.713000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Execution Layer",
        "parent": "",
        "content": "I would assume that both would still return the raw bytecode of the contract though (and let downstream handlers of `eth_getCode` process it to return whatever the user expects)",
        "created_at": "2024-08-17T11:55:16.742000+00:00",
        "attachments": []
    },
    {
        "author": "empir.ether",
        "category": "Execution Layer",
        "parent": "",
        "content": "The Ethereum JSON-PRC spec contains an eth_getCode method, but it is not specified what is being retrieved",
        "created_at": "2024-08-17T12:00:18.620000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Execution Layer",
        "parent": "",
        "content": "Well, it says \n\n```\neth_getCode\nReturns code at a given address.\n```\n\nSo this is somewhat ambiguous for EOF I think",
        "created_at": "2024-08-17T12:03:47.347000+00:00",
        "attachments": []
    },
    {
        "author": "empir.ether",
        "category": "Execution Layer",
        "parent": "",
        "content": "The command eth_getCode returns the bytecode associated with the address in the Ethereum world state, that will be the deployed bytecode (or runtime bytecode)",
        "created_at": "2024-08-17T12:10:44.901000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Execution Layer",
        "parent": "",
        "content": "Right, so for EOF that should be the container?",
        "created_at": "2024-08-17T12:11:33.655000+00:00",
        "attachments": []
    },
    {
        "author": "empir.ether",
        "category": "Execution Layer",
        "parent": "",
        "content": "I guess so",
        "created_at": "2024-08-17T12:12:00.997000+00:00",
        "attachments": []
    },
    {
        "author": "empir.ether",
        "category": "Execution Layer",
        "parent": "",
        "content": "The init bytecode could be obtained from the deployment transaction's data field, unless it was created by a contract in which case you have to trace the transaction to obtain the details",
        "created_at": "2024-08-17T12:14:00.175000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think using eth_getCode to get the EOF code for an account is fine.  The EVM doesn't have access to it, and clients/networks can always do something different as eth_getCode is outside of consensus.",
        "created_at": "2024-08-17T14:52:28.973000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think it should return the code that is actually present at the address, not the delegated code",
        "created_at": "2024-08-17T14:53:39.551000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "Execution Layer",
        "parent": "",
        "content": "Cool, agree with both ðŸ˜„",
        "created_at": "2024-08-17T14:54:31.915000+00:00",
        "attachments": []
    }
]