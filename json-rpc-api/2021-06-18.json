[
    {
        "author": "timbeiko",
        "category": "Execution Layer",
        "parent": "",
        "content": "Can someone explain what the two different \"specs\" on the JSON RPC repo aim to provide? There are a few new PRs (e.g. https://github.com/ethereum/eth1.0-specs/pull/216) which seem to go for a longer, more descriptive spec vs. the one that is already there (https://playground.open-rpc.org/?uiSchema%5BappBar%5D%5Bui:splitView%5D=false\u0026schemaUrl=https://raw.githubusercontent.com/ethereum/eth1.0-specs/master/json-rpc/spec.json\u0026uiSchema%5BappBar%5D%5Bui:input%5D=false). Is there value in having both? cc: \u003c@!104006934562107392\u003e \u003c@!489256758989029405\u003e \u003c@!543900561460822016\u003e",
        "created_at": "2021-06-18T15:35:47.022000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't understand the need for the non-openrpc spec. I believe ~95% of the rpc spec can be clearly defined within the bounds of the openrpc format. Most of the \"verbose\" requirements of the RPC can just be defined with regular expressions and a description. The ~5% that depends on internal interpretations of the spec can be documented clearly in the description. Once we have the rpc spec encoded in the openrpc format we can do lots of nice automated things like run tests against clients in CI and make sure they return correct values. I would prefer we focus our efforts on that rather than the alternative waterfall format.",
        "created_at": "2021-06-18T15:53:36.731000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "This is a widely unanswered question. \u003c@489256758989029405\u003e can answer better as he is the stakeholder for the edgecasing work that we're doing. \n\nThe primary value added is that it very strictly defines the behavior of the endpoints. It is also where edgecase tests come from. A good examine of this is that eth_gasPrice returns a different value based on the ethereum network at large. This is outside of the scope of the standard OpenRPC spec. \n\nThe more verbose specification is an implementor specification which can be used for standardizing the behavior of the JSON RPC client.\n\nI am currently being paid to do both. And when I get paid I tend to default to whoever the stakeholder is (@tkstanczak). I think it would be good to come to a conclusion here before we spend more time and money on something that doesn't appear to have value consensus.\n\nTo answer your question more simply, it's meant to be used by people that are actually building the endpoint. The specific edgecases can be automated into tests which are not possible via regex as \u003c@543900561460822016\u003e pointed out, but this will still be done in conjunction.\n\nThis appears to be a question of 80 / 20 wherein the remaining 20Ã· of the test coverage takes 80Ã· of the work. In any other situation I would say that we should not put in the extra effort, but when it comes to communication and consensus between clients on how the endpoints behave it may be worth it. But again, I want to default to my stakeholder \u003c@489256758989029405\u003e to provide the specific value add justification and who else is on board with this.",
        "created_at": "2021-06-18T16:57:04.057000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "Agreed, we should come to consensus on this. I think it would be useful to have a couple examples of things that are difficult to express in the openrpc format. The main things I can think of are things like `eth_gasPrice` or `eth_estimateGas` where there could be implementations could vary significantly under the hood. Basic getter methods shouldn't really have any edge cases afaik.",
        "created_at": "2021-06-18T17:02:28.644000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Execution Layer",
        "parent": "",
        "content": "Perhaps a dumb question, but do we _want_ to force common behavior in things like `eth_gasPrice`?",
        "created_at": "2021-06-18T17:03:15.035000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think \u003c@!322222239850168331\u003e would like to see clients be closer in their approximations.",
        "created_at": "2021-06-18T17:03:49.445000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Execution Layer",
        "parent": "",
        "content": "IMO this is a case where client teams can actually differentiate themselves and offer a better experience to their users",
        "created_at": "2021-06-18T17:04:17.522000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "Yeah this is a good point",
        "created_at": "2021-06-18T17:04:37.815000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Execution Layer",
        "parent": "",
        "content": "Not a very strong opinion, but it seems like it may be quite hard for folks to come to agreement + it removes one \"degree of freedom\" that clients have",
        "created_at": "2021-06-18T17:04:41.979000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "hmm, it would be better if we instead pointed out a subset of the endpoints that are worth edgecasing",
        "created_at": "2021-06-18T17:05:02.627000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Execution Layer",
        "parent": "",
        "content": "And, IMO it's also better to have a case where the return type is defined and clients can provide better algorithms than having clients with their own set of non-standard APIs (e.g. `parity_trace*`) which end up causing massive lock-in, to the extent that other client teams have to then replicate them up to the bugs ðŸ˜…",
        "created_at": "2021-06-18T17:05:27.135000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "So this is where client review comes in",
        "created_at": "2021-06-18T17:05:47.875000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution Layer",
        "parent": "",
        "content": "I would like to see most endpoints strictly defined and underspecified endpoints being the exception",
        "created_at": "2021-06-18T17:06:17.455000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "Wherein they all read the edgecases and then either agree or reject with the idea being that they can maintain as much or as little freedom as they have consensus for",
        "created_at": "2021-06-18T17:06:33.060000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "Execution Layer",
        "parent": "",
        "content": "Regarding the detail of the specification, I would like to see a good OpenRPC standard and have the edgecases be in the form of test cases rather than in plain english",
        "created_at": "2021-06-18T17:07:48.288000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "Agreed \u003c@552133098075193354\u003e but this is why review is important",
        "created_at": "2021-06-18T17:08:10.149000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@360491619402776577\u003e that sounds reasonable. Keep in mind that the plain English is the way that it is because it's the equivalent of describing explicit test cases",
        "created_at": "2021-06-18T17:09:23.206000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "All of which are derived from data driven experimentation to maximize its translatabikity once we get to that stage",
        "created_at": "2021-06-18T17:10:58.516000+00:00",
        "attachments": []
    },
    {
        "author": "tkstanczak",
        "category": "Execution Layer",
        "parent": "",
        "content": "Hi guys, the specs to be provided are EIP-1474 basic spec, OpenEthereum spec and edge cases",
        "created_at": "2021-06-18T17:10:58.709000+00:00",
        "attachments": []
    },
    {
        "author": "tkstanczak",
        "category": "Execution Layer",
        "parent": "",
        "content": "For each endpoint we will have three sections -\u003e EIP-1474 style explanation of types, technical OpenEthereum like spec and edge cases for implementers and test builders",
        "created_at": "2021-06-18T17:11:37.670000+00:00",
        "attachments": []
    },
    {
        "author": "tkstanczak",
        "category": "Execution Layer",
        "parent": "",
        "content": "This is based on multiple meetings where various stakeholders were invited to discuss together",
        "created_at": "2021-06-18T17:11:55.168000+00:00",
        "attachments": []
    },
    {
        "author": "tkstanczak",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!543900561460822016\u003e you may want to watch the recordings of this discussion to see various requirements that various stakeholders had:  https://github.com/ethereum-oasis/eth1.x-JSON-RPC-API-standard",
        "created_at": "2021-06-18T17:12:45.724000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "thanks, i'll check them out!",
        "created_at": "2021-06-18T17:12:58.119000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!489256758989029405\u003e seems like there are passcodes on most of the calls after the second one?",
        "created_at": "2021-06-18T17:38:45.978000+00:00",
        "attachments": []
    },
    {
        "author": "gregthegreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "I honestly think they need to be closer or weâ€™re all going to just use the same client.",
        "created_at": "2021-06-18T17:46:44.489000+00:00",
        "attachments": []
    },
    {
        "author": "gregthegreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "For some of our software we have to use specific commits because I donâ€™t trust the gas price",
        "created_at": "2021-06-18T17:47:22.873000+00:00",
        "attachments": []
    },
    {
        "author": "gregthegreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "We shouldnâ€™t expect the differentiation from something that is so core to the protocol.",
        "created_at": "2021-06-18T17:47:52.744000+00:00",
        "attachments": []
    },
    {
        "author": "gregthegreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "If client teams want to differentiate by having the ability to spin up 100 mempools and maybe 10 instances of chain syncer that can be tied together so be it, but not having the gas the standard to some degree of error seems wrong.",
        "created_at": "2021-06-18T17:49:00.363000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "From what i was able to see, on call 2 (asia / pacific) at 45:55 it appears everyone was sold on open rpc? So i'm not sure why 1474 format continued to be pursued. On the agenda, it seems like openrpc spec is an auxiliary item to the spec pipeline, but imo this is confusing because it is actually a stand alone spec of json-rpc?",
        "created_at": "2021-06-18T17:50:23.908000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!88765147048333312\u003e do you have any insight on why openrpc wasn't pursued as the canonical spec format?",
        "created_at": "2021-06-18T17:51:06.398000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "I'm sorry I'm bringing these things up now and I wasn't involved in these original calls. It looks like the group did great work on deciding how to go about this spec work and I agree with everything in the pipeline except the EIP-1474 work. I strongly believe OpenRPC can replace the EIP-1474 format and it will make the rest of the things in the pipeline easier -\u003e auto-generate docs for ethereum.org, derive test cases from the spec itself, and more",
        "created_at": "2021-06-18T17:54:38.604000+00:00",
        "attachments": []
    },
    {
        "author": "gregthegreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "Afaik Virgil was trying to get it going. But ya",
        "created_at": "2021-06-18T17:54:39.975000+00:00",
        "attachments": []
    },
    {
        "author": "gregthegreek",
        "category": "Execution Layer",
        "parent": "",
        "content": "That sorta stopped",
        "created_at": "2021-06-18T17:55:00.799000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "We're doing it in open RPC and then the edge cases are in markdown",
        "created_at": "2021-06-18T20:12:56.216000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "i guess iâ€™m confused then because the openrpc spec isnâ€™t done yet",
        "created_at": "2021-06-18T20:44:43.053000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "ah, it's in the works. Remember that I have worked approximately 2-3 weeks in total in terms of actual time spent and the OpenRPC that you mentioned previously was introduce about a week ago (in this time scale) and I've been hiring / training someone. So it's in progress, I can share you what I have so far if you want?",
        "created_at": "2021-06-18T20:58:08.045000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "i think itâ€™s best if you just open a draft PR against the eth1.0-apis repo",
        "created_at": "2021-06-18T21:01:04.329000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "that way we can follow along and comment on things in the open",
        "created_at": "2021-06-18T21:01:23.733000+00:00",
        "attachments": []
    },
    {
        "author": "alita85",
        "category": "Execution Layer",
        "parent": "",
        "content": "will do that today",
        "created_at": "2021-06-18T21:01:30.669000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution Layer",
        "parent": "",
        "content": "thank you \u003c@!104006934562107392\u003e!",
        "created_at": "2021-06-18T21:11:18.390000+00:00",
        "attachments": []
    }
]