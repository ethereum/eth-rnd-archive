[
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e Considering the comment below are you still insisting on removing `latest` from the enum?\n\nhttps://github.com/ethereum/execution-apis/pull/200#pullrequestreview-921609481",
        "created_at": "2022-03-30T09:40:42.482000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I didn't find \u003c@291925846556540928\u003e's argument against deprecating latest to be very compelling.  If a new developer is building something post-merge, there is no reason I can think of why they should use `latest`, hence why it should be deprecated.",
        "created_at": "2022-03-30T09:43:28.650000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "That is, you can more precisely use `unsafe` or `justified`, depending on what you actually want, and I don't see why a new developer would use latest.",
        "created_at": "2022-03-30T09:44:21.936000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Unless the plan is to move `latest` to `safe` after we have fast safe, and the idea would be that a new developer can use `latest` in anticipation of that transition?",
        "created_at": "2022-03-30T09:45:13.998000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Btw, we will not have `justified` because it requires breaking changes to Engine API (an extra field added to the `forkchoiceUpdated` call) and if `safe` points to justified it doesn't add much value to introduce separate tag for justified. After `safe` will be replaced with more advanced algorithm that returns a block much closer to the head then it will have even less value.",
        "created_at": "2022-03-30T09:46:54.591000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "We will never expose `justified` to EL?",
        "created_at": "2022-03-30T09:47:26.488000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Unless we see a value of doing so. If we have `safe` that is close to the head and have `finalized` which is secured crypto-economically I don't see a big value for adding `justified` which isn't theoretically guaranteed to forever stay in the chain, `justified` maintains a weaker security than `finalized`",
        "created_at": "2022-03-30T09:49:40.116000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "No new devs should use `latest` -- I agree with that, but removing it from the spec means that clients may not support it right after it's been removed -- this is what we don't want to happen",
        "created_at": "2022-03-30T09:52:09.889000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I disagree with this statement: \"removing it from the spec means that clients may not support it right after it's been removed\"",
        "created_at": "2022-03-30T09:53:43.685000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Deprecated (IMO) means that new JSON-RPC clients shouldn't use it, but it will remain supported server side until some point in the future.",
        "created_at": "2022-03-30T09:54:01.547000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "In HTML:\n\u003e So as the blog you linked to eludes, obsolete elements should never be used, there are alternatives available. For deprecated elements, browsers will generally still support and render them for backwards-compatibility, but your page will not pass conformance validation.",
        "created_at": "2022-03-30T09:54:57.938000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003chttps://www.w3.org/TR/html401/conform.html#h-4.1\u003e\nDeprecated: [...] User agents should continue to support deprecated elements for reasons of backward compatibility. [...]\nObsolete: [...] for which there is no guarantee of support by a user agent [...]",
        "created_at": "2022-03-30T09:56:15.569000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "I would expect it's marked as deprecated in the description but still exist among enum values as a supported one. Once it's removed from enum values it would mean that some point in the future is already in the past and it's been removed entirely",
        "created_at": "2022-03-30T09:56:25.949000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "I don't think we disagree on the deprecation. We probably disagree on how to correctly mark it as deprecated",
        "created_at": "2022-03-30T09:56:52.540000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "I think this is an issue with OpenRPC and being unable to attach details to specific enum elements.  If we could leave it in the list, but marked such that it was immediately obvious to all readers that it shouldn't be used, then I would agree.",
        "created_at": "2022-03-30T09:57:20.588000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "By only having the deprecation info in the description, I'm concerned that most people won't read it.",
        "created_at": "2022-03-30T09:57:52.950000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "That being said, I can see myself being convinced to leave it in the enum and do our best to draw attention to its deprecation status.",
        "created_at": "2022-03-30T09:58:08.668000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Re: Justified, I feel like there is value in giving the EL escalating information on the path from `unsafe` to `finalized`.  The more concrete \"steps\" along the way, the more apps are able to appropriately build to target whatever it is that they need to target for their use case.",
        "created_at": "2022-03-30T09:59:00.046000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "`unsafe \u003e safe \u003e justified \u003e finalized` seems strictly superior to `unsafe \u003e safe \u003e finalized`.",
        "created_at": "2022-03-30T09:59:30.025000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "What is the complexity addition like for adding justified?  I assumed that it was information the CL already had and could trivially forward along to the EL.  Is it, for some reason, hard to access or transmit information about?",
        "created_at": "2022-03-30T10:00:10.324000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "It's not hard but it requires a coordinated upgrade on Kiln as the new version of Engine API with justified field sent to EL won't be backward compatible with the current version.\n\nUnderstanding the flavour of `justified` vs `finalized` requires a deeper understanding of Casper FFG, not sure if many ppl would like to dive that deep to make a meaningful usage of `justified` in their apps/services. So, it feels to me that `justified` won't be that popular and valuable",
        "created_at": "2022-03-30T10:23:37.649000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "What is the time difference between justified and finalized?",
        "created_at": "2022-03-30T10:26:18.460000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "`justified` is usually 1 epoch closer to the head than `finalized`",
        "created_at": "2022-03-30T10:30:28.344000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "In a healthy network (a network that justifies every epoch) a `finalized` and `justified` blocks may be 3 and 2 epochs behind the head respectively in the worst case. We have 1 extra epoch because Casper FFG votes are targeted to the first slot in the epoch.",
        "created_at": "2022-03-30T10:36:54.995000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Agreed. Probably \"DEPRECATED\" at the beginning of the description will be more noticeable than at the end",
        "created_at": "2022-03-30T11:02:19.868000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution Layer",
        "parent": "",
        "content": "Hmm, so the order of magnitude of time between finalized and justified is similar?",
        "created_at": "2022-03-30T11:13:55.746000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "Yes, it is. And i would say that on the Mainnet if we have regular justification then finalized block will almost always closely follow the most recent justified one. If justification is irregular and appears from time to time then the network is experiencing a mass liveness failures, not sure if `justified` will be reliable under this circumstances.",
        "created_at": "2022-03-30T11:20:55.391000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Execution Layer",
        "parent": "",
        "content": "as long as safe is trailing by an epoch, many many users are going to want to use `latest` or `unsafe`. thus a notion of `latest` seems semantically valuable until `safe` is *usually* following closely behind the head (if not equal to)",
        "created_at": "2022-03-30T18:17:40.756000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Execution Layer",
        "parent": "",
        "content": "but.. as long as `latest` isn't removed immediately, I'm fine.\nI don't think it should be fully removed until `safe` algorithm proves more useful",
        "created_at": "2022-03-30T18:18:15.310000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Execution Layer",
        "parent": "",
        "content": "FYI, https://github.com/ethereum/execution-apis/pull/200#issuecomment-1083296734",
        "created_at": "2022-03-30T18:42:55.334000+00:00",
        "attachments": []
    }
]