[
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@689161464829050960\u003e  What is step 2 there?",
        "created_at": "2020-10-23T01:59:32.899000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Grandma's wallet would have a contract caller entry point that looks like the AA entry point but without PAYGAS?",
        "created_at": "2020-10-23T02:02:39.706000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, it'd have an entry point for AA transactions that calls `PAYGAS` and an entry point for normal calls that uses `COMMIT_GAS`. Both could verify a BLS signature or whatever else you want.",
        "created_at": "2020-10-23T02:07:47.050000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What is commit gas again?",
        "created_at": "2020-10-23T02:11:43.083000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Guarantee that you will spend at least N gas within that call context",
        "created_at": "2020-10-23T02:11:58.189000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Why is that necessary here?",
        "created_at": "2020-10-23T02:12:42.407000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In this specific context I mean.",
        "created_at": "2020-10-23T02:13:04.477000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "To maintain the invariant that there's a lower bound on the cost of changing the state of an account that's an AA target",
        "created_at": "2020-10-23T02:13:09.122000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, right.  Since you'll be calling into an AA contract, you have to commit to a certain amount of gas used so it is costly to change state for that account.",
        "created_at": "2020-10-23T02:13:56.689000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is there any way to make it so AA contracts don't have to duplicate all of their entry points like that?",
        "created_at": "2020-10-23T02:14:51.256000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It is mildly annoying that every AA contract will probably have two copies of every entry point, one for self pays gas and one for sponsor pays gas.",
        "created_at": "2020-10-23T02:15:27.867000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The validation code for both will be the same, and the execution code too.",
        "created_at": "2020-10-23T02:16:07.425000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That could be a calling convention that solidity takes care of",
        "created_at": "2020-10-23T02:21:08.219000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Where Solidity would duplicate the functions for you?",
        "created_at": "2020-10-23T02:25:47.987000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Solidity wouldn't duplicate the functions, not really. It would set up the environment so that the calldata is in the same place for AA transactions and external calls before passing control to the validation function.",
        "created_at": "2020-10-23T04:09:58.749000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And the code would branch on whether or not this was the first call frame in a transaction?",
        "created_at": "2020-10-23T04:11:22.362000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Or would you still need two different entrypoints?",
        "created_at": "2020-10-23T04:11:37.031000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah, like whether or not it would call `PAYGAS`?",
        "created_at": "2020-10-23T04:14:50.770000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That would certainly be tricky, since you have different revert behaviour depending on what context you're in.",
        "created_at": "2020-10-23T04:15:15.281000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You can always tell, by checking `tx.origin`, but it'll take some thought to make it ergonomic in solidity.",
        "created_at": "2020-10-23T04:15:39.611000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "IIUC, the gist here is that if Grandma wants to submit a transaction they would sign a transaction that does multiple operations in a row, where the first operation is the transaction Grandma actually wants to do and the second operation is to pay the relayer (msg.sender)?",
        "created_at": "2020-10-23T04:16:43.232000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "She'd sign a sub-transaction that actually does the work, and the main transaction would pay the relayer.",
        "created_at": "2020-10-23T04:17:48.536000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "For a simple dapp, the transaction may be `kitty.buy()`, and the wallet would turn that into a 2-part execution transaction that does `kitty.buy()` followed by `token.transfer(msg.sender, gasFeeInToken)`",
        "created_at": "2020-10-23T04:18:12.996000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, something like that",
        "created_at": "2020-10-23T04:18:39.700000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And what do you mean by \"sub transaction\"?",
        "created_at": "2020-10-23T04:18:44.370000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I was imagining a single signed transaction that executes two CALLs internally.",
        "created_at": "2020-10-23T04:18:57.008000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, you'd have one EIP-2938 transaction with two signed packages inside:\n\n1) Deduct some amount of Dai from grandma, so the relayer can convert it into ETH.\n2) Whatever action grandma wants her wallet to perform.",
        "created_at": "2020-10-23T04:23:46.727000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The relayer would check (1), exchange the Dai, then `CALL` into grandma's wallet with (2)",
        "created_at": "2020-10-23T04:24:27.091000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It's important to note that grandma's Dai has to actually be owned by the relayer",
        "created_at": "2020-10-23T04:25:50.817000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What prevents the relayer from only executing (1)?",
        "created_at": "2020-10-23T04:25:53.001000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Auditing the contract, I suppose.",
        "created_at": "2020-10-23T04:26:05.459000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Wait, why would Grandma's DAI need to be owned by the relayer?",
        "created_at": "2020-10-23T04:26:13.016000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "To comply with the rules for the transaction propagation",
        "created_at": "2020-10-23T04:26:38.771000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No external state.",
        "created_at": "2020-10-23T04:26:44.173000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The whole idea here is to make it so Grandma's account has DAI in it, not that she has rights to someone else's DAI.  Without that, all tools would show Grandma as having no DAI.",
        "created_at": "2020-10-23T04:26:47.451000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And we want Grandama's account to work with tools (e.g., show token balances correctly).",
        "created_at": "2020-10-23T04:27:21.101000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Tools will need to be updated, for sure.",
        "created_at": "2020-10-23T04:29:55.928000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You can't really get around needing the ETH to pay for gas when you call `PAYGAS`, and you can't do the exchange until after you `PAYGAS`.",
        "created_at": "2020-10-23T04:30:37.238000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Let me rephrase that. **I** can't think of a way around it at 12:30 am ;3",
        "created_at": "2020-10-23T04:31:24.509000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Someone else might be able to.",
        "created_at": "2020-10-23T04:31:32.864000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But EIP-2938+ does let you transact without ETH, if the infrastructure is in place.",
        "created_at": "2020-10-23T04:32:26.849000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think what we end up with is just layer 2 meta transactions again essentially, which is unfortunate.",
        "created_at": "2020-10-23T04:43:05.189000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "In this case, a contract (which may or may not be AA) can receive a signed multi-call and validate the signature then execute each part of the multicall in sequence.",
        "created_at": "2020-10-23T04:44:03.278000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Where the signature may be BLS or m of n multisig or whatever.",
        "created_at": "2020-10-23T04:44:37.444000+00:00",
        "attachments": []
    },
    {
        "author": "jc6763",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Today friday at 13:30 EDT \u003c@689161464829050960\u003e and \u003c@415548822983278593\u003e will be presenting developerâ€™s guide to account abstraction https://ethglobal.online/future/",
        "created_at": "2020-10-23T08:30:19.344000+00:00",
        "attachments": []
    },
    {
        "author": "trent_vanepps",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "thanks for linking \u003c@!527027407228502037\u003e , was just coming to remind folks",
        "created_at": "2020-10-23T15:47:45.892000+00:00",
        "attachments": []
    },
    {
        "author": "trent_vanepps",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hope to see people there!",
        "created_at": "2020-10-23T15:47:52.338000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I hope that was a somewhat useful overview of our current thinking on AA\nYou can find the slides at https://tinyurl.com/eth-global-aa",
        "created_at": "2020-10-23T18:14:32.139000+00:00",
        "attachments": []
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "great talk!!",
        "created_at": "2020-10-23T18:14:45.952000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "thanks!",
        "created_at": "2020-10-23T18:15:11.536000+00:00",
        "attachments": []
    },
    {
        "author": "ansgar.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I also very much recommend the talk Vitalik gave a week ago, that gives a bit more context for AA in general, where we today focussed on the specifics of the EIP\nhttps://youtu.be/_DUHTJEoaX0",
        "created_at": "2020-10-23T18:16:05.780000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "BTW you can add two more use cases:",
        "created_at": "2020-10-23T23:31:00.257000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "* Merkle tree airdrops",
        "created_at": "2020-10-23T23:31:04.265000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "* Withdrawals from eth2",
        "created_at": "2020-10-23T23:31:09.179000+00:00",
        "attachments": []
    }
]