[
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@552133098075193354\u003e anyone can ping an AA contract to execute.",
        "created_at": "2020-10-28T02:35:08.208000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If the AA determines that \"ping\" is valid, then the transaction will propagate, if not then it will get dropped.",
        "created_at": "2020-10-28T02:35:35.512000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Just like how if you submit a transaction with an invalid secp256k1 signature right now it will get dropped.",
        "created_at": "2020-10-28T02:36:14.027000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are there any plans to turn *all* accounts into AA accounts?",
        "created_at": "2020-10-28T04:40:11.170000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "One of the nice things about Rich Transactions is that someone with an AA account can do transaction sequencing (approve then call in one transaction).  With AA, I think the person would need to first convert their account to AA, and then introduce a mechanism into their specific AA contract that supports sequencing (e.g., `executeSequence(address[], bytes4[], bytes[])`).",
        "created_at": "2020-10-28T04:41:45.729000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This means that dapps are very unlikely to switch over to sequencing since the vast majority of existing accounts don't support sequencing natively, and we'll really only see bots leverage it.",
        "created_at": "2020-10-28T04:42:21.321000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If AA forced all existing accounts over to AA with some standard contract that supports sequencing, then dapps could depend pretty strongly on that functionality and build around it, and signers could have integration with it (e.g., show sequence of calls being made in the transaction).",
        "created_at": "2020-10-28T04:43:11.104000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If there is no plan for such a thing, then I think Rich Transactions still have a place side-by-side with AA, which is a bit unfortunate due to the functionality overlap that still exists.",
        "created_at": "2020-10-28T04:43:41.918000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e \u003c@!552133098075193354\u003e anyone can ping an AA contract to execute.\nWhat is \"anyone\" (EOAs? Accounts?) and what does \"ping\" mean? For example, if I use AA-Tornado-Cash, who \"pings it\" to withdraw and what does that entail?",
        "created_at": "2020-10-28T13:44:07.399000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!552133098075193354\u003e it's the same as EOAs. If you want to \"ping\" the account to do something, you construct a transaction and share it with a node. That node validates it. For EOAs, this check is predefined -- ensure nonce is valid and balance is sufficient. For AA the check is arbitrary. One the node determines the tx is valid, it shares with the network. You can imagine AA works the exact same way as EOA txs, except when a node validates it, it reads the code from the contract to get the validation logic, rather than using the predefined setup.",
        "created_at": "2020-10-28T13:58:34.669000+00:00",
        "attachments": []
    },
    {
        "author": "timbeiko",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "TY this is exactly what I was looking for ðŸ™‚",
        "created_at": "2020-10-28T13:59:06.370000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So gaspay is automatically called after the AA_TX finishes executing the call and the validation?",
        "created_at": "2020-10-28T16:14:56.996000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What happens first, is the call or the validation?",
        "created_at": "2020-10-28T16:15:40.209000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "For example, if a call ends up causing a validator to have balance, it would be valid?\nIn EOAs, it has to contain some gas, because when it signs the transaction nodes check for validity against account.balance \u003e gas.price * gas.limit. Is this check still valid for AA?",
        "created_at": "2020-10-28T16:19:43.471000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The contract itself needs to call `PAYGAS`, though solidity might hide the specifics. We haven't thought too much about how that'll look.\n\nThe \"validation\" and \"execution\" phases aren't part of the protocol really, they're just human names for the parts of execution that happns before `PAYGAS` and after `PAYGAS`, respectively.",
        "created_at": "2020-10-28T16:56:15.687000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The AA contract's balance is checked when `PAYGAS` is called.",
        "created_at": "2020-10-28T16:57:03.130000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If you want to do something fancy, like exchange a token for ETH to pay for gas, you have to get enough ETH to cover the entire gas limit, then refund at the end.",
        "created_at": "2020-10-28T16:58:21.174000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "So it looks like it can just convert to ETH (as in uniswap), but cant pay directly an ERC20... I would prefer that a block creator could accept directly other tokens",
        "created_at": "2020-10-28T17:16:46.216000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That would certainly be ideal, but I think that requires working out the specifics with miners",
        "created_at": "2020-10-28T17:17:19.515000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I guess it would be just using gas price zero and giving a payment in a token to coinbase?",
        "created_at": "2020-10-28T17:17:41.617000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yep",
        "created_at": "2020-10-28T17:17:51.970000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Seems that this could be considered in the proposal, as this could be used to allow a block creator simply select what tokens they want to accept? \nMaybe it could be a option of the block creator, to or accept as ERC20 or convert it to ETH and receive in ETH",
        "created_at": "2020-10-28T17:19:41.812000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Another thing to consider is that, paygas could, instead of sending ETH from one account to other, verify the delta of coinbase balance (since the start of the transcation), meaning that the gas could be paid from a regular value transfer.",
        "created_at": "2020-10-28T17:22:13.671000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This could allow better optimization on how gas is paid, and also would allow to extend to support custom \"delta coinbase balance\" function, that check ERC20 instead of ETH.",
        "created_at": "2020-10-28T17:23:37.181000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am unsure what is better for interoperability, specially for low liquidity tokens, to be directly paid in ERC20 (with low chance of having miners), or having to find an order/pool to fulfill the exchange? \nFor high liquidity tokens, I think that either would work fine, maybe directly ERC20 would work better, specially when a case where \"user have DAI\" and wants to pay gas, swaps to ETH, coinbase wants to keep DAI, swaps back to DAI.",
        "created_at": "2020-10-28T17:31:36.840000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thinking about it a bit more, it isn't as simple as setting a zero gas price. Every node, not just miners, would have to decide whether to propagate a transaction to other nodes, based on what the coinbase receives. To figure out which transactions to evict when the mempool fills up, you'd need an ordering between transactions paying in different tokens... That seems pretty complex?\n\n\u003e Another thing to consider is that, paygas could, instead of sending ETH from one account to other [...]\n\n`PAYGAS` just sets the gas price and limit. The rest of the fee payment machinery from normal transactions is still used.\n\nAllowing subcalls to pay the coinbase (I assume that's what you mean?) would be neat, but as specified, AA contracts can't even call out to other contracts before `PAYGAS`.",
        "created_at": "2020-10-28T18:05:42.637000+00:00",
        "attachments": []
    },
    {
        "author": "3esmit.stateofus.eth",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e AA contracts can't even call out to other contracts before PAYGAS.\nUnless \"Uniswap (or alike)\" could use indestructible?",
        "created_at": "2020-10-28T19:15:38.535000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "While indestructible allows delegate calls, any external state access runs the risk of a mempool wipe.\n\nImagine if there were thousands of AA transactions to different contracts that all get invalidated by a token price change.",
        "created_at": "2020-10-28T20:05:02.288000+00:00",
        "attachments": []
    },
    {
        "author": "trent_vanepps",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "here is the recording from \u003c@!689161464829050960\u003e and \u003c@!415548822983278593\u003e's talk last friday!\n\nhttps://www.youtube.com/watch?v=tKPo-Y74ces",
        "created_at": "2020-10-28T20:11:16.730000+00:00",
        "attachments": []
    }
]