[
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Forwarding this from \u003c@!543900561460822016\u003e. Please share to your networks and retweet to help broadcast the RFP\n\nhttps://twitter.com/lightclients/status/1379793891033931776?s=20\n\nhttps://notes.ethereum.org/@djrtwo/eip-3074-audit-rfp",
        "created_at": "2021-04-07T14:19:15.050000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "RE: 3074",
        "created_at": "2021-04-07T14:37:09.942000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have a bit of concerns about this `valueExt` thing. Even though it is a no-op currently, EIP states that in the future it can be used to transfer value from `authorized`. Why is this then not part of the message-to-sign? The simple attack here is; `authorized` gives other EOA a valid signature, thinking that they only transfer X eth, but the `valueExt` is actually changed at runtime and instead transfers all eth of the account. You could also create fancy stuff with CREATE2 re-instantiations (although EIP notes that implementer contract should **not** be upgradable)",
        "created_at": "2021-04-07T14:37:11.667000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do I get it correctly that if a valid signature gets into mempool, then each EOA can submit this transaction? It only matters what target contract is used, right, not the actual sender (`ORIGIN`)?",
        "created_at": "2021-04-07T14:37:27.273000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I am also assuming the contract which executes `AUTH` is itself responsible to guard against re-entrancies?",
        "created_at": "2021-04-07T14:37:47.336000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I generally like that this EIP gives a lot of freedom regarding tx-security, like re-entrancy or other concerns, it is now enforced at EVM level and not at protocol level.",
        "created_at": "2021-04-07T14:39:05.548000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!508125616940515329\u003e i think this concern is the same as the general concern that `AUTH` doesn't explicitly verify any part of the signed message *except* the invoker value - everything else is shoved into `commit`",
        "created_at": "2021-04-07T14:40:23.527000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "e.g. place ether in your concern above with any erc20 token",
        "created_at": "2021-04-07T14:40:48.799000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "it's just that eth transfers shouldn't be specified with call data",
        "created_at": "2021-04-07T14:41:23.052000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, I think I just realized that it is basically a design choice of this EIP, and the the contract itself does these checks on `commit`. So for instance it takes `valueExt` from the commit",
        "created_at": "2021-04-07T14:41:52.725000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i don't think any mempool changes will occur, it's likely that external networks will pop up (like GSN) to find a sponsor",
        "created_at": "2021-04-07T14:42:06.863000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah I guess this concern can also be mitigated, you put the expected `ORIGIN` in `commit`",
        "created_at": "2021-04-07T14:43:15.637000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This will put a lot of security related work on contract developers, but I think this is fine, we will probably see OpenZeppelin or others create some standard patterns here",
        "created_at": "2021-04-07T14:44:21.978000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i actually don't think this will put security related work on contract developers, i believe it is wallet developers that will bear this weight",
        "created_at": "2021-04-07T14:45:22.664000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Well, the smart contracts should enforce things like replay protection right?",
        "created_at": "2021-04-07T14:46:18.988000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i'm making the distinction between \"smart contracts\" and \"invoker contract\". These contracts should be treated as a very special contract and should be implemented very carefully and audited / statically analyzed very heavily",
        "created_at": "2021-04-07T14:48:41.510000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ah right, you would treat the invoker contract as a 'wallet' here? Yeah I agree, these things should be approached with extreme caution",
        "created_at": "2021-04-07T14:50:45.578000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I anticipate that people will be so cautious of 3074 invokers that wallets will hard code certain trusted invokers and only allow signatures to those, avoiding any security issues of interacting with a malicious invoker",
        "created_at": "2021-04-07T14:56:02.884000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I am currently of the opinion that most of the security \"concerns\" I've seen raised (including this one) are actually intentional design decisions or things that may not be able to be mitigated without imposing significant detrimental limitations on the functionality, and thus they must be addressed by providing very thorough educational material and implementers guides",
        "created_at": "2021-04-07T15:08:32.533000+00:00",
        "attachments": null
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "+1 to a detailed implementer's guide. I tried to list some of the obvious concerns in the EIP itself, but there's gonna have to be a chunk of work to research what exactly is required to make a safe invoker.",
        "created_at": "2021-04-07T18:47:52.879000+00:00",
        "attachments": null
    },
    {
        "author": "ryanleeschneider",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Have we ever enabled an EIP in a testnet fork before it's confirmed to be in an upcoming mainnet fork?  My thinking is if we got 3074 \"finalized\" (including client implementations) we could enable it on one or more testnets and then iterate on the invokers w/o requiring developers to interact with an ephemeral devnet.",
        "created_at": "2021-04-07T19:55:48.458000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We haven't, mostly because people use testnets to run real applications and it could get funky if we then remove the EIP",
        "created_at": "2021-04-07T20:03:06.836000+00:00",
        "attachments": null
    }
]