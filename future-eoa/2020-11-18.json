[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!364458974906548225\u003e With Berlin, we are not changing receipts root or transactions root, only the transactions and receipts themselves.  However, we want to ensure that once we do switch the roots over to SSZ, the transactions are \"ready to play nice\".\n\nIs it going to be problematic if the transaction structure is `TypeByte || ssz(...)` for transactions?",
        "created_at": "2020-11-18T09:38:38.053000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I suspect that most implementations will process and strip the byte *first* and then pass the remaining bytes down into the appropriate decoder, which means the type byte is not part of the ssz encoded stuff.  Will we still be able to benefit from the magical SSZ hashing stuff even though there is that prefix byte?",
        "created_at": "2020-11-18T09:39:40.622000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!364458974906548225\u003e Would I be correct in assuming that the place we want to introduce SSZ hashing is at https://eips.ethereum.org/EIPS/eip-2976#specification ?  We presumably want to change `keccak256(TypedTransaction)` to `sszhash(TypedTransaction)`, where `TypedTransaction` is `TypeByte || sszencode(...)`?",
        "created_at": "2020-11-18T09:52:12.226000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "For now, legacy transactions will continue to be hashed the old way for the purpose of the network protocol, but we'll be deprecating them over gossip at some point so there is no need to change the way they are hashed.",
        "created_at": "2020-11-18T09:53:20.069000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm, I think I am going to need someone to walk me through this....",
        "created_at": "2020-11-18T10:03:21.360000+00:00",
        "attachments": null
    }
]