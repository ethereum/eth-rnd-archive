[
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is there a problem if authcall targets a precompile somehow?\nI would just state in authcall: targeting a precompile address gets you an exit right away\neither it's not particularly useful or it's a security risk down the road or for enterprise.",
        "created_at": "2021-08-14T19:22:13.119000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "also, precompiles are part of gas costs for berlin to see if the account is warm\nthe spec says:\n```\nif addr not in accessed_addresses:\n    dynamic_gas += 2500         # cold_account_access - warm_storage_read\n```\nin besu for calls today\n`boolean accountIsWarm = frame.warmUpAddress(to) || isPrecompile(to)`",
        "created_at": "2021-08-14T19:23:26.591000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i'm not sure i understand the issue with `accessed_addresses`?",
        "created_at": "2021-08-14T19:24:21.245000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so either precompiles are part of `accessed_addresses` and are always warm, like for normal calls, or they should be considered not possible to call.",
        "created_at": "2021-08-14T19:24:23.302000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Just seeking extra clarity",
        "created_at": "2021-08-14T19:24:39.319000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "precompiles are part of `accessed_addresses` per EIP-2929 - we use the same terminology",
        "created_at": "2021-08-14T19:24:59.211000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "gotcha",
        "created_at": "2021-08-14T19:25:07.210000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ok np",
        "created_at": "2021-08-14T19:25:09.697000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so 1. precompiles are fair game to target with authcall if that ever is possible and 2. they go by same rules as EIP-2929 to be considered warm. Thank you for clarifying.",
        "created_at": "2021-08-14T19:25:59.997000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yes exactly üëç",
        "created_at": "2021-08-14T19:26:44.119000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "am I right to read here that the gas cost changes are:\n```dynamic_gas += 6700         # NB: Not 9000, like in `CALL`\n```\nAnd the 64th check?\n\nSorry, I'll go read the geth impl in a sec as well.",
        "created_at": "2021-08-14T19:33:00.190000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "yep - i forget why we used 6700 i think \u003c@!415548822983278593\u003e was the proponent for that",
        "created_at": "2021-08-14T19:35:39.817000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the 64th check is already done",
        "created_at": "2021-08-14T19:35:54.546000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "so just change that constant to keep it a bit cheaper",
        "created_at": "2021-08-14T19:36:02.321000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "prob to go well with the auth opcode cost so it's roughly the same as a call",
        "created_at": "2021-08-14T19:36:17.792000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "the one really weird thing about 3074 gas calc is that if `all_but_one_64th \u003c gas` then it throws instead of just sending `all_but_one_64th`",
        "created_at": "2021-08-14T19:38:56.531000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ah",
        "created_at": "2021-08-14T19:44:56.055000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I look forward to testing this üòì any reference tests for this quite yet?",
        "created_at": "2021-08-14T19:45:32.464000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I can also sync to your chain, but that's not exactly the greatest way to debug.",
        "created_at": "2021-08-14T19:46:00.159000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "ok lunch.",
        "created_at": "2021-08-14T19:46:03.774000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "unfortunately no üò¶",
        "created_at": "2021-08-14T19:47:51.534000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I guess I can build one",
        "created_at": "2021-08-14T19:48:26.959000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I can test the happy path",
        "created_at": "2021-08-14T19:48:58.511000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "puxi back online (chain nuked though, msg me for eth): https://puxi.quilt.link/",
        "created_at": "2021-08-14T20:45:10.593000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Does puxi have authcalls in its blocks?",
        "created_at": "2021-08-14T21:01:20.223000+00:00",
        "attachments": null
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(prob not heh)",
        "created_at": "2021-08-14T21:08:00.113000+00:00",
        "attachments": null
    }
]