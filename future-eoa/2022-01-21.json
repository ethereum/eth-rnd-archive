[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Can you go into detail/give a very brief refresher for those of us who haven't been thinking about 3074 for months?",
        "created_at": "2022-01-21T07:01:39.443000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "This is interesting.  I generally like it.",
        "created_at": "2022-01-21T07:03:00.004000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't think we need AUTHUSURP though?  We just need a mechanism for writing code to an EOA.",
        "created_at": "2022-01-21T07:03:46.916000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "```py\nsender = ecrecover(transaction)\nif transaction.to == sender \u0026\u0026 transaction.data.length != 0:\n    sender.code = evm.execute(transaction.data)\n```",
        "created_at": "2022-01-21T07:05:40.584000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wouldn't even need a new transaction type or anything, just change the behavior of what happens when you send-to-self with data provided (right now the data is essentially ignored I believe).",
        "created_at": "2022-01-21T07:06:34.484000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "In combination with EIP-3607, this would functionally convert your EOA into a contract.",
        "created_at": "2022-01-21T07:07:00.116000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It is a one-way trip, so be sure to get it right!",
        "created_at": "2022-01-21T07:07:11.255000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "As specified, `AUTH` recovers the address from the ECDSA signature.\n\nIf, instead, we pass the expected address into `AUTH`, we can support smart contract wallets pretty easily: if there's code, call into it; if there isn't, do a recover and assert.",
        "created_at": "2022-01-21T07:20:48.269000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "True! `AUTHUSURP` is just an idea we were spitballing to accomplish exactly that.",
        "created_at": "2022-01-21T07:21:51.105000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm, post EIP-3607, what happens if you self destruct a contract?",
        "created_at": "2022-01-21T07:24:32.346000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Quoting from the rationale section:\n\n\u003e A contract can self desctruct, with the stated intention that ERC20s (or other tokens) in the contract would be burned. However, they can now be accessed by a key for that address.\n\n‚òùÔ∏è is explicitly left as an attack vector, so I assume once self-destructed, code can be redeployed.",
        "created_at": "2022-01-21T14:23:01.637000+00:00",
        "attachments": []
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'd like to explore https://hackmd.io/@axic/HJKDHbUpF which depends on a working `valueExt` üòÖ",
        "created_at": "2022-01-21T14:25:26.493000+00:00",
        "attachments": []
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "With regards to https://ethereum-magicians.org/t/validation-focused-smart-contract-wallets/6603/3 back months ago I was thinking about a system contract (\"precompile\") which either can create this assumed account, or more interestingly just fill out storage slots of the EOA while the code is just assumed to be part of the EOA.",
        "created_at": "2022-01-21T14:27:46.272000+00:00",
        "attachments": []
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "An opcode to deploy to an EOA works just as well, but if it is fully generic that may or may not open up more questions how EOAs can change. Maybe too risky at milestone 1. Could also just have the generic opcode but initially restrict the codehash which can be deployed to a \"standard known EOA contract\" and open it up later.",
        "created_at": "2022-01-21T14:29:52.804000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I like that last option",
        "created_at": "2022-01-21T15:01:21.879000+00:00",
        "attachments": []
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hmm actually, in 3074 an EOA can behave both as an EOA and as a contract (if executed via auth). Was there any analysis about this duality or only about recipients checking for \"is this an EOA\"?",
        "created_at": "2022-01-21T15:11:53.716000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "My hope is that it breaks them all.",
        "created_at": "2022-01-21T15:12:58.748000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Breaking \"is this an EOA\" checks is one of the reasons I'm a big fan of 3074.",
        "created_at": "2022-01-21T15:13:16.700000+00:00",
        "attachments": []
    },
    {
        "author": "axic3354",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes, but with 3074 the same account can be both.",
        "created_at": "2022-01-21T15:14:41.184000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The main analysis that was done was how this affected weak flash loan protection (`tx.origin == msg.sender`) checks - https://docs.google.com/document/d/1itvPn7BhZ9N8h27d1Ig5C86_FZpyG5_cdpsuPJYmb-o/edit",
        "created_at": "2022-01-21T15:17:17.959000+00:00",
        "attachments": []
    }
]