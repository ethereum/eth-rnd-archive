[
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I believe DIV opcode throws if the divisor is `0`?",
        "created_at": "2021-03-31T03:32:38.048000+00:00",
        "attachments": []
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "no it doesn't, it returns 0",
        "created_at": "2021-03-31T03:33:52.613000+00:00",
        "attachments": []
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/apache/incubator-tuweni/pull/201/files#diff-30fa7cbb2234dbf889d57f61bd20a9fada4dc71276749411ae123f48b5ae470aR299",
        "created_at": "2021-03-31T03:34:45.325000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We should remove the stipend.  I didn't realize it was there.  It is an blight on the EVM and I have been lobbying to remove it from all of the CALL opcodes for a while.  We definitely shouldn't port the bug forward.",
        "created_at": "2021-03-31T03:36:29.959000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wat?  That isn't how math works...",
        "created_at": "2021-03-31T03:41:48.050000+00:00",
        "attachments": []
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It ain't math",
        "created_at": "2021-03-31T03:42:19.302000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(your link is to a 2000 line diff, not sure if you meant to link to something more specific)",
        "created_at": "2021-03-31T03:42:57.637000+00:00",
        "attachments": []
    },
    {
        "author": "atoulme",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "https://github.com/apache/incubator-tuweni/blob/09a0ac9a8418d3bc7d3321c4d0c9db586fcccecf/evm/src/main/kotlin/org/apache/tuweni/evm/impl/frontier/OpCodes.kt#L299 is more specific",
        "created_at": "2021-03-31T03:44:23.295000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i'm not opposed to removing the stipend, but i feel like that should be done all at once rather than piecewise",
        "created_at": "2021-03-31T04:27:55.305000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Making one more opcode that we need to deprecate certainly doesn't *help* the situation.",
        "created_at": "2021-03-31T04:28:22.997000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "does it make it harder?",
        "created_at": "2021-03-31T04:28:34.001000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i feel like the only reasonable path to removing the stipend is evm versioning",
        "created_at": "2021-03-31T04:28:57.063000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Sure, but the less that changes between versions the more palatable versioning becomes.",
        "created_at": "2021-03-31T04:29:22.767000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And the simpler it is to migrate contracts, less divergent code paths in tooling, etc.",
        "created_at": "2021-03-31T04:29:37.184000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i don't know if that advantage is worth having a separate mechanism for calculating the cost of authcall",
        "created_at": "2021-03-31T04:30:10.150000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "everyone would need to update everything if evm versioning shipped with simplified *CALL accounting, it feels like it is simpler for everyone to do that shift altogether for every CALL op",
        "created_at": "2021-03-31T04:31:17.113000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Even if we cannot remove the stipend everywhere, we should remove it anywhere we can.",
        "created_at": "2021-03-31T04:37:03.005000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "It has been hurting the ecosystem for a long time and causing problems, and removing it from one of the call types will help ween people off of it and discourage them from continuing to exercise bad practices.",
        "created_at": "2021-03-31T04:37:34.273000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "isn't relying on the stipend more of a tooling problem? or are people specifically exploiting it?",
        "created_at": "2021-03-31T04:39:05.462000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Both.",
        "created_at": "2021-03-31T04:53:22.581000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I have *separately* been working on trying to get tooling (Solidity) to stop providing a stipend, but it has been slow going.  I *suspect* it is partly because the EVM hasn't made a push to remove it so it makes it a harder sell.",
        "created_at": "2021-03-31T04:54:00.174000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\"Well, the EVM has it and doesn't show any indications of removing it so we might as well keep it too\" sort of mentality (this is me guessing a bit as to motives, and this may be incorrect).",
        "created_at": "2021-03-31T04:54:27.371000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm on full agreement with Micah on this.",
        "created_at": "2021-03-31T13:04:02.179000+00:00",
        "attachments": []
    }
]