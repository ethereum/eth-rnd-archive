[
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Busy with mainnet launch like everyone else, but found some time to prototype API bindings for Eth2 in Go, bazed the ZRNT types (stricter typing, more json compatible): https://github.com/protolambda/eth2api/\nLmk if anyone has feedback, it's just a prototype now. Covers full current standard spec, but untested. Will test + build stuff on it later this week.",
        "created_at": "2020-11-30T21:29:30.076000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "Nice \u003c@!203220829473996800\u003e , maybe would be good to add to the README the prysmaticlabs/ethereumapis is not up to speed with eth2apis yet",
        "created_at": "2020-11-30T21:30:30.555000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "unsure of the latest news on its stability",
        "created_at": "2020-11-30T21:30:48.338000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Sounds quite like https://github.com/attestantio/go-eth2-client",
        "created_at": "2020-11-30T21:31:32.538000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "ZRNT has a lot of custom, stricter, typing. Including things to make it work well with JSON, which is a pain with protobufs unfortunately.",
        "created_at": "2020-11-30T21:32:08.414000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "hey \u003c@!144468805697929216\u003e , whats the latest on the eth2apis in terms of changes to the specification?",
        "created_at": "2020-11-30T21:32:38.614000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "\u003e  Including things to make it work well with JSON, which is a pain with protobufs unfortunately\nis this because of handling hex strings in the grpc gateways?",
        "created_at": "2020-11-30T21:32:58.869000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "that, and integers, etc.",
        "created_at": "2020-11-30T21:33:15.061000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "My `eth2api` package types so much you almost can't have an input wrong",
        "created_at": "2020-11-30T21:33:52.075000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "we are aiming to get everything up to speed soon after genesis once development goes back to normal, to comply with eth2apis",
        "created_at": "2020-11-30T21:34:15.906000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "I think it's mainly stable now.  Suspect that the remaining PRs won't be incorporated in the near future purely because people have run out of time to implement them.  I certainly wouldn't expect any major changes",
        "created_at": "2020-11-30T21:34:26.476000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "with the proper json support",
        "created_at": "2020-11-30T21:34:27.931000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "\u003e I certainly wouldn't expect any major changes\nNoted! thats great news",
        "created_at": "2020-11-30T21:34:41.187000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "that said, my thing is experimental, don't use it for production just yet. Just sharing here for feedback ðŸ™‚",
        "created_at": "2020-11-30T21:34:41.302000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!144468805697929216\u003e other quick question: is pagination still being decided?",
        "created_at": "2020-11-30T21:40:03.931000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "regarding how pagination will work",
        "created_at": "2020-11-30T21:40:10.761000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "It comes and goes, but there never seems to have been enough of a driver for anyone to spec it out.  The idea of all responses being an object is that there can be metadta next to the `data` key, that so if an implementation wanted to implement pagination the relevant keys could be placed in to the top-level response, _e.g._\n\n```\n{\n  \"data\": [ ... ],\n  \"pagination\": {\n    \"next_cursor\": \"abc123\",\n    ...\n  }\n}\n```",
        "created_at": "2020-11-30T21:43:56.513000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "And how about a decision between cursors and page indices?",
        "created_at": "2020-11-30T21:45:03.443000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "got it, so we can proceed with our current pagination approach using the object you outlined above",
        "created_at": "2020-11-30T21:45:46.101000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "that would work for us",
        "created_at": "2020-11-30T21:45:50.063000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Like I say, it's never gone far enough for anyone to decide.  The general requirement for pagination comes when data can be ordered in some user-defined fashion, and the user only wants a subset of the data.  The API doesn't really have calls that fit that fashion, hence the lack of appetite for the effort of building it.",
        "created_at": "2020-11-30T21:46:44.219000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "I see, thats been one of the most important aspects of the API for us",
        "created_at": "2020-11-30T21:47:12.177000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "so we've been awaiting it eagerly, we might come up with a proposal by end of year",
        "created_at": "2020-11-30T21:47:22.767000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "we were a little surprised when that wasnt part of the api since day 1",
        "created_at": "2020-11-30T21:47:50.538000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "What's the purpose of it for you, out of curiousity?",
        "created_at": "2020-11-30T21:48:09.335000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "it's been a highly requested feature that inspired us to create ethereumapis by block explorers, as it allowed them to integrate it easily and create the pages they needed. It led to beaconcha.in launching with ethereumapis when they first announced",
        "created_at": "2020-11-30T21:49:24.273000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "it's also helpful for us internally, so we dont receive massive responses",
        "created_at": "2020-11-30T21:49:40.111000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "it's used by our slasher as well",
        "created_at": "2020-11-30T21:49:42.993000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Wasn't it a big part of the problem with beaconcha.in falling behind during lack of finality in Medalla?  I seem to remember that prysm was taking 15-20 seconds to generate the state for the 70K validators, returning 250 of them, then doing it again another 279 times.",
        "created_at": "2020-11-30T21:52:06.588000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "That was due to an incorrect implementation of ListBlocks, not particularly relevant",
        "created_at": "2020-11-30T21:52:48.488000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "if paginated correctly, the response would have been quick",
        "created_at": "2020-11-30T21:52:54.641000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Although I understand the general idea, it does seem that the only downside of non-paginated is the large responses, but in a server-to-server environment a few hundred MB in one go isn't a lot different to a few hundred requests of 1MB",
        "created_at": "2020-11-30T21:53:06.999000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "other imported endpoints were properly paginated",
        "created_at": "2020-11-30T21:53:08.982000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "say someone comes to you and says: \"hey I want all the blocks\", pagination is somewhat expected in that scenario",
        "created_at": "2020-11-30T21:53:45.863000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Anyway, if it's something that you want to implement it isn't a problem to do so, like I say it's just never had a champion.",
        "created_at": "2020-11-30T21:53:54.078000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "There is no API call to request all the blocks.",
        "created_at": "2020-11-30T21:54:03.331000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "how would we go about that in the current API?",
        "created_at": "2020-11-30T21:54:30.991000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "add a method to fetch a range of blocks maybe? Currently it looks like requesting one at a time, and hoping the server properly re-uses the http connection",
        "created_at": "2020-11-30T21:55:03.158000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "You could request blocks one at a time, I guess.",
        "created_at": "2020-11-30T21:55:05.665000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "Ah ok, so onus is on the server to do that properly then",
        "created_at": "2020-11-30T21:55:33.421000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "I see",
        "created_at": "2020-11-30T21:55:34.490000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "Just curious, but seems like first instinct would be to have a /blocks endpoint that is paginated",
        "created_at": "2020-11-30T21:56:07.526000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "Understand it's too late to change that, of course",
        "created_at": "2020-11-30T21:56:24.185000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "block sync is a bad example for pagination, I'd just like explicit range control over blocks, expressed in slots, not pages",
        "created_at": "2020-11-30T21:56:31.006000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "But definitely like pages for e.g. attestation pool iteration",
        "created_at": "2020-11-30T21:56:46.840000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "Yep thats right",
        "created_at": "2020-11-30T21:56:55.704000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Don't think it's too late to add things, if there is support for them, and we do versioning properly",
        "created_at": "2020-11-30T21:58:01.746000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "There's always a v2, of course.",
        "created_at": "2020-11-30T21:58:12.580000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "Thanks guys",
        "created_at": "2020-11-30T21:58:20.874000+00:00",
        "attachments": []
    },
    {
        "author": "raulj",
        "category": "Testing",
        "parent": "",
        "content": "we just want to support it asap",
        "created_at": "2020-11-30T21:58:29.231000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Adding the API method for block range doesn't even really break anything. Just need implementers to support it",
        "created_at": "2020-11-30T21:59:07.599000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "And something like pagination can be an option, where every request that returns an array can have 'pageNum' and 'pageSize' parameters (if using indexed pagination, for example).",
        "created_at": "2020-11-30T21:59:17.339000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "That way it remains backwards-compatible and can be an optional extension for the servers that want to support it.",
        "created_at": "2020-11-30T21:59:55.197000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "asking for page consistency issues if you apply pagination by page number to any request",
        "created_at": "2020-11-30T22:00:14.629000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Sure, then have 'pageSize' and 'cursor' , then",
        "created_at": "2020-11-30T22:00:45.386000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "I'd prefer to limit it to endpoints where it is useful, and making it consistent (e.g. don't miss an attestation, or see one twice, during pool iteration)",
        "created_at": "2020-11-30T22:00:57.185000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "And that's the other problem with attempting to paginate dynamic resources like attestation pools; they change.",
        "created_at": "2020-11-30T22:01:38.704000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "If the resource collection can be uniquely identified, numbered pages are great. Cursors might work otherwise, although I don't think implementers would like to get into collection snapshot complexity to keep cursors working",
        "created_at": "2020-11-30T22:05:12.986000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "blocks -\u003e request by slot range\nstate validators/balances -\u003e by index range and/or page range\npeers -\u003e no pagination (most recent PR, pagination was removed, filtering was deemed better iirc)\npool -\u003e no pagination, event stream instead.",
        "created_at": "2020-11-30T22:07:37.094000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Really depends on the endpoint what works best. Plugging in cursor based pagination just anywhere is not going to make things easier",
        "created_at": "2020-11-30T22:08:27.261000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "Sure, doesn't *have* to have pagination, just the ability to make it an option.\n\nPersonally I have no interest in pagination; it does nothing for me except make my life more difficult.  I can happily pull information on 100K+ validators from pyrmont without paging, and I don't see it being particularly more difficult with 1MM.  If it is, then fair enough, but outside of resource constraints pagination is only interesting if there is a case where I only want a subset of the pages, and I don't have that.",
        "created_at": "2020-11-30T22:23:18.898000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "I do worry about making beacon node developers' lives harder, though, which is where the idea of making it optional comes in.",
        "created_at": "2020-11-30T22:23:44.689000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "pagination might be more handy if you're bandwidth limited, but im not sure the level of issue that is with this demographic",
        "created_at": "2020-11-30T22:26:16.636000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Testing",
        "parent": "",
        "content": "If you're bandwidth-limited you're probably in the wrong game ðŸ™‚",
        "created_at": "2020-11-30T22:35:42.121000+00:00",
        "attachments": []
    },
    {
        "author": "fridgemagnet5882",
        "category": "Testing",
        "parent": "",
        "content": "Hehe",
        "created_at": "2020-11-30T22:35:51.124000+00:00",
        "attachments": []
    },
    {
        "author": ".paulharris",
        "category": "Testing",
        "parent": "",
        "content": "yep you're not going to have a fun time if you're limited on bandwidth running this kind of thing ðŸ™‚",
        "created_at": "2020-11-30T22:37:10.553000+00:00",
        "attachments": []
    }
]