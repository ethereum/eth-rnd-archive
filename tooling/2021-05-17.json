[
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "How did you find that one!",
        "created_at": "2021-05-17T00:18:05.394000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "This bug happened to the explorer on Nocturne as well",
        "created_at": "2021-05-17T09:08:03.943000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "But in nocturne it was because prysm accepted an invalid block, here this block is valid, just ignored by the next proposer",
        "created_at": "2021-05-17T11:11:52.654000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "What amazes me is the age of the block that \u003c@449019668296892420\u003e was looking at",
        "created_at": "2021-05-17T11:12:23.374000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "~~I execute the blocks one by one using pen and paper, and compare with beaconcha.in ðŸ™‚~~\n\nactually, there are nodes on mainnet that for some reason serve the orphan block - this is wrong of course, unless the node stopped there and hasn't finalized anything else",
        "created_at": "2021-05-17T11:13:01.584000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Testing",
        "parent": "",
        "content": "Oh you mean are still serving that block? That is weird indeed",
        "created_at": "2021-05-17T11:41:11.861000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "so I think that we need to look further back (not just 10 blocks) when updating the canonical-status",
        "created_at": "2021-05-17T14:22:31.976000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "we are using the canonical-field of prysms alpha1-block-endpoint",
        "created_at": "2021-05-17T14:23:28.522000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "and only update it looking at the last 10 blocks",
        "created_at": "2021-05-17T14:23:44.298000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "i guess we need to check the last 32 blocks",
        "created_at": "2021-05-17T14:23:54.800000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "or run an extra service which constantly checks for orphaned blocks in the database",
        "created_at": "2021-05-17T14:24:08.163000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "technically, any block can become orphaned  that has not yet been finalized",
        "created_at": "2021-05-17T15:17:11.065000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "so here is something i just found:\n```\n$ curl -s \"prysm-mainnet-1:3500/eth/v1alpha1/beacon/blocks?slot=1202976\" | jq '.blockContainers[0].canonical'\ntrue\n```",
        "created_at": "2021-05-17T15:18:05.259000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "prysm says this is a canon block, it is not",
        "created_at": "2021-05-17T15:18:20.032000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "yeah, weird for sure - the only way I can think of that happening is if they somehow got stuck on that block and can't sync further - I saw it in the logs of a node I was syncing and it looked wrong",
        "created_at": "2021-05-17T15:18:24.505000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "it looks like prysm only says that the blocks are not canon after some time",
        "created_at": "2021-05-17T15:18:48.083000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "(we do not look back for more than 10 epochs, and only more than 1 epoch if finalization-issues)",
        "created_at": "2021-05-17T15:19:18.648000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "well, if prysm still thinks it's canonical, that might affect what it sends as well.. maybe \u003c@!363800010518822915\u003e has any ideas?",
        "created_at": "2021-05-17T15:19:47.937000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "i have a list of wrongly marked blocks here: https://gist.github.com/guybrush/fa0124420caada884492bedcfa695e55",
        "created_at": "2021-05-17T15:20:33.613000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Testing",
        "parent": "",
        "content": "the pyrsm-api reports that these blocks are canon back to 1131967 (this is the first block that is correctly marked as not canon)",
        "created_at": "2021-05-17T15:27:04.679000+00:00",
        "attachments": null
    }
]