[
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "\u003e git index\nI meant that more as an inspiration, than something to necessarily be used verbatim - they've done a good job though, in general, since git is.. fast :)\n\u003e block trees\nagree that it would be nice - we'd have to sacrifice some of the simplicity though\n\u003e  finalized slot in the header\nwe lose append-only at that point which makes it more vulnerable to corruption, in general - it would also require moving the non-finalized portion around to compact it, so that offsets remain O(1)\n\nthe biggest issue I see with storing stuff in this format is that you actually don't store the blocks that resulted in the previous blocks being finalized - that's.. ugly, when loading!",
        "created_at": "2020-11-25T00:02:54.491000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "\u003e  finalized blocks in this format on disk \ny - it's pretty much ideal for this use case - compact, fast etc",
        "created_at": "2020-11-25T00:03:30.346000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "\u003e we lose append-only at that point which makes it more vulnerable to corruption, in general - it would also require moving the non-finalized portion around to compact it, so that offsets remain O(1)\nMmm, true. Perhaps it would make sense as two separate files (finalized + non-finalized)",
        "created_at": "2020-11-25T00:05:46.084000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "I don't think we'd use this internally (I like to let the database do _some_ of the work of managing consistency ðŸ˜… ), but we may use the general idea of flattening out our finalized blocks so that they're contiguous on disk",
        "created_at": "2020-11-25T00:07:27.813000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "\u003e flattening\nthis is pretty much what we intend to do - ie flatten the blocks out of the db into a finalized file - there are indeed some consistency concerns here - a starting point is to get it done as import/export because it would be really useful to have, even with weak subjectivity states",
        "created_at": "2020-11-25T00:10:12.804000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Testing",
        "parent": "",
        "content": "since there's interest, I'll ship that doc over to the spec repo as a PR, so we can have a more constructive discussion",
        "created_at": "2020-11-25T07:49:55+00:00",
        "attachments": []
    }
]