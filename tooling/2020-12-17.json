[
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "Hello, I just wanted to share a few metrics that we have gathered from the Eth2 Main net over the past few days, using the network crawler that we are developing",
        "created_at": "2020-12-17T12:32:28.384000+00:00",
        "attachments": null
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2020-12-17T12:32:49.687000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "PeersPerCountries.png",
                "content": "b9a140d7ea709f71d3a59291b0c636a17d7e8c67faae918653633bb01ec8fda5"
            }
        ]
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "",
        "created_at": "2020-12-17T12:33:03.038000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "PeersPerClient.png",
                "content": "872a961a2a28c9036250f01784b9afbddbb8c615c0ff044e369391ad3a7ddfeb"
            }
        ]
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "the data was colected over the last weekend",
        "created_at": "2020-12-17T12:34:15.986000+00:00",
        "attachments": null
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "ofcourse this is not the entire network, just a small snapshot of it, basically just the peers the crawler connected with during that test",
        "created_at": "2020-12-17T12:35:25.408000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "I'm a bit surprised by the peer count per client. Basic dumps of local peerstores have generally shown a prysm dominance\nHow are you calcuating this? libp2p identify protocol?",
        "created_at": "2020-12-17T13:27:53.622000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Prysm nodes being less than Lighthouse and Teku would be a big surprise. Something wrong with the data collection there.\nNote that prysm notes for a long time were declining incoming connections too aggressively, due to strict peer limits instead of maintaining elasticity like other clients",
        "created_at": "2020-12-17T13:58:23.008000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Compare discovery data (prysm has a different default port) with that chart, and it's the complete opposite",
        "created_at": "2020-12-17T13:59:28.645000+00:00",
        "attachments": null
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "yeah, this is not the peerstore, it is only peers we managed to connect with",
        "created_at": "2020-12-17T14:11:07.039000+00:00",
        "attachments": null
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "Prysm nodes indeed have more strict peer limit parameters",
        "created_at": "2020-12-17T14:12:25.814000+00:00",
        "attachments": null
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "Also, overall Teku and Lighthouse are the clients that usually accept more connections",
        "created_at": "2020-12-17T14:13:06.101000+00:00",
        "attachments": null
    },
    {
        "author": "leobago",
        "category": "Testing",
        "parent": "",
        "content": "also we might have left some ports closed during the run, so yes, this is not representative of the network, we will keep updating the figures with longer runs",
        "created_at": "2020-12-17T14:30:42.281000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@!363800010518822915\u003e Do prysm nodes still have a hard cap on peers? Or is there some upward flexibility beyond the \"target\" number",
        "created_at": "2020-12-17T16:36:50.330000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "The default max peer count is set to 30. Prysm has a flag `--p2p-max-peers` to set custom peer count.  We have been recommending 75 to nodes in certain regions to have better connectivity to others",
        "created_at": "2020-12-17T16:40:33.970000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "but is `--p2p-max-peers` still a strict max?",
        "created_at": "2020-12-17T16:41:17.275000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "it's recommended that there be some elasticity above the number with downward pruning to the target",
        "created_at": "2020-12-17T16:41:33.397000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "otherwise, the p2p network can become very rigid and it hard to connect to peers as a new node",
        "created_at": "2020-12-17T16:41:46.594000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "(also makes this type of crawling not work well)",
        "created_at": "2020-12-17T16:41:54.713000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "I think we touched on this in a public call a couple ago, but not sure if it made it's way to you",
        "created_at": "2020-12-17T16:44:28.537000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "Ah i see. I'm 99% sure it's a strict max (perspective from my running node). I'll confirm with the team and come back if not. I agree on logic to handle `elasticity above the number with downward pruning to the target` and prysm should have this. Timeline wise, I think this will be done in Jan as ppl are going to holidays",
        "created_at": "2020-12-17T16:47:05.720000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Testing",
        "parent": "",
        "content": "we missed the call, thanks for the reminder on this!",
        "created_at": "2020-12-17T16:47:27.763000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Testing",
        "parent": "",
        "content": "It hasnt been a strict max for a while, there is an allowance for inbound peers to connect with a node. There have been some issues with the latest libp2p update in the latest release so still investigating that",
        "created_at": "2020-12-17T17:04:18.350000+00:00",
        "attachments": null
    }
]