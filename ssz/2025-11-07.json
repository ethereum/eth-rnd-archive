[
    {
        "author": "txtiger",
        "category": "Cross-layer",
        "parent": "",
        "content": "Question about EIP-6406, I see that the transaction signature hash is calculated with `hash_tree_root` of the payload, is this the same for the `authorization_list` entries?",
        "created_at": "2025-11-07T18:08:58.456000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "6404 is only about a new hashing of existing RLP transactionsÂ as part of transactions_root, so that clients don't have to change their database schemes, networking etc. For these old RLP transactions, the signing hash cannot be changed. You can find conversion examples in https://github.com/ethereum/EIPs/blob/master/assets/eip-6404/convert_tests.py\n\n6493 describes a native signature hash, for how this would look for native SSZ transactions.\nand yes, it is based on a hash_tree_root of payload (with an extra domain mix-in for separation)",
        "created_at": "2025-11-07T18:12:49.990000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "like. 6404 defines a new transactions_root, and 6493 then expands on top of that ðŸ™‚",
        "created_at": "2025-11-07T18:13:11.989000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "",
        "created_at": "2025-11-07T18:14:07.116000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "26be4085edf25526f99e69c671eddca6c273611d92d702c26b3477e685118a23"
            }
        ]
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "this would be for `SszTransactionPayload` / `SszAuthorizationPayload` which originated in native SSZ (as in, these were not converted from RLP)",
        "created_at": "2025-11-07T18:14:26.588000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "bc for RLP converted ones, we cannot change how they were historically signed",
        "created_at": "2025-11-07T18:14:39.793000+00:00",
        "attachments": null
    },
    {
        "author": "txtiger",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ah, ok. That makes more sense,",
        "created_at": "2025-11-07T18:15:11.280000+00:00",
        "attachments": null
    },
    {
        "author": "txtiger",
        "category": "Cross-layer",
        "parent": "",
        "content": "I may use a pseudo-function e.g. `calculate_signature_hash` with a note about each signature hash being defined per EIP.\n\nFrom a migrations standpoint, the EIP-7932 RLP wrapper would need to be unwrapped if converted to SSZ and vice versa (unless the transaction is 100% secp256k1 where it can be represented in unwrapped form).",
        "created_at": "2025-11-07T18:23:59.075000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "https://github.com/ethereum/EIPs/blob/master/assets/eip-6404/tx_hashes.py#L135 yeah see here",
        "created_at": "2025-11-07T18:37:38.562000+00:00",
        "attachments": null
    },
    {
        "author": "txtiger",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is helpful, thank you",
        "created_at": "2025-11-07T18:40:14.008000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah, like, there are a handful of legacy cases which need to be handled explicitly. and then there's the new, native 6493 stuff which should be clean.\nBack when I originally started these EIPs was before set code and before blobs, possibly even before fee market ðŸ˜…  \nwith every additional RLP infestation, it just adds on to the tech debt. it's still correct to get rid of it going forward.",
        "created_at": "2025-11-07T20:13:03.605000+00:00",
        "attachments": null
    },
    {
        "author": "txtiger",
        "category": "Cross-layer",
        "parent": "",
        "content": "Pureth has been kicked down the curb since its inception",
        "created_at": "2025-11-07T20:14:41.847000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "I mean, it continued to improve. It's just not the top priority while scaling is pressing. So, let's do BAL in G* and then new chance in H* ðŸ™‚",
        "created_at": "2025-11-07T20:15:35.755000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@1045702044524236860\u003e actually implemented the SSZ conversion for transaction as part of EPF; if you want to test in a real kurtosis, reach out to him",
        "created_at": "2025-11-07T20:16:58.180000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "The main problem seems to be the lack of production ssz libs within the els",
        "created_at": "2025-11-07T20:20:10.111000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "that causes the pushback from them towards this \n\"not ssz now\" narative in the acde",
        "created_at": "2025-11-07T20:20:38.877000+00:00",
        "attachments": null
    },
    {
        "author": "txtiger",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hopefully we can get 6404 into H*.\n\nIf 7932 and 6404 are included together, there'd be no point of the backwards compatible wrapper. So it may be a better idea to narrow down EIP-7932 into just the precompile + registry. Should also reduce a **load** of implementation complexity.",
        "created_at": "2025-11-07T20:21:10.259000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, given that 7932 also didn't seem to make it in G*, maybe better to just build it on top of 6404",
        "created_at": "2025-11-07T20:23:01.082000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "we will defo push for it \nwill be working on the specs + el tests after devconnect",
        "created_at": "2025-11-07T20:23:23.713000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "to make a stronger case for it",
        "created_at": "2025-11-07T20:23:35.387000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@1045702044524236860\u003e maybe we could do a branch with native SSZ storage in the DB. then it's possible to do measurements of eth_getTransactionReceipt with an RLP based DB, vs an SSZ based DB.",
        "created_at": "2025-11-07T20:24:16.343000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "the 6404/6466 based DB should be much faster as there are fewer DB lookups involved to piece together the response",
        "created_at": "2025-11-07T20:25:19.061000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "there's still the conversion to JSON, but that's the same for RLP",
        "created_at": "2025-11-07T20:25:54.856000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "can defo look into it \nam a bit comfortable with the db but will need to look into coredb and aristro together a bit more",
        "created_at": "2025-11-07T20:26:00.939000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "I mean, just on a branch, not on mainline",
        "created_at": "2025-11-07T20:26:14.111000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "like with our demo the rlp \u003c-\u003e ssz is a computational overload we have with the current demo",
        "created_at": "2025-11-07T20:26:39.531000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah seems like a good thing to work upon \nthis was in my original scope for pureth lmao",
        "created_at": "2025-11-07T20:27:14.602000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "that's a different overhead though. it's a cost paid once on block validation, and is negligible compared to signature validation operations.\nvs a cost that is paid on every single RPC call",
        "created_at": "2025-11-07T20:27:39.655000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "with SSZ DB, you'll have to convert back to RLP for devp2p though xD however, tha't s just for syncing anyway, which is not performance critical anyway",
        "created_at": "2025-11-07T20:28:34.792000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "everywher",
        "created_at": "2025-11-07T20:31:56.488000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "30f2oa_V1.jpg",
                "content": "8ecf6d63c3bc5cce8427694299aae901d59155f0dc10652ac36d509a2ab264fe"
            }
        ]
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "couldnt find a good rlp pic xd",
        "created_at": "2025-11-07T20:32:09.792000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "having it as precompile + registry would also de-clutter 6404 a bit. it's quite a long EIP for what it does",
        "created_at": "2025-11-07T20:32:33.692000+00:00",
        "attachments": null
    },
    {
        "author": "txtiger",
        "category": "Cross-layer",
        "parent": "",
        "content": "It'd remove a large chunk of the `Signatures` section, it also has made EIP-7932 *slightly* smaller:",
        "created_at": "2025-11-07T20:39:48.781000+00:00",
        "attachments": [
            {
                "type": "image/webp",
                "origin_name": "image.png",
                "content": "ad8b4b562228efeef5e0256f00abe9fb52b4916eba8f7c00f03e0ff280315746"
            }
        ]
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "regarding \"computational overhead\", it shouldn't be much.\n\nToday, every transaction gets hashed at least 5 times.\n1. To compute the sighash\n2. To compute the RPC txhash\n3. To put it into MPT (it has a little prefix, so what goes into the tree is not txhash)\n4. In SSZ ExecutionPayload transactions, for hash_tree_root\n5. In libp2p, for the message ID\n\nOn top of that, it gets converted to ASCII hex-string and then sent via JSON on engine. Then wrapped in an SSZ ByteList.\n\nSo, while the current conversion is annoying to do code-wise, it should be insignificant.\nComputationally expensive are large number of hashes (thousands or more), then signature checks, and then ZK proofs.\nSo, as long as it's just arranging some bytes in slightly different ways, and then doing a hash_tree_root on it, it's fine.\nWould still be good to have measurements though, you can use `let startTick = Moment.now()` and then `let endTick = Moment.now()` and then print `endTick - startTick` into a nim-metrics histogram.",
        "created_at": "2025-11-07T20:41:40.140000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, sounds good to me",
        "created_at": "2025-11-07T20:41:48.333000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "thanks for the info \nthe endtick -starttick is defo useful and will be doing that !",
        "created_at": "2025-11-07T20:57:44.251000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "The computation expensive part lies at the hashes and the constantine port was for that effort but it turned out to be a regression ðŸ˜‚",
        "created_at": "2025-11-07T20:58:37.084000+00:00",
        "attachments": null
    },
    {
        "author": "etan_status",
        "category": "Cross-layer",
        "parent": "",
        "content": "nim-ssz-serialization uses hashtree not constantine",
        "created_at": "2025-11-07T22:11:28.977000+00:00",
        "attachments": null
    },
    {
        "author": "samyxandy",
        "category": "Cross-layer",
        "parent": "",
        "content": "Nah the rlp parts \nThere was a pr to switch to Constantine for the hasher",
        "created_at": "2025-11-07T22:24:15.003000+00:00",
        "attachments": null
    }
]