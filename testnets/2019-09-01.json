[
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I don‚Äôt think IndexedAttestation is correct",
        "created_at": "2019-09-01T00:23:24.851000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I think it arose from some miscommunication that can probably be attributed to me",
        "created_at": "2019-09-01T00:23:39.647000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I‚Äôm all for replacing IndexedAttestation with Attestation",
        "created_at": "2019-09-01T00:23:54.137000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Personally, I prefer get an Attestation and send back an attestation (not using AttestationData from node to validator)",
        "created_at": "2019-09-01T00:25:25.349000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Just checked our implementations, our `get` is returning `AttestationData` and `post` is accepting `Attestation`",
        "created_at": "2019-09-01T00:26:43.243000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "The trade off here is validator has to keep track of it's index for using `AttestationData` so it knows how to construct its aggregation bit field",
        "created_at": "2019-09-01T00:28:00.010000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "I'm happy with using `Attestation` both ways, I dont feel too strongly about either",
        "created_at": "2019-09-01T00:28:54.145000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Yeah I don't feel to strongly either.\n\nI was thinking that if we had `Attestation` both ways and the validator always just added their signature to the aggregate, then the node could possibly send a pre-aggregated `Attestation` (one with some aggregation bits set to true).",
        "created_at": "2019-09-01T00:30:42.516000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I'm just not sure on the BLS specifics of sending an empty (0) signature and having the validator add on top of it",
        "created_at": "2019-09-01T00:31:41.678000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Yea I agree.  Returning `Attestation` feels more scalable. We dont want validators to worry about aggregating signatures down the line üëç",
        "created_at": "2019-09-01T00:33:18.809000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "I think \u003c@535705896224030720\u003e had it on his todo list to update that minimal validator swagger",
        "created_at": "2019-09-01T00:34:05.792000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "sorry that it caught you out \u003c@545555441518772225\u003e",
        "created_at": "2019-09-01T00:34:20.866000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "To keep the validator thin on logic and still remove the indexed dependency, the validator could send back the attestationdata, a signature, and their index. The (smarter) node could then construct the full attestation from the pieces and broadcast",
        "created_at": "2019-09-01T00:38:58.783000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Wouldn't the validator logic be even thinner if it was just `Attestation`both ways?",
        "created_at": "2019-09-01T00:39:42.572000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "The validator has to know their index within the attestation.",
        "created_at": "2019-09-01T00:40:02.179000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "Aah i see with the custody bit already set",
        "created_at": "2019-09-01T00:40:09.396000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "I mean aggregation bit",
        "created_at": "2019-09-01T00:40:22.955000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "yeah, the request for an attestation would need to specify `custody_bit`, then the node could return the `Attestation` with the bitfields already configured",
        "created_at": "2019-09-01T00:40:51.878000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "It also means that the validator client (after signing) ends up with a fully-self contained attestation that could be broadcast to multiple nodes easily",
        "created_at": "2019-09-01T00:41:45.449000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "`get_attestation_from_node(epoch, validator_index, custody_bit)` -- something like that",
        "created_at": "2019-09-01T00:42:33.531000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "Increases size of transfer by 1024 bytes both ways in worst case (4096 validators in committee)",
        "created_at": "2019-09-01T00:42:54.207000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "True. Good point",
        "created_at": "2019-09-01T00:43:09.973000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "True",
        "created_at": "2019-09-01T00:43:13.466000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "It's a local RPC though, 1kb is probably fine IMO",
        "created_at": "2019-09-01T00:43:31.247000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "Yeah, think so too. The advantage of having fully constructed an attestation to do whatever you want with is the winning point i think",
        "created_at": "2019-09-01T00:45:57.179000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Testing",
        "parent": "",
        "content": "Heading to dinner. Talk soon",
        "created_at": "2019-09-01T00:46:04.979000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Yea this also keeps the validator logic at a very minimal, just retrieve, sign and submit",
        "created_at": "2019-09-01T00:46:14.860000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Testing",
        "parent": "",
        "content": "Talk to ya later!",
        "created_at": "2019-09-01T00:46:34.481000+00:00",
        "attachments": null
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Bon appetit!",
        "created_at": "2019-09-01T00:46:49.789000+00:00",
        "attachments": null
    },
    {
        "author": "spble",
        "category": "Testing",
        "parent": "",
        "content": "Yeah agreed with the above.\nWe chose to use `IndexedAttestation` in the RPC spec because we didn't want the validator to have to calculate the size of the committee bit fields, but in retrospect this doesn't make much sense. I am working on an update to this spec, which will include sending/receiving just an `Attestation`, rather than an `IndexedAttestation`, and this will be reflected in our implementation soon.",
        "created_at": "2019-09-01T01:39:08.677000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "Testing",
        "parent": "",
        "content": "I hate timezones, started and missed the party üòÇ \nI like sending attestation back and forth.\nWould be nice in future to raise those issues as we encounter them and not just silently diverge from agreed API üòõ",
        "created_at": "2019-09-01T05:09:08.779000+00:00",
        "attachments": null
    },
    {
        "author": "spble",
        "category": "Testing",
        "parent": "",
        "content": "Definitely. It was only a couple of days ago that we resolved this conversation ourselves, which is why we hadn't raised it yet. I will submit a PR on the eth2.0-APIs repo soon, alongisde our updated API spec.",
        "created_at": "2019-09-01T05:29:43.925000+00:00",
        "attachments": null
    }
]