[
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "there already is an `invalid_sig_top_up` case, with a valid post state.",
        "created_at": "2019-07-25T00:47:41.583000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "to cover exactly that",
        "created_at": "2019-07-25T00:47:50.148000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "the real problem is yes/no for SSZ tests I think",
        "created_at": "2019-07-25T00:48:21.787000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "Yeah agreed",
        "created_at": "2019-07-25T00:48:27.739000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "It's good that test is there, but we didn't know it because we had BLS turned off",
        "created_at": "2019-07-25T00:48:38.956000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Ah, haha. New tests are the most interesting ones. Will try to make a diff list of them for release notes next time",
        "created_at": "2019-07-25T00:49:40.857000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@361447803194441738\u003e  We did know that test was there though, or at least I remember getting it to pass on v0.6.3, with BLS signature checking turned on",
        "created_at": "2019-07-25T00:50:40.786000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e  however we'd fail that test if we didn't use `fake_crypto`",
        "created_at": "2019-07-25T00:51:09.515000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "No? We pass it even without `fake_crypto`, because the deposit checking code only checks the sig for new deposits, and we do that correctly: https://github.com/sigp/lighthouse/blob/b5af73d056e896c6ed8d1033c9e9cbc562cf6ec8/eth2/state_processing/src/per_block_processing.rs#L400-L408",
        "created_at": "2019-07-25T00:53:50.414000+00:00",
        "attachments": []
    },
    {
        "author": "sproul",
        "category": "Testing",
        "parent": "",
        "content": "^disregard the above, I'd  forgotten about this issue: https://github.com/sigp/lighthouse/issues/384",
        "created_at": "2019-07-25T00:56:44.360000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "I wonder if it would  be wise to change the spec to only allow zeroed signature fields for top ups. The deposit contract will be more expensive though (needs to enforce zeroes for 2nd+ deposits). And also just don't want to introduce complexity there.",
        "created_at": "2019-07-25T01:00:05.451000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "As an implementer, with such one-time signature thing, you may just want to define the field as a bare `bytes96`, and only convert it to a signature when you need it.",
        "created_at": "2019-07-25T01:01:01.337000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e \u003c@361447803194441738\u003e",
        "created_at": "2019-07-25T01:01:10.962000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "for deposits only, that is",
        "created_at": "2019-07-25T01:01:41.498000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "yeah agreed",
        "created_at": "2019-07-25T01:01:48.373000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "we were planning a \"MaybeInvalidSignature\" or something",
        "created_at": "2019-07-25T01:01:57.388000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "which is basically that, but nicely goes into/from a real sig",
        "created_at": "2019-07-25T01:02:16.711000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Just 96 bytes, and parse during the non-top-up  case would work",
        "created_at": "2019-07-25T01:02:20.980000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "Unless your ssz somehow depends on a signature type, instead of stripping the last field",
        "created_at": "2019-07-25T01:03:12.566000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "We also need to be able to parse invalid signatures for non-top-up deposits too",
        "created_at": "2019-07-25T01:03:31.796000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "you can just leave it in its 96 byte container then?",
        "created_at": "2019-07-25T01:04:01.689000+00:00",
        "attachments": []
    },
    {
        "author": "paulhauner",
        "category": "Testing",
        "parent": "",
        "content": "yeah, that's our plan",
        "created_at": "2019-07-25T01:04:33.119000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Testing",
        "parent": "",
        "content": "cool, sounds like the fix is ready to implement. üëç",
        "created_at": "2019-07-25T01:04:57.163000+00:00",
        "attachments": []
    }
]