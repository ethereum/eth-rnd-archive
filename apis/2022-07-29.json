[
    {
        "author": "hdxhaha",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c@340345049063882753\u003e Hi, after merge, is there difference about apis?\nI understand the apis will be fully compatible with before after merge, except some value maybe set to be constant such as difficulty, nonce...etc",
        "created_at": "2022-07-29T08:05:08.038000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I have opened a PR with `GET /eth/v1/beacon/finalized_blocks/{slot}/root` endpoint proposal\nThis proposal is a result of a discussion around checkpoint sync and the model with separation of concerns between state and trust providers. I would be keen to hear your thoughts on that\n\nA link to the discussion: https://discord.com/channels/595666850260713488/745077610685661265/991221387433881630\n\nhttps://github.com/ethereum/beacon-APIs/pull/226",
        "created_at": "2022-07-29T12:04:00.044000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Might this be better as a `finalized=true` or similar flash to the existing API? Could this be useful it it was expanded to a generic `type=finalized/justified/safe/whatever` to allow various different types of root to be obtained?",
        "created_at": "2022-07-29T13:09:33.026000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I see a potential conflict with `block_id` definition, like a BN needs to surface some error if `block_id=justified` and `finalized=true`. It can return Bad Request if `block_id` is not a number i.e. not a slot.\n\nBut if that would be less of complexity to implement then I am happy to not introduce a separate endpoint",
        "created_at": "2022-07-29T19:38:57.159000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Wouldn't that just be a 404?\n\nReason for thinking it's better as the current endpoint is that it is basically the same resource, and all you're doing is asking for a filter.  But I'm not sure if it would be easier or not for client teams to implement, so will defer to them as to which they think may be easier for them.",
        "created_at": "2022-07-29T20:09:32.116000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "It can be 404 but as for me there is a conflict in the request itself thus Bad Request in this case is more semantically correct to my view",
        "created_at": "2022-07-29T20:30:01.283000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I’d argue for it being it’s own endpoint because it’s an api that will usually be exposed on its own rather than along with the entire rest api. Having it separate makes it easy to do that with a reverse proxy/load balancer or by implementing it manually based on something like a block explorer database.",
        "created_at": "2022-07-29T21:18:15.169000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Fair enough.  If we are going to need a group of endpoints for checkpoint sync, does it make sense to have them under their own path _e.g._ `/eth/v1/checkpoint` to make that process easier?",
        "created_at": "2022-07-29T21:19:31.742000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Maybe? There should only be two endpoints `/eth/v2/debug/beacon/states/finalized` that state providers would expose and this new one that trust providers would expose (entities of course could be both state and trust providers and expose both).  Would be kind of nice to move the get state out of debug... But if I were designing an API just for state providers I probably wouldn't have the `finalized` in there - it's up to the state provider to select a state (with the expectation that closer to the latest finalized is better and it has to be within the weak subjectivity period).",
        "created_at": "2022-07-29T21:31:12.535000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Agree with moving this out of `debug` and possibly tidying it up a bit.",
        "created_at": "2022-07-29T21:47:12.810000+00:00",
        "attachments": []
    },
    {
        "author": "samcm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Dropping support for `finalized` and `justified` on the `/eth/v2/debug/beacon/states/$state_id`  equivalent request would also really simplify HTTP caching I think",
        "created_at": "2022-07-29T23:33:55.859000+00:00",
        "attachments": []
    }
]