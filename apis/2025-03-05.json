[
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "we pretty much ignore what the client passes as `committee_index` post-electra, see https://github.com/ChainSafe/lodestar/blob/unstable/packages/beacon-node/src/api/impl/validator/index.ts#L956\n```ts\nindex: isForkPostElectra(fork) ? 0 : committeeIndex,\n```\nthis has worked so far... still need to do more mixed client testing before mainnet goes live",
        "created_at": "2025-03-05T00:30:03.561000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "That seems reasonable, maybe worth switching Nimbus to that, so it never at least returns obvious garbage from the REST API endpoint, no matter what the client does.\n\nBut more broadly, it would be good for this to be specified explicitly",
        "created_at": "2025-03-05T00:34:48.782000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Whether it's this approach or one of the many other options",
        "created_at": "2025-03-05T00:35:00+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "it wouldn't matter for lodestar validator client as we ensure there as well that it is set to 0, we don't trust the beacon node... that being said I think it makes sense to return 0.\n\ncould you add a note to the spec? happy to review",
        "created_at": "2025-03-05T00:41:45.626000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "sure, I'm happy enough to enshrine the Lodestar Beacon API endpoint behavior you show into spec, will make the PR",
        "created_at": "2025-03-05T00:42:57.164000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yes, right now, Nimbus's validator client does this too, and the difference is that the BN/REST server just passes it through",
        "created_at": "2025-03-05T00:43:44.546000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "But interop issues are inevitable with various combinations here",
        "created_at": "2025-03-05T00:43:56.690000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I hope not... but this is getting urgent, either EF devops or someone else has to do it",
        "created_at": "2025-03-05T00:44:29.199000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "well it'd be within each node setup, so it wouldn't escape out into the network. it's not network-level consensus",
        "created_at": "2025-03-05T00:45:05.704000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I did this previously when I tested lodestar compatiblity with all clients, so I should still have a kurtosis config handy",
        "created_at": "2025-03-05T00:45:07.045000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "it's, people combining different VCs \u0026 BNs and some just randomly don't work. Like, Nimbus's BN doesn't help the VC out here, and I think Lighthouse's VC might not quash the committee index",
        "created_at": "2025-03-05T00:45:46.683000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "so I'm not sure if that combination currently works",
        "created_at": "2025-03-05T00:45:55.053000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "as per https://github.com/ethpandaops/ethereum-package",
        "created_at": "2025-03-05T00:46:34.289000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "45bd2d69143e48366538cdd98d291352be3602139af8fca360e9a1e10904f9d8"
            }
        ]
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yes, but does that account for Electra?",
        "created_at": "2025-03-05T00:46:47.162000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "this certainly is pre-electra and I am not sure it's up to date",
        "created_at": "2025-03-05T00:46:50.152000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "right, I know it works in Deneb",
        "created_at": "2025-03-05T00:46:59.802000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I would like that this does not completely fall apart when electra goes live",
        "created_at": "2025-03-05T00:47:06.522000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I mean \"currently\" in a Pectra network (soon, Sepolia)",
        "created_at": "2025-03-05T00:47:18.240000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yes, that's my goal here",
        "created_at": "2025-03-05T00:47:58.540000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "good thing is I would expect mostly that there are issues around attestations, those are fast to detect and fix and not that damaging",
        "created_at": "2025-03-05T00:48:02.844000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah, it's going to be obvious when it fails",
        "created_at": "2025-03-05T00:48:19.683000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "the issue previously was when operators had mixed setups and missed a proposal due to incompatiblity, this was not great...",
        "created_at": "2025-03-05T00:48:32.755000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "but I would prefer we have at least tested this once... every client has stable releases now so it should be doable",
        "created_at": "2025-03-05T00:49:21.500000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yes, agree",
        "created_at": "2025-03-05T00:52:33.259000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "https://github.com/ethereum/beacon-APIs/pull/511",
        "created_at": "2025-03-05T01:38:04.640000+00:00",
        "attachments": null
    },
    {
        "author": "nc1234",
        "category": "Consensus Layer",
        "parent": "",
        "content": "We probably need to have a execution api for EL to expose their config to avoid the holesky saga again. Is this feasible and is this discussed somewhere?",
        "created_at": "2025-03-05T05:11:18.823000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c#1344794120731758654\u003e",
        "created_at": "2025-03-05T05:23:37.345000+00:00",
        "attachments": null
    }
]