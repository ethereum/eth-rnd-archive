[
    {
        "author": "kirilldanshin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "hey folks,\nI'm working on something and I'm trying to figure out a way to get consensus info (e.g. proposer index) while only having the usual block data from exec layer. is there a way for me to do this without scanning the entire chain?",
        "created_at": "2023-04-25T00:45:32.966000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "if you're only on the execution layer (e.g. in a smart contract) then you can't get the proposer index even if you do scan the entire chain",
        "created_at": "2023-04-25T01:18:39.392000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "if you have access to a beacon API (or an oracle to one), then it's straight-forward",
        "created_at": "2023-04-25T01:19:02.387000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003chttps://ethereum.github.io/beacon-APIs/#/Beacon/getBlockHeader\u003e",
        "created_at": "2023-04-25T01:19:23.203000+00:00",
        "attachments": null
    },
    {
        "author": "kirilldanshin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I'm in a Golang service, so I can have access to the API. the thing is that I don't know (or don't understand) how to get the slot number or block root",
        "created_at": "2023-04-25T01:19:59.208000+00:00",
        "attachments": null
    },
    {
        "author": "kirilldanshin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I only have the most standard block data, so I'm not sure how to get the parameters needed",
        "created_at": "2023-04-25T01:21:39.166000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "3a55fc0d26065bf9b70a36f5f282b9b6123996e386eb88aaf9c0fdd7005c8d59"
            }
        ]
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "oh right, in that case you can calculate the slot from the block's timestamp using:\n\n```\nslot = (timestamp - genesis_time) / SECONDS_PER_SLOT\n```\n\nthe `genesis_time` can be fetched from \u003chttps://ethereum.github.io/beacon-APIs/#/Beacon/getGenesis\u003e",
        "created_at": "2023-04-25T01:24:21.919000+00:00",
        "attachments": null
    },
    {
        "author": "kirilldanshin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I thought about `slot = requestedBlockNumber - blockNumberReferencedInGenesis`, but I'd never thought about that formula lol",
        "created_at": "2023-04-25T01:26:45.577000+00:00",
        "attachments": null
    },
    {
        "author": "kirilldanshin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "would my idea even work?",
        "created_at": "2023-04-25T01:26:57.015000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "no, because there are skipped slots where the block number stays the same",
        "created_at": "2023-04-25T01:31:04.065000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "the func I gave is the inverse of `compute_timestamp_at_slot` from the spec: \u003chttps://github.com/ethereum/consensus-specs/blob/dev/specs/bellatrix/beacon-chain.md#compute_timestamp_at_slot\u003e",
        "created_at": "2023-04-25T01:31:54.849000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "(genesis_slot is always 0, so I simplified that out)",
        "created_at": "2023-04-25T01:32:21.472000+00:00",
        "attachments": null
    },
    {
        "author": "kirilldanshin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "thank you, appreciate the help. is there a way to get  `SECONDS_PER_SLOT` if I don't know the beacon network config in advance?",
        "created_at": "2023-04-25T01:37:09.665000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah from the `/eth/v1/config/spec` API",
        "created_at": "2023-04-25T01:38:32.255000+00:00",
        "attachments": null
    },
    {
        "author": "kirilldanshin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "thank you so much. I spent like a week trying to understand how that works, and somehow failed",
        "created_at": "2023-04-25T01:39:27.781000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "How do CL clients resolve \"justified\" and \"finalized\" identifiers when serving data over APIs? Are those roots taken from the corresponding checkpoints in the `store` or from the state of the canonical chain head?",
        "created_at": "2023-04-25T11:56:39.896000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "teku at least just asks for 'justified' from our object model which would go through the store",
        "created_at": "2023-04-25T20:51:45.823000+00:00",
        "attachments": null
    }
]