[
    {
        "author": "adiasg",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Hi \u003c@!755590043632140352\u003e, that's right! We're working on building a WS checkpoint state API (some WIP stuff is here: https://github.com/asn-d6/beacon-APIs/commit/f730c8a3a09b94a8de8dbc69b95c0b153f3c35fe). This will be fully spec-ed out in the coming weeks!",
        "created_at": "2022-01-28T17:50:56.571000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Thanks! cc \u003c@!833706406699073536\u003e who's the one that actually needs this now",
        "created_at": "2022-01-28T17:52:05.478000+00:00",
        "attachments": []
    },
    {
        "author": "adiasg",
        "category": "Consensus Layer",
        "parent": "",
        "content": "After adding this API to the beacon node, WS checkpoint providers can then connect this to their website (or other serving mechanism) to actually distribute the checkpoint states to users",
        "created_at": "2022-01-28T17:52:49.417000+00:00",
        "attachments": []
    },
    {
        "author": "__kasey__",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I can put this feedback on github, but in our case the cheapest thing to compute in the API is the epoch. This uses the head state in memory and is trivial to compute, then the client can fetch block and state by their slots. Requiring the endpoint to compute the root is far more expensive.",
        "created_at": "2022-01-28T17:53:54.765000+00:00",
        "attachments": []
    },
    {
        "author": "adiasg",
        "category": "Consensus Layer",
        "parent": "",
        "content": "We want the user to check that multiple sources they trust agree on the same chain, so we need the complete checkpoint (i.e., epoch \u0026 root)",
        "created_at": "2022-01-28T17:55:23.137000+00:00",
        "attachments": []
    },
    {
        "author": "__kasey__",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Could that be accomplished by requesting the ws epoch, then requesting the state and block root for the relevant slots?",
        "created_at": "2022-01-28T17:56:05.131000+00:00",
        "attachments": []
    },
    {
        "author": "adiasg",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The complication is that a checkpoint that's a skip slot at the epoch boundary cannot serve as the WS checkpoint, because there's no actual block to sync against",
        "created_at": "2022-01-28T17:57:31.111000+00:00",
        "attachments": []
    },
    {
        "author": "__kasey__",
        "category": "Consensus Layer",
        "parent": "",
        "content": "and would the block root + epoch be sufficient on its own? This is the definition of a checkpoint and what is documented as the recommended cli flag format to verify ws checkpoints .",
        "created_at": "2022-01-28T17:57:36.304000+00:00",
        "attachments": []
    },
    {
        "author": "adiasg",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The user can check the root+epoch from multiple sources to see that they agree, but at some point would need the state itself to actually bootstrap the WS sync mechanism",
        "created_at": "2022-01-28T17:59:50.780000+00:00",
        "attachments": []
    },
    {
        "author": "adiasg",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The currently defined WS sync in the spec can do without the state, but it requires syncing from genesis. We'd like to improve on that to remove the pre-WS-checkpoint sync by bootstrapping from a trusted state.",
        "created_at": "2022-01-28T18:01:37.096000+00:00",
        "attachments": []
    },
    {
        "author": "adiasg",
        "category": "Consensus Layer",
        "parent": "",
        "content": "(BTW I'm happy to move to DM if this isn't the right channel for WS chat)",
        "created_at": "2022-01-28T18:02:27.888000+00:00",
        "attachments": []
    },
    {
        "author": "__kasey__",
        "category": "Consensus Layer",
        "parent": "",
        "content": "i have some more follow questions/comments, will DM. Thank you!",
        "created_at": "2022-01-28T18:04:59.795000+00:00",
        "attachments": []
    }
]