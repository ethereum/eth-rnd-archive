[
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "as in the total balance of all validators that a specific node has? im not sure what you mean exactly...\nyou can get balance of any validator key...",
        "created_at": "2023-07-28T05:08:53.623000+00:00",
        "attachments": null
    },
    {
        "author": "jimmygchen",
        "category": "Consensus Layer",
        "parent": "",
        "content": "or do you mean the total effective balance of all active validators? i'm not aware of any endpoints that directly exposes this, but maybe this;\n\n```bash\n$ curl -s \"http://localhost:5052/eth/v1/beacon/states/head/validators\" | jq '[.data[] | select(.status | test(\"^active_.*$\")) | .validator.effective_balance] | map(tonumber) | add'\n22188958000000000\n```",
        "created_at": "2023-07-28T07:15:25.466000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yes, exactly this. I guess querying all validators on mainnet is a huge request consuming a lot of time, while total active balance was something that every BN caches, so there could be an endpoint to query this value (and maybe others). Maybe you know how much time does the query you outlined takes for the mainnet?",
        "created_at": "2023-07-28T09:59:51.763000+00:00",
        "attachments": null
    },
    {
        "author": "parithosh",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The call `/eth/v1/beacon/states/head/validators` on mainnet returns a ~410MB file, so depends on the upload/download speed of the node you are connecting to. I tried it on an EF node and it took ~40s. We use a similar call to do some accounting and we call it once when we run the tool, store the result and play with the stored file to save time.",
        "created_at": "2023-07-28T10:16:19.097000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Consensus Layer",
        "parent": "",
        "content": "got it! thank you!",
        "created_at": "2023-07-28T10:56:27.507000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Note that if you aren't local to the beacon node then you're far better off network-wise to fetch the beacon state using SSZ, reduces the network requirement to ~120MB (until I move https://github.com/ethereum/beacon-APIs/issues/333  along and we have an SSZ-enabled validators endpoint).",
        "created_at": "2023-07-28T12:27:10.083000+00:00",
        "attachments": null
    },
    {
        "author": "jameshe5018",
        "category": "Consensus Layer",
        "parent": "",
        "content": "https://github.com/ethereum/beacon-APIs/pull/339 around this PR \u003c@144468805697929216\u003e \u003c@680234424037670912\u003e  was there an opinion on the field naming to `execution-payload-value` instead of snake case `execution_payload_value` I think snake case would be consistent but may have missed a convo somewhere",
        "created_at": "2023-07-28T18:14:24.052000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Snake case should be for JSON, kebab case for the headers. Did I muck it up somewhere?",
        "created_at": "2023-07-28T18:20:02.885000+00:00",
        "attachments": null
    },
    {
        "author": "jameshe5018",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah should be on lines 66 and 69 unless i read it wrong in `block.v3.yml`",
        "created_at": "2023-07-28T18:21:09.801000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Will take a look when back at a computer, thanks.",
        "created_at": "2023-07-28T18:22:42.656000+00:00",
        "attachments": null
    },
    {
        "author": "jameshe5018",
        "category": "Consensus Layer",
        "parent": "",
        "content": "going to continue with snake case for now then",
        "created_at": "2023-07-28T18:23:01.803000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yes please do.  https://github.com/ethereum/beacon-APIs/pull/342 up in the meantime to address this, thanks for the spot!",
        "created_at": "2023-07-28T18:32:19.671000+00:00",
        "attachments": null
    }
]