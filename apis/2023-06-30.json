[
    {
        "author": "radekkapka",
        "category": "Consensus Layer",
        "parent": "",
        "content": "`/eth/v1/debug/beacon/states_by_block/{block_id}` ? I would like that",
        "created_at": "2023-06-30T11:54:59.785000+00:00",
        "attachments": []
    },
    {
        "author": "radekkapka",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I think we may go ahead and implement something like this in Prysm even if it's not part of the spec. I remember wa discussion about optional endpoints and this could be such an endpoint (actually the whole debug namespace could be optional)",
        "created_at": "2023-06-30T11:58:34.541000+00:00",
        "attachments": []
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "If the endpoint returns the same data it probably makes sense to create an `/eth/v3/debug/beacon/states` endpoint that takes either a `block_id` or `state_id` query parameter.",
        "created_at": "2023-06-30T12:10:37.059000+00:00",
        "attachments": []
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "a state is not uniquely identified by a block - ie it doesn't really make sense to index it that way because when a block goes missing, there would be no way to fetch that state - instead, I'd recommend consumers to fetch by _slot_ instead - if we're adding a by-root request, it should really be block+slot so that you can fetch for example the epoch-boundary state of an epoch.. a block-only request is misleading at best for consumers of the api",
        "created_at": "2023-06-30T15:22:07.014000+00:00",
        "attachments": []
    },
    {
        "author": "radekkapka",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yes, there would be no way to fetch that state *by block root*, but you could still get it in other ways e.g. by slot. And if you know the slot, what is the usefulness of the block root?",
        "created_at": "2023-06-30T15:39:37.375000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "You can only request canonical states by slot by you can request non canonical states by block root. You can’t request empty slots by block root alone. So there are differing gaps in the two possibilities. \nBlock root + slot is the most flexible way to reference states as you can reference everything including states beyond the latest block in a chain. Which is why that’s what’s used in the spec and for things like checkpoints.",
        "created_at": "2023-06-30T22:03:07.875000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Well, among other reasons",
        "created_at": "2023-06-30T22:03:17.204000+00:00",
        "attachments": []
    }
]