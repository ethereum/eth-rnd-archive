[
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c@602753420033785856\u003e im curious why those rewards endpoints are on `/eth/v1/beacon/blocks` - is it possible to get the calculated rewards from just the block? I would have thought they'd be on `.../state`...",
        "created_at": "2022-11-16T06:02:24.074000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Fair point, they do require the state. The reason they're on `/blocks` is that they're about a single block",
        "created_at": "2022-11-16T06:03:25.996000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "the `/attestations` namespace is maybe also a bit funny",
        "created_at": "2022-11-16T06:04:09.579000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "if they make sense on /blocks im not against it... just feel like i kind of missed /lightclietn and dont want to stuff up again üòÑ",
        "created_at": "2022-11-16T06:04:26.753000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "maybe they should all be grouped under `/eth/v1/beacon/rewards/{blocks,attestations,sync_committee_rewards}`",
        "created_at": "2022-11-16T06:04:31.789000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "that might make more sense",
        "created_at": "2022-11-16T06:04:51.114000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "i guess we need more than just the block, and more than just the state, need a bit of a bunch of things",
        "created_at": "2022-11-16T06:05:26.942000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "so would still be based on a block id, but need a bunch of bits",
        "created_at": "2022-11-16T06:05:48.687000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah",
        "created_at": "2022-11-16T06:07:40.050000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "so you thinking `/eth/v1/beacon/rewards/{block_id}/sync_committee_rewards`?",
        "created_at": "2022-11-16T06:07:48.210000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "there are 3 APIs, I was thinking:\n\n- `/eth/v1/beacon/rewards/blocks/{block_id}`\n- `/eth/v1/beacon/rewards/sync_committee/{block_id}`\n- `/eth/v1/beacon/rewards/attestations/{epoch}`",
        "created_at": "2022-11-16T06:08:44.888000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "?",
        "created_at": "2022-11-16T06:08:45.912000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "oh... so rewards/blocks/block_id is from block production...",
        "created_at": "2022-11-16T06:09:20.630000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "i can live with those üôÇ",
        "created_at": "2022-11-16T06:09:49.284000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "just thinking about them based on the sync committee change that's practically ready to merge",
        "created_at": "2022-11-16T06:10:13.336000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "i can comment on the sync_committee one or you doing them already?",
        "created_at": "2022-11-16T06:11:04.623000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "that might be good! it's your feedback after all üòÅ",
        "created_at": "2022-11-16T06:12:54.843000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I think both APIs are equally ready to merge",
        "created_at": "2022-11-16T06:13:03.210000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ok cool updating",
        "created_at": "2022-11-16T06:13:10.219000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ta for all the help on getting all these PRs done, its been a biggish job",
        "created_at": "2022-11-16T06:15:28.028000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I'd like to get a nod of agreement from the other client teams too, cc \u003c@449019668296892420\u003e \u003c@688748669268132001\u003e \u003c@363800010518822915\u003e\n\nContext: For the EPF there are 3 people intending to work on implementing these APIs for all the clients. If nobody has any objections I'd like to merge the API PRs in the next week or so:\n\n- Rewards for blocks and attestations: \u003chttps://github.com/ethereum/beacon-APIs/pull/260\u003e\n- For sync committee messages: \u003chttps://github.com/ethereum/beacon-APIs/pull/262\u003e\n\nthanks",
        "created_at": "2022-11-16T06:16:59.058000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "thanks for leading the charge!",
        "created_at": "2022-11-16T06:17:12.248000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "wdyt about keeping them in PR state until the client impls are done, in case there are performance (or other) considerations that come up during impl?",
        "created_at": "2022-11-16T06:46:43.468000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I'm not opposed to that. I was thinking we could always tweak things post-merge if issues arise or we want to add/remove things",
        "created_at": "2022-11-16T06:52:25.108000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "the thinking being that there are lots of APIs in the `dev` branch of `beacon-APIs` that are not fully settled or implemented in clients",
        "created_at": "2022-11-16T06:52:50.409000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah, I find that messy - ie hard to know which api are \"stable\" (and thus reliable to base consumers on) - ie when cutting a release and we say we support API vx.y.z, it's hard to reason about these semi-stabilised parts -  maybe they can be marked experimental in the doc, then it's fine to merge early",
        "created_at": "2022-11-16T07:02:50.370000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yeah I'd be fine with marking them experimental",
        "created_at": "2022-11-16T07:04:13.449000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "can mark experimental, I'd be fine with that, plus it's in dev atm...",
        "created_at": "2022-11-16T10:01:55.994000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "It was mentioned in a team meeting the other day it'd be nice if we had a way of telling which clients have implemented which endpoints etc, which was done on keymanager, but that was a much smaller list... I'm not sure how feasible a list like that would be in beacon-apis... if anyone has feelings either way...",
        "created_at": "2022-11-16T10:04:38.107000+00:00",
        "attachments": null
    },
    {
        "author": "kevinbogner",
        "category": "Consensus Layer",
        "parent": "",
        "content": "How do we mark them as experimental? Add it to the endpoints description? Or even add 'experimental' as a tag?",
        "created_at": "2022-11-16T10:21:49.070000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "just make an 'Experimental' to put in the labels... will have a quick look",
        "created_at": "2022-11-16T10:59:24.652000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "so in the 'tags' section, list \n```\ntags:\n    - Beacon\n    - Rewards\n    - Experimental\n```",
        "created_at": "2022-11-16T11:00:08.419000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "then when you run it you'll have an Experimental section, and any of your endpoints will list in that",
        "created_at": "2022-11-16T11:00:48.001000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "also in the others... one option would be just list Experimental until we're happy with it",
        "created_at": "2022-11-16T11:01:11.954000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "would probably be my preference, but I'm not strongly opinionated on that particular thing",
        "created_at": "2022-11-16T11:01:34.234000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c@1022784528579842079\u003e  sorry that was all for you üôÇ",
        "created_at": "2022-11-16T11:01:50.462000+00:00",
        "attachments": null
    },
    {
        "author": "nc1234",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c@680234424037670912\u003e \u003c@602753420033785856\u003e I've added the experimental tags for both PRs",
        "created_at": "2022-11-16T17:07:09.375000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Thanks for that, we'll take another look today",
        "created_at": "2022-11-16T21:41:24.700000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The only other observation on those rewards apis is probably just something to keep in mind - previously with id as a query parameter we've hit limits that we wouldn't have had a problem with if it were a POST and a list supplied in the body. this was a problem with validators where people wanted to specify huge numbers of validators in a single query, as some services were only allowing short urls...\nI'm not sure how these are intended to be used, but if it's likely that people may want large numbers of validator id's in a single url (or lots of pubkeys), then it's worth thinking through \u003c@602753420033785856\u003e \nThis is late feedback, you've probably talked about it already but i feel it's at least worth mentioning üôÇ",
        "created_at": "2022-11-16T21:56:54.874000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "happy to run with them as they stand, just putting it out there",
        "created_at": "2022-11-16T21:58:02.618000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ah yeah, that isn't something we'd discussed actually",
        "created_at": "2022-11-16T22:10:33.456000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I'm inclined to say we _should_ go ahead with the POST actually",
        "created_at": "2022-11-16T22:11:01.721000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "as the response data is likely to be massive and having to fetch the whole validator set once you go past the URL length limit would be a pain",
        "created_at": "2022-11-16T22:11:42.384000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Ok glad i wrote it up, it probably sounds worse than it is from my description, https://ethereum.github.io/beacon-APIs/?urls.primaryName=dev#/Validator/getAttesterDuties is probably a good example, it only takes validator index but the same concept could treat anything starting with 0x as a pubkey if you need to accept pubkeys or validator indexes...",
        "created_at": "2022-11-16T22:20:52.795000+00:00",
        "attachments": null
    }
]