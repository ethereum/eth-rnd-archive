[
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003c@586161934425128960\u003e for https://github.com/ethereum/beacon-APIs/pull/511 I guess I'm just not convinced the idea of keeping an endpoint name and deprecating a parameter is ideal. So there's a couple parts, mechanically I'd have to find out how to mark that in the YAML files, but more importantly, from my perspective, the comment by \u003c@680234424037670912\u003e at https://github.com/ethereum/beacon-APIs/pull/511#issuecomment-2713232894 seems apt to me.\n\nMy vision of a REST API at least is one where once an endpoint is created, it stays as immutable as possible. If one wants a different endpoint later, that's ok, make a new versioned endpoint. I'm not ... _strongly_ opposed to doing this, I understand the motivation, but this is also why the initial version of this PR was _only_ an added description of the Electra semantics required in any case, nothing more.",
        "created_at": "2025-03-24T09:13:00.818000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "It's something Nimbus can technically do fine; all `GET` parameters are technically optional and the existence-checking is hand-coded in the specific endpoint routes, it's more a design point",
        "created_at": "2025-03-24T09:13:58.318000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So I being not entirely convinced that in a REST API, \"deprecating\" a parameter is even a thing one should do",
        "created_at": "2025-03-24T09:14:38.903000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So I'm not really convinced that this IMO kind of unorthodox approach to per-parameter deprecation is even better than the status quo (i.e. no PR)",
        "created_at": "2025-03-24T09:15:27.432000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "we could go with a v2 and make the `committee_index` optional there and ignore it post-electra but is that even worth it? I am also fine with just keeping as is + adding the note from your PR\n\nI don't think there is a world were we can remove the parameter altogether if we wanna keep pre-electra support",
        "created_at": "2025-03-24T09:15:36.946000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Right, and for Nimbus, we definitely will remove pre-Electra support at some point",
        "created_at": "2025-03-24T09:16:02.620000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Once all supported networks run Pectra or later and the usual EF approach to devnets is Pectra or later genesis and we stop hearing about anyone caring about wanting to run Dencun, well. If people really want, they can run the BN-only version of Nimbus, it will still work fine",
        "created_at": "2025-03-24T09:17:03.181000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So I understand the idea of deprecating it",
        "created_at": "2025-03-24T09:17:26.192000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "But so far all of the beacon APIs have aspired not to outright drop support for earlier forks (e.g., even `produceBlockV3` technically supports forks from before it was created, exactly to avoid having support multiple generations of endpoints",
        "created_at": "2025-03-24T09:18:25.861000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I guess my question for you is, what does \"deprecated\" mean in this case?",
        "created_at": "2025-03-24T09:18:47.758000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I can add it, but I don't know what the semantic of such deprecation are",
        "created_at": "2025-03-24T09:19:01.693000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yes I think a good api design should be backward compatible as well, eg. in lodestar we have sim tests which still run from phase0 to electra",
        "created_at": "2025-03-24T09:19:27.767000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "just to make clear it's unused post-electra but maybe it's better to leave it untouched as we cannot remove the parameter anyways, so it would be deprecated forever",
        "created_at": "2025-03-24T09:20:11.386000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah, I guess that's what I'm getting at. Different ecosystems seem to view \"deprecated\" as meaning different things. At least in programming languages, for Python, \"deprecated\" standard libraries means, yeah, move to something else with all deliberate haste",
        "created_at": "2025-03-24T09:21:10.970000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "They will absolutely be removing them. For e.g., Java, people routinely use \"deprecated\" APIs from 20 years ago",
        "created_at": "2025-03-24T09:21:34.487000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "And so far we've viewed \"deprecated\" as a path to removal, and this \"deprecated\" would seem to potentially be different",
        "created_at": "2025-03-24T09:22:04.941000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "None of them are \"wrong\"/incorrect, they're just different usages of the word",
        "created_at": "2025-03-24T09:22:38.750000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "as I noted in a comment before, this still feels like a nit to me, yes of course the client still needs to pass the `committee_index` even post-electra even though it's not needed but considering this is a api consumed primarliy by a validator client do we really care?",
        "created_at": "2025-03-24T09:23:52.851000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I would just go ahead and add the note which is useful and keep out any deprecation of the PR and move on for now",
        "created_at": "2025-03-24T09:24:57.218000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Ok, that I'm definitely fine with, I can remove the `deprecated` and that can be discussed separately",
        "created_at": "2025-03-24T09:25:28.157000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "And if people want to still do that, I'm not that opposed, I just view it as a bit different than my initial goal with this PR",
        "created_at": "2025-03-24T09:26:00.936000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I think you are definitely right that deprecating the query param seems a bit off, so status quo is better than doing that",
        "created_at": "2025-03-24T09:26:40.970000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "And regarding the using \u003c@144468805697929216\u003e 's \"will be ignored\" vs the must-use-0, I guess I view the latter as strictly more informative?",
        "created_at": "2025-03-24T09:27:09.188000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "as in, it describes what to do, not what isn't done",
        "created_at": "2025-03-24T09:27:31.073000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Both for clients (must-return-0 implies ignored, but not vice versa) and the REST server",
        "created_at": "2025-03-24T09:28:35.786000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I mean I like the note as is, technically I approved the PR 3 weeks ago already üòÅ",
        "created_at": "2025-03-24T09:28:47.039000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Alright, I'll just revert the deprecated and see if people are ok enough with it",
        "created_at": "2025-03-24T09:29:12.440000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003e  That way we can ultimately remove the parameter entirely.\nsince this assumption is not correct as well since cannot remove it without dropping pre-electra support, so Jim's comment is a bit stale",
        "created_at": "2025-03-24T09:30:46.270000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "we'd need to do the whole 'from electra use this new api' concept to drop the paramter completely",
        "created_at": "2025-03-24T09:31:10.267000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "this is not ideal though becasue we would still need to keep the v1 around forever to support pre-electra",
        "created_at": "2025-03-24T09:31:45.380000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "any value in taht param being ignored would be ok post electra though imo at least",
        "created_at": "2025-03-24T09:31:47.634000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "like basically that index is meaningless post electra, is all we're saying",
        "created_at": "2025-03-24T09:32:22.637000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "sorry i had forgotten about htis in teh craziness",
        "created_at": "2025-03-24T09:33:11.871000+00:00",
        "attachments": null
    },
    {
        "author": "nflaig",
        "category": "Consensus Layer",
        "parent": "",
        "content": "just a matter how this should be communicated, the note in Dustin's PR seems sufficient to me without deprecating the parameter",
        "created_at": "2025-03-24T09:33:52.790000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "looks like a consensus",
        "created_at": "2025-03-24T09:46:06.871000+00:00",
        "attachments": null
    },
    {
        "author": "tersec",
        "category": "Consensus Layer",
        "parent": "",
        "content": "other stuff happening the next few hours, but will update the PR as soon as I can",
        "created_at": "2025-03-24T09:46:50.693000+00:00",
        "attachments": null
    }
]