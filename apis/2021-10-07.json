[
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Per \u003c@!144468805697929216\u003e's issue here https://github.com/sigp/lighthouse/issues/2681, Lighthouse is already sending (empty) keep-alive events. Perhaps we could spec that implementations _may_ do this?",
        "created_at": "2021-10-07T22:24:43.316000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "That sounds like a good plan.  I hadn't realized lighthouse was doing that.  Empty in that sense seems surprising to me but if it's in the eventsource spec that would make a lot of sense.",
        "created_at": "2021-10-07T22:27:46.346000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ie if `:` by itself is a valid eventsource message then that's ideal because it's minimal.  Otherwise it probably needs to be something like `keepalive:\"\"` or whatever the minimum valid message is.",
        "created_at": "2021-10-07T22:28:16.545000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Shouldn't keepalive be done at the TCP level, not the app level?",
        "created_at": "2021-10-07T22:31:46.911000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "It's very common for HTTP connections to have a keep alive at the HTTP level because they may go through multiple TCP connections (proxies etc) and often find they stop receiving events but don't get any indication from TCP that the connection is closed.",
        "created_at": "2021-10-07T22:33:55.875000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah, that's what the SSE spec says too: https://html.spec.whatwg.org/multipage/server-sent-events.html#authoring-notes",
        "created_at": "2021-10-07T22:34:11.972000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003e Legacy proxy servers are known to, in certain cases, drop HTTP connections after a short timeout. To protect against such proxy servers, authors can include a comment line (one starting with a ':' character) every 15 seconds or so.",
        "created_at": "2021-10-07T22:34:21.323000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Lines starting with `:` are comments, so shouldn't be interpreted as events",
        "created_at": "2021-10-07T22:34:41.388000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "ah nice so it is short and valid.  That's awesome.  In which case it probably makes sense to add a note to the spec to encourage doing this but we can just add it and still be within the eventsource spec.",
        "created_at": "2021-10-07T22:35:14.834000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I stopped being a real web developer before EventSource came out so I'm not too familiar with it. ðŸ™‚",
        "created_at": "2021-10-07T22:35:32.308000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I'll write a PR now",
        "created_at": "2021-10-07T22:35:58.263000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Consensus Layer",
        "parent": "",
        "content": "https://github.com/ethereum/beacon-APIs/pull/172",
        "created_at": "2021-10-07T22:44:40.552000+00:00",
        "attachments": null
    }
]