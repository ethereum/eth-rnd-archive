[
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Is there a list of standard error codes somewhere for the beacon apis? Seems like `code` in `http.ErrorMessage` is just set to the http status rather than an api specific code?",
        "created_at": "2022-05-07T08:39:03.479000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "e.g. in the engine api, there are very specific error codes for different situations",
        "created_at": "2022-05-07T08:46:55.812000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "It's just the standard HTTP error codes.  Each endpoint should have a list of codes it can return, and why.",
        "created_at": "2022-05-07T09:41:34.145000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "most are 400, some also can return 404, will have a message with more context",
        "created_at": "2022-05-07T09:45:30.660000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "do you have an example on hand of non-400/404? wasn't able to find one during my cursory search",
        "created_at": "2022-05-07T10:09:44.662000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "it doesn't make sense to me that `http.ErrorMessage.code` equals the http status code, that's just duplicate information - i feel like it should be a custom code that maps to a specific error",
        "created_at": "2022-05-07T10:12:36.131000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "`503` is used for \"currently syncing\" in some places.  `500` for a generic server error.",
        "created_at": "2022-05-07T10:16:19.417000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "The reason for the duplication is to be able to see the response code in the JSON.  It doesn't have to be there, but can help.",
        "created_at": "2022-05-07T10:21:59.682000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So suppose a method can fail in two specific ways, the correct response would be:\n```\n{\n  \"code\": 400,\n  \"message\": \"failure 1\"\n}\n{\n  \"code\": 400,\n  \"message\": \"failure 2\"\n}\n```",
        "created_at": "2022-05-07T10:26:15.019000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "and the client would need to parse `message` to determine the failure?",
        "created_at": "2022-05-07T10:26:40.913000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "A 400 would be due to an error with user input.  So for example a missing of malformed parameter.  In that case then the message may carry information on the specific parameter that failed, or a generic \"bad input\" message, depending on the implementation.",
        "created_at": "2022-05-07T10:28:28.558000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "okay thanks - should each possible error be enumerated?",
        "created_at": "2022-05-07T10:28:55.762000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Consensus Layer",
        "parent": "",
        "content": "or just semantic errors like the `invalid signature`",
        "created_at": "2022-05-07T10:29:28.332000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "So far we have just stated the possible return codes, and left the decision on the level of detail to return in the error message up to individual implementations.",
        "created_at": "2022-05-07T10:32:50.191000+00:00",
        "attachments": null
    }
]