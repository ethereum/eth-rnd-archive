[
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "with the current spec can I query proposer-duties for older epochs?\n```\n$ curl -s \"localhost:5053/eth/v1/validator/duties/proposer/295650\" | jq\n{\n  \"code\": 400,\n  \"message\": \"BAD_REQUEST: requested epoch is 295650 but only current epoch 14389 is allowed\",\n  \"stacktraces\": []\n}\n```",
        "created_at": "2020-10-07T12:00:14.682000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "Consensus Layer",
        "parent": "",
        "content": "\u003e Hmm seems like you are quering future epoch",
        "created_at": "2020-10-07T12:00:34.974000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "```\n$ curl -s \"localhost:5053/eth/v1/validator/duties/proposer/5650\" | jq\n{\n  \"code\": 400,\n  \"message\": \"BAD_REQUEST: requested epoch is 5650 but only current epoch 14390 is allowed\",\n  \"stacktraces\": []\n}\n```",
        "created_at": "2020-10-07T12:01:06.474000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "otherwise I do not see any way to find out who missed a proposal with the current spec, maybe I am missing something",
        "created_at": "2020-10-07T12:01:54.780000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "You _should_ be able to query for prior epochs under the API, but there is no guarantee that any individual implementation will have the data.",
        "created_at": "2020-10-07T12:01:57.825000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "I see",
        "created_at": "2020-10-07T12:02:16.897000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Although actually, looking at that you should try using a different endpoint... hang on",
        "created_at": "2020-10-07T12:02:29.939000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "`/eth/v1/beacon/states/{state_id}/committees/{epoch}`",
        "created_at": "2020-10-07T12:02:46.191000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "but that is only attestations",
        "created_at": "2020-10-07T12:03:19.484000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah wrong one.",
        "created_at": "2020-10-07T12:03:25.733000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Okay sorry the above is incorrect.  You are using the correct endpoint.",
        "created_at": "2020-10-07T12:04:11.255000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "the blocks endpoint only gives me proposed blocks aswell",
        "created_at": "2020-10-07T12:04:30.378000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "will talk with implementers and will beg for an endpoint that gives me duties for older blocks aswell ðŸ˜„",
        "created_at": "2020-10-07T12:05:26.817000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yes it is required for explorers so makes sense to return duties from past epochs.",
        "created_at": "2020-10-07T12:06:00.525000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Need to start padding out the API descriptions with more details about things like this.",
        "created_at": "2020-10-07T12:06:17.924000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah another thing is that the blocks endpoint only gives me 1 block, I would like it to give me noncanonical blocks aswell",
        "created_at": "2020-10-07T12:07:06.474000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "though I need to check I think I can find noncanonical blocks via other endpoints",
        "created_at": "2020-10-07T12:07:23.186000+00:00",
        "attachments": null
    },
    {
        "author": "mpetrunic",
        "category": "Consensus Layer",
        "parent": "",
        "content": "https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockHeaders and filter by slot which would give you non cannonical",
        "created_at": "2020-10-07T12:07:59.535000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Is this historical non-canonical blocks?  Implementations seem to prune these blocks, so they won't be available.  I have a feature request open for teku to support this in their archive mode, not sure about the other implementations.",
        "created_at": "2020-10-07T12:08:32.833000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Yeah I have seen that discussion of yours in the LH-channel",
        "created_at": "2020-10-07T12:09:24.532000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "hopefully they will implement a flag to turn off pruning ðŸ˜„",
        "created_at": "2020-10-07T12:09:45.945000+00:00",
        "attachments": null
    },
    {
        "author": "ppf.",
        "category": "Consensus Layer",
        "parent": "",
        "content": "which is a nice thing to have for analyzing",
        "created_at": "2020-10-07T12:09:59.562000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "Block pruning is tricky; it makes sense to do so, but if everyone prunes it we'll eventually end up with \"ghost\" blocks, where there could be attestations pointing to a block that has no presence in the chain any more.",
        "created_at": "2020-10-07T12:10:55.687000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "pruning can help with storage a lot though - i remember how much space we used to use when teku stored each finalized state ðŸ™‚",
        "created_at": "2020-10-07T19:32:51.017000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Consensus Layer",
        "parent": "",
        "content": "State you can recreate the useful bits from the block history, though.  Pruning an orphaned block means its gone forever.",
        "created_at": "2020-10-07T19:34:50.497000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "yep need to keep all the blocks then can regenerate states as required, and hopefully store enough states that it doesn't take an age, i think we store one state every 2048 slots by default",
        "created_at": "2020-10-07T19:36:14.797000+00:00",
        "attachments": null
    },
    {
        "author": ".paulharris",
        "category": "Consensus Layer",
        "parent": "",
        "content": "its complicated... but can save a stack of space, and at least then we can get historic data if required",
        "created_at": "2020-10-07T19:38:10.119000+00:00",
        "attachments": null
    }
]