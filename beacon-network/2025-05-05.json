[
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I created test vectors for HistoricalSummaries proof for Electra: https://github.com/ethereum/portal-spec-tests/pull/51\nWould be good if other clients can verify them (not only the encoding/decoding, but that they are generated correctly from BeaconState)",
        "created_at": "2025-05-05T09:10:38.744000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I will do that today for fluffy. Thank you for creating those, it was next on my todo list.",
        "created_at": "2025-05-05T09:44:52.959000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "And great on getting the proper fork digest in there, I remember this was an issue for the previously created test vectors.",
        "created_at": "2025-05-05T09:45:47.481000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I had to adapt my test case to hard coded those in there.",
        "created_at": "2025-05-05T09:46:01.230000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "And it actually makes them fail now with a different fork digest.",
        "created_at": "2025-05-05T09:46:15.846000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "From what I remember however, that will change again after the fork. So not sure how you generated these exactly?",
        "created_at": "2025-05-05T09:48:09.433000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I'm not 100% sure that fork_digest is correct. I calculated it myself, but I didn't find anywhere else if that's the correct one or not (I didn't spend too much time looking, to be honest)",
        "created_at": "2025-05-05T09:48:18.199000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I don't think they will change, based on logic that I found. But I could be wrong",
        "created_at": "2025-05-05T09:48:39.755000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Yeah, I meant, potentially correct. Because I remember that for the capella vector it is not correct.",
        "created_at": "2025-05-05T09:48:42.874000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I don't remember the exact logic, I vaguely remember it has to do with the Next fork and so on. But I will investigate as I test these vectors.",
        "created_at": "2025-05-05T09:49:10.540000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "So yeah, it is based on the current fork + validator set at genesis: https://github.com/ethereum/consensus-specs/blob/87d4fbdcc4e6a15b1218119b4cbcc59430f52a6b/specs/phase0/beacon-chain.md#compute_fork_digest",
        "created_at": "2025-05-05T09:53:09.604000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "And https://github.com/ethereum/consensus-specs/blob/87d4fbdcc4e6a15b1218119b4cbcc59430f52a6b/specs/altair/beacon-chain.md#modified-compute_fork_version",
        "created_at": "2025-05-05T09:53:34.644000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "My understanding from here: https://github.com/ethereum/consensus-specs/blob/87d4fbdcc4e6a15b1218119b4cbcc59430f52a6b/specs/phase0/beacon-chain.md?plain=1#L877 is that it depends on:\n- current_version: which should be 5 for Electra\n- genesis_root: which doesn't change",
        "created_at": "2025-05-05T09:53:42.582000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Yes, that's right.",
        "created_at": "2025-05-05T09:53:58.445000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I can confirm it is correct, test vector works for my electra changes in fluffy.",
        "created_at": "2025-05-05T12:15:00.901000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I was mistaken in my explanation previously (I did not remember it right). \nThe issue I had in previous test vector (it applies also to this one), was that the state used in it was a test state, but the added fork digest was based on mainnet state (instead of the `genesis_validators_root` in that consensus test file).\nI think I then suggested to add this information as comment.",
        "created_at": "2025-05-05T12:15:18.631000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "It did however create an issue for the current deneb test vector, as in my test I do re-encode the data with fork digest based on the slot number. And that is no longer correct as that slot number is very big (and thus electra).",
        "created_at": "2025-05-05T12:15:58.056000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Because of this it might be a better idea to have a reasonable epoch/slot in there, one that occurs after Electra fork but not too far ahead.",
        "created_at": "2025-05-05T12:23:05.540000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "ok to merge this as is? https://github.com/ethereum/portal-network-specs/pull/397",
        "created_at": "2025-05-05T16:12:49.213000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I think \u003c@240180844130598912\u003e prefers that we remove old type from the spec (little benefit waiting two days and then removing it).\nI'm leaning towards that (less work in the future), but I'm not against merging it now and updating it in later this week.",
        "created_at": "2025-05-05T19:21:06.594000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Sure, I can remove it if its a big deal. I just did not do it like that because in the future we should not either",
        "created_at": "2025-05-05T19:23:44.563000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "There would be a longer overlap time, especially considering testnets and so.",
        "created_at": "2025-05-05T19:24:16.133000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Or, there would be two differently tagged spec versions perhaps",
        "created_at": "2025-05-05T19:26:19.580000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Well yes, if we had this discussion just one week ago, I would be on that side as well :). Since fork is in 2 days, I also see little benefit in keeping both.\nBut I'm not strongly against keeping it as is even now. I'm just leaning towards removing it as there are less than 2 days left",
        "created_at": "2025-05-05T19:26:55.818000+00:00",
        "attachments": null
    },
    {
        "author": "milos88",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "point being I did approve it a week ago ðŸ™‚",
        "created_at": "2025-05-05T19:27:48.812000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "That is true ðŸ™‚",
        "created_at": "2025-05-05T20:11:35.556000+00:00",
        "attachments": null
    }
]