[
    {
        "author": "ogenev",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003c@510413979080720385\u003e  what is the current status of the `historical_summaries`  API in Nimbus?",
        "created_at": "2025-02-10T09:02:27.611000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I've been slacking on this one due to other work (Union removal among others). But I want to pick it up again now.",
        "created_at": "2025-02-10T16:20:06.039000+00:00",
        "attachments": null
    },
    {
        "author": "deme1744",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "The PR basically just needed adjustment to be future proof regarding hardforks and changes of proofs due to those forks.",
        "created_at": "2025-02-10T16:20:36.795000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "Are the beacon sync hive tests pulling the optimistic and finalized headers from a live beacon node?",
        "created_at": "2025-02-10T17:35:26.048000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "If so, we're going to have issues with the optimistic update test",
        "created_at": "2025-02-10T17:35:33.925000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "I've been running it locally with Ultralight and seems to fail intermittently and from looking at the test, it's pulling an optimistic update from \"bridge\" which if that's a live beacon node, will lead to race conditions in that test",
        "created_at": "2025-02-10T17:36:11.644000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "depending on exactly when you run the test (in the life cycle of each slot)",
        "created_at": "2025-02-10T17:36:38.624000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "\u003c@439193900096290816\u003e did you do the initial draft of the new beacon-sync test suite?  Just curious cuz I'd be happy to drop a PR to address above if you agree it's a correct interpretation of what's going on",
        "created_at": "2025-02-10T18:23:14.567000+00:00",
        "attachments": null
    },
    {
        "author": "nick.ghita",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "yup, I wrote `beacon-sync` against a live consensus provider. it definitely wasn't the ideal choice, but after exploring alternatives it didn't seem like we had any other option. though, i'll admit, my beacon sync knowledge is still coming together so I might have missed something. so, your interpretation is correct, but obvs i'm very open to prs to improve the test!",
        "created_at": "2025-02-10T18:26:45.998000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "ok, i think it would be safe to just cache the initial optimistic update pulled from the beacon node as a starting point and compare against that",
        "created_at": "2025-02-10T18:27:20.149000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "https://github.com/ethereum/hive/pull/1243  \u003c@439193900096290816\u003e I'm not sure if this is the best solution or not but this will solve the immediate issue of the race condition when we're testing for a single optimistic update",
        "created_at": "2025-02-10T21:07:41.395000+00:00",
        "attachments": null
    },
    {
        "author": "acolytec3",
        "category": "Portal R\u0026D",
        "parent": "",
        "content": "this way, if we want to expand the test suite and test for syncing across multiple updates, we can still do so with the existing code with minimal changes",
        "created_at": "2025-02-10T21:08:10.767000+00:00",
        "attachments": null
    }
]