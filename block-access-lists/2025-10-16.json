[
    {
        "author": "raxhvl",
        "category": "Cross-layer",
        "parent": "",
        "content": "From the perspective of coinbase, how is it different from any other test? Whats special about 7702 tests?",
        "created_at": "2025-10-16T00:45:19.851000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "It doesn't have to do with 7702 exactly. It has more to do with the fact that within the test framework, 7702 txs default to the max fee being equal to the base fee leaving no room for a tip.",
        "created_at": "2025-10-16T00:50:56.811000+00:00",
        "attachments": null
    },
    {
        "author": "raxhvl",
        "category": "Cross-layer",
        "parent": "",
        "content": "Right, but its a valid evm transaction right? And so the bal + tests is also correct?\n\nOnly that that those dont have block rewards?",
        "created_at": "2025-10-16T01:07:59.026000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah. The current EELS spec is broken in this regard as it's not including the coinbase with empty changes, it is omitting it completely on `0` block reward transfer.",
        "created_at": "2025-10-16T01:11:44.585000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "I have an update to the spec [here](https://github.com/fselmo/execution-specs/pull/20) which brings it up-to-date with the EIP in this case. When we merge this, I'll update the resolver, refill the tests, and issue a patch release so we can have them aligned with the EIP for now until the next breakout.",
        "created_at": "2025-10-16T01:45:55.297000+00:00",
        "attachments": null
    },
    {
        "author": "icree23",
        "category": "Cross-layer",
        "parent": "",
        "content": "tysm \u003c@796570016966770688\u003e \u003c@762919002196410400\u003e  üôÇ",
        "created_at": "2025-10-16T02:31:51.024000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "we can remove the last point here  (from the EIP) or explicitly state that coinbase addresses are not included for zero-reward blocks. Im happy with either:\n\n```\nFor unaltered account balances:\n...\nThe sender and recipient address (including the coinbase) MUST be included in AccountChanges.\n\nThis includes the following special cases where addresses MUST be included with empty changes if no other state changes occur:\n\nZero-value transfer recipients\nCalling a same-transaction SELFDESTRUCT on an address that had a zero pre-transaction balance\nZero-value block reward recipients\n```",
        "created_at": "2025-10-16T11:20:37.006000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "this means, we'd treat reward payments differently from calls, which would make sense as reward payments cannot trigger code.",
        "created_at": "2025-10-16T11:23:07.601000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "I agree, we should change this.\nUpdated section would look like:\n```\nFor unaltered account balances:\n...\nThe sender and recipient address (including the coinbase) MUST be included in AccountChanges.\n\nThis includes the following special cases where addresses MUST be included with empty changes if no other state changes occur:\n\nZero-value transfer recipients\nCalling a same-transaction SELFDESTRUCT on an address that had a zero pre-transaction balance\n\nZero-value block reward recipients MUST NOT be included without changes. Zero-value block reward recipients MUST be included for blocks where rewards \u003e 0. \n```",
        "created_at": "2025-10-16T11:28:51.130000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "I agree, excluding zero-valie block reward recipients should be explicit",
        "created_at": "2025-10-16T13:41:52.811000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm a bit confused by this in the spec `MAX_CODE_CHANGES = 1`, should the code changes for an account never be more than 1 or is that per-tx? In one of the tests we have 2 code changes in an account cc \u003c@796570016966770688\u003e \u003c@762919002196410400\u003e \u003c@792404665068158998\u003e",
        "created_at": "2025-10-16T13:44:15.079000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah this is also confusing to me. I'm not sure but this would seem like it is per bal index (per tx).",
        "created_at": "2025-10-16T14:03:12.672000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm curious. Is it valuable to refill the tests with the current spec so that coinbase with `0` block reward is included or should we wait until the breakout? In other words, are the current test vectors OK? We did just get that spec change merged that will include it with no changes in the BAL. All I need to do is update the commit on the test side and refill, just wondering how useful this is to do in the meantime.",
        "created_at": "2025-10-16T14:05:28.037000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "that's per-tx as those changes are linked to block_access_index. The only change we can have in a single tx is a deployment",
        "created_at": "2025-10-16T14:06:44.551000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'll update the EIP and I think we should update the test too. We had it like this since the beginning and only changed this in the EIP with the latest PR of \u003c@348512261955911691\u003e and it kinda slipped through. We simply forget to think about COINBASE in the latest PR.\n\nI'll update the EIP now.",
        "created_at": "2025-10-16T14:08:12.099000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "We will still discuss in on the breakout next week.",
        "created_at": "2025-10-16T14:08:24.233000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ok so that would mean the current test vectors are actually correct then. It doesn't include the coinbase for zero transfers. Just want to make sure?",
        "created_at": "2025-10-16T14:08:46.124000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "Which means no new patch release and we revert the commit you approved this morning \u003c@792404665068158998\u003e",
        "created_at": "2025-10-16T14:09:09.076000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah right! Only the EIP is wrong on that",
        "created_at": "2025-10-16T14:09:25.568000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "(morning for me üòÑ )",
        "created_at": "2025-10-16T14:09:25.727000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "perfect... I'll revert that",
        "created_at": "2025-10-16T14:09:41.363000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "makes sense, I think this could be a little clearer by removing this constant and explaining this, or adding _PER_TX",
        "created_at": "2025-10-16T14:09:44.332000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "Done. afaik then the last test release is still up to spec üëçüèΩ",
        "created_at": "2025-10-16T14:14:01.121000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Those constants were needed for SSZ but for RLP, as we're using it now, we can remove those upper bounds entirely, right?",
        "created_at": "2025-10-16T14:16:25.789000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "PR is ready here:\nhttps://github.com/ethereum/EIPs/pull/10549",
        "created_at": "2025-10-16T14:23:10.337000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think it‚Äôs still good to enforce upper bounds on size for RLP",
        "created_at": "2025-10-16T14:29:17.500000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Curious what others think on that. Happy to move them into the eip again and define them properly as max.\nWe'd have to keep them   high enough compared to what the gas limit allows, so it'd be more an arbitrary size limit?",
        "created_at": "2025-10-16T14:32:42.523000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "it seems better to me for decoding, as you know the max size of the buffer you need to allocate",
        "created_at": "2025-10-16T14:35:04.222000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "this would cover balance changes, nonce changes, and code changes also as they must be less than or equal to MAX_TXS",
        "created_at": "2025-10-16T14:40:59.862000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "Are you doing the same for other rlp structures?\nFor SSZ, defining upper bounds was needed but now with RLP, I'd prefer to avoid needing to bump the number in the future.",
        "created_at": "2025-10-16T14:42:47.629000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah we just merged a PR to add limits like these to our RLP implementation",
        "created_at": "2025-10-16T14:43:55.342000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "we could bump the constants higher to avoid changing",
        "created_at": "2025-10-16T14:46:03.196000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "otherwise we would use some arbitrary limit that isn‚Äôt standardised between clients",
        "created_at": "2025-10-16T14:46:58.017000+00:00",
        "attachments": null
    },
    {
        "author": "raxhvl",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think this is an artificact of the ssz serialization, not relevant anymore",
        "created_at": "2025-10-16T14:52:24.478000+00:00",
        "attachments": null
    },
    {
        "author": "raxhvl",
        "category": "Cross-layer",
        "parent": "",
        "content": "Do you mean you validate the bal to be within these limits, before encoding?. RLP per say does not enforce length of a list, no?",
        "created_at": "2025-10-16T14:55:58.425000+00:00",
        "attachments": null
    },
    {
        "author": "marchhill",
        "category": "Cross-layer",
        "parent": "",
        "content": "yes it's not enforced by RLP but it's helpful to have a limit, before decoding it's useful to know the max size the array could be",
        "created_at": "2025-10-16T14:58:28.883000+00:00",
        "attachments": null
    },
    {
        "author": "raxhvl",
        "category": "Cross-layer",
        "parent": "",
        "content": "Got it. I think this an implementation specific detail, feel free to use an arbitrary number as a function of opcode and tx / block gas limit. But we shouldn't have these limits in the EIP.",
        "created_at": "2025-10-16T15:02:38.767000+00:00",
        "attachments": null
    },
    {
        "author": "m0_ox",
        "category": "Cross-layer",
        "parent": "",
        "content": "I wonder what edge cases with EIP-7934 (block rlp limit) could arise here depending on the rlp space transactions take up, code changes in the BAL for large bytecode, etc",
        "created_at": "2025-10-16T15:03:56.255000+00:00",
        "attachments": null
    },
    {
        "author": "raxhvl",
        "category": "Cross-layer",
        "parent": "",
        "content": "We should definitely simulate to find out.",
        "created_at": "2025-10-16T15:05:53.343000+00:00",
        "attachments": null
    },
    {
        "author": "qu0b",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e Zero-value block reward recipients **MUST NOT** be included without changes. Zero-value block reward recipients **MUST** be included for blocks where rewards \u003e 0. \n\nWhat does the \"without changes\" mean here? Is it referring to state changes? why not just `Zero-value block reward recipients **MUST NOT** be included.`?",
        "created_at": "2025-10-16T15:18:28.262000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "We're definitely fine as long as calldata is cheaper than data in the access list, which is the case. So, if max-size calldata still fits the rlp limit, 7928 won't change anything.",
        "created_at": "2025-10-16T15:18:35.275000+00:00",
        "attachments": null
    },
    {
        "author": "nero_eth",
        "category": "Cross-layer",
        "parent": "",
        "content": "They are includable if there are changes (e.g. balance changes), but they are never included as a state read (=without changes).",
        "created_at": "2025-10-16T15:19:51.825000+00:00",
        "attachments": null
    }
]