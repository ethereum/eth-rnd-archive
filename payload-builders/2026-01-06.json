[
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "hey folks! back from the holidays! couple of thoughts:\n1. I think specifying `builder_index` in the registrations might get tricky in the builder-api. The validator would have to know the `builder_index` corresponding to a builder which could change dynamically.  how would i know the builder indices corresponding to a builder A given their url or so?\n2. I think registration replaying can be avoided today with the `timestamp` field in the registration object right? https://github.com/ethereum/builder-specs/blob/main/specs/bellatrix/builder.md?plain=1#L71 With ePBS, we can have the timestamp field act as versioning and builders could only accept registrations with a later timestamp than what they have already seen? Since the registration is signed by validator, builders can't send a fake registration",
        "created_at": "2026-01-06T07:22:03.518000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "builders could expose an endpoint which lists their indices and based on that we could populate the registrations with the builder indices but that doesn't seem too clean.",
        "created_at": "2026-01-06T07:31:06.541000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Builders should advertise the builder index in their endpoint.",
        "created_at": "2026-01-06T13:51:55.596000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Replays are JIT",
        "created_at": "2026-01-06T13:52:23.543000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "thats fair but a builder could also have multiple builder indices right?",
        "created_at": "2026-01-06T14:00:07.294000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "i would assume a proposer could query the builder for the indices every epoch when they have to create a registration",
        "created_at": "2026-01-06T14:02:14.690000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes",
        "created_at": "2026-01-06T14:02:31.036000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Registration is not important for the builder index",
        "created_at": "2026-01-06T14:02:51.937000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "It's important at the bid request time",
        "created_at": "2026-01-06T14:03:03.766000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "You can remove the builder index from the registration, there it's kinda irrelevant or a minor dos in making a builder prepare a payload that will not be requested.",
        "created_at": "2026-01-06T14:04:01.910000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "But the builder index needs to come in the bid request. If there's a list of indices or multiple requests per endpoint that's another story, both are fine by me",
        "created_at": "2026-01-06T14:04:58.208000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "agreed, i think it could add more complexity for validators as they have to fetch the indices somehow while creating the registrations",
        "created_at": "2026-01-06T14:07:00.100000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "just to clarify, when you mean \"builder index needs to come in the bid request\", you mean the validator would have to send the builder_index from which they want the bid? because the `ExecutionPayloadBid` already includes the `builder_index`. When a validator queries a builder url, it should get the builders best `ExecutionPayloadBid`",
        "created_at": "2026-01-06T14:08:19.865000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is in the config file, just like MeV boost",
        "created_at": "2026-01-06T14:09:31.356000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "in my mind, i was thinking of cases where a builder could change their builder index. but i don't think a builder would change it regularly anyways",
        "created_at": "2026-01-06T14:10:13.665000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes! This is the whole point of signing to a builder to prevent anyone to request a current quote from said builder",
        "created_at": "2026-01-06T14:10:16.505000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "yup makes sense. we want only the proposer to be able to query the bid.",
        "created_at": "2026-01-06T14:11:28.134000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "so it should be ideally safe to assume that the validators will know the builder index of a given builder url",
        "created_at": "2026-01-06T14:11:48.759000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "It's fine if the builder changes by just having a list and rotate them, that gives them a buffer to change configurations on proposers as long as they don't rotate too often",
        "created_at": "2026-01-06T14:18:37.606000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah i would assume changing the builder index is akin to changing their url. today if a builder changes their url, it would be a big undertaking to advertise it to all proposers",
        "created_at": "2026-01-06T14:19:21.760000+00:00",
        "attachments": null
    },
    {
        "author": "bharath.vedartham",
        "category": "Cross-layer",
        "parent": "",
        "content": "i think thats clear! thanks! i m finishing up the builder-api specs and will let you folks know when it is ready to review!",
        "created_at": "2026-01-06T14:19:50.650000+00:00",
        "attachments": null
    }
]