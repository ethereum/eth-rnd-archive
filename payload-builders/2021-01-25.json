[
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "assuming the exact same set of transactions is included in both the 100 full blocks vs the 200 half full blocks, I don't see why not? I am fuzzy on the exact details of which operations grow the state but isn't it fully determined by the transactions that are included, regardless of how they are distributed over some blocks?",
        "created_at": "2021-01-25T02:02:09.214000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, assume that in both cases the transactions are just SSTOREs or something (pure state growth operations).",
        "created_at": "2021-01-25T02:30:30.695000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "To put it another way, is the total gas used over a window of time higher or lower if the base fee ends at a value higher than it started?",
        "created_at": "2021-01-25T02:31:01.477000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@486501030046203915\u003e",
        "created_at": "2021-01-25T02:31:12.052000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Actually, lets just focus on the latter.  What is the total gas used over a particular window.",
        "created_at": "2021-01-25T02:31:49.863000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Is it higher when the base fee ends above where it started?  Is it path dependent within the window?",
        "created_at": "2021-01-25T02:32:09.285000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Those are the two questions I would like to better understand the answer to.",
        "created_at": "2021-01-25T02:32:22.534000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "if we take the exponential formula (basefee{t+1} = basefee{t} * exp(d * (gas used - target) / target)), then there is no path dependence and basefee{T} \u003e basefee{t} =\u003e gas used between t and T is greater than target * (T - t), i think this can be proven relatively easily (because exp(x) * exp(y) = exp(x + y))",
        "created_at": "2021-01-25T02:34:50.265000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "there may be some imbalance due to the first-degree approximation , but probably residual. And likely in the direction of \"if basefee is greater at T than t, then total gas used is above the target for that period\" rather than \"if basefee is smaller at T than t, then total gas used is below the target for that period\"",
        "created_at": "2021-01-25T02:36:25.345000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "actually this is easy to prove, take T = t+1, and one almost full block followed by one empty block. you can find total gas used is below target (less than 2 * target) but basefee{t+1} \u003e basefee{t-1}",
        "created_at": "2021-01-25T02:37:39.113000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yeah, I think proving the first is pretty easy and intuitive.",
        "created_at": "2021-01-25T02:38:48.606000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The path dependence question is the one that I'm less certain about.",
        "created_at": "2021-01-25T02:38:57.744000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "oh are we assuming that all the transactions we are talking about can always be included? i am not sure what you mean exactly by path dependence",
        "created_at": "2021-01-25T02:40:49.561000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If the base fee goes from 100 to 112 to 126 to 141 to 158 over 4 blocks and then stays at 158 for 94 blocks, will that result in the same total gas used over those 100 blocks as if the base fee went from 100 to 158 very slowly over the course of 100 blocks?",
        "created_at": "2021-01-25T02:42:31.440000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "with the exponential formula, yes I think the total gas used (x) is entirely determined by the start and end point of the basefee process",
        "created_at": "2021-01-25T02:50:41.979000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "with the first order approximation, possibly this is not exactly true, but you can probably bound the deviation very sharply",
        "created_at": "2021-01-25T02:51:14.660000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "(the `d` at the end of the last line should be a T i guess?)",
        "created_at": "2021-01-25T02:52:49.709000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm fine with focusing discussion on the exponential version for now.",
        "created_at": "2021-01-25T03:01:00.405000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "just realised I used the same variable name for target and the end period... sorry ðŸ™‚ here is a reformatted version",
        "created_at": "2021-01-25T03:06:50.171000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "IMG_F7835800BAF8-1.jpeg",
                "content": "a5e1a35e4f8aa57d9f3299204a4dd8a4ad2bded86fc4dd49838faa29223c13dd"
            }
        ]
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!425572898787426305\u003e just sent me a few questions about the changes to the block hash calculation that I couldn't answer, so sharing here ðŸ˜…",
        "created_at": "2021-01-25T17:07:47.052000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "TL;DR: do we know if changing the blockhash inputs will break anything?\n\nSimilar to the conversation about changing it for the Eth2 merge: https://ethresear.ch/t/executable-beacon-chain/8271/11",
        "created_at": "2021-01-25T17:08:32.652000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "He mentioned that someone may use blockhash to verify a merkle proof of receipts trie which allows to read data from logs where itâ€™s possible and save some gas on storage reads.",
        "created_at": "2021-01-25T17:08:54.364000+00:00",
        "attachments": null
    }
]