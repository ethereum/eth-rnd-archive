[
    {
        "author": "cory.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Hi I come from Twitter. I am interested in working on the fee market problem. I know quite a bit of mathematics / programming.\n\nWhat kind of help do you guys need?",
        "created_at": "2021-08-31T15:05:17.553000+00:00",
        "attachments": null
    },
    {
        "author": "cory.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "from Tim's tweet",
        "created_at": "2021-08-31T15:06:00.618000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003c@!836476097553367082\u003e if you scroll up, you'll see a few of the recent conversations we've been having üôÇ I've also pinged some researchers directly to let them know you are here üëç",
        "created_at": "2021-08-31T15:29:46.581000+00:00",
        "attachments": null
    },
    {
        "author": "cory.eth",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Great. I'll read through chat today.",
        "created_at": "2021-08-31T15:34:56.570000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Imo gas problem is because you guys decided to just throw type 0 into the system without modifying it for the new system.\n\nYou need to figure out a formula to forcefully transform type 0 into type 2. A crude way would be to send half the gas limit from legacy type 0 transactions to tips. This works twofold by lowering \"previous block gas\" component to realistic levels as well as incentivising miners for clearing up these transactions.",
        "created_at": "2021-08-31T16:23:07.854000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "\u003e You need to figure out a formula to forcefully transform type 0 into type 2. A crude way would be to send half the gas limit from legacy type 0 transactions to tips. This works twofold by lowering \"previous block gas\" component to realistic levels as well as incentivising miners for clearing up these transactions.\n\nType 0 _are_ \"transformed\", they are simply interpreted as gas price == max fee == max priority fee.",
        "created_at": "2021-08-31T17:28:56.344000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We can't modify the Type 0 txns themselves, as it would break every wallet that supports them.",
        "created_at": "2021-08-31T17:29:31.096000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "imo type 0 should be deprecated",
        "created_at": "2021-08-31T17:39:27.362000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "backwards compatibility is important for the ecosystem. it's hard to know what the right timeframe is for deprecation even",
        "created_at": "2021-08-31T17:42:13.869000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1-2 years",
        "created_at": "2021-08-31T17:42:46.333000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "We can experiment with deprecating Type 1 and see how people complain before deprecating Type 0 üôÇ",
        "created_at": "2021-08-31T17:44:20.876000+00:00",
        "attachments": null
    },
    {
        "author": "eugeen001",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "but type 1 is just type 0 with access list isnt it?",
        "created_at": "2021-08-31T17:44:53.514000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes",
        "created_at": "2021-08-31T17:44:57.295000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I am relatively surprised how many type 1 transactions are in the wild.  I thought for sure that as of London they would all stop almost right away.",
        "created_at": "2021-08-31T17:45:02.287000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And given you have have an access list with type 2, they are not stricly necessary for anything",
        "created_at": "2021-08-31T17:45:15.721000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And I thought miners would all have changed their gas limit target, and some of them were still at 8m ! Some people just don't get the memo(s) üòÖ",
        "created_at": "2021-08-31T17:45:55.868000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Type 1 transactions though had a very short lifespan, and the only people using them are people who are the ball.",
        "created_at": "2021-08-31T17:46:38.706000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You don't accidentally start using type 1 transactions within months of their release, it has to be deliberate.",
        "created_at": "2021-08-31T17:47:04.436000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But those same people who rapidly upgraded to type 1 *didn't* rapidly upgrade to type 2, which is what I find odd.",
        "created_at": "2021-08-31T17:47:34.300000+00:00",
        "attachments": null
    },
    {
        "author": "trianglesphere",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Could those be MEV people? They'd use lower gas w/ type 1's (if they fill the access list), but don't need to use type 2 fee markets \u0026 don't want empty fields.",
        "created_at": "2021-08-31T17:49:03.743000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Perhaps, but why not switch to type 2 then?",
        "created_at": "2021-08-31T17:52:57.066000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "With type 2 transactions, you can more carefully control how much you pay the miner.",
        "created_at": "2021-08-31T17:53:24.133000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "And a good bot should be able to *exactly* predict next-block base fee.",
        "created_at": "2021-08-31T17:53:34.315000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Though, I suppose you can precisely control miner payout with type 1 or type 2.  ü§î",
        "created_at": "2021-08-31T17:54:05.210000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Maybe it is bots.",
        "created_at": "2021-08-31T17:54:07.144000+00:00",
        "attachments": null
    },
    {
        "author": "trianglesphere",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think the flashbots considers the total payout to the miner, not just the payout from gas fees. If you were just broadcasting transactions type 2 might make more sense",
        "created_at": "2021-08-31T17:55:16.118000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "The problem is that 1559 ALREADY broke every wallet that supports type 0. You can't justify inaction on a premise that doesn't exist. The new system is so fundamentally different from the old that there is no room for accommodating old transactions as they were. Frankly, it's extremely frustrating that you can't see this.\n\nType 0 users have been conditioned to just bumping up gas limit in the past and this behaviour is not going to change until there is reasonable reason to do so. So when their transactions don't go through, they just keep bumping up gas until they do. Above 50% it triggers the step up that turns gas exponential. Even by capping gas at some amount (could be calculated by a moving average) and pushing the surplus to priority would drastically slow down the velocity of gas.\n\nI fully understand the hands off pov where you want to let users figure out the right balance themselves but the current approach is penalising the rest of the users who are trying to use type 2. There's no incentive for type 0 users to even bother with priority as the type 0 are the ones influencing the gas prices paid by the type 2.\n\nRefusal to take inaction is going to kill eth's general adoption because only NFT bidders can justify the stupid prices these days. Unless of course your intention is to keep eth prices on an upward trajectory then there's no need to make any changes because now everyone is just forced to hodl.",
        "created_at": "2021-08-31T18:11:57.477000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "1559 is backward compatible with legacy transactions.  Any wallet that broke is a problem with the wallet.",
        "created_at": "2021-08-31T18:14:39.885000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm not talking about ability to send transactions. I'm talking about the effect type 0 has on the fee market that no longer uses a single fee mechanism",
        "created_at": "2021-08-31T18:15:59.288000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Wasn't the whole point of 1559 that \"including 1 more transaction in the same block should not cost arm and leg\"?",
        "created_at": "2021-08-31T18:24:02.965000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yet blocks are still not full with gas bidded up to the sky",
        "created_at": "2021-08-31T18:24:26.172000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Because there's money on the table that isn't directed to the people who are deciding what goes in the block",
        "created_at": "2021-08-31T18:25:02.307000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I get burning gas on type 2 because there's tips to balance out",
        "created_at": "2021-08-31T18:25:39.639000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "But type 0 should absolutely take some of that gas and stick it in priority",
        "created_at": "2021-08-31T18:26:17.505000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No.",
        "created_at": "2021-08-31T18:28:34.409000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i don't think there were any wallets ready to support 1559 / type 2 tx when London went live. we're still at only ~50% adoption a month later.\n\nif backwards compatibility for tx types was not a priority, there would have been a complete inability for users to make transactions for several weeks. even today, 50% of the chain would not have access. \n\nforcing a high pressure transition onto infra providers, wallets and stress for users unable to transact would have been absolutely untenable for an ecosystem as large and diverse as Ethereum's",
        "created_at": "2021-08-31T18:28:36.369000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "i think you are misunderstanding how 1559 works.\n\nthe oscillation bumps baseFee up to compress demand into the smallest number of blocks, taking in any transaction will to pay it. \n\non the way down, it's typical that tx at that baseFee have already been included in a block, so the mechanism continues to descend until it finds paying tx. this means there will sometimes be empty or partially full blocks",
        "created_at": "2021-08-31T18:28:59.215000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think you may be misunderstanding how type 0 transactions work now.",
        "created_at": "2021-08-31T18:29:33.198000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I'm AFK, so I'll leave it o \u003c@420951281910284289\u003e to describe.  üò¨",
        "created_at": "2021-08-31T18:29:54.327000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Do type 0s send tips at all? That's all I need to know",
        "created_at": "2021-08-31T18:31:36.598000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "If they don't, then I am understanding it correctly",
        "created_at": "2021-08-31T18:31:53.348000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Yes (exception for some extremely rare edge cases where miners were running buggy software).",
        "created_at": "2021-08-31T18:32:18.030000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I wonder if there were any times we hit that extremely rare case?  Probably not...",
        "created_at": "2021-08-31T18:32:49.688000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Ok so it's just etherscan's terrible UI that makes it seem like they don't?",
        "created_at": "2021-08-31T18:34:25.781000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I don't remember how EtherScan renders type 1 transactions, but if they don't show premium paid then yes.",
        "created_at": "2021-08-31T18:35:50.953000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "You can calculate it yourself though. `gasPrice - baseFee`, both of which I think are listed IIRC.",
        "created_at": "2021-08-31T18:36:25.200000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think there are a few misconceptions in your message, but I want to focus on this:\n\n\u003e the current approach is penalising the rest of the users who are trying to use type 2. There's no incentive for type 0 users to even bother with priority as the type 0 are the ones influencing the gas prices paid by the type 2.",
        "created_at": "2021-08-31T19:36:30.765000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Empirically, it's not true Type 2 users are penalized. There is even some research showing that Type 0 txns pay _more_ and take longer.",
        "created_at": "2021-08-31T19:36:55.513000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think a lot of wallets are still in the process of adding and fine-tuning the type 2 txn support, but for me, when setting reasonable defaults (e.g. 2x base fee + 2 gwei priority fee), they've all been included very quickly (\u003c3 blocks)",
        "created_at": "2021-08-31T19:37:40.990000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "Metamask's estimation has already improved a lot in the past week or so, and I suspect that it will keep doing so",
        "created_at": "2021-08-31T19:37:56.907000+00:00",
        "attachments": null
    },
    {
        "author": "_____josh_____",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I think you might have missed what I was trying to say. Type 0 transactions pushing up average gas passes this on to the rest of the type 2 users in the form of gas estimates/gas to pay to be included through no fault of their own. i.e. type 2 could have been paying much lower gas if not for these type 0s.",
        "created_at": "2021-08-31T20:05:40.727000+00:00",
        "attachments": null
    },
    {
        "author": "gwintery",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "I still don't understand how you think type 0 transactions push up average gas for type 2 users? When type 0 transactions overpay, that overpayment is considered as tip, and does not influence basefee in a special way compared to type 2 transactions if my understanding is correct.",
        "created_at": "2021-08-31T20:14:52.799000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "this is correct. overpayment over the baseFee becomes a tip to the miner for type 0 tx",
        "created_at": "2021-08-31T20:19:35.750000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "No, this is what I am saying: wallets are still skewing their estimates too much, but it is improving.",
        "created_at": "2021-08-31T20:19:37.287000+00:00",
        "attachments": null
    },
    {
        "author": "barnabemonnot",
        "category": "Execution R\u0026D",
        "parent": "",
        "content": "At worse type 0 that have high effective tip (because they overshoot the current basefee by a bit) bias the priority fee oracle upwards, so type 2 users may overpay slightly. That effect is probably quite diluted now that 1559 adoption is higher (oracles target the low end of the priority fee distribution), plus if all type 2 users were overpaying on the tip by the same amount, basefee would simply settle lower at equilibrium. In any case the message is getting through that priority fees needn‚Äôt be so high and should stay close to the *objective* reasonable minimum (1-2 gweis) at most times. Users who set them at that level reported quick inclusion and no ‚Äúoverpayment‚Äù wrt current basefee",
        "created_at": "2021-08-31T22:01:45.358000+00:00",
        "attachments": null
    }
]