[
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGottfriedHerold\u003e To add to 1: We could also add GLV decomposition and endomorphism precompiles later (requiring careful agreement in algorithmic choices there), so the caller can opt-in to it by calling a double-sized MSM. This would require the gas price to depend on the (maximum of the) bitlengths of the exponents to be meaningful. Note that 1. is forward-compatible with this approach. (re @mratsim: Yes I have a reply with 3 proposals,\n1. no subgroup check, price like double-and-add like today, add test vectors. For G1 not a problem, endomorphism acceleration is even not needed beyond 2^10 sized MSM, the overhead is too large. This is the pragmatic approach. (no change to EIP)\n2. enforce subgroup check. This is the misuse resistance approach\n3. provide subgroup check, and clear cofactor separate primitives, so people can do it themselves, this is the performance and modularity approach,)",
        "created_at": "2024-04-10T06:20:17.370000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e Hi Mamy thanks a lot for your comment Re test vectors I am on it (about half way through). Re subgrouo issues: we have already been discussing this in https://github.com/ethereum/EIPs/pull/8322 (and the GLV concern was one of it). My proposal would be the same ihat the one I placed in the comment. Namely enforce subgroup check for everything but for 'BLS12_G1ADD' and 'BLS12_G2ADD\\ Thoughts ? (re @mratsim: Yes I have a reply with 3 proposals,\n1. no subgroup check, price like double-and-add like today, add test vectors. For G1 not a problem, endomorphism acceleration is even not needed beyond 2^10 sized MSM, the overhead is too large. This is the pragmatic approach. (no change to EIP)\n2. enforce subgroup check. This is the misuse resistance approach\n3. provide subgroup check, and clear cofactor separate primitives, so people can do it themselves, this is the performance and modularity approach,)",
        "created_at": "2024-04-10T06:35:41.715000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e I think we have have an easier path than this, see my comment below (re @GottfriedHerold: To add to 1: We could also add GLV decomposition and endomorphism precompiles later (requiring careful agreement in algorithmic choices there), so the caller can opt-in to it by calling a double-sized MSM. This would require the gas price to depend on the (maximum of the) bitlengths of the exponents to be meaningful. Note that 1. is forward-compatible with this approach.)",
        "created_at": "2024-04-10T06:36:44.702000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e I think that's a lot of burden on implementers to open an internal repr. And decomposition isn't unique, some use lattice reductions some use divisions (re @GottfriedHerold: To add to 1: We could also add GLV decomposition and endomorphism precompiles later (requiring careful agreement in algorithmic choices there), so the caller can opt-in to it by calling a double-sized MSM. This would require the gas price to depend on the (maximum of the) bitlengths of the exponents to be meaningful. Note that 1. is forward-compatible with this approach.)",
        "created_at": "2024-04-10T08:21:14.211000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e Just did endomorphism benchmarks on G2, for MSMs they don't matter when over \u003e8192 points, so I'm also OK with saying \"don't use endomorphism acceleration. will lay out the various proposal in the github and ethereum magician (re @asanso81: Hi Mamy thanks a lot for your comment Re test vectors I am on it (about half way through). Re subgrouo issues: we have already been discussing this in https://github.com/ethereum/EIPs/pull/8322 (and the GLV concern was one of it). My proposal would be the same ihat the one I placed in the comment. Namely enforce subgroup check for everything but for 'BLS12_G1ADD' and 'BLS12_G2ADD\\ Thoughts ?)",
        "created_at": "2024-04-10T08:22:49.107000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e",
        "created_at": "2024-04-10T08:24:00.812000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "spectacle_20240410_101453.png",
                "content": "4127f0bf29c0c0f8c7668fddcf995140c544a2f762c76100053d34ff0ae4dbca"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e",
        "created_at": "2024-04-10T08:24:01.661000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "spectacle_20240410_100945.png",
                "content": "bb2aa754ebe8335e20ff0be25ccfb599e88009cb9f27ed31d2e83a0e5c927f1d"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGottfriedHerold\u003e Thanks for the benchmarks. Just to confirm: In those figures, EC scalar muls means to just #number of individual independent muls, right? What is the algorithm used in baseline?",
        "created_at": "2024-04-10T08:27:34.552000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e constant-time with 4-way endomorphism decomposition.\nCompararison with other impl here",
        "created_at": "2024-04-10T08:32:47.355000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_8.jpg",
                "content": "6a5dcd41ea6ea17da8d50fc5feec6c52d18a0515c81c507292d1a8b60741a565"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e the fastest is vartime wNAF with size 3 window + 4-way endomorphism decomposition, but only 15% faster.",
        "created_at": "2024-04-10T08:33:10.026000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e Note that Gnark only decomposes 2-way even on G2 iirc.",
        "created_at": "2024-04-10T08:34:04.754000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e and yes, I timed n individual scalar muls (re @GottfriedHerold: Thanks for the benchmarks. Just to confirm: In those figures, EC scalar muls means to just #number of individual independent muls, right? What is the algorithm used in baseline?)",
        "created_at": "2024-04-10T08:37:11.997000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e For single scalar multiplication over G1 and G2 glv is a lot faster though (re @mratsim: Just did endomorphism benchmarks on G2, for MSMs they don't matter when over \u003e8192 points, so I'm also OK with saying \"don't use endomorphism acceleration. will lay out the various proposal in the github and ethereum magician)",
        "created_at": "2024-04-10T09:31:19.378000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e but you add 1/3 (G1) or 1/5 (G2) due to subgroup check cost. (re @asanso81: For single scalar multiplication over G1 and G2 glv is a lot faster though)",
        "created_at": "2024-04-10T09:31:55.620000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e So how is scalar multiplication gas wise with or subgroup check?",
        "created_at": "2024-04-10T09:32:30.814000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e I think it's an okay tradeoff for security, but well ideally we have a Groth16 BLS12-381 full contract to see the total gas cost.",
        "created_at": "2024-04-10T09:32:58.984000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e I did not understand the question, I think there is one \"scalar multiplication\" that should be something else (re @asanso81: So how is scalar multiplication gas wise with or without scalar multiplication?)",
        "created_at": "2024-04-10T09:34:10.687000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e What I meant how much would it cost 1 singular scalar multiplication over G1/G2 with glv and subgroups vs double-and-add",
        "created_at": "2024-04-10T09:42:46.461000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e Ah, I see, let me create a detailed bench. (re @asanso81: What I meant how much would it cost 1 singular scalar multiplication over G1/G2 with glv and subgroups vs double-and-add)",
        "created_at": "2024-04-10T09:43:36.503000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGottfriedHerold\u003e Well, I guess the fair comparison is wNAF-3/4 for both cases rather than double-and-add.",
        "created_at": "2024-04-10T09:44:30.305000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e gas pricing is double-add but I'll do all (re @GottfriedHerold: Well, I guess the fair comparison is wNAF-3/4 for both cases rather than double-and-add.)",
        "created_at": "2024-04-10T09:47:23.534000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e Still faster, will upload the bench for reproducibility:",
        "created_at": "2024-04-10T10:12:59.814000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_9.jpg",
                "content": "0694ecb6642a47718a537c1e04c0a62476cb793e21161f212463ab7442005746"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e Still faster than double-and-add, but slower than wNAF, will upload the bench for reproducibility:",
        "created_at": "2024-04-10T10:13:42.966000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_9.jpg",
                "content": "0694ecb6642a47718a537c1e04c0a62476cb793e21161f212463ab7442005746"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e what algorithm are u using for doing subgroup check though ?",
        "created_at": "2024-04-10T10:18:51.376000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e",
        "created_at": "2024-04-10T10:25:33.004000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_10.jpg",
                "content": "87e3e841d5623a5bf7f7143444b7f81e0f2931554246c8d148aa91cb2d7e0f64"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e and exponentiation is using addition chain",
        "created_at": "2024-04-10T10:26:52.927000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_11.jpg",
                "content": "fd6312e3187e323e94241dc8a22da0455201f0d6c0e2f3d6a2450a2209a0bc54"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e any chance you can add a column that specifies the gas cost ðŸ™‚ ? (re @mratsim: Still faster than double-and-add, but slower than wNAF, will upload the bench for reproducibility:)",
        "created_at": "2024-04-10T10:27:22.733000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e gas cost is fixed, though, don't you want Mgas/s? (re @asanso81: any chance you can add a column that specifies the gas cost ðŸ™‚ ?)",
        "created_at": "2024-04-10T10:28:04.919000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e i would really be interested about the fixed gas cost for scalar multiplication in G1 and G2 (re @mratsim: gas cost is fixed, though, don't you want Mgas/s?)",
        "created_at": "2024-04-10T10:28:36.320000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e note that there is no EVM serialization/deserialization, this only benches the underlying crypto. Though I assume the serialization (converting to Montgomery and curve arithmetic) is cheap",
        "created_at": "2024-04-10T10:29:00.783000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e ah, I see what you mean, I put double-and-add at 12000 and you want the corresponding cost of eac with a simple ratio (re @asanso81: i would really be interested about the fixed gas cost for scalar multiplication in G1 and G2)",
        "created_at": "2024-04-10T10:30:43.599000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e this would be sweet! (re @mratsim: ah, I see what you mean, I put double-and-add at 12000 and you want the corresponding cost of eac with a simple ratio)",
        "created_at": "2024-04-10T10:31:34.578000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e let me have lunch first :P",
        "created_at": "2024-04-10T10:31:47.140000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e so we have the full picture and could take the best choice",
        "created_at": "2024-04-10T10:31:49.871000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e for sure!! well deserved lunch I would say ðŸ˜„ (re @mratsim: let me have lunch first :P)",
        "created_at": "2024-04-10T10:32:01.320000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cdrortirosh\u003e A question about BLS381 gas usage:\nWe currently have a reference implementation of BLS aggregation based on hubble implementation using existing BN256 precompiles \nCompared to BN256, how much gas should BLS381 take for pairing and signature validation?\n(signature aggregator and copy of the library are here (https://github.com/eth-infinitism/account-abstraction/tree/main/contracts/samples/bls)))",
        "created_at": "2024-04-10T12:39:46.941000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e I just did a spreadsheet because it's annoying to modify the bench to capture time for later comparison.",
        "created_at": "2024-04-10T12:53:27.145000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_12.jpg",
                "content": "ad78279a6c8a2da2b6dea76780e052e2c78c3b4d25eda852605b01a7b589e8c8"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e Here are the original: https://gist.github.com/mratsim/6785a29e72865cfa94e1174fae1e1168",
        "created_at": "2024-04-10T12:55:31.255000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e EC ScalarMul 255-bit G1 (vartime endomorphism + wNAF-5)   is pretty decent",
        "created_at": "2024-04-10T12:57:21.756000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e looks the fastest isn't it ?",
        "created_at": "2024-04-10T12:57:36.046000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e it should be, and wNAF-3 or wNAF-4 for G2 (re @asanso81: looks the fastest isn't it ?)",
        "created_at": "2024-04-10T12:58:16.570000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003casanso81\u003e but the result would be bogus right ?",
        "created_at": "2024-04-10T12:58:24.133000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e repro\n\n```\ngit clone https://github.com/mratsim/constantine\ncd constantine\ngit checkout eip2537\nCC=clang nimble bench_eip2537_subgroup_checks_impact```",
        "created_at": "2024-04-10T12:58:30.034000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e if not in proper subgroup, yes. And it may be that the \"bogus\" part differ depending on lattice (gnark, constantine, MCL, kilic) vs division (BLST) for scalar splitting, and if lattice, which lattice is chosen. (re @asanso81: but the result would be bogus right ?)",
        "created_at": "2024-04-10T12:59:35.896000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cmratsim\u003e And the G2 gas cost looks overpriced.",
        "created_at": "2024-04-10T13:00:18.097000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cCarlBeek\u003e RollCall in 30 mins, zoom link: https://ethereumfoundation.zoom.us/j/82673576599?pwd=5eM5d0bqTKZvCeXIWEAmMc8Hk6zm2k.1 (re @CarlBeek: RollCall tomorrow 04/10 14:00 UTC.\n\nAgenda: https://github.com/ethereum/pm/issues/1013\nLink: Posted in this channel just before the call\n\n\nTopics of especial note:\n\n- Alex Stokes will be hosting a discussion on BLS precompiles in the L1 EVM (https://eips.ethereum.org/EIPS/eip-2537)\n- Toni WahrstÃ¤tter will be hosting a discussion on his \u0026 Vitalik's EIP on increasing L1 Calldata costs now that we have blobs. (https://ethereum-magicians.org/t/eip-7623-increase-calldata-cost/18647))",
        "created_at": "2024-04-10T13:31:28.603000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cCarlBeek\u003e RollCall starting now!",
        "created_at": "2024-04-10T14:00:23.023000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cJose_Tapia\u003e he",
        "created_at": "2024-04-10T17:56:42.802000+00:00",
        "attachments": null
    }
]