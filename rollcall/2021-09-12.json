[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Is Cairo the only zkSTARK compiler?",
        "created_at": "2021-09-12T02:55:23.008000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Has anyone come up with any clever solutions to the L2 data availability problem that don't involve putting the data on L1 and don't require a centralized party and don't require building an entire data availability consensus layer?",
        "created_at": "2021-09-12T04:56:14.675000+00:00",
        "attachments": []
    },
    {
        "author": "albusdompeldorius",
        "category": "general",
        "parent": "",
        "content": "There are always schemes where each user is responsible for the data availability of their own funds, i.e. plasma, but it is harder to make it more general than for simple payments. I feel that at some point people would have to do the hard work to make dapps that work in this paradigm where there is an explicit owner of each asset.",
        "created_at": "2021-09-12T08:29:56.653000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm okay with explicit personal data ownership.  That doesn't work with a traditional merkle trie design though.",
        "created_at": "2021-09-12T08:37:01.913000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You can, perhaps, make individual pieces of data per-user, but you can't make the trie itself per user.",
        "created_at": "2021-09-12T08:37:29.842000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So you still need to make updates to the trie itself publicly available somehow.",
        "created_at": "2021-09-12T08:38:16.736000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "More specifically though, with something like zkRollups, you have the problem of transactions all need to be globally available and agreed upon.  You don't have to actually exocute those transactions, but you still have to replicate them across everyone.",
        "created_at": "2021-09-12T08:39:08.208000+00:00",
        "attachments": []
    },
    {
        "author": "albusdompeldorius",
        "category": "general",
        "parent": "",
        "content": "If you have ownership of your own data, you can always rely on exit challenge games, as in Plasma. It also seems you can remove the need for challenge games if you combine plasma with a zk-snark proof of valid state transitions: https://ethresear.ch/t/plasma-snapp-fully-verified-plasma-chain/3391",
        "created_at": "2021-09-12T08:58:59.251000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It isn't the exit that I worry about, it is the transaction submission itself.",
        "created_at": "2021-09-12T09:01:07.262000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "When 5 users submit a transaction, you need to ensure the body of those 5 transactions are available to everyone or else you can't recreate the L2 state.",
        "created_at": "2021-09-12T09:01:56.122000+00:00",
        "attachments": []
    },
    {
        "author": "albusdompeldorius",
        "category": "general",
        "parent": "",
        "content": "Are you talking in the context of plasma, or fully general L2? In plasma, users don't need to recreate the complete state, they only need the merkle proofs of their own funds.",
        "created_at": "2021-09-12T09:07:20.543000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm specifically interested in zkRollup L2 solutions.",
        "created_at": "2021-09-12T09:08:58.018000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The censorship resistant and permissionless way to build one is to have transactions submitted to L1 for data availability, and then anyone can generate an updated state root and commit it to L1 which would include any L1 exits along the way.",
        "created_at": "2021-09-12T09:10:05.848000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I would like to try to figure out a way to get the transactions off of L1, but without introducing permissions censorability.",
        "created_at": "2021-09-12T09:11:01.818000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This may be an impossible problem without building some kind of L2 gossip network and consensus engine though.",
        "created_at": "2021-09-12T09:11:21.618000+00:00",
        "attachments": []
    },
    {
        "author": "albusdompeldorius",
        "category": "general",
        "parent": "",
        "content": "Right. I'm thinking that if you want to guarantee that the whole state is available to every user, you need to publish the data to L1, preferable with sharding. But if you make a system where each individual user do not *need* to have the whole state, you don't need to publish the whole state to everyone. This is what Plasma does, where each user only need the proof of their own funds. The problem with such schemes, however, is that it is much harder to make them work for something more general than simple payments, which I believe is the reason that people started to prefer rollups as the short-term scaling solution.",
        "created_at": "2021-09-12T09:21:12.636000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "With plasma, don't you still need data availability for the transactions themselves, just not the state?",
        "created_at": "2021-09-12T09:31:00.021000+00:00",
        "attachments": []
    },
    {
        "author": "albusdompeldorius",
        "category": "general",
        "parent": "",
        "content": "No, each user only has the merkle proofs of having recieved their funds. Each user only accepts that they have recieved some funds if they also have the merkle proof of it.",
        "created_at": "2021-09-12T09:34:32.739000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Ah, I see.",
        "created_at": "2021-09-12T09:35:34.315000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yeah, unless that can be generalized I'm not interested in that class of solution.",
        "created_at": "2021-09-12T09:35:43.688000+00:00",
        "attachments": []
    },
    {
        "author": "albusdompeldorius",
        "category": "general",
        "parent": "",
        "content": "AFAIK, it is still an open problem exactly how general that class of solutions can be made, and I feel it could be worthwhile to do more research on this. IMO, rollups are the *easy* way out that are useful in the short-term, because you just publish all transactions on-chain instead of doing the hard work of figuring out how to have more granularity on how much data you need to make available to everyone.",
        "created_at": "2021-09-12T09:46:53.203000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think zkRollups can be pretty powerful, especially with something like signature aggregation on L1.  It certainly doesn't get us *all the way* to infinite scaling though.",
        "created_at": "2021-09-12T09:50:21.578000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Data sharding definitely helps, as that gets us 64x (ish) more space on L1 for transactions.",
        "created_at": "2021-09-12T09:50:53.392000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I wonder if there is anything we can do to further reduce L1 zkRollup transaction submission on layer 1?  Maybe something with inter-transaction warm wallets requiring minimum gas per transaction (\u003c21,000)?",
        "created_at": "2021-09-12T09:52:02.122000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Hmm, actually, if you handle the payments on L2 you can actually do transaction batching on L1 via a relayer.  One relayer could submit many transactions to L1 with a single L1 transaction and signature, so you amortize the transaction submission costs.",
        "created_at": "2021-09-12T09:52:46.319000+00:00",
        "attachments": []
    },
    {
        "author": "albusdompeldorius",
        "category": "general",
        "parent": "",
        "content": "Hmm, isn't that exactly how rollups work? The rollup operator batches many transactions into one L1 transaction?",
        "created_at": "2021-09-12T09:55:34.791000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I want a permissionless L2, not a permissioned one.",
        "created_at": "2021-09-12T09:56:38.917000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "But yeah, you can do basically the same thing with batching relayers instead of operators.",
        "created_at": "2021-09-12T09:57:05.142000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Where anyone can be a relayer, no permission required.",
        "created_at": "2021-09-12T09:57:16.675000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "For some use cases, you can do a generic thing where any relayer can just make a state delta along with a ZKP, and the ZKPs are allowed to be recursive, so if you see a set of valid txs whose combined state delta cancels out then they take up 0 bytes in the final delta going on-chain",
        "created_at": "2021-09-12T09:58:13.758000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I suspect that is a pretty uncommon case (where transactions cancel out).",
        "created_at": "2021-09-12T09:58:47.013000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "right, maybe some DEX stuff",
        "created_at": "2021-09-12T09:59:00.066000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Realistically I think we're very far from needing such crazy optimizations though",
        "created_at": "2021-09-12T09:59:20.248000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Right now Optimism and Arbitrum are still soooo far away from even the basic optimizations that get you down to 16 on-chain bytes per tx",
        "created_at": "2021-09-12T09:59:38.547000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "16 bytes + calldata I assume?",
        "created_at": "2021-09-12T10:00:06.780000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "right",
        "created_at": "2021-09-12T10:00:11.043000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Compressing calldata for anything interesting is hard.",
        "created_at": "2021-09-12T10:00:15.316000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Though even calldata is super-compressible",
        "created_at": "2021-09-12T10:00:15.414000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Oh to the contrary, it's really easy, most interesting things waste huge amounts of bytes on zeroes",
        "created_at": "2021-09-12T10:00:34.214000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "ðŸ˜ƒ",
        "created_at": "2021-09-12T10:00:37.205000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "And then you can use a stateful dictionary to capture much of the rest",
        "created_at": "2021-09-12T10:00:51.918000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "(\"bytes 12...31 are the same as the 15th address referenced in block 87414\")",
        "created_at": "2021-09-12T10:01:08.164000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You still have I believe at least one L1 state update per transaction as well.",
        "created_at": "2021-09-12T10:01:16.118000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So optimistically, 21,000 + 5000 + misc.",
        "created_at": "2021-09-12T10:01:27.661000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "wait why L1 anything per tx?",
        "created_at": "2021-09-12T10:01:34.678000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You can aggregate transactions to amortize that 21,000.",
        "created_at": "2021-09-12T10:01:38.175000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Or do you mean per batch?",
        "created_at": "2021-09-12T10:01:42.912000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Ah, I guess you can amortize that 5000 across transactions as well.",
        "created_at": "2021-09-12T10:01:48.214000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "ðŸ¤”",
        "created_at": "2021-09-12T10:01:49.515000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So the idea here is that with amortization you can get down to compressed-calldata per transaction on L1 (plus some per-block overhead)?",
        "created_at": "2021-09-12T10:02:03.944000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I think we've all been assuming amortization without even thinking about it all along...",
        "created_at": "2021-09-12T10:02:22.606000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Right",
        "created_at": "2021-09-12T10:02:29.296000+00:00",
        "attachments": []
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Compressed calldata, sender, receiver, value",
        "created_at": "2021-09-12T10:02:38.134000+00:00",
        "attachments": []
    }
]