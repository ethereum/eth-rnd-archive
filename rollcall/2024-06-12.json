[
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e Participating in preconfirmation conversations at Zuberlin,\nQuestion to rollups that perform preconfs, afaik Arbitrum and Optimism? \nIs there documentation on those preconfs?\n\nHere in the current L2 meta, preconf is the ability for a centralized sequencer to “promise” a holder that their tx will be included as soon as possible, thus providing subsecond ux feedback instead of ~2 seconds response (== OP block time)",
        "created_at": "2024-06-12T10:51:39.801000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cEdFelten\u003e In Arbitrum, the sequencer publishes a real-time feed which is a public promise of which transactions will be included and in which order.",
        "created_at": "2024-06-12T11:31:45.778000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003chkalodner\u003e It doesn’t provide anything faster than the block time. Blocks themselves are issued as pre confirmations when you see them as opposed to waiting for a batch containing those blocks to be posted to Ethereum which takes minutes to accumulate enough transactions to amortize over fixed costs",
        "created_at": "2024-06-12T11:36:25.743000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cEdFelten\u003e The block time in Arbitrum is typically 250 milliseconds.",
        "created_at": "2024-06-12T11:37:17.061000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cFlorian_Huc\u003e Hi uh",
        "created_at": "2024-06-12T11:44:10.780000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e Ok thanks!",
        "created_at": "2024-06-12T12:13:26.412000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e So there are no actual “preconfs”, and transactions receipts are only emitted once the transactions are mined?",
        "created_at": "2024-06-12T12:15:05.334000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003chkalodner\u003e I haven't been too deeply in the pre-conf conversation, but are L2 blocks issued before they've been included in an L1 block not considered pre-confs? But yeah, there's no ordering commitments made before blocks are produced, it's just that the blocks that are produced are dependent on trusting the sequencer until they've been posted to ethereum",
        "created_at": "2024-06-12T12:49:21.833000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cstonecoldpat\u003e I’m having same debate online lol. \n\nIt feels like “preconf” is a type of signed receipt from the Sequencer which promises a transaction will be included otherwise they get slashed? An accountability gadget. \n\nWould be nice if someone can confirm if this is what people mean by preconf.",
        "created_at": "2024-06-12T12:55:44.046000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cFlorian_Huc\u003e I also feel it is somewhat equivalent functionalities. In one case preconf is done by a single sequencer and backed by the reputation/stake of this sequencer, and on the other case it's backed by the nodes participating in the consensus to build the block.",
        "created_at": "2024-06-12T13:00:15.295000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e I confirm (re @stonecoldpat: I’m having same debate online lol. \n\nIt feels like “preconf” is a type of signed receipt from the Sequencer which promises a transaction will be included otherwise they get slashed? An accountability gadget. \n\nWould be nice if someone can confirm if this is what people mean by preconf.)",
        "created_at": "2024-06-12T13:03:45.228000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e This for instance exists on Starknet currently, blocks are around 5mns so this fast feedback to users is at the tx level (re @stonecoldpat: I’m having same debate online lol. \n\nIt feels like “preconf” is a type of signed receipt from the Sequencer which promises a transaction will be included otherwise they get slashed? An accountability gadget. \n\nWould be nice if someone can confirm if this is what people mean by preconf.)",
        "created_at": "2024-06-12T13:04:15.204000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e I think the main difference is that for Arbitrum, the block time being so short enables preconfs to be grouped at the block level",
        "created_at": "2024-06-12T13:04:39.062000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e And are indistinguishable from soft finality of blocks?",
        "created_at": "2024-06-12T13:04:58.683000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003chkalodner\u003e Yeah there’s certainly different ways you can present the UX around transaction ordering commitments. At the security level it shouldn’t make any difference but at the user level it might be perceived differently or affect node operating costs",
        "created_at": "2024-06-12T13:10:32.091000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e I think the main spirit is around UX and competing with fast blockchains\nWhile safeguarding main values of Ethereum",
        "created_at": "2024-06-12T13:10:57.855000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctyneslol\u003e OP Stack works by having a configurable key sign blocks before gossiping them across a p2p network for preconfs. We call these unsafe blocks and they represent a pinky promise that the same blocks will be published to the DA. The security model is based on reputation. We have thought of some ways to improve that but users have other things they care about more right now. Flashbots told us that preconfs have real economic security so sometimes we call them sequencer-confs (re @eliastzr: Participating in preconfirmation conversations at Zuberlin,\nQuestion to rollups that perform preconfs, afaik Arbitrum and Optimism? \nIs there documentation on those preconfs?\n\nHere in the current L2 meta, preconf is the ability for a centralized sequencer to “promise” a holder that their tx will be included as soon as possible, thus providing subsecond ux feedback instead of ~2 seconds response (== OP block time))",
        "created_at": "2024-06-12T13:13:38.753000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003chkalodner\u003e Absolutely. My point is just that what trust assumptions are being made is the important thing (re @eliastzr: I think the main spirit is around UX and competing with fast blockchains\nWhile safeguarding main values of Ethereum)",
        "created_at": "2024-06-12T13:15:38.298000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e Current systems: centralized preconfs, that are uncollateralized (except by reputation)\n\nGovernance goal: decentralized and collateralised preconfs",
        "created_at": "2024-06-12T13:17:02.128000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e But those block preconfs are bounded by block time (re @tyneslol: OP Stack works by having a configurable key sign blocks before gossiping them across a p2p network for preconfs. We call these unsafe blocks and they represent a pinky promise that the same blocks will be published to the DA. The security model is based on reputation. We have thought of some ways to improve that but users have other things they care about more right now. Flashbots told us that preconfs have real economic security so sometimes we call them sequencer-confs)",
        "created_at": "2024-06-12T13:17:22.891000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e Rollups like Kakarot that rely on state diffs have a direct incentive to lengthen block time and give tx preconfs",
        "created_at": "2024-06-12T13:17:42.993000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e preconfs have more subtleties such as if you only care about being included or the resulting state root derived from your inclusion, which competes with PBS / builders mev\n\nbut it doesn’t matter for our conversation (re @eliastzr: Current systems: centralized preconfs, that are uncollateralized (except by reputation)\n\nGovernance goal: decentralized and collateralised preconfs)",
        "created_at": "2024-06-12T13:20:02.133000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cEdFelten\u003e Many rollups require the sequencer to include all valid transactions, so a mere promise of inclusion (without any promise about ordering) doesn't give any confidence beyond the default--either way, your transaction will be included if the sequencer is honest.",
        "created_at": "2024-06-12T13:36:33.391000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctyneslol\u003e Ah yes, you are right. It's certainly possible to build it on the level of the transaction, which would ~require a first come first serve ordering policy if you want accuracy (re @eliastzr: But those block preconfs are bounded by block time)",
        "created_at": "2024-06-12T13:37:14.513000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cstonecoldpat\u003e I think the base case is simply: “it will be included in the next block*” and sequencer needs to make sure it doesn’t over extend its promise. ie block is full and it can’t be included. \n\nA nonce could be included in the receipt to provide first come first serve guarantees, but it’d rely on users to enforce that by showing two receipts with same nonce. (re @tyneslol: Ah yes, you are right. It's certainly possible to build it on the level of the transaction, which would ~require a first come first serve ordering policy if you want accuracy)",
        "created_at": "2024-06-12T13:38:43.511000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctyneslol\u003e That's true, the preconf doesn't need to commit to the execution but it's def ideal that the preconf does so it's backwards compatible with all of the existing tooling out there that polls for a receipt (re @stonecoldpat: I think the base case is simply: “it will be included in the next block*” and sequencer needs to make sure it doesn’t over extend its promise. ie block is full and it can’t be included. \n\nA nonce could be included in the receipt to provide first come first serve guarantees, but it’d rely on users to enforce that by showing two receipts with same nonce.)",
        "created_at": "2024-06-12T13:42:55.770000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e True, the user is already “entitled” to this treatment, but getting the “rollup centralized formal preconf” enable tooling compatibility (your metamask will ✅ in ~400ms regardless of whether the block time is 10s and the batch posting interval is 1 hour) (re @EdFelten: Many rollups require the sequencer to include all valid transactions, so a mere promise of inclusion (without any promise about ordering) doesn't give any confidence beyond the default--either way, your transaction will be included if the sequencer is honest.)",
        "created_at": "2024-06-12T13:52:52.089000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e Regarding tx-level preconfs, I think it’s not so practical/compatible with tooling today and I’d love for it to become more compatible; to the best of my knowledge, many tools wait for new blocks to be mined to give the OK ✅ to users\n\nThis directly affects the UX on rollups that have longer block time (Kakarot has currently ~14s)",
        "created_at": "2024-06-12T13:54:24.141000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003celiastzr\u003e On Starknet the simple case is to say that a transaction is: pending \u0026 promised for inclusion | mined (successful or reverted) | rejected\n\nwhereas in EVM world there is no concept of “pending” from the tooling’s perspective (re @stonecoldpat: I think the base case is simply: “it will be included in the next block*” and sequencer needs to make sure it doesn’t over extend its promise. ie block is full and it can’t be included. \n\nA nonce could be included in the receipt to provide first come first serve guarantees, but it’d rely on users to enforce that by showing two receipts with same nonce.)",
        "created_at": "2024-06-12T13:56:04.713000+00:00",
        "attachments": []
    }
]