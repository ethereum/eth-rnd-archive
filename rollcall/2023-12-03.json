[
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e One topic I would love this group to discuss properly: *compression*",
        "created_at": "2023-12-03T12:28:33.974000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e One huge part of the roadmap for L2 improvement has always been increasing efficiencies by doing data compression, see:",
        "created_at": "2023-12-03T12:29:09.784000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e",
        "created_at": "2023-12-03T12:29:21.837000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "file_4.jpg",
                "content": "0be3fe4c79cee12413e7ead95d9a256e21f87d046c146219535765ac78f76d68"
            }
        ]
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e But so far, this basically has not happened at all",
        "created_at": "2023-12-03T12:29:35.628000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e My understanding as to why is twofold:\n\n1. There are technical challenges with doing stateful compression, namely that it would require nodes to have a larger internal state, and there's a lot of work in doing this well\n2. Stateless compression is totally possible, but we haven't figured out a good way to *incentivize* compression at the app level. And so even though in reality that infamous \"1400 byte ERC4337 op\" is actually much much smaller on-chain, the sender doesn't benefit from the compression, because they still get charged for the full 1400 bytes. And the fact that you can't save gas in your dapp by compressing means that no one bothers to compress.",
        "created_at": "2023-12-03T12:31:43.150000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e (2) seems fundamentally easier to solve than (1). One simple way to do it is to agree across the ecosystem on a *special-purpose* compression algorithm that's specifically optimized for EVM txs and ERC4337 ops that contain ABI calldata, apply it op-by-op, and charge gas costs based on that.",
        "created_at": "2023-12-03T12:33:01.361000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e Does that seem reasonable/correct to people here?",
        "created_at": "2023-12-03T12:33:07.813000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cjordibaylina\u003e We are activelly working in statefull compression. We are managing numbers of about 6x / 7x.",
        "created_at": "2023-12-03T12:36:28.327000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cjordibaylina\u003e One of the problems that we will have to face is that the TransactionHash includes the signature, which after compression there is no reason to be available. We are thinking in a proposal of an alias for txhash where the signature is not included in the hash.",
        "created_at": "2023-12-03T12:38:56.532000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e for ERC4337 ops we already have that by default, right",
        "created_at": "2023-12-03T12:41:22.797000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cjordibaylina\u003e https://www.youtube.com/live/E4HxKHRbFZ4?si=aHnyZBYHlj6xP7oW",
        "created_at": "2023-12-03T12:42:32.877000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e ooh nice! any chance you can dig up the slides of this for me? (re @jordibaylina: https://www.youtube.com/live/E4HxKHRbFZ4?si=aHnyZBYHlj6xP7oW)",
        "created_at": "2023-12-03T12:53:50.117000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cjordibaylina\u003e @krlosMata Could you share the slides? I think you did another tal in Istambul about data compression.",
        "created_at": "2023-12-03T12:55:08.797000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cjordibaylina\u003e mmm.  Ineresting. UserOpHash includes other fields like entryPoint or paymaster, but probably it can be adapted easilly to normal Txs... (re @vb271828: for ERC4337 ops we already have that by default, right)",
        "created_at": "2023-12-03T13:02:09.985000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e right but entrypoint and paymaster are going to be like 1-4 bits with proper compression",
        "created_at": "2023-12-03T13:10:47.584000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e because most txs will use the same entrypoint, and there would be a very short list of paymasters that almost all txs use",
        "created_at": "2023-12-03T13:11:32.700000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cEdFelten\u003e Our experience with Arbitrum has favored batching transactions, followed by a good general-purpose compression algorithm like brotli.  This gives you most of the benefit of fully stateless compression, without requiring any compression state in the chain's state tree.",
        "created_at": "2023-12-03T16:30:51.425000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cEdFelten\u003e Our previous implementation (before the August 2022 Nitro upgrade) used special-purpose compression within each transaction, but that was much less effective.  In principle one could do special-purpose compression within each tx, followed by batching and general-purpose compression, but our experiments suggest that that wouldn't improve compression by much.",
        "created_at": "2023-12-03T16:32:25.682000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ckrlosMata\u003e Here is the talk about data compression on the evm summit: https://app.streameth.org/devconnect/evm_summit/session/custom_datacompression_in_polygon_zkevm\nIt basically goes deep in the specific data-compression spec with a practical example (re @jordibaylina: @krlosMata Could you share the slides? I think you did another tal in Istambul about data compression.)",
        "created_at": "2023-12-03T16:45:00.538000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003ckrlosMata\u003e sure !\nhere are the slides links:\n- ethCC —\u003e https://docs.google.com/presentation/d/1pZIhlN8rCKYvto6E1HgDWXtd71D0k4uUtlT2MI5nQc0/edit#slide=id.g255e5cb8e5e_0_7\n- evm summit —\u003e https://docs.google.com/presentation/d/1OeB0iV6qEobF6PxzH8vBiH4YdYN3keWEscFMZ_EDtYQ/edit#slide=id.g29a024febfd_0_61 (re @vb271828: ooh nice! any chance you can dig up the slides of this for me?)",
        "created_at": "2023-12-03T16:57:39.955000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003crbayardo\u003e _\"We are thinking in a proposal of an alias for txhash where the signature is not included in the hash.\"_\n\nWould love to see a no-signature-txhash made into a standard proposal, possibly via RIP process. Even for optimistic rollups I envision migration to aggregatable signature scheme for transactions requiring only one signature per batch instead of one per tx. This would nicely reduce L1 data fees. But that breaks ability to recover a txhash as it is currently computed.",
        "created_at": "2023-12-03T22:17:01.128000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003crbayardo\u003e .... even without aggregatable signatures we could drop the signatures from the batch with a zk-proof of ECDSA signature verification (e.g. https://0xparc.org/blog/batch-ecdsa) if it weren't for the txhash concern.",
        "created_at": "2023-12-03T22:20:51.436000+00:00",
        "attachments": null
    }
]