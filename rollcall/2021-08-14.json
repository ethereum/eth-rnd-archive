[
    {
        "author": "liberosist",
        "category": "general",
        "parent": "",
        "content": "When an L1 implements state expiry, they have to build new infrastructure to host expired state (or use existing solutions), develop UX so users can revive etc. They have to be much more conservative as a result. With rollups, you can be more creative and aggressive (especially with zkRs) with state expiry as this infrastructure already exists on L1.",
        "created_at": "2021-08-14T04:01:26.430000+00:00",
        "attachments": []
    },
    {
        "author": "liberosist",
        "category": "general",
        "parent": "",
        "content": "Quoting Vitalik from here: https://ethresear.ch/t/efficient-unassisted-exit-witness-generation-from-rollups/7776 \n\n\u003e A rollup with some state clearing procedure (rent or otherwise) to allow a fixed state size could also require batches to provide on-chain specific accounts (eg. if the state size is D, the k mod D'th account in the state would be published as part of the k'th batch). This ensures that clients looking to withdraw would only need to go back a finite amount of time in history. Alternatively, the state clearing procedure may well explicitly require state objects to be “poked” once every eg. 6 months to remain part of the state; in that case, we get this benefit “for free” already and there’s no need for an extra procedure to deliberately walk through and re-publish accounts from the state.",
        "created_at": "2021-08-14T04:03:02.538000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "Will rollup means ethereum block size in bytes increases from 75 KB to ~1 MB? cause 16 gas per byte calldata",
        "created_at": "2021-08-14T07:04:29.506000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "(if rollups get full blocks)",
        "created_at": "2021-08-14T07:05:17.445000+00:00",
        "attachments": []
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "So if I'm understanding it right: you don't need to care about state recovery as much because since all L2 transactions are posted on L1, you can always rebuild the state there?",
        "created_at": "2021-08-14T17:36:31.771000+00:00",
        "attachments": []
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "I guess it could increase, but why would it go x13 (or was it supposed to be x16?)",
        "created_at": "2021-08-14T17:40:30.761000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "storing in calldata costs 16 gas per byte, current gaslimit is 15 mil",
        "created_at": "2021-08-14T17:43:32.165000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "well ok 30 mil with 50% full on average",
        "created_at": "2021-08-14T17:43:42.422000+00:00",
        "attachments": []
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "there are still gas costs with rollups! base transaction cost is 21k, and writing a new storage slot (32 bytes) is 20k\nmost of the calldate will be transaction data that needs to be written in the state, so the SSTORE cost will dominate",
        "created_at": "2021-08-14T17:54:33.736000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "L1 state?",
        "created_at": "2021-08-14T17:55:19.912000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "why sstore",
        "created_at": "2021-08-14T17:55:26.907000+00:00",
        "attachments": []
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "yep! SSTORE is the opcode to write a slot to the state, which cost 20k when touching 0-ed state",
        "created_at": "2021-08-14T17:56:18.076000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "where does L2 use that",
        "created_at": "2021-08-14T17:56:29.303000+00:00",
        "attachments": []
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "When the rollup submits a batch on L1, to write to the L1 state",
        "created_at": "2021-08-14T17:57:08.931000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "I thought they only write in calldata not state",
        "created_at": "2021-08-14T17:57:41.506000+00:00",
        "attachments": []
    },
    {
        "author": "norswap",
        "category": "general",
        "parent": "",
        "content": "My understanding is that they write the transactions to the state. I'm not 100% positive why that's required though (because you could merkleize the transaction in a batch and only post the merkle root, then require Merkle proofs when doing a fraud proof)",
        "created_at": "2021-08-14T17:59:50.212000+00:00",
        "attachments": []
    },
    {
        "author": "liberosist",
        "category": "general",
        "parent": "",
        "content": "I wouldn't say it's not caring; rather you have more options and flexibility for designing state expiry solutions for rollups. It'll be interesting to see how rollup developers innovate with state size management over the coming years.",
        "created_at": "2021-08-14T19:05:40.285000+00:00",
        "attachments": []
    },
    {
        "author": "liberosist",
        "category": "general",
        "parent": "",
        "content": "I believe this is correct, if a target 15M block was calldata and nothing else it'd be ~915 kB",
        "created_at": "2021-08-14T19:09:42.908000+00:00",
        "attachments": []
    },
    {
        "author": "ghosts_in_the_code",
        "category": "general",
        "parent": "",
        "content": "So higher bandwidth consumption?",
        "created_at": "2021-08-14T19:26:49.738000+00:00",
        "attachments": []
    }
]