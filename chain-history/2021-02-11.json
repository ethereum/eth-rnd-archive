[
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Removing even 0-balance accounts with non-zero nonce is contentious, since it opens for replay attacks",
        "created_at": "2021-02-11T15:51:03.432000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We don't have any clean up of dust accounts, at all. Only if they were touched but not actually ever used",
        "created_at": "2021-02-11T15:52:30.314000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The number of dustish zerononce accounts are probably \u003c\u003c dustish nonzerononce accounts",
        "created_at": "2021-02-11T15:53:17.384000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And wiping the former might be pretty low gain",
        "created_at": "2021-02-11T15:53:58.969000+00:00",
        "attachments": []
    },
    {
        "author": "holiman",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But both could be removed, but it's t would require changing how tx nonces work",
        "created_at": "2021-02-11T15:55:42.379000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That comment was meant to illustrate the fact that there is no obvious number greater than 0 where we definitely should burn dust.  It is just a spectrum between 0 and total supply, and such spectrum decisions are hard.",
        "created_at": "2021-02-11T16:21:32.140000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We could say that nonces must have some high bits set to indicate the epoch they were created in (epoch durations of like a year, first epoch was 0 and lasts until this system starts).",
        "created_at": "2021-02-11T16:23:18.478000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Any account with a nonce that is `\u003c current_epoch - 1` can be deleted.",
        "created_at": "2021-02-11T16:23:35.096000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And transactions cannot be included if they have a nonce `\u003c current_epoch - 1`.",
        "created_at": "2021-02-11T16:23:52.334000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Tools would *all* need to be updated to set the nonce to `eth_getEpoch() + eth_getEpochTransactionCount()`.",
        "created_at": "2021-02-11T16:24:55.952000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Certainly not a perfectly painless strategy, but one that perhaps could allow us to *eventually* clean up accounts.",
        "created_at": "2021-02-11T16:25:15.472000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "It would, of course, break anyone who has a signed transaction from long ago with burnt keys.",
        "created_at": "2021-02-11T16:25:36.658000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "that feels like a pretty significant breakage, and is useful to remember why we need to continue to support legacy tx formats for the foreseeable future.  Maybe any nonce changes like this need to be coupled with a `TransactionType` bump and would only affect those new types?  Which of course complicates the ability to use this to cleanup dust...",
        "created_at": "2021-02-11T18:31:38.047000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I don't think supporting the legacy transaction format would be hard (add a transaction type with an `epoch` field, and assume all legacy transactions have an epoch of zero.) That would still effectively render legacy transactions invalid once the epoch increments though.",
        "created_at": "2021-02-11T18:40:40.303000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "How big of a problem are dust accounts? There was mention of a graph?",
        "created_at": "2021-02-11T18:41:06.511000+00:00",
        "attachments": []
    },
    {
        "author": "ryanleeschneider",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e That would still effectively render legacy transactions invalid once the epoch increments though.\nYa I think that's the main issue, how many users are operating under the assumption that they can sign a tx now and not broadcast it until perhaps years later but expect it to be valid and propagated.",
        "created_at": "2021-02-11T18:46:08.717000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Probably some nonzero number, but how many would still care given `N` years notice that their currently signed transactions would become invalid?",
        "created_at": "2021-02-11T18:47:40.895000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am reasonably sure that any solution for mitigating state growth which actually removes state from the state trie (the state root changes before/after removal) isn't going to be viable.  Zeroing accounts with non-zero nonces introduces insanity around re-broadcasting historical transactions sent by that account.  Erasing contracts or their storage introduces exploitable security issues.  Mechanisms that allow erasing and reviving have the same problems.",
        "created_at": "2021-02-11T18:48:47.914000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Having a nonce epoch would not allow rebroadcasting historical transactions, but instead would invalidate any signed but unsent transactions that exist today.",
        "created_at": "2021-02-11T18:50:11.826000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, it is definitely solveable, but probable that solving it is going to be complex.",
        "created_at": "2021-02-11T18:50:50.248000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah, for sure.",
        "created_at": "2021-02-11T18:51:06.858000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The solution space that I think is really worth exploring is a mechanism that explicitely tracks when state was last \"warmed\" and a rule that says interacting with state that is sufficiently cold *requires* that it be warmed back up, meaning that the transaction includes a proof against the cold part of the state.  I haven't dug deep into this but i the nice properties:\n\n- Effectively implements state rent because it requires state be *warmed* up periodically, which will cost gas.\n- Side-steps the security issues that come from zero-ing accounts or storage since the EVM would not allow interaction with cold state unless a proof has been provided to warm it up.\n- Explicitly allows clients to safely discard cold state since it cannot be touched by EVM execution without an accompanying proof.\n\nThis is also a nice direction because it takes us in the direction of stateless with a version of transaction level witnesses.",
        "created_at": "2021-02-11T18:54:54.861000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This post by Vitalik is relevant: https://ethresear.ch/t/alternative-bounded-state-friendly-address-scheme/8602/12",
        "created_at": "2021-02-11T18:55:35.860000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is that different from regenesis?",
        "created_at": "2021-02-11T18:55:43.222000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, it doesn't have an actual regenesis event, but instead has a rolling deletion of the stuff that is cold beyond a certain threshold **and** it doesn't reset the geneses of the chain.",
        "created_at": "2021-02-11T18:56:35.612000+00:00",
        "attachments": []
    },
    {
        "author": "samwilsn",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah! Interesting.",
        "created_at": "2021-02-11T18:56:48.221000+00:00",
        "attachments": []
    }
]