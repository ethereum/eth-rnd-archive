[
    {
        "author": "leonardoalt",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "ah ok yes, I see now",
        "created_at": "2022-01-19T11:59:32.496000+00:00",
        "attachments": null
    },
    {
        "author": "leonardoalt",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "how about actual loops that are internally generated, like abi decoding? What does the new heuristic do?",
        "created_at": "2022-01-19T11:59:53.846000+00:00",
        "attachments": null
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "I'm testing it out. In this example:\n\n```\ncontract LoopInput {\n    uint x = 0;\n\n    function addLoop(uint256[] memory intArr) public {\n        uint256 tmpSum = 0;\n        uint256 i      = 0;\n        for (i = 0; i \u003c intArr.length; i++) {\n            tmpSum += intArr[i];\n        }\n        x = tmpSum;\n    }\n}\n```\n\nIt seems to correctly detect the loop, but loses too much information during loop abstraction and has messy control-flow afterward.",
        "created_at": "2022-01-19T13:46:30.695000+00:00",
        "attachments": null
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "It also takes several iterations of the loop to abstract it properly. Not sure if the loop is from the actual for loop I write or from abi decoding.",
        "created_at": "2022-01-19T13:46:55.657000+00:00",
        "attachments": null
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Haven't looked closely enough.",
        "created_at": "2022-01-19T13:47:02.797000+00:00",
        "attachments": null
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So it detects a loop (purple node), and looks like it's beginning to detect some loops later (blue nodes with self-edges).",
        "created_at": "2022-01-19T13:48:08.959000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_from_2022-01-19_06-47-24.png",
                "content": "c032f408b58aef1a6cc5110fc7a165e0a6879cdfb80571c032354a39a9b328d0"
            }
        ]
    },
    {
        "author": "leonardoalt",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "but there should be two actual loops",
        "created_at": "2022-01-19T15:20:59.811000+00:00",
        "attachments": null
    },
    {
        "author": "leonardoalt",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "yours and the decoding one",
        "created_at": "2022-01-19T15:21:04.296000+00:00",
        "attachments": null
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Yeah, I think so.",
        "created_at": "2022-01-19T15:21:13.641000+00:00",
        "attachments": null
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Just need to wait, it's very slow.",
        "created_at": "2022-01-19T15:21:17.654000+00:00",
        "attachments": null
    },
    {
        "author": "leonardoalt",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "btw POPL22 is live with streams:\nhttps://popl22.sigplan.org/program/program-POPL-2022/?date=Wed%2019%20Jan%202022\u0026past=Show%20upcoming%20events%20only",
        "created_at": "2022-01-19T16:04:54.193000+00:00",
        "attachments": null
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "Well gosh darn, it worked! It shows the second loop (the actual for-loop I wrote) 3 times because it took two iterations of the first loop (the abi decoding) to find out that it was indeed a loop. So the first copy of the last loop is \"if there were no iterations of the first loop\", the second one is \"if there was one iteration of the first loop\", and the last one is \"if there were N\u003e1 iterations of the first loop\".",
        "created_at": "2022-01-19T23:47:19.080000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "Screenshot_from_2022-01-19_16-45-02.png",
                "content": "750eeeb7ee3bd77c70fe30b1bc6838673acbe09658285acad7b8649c6858e935"
            }
        ]
    },
    {
        "author": "ehildenb",
        "category": "Consensus R\u0026D",
        "parent": "",
        "content": "So that's all redundant work, but I'm pretty stoked this one worked! Did not expect that.",
        "created_at": "2022-01-19T23:47:30.197000+00:00",
        "attachments": null
    }
]