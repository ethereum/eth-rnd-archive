[
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Hello everyone! Pyrmont is live, and working through insane load of 100.000 validators. Things are going well, but not entirely without problems due to the sheer amount of CPU load on the beacon nodes.",
        "created_at": "2020-11-18T14:51:44.105000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Explorer: https://pyrmont.beaconcha.in/\nEth2stats: https://pyrmont.eth2.wtf/#/\nTestnet config:  https://github.com/protolambda/pyrmont",
        "created_at": "2020-11-18T14:52:27.736000+00:00",
        "attachments": null
    },
    {
        "author": "ryg9705",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Considering that some expect that the max amount of ETH staked will probably never exceed 10M which translates to around 5% APR wouldn‚Äôt it make sense to also test with 312500 validators in the future?",
        "created_at": "2020-11-18T17:43:48.451000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We can tune it down later. Seeing phase0 perform at 100k is a good stress test. And then 16k-32k should be super stable",
        "created_at": "2020-11-18T17:47:09.755000+00:00",
        "attachments": null
    },
    {
        "author": "ryg9705",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I‚Äòm saying that we should test even higher loads.",
        "created_at": "2020-11-18T17:47:55.778000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh I misread that. That's 20 times the genesis size, not a light number! We could try, but at that point we are taking up a lot of client dev resources and time, which they could spend on mainnet",
        "created_at": "2020-11-18T17:54:27.585000+00:00",
        "attachments": null
    },
    {
        "author": "ryg9705",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Definitely, but we should be aware of how far it can scale.",
        "created_at": "2020-11-18T17:55:47.791000+00:00",
        "attachments": null
    },
    {
        "author": "ryg9705",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Even if thats a long term validator target.",
        "created_at": "2020-11-18T17:56:34.059000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think a 6x buffer compared to minimum genesis with the 100k validators is sufficient for now. Scaling it up even further is interesting, but ahead of reality. Min. genesis has not been reached yet, and I expect clients to scale their performance to support above the 100k number during phase0.",
        "created_at": "2020-11-18T17:58:13.936000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!203220829473996800\u003e what's your take on the lack of majority, we've been monitoring and it seems to be getting even worse in three main hashes being voted as ETH1 data. Raul from prysm said there were some issues on their eth1 nodes, and also Teku's, is that it?",
        "created_at": "2020-11-18T19:40:59.596000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The first voting period had two major contenders and then a bunch of random hashes (I suppose nodes without a running eth1 node) but the second period now has three clearly distinct hashes.",
        "created_at": "2020-11-18T19:42:58.965000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!755590043632140352\u003e Answered your question here: https://www.reddit.com/r/ethstaker/comments/jwkgqb/why_dont_we_have_majority_on_pyrmont/",
        "created_at": "2020-11-18T19:48:57.176000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There's just a lot to running 100k validators. Let's give it some time, Teku may do fine in the long run",
        "created_at": "2020-11-18T19:50:23.820000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We just undersized the AWS instances for our Tekus - bit optimistic. No Biggie ü§∑‚Äç‚ôÇÔ∏è Everything running smoothly now.",
        "created_at": "2020-11-18T19:53:59.602000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!203220829473996800\u003e Thanks!  my only concern was the eth1 vote. It seems that the faulty nodes were fixed cause now I don't see random votes, but the current vote goes 106/73/63. Hopefully it'll achieve majority eventually",
        "created_at": "2020-11-18T20:01:21.199000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But it looks like clearly three clusters",
        "created_at": "2020-11-18T20:01:34.525000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Interesting, which tool are you using? I can write something new too, curious about those vote clusters",
        "created_at": "2020-11-18T20:02:49.019000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This was just quickly cooked by an discord user at prysm, it simply takes the blocks from the node by API calls https://github.com/dv8silencer/eth1voting",
        "created_at": "2020-11-18T20:03:50.600000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I can run `chaind` to check this if you want, but I do trust that script",
        "created_at": "2020-11-18T20:04:22.644000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There's an easier way to get eth1 votes",
        "created_at": "2020-11-18T20:06:06.878000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You can load a full beacon state, and look at the eth1_votes array in it. That contains the latest voting period worth of votes",
        "created_at": "2020-11-18T20:06:38.072000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Anyway, both methods work, and we could compare to double check.",
        "created_at": "2020-11-18T20:07:19.028000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right, I could cook that one too, will bring my three year old for a walk (or we won't sleep tonight) and I'll do that as soon as I get back",
        "created_at": "2020-11-18T20:09:22.273000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "No hurry, thanks for going through Pyrmont dev things, we need more users like you",
        "created_at": "2020-11-18T20:10:41.836000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Btw, I did a basic analysis of this on Medalla, https://github.com/ethereum/eth2.0-specs/issues/2018 Seems like it is still relevant. Imo the only really robust thing to do is to incentivise correct Eth1 data votes, or award a big bonus for processing a deposit (which implies getting Eth1 data voting correct). Relying solely on an honest (or competent) majority is misguided imo.",
        "created_at": "2020-11-18T20:16:19.731000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Preston Van Loon has a proposal to follow the most voted valid block",
        "created_at": "2020-11-18T20:17:31.067000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Which would quickly gather majority",
        "created_at": "2020-11-18T20:17:50.844000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Still relies on honest behaviour (rather than economically rational). It would be easy and costless for a cabal of validators to stop Eth1 processing to prevent onboarding new validators that dilute rewards. I think we should give 1 Eth reward for every deposit correctly processed. Solves everything.",
        "created_at": "2020-11-18T20:22:54.994000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I believe that the situation currently is that all nodes are behaving honestly but their view of the world does not lead to majority",
        "created_at": "2020-11-18T21:04:11.714000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "which points to a bug in the implementation if that's the case",
        "created_at": "2020-11-18T21:04:35.403000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "because the algorithm is very simple and deterministic",
        "created_at": "2020-11-18T21:04:41.943000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(deterministic unless there are 2000 block forks on goerli which is not the case)",
        "created_at": "2020-11-18T21:06:39.282000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yeah I wander if they are picking the same block or not, I saw there are pulls with different values for `SECONDS_PER_ETH1_BLOCK` for example on mainnet (different than the ones in the spec and used in goerli). I wander if something along those lines would affect here",
        "created_at": "2020-11-18T21:07:51.718000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e No hurry, thanks for going through Pyrmont dev things, we need more users like you\n\u003c@!203220829473996800\u003eThanks for the words, I'm just deciding if I'll participate... will  double check the votes now",
        "created_at": "2020-11-18T21:08:23.949000+00:00",
        "attachments": null
    },
    {
        "author": "benjaminion",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003e which points to a bug in the implementation if that's the case\nExactly. Gotta incentive us devs to get it right, else we won't bother üòÇ",
        "created_at": "2020-11-18T21:39:28.345000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There are issues filed now in prysm and Nimbus is voting on a 5 days old block...",
        "created_at": "2020-11-18T22:17:18.136000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The genesis delay was 5 days. Maybe it is some simple misconfiguration. We are looking into it",
        "created_at": "2020-11-18T22:17:57.575000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And I  am still trying to catch up learning how to read an ssz ü§¶‚Äç‚ôÇÔ∏è",
        "created_at": "2020-11-18T22:19:17.962000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Haa. can I help? üòÖ",
        "created_at": "2020-11-18T22:19:36.919000+00:00",
        "attachments": null
    },
    {
        "author": "fabdarice",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Prysm and Teku/Nimbus only have a 130 block gap.",
        "created_at": "2020-11-18T22:19:44.356000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "You're using python to read ssz \u003c@!755590043632140352\u003e ? Or Go/other? You can DM me",
        "created_at": "2020-11-18T22:20:35.264000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Yes, I think it's misconfiguration on Prysm. Their eth1 block time param is different, Preston highlighted it already in the issue",
        "created_at": "2020-11-18T22:21:32.501000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Thanks for the offer, I was just trying a toy example to use your zcli after a curl from my node. But I won't take your time, I can read up first",
        "created_at": "2020-11-18T22:21:36.565000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That was my comment here: \nhttps://discord.com/channels/595666850260713488/778633028451696680/778728203221073925",
        "created_at": "2020-11-18T22:22:06.699000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I wasn't so off in my suspicions",
        "created_at": "2020-11-18T22:22:15.040000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh, decoding a beacon struct from JSON? It's just like the standard Go `json.Unmarshal(\u0026dest)`",
        "created_at": "2020-11-18T22:22:48.369000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!755590043632140352\u003e I missed that comment, good find!",
        "created_at": "2020-11-18T22:23:16.757000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Now that I think of it, I need to update ZRNT with v1 configuration still. The eth1 parameter changed, so you might be hitting a problem there",
        "created_at": "2020-11-18T22:25:35.942000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "If you are using ZCLI, there's a `--spec=path/to/pyrmont_config.yml` flag you can use to get it working correctly",
        "created_at": "2020-11-18T22:32:00.738000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The API doesn't return SSZ on curl commands, but JSON. So you may have to do some work to read those things. There's a `eth2spec` python package too if you are after quick scripting.",
        "created_at": "2020-11-18T22:33:21.049000+00:00",
        "attachments": null
    }
]