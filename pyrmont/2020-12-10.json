[
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Arghh I was about to post that I don't see any prysm blocks",
        "created_at": "2020-12-10T12:39:25.976000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Are pryslabs nodes also down \u003c@!476250636548308992\u003e or you guys are not posting any graffiti now?",
        "created_at": "2020-12-10T12:40:26.622000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "This is the breakdown by client that I can identify since yesterday, no prysm nodes unfortunately",
        "created_at": "2020-12-10T12:48:49.778000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "nim.jpg",
                "content": "47468cd65906f5a884887520569a5b466730832b22d0a1ee4304f6306310f169"
            }
        ]
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "On slot zero Nimbus either performs better than the rest or much worse",
        "created_at": "2020-12-10T12:49:13.225000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "There's essentially a gap from 2 seconds to 4",
        "created_at": "2020-12-10T12:49:32.143000+00:00",
        "attachments": null
    },
    {
        "author": "nishant0",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hey will check now",
        "created_at": "2020-12-10T12:49:45.512000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Lighthouse and Teku are doing well, there's the 2 second delay but both are at least submitting before 4s",
        "created_at": "2020-12-10T12:50:17.844000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "(An aside, but blocks that come up right against the 4s limit are probably most problematic, because they're the ones most likely to split the subsequent vote in that slot.  Way before 4s and everyone hears about the new block, after 4s and no-one hears about the new block.)",
        "created_at": "2020-12-10T13:26:01.252000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I wander what Nimbus does to get that gap in slot 0. There are plenty of points to believe there is such a gap indeed",
        "created_at": "2020-12-10T13:31:26.683000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "And I would really like to know if Lighthouse 1 second minimum is Network topology or their performance, if someone else does the same measurement on a lighthouse node and finds something different it will be concerning",
        "created_at": "2020-12-10T13:33:54.157000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We are drawing. Anything that draws on the graffiti wall is us",
        "created_at": "2020-12-10T14:59:44.674000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Oh there's no way we can be sure of that",
        "created_at": "2020-12-10T15:00:19.750000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But let me update on that basis",
        "created_at": "2020-12-10T15:00:29.379000+00:00",
        "attachments": null
    },
    {
        "author": "terence0083",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "We have 20% of the validators, it's good enough for sampling",
        "created_at": "2020-12-10T15:01:05.722000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "",
        "created_at": "2020-12-10T15:05:24.851000+00:00",
        "attachments": [
            {
                "type": "",
                "origin_name": "prys2.jpg",
                "content": "591aef33968f57056b118c8cb472a3e9bfb475e1025ec8413c0b3a761370d742"
            }
        ]
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "That's the client breakdown then",
        "created_at": "2020-12-10T15:05:35.690000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Prysm is badly performing on the first slot",
        "created_at": "2020-12-10T15:05:48.860000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "almost all blocks are being lost",
        "created_at": "2020-12-10T15:06:00.382000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "and it's poorly performing on all slots compared to Teku. So by this measure we have \"Teku \u003e Prysm = Nimbus \u003e Lighthouse\"  on slots \u003e2 mod (32)",
        "created_at": "2020-12-10T15:06:56.658000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "it's interesting that lighthouse and prysm are reverted on slot 0",
        "created_at": "2020-12-10T15:07:12.605000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "this may shed some light in the issue, if we compare the methods of precomputing",
        "created_at": "2020-12-10T15:07:32.991000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'll continue gathering data, but it's kind of clear from the clustering pattern that this is already the picture",
        "created_at": "2020-12-10T15:16:06.018000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "1) Lighthouse has a problem submitting blocks, a minimum delay of 1 second is not good (I'd like independent confirmation of this)\n2) All nodes have a problem in slot 0, but prysm has a particular one: none of it's blocks can be voted.\n3) Nimbus has a strange gap on this slot and is the only node with lots of really delayed blocks.\n4) Teku outperforms all clients by orders of magnitude in deploying a block",
        "created_at": "2020-12-10T15:19:19.567000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "\u003c@!340345049063882753\u003e What's also clear is that your commit has an impact in slots \u003e 1, it's been consistently better than \u003c@!203220829473996800\u003e's",
        "created_at": "2020-12-10T15:20:11.415000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Although I do not have many points by proto to infer this yet",
        "created_at": "2020-12-10T15:20:26.078000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "hopefully it'll be confirmed in a couple of days.",
        "created_at": "2020-12-10T15:20:37.459000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I wonder how much network latency plays a role here. The nodes of each team are generally in different regions.\nLighthouse likely in Sydney, Teku in US-east, since EF change we host ours in Mumbai, Nimbus is likely EU, Prysm likely in US too. Where is your monitoring node \u003c@!755590043632140352\u003e ?",
        "created_at": "2020-12-10T15:47:26.764000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'm in Rio de janeiro, this is a concern I mentioned, however, if anything, the percentage of bad votes on the first slots is a network invariant, and it's consistent with this data",
        "created_at": "2020-12-10T15:48:51.382000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Right, the start of the epoch is definitely worth looking into",
        "created_at": "2020-12-10T15:49:15.284000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "But that as a whole, i cannot say anything about clients",
        "created_at": "2020-12-10T15:49:16.010000+00:00",
        "attachments": null
    },
    {
        "author": "protolambda",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "just wonder why lighthouse is so consistently offset, while they perform otherwise very well",
        "created_at": "2020-12-10T15:49:31.356000+00:00",
        "attachments": null
    },
    {
        "author": "djrtwo",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The consistency is the suspicious part",
        "created_at": "2020-12-10T15:49:51.878000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Exactly",
        "created_at": "2020-12-10T15:50:02.912000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I'd suspect they are just delaying the proposal",
        "created_at": "2020-12-10T15:50:43.171000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I think I can deploy a lighthouse node in RIMS (Kyoto) and monitor closer, I'll see if I gather time next week if noone with a lighthouse node does it before",
        "created_at": "2020-12-10T15:53:42.176000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Ah right that's a way of correlating: we can grab the votes of slot+1 since inclusion distance is perfect in pyrmont. And try to see if there's statistical difference among blocks proposed by client. This will be independent of my node at least. But this will take processing power I'm not sure I want to do this on the same computer I run my lonely validator :)",
        "created_at": "2020-12-10T16:01:51.483000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I've discovered a couple of places I can significantly improve Teku's block import performance which should help us attest correctly more often in the first slot - won't reduce block proposal times though.  But I also haven't gotten to precomputing the epoch transition and duties yet.",
        "created_at": "2020-12-10T19:57:03.679000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am currently gathering vote distribution vs block proposed under some mild assumptions in pyrmont. I am seeing some interesting facts. Should have some relevant data in just a few hours. I could do this immediately with previous blocks, but since I'm streaming anyway I decided to add this to the other script.",
        "created_at": "2020-12-10T20:00:04.791000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Is there a good measure on the amount of reorgs that currently we have in pyrmont?",
        "created_at": "2020-12-10T20:15:10.531000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "I am assuming it's almost never forked, but I am seeing many blocks with all votes wrong",
        "created_at": "2020-12-10T20:15:44.855000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "One thing to note (related to \u003c@!144468805697929216\u003e 's comment from somewhere back up in the history) is that a block doesn't have to receive any votes to become the chain head - votes are only used to select between two forks so if there's only one block that descends from your current chain head it is automatically your new chain head.\n\nNet result is that if there aren't competing forks, and you get a block between when you attest and when the next block is created, it will become your chain head even though you voted to say that the slot was empty. So it's blocks that arrive after 4 seconds that are the worst - everyone gets the vote wrong.",
        "created_at": "2020-12-10T20:22:04.383000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "Interestingly, this means there's actually some incentive for a node to ignore a block it receives after creating attestations if it can see that the majority of other validators also voted for an empty slot.  It could deliberately orphan the late block and thus be rewarded for voting correctly.",
        "created_at": "2020-12-10T20:23:14.101000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "What I can't explain is why am I seeing so many wrong votes for target even in late slots in the epoch.",
        "created_at": "2020-12-10T21:28:57.718000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "my guess is that some nodes completely ignored or didn't even get the first block, and continue voting for the previous epoch",
        "created_at": "2020-12-10T21:29:43.371000+00:00",
        "attachments": null
    },
    {
        "author": "sproul",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "The Lighthouse nodes are geographically distributed, so it's unlikely to be a latency thing. We're seeing 500ms for block production in Lighthouse's metrics and will investigate today",
        "created_at": "2020-12-10T22:35:35.628000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "Channel Graveyard",
        "parent": "",
        "content": "To be fair there's one systemic bias in this data and it's that I'm taking the timestamp after prysm syncs the block. I could patch my node to get the arrival timestamp but given the scale of the results I figured this was very minor",
        "created_at": "2020-12-10T22:50:58.173000+00:00",
        "attachments": null
    }
]