[
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e What's the game plan for cracking up trie / state size in the perfnets?",
        "created_at": "2025-05-01T00:18:49.267000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e re: **@gakonst**\n\u003e What's the game plan for cracking up trie / state size in the perfnets?\n@KamilChNethermind what if you guys did a Genesis file with a 0x, 1x, 2x, 5x, 10x state size of mainnet and tested with it? Given I/O matters a lot.",
        "created_at": "2025-05-01T00:19:56.385000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e re: **@gakonst**\n\u003e @KamilChNethermind what if you guys did a Genesis file with a 0x, 1x, 2x, 5x, 10x state size of mainnet and tested with it? Given I/O matters a lot.\nGenesis file is hard. Format is not friendly when big. Mainnet is 30% accs 70% storage. So it is important we balance it too. I think you need a new format to import big state tho",
        "created_at": "2025-05-01T00:21:31.447000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003csophiagold0\u003e I think there was concern some clients canâ€™t handle configs that large so theyâ€™re trying to use a single node to generate a chain we can shadow fork from",
        "created_at": "2025-05-01T00:21:51.530000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e re: **@FunnyGiulio**\n\u003e Genesis file is hard. Format is not friendly when big. Mainnet is 30% accs 70% storage. So it is important we balance it too. I think you need a new format to import big state tho\nGotcha. That seems like a simple thing to do given importance. Agree on the 30-70 split.",
        "created_at": "2025-05-01T00:22:16.957000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e re: **@sophiagold0**\n\u003e I think there was concern some clients canâ€™t handle configs that large so theyâ€™re trying to use a single node to generate a chain we can shadow fork from\nEngineering problem. Just make an iterable format or directly inject",
        "created_at": "2025-05-01T00:22:21.432000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e I think a better format is needed in case of a mainnet outage too anyway",
        "created_at": "2025-05-01T00:23:00.214000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e Yeah id just snapshot a real db and provision from that, or do a binary thing. Don't worry about standardizing",
        "created_at": "2025-05-01T00:23:07.403000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e Well all clients store data differently afaik. i think it is good if we can get data from at least one tho",
        "created_at": "2025-05-01T00:24:07.502000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cnotnotstorm_p\u003e re: **@gakonst**\n\u003e Yeah id just snapshot a real db and provision from that, or do a binary thing. Don't worry about standardizing\nwant some minimal standardization so that all 5 EL clients can use the same file",
        "created_at": "2025-05-01T00:24:08.984000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e re: **@notnotstorm_p**\n\u003e want some minimal standardization so that all 5 EL clients can use the same file\nDont think that matters, do 5 files",
        "created_at": "2025-05-01T00:24:23.270000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e Just ship a realistic bench first and we can make running the bench easier after it's validated",
        "created_at": "2025-05-01T00:24:46.017000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e The existing work is really great to be clear",
        "created_at": "2025-05-01T00:24:59.698000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cnotnotstorm_p\u003e re: **@gakonst**\n\u003e Dont think that matters, do 5 files\nsure do whatever is path of least resistance. but if this is new functionality that each client has to implement then might as well make them consume the same format\n\nOTOH if it's just snapshotting the underlying db files of each client, then no new functionality needed. but then the initial generation of the state might become more difficult",
        "created_at": "2025-05-01T00:28:03.358000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e re: **@notnotstorm_p**\n\u003e sure do whatever is path of least resistance. but if this is new functionality that each client has to implement then might as well make them consume the same format\n\nOTOH if it's just snapshotting the underlying db files of each client, then no new functionality needed. but then the initial generation of the state might become more difficult\nYeah this is what I am also thinking",
        "created_at": "2025-05-01T00:28:46.989000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e You can do one client only this way.",
        "created_at": "2025-05-01T00:29:19.162000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cnotnotstorm_p\u003e maybe easiest is just 1) generating a big long list of txs 2) feeding these txs to one client and then 3) that client can feed the long tx history to the 4 other clients via already existing p2p",
        "created_at": "2025-05-01T00:31:18.430000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e re: **@notnotstorm_p**\n\u003e maybe easiest is just 1) generating a big long list of txs 2) feeding these txs to one client and then 3) that client can feed the long tx history to the 4 other clients via already existing p2p\nNah just make rlp_len+(metadata_byte)+rlp_account+storage_slots_count+acc_storage",
        "created_at": "2025-05-01T00:32:31.041000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e A bit hard to look at",
        "created_at": "2025-05-01T00:32:39.659000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e Each kv pair for storage can be 64 bytes long so no need to specify length",
        "created_at": "2025-05-01T00:33:22.804000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cnotnotstorm_p\u003e re: **@FunnyGiulio**\n\u003e Nah just make rlp_len+(metadata_byte)+rlp_account+storage_slots_count+acc_storage\nwill it be difficult to get all 5 clients to behave properly if youre starting from this smaller subset of data (e.g. no txs) that gets inserted in an abnormal way? things like data integrity checks maybe get screwed up",
        "created_at": "2025-05-01T00:35:38.927000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e re: **@notnotstorm_p**\n\u003e will it be difficult to get all 5 clients to behave properly if youre starting from this smaller subset of data (e.g. no txs) that gets inserted in an abnormal way? things like data integrity checks maybe get screwed up\nYou need an initial state",
        "created_at": "2025-05-01T00:53:31.233000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cFunnyGiulio\u003e Maybe not so hard to just create blocks from genesis and import huge giant chain",
        "created_at": "2025-05-01T00:54:05.112000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cben_a_adams\u003e Is size the problem or structure (deep tries); can create worst case structure to test without it needing to be terrabytes; and if just go for raw size might not cover the problem areas (change amplification on roots etc)",
        "created_at": "2025-05-01T03:14:46.204000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e re: **@ben_a_adams**\n\u003e Is size the problem or structure (deep tries); can create worst case structure to test without it needing to be terrabytes; and if just go for raw size might not cover the problem areas (change amplification on roots etc)\nDeep trie causes IO amplification, which hurts read perf (bc random io) and increases mem required for batch writes when persisting the trie. Size itself not really an issue.",
        "created_at": "2025-05-01T03:53:41.285000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e More impt the read perf",
        "created_at": "2025-05-01T03:54:00.737000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cben_a_adams\u003e So could probably do something with a genesis file and it doesn't necessarily have to be huge (though it may be large). Might have advantage on chain resets than snapshots; though not sure.\n\nAlso construction rather than having a public runnable sequence of tx on how to ruin a chain ðŸ˜…",
        "created_at": "2025-05-01T03:57:26.743000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cben_a_adams\u003e Or could just copy Xen token' storage , but would be a 20GB+ json file",
        "created_at": "2025-05-01T04:10:17.470000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003camezianehamlat\u003e How about the initial idea of spamming with storage txs, with 1 gigas blocks and 4 s slot time, we can go ~80 (1000/36 * 3) times faster than current mainnet. In one month, this will generate ~ 6 years mainnet activity, in two months ~12 years which should be sufficient. This is only by having similar block structure than current mainnet, so we can go even faster with blocks with more storage txs.\nThe other benefit is to stress storage opcodes.",
        "created_at": "2025-05-01T05:21:14.181000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cgakonst\u003e re: **@amezianehamlat**\n\u003e How about the initial idea of spamming with storage txs, with 1 gigas blocks and 4 s slot time, we can go ~80 (1000/36 * 3) times faster than current mainnet. In one month, this will generate ~ 6 years mainnet activity, in two months ~12 years which should be sufficient. This is only by having similar block structure than current mainnet, so we can go even faster with blocks with more storage txs.\nThe other benefit is to stress storage opcodes.\nIdts, if you 10-100x mainnet gas this replay method isn't good. Just generate an iterable dataset and bootstrap node dbs from it.",
        "created_at": "2025-05-01T05:33:50.454000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003camezianehamlat\u003e Yeah, it is not easy to replay if needed but can be a good first approach while thinking about a better way to do it.",
        "created_at": "2025-05-01T05:39:31.095000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cKamilChNethermind\u003e 10-100 is great but 2x for now will give us a lot of answers and we can iterate further.\n\nWill do my Best increase the size or will considered shadowforking mainnet and building on top of it",
        "created_at": "2025-05-01T07:43:03.890000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cparithoshj\u003e Why arenâ€™t we just doing shadow forks instead of injecting state at genesis? The mechanism exists already and works on all clients, the effort for implementing some injection method could be spent elsewhere",
        "created_at": "2025-05-01T08:40:52.650000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cbarnabasbusa\u003e re: **@parithoshj**\n\u003e Why arenâ€™t we just doing shadow forks instead of injecting state at genesis? The mechanism exists already and works on all clients, the effort for implementing some injection method could be spent elsewhere\nsf state is limited",
        "created_at": "2025-05-01T08:41:32.098000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cbarnabasbusa\u003e the max we can have is latest mainnet state",
        "created_at": "2025-05-01T08:41:57.076000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cvdWijden\u003e Sf need some ramp up time for increasing the gas limit, but it shouldn't be too bad",
        "created_at": "2025-05-01T08:43:08.599000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cKamilChNethermind\u003e I think we could use that to slowly go through milestones, stop on for example 45 MGas, do tests, go to 60, do test, 75 etc",
        "created_at": "2025-05-01T08:44:07.693000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Execution Layer",
        "parent": "",
        "content": "\u003cvdWijden\u003e We can mine some zen on the sf ðŸ¤“",
        "created_at": "2025-05-01T08:44:41.434000+00:00",
        "attachments": null
    }
]