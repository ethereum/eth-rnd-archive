[
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e ACK on the FFI overhead.\n\nHave you had experience with doing low-level field operations in blst? Like `x = a * b % MODULUS` and then passing `x` as an argument to some blst function? Does that work?",
        "created_at": "2022-08-22T09:19:04.694000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I haven't dealt with BLST at all, but CGO's overhead is per function call, independent of the function essentially, so in that case, if you want to keep BLST's interface lean, a Go project would be better off writing the higher level `x = a * b % MODULUS; call_BLST(x);` in C, and then call that C function only once.",
        "created_at": "2022-08-22T12:32:33.530000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think it's easy and fine to write a wrapper in C for all higher level functions which is independent of BLST.",
        "created_at": "2022-08-22T12:33:38.532000+00:00",
        "attachments": []
    },
    {
        "author": "kevaundray",
        "category": "Cross-layer",
        "parent": "",
        "content": "My 2 cents is that the current blst library should be split into two libraries:\n\nC_blst_ECC which contains only the low level Elliptic curve operations.\n\nC_blst_bls which depends on C_blst_ECC and additionally implements the signature API needed \n\nThen based on skimming the conversation above a new C_blst_kzg library would be created which depends only on C_blst_ECC\n\nThe CGO bindings would then only be for the higher level functions in C_blst_kzg",
        "created_at": "2022-08-22T13:03:08.774000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e @dankrad https://github.com/ethereum/consensus-specs/issues/2980#issuecomment-1222562583 enjoy ðŸ˜›",
        "created_at": "2022-08-22T16:16:15.311000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e @inphi excellent. so now with batch inverse and with this, what verification times are we looking at?",
        "created_at": "2022-08-22T16:16:50.750000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cinphi\u003e It takes about 5ms to verify a blob tx. An improvement from 25ms without the optimizations.",
        "created_at": "2022-08-22T16:26:55.747000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e @inphi great! that's much better. we can do more profiling in sbc if you'd like.\n\nsame technique will work for blocks too where the benefits are greater because of 16 blobs",
        "created_at": "2022-08-22T17:43:25.143000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e \u003e \u003cdankrad\u003e  Yeah this is missing the absolute numbers though (re @asn_d6: @dankrad https://github.com/ethereum/consensus-specs/issues/2980#issuecomment-1222562583 enjoy ðŸ˜›)",
        "created_at": "2022-08-22T19:17:12.019000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e Always important to add the baseline",
        "created_at": "2022-08-22T19:17:25.652000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cinphi\u003e \u003e \u003cinphi\u003e  in what context would it be better for block verification? (re @asn_d6: @inphi great! that's much better. we can do more profiling in sbc if you'd like.\n\nsame technique will work for blocks too where the benefits are greater because of 16 blobs)",
        "created_at": "2022-08-22T19:36:56.356000+00:00",
        "attachments": []
    }
]