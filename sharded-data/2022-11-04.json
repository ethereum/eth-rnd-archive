[
    {
        "author": "tbenr",
        "category": "Cross-layer",
        "parent": "",
        "content": "Hey, I'm not kzg guru, can someone points me where in CL client the trusted setup presets  `KZG_SETUP_G1` and `KZG_SETUP_LAGRANGE` will be used? maybe in the kzg library initialization? I see `KZG_SETUP_G2` used in `verify_kzg_proof` but I don't see the others two",
        "created_at": "2022-11-04T17:12:11.024000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@504202741933932544\u003e they will all need to be supplied as inputs to the kzg library we are working on",
        "created_at": "2022-11-04T17:28:01.070000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "this is the latest afaik: https://github.com/dankrad/c-kzg/tree/4844_3038/src",
        "created_at": "2022-11-04T17:28:14.209000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "you can look in the header file to get a sense for how they will be used",
        "created_at": "2022-11-04T17:28:28.630000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "and there is some bespoke format for recording them in `trusted_setup.txt`",
        "created_at": "2022-11-04T17:28:47.757000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "Cross-layer",
        "parent": "",
        "content": "so as a CL dev, there will be some nice bindings around this library you can use and you'd just pipe in the trusted setup to it",
        "created_at": "2022-11-04T17:29:24.450000+00:00",
        "attachments": []
    },
    {
        "author": "tbenr",
        "category": "Cross-layer",
        "parent": "",
        "content": "Oky good Thanks",
        "created_at": "2022-11-04T17:31:52.468000+00:00",
        "attachments": []
    },
    {
        "author": "tbenr",
        "category": "Cross-layer",
        "parent": "",
        "content": "- `ROOTS_OF_UNITY`\n- `FIAT_SHAMIR_PROTOCOL_DOMAIN`\nwill be part of the `trusted_setup.txt`  I guess..",
        "created_at": "2022-11-04T18:35:54.123000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e the trusted_setup.txt format does not include those",
        "created_at": "2022-11-04T18:44:30.710000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e FIAT_SHAMIR_PROTOCOL_DOMAIN is fixed in the spec",
        "created_at": "2022-11-04T18:45:07.639000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e https://github.com/dankrad/c-kzg/blob/4844_3038/src/c_kzg_4844.h#L34  implementing https://github.com/ethereum/consensus-specs/blob/dev/specs/eip4844/polynomial-commitments.md#blob",
        "created_at": "2022-11-04T18:46:23.610000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e we have the roots of unity here, but i dunno where they are specified https://github.com/dankrad/c-kzg/blob/4844_3038/src/c_kzg_4844.c#L433",
        "created_at": "2022-11-04T18:47:59.684000+00:00",
        "attachments": []
    },
    {
        "author": "kevaundray",
        "category": "Cross-layer",
        "parent": "",
        "content": "You use SETUP_LAGRANGE when commuting to blobs since blobs are viewed as polynomials in Lagrange form, see: https://github.com/ethereum/consensus-specs/blob/master/specs/eip4844/polynomial-commitments.md#blob_to_kzg_commitment",
        "created_at": "2022-11-04T19:15:49.186000+00:00",
        "attachments": []
    },
    {
        "author": "kevaundray",
        "category": "Cross-layer",
        "parent": "",
        "content": "KZG_SETUP_G1 is useful because:\n\n- this is what the trusted setup will output, you will then transform it to the Lagrange setup \n\n- In verify, instead of bls.G1 you can/should use the degree 0 element in KZG_SETUP_G1",
        "created_at": "2022-11-04T19:17:47.661000+00:00",
        "attachments": []
    },
    {
        "author": "kevaundray",
        "category": "Cross-layer",
        "parent": "",
        "content": "Libraries will usually define a primitive root, usually itâ€™s the smallest one and this is used to generate the roots of unity for size 4096. The primitive root for the field being used should be 5, I believe the specs used 7 which may need to be changed",
        "created_at": "2022-11-04T19:20:20.227000+00:00",
        "attachments": []
    },
    {
        "author": "xrchz",
        "category": "Cross-layer",
        "parent": "",
        "content": "I haven't touched that root - it's the same as whatever Ben put into original c-kzg.",
        "created_at": "2022-11-04T19:45:06.680000+00:00",
        "attachments": []
    }
]