[
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cgakonst\u003e is there any eip4844 rust tooling? eg for crypto or for blob generation/retrieval etc",
        "created_at": "2022-09-08T16:39:56.094000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e i wrote this tool that takes bytes and spits out blobs by packing the bytes to field elements near optimally: https://github.com/asn-d6/blobbers/blob/main/src/packer_tight.rs",
        "created_at": "2022-09-08T16:41:39.727000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e i haven't seen any other rust tooling for 4844",
        "created_at": "2022-09-08T16:41:48.724000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e i know that @inphi and team have tooling for golang",
        "created_at": "2022-09-08T16:42:06.475000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cinphi\u003e yeah. other than that, it's all golang atm",
        "created_at": "2022-09-08T16:42:42.209000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "FYI, this PR removing the system contracts was finally merged: https://github.com/ethereum/EIPs/pull/5353",
        "created_at": "2022-09-08T20:24:10.310000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Cross-layer",
        "parent": "",
        "content": "We'll never get system contracts at this rate, they always get shut down ðŸ˜¦",
        "created_at": "2022-09-08T20:25:10.692000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "what were the other system contract use cases you had in mind?",
        "created_at": "2022-09-08T20:36:41.433000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Cross-layer",
        "parent": "",
        "content": "There were multiple attempts over the years, the first one was for blockhash history. Though reading through 4844 again, `excess_blobs` doesn't feel like a good \"system contract\" candidate.",
        "created_at": "2022-09-08T20:37:26.213000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yeah I think in my mind the situation with 2935 was always that it would be unneeded post-merge because we can just access the history accumulator in the beacon state",
        "created_at": "2022-09-08T20:39:12.260000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Cross-layer",
        "parent": "",
        "content": "We could think about a generic data system contract however, if we think querying this data from within the system is beneficial. Because in that case we can avoid adding new opcodes for querying said data.",
        "created_at": "2022-09-08T20:39:34.903000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Cross-layer",
        "parent": "",
        "content": "I actually meant that attempt in 2017 (EIP-210), that was before even the separate beacon chain idea was conceived.",
        "created_at": "2022-09-08T20:40:33.038000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think so too, but independently of that it would be neat (gimmick?) having the complete mapping of hash -\u003e blocknumber in the state.",
        "created_at": "2022-09-08T20:42:21.231000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Cross-layer",
        "parent": "",
        "content": "And the point of system contracts would be more in line with the thinking whether we can \"move more of the system into contracts\", which I think is a good question to explore. It could reduce client complexity.",
        "created_at": "2022-09-08T20:43:11.597000+00:00",
        "attachments": null
    },
    {
        "author": "gakonst",
        "category": "Cross-layer",
        "parent": "",
        "content": "What is the current tempcheck on sidecar vs tightly coupling the blobs with the header?",
        "created_at": "2022-09-08T20:49:08.355000+00:00",
        "attachments": null
    },
    {
        "author": "axic3354",
        "category": "Cross-layer",
        "parent": "",
        "content": "Left a bunch of questions regarding the opcode/precompile here: https://ethereum-magicians.org/t/eip-4844-shard-blob-transactions/8430",
        "created_at": "2022-09-08T21:00:14.231000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think sidecar is more appropriate. It is future compatible and CL clients already need to deal with getting out-of-order data (like attestations to blocks they haven't received)",
        "created_at": "2022-09-08T21:04:02.492000+00:00",
        "attachments": null
    },
    {
        "author": "inphi",
        "category": "Cross-layer",
        "parent": "",
        "content": "We briefly looked into it last week with \u003c@898563924440543283\u003e @asn1 and \u003c@415548822983278593\u003e. I think we were in agreement that blobs should be included in the beacon block. And \u003c@363800010518822915\u003e shares a similar sentiment.\n\nHowever, there's still some room in how to design the coupling. We could as you say, add the sidecar blob fields alongside the beacon block header. But we could also wrap the existing Beacon Block in a p2p message that includes the blob fields, so we avoid adding new fields to the beacon block.",
        "created_at": "2022-09-08T21:04:24.481000+00:00",
        "attachments": null
    },
    {
        "author": "inphi",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e it's true clients already deal with out of order data. Though i think in the case of sidecars, it's more critical because block processing cannot proceed without the sidecar and vice versa. Terence illustrates a couple more implementation challenges with the sidecar model here - https://hackmd.io/_3lpo0FzRNa1l7XB0ELH7Q?view",
        "created_at": "2022-09-08T21:07:27.760000+00:00",
        "attachments": null
    },
    {
        "author": "gakonst",
        "category": "Cross-layer",
        "parent": "",
        "content": "Is the concern that you're blocking on the sidecar? What are its failure modes?",
        "created_at": "2022-09-08T21:10:35.106000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think there were two things, and they are code implementation complexities: \n1. block cant be accounted for in forkchoice until the blob is seen, so client will implement a queue for it. Similar to attestation can't be processed today until the block is seen\n2. sync a node start check point state syncing, it needs to back track N period of blobs. This becomes easier to reason if blob is part of the block",
        "created_at": "2022-09-08T21:18:29.133000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cadietrichs\u003e \u003e \u003cadietrichs\u003e  I think the network wrapper for block + blobs makes most sense, keeping them separate from chain rules point of view, but bundling them in practice on the p2p (re @sharded_data_bot: \u003cInphi\u003e [reply]: We briefly looked into it last week with @Roberto Bayardo @asn1 and @ansgar.eth. I think we were in agreement that blobs should be included in the beacon block. And \u003c@363800010518822915\u003e shares a similar sentiment.\n\nHowever, there's still some room in how to design the coupling. We could as you say, add the sidecar blob fields alongside the beacon block header. But we could also wrap the existing Beacon Block in a p2p message that includes the blob fields, so we avoid adding new fields to the beacon block.)",
        "created_at": "2022-09-08T21:22:04.563000+00:00",
        "attachments": null
    },
    {
        "author": "terencechain",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah. I kinda like that too",
        "created_at": "2022-09-08T21:27:10.405000+00:00",
        "attachments": null
    },
    {
        "author": "gakonst",
        "category": "Cross-layer",
        "parent": "",
        "content": "Should there be an endpoint on the Consensus Client in a private API call which allows force-pruning the blobs?",
        "created_at": "2022-09-08T22:54:02.974000+00:00",
        "attachments": null
    },
    {
        "author": "gakonst",
        "category": "Cross-layer",
        "parent": "",
        "content": "That way I can run an indexer on all my blocks (\u0026 expose them in whatever way) and immediately prune my Consensus Layer from redundant blobs",
        "created_at": "2022-09-08T22:54:15.350000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003ctimbeiko\u003e Couldn't that lead to people just deleting them without indexing/exposing them ðŸ˜…?",
        "created_at": "2022-09-08T22:58:58.290000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003ctimbeiko\u003e (of course, people could do that anyways, but providing an API might make it more common)",
        "created_at": "2022-09-08T22:59:42.161000+00:00",
        "attachments": null
    }
]