[
    {
        "author": "nashatyrev",
        "category": "Cross-layer",
        "parent": "",
        "content": "If I got your question right then the `Union` was intended to handle this: \n```py\n    Union [\n        # Not yet confirmed competing headers\n        List[PendingShardHeader, MAX_SHARD_HEADERS_PER_SHARD] \n        # Confirmed commitment\n        DataCommitment\n    ])\n```\nThe intention was \na) Immediately 'publish' the commitment as soon as it is confirmed (i.e. make it accessible via fixed path in the state tree). That could still be done with a dedicated rotating array though (not to be named 'pre-previous' or 'grandparent' in this case)\nb) When commitment is confirmed get rid of unnecessary `PendingShardHeader` list for state size efficiency",
        "created_at": "2021-05-26T07:58:22.368000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e Immediately 'publish' the commitment as soon as it is confirmed (i.e. make it accessible via fixed path in the state tree). That could still be done with a dedicated rotating array though (not to be named 'pre-previous' or 'grandparent' in this case)",
        "created_at": "2021-05-26T15:14:17.625000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Cross-layer",
        "parent": "",
        "content": "aaaah interesting",
        "created_at": "2021-05-26T15:14:20.080000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Cross-layer",
        "parent": "",
        "content": "that's definitely.... creative!",
        "created_at": "2021-05-26T15:14:41.825000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess I can see the value of doing it that way",
        "created_at": "2021-05-26T15:14:53.934000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "Cross-layer",
        "parent": "",
        "content": "So have a rotating array of some big size (eg. 1 eek or whatever) and then just clear the current and previous just in time to start refilling them?",
        "created_at": "2021-05-26T15:15:19.437000+00:00",
        "attachments": null
    }
]