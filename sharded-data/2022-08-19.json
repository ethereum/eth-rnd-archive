[
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e @inphi hello! opened a ticket about the merkle hash improvement we discussed yesterday: https://github.com/ethereum/consensus-specs/issues/2980",
        "created_at": "2022-08-19T12:12:02.158000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e @inphi BTW, can you send us some more profiler information on how expensive all those `hash_to_bls_field()` hashes are? just want to make sure we are only considering hashes from `hash_to_bls_field()` and not from other places.",
        "created_at": "2022-08-19T16:06:51.227000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e I remember that when we looked at it with proto those hashes floated to the top of the profiler, but I don't remember how much overhead they were in terms of milliseconds",
        "created_at": "2022-08-19T16:08:27.960000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e to compare it with other operations",
        "created_at": "2022-08-19T16:08:32.775000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cinphi\u003e hey asn. iirc it was about 20-30% of the runtime. Im mostly afk today, but i can get more precise profiles later.\n\nbtw, batching the modular inverse operations in the barycentric formula loop is quite effective. We're seeing a 3x improvement in blob verification. For transaction batches under 8, this is as fast as verifying aggregated blobs (without kzg proofs). While performance still falls behind as the mempool gets bigger, I'm pretty happy with this performance.",
        "created_at": "2022-08-19T17:49:12.856000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cinphi\u003e I still would like to consider changing the hashing procedure though. The less compute for verification the better.",
        "created_at": "2022-08-19T17:50:24.235000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e @dankrad  did some eyeballed estimates and said that even with straight hashing the performance would not get that much better over hash_to_root. he says about 2x maybe.",
        "created_at": "2022-08-19T17:51:27.366000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e it should be an easy-ish change on your side. so perhaps try it out and let us know if it's worth it :)",
        "created_at": "2022-08-19T17:52:07.394000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cinphi\u003e yup, will do",
        "created_at": "2022-08-19T17:52:16.008000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e cheers",
        "created_at": "2022-08-19T17:52:24.860000+00:00",
        "attachments": null
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003camvlasov\u003e bls12-381 only offers 31 byte to encode per element, that is just miss by one. This is a popular curve, and implementations can be reused, but one can easily generate one that fits 32 bytes and as secure. Of course it would lead to more expensive operations (1 extra limb for both base field and scalar field), but it naturally matches EVM element length. Curious if it makes any inconvenience for anyone?",
        "created_at": "2022-08-19T23:49:42.724000+00:00",
        "attachments": null
    }
]