[
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cjtraglia\u003e Where can I find the recording of yesterday's presentation on DAS?",
        "created_at": "2023-04-20T03:02:57.480000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "Interesting. What do you think on merging the existing PR as is and continue this discussion separately?",
        "created_at": "2023-04-20T08:12:53.671000+00:00",
        "attachments": null
    },
    {
        "author": "__flcl",
        "category": "Cross-layer",
        "parent": "",
        "content": "Why not, it at least unlocks  blobsbundle request removal for the devs",
        "created_at": "2023-04-20T08:19:35.381000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "if we add kzgproofs in the beacon block, it would be sufficient to solve reorg issue without requiring any other complicated handling",
        "created_at": "2023-04-20T08:19:45.265000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "same size as commitments",
        "created_at": "2023-04-20T08:20:08.656000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "How would then blobs be received by CL?",
        "created_at": "2023-04-20T08:21:11.777000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "if CL is asking for reorg, its CL responsibility to ensure data availability",
        "created_at": "2023-04-20T08:21:39.204000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "also before the blob retention window blobs won't be available anyway",
        "created_at": "2023-04-20T08:22:08.914000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "for CL dataavailability checks in the window CL will download req/resp from peers",
        "created_at": "2023-04-20T08:23:07.988000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "Right, but within the window EL must return all blobs to ensure consistency between the transaction list and blobs. Otherwise, EL may include transactions with data blob unavailable to the majority of network participants and the entire proposal will fail",
        "created_at": "2023-04-20T08:23:49.092000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so you mean reorg happens the blob of the blobtx of the reorged blocks are not retained by EL for the reorged proposal? shouldn't EL prune blobs once its out of the finalization window and not before",
        "created_at": "2023-04-20T08:25:45.039000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "(sorry i am trying to understand the issue here)",
        "created_at": "2023-04-20T08:26:04.705000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I mean that here can be a block with unavailable data (maybe temporal unavailability) already sent to EL, then proposer re-orgs out this block by building on its uncle, EL assumes that blobs for all transactions are available on CL and includes these transactions into the new block",
        "created_at": "2023-04-20T08:28:46.229000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "aha, but the CL shouldn't be sending any block without checking availability, i.e. atleast CL has downloaded all blobs",
        "created_at": "2023-04-20T08:30:17.342000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "So, EL must double check DA on its side to avoid such situations to occur. And here we have two strategies, first is to send no blobs to EL on `newPayload`, this would mean that transactions bypassing mempool won't be included after reorgs; the other one is to always send blobs alongside transactions",
        "created_at": "2023-04-20T08:30:31.426000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I see, so block processing won't start before DA is checked? No CL does optimisation by executing a block while waiting for blobs?",
        "created_at": "2023-04-20T08:32:17.158000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "hmmm I guess so we will have to make it a requirement that such optimization can't be done, since EL will also need to check DA even if the optimization is allowed and hence force requirement of blobs = no optimization",
        "created_at": "2023-04-20T08:34:42.156000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "although,  if the EL  doesn't get blobs can't broadcast the (reorged) blob txs via its txpool to peers on reorgs",
        "created_at": "2023-04-20T08:36:25.353000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "This optimisation can only work if we decide to leave a risk for transactions bypassing mempool to not be included on re-org",
        "created_at": "2023-04-20T08:37:20.809000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so these would be most likely mev bundles?",
        "created_at": "2023-04-20T08:38:05.781000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I am not sure if blob transactions will be broadcasted after being added to the mempool on reorg",
        "created_at": "2023-04-20T08:38:07.284000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah, seems so",
        "created_at": "2023-04-20T08:38:20.699000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "i think mev bundles are very sensitive to the state at which bundle was made, so i don't see how they should be unhappy",
        "created_at": "2023-04-20T08:39:06.723000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "Cross-layer",
        "parent": "",
        "content": "so i guess this is an acceptable risk (atleast for now)",
        "created_at": "2023-04-20T09:03:59.823000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I guess there will be a discussion around this question on today's ACDC call",
        "created_at": "2023-04-20T09:07:59.424000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "As for me, not adding mev-boost txes on reorgs is perfectly fine",
        "created_at": "2023-04-20T09:08:30.998000+00:00",
        "attachments": null
    }
]