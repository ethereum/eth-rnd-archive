[
    {
        "author": "christopherbrumm",
        "category": "Cross-layer",
        "parent": "",
        "content": "That sounds great!\n\nHow is it possible to get the sequencer adress sender of a blob? Unfortunately, it's not included in the response from `getBlobSidecars`",
        "created_at": "2024-03-04T08:07:06.528000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Cross-layer",
        "parent": "",
        "content": "I would imagine that you obtain it from the transaction.",
        "created_at": "2024-03-04T08:12:48.652000+00:00",
        "attachments": null
    },
    {
        "author": "christopherbrumm",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm currently trying to implement a crawler that loads all blobs of e.g. Arbitrum for each height into an arbitrary data destination. To achieve this, I would need to\n1. query all transactions that has been sent to the sequencer inbox contract\n2. query the blobs related to those transactions using `eth/v1/beacon/blob_sidecars`\n\nHow is it possible to map `tx` -\u003e `blob_sidecar`? Is this information included in the `signed_block_header`?\n\ncc \u003c@665236020312145930\u003e",
        "created_at": "2024-03-04T08:55:26.123000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Cross-layer",
        "parent": "",
        "content": "Seems a bit of a pain at the moment, from what I can tell:\n\n- find the type 3 tx\n- obtain the blobs in the block that holds the tx\n- for each blob take its kzg_commitment and turn it into a versioned hash\n- match up the versioned hash in the tx with the one you have generated",
        "created_at": "2024-03-04T09:34:03.240000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Cross-layer",
        "parent": "",
        "content": "Not sure if there's a quicker way of doing this...",
        "created_at": "2024-03-04T09:34:24.530000+00:00",
        "attachments": null
    },
    {
        "author": "christopherbrumm",
        "category": "Cross-layer",
        "parent": "",
        "content": "Will try that - thanks a lot!",
        "created_at": "2024-03-04T10:24:28.954000+00:00",
        "attachments": null
    },
    {
        "author": "christopherbrumm",
        "category": "Cross-layer",
        "parent": "",
        "content": "Implemented step 1 and 2. Now, I want to implement 3 and 4, but the versioned hash from the blob's `kzg_commitment` (used Keccak-256) doesn't match with any transaction hash in the block. \n\nCould you describe those steps in more detail? Would be extremely helpful üôè",
        "created_at": "2024-03-04T11:17:35.320000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Cross-layer",
        "parent": "",
        "content": "Sure.  Taking a recent holesky transaction:\n\n- txid is 0xcb11cbb28b7557bbb4892cd0b498204501e9eb02397a14d934515a9c6531e199\n  - first versioned hash in that tx is `0x0102fca4336c3a4a8155fbd7799057c9032e5b1b436753779a7c3fa7ae9f5ab0`\n- consensus block is 1136720\n- KZG commitment of first blob sidecar for that consensus block is `0x916bad6a153fd1bcd8b3a1de3daceb5a9b2b5fc3a1b7ca136b2a73bf2e3cd5c8dcd6e78710133b2ed3632c1513548fa0`\n- versioned hash for that commitment is `echo '916bad6a153fd1bcd8b3a1de3daceb5a9b2b5fc3a1b7ca136b2a73bf2e3cd5c8dcd6e78710133b2ed3632c1513548fa0' | xxd -r -p | sha256sum | sed -e 's/ .*//' -e 's/^../01/'` which matches the first versioned hash listed above",
        "created_at": "2024-03-04T11:25:55.952000+00:00",
        "attachments": null
    },
    {
        "author": "christopherbrumm",
        "category": "Cross-layer",
        "parent": "",
        "content": "Perfect, thanks! Was able to reproduce the process for a Sepolia tx",
        "created_at": "2024-03-04T11:29:19.231000+00:00",
        "attachments": null
    },
    {
        "author": "christopherbrumm",
        "category": "Cross-layer",
        "parent": "",
        "content": "One last question: What's the best way to query a blob by the consensus block height? It seems that the `blob_sidecars` endpoint only accepts the slot - and not the consensus block height. What's the best way to either use the consensus block height to query blobs from the beacon node or to map consensus block to slots?",
        "created_at": "2024-03-04T15:31:52.180000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "Cross-layer",
        "parent": "",
        "content": "You can calculate the consensus slot directly from the timestamp of the execution block.  You need the genesis time of the chain, subtract that from the timestamp, then divide what's left by 12.",
        "created_at": "2024-03-04T15:32:54.963000+00:00",
        "attachments": null
    },
    {
        "author": "christopherbrumm",
        "category": "Cross-layer",
        "parent": "",
        "content": "Works perfectly fine. Again, thank you very much! Really appreciate your help üôè",
        "created_at": "2024-03-04T16:35:42.766000+00:00",
        "attachments": null
    },
    {
        "author": "kanagwa",
        "category": "Cross-layer",
        "parent": "",
        "content": "I am not sure if it's still relevant. We have built an indexer that does the heavy lifting of that task. I guess you can modify it to filter the specific rollup. Here it is: https://github.com/Blobscan/blobscan-indexer.rs",
        "created_at": "2024-03-04T23:38:17.261000+00:00",
        "attachments": null
    }
]