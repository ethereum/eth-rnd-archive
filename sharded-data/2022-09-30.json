[
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003e I imagine that this will force the EL to consider blocks with missing withrawals as blocks with zero withrawals until the CL upgrades\nWhy do you think this would be problematic?",
        "created_at": "2022-09-30T03:48:06.153000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is an API issue, not a consensus issue.  API changes don't happen with forks (I don't believe EL clients have the ability to have the API change based on the current block height/timestamp).",
        "created_at": "2022-09-30T03:49:15.840000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "That's not really relevant - we still need it to happen ahead of the EL upgrade or stuff breaks.  So we have to make sure all users upgrade their CL, then upgrade their EL, then upgrade their CL again. And we failed to decouple the upgrades because the EL upgrade required changes on the CL side.",
        "created_at": "2022-09-30T03:50:43.528000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think this gets to a real problem that we need to address which is API versioning.",
        "created_at": "2022-09-30T03:51:13.305000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "So we wind up with more complexity and more interaction models to test which increases risk when we were trying to reduce it.",
        "created_at": "2022-09-30T03:51:13.421000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "We have been hand waving over this problem for a while, but it really does need a solution.",
        "created_at": "2022-09-30T03:51:32.647000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Unless we want to require users to update both of their clients simultaneously, we will need the EL to be able to function with a CL that doesn't support receiving empty withdraw lists (assuming that is how the spec works out).",
        "created_at": "2022-09-30T03:53:17.554000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "API versioning doesn't really help though - you have to get the CL upgraded to the new version or do the testing to ensure the required changes are actually backwards compatible for all real implementations.  The bottom line is that the EL will change behaviour in a way that affects the CL. The changes are not actually decoupled. So the simplest option is just to do them at the same time.  Pretending they're decoupled when they're not introduces a lot of complexity and risk.",
        "created_at": "2022-09-30T03:53:18.019000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't think it is pragmatic to require *users* update two clients in lockstep.",
        "created_at": "2022-09-30T03:53:48.191000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "If we omit empty withdrawal lists then that's a weird quirk we have to live with in the API forever.",
        "created_at": "2022-09-30T03:53:54.872000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Why not? It's much simpler for them to do both updates at the same time and monitor a single hard fork than it is to do them at different times.",
        "created_at": "2022-09-30T03:54:21.467000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "This gets to Peter's point argument in ACD (I think) a while ago where we really need to have a process for API versioning and deprecation specifically so we *don't* have to continue supporting this stuff indefinitely.",
        "created_at": "2022-09-30T03:54:40.815000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is a broad problem that extends well beyond the topic of hard forks that needs to be solved, and once we have solved it we can use that solution for decoupled forks.",
        "created_at": "2022-09-30T03:55:12.800000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "But then we just have a separate upgrade cycle somewhere which is the original problem.  We don't *have* a versioning issue if we upgrade both at once because we know they will both activate the new field at the same time.",
        "created_at": "2022-09-30T03:55:36.352000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Not saying that having a clear approach to migrating APIs is a bad thing, but it doesn't solve this issue.",
        "created_at": "2022-09-30T03:56:05.236000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "This solution adds complexity to release processes for clients because now they need to maintain a security fixes for old versions because you **cannot** upgrade to new version X until all EL/CL clients are ready for a massive simultaneous release since there is an API change included.",
        "created_at": "2022-09-30T03:57:05.286000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "As a client dev I can say that's not true.  We didn't do it for Altair or Bellatrix, both of which involved significant API changes.",
        "created_at": "2022-09-30T03:57:51.942000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "API changes that are backward incompatible?",
        "created_at": "2022-09-30T03:58:16.539000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Meaning, you could not update either side of the API without updating the other; they had to update in lockstep?",
        "created_at": "2022-09-30T03:58:31.952000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes. Blocks changed in both upgrades and the API between the validator and the beacon node had to adapt to that.  Because the change happened in lock step, it just worked.",
        "created_at": "2022-09-30T03:59:16.225000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "There's already a hard dependency because you can't work with an Altair block after the Bellatrix upgrade so it's quite natural for the API to also handle that change.",
        "created_at": "2022-09-30T03:59:55.272000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "It will work until it doesn't.  e.g., if you have a security vulnerability you need to fix and you already implemented the backward incompatible API change, now you need to apply the security fix to both head and an old version without the API change.",
        "created_at": "2022-09-30T04:00:44.060000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Again, I'm a client dev.  I have been living this and dealing with these issues.  You're wrong.",
        "created_at": "2022-09-30T04:01:16.105000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Or you keep the API change in a feature branch and spend resources constantly maintaining it until it is released, but even that has some raciness if the security vulnerability shows up during the 1-2 month long release process.",
        "created_at": "2022-09-30T04:01:24.484000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Sorry to be blunt but you're making up issues that just don't come up.",
        "created_at": "2022-09-30T04:01:36.091000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "These are issues that aren't specific to Ethereum.  There is a good reason that companies try to avoid lockstep API changes in production systems.",
        "created_at": "2022-09-30T04:02:11.400000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "And while I don't write an Ethereum client, I *have* had to maintain production code with an exposed or consumed API where turning off the system to do lockstep upgrades wasn't a viable option, and the option of trying to update both simultaneously is always brought up as the \"easy\" solution and it never ends up actually being easy.",
        "created_at": "2022-09-30T04:03:45.266000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "The book \"Continuous Delivery\" by Jez Humble and Dave Farley would be excellent reading on how to make this work without feature branching and backporting etc.",
        "created_at": "2022-09-30T04:04:15.104000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Is there a TL;DR version (e.g., blog post) that doesn't require me to buy and read a book?",
        "created_at": "2022-09-30T04:05:18.275000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "In my experience in the industry, \"continuous delivery\" *never* involves lockstep upgrades because it creates coupling in your release pipeline between disparate components (often developed by different teams).",
        "created_at": "2022-09-30T04:06:10.095000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "You can start with https://continuousdelivery.com but I'd read the book before arguing that you can't manage this stuff effectively.",
        "created_at": "2022-09-30T04:06:41.490000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think one *can* pull it off, but it requires significantly more effort than designing systems that don't require as much coordination to deliver/deploy.",
        "created_at": "2022-09-30T04:07:28.561000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "i.e., API versioning and negotiation",
        "created_at": "2022-09-30T04:07:43.341000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Shrug. What would I know? I'm just a client dev who's been dealing with this exact issue...",
        "created_at": "2022-09-30T04:09:05.723000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Just to make sure I understand correctly: the Altair and Bellatrix upgrade both required users to update their consensus client and validator client to specific versions simultaneously, and if they updated either their consensus or validator client without updating the other their setup would break?",
        "created_at": "2022-09-30T04:11:28.456000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is true for prysm. With hard forks we typically advertise it as a major release meaning it's not backwards compatible between BN and VC",
        "created_at": "2022-09-30T04:15:41.381000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "How many different validator clients are there?  Does each consensus client team produce their own validator client, or is it mix and match like EL/CL combinations?",
        "created_at": "2022-09-30T04:18:36.392000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "No this wasnâ€™t the case for Teku. You needed to have upgraded both by the time the fork happened but thatâ€™s required anyway because the hard fork changed behaviour not just the API. \nBut you could upgrade one before the other before the fork and it would work because neither side added or expected the new fields in the blocks.\n\nThe hard fork activated at the same time (same epoch start) for both the beacon node and validator client and then they both added and expected the new fields.",
        "created_at": "2022-09-30T04:27:45.573000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "So the deployment is decoupled and the activation occurs in lock step. Just like we do for every hard fork.",
        "created_at": "2022-09-30T04:28:31.387000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Is the API Teku serves coupled with the current epoch?",
        "created_at": "2022-09-30T04:29:58.926000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "The block data is.",
        "created_at": "2022-09-30T04:30:11.351000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Because blocks are inherently coupled to a hard fork.",
        "created_at": "2022-09-30T04:30:29.154000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ah I think I missspoke. We are the same as Teku",
        "created_at": "2022-09-30T04:30:44.264000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Thatâ€™s slightly new for EL clients who have gone to rather extreme lengths to avoid changing data structures in the past but new transaction types have started that change already so itâ€™s not unheard of.",
        "created_at": "2022-09-30T04:31:17.855000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "IIRC with the new transaction types, various clients on the gossip network added support for them over gossip prior to the hard fork, and it was just that no one was using them until after the fork.",
        "created_at": "2022-09-30T04:34:28.535000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "There was no need to sync the different client releases as they all added support at their own leisure prior to London (including users being able to submit new transaction types to their local node and whatnot).  You just couldn't include them in a block prior to London, and *some* subset of the clients on the network may reject them if they were received via gossip prior to London.",
        "created_at": "2022-09-30T04:35:38.854000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Some clients *may* (I'm not sure) have not allowed them in their mempool prior to London (since they weren't yet valid transactions) but that was a per-client decision and nothing that needed to be done in lockstep between clients.",
        "created_at": "2022-09-30T04:36:12.006000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes exactly. Then they activated in lock step. ðŸ™‚",
        "created_at": "2022-09-30T04:36:55.722000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "They activated the consensus changes in lockstep, as with every hard fork.",
        "created_at": "2022-09-30T04:37:06.742000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "They did not activate API or gossip changes in lockstep.",
        "created_at": "2022-09-30T04:37:17.117000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "I donâ€™t think thatâ€™s true exactly. They could only start using the new transaction type after the hard fork so thatâ€™s when those changes actually activated.",
        "created_at": "2022-09-30T04:37:59.210000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I *think* you could gossip (to a limited extent) new transactions prior to the hard fork that enables them for a block.",
        "created_at": "2022-09-30T04:38:21.602000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Weâ€™d do the same for withdrawals. The clients get new versions deployment which are ready to activate the changes and then at the specific slot/timestamp those changes activate.",
        "created_at": "2022-09-30T04:38:44.226000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "What do CL clients do with unknown extra parameters in API responses from the EL?",
        "created_at": "2022-09-30T04:39:28.936000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Iâ€™d guess thereâ€™s a mix of things. But it doesnâ€™t matter if you activate the hard fork at the same time. If you activate at different times you have to handle that complexity and test the combinations.",
        "created_at": "2022-09-30T04:40:21.438000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I argue that we need to handle that problem for other reasons anyway, and once we have handled it we can just use that solution.  I forget what it was, but there is already talk of needing to update the EL/CL API for something (\u003c@425572898787426305\u003e probably remembers what).",
        "created_at": "2022-09-30T04:41:54.350000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Even if we handle it we donâ€™t need the extra complexity and risk in this case. Activating at separate times was meant to make it simpler but it actually makes it more complex.",
        "created_at": "2022-09-30T04:42:42.556000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't think activating at different times makes the code simpler.  I think it reduces risk though.",
        "created_at": "2022-09-30T04:43:45.243000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Coordination, for example, is simpler when you only have to coordinate timing with 4 teams rather than 8.",
        "created_at": "2022-09-30T04:44:04.367000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "You have to coordinate with EL and CL anyway because you need them to ultimately work together. There is no option here of activating at different times. You canâ€™t do withdrawals with only one side. \nThe question is how we trigger activating at the same time.",
        "created_at": "2022-09-30T04:45:14.236000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "You *can* activate at different times.  EL has a hard fork where blocks can now contain withdraw lists provided by the CL.  This list would be empty, but everything would be present for them to work.",
        "created_at": "2022-09-30T04:47:36.924000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Then at a future date (doesn't matter when from the EL perspective), the CL can start actually sending withdraws.",
        "created_at": "2022-09-30T04:47:58.170000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "If we assume that we have an API versioning system (because we need one anyway), then we would just leverage that system to support the fact that some CL clients may not be providing any list in their API responses yet.",
        "created_at": "2022-09-30T04:49:27.487000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "But you donâ€™t use withdrawals until the CL updates. Ie you activate at the same time. The feature is only available when both sides have it. \n\nYour describing one possible way of separating deployment from activation. Itâ€™s not the only way and itâ€™s definitely not the simplest way.",
        "created_at": "2022-09-30T04:49:33.204000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "It would activate for the EL as the block structure would change with the EL fork.",
        "created_at": "2022-09-30T04:50:56.277000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "There would be no user facing \"feature\" at this time, but there would be block structure (and thus consensus change) with the EL fork.",
        "created_at": "2022-09-30T04:51:13.520000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "And the EL would (likely) start shipping that new block structure to its API clients (JSON-RPC), so tooling can start depending on it from that point (even though it is empty).",
        "created_at": "2022-09-30T04:52:08.004000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I took your advice and was reading over this site, and it seems the author here agrees with me and not you, which suggests that perhaps we are misunderstanding each other's position.  https://continuousdelivery.com/implementing/patterns/#patterns-for-low-risk-releases\n\u003e Low-risk Releases are Incremental. Our goal is to architect our systems such that we can release individual changes (including database changes) independently, rather than having to orchestrate big-bang releases due to tight coupling between multiple different systems. This typically requires building versioned APIs and implementing patterns such as circuit breaker.",
        "created_at": "2022-09-30T04:57:34.068000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "Those books typically talk about traditional deployments that are done with a single button push.",
        "created_at": "2022-09-30T05:00:04.101000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "Iâ€™m wondering do you also argue for hardforks that include only one feature/change?",
        "created_at": "2022-09-30T05:00:34.466000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm personally a fan of having regularly scheduled forks and whatever is ready goes in at the scheduled time.",
        "created_at": "2022-09-30T05:01:23.414000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is specific to Ethereum, and not my general policy on all things though.",
        "created_at": "2022-09-30T05:01:36.167000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "Then you are contradicting yourself.",
        "created_at": "2022-09-30T05:02:00.855000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I tend to prefer continuous deployment when it makes sense.  In the case of Ethereum though, we need to coordinate deployment with thousands of users and stakeholders so CD doesn't work.",
        "created_at": "2022-09-30T05:02:08.015000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "You should argue for the smallest chances possible. That means you should argue for single change/feature hardforks",
        "created_at": "2022-09-30T05:02:31.239000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "In my perfect imaginary world of unicorns and rainbows, ELs and CLs would both be on a 6 month release cadence, but they would be offset from each other by 3 months.  The EL fork that enables withdraws would happen, and then the CL fork that enables withdraws would happen on their next scheduled HF at the earliest (though they could choose to delay 6 months).",
        "created_at": "2022-09-30T05:03:28.237000+00:00",
        "attachments": []
    },
    {
        "author": "ajsutton",
        "category": "Cross-layer",
        "parent": "",
        "content": "Again, the risk is when you treat something as decoupled when it actually isnâ€™t. That increases complexity and risk rather than reducing it. \n\nThereâ€™s no silver bullet for doing continuous delivery well, itâ€™s about understanding each situation and using a suite of tools to speed up feedback loops and reduce risk.",
        "created_at": "2022-09-30T05:03:38.608000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I agree with this, but I disagree that this change is actually coupled.",
        "created_at": "2022-09-30T05:04:00.894000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "This actually means that hardforks effectively activates on each side every three months. So when CL activates real hardfork it actually triggers EL virtual hardfork that was waiting for the feature activated in CL. Such short periods are not very realistic given historical performance.\n\nSo overall I donâ€™t really see how this approach helps in really.",
        "created_at": "2022-09-30T05:17:18.628000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "The EL hard fork would activate, it just wouldn't be fully utilized.",
        "created_at": "2022-09-30T05:18:04.056000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "This is similar to Berlin (I think) where consensus support for new transaction types was added but those new transaction types didn't actually show up on the network until sometime later (I think intentionally by a dev to validate the feature).",
        "created_at": "2022-09-30T05:18:56.524000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I wouldn't say that there was a \"virtual hardfork\" when those transactions were the feature was first used.",
        "created_at": "2022-09-30T05:19:17.407000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "In general case I see this as a virtual hardfork as before itâ€™s activated the new code isnâ€™t really used.",
        "created_at": "2022-09-30T05:21:30.391000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm not a fan of that use of the term hard fork personally, but I can accept it for the context of this discussion.  In that case it is not at all uncommon for us to have \"virtual hard forks\".",
        "created_at": "2022-09-30T05:22:50.002000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "And I don't think having these \"virtual hard forks\" is a problem.",
        "created_at": "2022-09-30T05:23:08.763000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think you donâ€™t see this as a problem bc you are not developing a client. From dev perspective thats problems everywhere. Just a small example, in Rust types are pretty strict. So there may be some new feature in the hardfork that needs some field in the container to be set. So instead of having this field always set in the new CL hardfork we would need to make it optional so it handles both pre and post virtual hardfork modes on EL. Thatâ€™s a mess that doesnâ€™t help in any way.",
        "created_at": "2022-09-30T05:33:15.231000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "A couple of changes not related to hard forks:\n* `getPayloadV2` with `feeRecipientBalance` field\n* `getPayloadBodiesByRoot`, `getPayloadBodiesByRange` where the latter method is *optional*\n\nWe likely need versioning for it in order to avoid try-and-fallback pattern on CL side to understand whether a certain method is supported by EL or not.",
        "created_at": "2022-09-30T09:07:05.120000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "For the case of withdraws, EL would come first so the CL wouldn't need to deal with this.  However, I think your general point applies if you just flip EL and CL in your statement.  I still argue that we have to solve this problem anyway for other reasons, and once solved we can leverage that solution.",
        "created_at": "2022-09-30T09:09:18.621000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "If CL would need to switch to the new `newPayloadV2` method because of changes in the data structure then we have coordinated update even though CL isn't activating withdrawals at the same time.\n\nIf EL exposes `newPayloadV2` but CL uses `newPayloadV1` until the upgrade epoch then we can't check whether stakers have updated their ELs or not.",
        "created_at": "2022-09-30T09:09:40.229000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "Ok, so I finished reading the hundreds of messages in this channel since last night that I went to sleep, the cycle goes about every 20-30 messages and then the same arguments are repeated ðŸ˜‰ I don't think we'll get far here. From what I can gather there are three camps. On one camp there's Micah claiming that this update is not coupled. On the other hand there's every CL client dev (that participated here) saying it is. And the third camp is Marius that wants the upgrade to be on block height. The only agreement seems to be that in order to do block height then the upgrade can't happen simultaneously, so it's safe to assume that there's a camp with Micah and Marius and then there's every other CL client dev.",
        "created_at": "2022-09-30T09:30:51.610000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "They could be decoupled only if CL keeps using the previous version of Engine API after EL upgrades which would be complexity on EL side (EL will have to e.g. append empty withdrawals list to every payload fed by CL)",
        "created_at": "2022-09-30T09:50:58.297000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "If CL switches to the new Engine API version then the upgrade becomes slightly coupled, slightly means synchronous data structure upgrade but async logic upgrade (CL may enabled withdrawals logic after EL does the same)",
        "created_at": "2022-09-30T09:52:38.513000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "Cross-layer",
        "parent": "",
        "content": "I am wondering what does the latter buy us?",
        "created_at": "2022-09-30T09:54:04.075000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "yeah that's what I said in the original post, that the EL would have to treat differently the empty withdrawal list from the no list at all. I suspect that any sort of artificial decoupling like this ends up in much more complexity than the one Marius is trying to avoid by not using timestamps",
        "created_at": "2022-09-30T10:05:48.849000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think that my general point is that I just don't see why a regular upgrade needs to be split into separate EL/CL hardforks at different times. While your suggestion is to split it because it arguably is safer etc. In my opinion, the only case when an upgrade should be split is that it's so complex that it's too large for a single release. I don't think that's the case generally, it's the opposite usually, hardforks involve a few features. \n\nI really would like to think about upgrades assuming that EL/CL is a single piece. You know, just like normal people are doing client dev elsewhere. So then we even wouldn't need to discussions we have now. I'm afraid if we keep splitting things, then soon hardforks that involve only one side will be split further. For example, the first hardfork will add optional fields to the containers without actually using it and the second hard fork will start to use it (and it can be split further this way until hardfork consists of a single code line change). Wait, that's pretty much the same as suggesting 6 months hardforks with 3 months offsets ðŸ™‚\n\nMy point is that this separation of EL and CL is not a desired thing. Life would be much easier if it was a single piece. So further building on the weaknesses of not ideal concept isn't the best idea.",
        "created_at": "2022-09-30T11:28:23.930000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I don't think we should be using API sniffing as a mechanism for determining what version remote client/server is running.  This gets back to the need for a status endpoint and/or a \"ping\" (which could contain version information).",
        "created_at": "2022-09-30T12:24:05.787000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Eh, we are in \"vacation mode\" so not everyone is paying attention/participating at the moment.  As much as I hate the whole idea of vacations, I do think since we are currently in one we should not make any decisions nor assume we have full participation in discussions.",
        "created_at": "2022-09-30T12:25:26.707000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "Cross-layer",
        "parent": "",
        "content": "what does \"vacations\" mean? looking at the concept in the dictionary seems something interesting. I should try that",
        "created_at": "2022-09-30T12:26:27.201000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think this gets to the core of our disagreement.  I think that the separation of EL/CL was a great thing and we should leverage it.  I have lobbied in the past (and I know I'm not alone) for breaking apart the EL into even more components that can be extracted into separate services.  From a user standpoint, I *do* think there is value in people creating bundles/packages/launchers that hides this complexity from users, but from an architecture/engineering standpoint I'm a big fan of splitting things up and decoupling them.",
        "created_at": "2022-09-30T12:28:55.589000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Its a trap!  It sounds great, but then when you return from this \"vacation\" you just have way more work!",
        "created_at": "2022-09-30T12:29:23.977000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes, that's the core disagreement. I hear you, but it's possible to have a well-designed monolith that will have similar benefits to a split system without the hassle of a split system. This actually starts to remind monolith vs microservices debates we had back then in web 2.0.",
        "created_at": "2022-09-30T12:47:20.416000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes, it is essentially that exact debate.",
        "created_at": "2022-09-30T12:47:49.197000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm of the belief that once a piece of software gets bigger than can be reasonably maintained by 4-5 people, it is time to break it apart into smaller pieces that *can* be maintained by around 4-5 people.  Human coordination is very hard, and having very clear/well defined coordination boundaries helps facilitate it.",
        "created_at": "2022-09-30T12:48:47.811000+00:00",
        "attachments": []
    },
    {
        "author": "terence0083",
        "category": "Cross-layer",
        "parent": "",
        "content": "Some notes on CL client implementation considerations\nhttps://hackmd.io/hZefl5F5RgWXeibgWflRQQ?view",
        "created_at": "2022-09-30T12:54:28.464000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e wrt kzg functions terence here is the latest list that the lib should provide:\n\n\n-Â Â Â Â  compute_powers()\n-Â Â Â Â  matrix_lincomb()\n-Â Â Â Â  g1_lincomb()\n-Â Â Â Â  bytes_to_bls_field()\n-Â Â Â Â  evaluate_polynomial_in_evaluation_form()\n-Â Â Â Â  verify_kzg_proof()\n-Â Â Â Â  compute_kzg_proof()",
        "created_at": "2022-09-30T13:09:30.608000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003casn_d6\u003e im not sure where to write this list down so that client devs can see it",
        "created_at": "2022-09-30T13:15:03.725000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003ctimbeiko\u003e 4844 Breakout in ~40m! https://github.com/ethereum/pm/issues/628",
        "created_at": "2022-09-30T13:20:06.965000+00:00",
        "attachments": []
    },
    {
        "author": "booklearner",
        "category": "Cross-layer",
        "parent": "",
        "content": "not sure about a comparison, but as part of the observability work related to 4844 I could collect network metrics as well -- if this is helpful I'm happy to get you access to some dashboards (aiming to have the setup complete early next week)",
        "created_at": "2022-09-30T13:35:22.025000+00:00",
        "attachments": []
    },
    {
        "author": "booklearner",
        "category": "Cross-layer",
        "parent": "",
        "content": "so this would be real world measurements from nodes in the testnet, open to any suggestions you might have/if there's specific data you'd like to see measured let me know!",
        "created_at": "2022-09-30T13:41:45.698000+00:00",
        "attachments": []
    },
    {
        "author": "jimmygchen",
        "category": "Cross-layer",
        "parent": "",
        "content": "would the existing geth / prysm grafana dashboards help with these?",
        "created_at": "2022-09-30T13:47:25.224000+00:00",
        "attachments": []
    },
    {
        "author": "booklearner",
        "category": "Cross-layer",
        "parent": "",
        "content": "probably! if that stack is collecting network data from the nodes, though the challenge I think is adding granularity i.e. showing bandwidth breakdowns by specific rpc or something like that",
        "created_at": "2022-09-30T13:50:19.584000+00:00",
        "attachments": []
    },
    {
        "author": "booklearner",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@466006586477772831\u003e are those dashboards publicly accessible? I'd be interested in taking a look",
        "created_at": "2022-09-30T13:52:01.351000+00:00",
        "attachments": []
    },
    {
        "author": "jimmygchen",
        "category": "Cross-layer",
        "parent": "",
        "content": "Yes they are.\n\nthis one is for Geth (screenshot available on the page)\nhttps://grafana.com/grafana/dashboards/13877-single-geth-dashboard/\n\nPrysm\nhttps://docs.prylabs.network/docs/prysm-usage/monitoring/grafana-dashboard",
        "created_at": "2022-09-30T14:00:33.060000+00:00",
        "attachments": []
    },
    {
        "author": "jimmygchen",
        "category": "Cross-layer",
        "parent": "",
        "content": "I think there are some more detailed dashboards used for the merge by some client dev teams",
        "created_at": "2022-09-30T14:02:37.307000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e \u003e \u003cxrchz\u003e  one version is here https://github.com/dankrad/c-kzg/blob/4844/min-src/c_kzg_4844.h (re @asn_d6: im not sure where to write this list down so that client devs can see it)",
        "created_at": "2022-09-30T14:15:34.131000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e @dankrad do we have data about what has been done in terms of analysis of other commitment schemes ? like numbers showing what you were saying about FRI being far from practical",
        "created_at": "2022-09-30T14:34:27.751000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e I do agree that Quantum resistance is not the major problem, but I am not sure about transparent vs practical efficiency tradeoff to be honest. I don't know what you mean by far for being practical, but for example if it is like x2 in terms of data or even x10 I still think this is not enough to disqualify, compared to requiring a trusted setup on the L1, which is a huge precedent IMO",
        "created_at": "2022-09-30T14:36:38.827000+00:00",
        "attachments": []
    },
    {
        "author": "sauliusgrigaitis",
        "category": "Cross-layer",
        "parent": "",
        "content": "Do you think that a trusted setup on the L1 is an issue if the trusted setup is updatable and anyone can join?",
        "created_at": "2022-09-30T14:43:38.823000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e \u003e \u003cabdelhamidbakhta\u003e  is it updatable right now ? will future participants in 100 years be able to participate ? otherwise yes I think it is an issue (re @sharded_data_bot: \u003cSaulius Grigaitis\u003e [reply]: Do you think that a trusted setup on the L1 is an issue if the trusted setup is updatable and anyone can join?)",
        "created_at": "2022-09-30T14:44:23.515000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e \u003e Fwiw, I'm currently investigating partially-STARK/FRI-based proofs of block execution.  Can someone point me to the analysis comparing different commitment schemes which says FRI is far from usable at the moment?\n@prylabsjames is it you ?",
        "created_at": "2022-09-30T14:44:45.889000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e from the FAQ: Additionally, any KZG-related risks are contained: a KZG failure would only affect rollups and other applications depending on blob data, and leave the rest of the system untouched.",
        "created_at": "2022-09-30T14:47:27.285000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e I don't think this argument is valid, because on one hand Ethereum moves to a rollup centric approach and on the other hand we say if it breaks it will break only rollups...",
        "created_at": "2022-09-30T14:48:02.680000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e Also to be honest I think it is bad to assume that it is fine to use KZG and a trusted setup right now. Maybe it is the only solution. But, all the attention was on The Merge those past months, and now that the attention is on 4844 we already assume such important design choice. I just feel that spending more brain cycles to evaluate alternatives would be useful given the implication of a trusted setup.",
        "created_at": "2022-09-30T14:50:13.288000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cprylabsjames\u003e \u003e \u003cprylabsjames\u003e  Iâ€™m not the right person for pointing you to that commitment scheme ðŸ˜… (re @abdelhamidbakhta: \u003e Fwiw, I'm currently investigating partially-STARK/FRI-based proofs of block execution.  Can someone point me to the analysis comparing different commitment schemes which says FRI is far from usable at the moment?\n@prylabsjames is it you ?)",
        "created_at": "2022-09-30T14:50:54.329000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e I don't know who is Jamie on the zoom call right now haha, sorry",
        "created_at": "2022-09-30T14:51:16.892000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e \u003e \u003cabdelhamidbakhta\u003e  It makes me think about laws voted during summer when no one pays attention. Obviously I am not saying it is intentional to force this choice. Just saying that the implications on the neutral credibility and security of Ethereum are huge (re @abdelhamidbakhta: Also to be honest I think it is bad to assume that it is fine to use KZG and a trusted setup right now. Maybe it is the only solution. But, all the attention was on The Merge those past months, and now that the attention is on 4844 we already assume such important design choice. I just feel that spending more brain cycles to evaluate alternatives would be useful given the implication of a trusted setup.)",
        "created_at": "2022-09-30T14:54:20.619000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e @dankrad regarding the question you asked me to put asynchronously: due to the efficiency of KZG could we improve security consensus by proving random sample in subsequent slot ?",
        "created_at": "2022-09-30T15:03:34.427000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e rather than relying on honest validators",
        "created_at": "2022-09-30T15:05:39.529000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e No, that does not improve security. Data availability sampling has to be done based on local randomness. The chain querying a random sample adds no security as an attacker can always release a small number of samples to satisfy the chain, but still withhold the rest of the data",
        "created_at": "2022-09-30T15:09:59.272000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e \u003e \u003cdankrad\u003e  On that we have to agree to disagree. I think the trusted setup is a price worth paying for a 10x improvement in the proof size. as well as a \u003e10x improvement in prover performance to generate all samples. Both would be very significant costs and I think trusted setups can be done extremely well.\nYou also misunderstood me. I think post-quantum would be a more important property than not having a trusted setup. (re @abdelhamidbakhta: I do agree that Quantum resistance is not the major problem, but I am not sure about transparent vs practical efficiency tradeoff to be honest. I don't know what you mean by far for being practical, but for example if it is like x2 in terms of data or even x10 I still think this is not enough to disqualify, compared to requiring a trusted setup on the L1, which is a huge precedent IMO)",
        "created_at": "2022-09-30T15:15:03.781000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e Oh ok, indeed I understood the opposite. Well, ok, let's agree to disagree on that then",
        "created_at": "2022-09-30T15:16:16.111000+00:00",
        "attachments": []
    },
    {
        "author": "jimmygchen",
        "category": "Cross-layer",
        "parent": "",
        "content": "I'm interested to help with the explorer / visualizer work if no one has pick it up yet. I'm still quite new to 4844 so will be asking some newbie questions here. let me know if  anyone is interested to work on it together. Will start with focusing on getting some of these data suggested by \u003c@203220829473996800\u003e on the call:\n\u003e An explorer that just focuses on blobs, and indexes them by blob datahash, KZG commitment, slot number, tx hash, execution block hash and beacon block root would be great. \n\u003e We can then update existing explorers to just point to the blobs explorer site for any block, blob tx or blob sidecar to find the full data",
        "created_at": "2022-09-30T15:16:59.324000+00:00",
        "attachments": []
    },
    {
        "author": "protolambda",
        "category": "Cross-layer",
        "parent": "",
        "content": "Updated the EIP-4844 meta-spec with some of the newer links and added an ideas section: https://hackmd.io/@protolambda/eip4844-meta",
        "created_at": "2022-09-30T15:18:21.745000+00:00",
        "attachments": []
    },
    {
        "author": "jimmygchen",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003c@159152274659082240\u003e happy to help with documenting some issue i had with setting up the devnet as well - where's the best place for this?",
        "created_at": "2022-09-30T15:18:35.575000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e Can you explain me why you think it is worth paying 10x improvement on proof size ? I am genuinely curious. I mean, with a rollup centric Ethereum we aim to scale much more than that with rollups. In my view the settlement layer should focus to have best security, decentralization, and censorhip resistance. Of course you can tell me that more data hurts decentralization, and yes somehow I agree. But I am really surprised that we accept that easily a trusted setup to be honest. Of course I dont have all the context and don't know all the work that has been done on 4844, but still, for me this is SO important.",
        "created_at": "2022-09-30T15:19:29.384000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e what is your concern about the trusted setup? Maybe you can look more into the efforts around making this secure. I am extremely confident that we will be able to get an extremely good setup. I am much more worried about other attacks on elliptic curves and pairings than that",
        "created_at": "2022-09-30T15:22:09.020000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e And also I agree the trusted setup can be done extremely well, that it can be very open and inclusive and easy to participate and somehow censorship resistant, but unless future generations can participate to it (and IIUC this is not the case)",
        "created_at": "2022-09-30T15:22:22.740000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e it is an updatable setup. It's just powers of tau",
        "created_at": "2022-09-30T15:22:44.649000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e My concern is that the sovereignty of users, the opportunity to know with 100% certainty that Ethereum is secure",
        "created_at": "2022-09-30T15:22:48.291000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e \u003e \u003cabdelhamidbakhta\u003e  ok, then it changes a lot (re @dankrad: it is an updatable setup. It's just powers of tau)",
        "created_at": "2022-09-30T15:22:57.596000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e but is it updatable dynamically, in a permissionless manner ? just to make sure I understand the implications",
        "created_at": "2022-09-30T15:23:35.043000+00:00",
        "attachments": []
    },
    {
        "author": "inphi",
        "category": "Cross-layer",
        "parent": "",
        "content": "Thanks \u003c@466006586477772831\u003e . The devnet guide is open for edit with a hackmd account  - https://hackmd.io/@inphi/SJMXL1P6c#. We can add a \"Troubleshotting\" section here documenting the issues you ran into and what you did to resolve.",
        "created_at": "2022-09-30T15:24:11.348000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e \u003e Maybe you can look more into the efforts around making this secure: sure, I would love to. this is why I am asking resources",
        "created_at": "2022-09-30T15:24:25.939000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e https://github.com/ethereum/kzg-ceremony-specs",
        "created_at": "2022-09-30T15:24:53.496000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e Yes I have seen the specs. Well maybe we dont mean the same thing when we say updatable. I will ask more clearly just to be sure. The ceremony has a start and an end ? What happens after the end, the final output cannot be changed anymore. And as a user, let say in one year I discover Ethereum, could I do something to affect the final output of the ceremony dynamically ? I don't think this is the case. And this is my main concern",
        "created_at": "2022-09-30T15:27:33.994000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e What I am saying is that, if you are aware of the ceremony and you have the opportunity to participate to it, then that's fair. But if you were not aware of it, or did not get the chance to participate, or simply you were not born. Then you have to believe the behaviour of the past generation ? I am not comfortable with that. I mean obviously among the likely thousands of participants there will be at least one honest person, and that's enough to guaranty the security. But still, philosophically this is bad for future generations.",
        "created_at": "2022-09-30T15:30:46.141000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e It is very possible to update it after say 5 years. But no, we aren't planning a continuous update",
        "created_at": "2022-09-30T15:32:17.106000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e \u003e \u003cabdelhamidbakhta\u003e  with a hard fork then ? (re @dankrad: It is very possible to update it after say 5 years. But no, we aren't planning a continuous update)",
        "created_at": "2022-09-30T15:32:34.685000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cdankrad\u003e yes",
        "created_at": "2022-09-30T15:32:42.469000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e ok, not perfect, but way better than what I thought, thanks for the clear answer",
        "created_at": "2022-09-30T15:33:03.100000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003csauliusgr\u003e https://github.com/benjaminion/c-kzg/compare/main...dankrad:c-kzg:4844?expand=1looks like part of algos are in Python and the other part in C. Was there a particular reason for that? Or the Python code is going to be converted to C? @dankrad @xrchz",
        "created_at": "2022-09-30T15:38:22.946000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e \u003e \u003cxrchz\u003e  everything is C - only tests are Python (re @sauliusgr: https://github.com/benjaminion/c-kzg/compare/main...dankrad:c-kzg:4844?expand=1looks like part of algos are in Python and the other part in C. Was there a particular reason for that? Or the Python code is going to be converted to C? @dankrad @xrchz)",
        "created_at": "2022-09-30T15:57:32.560000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003csauliusgr\u003e hm... seems not only tests https://github.com/benjaminion/c-kzg/compare/main...dankrad:c-kzg:4844?expand=1looks#diff-92f6e64eb202e517a067db185cb6ba78e5341a6acc1eb77de202ee6b6720c39b and https://github.com/benjaminion/c-kzg/compare/main...dankrad:c-kzg:4844?expand=1looks#diff-75291c3678d3f2e88a03d721c744d7f3e10dce61cfb3439de902ed34732d0632 ?",
        "created_at": "2022-09-30T16:01:57.086000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003csauliusgr\u003e \u003e \u003csauliusgr\u003e  I was refering to bindings/python directory, files bindings/python/fft.py bindings/python/kzg_proofs.py bindings/python/multicombs.py . (re @sauliusgr: hm... seems not only tests https://github.com/benjaminion/c-kzg/compare/main...dankrad:c-kzg:4844?expand=1looks#diff-92f6e64eb202e517a067db185cb6ba78e5341a6acc1eb77de202ee6b6720c39b and https://github.com/benjaminion/c-kzg/compare/main...dankrad:c-kzg:4844?expand=1looks#diff-75291c3678d3f2e88a03d721c744d7f3e10dce61cfb3439de902ed34732d0632 ?)",
        "created_at": "2022-09-30T16:04:38.832000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e they are only used for tests - there is a python implementation whose outputs we compare the C implementation against to test the C",
        "created_at": "2022-09-30T16:05:25.051000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e also note that I'm working on a minimal for 4844 version of this under `min-src` and `min-bindings` directories. the rest of the repo (`src`, `bindings` etc.) is still there because it has more tests and benchmarks and functionality (which will be useful after 4844), but for 4844 auditing and usage I expect we'll go with the minimal version first.",
        "created_at": "2022-09-30T16:07:31.570000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003csauliusgr\u003e \u003e \u003csauliusgr\u003e  Thanks, then it's not relevant for us, we will test our lib against your C. (re @xrchz: they are only used for tests - there is a python implementation whose outputs we compare the C implementation against to test the C)",
        "created_at": "2022-09-30T16:08:45.660000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003csauliusgr\u003e \u003e \u003csauliusgr\u003e  Are you going to restructure the API for the existing c-kzg functions? (re @xrchz: also note that I'm working on a minimal for 4844 version of this under min-src and min-bindings directories. the rest of the repo (`src`, bindings etc.) is still there because it has more tests and benchmarks and functionality (which will be useful after 4844), but for 4844 auditing and usage I expect we'll go with the minimal version first.)",
        "created_at": "2022-09-30T16:09:27.648000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e no. just implementing the API in `min-src/c_kzg_4844.h`, which tries to mirror the specs. (of course anything could still change if the specs change, or if it becomes clear clients need a different API.)",
        "created_at": "2022-09-30T16:10:29.196000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e the implementation is actually done (but very under-tested - I would not be surprised if it's broken). next steps are creating bindings for higher-level languages. I am hoping to do most testing via the high-level interfaces, since that's ultimately what matters.",
        "created_at": "2022-09-30T16:12:30.566000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003csauliusgr\u003e \u003e \u003csauliusgr\u003e  we may find some bug when we will port your version to Rust https://github.com/sifraitech/kzg/ , but it's more likely that we will just port the bugs :) (re @xrchz: the implementation is actually done (but very under-tested - I would not be surprised if it's broken). next steps are creating bindings for higher-level languages. I am hoping to do most testing via the high-level interfaces, since that's ultimately what matters.)",
        "created_at": "2022-09-30T16:14:46.449000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e the good thing is that by depending on blst, what's needed extra for 4844 is \u003c1k SLOC, so auditing and porting should be a low burden",
        "created_at": "2022-09-30T16:18:50.046000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003csauliusgr\u003e \u003e \u003csauliusgr\u003e  Yea, I check your min-src/c_kzg_4844.c and it looks tiny. Are you planning to do any parallelisation at lib level (it's a bit tricky with C)? (re @xrchz: the good thing is that by depending on blst, what's needed extra for 4844 is \u003c1k SLOC, so auditing and porting should be a low burden)",
        "created_at": "2022-09-30T16:21:33.424000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cxrchz\u003e possibly - depends on benchmarking results. not initially.",
        "created_at": "2022-09-30T16:24:02.267000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "Cross-layer",
        "parent": "",
        "content": "\u003cabdelhamidbakhta\u003e wen stark prover @vbuterin ? re: your last tweet ðŸ¤£https://twitter.com/dimahledba/status/1575891204540989440",
        "created_at": "2022-09-30T16:52:55.522000+00:00",
        "attachments": []
    }
]