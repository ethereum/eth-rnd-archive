[
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e \u003c@456226577798135808\u003e The authors only considered FlyClient as a replacement for the header but it can be done also as a tx into a smart contract. \nThe important thing is that the proof gets mined on top to show linkage between it and the current hashchain.",
        "created_at": "2020-06-25T04:28:42.355000+00:00",
        "attachments": []
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "\u003e BTW, PoW verification is already probabilistic in go-ethereum, at least: https://github.com/ethereum/go-ethereum/blob/master/core/headerchain.go#L252\nYes, probabilistic check would work good on the long distance like we have on mainnet. Probably it won't take much time to download all headers and probabilistically verify Ethash wrt downloading an initial state. It worth to benchmark though. But these tasks could be paralleled, also, you can drop the headers after proving is done. \n\nOf course, we may think about more sophisticated proof techniques which could save a few gigabytes during download process but it could take more time to get there. Your solution on the other hand is the one that could get applied in a short term. If I understand it correctly.",
        "created_at": "2020-06-25T08:41:45.315000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e In its nature we create genesis every block - state root always defines a new genesis state, nothing stops us from declaring snapshot as downloadable and clients from discarding anything between snapshots. Am I missing something or we do not have to agree anything here beyond some or all clients defining the snapshot points and the network providing them as downloads? (we had this conversation on Twitter a few months back).",
        "created_at": "2020-06-25T10:36:51.094000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e So, in short - this is exactly what we do now - just because of lack of availability of snapshots we try to download this 'new genesis' dynamically via state sync.",
        "created_at": "2020-06-25T10:41:22.104000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e As for verification - either client would inject the data into the database and then verify correctness and the very state root (from what I know this process takes 2+ hours). Or we would treat this data as flat data, we would define the storage format (so we would have impose the DB structure) and start adding the new state to a fresh trie (it may be binary).",
        "created_at": "2020-06-25T10:44:07.030000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "yes, conceptually you are right. Practically, there is a big difference between snapshots that change every 15 seconds and the snapshots that change every 6 months",
        "created_at": "2020-06-25T10:50:28.836000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Yes, but what I say - this is just how warp sync works.",
        "created_at": "2020-06-25T12:07:48.627000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Already inplemented.",
        "created_at": "2020-06-25T12:08:12.266000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e They have added some optimizations to minimize the size of the snapshot - they kept it flat to be able to chunk it.",
        "created_at": "2020-06-25T12:08:45.489000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e I think the reset period was set to 30000 blocks or (an epoch) which is 5 days or so.",
        "created_at": "2020-06-25T12:09:35.207000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e The difference is basically saying that archive node are required to the state transition before that snapshot",
        "created_at": "2020-06-25T12:09:44.164000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e There is no difference between warp sync and what alexey described except for change in a single parameter",
        "created_at": "2020-06-25T12:10:19.236000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e Are not required to keep state transition before the snapshot",
        "created_at": "2020-06-25T12:10:20.053000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Parity also introduced a switch called - DownloadAncientBlocks that defines what you just mentioned",
        "created_at": "2020-06-25T12:10:52.642000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Nodes were alloeed to treat ancient blocks as a burden that is not necessary before the warp sync.",
        "created_at": "2020-06-25T12:11:11.380000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "it is implemented, but we know what the issues were (and these can be fixed). Reset period is too short. The warp file is unusable for anything but providing it to others. Which makes this too asymmetric",
        "created_at": "2020-06-25T12:11:20.234000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e The only issue is the proof of proof of work up to the snapshot, which can efficiently solve by FlyClient",
        "created_at": "2020-06-25T12:12:10.417000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Reset period is that single parameter that I talk about.",
        "created_at": "2020-06-25T12:12:15.657000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but as you may see that my proposal goes beyond the snapshotting - it blends in the elements of Stateless Ethereum to reduce the state to zero for everbody except the transaction senders",
        "created_at": "2020-06-25T12:12:19.733000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e IMHO it does nit go beyond warp sync.",
        "created_at": "2020-06-25T12:12:41.542000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but did you read it?",
        "created_at": "2020-06-25T12:13:01.898000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Yes",
        "created_at": "2020-06-25T12:13:06.625000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Let me read it once again to see if I missed something",
        "created_at": "2020-06-25T12:13:41.071000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "ok, cool, I will not try to argue about it though, it will be apparent later. Because I would like to add some more things onto it, like how it would help to make hex=\u003ebinary transition easier, the use of overlay techniques to make the warp file useful, and introduction of opt-in state rent",
        "created_at": "2020-06-25T12:15:52.357000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I never claimed that these are new ideas, what I think is novel is build onto them and combining them in a more useful way",
        "created_at": "2020-06-25T12:17:29.930000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Yesterday I did not have time and energy to make the whole \"State of the art and prior work\" exposition, sorry",
        "created_at": "2020-06-25T12:19:51.344000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e I see what you mean - the combination of this and stateless. There is one thing I wonder about - you suggest that only transaction senders and miners would need to download that state.",
        "created_at": "2020-06-25T12:22:57.759000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e It is not exhausting the users that ever truly care about having the state?",
        "created_at": "2020-06-25T12:23:16.024000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Well, this was a big argument when we wanted to introduce state rent",
        "created_at": "2020-06-25T12:23:33.325000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e *Is it not exhausting the users that ever truly care about having the state?",
        "created_at": "2020-06-25T12:24:12.457000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e What do you mean here? (re @eth1x_bridge_bot: \u003cAlexey\u003e Well, this was a big argument when we wanted to introduce state rent)",
        "created_at": "2020-06-25T12:24:31.047000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so the users who want to make tx, will need to download state every 6 months, this could be alright for some users",
        "created_at": "2020-06-25T12:24:59.565000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "for others, who are not prepared to do that, I will suggest opt-in state rent",
        "created_at": "2020-06-25T12:25:13.759000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Who are the users who do not want to create transactions neither blocks, nor download the state?",
        "created_at": "2020-06-25T12:25:45.841000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "where you pay certain amount and your account does not get removed upon re-genesis",
        "created_at": "2020-06-25T12:25:50.825000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so miners will only need to keep a tiny portion of the state, which includes their coinbase address",
        "created_at": "2020-06-25T12:26:34.859000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e state rent - we do not have any feasible solution for it, not even theorerical on, so we cannot just drop it in as a possibility.",
        "created_at": "2020-06-25T12:26:42.081000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "the opt-in state rent I am talking about is very different from state rent I was researching before",
        "created_at": "2020-06-25T12:28:48.738000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e I see. This introduces complexity but not too much as it can be settled as one off payments before the reset.",
        "created_at": "2020-06-25T12:32:03.715000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Still the way I see it you eill have no meaningful users who will not have to download the state.",
        "created_at": "2020-06-25T12:32:39.598000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Everyone else's role would be neither useful for them nor beneficial for the network?",
        "created_at": "2020-06-25T12:33:01.241000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Or you say the miner can be stateless here?",
        "created_at": "2020-06-25T12:33:21.066000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "yes, miners are almost stateless",
        "created_at": "2020-06-25T12:39:13.034000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "miners will only need to keep a tiny portion of the state, which includes their coinbase address",
        "created_at": "2020-06-25T12:47:36.635000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "+ of course, whatever state has accumulated since the last reset",
        "created_at": "2020-06-25T12:48:04.344000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e So, you see, I generally agree with the idea of having a blob of state (or whatever form of state) and simplifying the initial start to just downloading it (mentioned it many times before) and we all agree that we want stateless clients and also I think there are some neat synergies when we have both (which you described here). What I also think is that qe described the vision but we need to handle the complexity of serving the snapshots. Karalabe suggested the similar thing around two 18 months ago and we ended up being worried about how to serve that state and how to ensure it is available.",
        "created_at": "2020-06-25T12:59:07.898000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Warp sync is part of the solution (less witnesses) and it suffered deeply from the requirement to serve snapshots.",
        "created_at": "2020-06-25T13:00:02.259000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e The thing is - sometimes the hard things become very simple if we can define a simple business use case for them.",
        "created_at": "2020-06-25T13:00:43.285000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e When there is business then financing of the implementation is easier.",
        "created_at": "2020-06-25T13:00:55.458000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e If we state that serving such state will always be charged for then you wilm have someone doing it.",
        "created_at": "2020-06-25T13:01:21.051000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e But then paid for accessibility of the data limits some users.",
        "created_at": "2020-06-25T13:01:40.127000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e But the cost of symchronizing nowadays is already very high.",
        "created_at": "2020-06-25T13:01:59.153000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Much higher than paying a few dollars for download.",
        "created_at": "2020-06-25T13:02:14.014000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e And 40 GB is probably like a single day of binge watching movies on Netflix so really not much transfer for nowadays.",
        "created_at": "2020-06-25T13:02:46.038000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e The moment we do that there will be a push for increased capacity so the initial state in the future will stary growing at faster pace until this solution is no longer viable.",
        "created_at": "2020-06-25T13:03:42.228000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e But then we have increased capacity.",
        "created_at": "2020-06-25T13:03:50.124000+00:00",
        "attachments": []
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003ctkstanczak\u003e Ethereum capacity should always be seen like the Internet speed. Whatever you increase it, as long as we build a useful network, this will be swallowed and people will be hungry for more.",
        "created_at": "2020-06-25T13:04:37.440000+00:00",
        "attachments": []
    }
]