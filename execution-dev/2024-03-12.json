[
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "It must be a change into the Engine API spec if we want this feature supported by each EL. \u003c@755590043632140352\u003e do you want to raise the discussion on one of ACDE calls?",
        "created_at": "2024-03-12T06:01:41.572000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Sure, I raised it in ACDC last week, happy to come this Thursday",
        "created_at": "2024-03-12T09:19:18.799000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I think in this case it is worth making a feasibility and complexity check with EL client teams and then open a PR to the spec. Can we roll this change out without coordination? If not we could introduce `fcuV4` with mandatory support of the concurrent block building semantics",
        "created_at": "2024-03-12T10:36:29.049000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "it'll be find to roll this out without coordination cause it will only cause some bad reorging blocks in the worst case",
        "created_at": "2024-03-12T14:40:29.997000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I agree in general. But if there is an EL which does not support this feature for several months after any CL starting to rely on it, the probability to see missed slots because of that becomes quite high. Could be damaging to the reputation of that EL. Soft coordination should minimize that probability",
        "created_at": "2024-03-12T14:57:42.848000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "Btw, we can even have a Hive test checking this, I think it should be relatively easy to write",
        "created_at": "2024-03-12T14:59:39.825000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "why would it cause missed slots?",
        "created_at": "2024-03-12T15:00:24.556000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "because the proposal flow can fail if CL relies on concurrent block bulding while EL does not support this, can't it?",
        "created_at": "2024-03-12T15:04:42.513000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I don't see how, can' t speak for other CLs, but definitely not for Prysm",
        "created_at": "2024-03-12T15:05:07.583000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "it results in poor blocks AFAICS: you call first FCU, get an id, call second FCU get second id, call to getPayload from first ID, you get a poor block",
        "created_at": "2024-03-12T15:05:48.224000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "if the second FCU cancels the build process of the first one then it should fail to obtain the payload from the first one",
        "created_at": "2024-03-12T15:06:55.394000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "What does it means to cancel the build? if it doesn't continue building the block and still delivers what it had up to that point then it's fine",
        "created_at": "2024-03-12T15:08:19.539000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "i am not sure if it works this way, i.e. that the stopped build process isn't completely wasted. But that could be a workaround for quickly enabling this feature",
        "created_at": "2024-03-12T15:10:29.876000+00:00",
        "attachments": null
    }
]