[
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "I'm very much pro-stateless and I don't really see rollups as viable (as least not like loopring) because it costs a lot to enter and exit and kills composability.   I saw that there was a hard problem with stateless: making sure that tx gossip among stateless nodes only contains valid tx and not invalid. ...  Why is that hard to solve ?  Don't the Txs being gossipped always have a witness bolted onto them ?",
        "created_at": "2021-02-19T06:22:50.960000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "And so then If so, isn't it then easy to tell if the tx+witness combination is valid ? Even for a stateless node",
        "created_at": "2021-02-19T06:23:51.036000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e Don't the Txs being gossipped always have a witness bolted onto them ?\nYou need a state-full node in order to *construct* a witness.  A stateless client that cannot generate transactions is not particularly useful.",
        "created_at": "2021-02-19T06:25:17.620000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e I think I disagree:\n - I can easily ask a stateful node (Infura, Etherscan, Your friendly block proposer) to produce a witness for you\n - your local stateless node (that's now very cheap to run, and can be switched on and off any time as it can catch up with the head very quickly) serves to verify that that witness is correct",
        "created_at": "2021-02-19T11:42:10.403000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e basically, stateless nodes can fulfill the function of light clients, that we don't really have atm",
        "created_at": "2021-02-19T11:42:52.510000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yeah, I have argued that there is an intermediate solution to stateless where stateless clients need a data provider (like Infura or whatever) but they don't need to *trust* the data provider.  This is a big step up from the current situation where users either run a full node **or** they trust a data provider.",
        "created_at": "2021-02-19T11:48:29.559000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "My comment above was only intending to state that you need state to construct a witness, not that *you* had to be the one who provides that state.  I should have been more clear.  ðŸ™‚",
        "created_at": "2021-02-19T11:48:48.671000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e cool :)",
        "created_at": "2021-02-19T11:49:29.466000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "Yes exactly.  There would need to be semi-centralized very powerful servers that have lots of chaindata (like a full archive node)  in order to help clients construct witnesses.  However, these servers are not part of consensus at all and even if 99% are malicious, even 1 good one would allow everyone to construct the witnesses.   So I feel that this is totally fine.  After all, it would allow ethereum to scale up much larger with no tangible downside .  You do need state to construct a witness of course.  That doesn't answer my question as why specifically it's hard to prevent spam on the gossip layer",
        "created_at": "2021-02-19T13:35:03.281000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You shouldn't need an archive node for witness construction.  Just a full node.",
        "created_at": "2021-02-19T13:36:16.837000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e a \"state node\" would be the best name",
        "created_at": "2021-02-19T13:36:41.471000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "Oh okay that is even better. But I assume in this scenario state growth would be much larger",
        "created_at": "2021-02-19T13:36:45.129000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "Not 350gb like it is today",
        "created_at": "2021-02-19T13:36:57.211000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e state is not 350 gb today!",
        "created_at": "2021-02-19T13:37:06.721000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e that's the chain data",
        "created_at": "2021-02-19T13:37:12.068000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "State growth wouldn't increase with stateless, but *chain* growth would (since blocks would all have witnesses attached).",
        "created_at": "2021-02-19T13:37:21.811000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "I need to get my semantics right ðŸ˜… yes chain growth would be larger but nodes won't need to store all of it",
        "created_at": "2021-02-19T13:37:52.739000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "However, the blockchain itself has very different storage requirements from state, and it can (in theory) be pruned by everyone.",
        "created_at": "2021-02-19T13:37:56.279000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e which is something we should push more",
        "created_at": "2021-02-19T13:38:08.279000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e the requirement that every node be able to serve the full chain history is costly and provides little benefit IMO",
        "created_at": "2021-02-19T13:38:27.215000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e much easier to store that in IPFS for those people who really want it",
        "created_at": "2021-02-19T13:38:40.259000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e the network could make sure, say, that the last few weeks are available",
        "created_at": "2021-02-19T13:39:00.090000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e I honestly think it's fine if state nodes have to even store 1 TB of state. SSDs of that size are now cheap. But that isn't even the right metric. What we actually need to measure is how expensive it is for an attacker to grow the state so much that it will become difficult for the state nodes to keep up",
        "created_at": "2021-02-19T13:41:56.156000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "Yes and I like the idea of every node storing for example .. 5% of the chaindata at random.  That way , the more nodes, the more data redundancy.  In fact with more nodes, each node could store less % of the network to achieve the same redundancy factor for any given byte .  Theoretically allowing the state to grow larger as more nodes are added",
        "created_at": "2021-02-19T13:41:59.459000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e that's an interesting possibility",
        "created_at": "2021-02-19T13:42:22.186000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e not sure it scales well with sharding. 5% is still several shards",
        "created_at": "2021-02-19T13:42:50.795000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "What is the timeline for stateless and eth 2 ? Should we expect stateless nodes before eth 2 ?",
        "created_at": "2021-02-19T15:24:29.356000+00:00",
        "attachments": null
    },
    {
        "author": "ethereumdegen",
        "category": "general",
        "parent": "",
        "content": "Or will eth2 happen without statelessness?",
        "created_at": "2021-02-19T15:24:44.323000+00:00",
        "attachments": null
    },
    {
        "author": "chat-bridge",
        "category": "general",
        "parent": "",
        "content": "\u003cdankrad\u003e my impression is that we should merge first (executable beacon chain) and then get to full statelessness",
        "created_at": "2021-02-19T15:25:13.450000+00:00",
        "attachments": null
    }
]