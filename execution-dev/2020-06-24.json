[
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I just published the idea for \"ReGenesis\": https://ethresear.ch/t/regenesis-resetting-ethereum-to-reduce-the-burden-of-large-blockchain-and-state/7582",
        "created_at": "2020-06-24T11:04:31.424000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Hmm, not sure I understand this idea",
        "created_at": "2020-06-24T12:28:06.117000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Is it basically saying that we agree on a one-time event where all state and history before some time X is no longer considered available, and so accessing anything from there requires a witness?",
        "created_at": "2020-06-24T12:29:05.997000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "yes. And it does not have to be one-time. We can do it regularly",
        "created_at": "2020-06-24T12:29:32.395000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "That feels like it already incurs most of the complexity of stateless ethereum",
        "created_at": "2020-06-24T12:29:43.727000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "yes, but it does not requite repricing for the sake of witnesses",
        "created_at": "2020-06-24T12:30:07.933000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Actually isn't it basically the same as the \"half-stateless ethereum where witnesses don't include anything accessed in the last N blocks\" but discrete instead of continuous?",
        "created_at": "2020-06-24T12:30:21.525000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "it is very similar, yes",
        "created_at": "2020-06-24T12:30:36.271000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "eh IMO we have to do the repricing anyway because the things that are bad for witness size are also bad for DoS attacks at present",
        "created_at": "2020-06-24T12:30:46.655000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "The DoS vulnerability would be lower with a smaller state size but only logarithmically so",
        "created_at": "2020-06-24T12:31:17.322000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I don't think there will be vulnerability, because attacker will have to pay for the proofs",
        "created_at": "2020-06-24T12:31:59.139000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "no I mean DoS transactions that access a bunch of contracts that are already in the \"fresh state\"",
        "created_at": "2020-06-24T12:32:30.992000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "So same sort of thing that an attacker would do today",
        "created_at": "2020-06-24T12:32:38.987000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "oh, to expand the fresh state?",
        "created_at": "2020-06-24T12:33:23.233000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "No, to hit disk over and over again",
        "created_at": "2020-06-24T12:33:35.539000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "As fresh state would still go on disk same as today, right?",
        "created_at": "2020-06-24T12:33:42.502000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "well, if we can keep it small enough by doing regenesis regularly, we can fit in RAM ðŸ™‚",
        "created_at": "2020-06-24T12:34:09.515000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "only transaction senders will need to have full state on disk",
        "created_at": "2020-06-24T12:34:29.846000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "ok that's true ðŸ˜†",
        "created_at": "2020-06-24T12:34:54.961000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Though if you phrase it as \"we're doing partial-stateless but setting the time-to-live parameter to 1 million blocks\" then you get the same benefits and at the same time an upgrade path to even smaller state when ready",
        "created_at": "2020-06-24T12:35:47.803000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I actually think that formulating it as \"ReGenesis\" would be more understandable for most people who are not in the weeds of Stateless Ethereum research",
        "created_at": "2020-06-24T12:37:11.752000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "hmm I can see how that's better branding, though the brand would make less sense if you do it once every 6 months...",
        "created_at": "2020-06-24T12:37:51.617000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I think it will be perfect. Once people understand that we can keep doing it, the light bulb will go on ðŸ™‚",
        "created_at": "2020-06-24T12:38:40.052000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "we can even do it on a pre-programmed schedule, i.e. without explicit hard-forks each time",
        "created_at": "2020-06-24T12:41:00.040000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Then we can put various pieces of the blockchain on Bittorrent, Swarm, IPFS, etc.",
        "created_at": "2020-06-24T12:42:07.276000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I mean historical blockchain, pre last ReGenesis",
        "created_at": "2020-06-24T12:42:27.129000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Speaking of that... I'm wondering what the progress on doing that for history is (not state)",
        "created_at": "2020-06-24T12:42:33.692000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "As putting history on such networks is relatively much easier than state and there's fewer applications that need old history",
        "created_at": "2020-06-24T12:43:05.697000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Well, this ReGenesis proposal was mostly motivated by desire to solve the large blockchain problem, not so much large state problem",
        "created_at": "2020-06-24T12:44:20.647000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "The progress otherwise is hampered by the absence of some canonical way of slicing the blockchain into pieces that can be archived and hopefully immortalised",
        "created_at": "2020-06-24T12:45:42.312000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "So if that's the problem, then I think archiving old history is by far the lowest hanging fruit",
        "created_at": "2020-06-24T12:46:33.598000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Only a few applications *need* txs/logs more than 4 months old",
        "created_at": "2020-06-24T12:46:43.659000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "And it's naturally the easiest thing to put into a bittorrent type system, because the data once committeed is relatively unchangeable",
        "created_at": "2020-06-24T12:47:08.394000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "archiving the old blockchain does not work without replacing the genesis, to be honest",
        "created_at": "2020-06-24T12:47:59.106000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "what do you mean by replacing the genesis?",
        "created_at": "2020-06-24T12:48:09.606000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "lets take turbo-geth as an example. Due to its data model, the only way it can currently sync is to start from genesis, download the blockchain and replay. It can do it very efficiently. But if we take the blocks 1-10m out of the network, then suddently turbo-geth has to go to fetch them somewhere else simply to operate. A better architecture would be if any time we remove a block segment from the network, we advance the genesis, so that we do not effectively make the network dependent on whatever the dominant state snapshot sync is - which I think is a wrong step",
        "created_at": "2020-06-24T12:50:59.871000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "that is why I gave Cosmos Hub as an example in the beginning",
        "created_at": "2020-06-24T12:51:38.821000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "they remove the blockchain segment, but they advance the genesis",
        "created_at": "2020-06-24T12:51:48.150000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Can't it just fast sync the state at that point?",
        "created_at": "2020-06-24T12:52:03.083000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I guess you could also just include the state file in the client code",
        "created_at": "2020-06-24T12:52:11.495000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "no, we can't. Fast sync is incompatible with our data model",
        "created_at": "2020-06-24T12:52:49.588000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and I think we must not make it mandatory",
        "created_at": "2020-06-24T12:53:00.540000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "because it disallows very serious optimisations",
        "created_at": "2020-06-24T12:53:10.503000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "So if you \"make that state the genesis state\", that in practice entails including it as part of the client download, right?",
        "created_at": "2020-06-24T12:53:27.217000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Or I suppose you could have a bittorrent for it or whatever",
        "created_at": "2020-06-24T12:53:37.580000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "well, naively yes. That is why I mention in my post that downloading 40Gb would also be bad experience",
        "created_at": "2020-06-24T12:54:05.580000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and to solve this problem, I introduce the transaction witnesses into the system",
        "created_at": "2020-06-24T12:54:22.282000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so you hard-code only whatever is the state root of the latest regenesis",
        "created_at": "2020-06-24T12:54:49.734000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and yes, you can download the state from bittorrent or fast sync, or whatever",
        "created_at": "2020-06-24T12:55:42.630000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but it won't be changing every 15 seconds",
        "created_at": "2020-06-24T12:55:56.225000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "it will be stable for 6 months, for example",
        "created_at": "2020-06-24T12:56:05.459000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and if every client can cope with replaying 6 months of blocks, then we don't need super-duper sync algorithms for most of our activities",
        "created_at": "2020-06-24T12:56:37.211000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "thank you for this discussion, BTW, really helpful",
        "created_at": "2020-06-24T12:58:07.624000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "\u003e well, naively yes. That is why I mention in my post that downloading 40Gb would also be bad experience",
        "created_at": "2020-06-24T13:08:24.430000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Right, but I feel like going from 200 GB to 40 GB gives 4/5 the benefit for 1/5 the effort",
        "created_at": "2020-06-24T13:08:43.224000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "So we should \"just do it\"",
        "created_at": "2020-06-24T13:09:29.305000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "And of course at the same time keep thinking about how to cut down the 40",
        "created_at": "2020-06-24T13:09:41.625000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "by \"just do it\", you mean the agreement (without even hard forks) that after every 1m blocks will be producing state snapshot + blockchain files and replicating it all over the internet, and stop serving them as part of the sync?",
        "created_at": "2020-06-24T13:11:14.757000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "perhaps stop serving them at the block X*1m + some time ðŸ™‚",
        "created_at": "2020-06-24T13:11:49.084000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e You probably want a proof of proof of work alongside the snapshot",
        "created_at": "2020-06-24T13:12:43.674000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Oh yes, what are your ideas on that?",
        "created_at": "2020-06-24T13:14:35.440000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "\u003e by \"just do it\", you mean the agreement (without even hard forks) that after every 1m blocks will be producing state snapshot + blockchain files and replicating it all over the internet, and stop serving them as part of the sync?\n\nYeah",
        "created_at": "2020-06-24T13:14:52.019000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "\u003e Oh yes, what are your ideas on that?\nProbably do it in the same way as it is done by fast sync by verifying the chain of headers up to the genesis? A million of headers is about 1mb worth of data. I believe we can manage to store them alongside with reGenesis state.",
        "created_at": "2020-06-24T14:37:52.382000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e Have you look into Flyclient by Bunz and al.? https://eprint.iacr.org/2019/226.pdf\nAFAIK, it is planned to be implemented in Zcash (https://electriccoin.co/blog/explaining-flyclient/ and https://zips.z.cash/zip-0221)",
        "created_at": "2020-06-24T14:59:02.872000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e I have started a small implementation to create an hybrid mode where you would beam sync from the tip to the Flyclient proof to be fully fast synced. Very similar to what you described.",
        "created_at": "2020-06-24T15:02:03.278000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "I am sorry, 1 million headers is about 400Mb",
        "created_at": "2020-06-24T15:02:50.034000+00:00",
        "attachments": null
    },
    {
        "author": "m.kalinin",
        "category": "general",
        "parent": "",
        "content": "but anyway this straightforward solution should fit good",
        "created_at": "2020-06-24T15:13:26.426000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "FlyClient: I remember trying to look into it before, and my question is (perhaps I just need to look into the paper again) - it does seem to require adding MMR commitments into the headers, right?",
        "created_at": "2020-06-24T20:10:33.713000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "BTW, PoW verification is already probabilistic in go-ethereum, at least: https://github.com/ethereum/go-ethereum/blob/master/core/headerchain.go#L252",
        "created_at": "2020-06-24T20:13:17.525000+00:00",
        "attachments": null
    }
]