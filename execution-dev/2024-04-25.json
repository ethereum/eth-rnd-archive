[
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e hasn't this https://github.com/ethereum/EIPs/pull/8406 just replace the exits?",
        "created_at": "2024-04-25T09:32:13.032000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "exits seem to be totally replaced: https://eips.ethereum.org/EIPS/eip-7002",
        "created_at": "2024-04-25T09:33:06.534000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "it would be nice just to have a separate EIP and contract for partial withdrawals",
        "created_at": "2024-04-25T09:34:05.115000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "would also prefer to keep things the old way in the execution payload as objects rather than serialized data",
        "created_at": "2024-04-25T09:37:10.574000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "0b4a75e1d73f24b61ad4675b49c45c3d53d9ddf852b81f9515e3739e047b6887"
            }
        ]
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "I think based on this spec https://discordapp.com/channels/595666850260713488/892088344438255616/1231804614190432316 Deposits and WithdrawalRequests are objects in ExecutionPayload",
        "created_at": "2024-04-25T09:50:21.822000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes, and exits too right?",
        "created_at": "2024-04-25T11:39:46.724000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "yeah WithdrawalRequests = exists and partial withdrawals as I understand",
        "created_at": "2024-04-25T12:14:43.860000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "i think the exits handling content has been totally replaced in EIP by mistake most probably",
        "created_at": "2024-04-25T12:19:13.549000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "or is the exit now being triggered by the withdrawal request itself?",
        "created_at": "2024-04-25T12:21:04.807000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "(can't make this out from the EIP)",
        "created_at": "2024-04-25T12:21:25.165000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "I would ideally prefer the exit EIP + contract + handling to be separate from the withdrawals and not mixin the two operations inside the same EIP+contract",
        "created_at": "2024-04-25T12:22:51.343000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "The contract still handles exits! If the WithdrawalRequest amount is 0 then it will be considered an exit. We should discuss on acd or at nyota if people are okay with combining these operations. I think I'm okay with it.\n\nhttps://github.com/ethereum/consensus-specs/blob/dev/specs/electra/beacon-chain.md#misc",
        "created_at": "2024-04-25T12:50:32.186000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "we (lodestar) are of the opinion that exits and partial exits should be separate contracts (and hence separate lisits with their own limits etc)",
        "created_at": "2024-04-25T14:02:49.656000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "what is the reasoning? amount == 0 means full exit seems pretty reasonable?",
        "created_at": "2024-04-25T14:03:11.565000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "main reasoning is someone mistaking amount =0 in transaction as 0 is default, also separate limits so that exits fees are not disturbed by withdrawal txs",
        "created_at": "2024-04-25T14:04:08.556000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "i don't think you can mistake amount = 0, because you need to provide the 8 bytes for 0",
        "created_at": "2024-04-25T14:05:05.823000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "stupider things than this have happened lol",
        "created_at": "2024-04-25T14:05:31.279000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "also one more thing EIP says:\n`Will show up in ExecutionPayload as an SSZ List bound by length MAX_WITHDRAWAL_REQUESTS_PER_BLOCK`\n\nthis means the data will come serialized?",
        "created_at": "2024-04-25T14:06:32.867000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "this is a concern w/ the design, e.g. default \"zero values\" in Go are easy to make",
        "created_at": "2024-04-25T14:06:45.743000+00:00",
        "attachments": null
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "and would accidentally exit a validator lol",
        "created_at": "2024-04-25T14:06:53.951000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "you can say that about any consensus object, it's not special to 7002",
        "created_at": "2024-04-25T14:14:19.426000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "it's an SSZ list of SSZ objects, so it won't be opaque",
        "created_at": "2024-04-25T14:14:47.695000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "just to clarify: ssz json? since current way data comes is not ssz json (with DATA and QUANTITY)",
        "created_at": "2024-04-25T14:15:57.522000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "what you were referring is the CL spec yeah?",
        "created_at": "2024-04-25T14:21:47.472000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "`ExecutionPayloadV4` is defined in json-rpc style",
        "created_at": "2024-04-25T14:22:00.658000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "\u003c@543900561460822016\u003e just to be clear, because I am confused a little bit, no ssz on EL side? ðŸ™‚",
        "created_at": "2024-04-25T14:23:01.779000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "no SSZ on EL !",
        "created_at": "2024-04-25T14:23:19.455000+00:00",
        "attachments": null
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "I think \u003c@792822129019584562\u003e you were confused by this https://eips.ethereum.org/EIPS/eip-7002#consensus-layer but my understanding was that it describes CL side, not engine api",
        "created_at": "2024-04-25T14:24:18.723000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "since the EIP specially mentioned that  \"Will show up in ExecutionPayload as an SSZ List bound by length MAX_WITHDRAWAL_REQUESTS_PER_BLOCK\", it was sort of confusing.",
        "created_at": "2024-04-25T14:24:47.281000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yea thanks for the clarification \u003c@543900561460822016\u003e",
        "created_at": "2024-04-25T14:25:04.999000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "we (lodestar + ethereumjs as well) would still like to push for this change, any other teams have any opinions regarding this?",
        "created_at": "2024-04-25T15:26:47.083000+00:00",
        "attachments": null
    },
    {
        "author": "nordbjerg",
        "category": "general",
        "parent": "",
        "content": "is there a specific reason that EIP-2935 does not reuse the approach from EIP-4788? it feels odd to have to reach into state and set storage slots, especially when we already have a pre-existing approach. on top of that, I think the current version of EIP-2935 clashes with state clearing since the account is considered empty per EIP-161",
        "created_at": "2024-04-25T15:27:13.083000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "i'm lightly against, but certainly wouldn't block if it is the consensus",
        "created_at": "2024-04-25T15:27:36.746000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "you want to set hashes via system call?",
        "created_at": "2024-04-25T15:28:36.300000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "obv i do think we should retain the current behavior for devnet-0 and discuss how to change beyond that",
        "created_at": "2024-04-25T15:28:39.886000+00:00",
        "attachments": null
    },
    {
        "author": "nordbjerg",
        "category": "general",
        "parent": "",
        "content": "yes, similar to eip-4788",
        "created_at": "2024-04-25T15:29:17.397000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "the only issue i forsee is on forkblock, we fill \"additional\" 8191 ancestor hashes as well, for other blocks we can do the operation",
        "created_at": "2024-04-25T15:30:06.100000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "or for the forkblock we can do an input of 8192*32 bytes (so send all hashes as an input) and basis size we can branch out to the contract segment that writes all 8192 hashes",
        "created_at": "2024-04-25T15:31:17.490000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "any other reasons \u003c@353136597522448385\u003e you have why we don't want `set` through evm system execution?",
        "created_at": "2024-04-25T15:32:11.277000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "what is the reason we need to fill all ancestors out at once?",
        "created_at": "2024-04-25T15:33:14.905000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "one reason that I understand is that code chunks will need to be added to the witnesses for stateless client",
        "created_at": "2024-04-25T15:33:17.874000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "so that blockhash can be resolved from the state right starting from the fork block",
        "created_at": "2024-04-25T15:33:42.288000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "it simplifies things for stateless clients",
        "created_at": "2024-04-25T15:34:01.443000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "but we don't need that functionality until verkle",
        "created_at": "2024-04-25T15:34:05.407000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "but its cleaner this way, how about sending 8192*32 bytes input in system call for forkblock?",
        "created_at": "2024-04-25T15:35:27.253000+00:00",
        "attachments": null
    },
    {
        "author": "nordbjerg",
        "category": "general",
        "parent": "",
        "content": "i'd argue the opposite, it's less clean because we need to introduce special handling to detect if we are *at* the fork block, not just if the fork is active",
        "created_at": "2024-04-25T15:35:55.168000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "was going to say the same ^",
        "created_at": "2024-04-25T15:36:06.435000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "you will need forkblock height detection to decide how to resolve blockhash otherwise",
        "created_at": "2024-04-25T15:36:28.048000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "it seems less cleaner imo",
        "created_at": "2024-04-25T15:36:51.046000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "the blockhash resolution would just happen in the verkle fork",
        "created_at": "2024-04-25T15:37:06.079000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "and it would be simpler bc the state would have already been filled out by normal operations",
        "created_at": "2024-04-25T15:37:21.663000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "you mean the clients will continue using old ways to resolve blockhash till verkle?",
        "created_at": "2024-04-25T15:37:32.298000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2024-04-25T15:37:46.001000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "i didn't realize it was specified to use the state",
        "created_at": "2024-04-25T15:37:57.176000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "yes 2935 specifies to use state to resolve",
        "created_at": "2024-04-25T15:38:18.192000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "yep i see that now",
        "created_at": "2024-04-25T15:38:30.650000+00:00",
        "attachments": null
    },
    {
        "author": "nordbjerg",
        "category": "general",
        "parent": "",
        "content": "generally not entirely sure why 2935 is in pectra if its potential is not unlocked until verkle, am i missing something?",
        "created_at": "2024-04-25T15:38:53.453000+00:00",
        "attachments": null
    },
    {
        "author": "nordbjerg",
        "category": "general",
        "parent": "",
        "content": "good pt",
        "created_at": "2024-04-25T15:44:01.233000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "i feel like you need this code path whether it is for prague or osaka",
        "created_at": "2024-04-25T15:44:41.572000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "so it isn't increased complexity",
        "created_at": "2024-04-25T15:44:47.197000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "but if it is prague you _do_ need the code to seed 8192 hashes",
        "created_at": "2024-04-25T15:45:04.166000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "you mean via evm?",
        "created_at": "2024-04-25T15:45:38.795000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "either evm or in client code",
        "created_at": "2024-04-25T15:46:12.465000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "I would like to know why \u003c@353136597522448385\u003e thinks that doing `set` via evm isn't a good thing since he believes we should also remove that from 4788\n\nbasis that we can decide if we can do it via evm using `8192*32` bytes input on fork block",
        "created_at": "2024-04-25T15:47:50.787000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "i think he doesn't like the witness size?",
        "created_at": "2024-04-25T15:48:12.182000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "i don't see a reason to seed all 8192 at all in prague whether it is evm or client code",
        "created_at": "2024-04-25T15:48:41+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "witness for state would be same, all 8192 hashes would show on forkblock if the forkblock is verkle which it won't be anymore the case",
        "created_at": "2024-04-25T15:49:13.147000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "im talking about the contract code",
        "created_at": "2024-04-25T15:49:22.687000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "the set function would add to the witness",
        "created_at": "2024-04-25T15:49:28.913000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "code chunks? yea that could be a bit of issue, each block might add one or two code chunks of witnesses",
        "created_at": "2024-04-25T15:50:21.430000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "height detection will need to be done since fork for transition, else the what fork is currently is good enough for transition logic if we seed 8192",
        "created_at": "2024-04-25T15:51:56.439000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "stateless clients would need to seed the 2935 block number in their config for this to work",
        "created_at": "2024-04-25T15:52:45.027000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "even if 2935 is in prague before osaka(verkle)",
        "created_at": "2024-04-25T15:53:00.990000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "for mainnet and testnets it won't be an issue, for devnets stateless clients could care less?",
        "created_at": "2024-04-25T15:54:10.344000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "sorry not sure if i follow. the way i see it:\n\nIf 2935 does not pre-seed the hashes in prague and does not use the state for BLOCKHASH, in the verkle upgrade we can switch BLOCKHASH to use the state. There is no seeding that needs to be done. The code to switch BLOCKHASH is the same except it will activate based on osaka instead of prague. This allows us to not having any seeding related code, leading to a simpler impl",
        "created_at": "2024-04-25T16:16:43.953000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "^^ yes i agree apart from the devnets which might have some transitioning logic, but may be transitions there won't be that relevant for the stateless clients there",
        "created_at": "2024-04-25T16:20:18.835000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "lets hear Guilluame's logic regarding not doing the set system call, else i am good with adding a set and not seeding",
        "created_at": "2024-04-25T16:21:31.178000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "for me also set and not seeding are different debates. we could have set funciton and no seeding or also no set function and no seeding. I feel more strongly about no seeding than no set",
        "created_at": "2024-04-25T16:22:59.124000+00:00",
        "attachments": null
    },
    {
        "author": "g11tech",
        "category": "general",
        "parent": "",
        "content": "I am ok with not seeding as height detection won't be required for stateless clients since 2935 is going in prague, seeding was primarily done for benefit of stateless clients with 2935 activated in verkle since stateless clients wouldn't have a way of knowing the fork block number without someone supplying that info via hardfork config",
        "created_at": "2024-04-25T16:31:37.568000+00:00",
        "attachments": null
    }
]