[
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "Hi guys\n\nI'm looking at a simple option to give validators frontrunning resistance after the merge. Looking at transaction.go in Geth, if I change this:\n\n`func (s TxByPriceAndTime) Less(i, j int) bool {\n    // If the prices are equal, use the time the transaction was first seen for\n    // deterministic sorting\n    cmp := s[i].minerFee.Cmp(s[j].minerFee)\n    if cmp == 0 {\n        return s[i].tx.time.Before(s[j].tx.time)\n    }\n    return cmp \u003e 0\n}`\n\nto this...\n\n`\nfunc (s TxByPriceAndTime) Less(i, j int) bool {\n    // use the time the transaction was first seen for\n    // deterministic sorting\n    return s[i].tx.time.Before(s[j].tx.time)\n}\n`\n\nWill that result in my validator writing blocks in time order? (assuming I'm not running mev-boost)",
        "created_at": "2022-09-02T11:30:50.884000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Yes, but you will not get any of priority fees",
        "created_at": "2022-09-02T12:00:31.028000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "Thank you for confirming \u003c@354681205842771973\u003e   üôè   yes I understand the validators running it will take a hit on earnings",
        "created_at": "2022-09-02T12:08:29.790000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "A huge hit*",
        "created_at": "2022-09-02T12:08:42.537000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "True, but they'll be guaranteed a place in heaven",
        "created_at": "2022-09-02T12:16:50.807000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Not the case since malicious actor could abuse your altruism and make you validate all their transactions for free",
        "created_at": "2022-09-02T12:19:02.678000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "So at the end this even harms the network, as throughput gets smaller.",
        "created_at": "2022-09-02T12:19:37.786000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "Won't they still have to pay base fee?",
        "created_at": "2022-09-02T12:21:51.404000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Free in terms of the priority fee",
        "created_at": "2022-09-02T12:22:05.964000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "And if exploited correctly, they can still frontrun the transactions, but this time for no cost",
        "created_at": "2022-09-02T12:22:29.534000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "Yeah but if throughput goes up, then base fee goes up with it",
        "created_at": "2022-09-02T12:22:29.792000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "By throughput I mean the number of transactions other users can put in to blocks",
        "created_at": "2022-09-02T12:22:59.437000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "If your blocks are 100% filled by a malicious actor, no more transactions can fit in",
        "created_at": "2022-09-02T12:23:41.234000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Other than adding extra ones above 50%, but that would drive the base fee up which would cause the same result",
        "created_at": "2022-09-02T12:23:56.306000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "= less transactions per second",
        "created_at": "2022-09-02T12:24:00.873000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "= higher fees",
        "created_at": "2022-09-02T12:24:05.404000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "I don't get that. If all validators time ordered and no-one paid priority fees (not that I think this is likely), base fees would go up until equilibrium was achieved, but with less frontrunning/censorship",
        "created_at": "2022-09-02T12:25:48.668000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "You can frontrun within network latency yes",
        "created_at": "2022-09-02T12:26:11.314000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "There is even more frontrunning/censorship, as malicious actor could exploit this and make their transactions going to your node faster than others",
        "created_at": "2022-09-02T12:26:28.818000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "Yes, because the mempool is not encrypted which is a big problem for Ethereum whatever ordering is used. But a big difference here is that the transactor is frontrunning in this case, not the validator",
        "created_at": "2022-09-02T12:28:51.420000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "We do not need a further discussion, I provided you with security holes in this approach. It is your node, your stake - you can experiment with whatever you want.",
        "created_at": "2022-09-02T12:29:49.813000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "Ok sure. Thanks for your time. I'll just point out that because frontrunning is limited to network latency in this case, this will reduce a lot of the frontrunning opportunities available",
        "created_at": "2022-09-02T12:34:05.837000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "It will increase the amount of spam on the network though",
        "created_at": "2022-09-02T12:35:23.740000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "If everyone ran it it would. Again, this would be mitigated by mempool encrpytion. Then you'd get some initial spam between big extractors competing over cross chain arbitrage. Then whoever has the best low latency private network will ultimately dominate and the others will give up. Validators would do the onchain arbs themselves for higher profit",
        "created_at": "2022-09-02T12:38:55.697000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "Actually I take that back, strictly time ordering validators wouldn't extract themselves",
        "created_at": "2022-09-02T12:51:38.708000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "It wouldn‚Äôt be as it is impossible to make txpool not public",
        "created_at": "2022-09-02T13:36:03.592000+00:00",
        "attachments": []
    },
    {
        "author": "pmcgoohan",
        "category": "general",
        "parent": "",
        "content": "I mean something like this https://ethresear.ch/t/shutterized-beacon-chain/12249",
        "created_at": "2022-09-02T14:50:41.904000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Interesting, but so far based on what I read it seems it makes things more centralized (not sure by how much though) and complex of course",
        "created_at": "2022-09-02T15:36:07.107000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "\u003e keys for encryption and decryption are provided by a group of special nodes called keypers",
        "created_at": "2022-09-02T15:37:43.946000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "Much more centralized.",
        "created_at": "2022-09-02T15:38:03.501000+00:00",
        "attachments": []
    },
    {
        "author": "rufusg.",
        "category": "general",
        "parent": "",
        "content": "I wouldn‚Äôt say it‚Äôs more centralized(vs centralized block builders). More of a change in centralization. The keypers are selected randomly from the validator set.",
        "created_at": "2022-09-02T16:18:15.479000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "TBH I consider centralized block builders as a huge threat to decentralization",
        "created_at": "2022-09-02T16:18:39.904000+00:00",
        "attachments": []
    },
    {
        "author": "alexssd7fp",
        "category": "general",
        "parent": "",
        "content": "I do not support having either of those.",
        "created_at": "2022-09-02T16:18:55.443000+00:00",
        "attachments": []
    },
    {
        "author": "rufusg.",
        "category": "general",
        "parent": "",
        "content": "I hope this idea gains traction. It is going to get harder and harder to implement as more ecosystem participants benefit from the existing MEV infrastructure that is getting built into the system and won‚Äôt want to give up those profits they are extracting from users.",
        "created_at": "2022-09-02T16:22:36.826000+00:00",
        "attachments": []
    },
    {
        "author": "treyzania",
        "category": "general",
        "parent": "",
        "content": "I don't know if it's actually a strong centralization pressure but, correct me if I'm wrong, this adds a lot of latency to transaction execution",
        "created_at": "2022-09-02T17:14:35.542000+00:00",
        "attachments": []
    },
    {
        "author": "treyzania",
        "category": "general",
        "parent": "",
        "content": "Might be interesting to see this applied in a rollup",
        "created_at": "2022-09-02T17:15:32.160000+00:00",
        "attachments": []
    }
]