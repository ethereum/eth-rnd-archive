[
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "bumping this again for EL teams -- wdyt about combining 6110 deposits, 7002 exits, and (eventually) consolidations into a new object \"Request\" which is merkleized in the header similarly to 2718 transactions",
        "created_at": "2024-04-17T19:29:24.762000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "instead of 3 new header / body fields we'll only need one, and that will be future compatible with any future EL-\u003eCL messages",
        "created_at": "2024-04-17T19:30:19.566000+00:00",
        "attachments": []
    },
    {
        "author": "smartprogrammer",
        "category": "general",
        "parent": "",
        "content": "i think combining exits and consilidations makes sense. not sure about the deposits tbh",
        "created_at": "2024-04-17T19:30:40.282000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "why are deposits special?",
        "created_at": "2024-04-17T19:31:08.987000+00:00",
        "attachments": []
    },
    {
        "author": "smartprogrammer",
        "category": "general",
        "parent": "",
        "content": "in deposits there is amount, in exts and consilidations there isnt",
        "created_at": "2024-04-17T19:32:06.069000+00:00",
        "attachments": []
    },
    {
        "author": "smartprogrammer",
        "category": "general",
        "parent": "",
        "content": "maybe it would make sense to merge deposits and partial withdrawals",
        "created_at": "2024-04-17T19:32:19.898000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "sorry by exits i mean partial withdrawals. 7002 has already combined exits / partial withdrawals",
        "created_at": "2024-04-17T19:32:44.187000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "the serialization is\n\n6110: `type byte || rlp([pubkey, withdrawal_cred, amt, sig, index])`\n7002: `type byte || rlp([source, pubkey, amt])`",
        "created_at": "2024-04-17T19:34:47.909000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "so i'm not sure why it's an important distinction deposits have amount and other types don't? the type byte will be used to parse different objects, just like txs. e.g. 1559 txs obviously have different fee fields than legacy",
        "created_at": "2024-04-17T19:35:58.099000+00:00",
        "attachments": []
    },
    {
        "author": "smartprogrammer",
        "category": "general",
        "parent": "",
        "content": "i see, yeah looks fine. will check with the team as well to confirm if anyone else has a concern",
        "created_at": "2024-04-17T19:56:40.919000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "thank you",
        "created_at": "2024-04-17T19:56:55.762000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "can we make the type as an element of the rlp list instead",
        "created_at": "2024-04-17T21:02:33.246000+00:00",
        "attachments": []
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "I really like the idea, but knowing that devnets are coming soon, it would be great to achieve async-consensus ASAP and agree on the details to know what we should implement.\n\n1. Do you think we should add a \"Requests\" field in the execution payload? Or keep it separate: exits, deposits, etc.?\n2. As I understood, the enum will look like this:\nType 0 - deposits 6110\n`0 || rlp([pubkey, withdrawal_credentials, amount, signature, index])`\nType 1 - exits 7002 and partial withdrawals \n`1 || rlp([source, source_pubkey, amount])`\nType 2 - consolidations\n`2 || rlp([source, source_pubkey, destination_pubkey])`\n\n3. Do we need to have exits and partial withdrawals separated?",
        "created_at": "2024-04-17T21:03:24.707000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "well hmm",
        "created_at": "2024-04-17T21:03:30.452000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "i guess inside the list doesn't make sense",
        "created_at": "2024-04-17T21:03:43.647000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "encoding is just generally painful",
        "created_at": "2024-04-17T21:05:00.959000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "yes agree i would like specs to be finalized by monday next week for devnet-0\n\nright now 7002 combines exits + partial withdrawals in the same type",
        "created_at": "2024-04-17T21:05:57.993000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "which part? this is the same format as txs",
        "created_at": "2024-04-17T21:06:12.922000+00:00",
        "attachments": []
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "I was thinking putting the request type inside the list would make implementing encoding easier, but putting the type inside the list doesn't make sense, because the 2718 style type byte is the only way to unambiguously encode an enum like request that might have multiple variants",
        "created_at": "2024-04-17T21:08:00.385000+00:00",
        "attachments": []
    },
    {
        "author": "marekm3498",
        "category": "general",
        "parent": "",
        "content": "What about Engine API (newPayload -\u003e executionPayload)? Perhaps, it makes sense to have it \"merged\" to one field as well, but then we need to ping CL devs",
        "created_at": "2024-04-17T21:10:06.875000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "I can ask on the call tomorrow. I was expecting the engine api to extend the execution payload with \"Requests\", a list of \"Request\" objects. Each would have a \"type\" field and they could decode based on that. This is also similar to how we do txs over RPC today",
        "created_at": "2024-04-17T21:11:29.904000+00:00",
        "attachments": []
    }
]