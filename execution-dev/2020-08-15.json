[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!443823988561412097\u003e Have you compared against the results that other clients have received?",
        "created_at": "2020-08-15T08:30:42.452000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You may want to consider not using `number` and instead using `bigint` so you don't end up with rounding errors.",
        "created_at": "2020-08-15T08:31:28.901000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Looks like you use `bignumber.js`, I recommend using JavaScript's native `bigint` instead (notably easier to work with, and you don't need to support old runtimes for this).",
        "created_at": "2020-08-15T08:33:35.295000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You can remove `genesisSupply` from `calculateBlockRewardSupply`, all you do is log it and it complicates things marginally to have that extra parameter and it isn't needed for anything so a simpler API surface is better.",
        "created_at": "2020-08-15T08:34:29.922000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Consider leaning on TypeScript's type inference more rather than having explicit types everywhere.  Explicit types can lead to some edge case type problems.",
        "created_at": "2020-08-15T08:35:31.673000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The general gist of the algorithm looks right at a glance.  If you get similar numbers to others then I would guess that the error is from you using floating point numbers instead of integers.",
        "created_at": "2020-08-15T08:38:08.878000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "\u003e The general gist of the algorithm looks right at a glance.  If you get similar numbers to others then I would guess that the error is from you using floating point numbers instead of integers.\n\u003c@!301186049323958275\u003e Thanks for looking it over. I'm using BigNumber.js for all operations that need it if I'm not mistaken",
        "created_at": "2020-08-15T16:34:20.746000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "\u003e \u003c@!301186049323958275\u003e Can I use the native `bigint` for division? I've attempted to use `bigint` for Ethereum calculations in the past, but I think I ran into problems",
        "created_at": "2020-08-15T16:38:57.120000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yeah.  I use it for everything in all of my Ethereum related tools.",
        "created_at": "2020-08-15T16:39:16.041000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "Cool",
        "created_at": "2020-08-15T16:40:13.032000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "Also, what problems are you referring to with type inference? I prefer to explicitly type everything so that it is self-documenting, I'm not sure I see how that could lead to type problems",
        "created_at": "2020-08-15T16:41:05.813000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It can type widen, which can *sometimes* lead to incompatibilities.  Ideally, anyone reading your code will do so in a TS aware editor in which case implicit types are also documenting.",
        "created_at": "2020-08-15T17:03:30.298000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "```ts\ndeclare function eatFruit(fruit: 'apple' | 'banana'): void;\nconst apple: string = 'apple'\nconst banana = 'banana'\neatFruit(apple) // error\neatFruit(banana) // ok\n```",
        "created_at": "2020-08-15T17:04:10.441000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It usually is just annoying until you introduce generics, then it can sometimes become unsound (though that is rare).",
        "created_at": "2020-08-15T17:05:29.626000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "Interesting, thanks for the tip",
        "created_at": "2020-08-15T17:06:29.539000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "One more thing, if you happen to know, is this where geth calculates its block rewards? https://github.com/openethereum/openethereum/blob/master/ethcore/engines/ethash/src/lib.rs#L248",
        "created_at": "2020-08-15T17:07:08.561000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "I just want to make sure I have that location exactly correct",
        "created_at": "2020-08-15T17:07:19.827000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Sadly, I don't know Go (or Geth for that matter) well enough to say with any confidence.",
        "created_at": "2020-08-15T17:08:28.061000+00:00",
        "attachments": []
    },
    {
        "author": "lastmjs",
        "category": "general",
        "parent": "",
        "content": "No problem, thanks again!",
        "created_at": "2020-08-15T17:08:37.338000+00:00",
        "attachments": []
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It does appear so, down on line 291.",
        "created_at": "2020-08-15T17:08:44.456000+00:00",
        "attachments": []
    }
]