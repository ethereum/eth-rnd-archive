[
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I'm working on the RFP right now, I think it's going to actually be 2, one for State Expiry, and one for the extension of addresses to 32 bytes.  I think they can be teased apart.",
        "created_at": "2021-04-08T15:15:08.111000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "agreed! is there an order that makes sense?",
        "created_at": "2021-04-08T16:00:08.645000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "general",
        "parent": "",
        "content": "another thing that may be worth exploring is the ecosystems of other chains that have researchers that have already explored alternate forms of state management (state rent or otherwise)",
        "created_at": "2021-04-08T16:12:19.105000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "Are there chains with proper state rent/management approaches?",
        "created_at": "2021-04-08T16:37:08.319000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "The hard part for Ethereum hasn't been coming up with a model for rent, but rather, finding one that we can actually implement without fundamentally changing the smart contract paradigm as well as breaking everything already deployed on mainnet.  Not to discourage looking at other models, but the complexity has arisen because we're adding the mechanism to an already running chain.",
        "created_at": "2021-04-08T16:56:58.053000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "general",
        "parent": "",
        "content": "this is what prompted my links in \u003c#796057759858425866\u003e - i seem to remember something like NANO have state rent back in the day, but not sure if they still do. \n\nalso on the list is solana and Near apparently",
        "created_at": "2021-04-08T18:47:17.528000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "general",
        "parent": "",
        "content": "and yes, goes without saying that grandfathering in existing state paradigms is the hard part",
        "created_at": "2021-04-08T18:47:50.648000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "general",
        "parent": "",
        "content": "i remembered Alexey's months (years?) of research",
        "created_at": "2021-04-08T18:48:18.660000+00:00",
        "attachments": null
    },
    {
        "author": "trent_vanepps",
        "category": "general",
        "parent": "",
        "content": "\u003c@!364458974906548225\u003e have you seen this one?\n\nhttps://ethresear.ch/t/a-relatively-simple-and-practical-storage-fee-state-rent-model/8655",
        "created_at": "2021-04-08T19:57:28.447000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "This is definitely one of the better ones, though IMO it's really valuable to maintain the property of treating the state tree as a pure key:value map (or list of key:value maps) and this approach doesn't",
        "created_at": "2021-04-08T20:00:34.869000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I feel like the various expiry models are all fine in principle,  and the key difference between them is quite subtle",
        "created_at": "2021-04-08T20:01:51.511000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Basically, if you want to *create* new contracts or fill new storage slots, you need to have space within which to do that",
        "created_at": "2021-04-08T20:02:09.417000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "And to be able to do that without witnesses, that space needs to be guaranteed to not have any expired objects in it that could conflict with whatever you create",
        "created_at": "2021-04-08T20:02:42.856000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "The difference is basically where that space is",
        "created_at": "2021-04-08T20:03:20.305000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "I'm sure there is stuff hiding under the hood, but currently the *only* thing that I wish we could figure out how to do cleanly would be to remove the epochs and have expiration be continuous..  Otherwise the current proposed scheme seems to be quite appealing",
        "created_at": "2021-04-08T20:05:06.218000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "What don't you like about epochs?",
        "created_at": "2021-04-08T20:05:33.881000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "(I *used to* think that, but now I'm more leaning on the side of epochs just being simpler)",
        "created_at": "2021-04-08T20:05:47.540000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "The only major shifts in the protocol are the address size extension, and the inclusion of witnesses in transactions for the purpose of re-activating cold state",
        "created_at": "2021-04-08T20:05:59.266000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "It isn't that I don't like them, I agree with you on liking their simplicity.  It's that a continuous model that didn't have significant complexity trade-offs would further \"smooth-the-curve\" on how much state a client has on disk.",
        "created_at": "2021-04-08T20:06:53.912000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "Currently epoch boundaries will have \"churn\" which is probably going to be fine, but it'd be neat/nice if they didn't",
        "created_at": "2021-04-08T20:07:24.764000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I do think it's much less bad when it's bouncing between x and 2x than when it was going to bounce between 0 and x",
        "created_at": "2021-04-08T20:07:59.218000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "and in theory, smoothing out that churn doesn't require a continuous model, if X-2X is still significant we can turn the knob to be 3x-4x and retain more epochs but make them smaller at the cost of complexity",
        "created_at": "2021-04-08T20:08:43.539000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "We could break up each address space into N regions, and stagger the time at which the regions expiry",
        "created_at": "2021-04-08T20:09:01.846000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "but that's a significant complexity tradeoff imo",
        "created_at": "2021-04-08T20:09:21.137000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "right, because the inactive state falling cleanly into epochs is still a really nice property that I'd want to maintain",
        "created_at": "2021-04-08T20:09:30.868000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "The problem with making epochs shorter is that it increases witness sizes for recovering old state",
        "created_at": "2021-04-08T20:09:54.040000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "so it's less about removing epochs and more about whether there's a simple/clean way to make the expiry continuous",
        "created_at": "2021-04-08T20:09:56.270000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "right, I think realistically any solution would look something like this",
        "created_at": "2021-04-08T20:10:16.171000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "would it be possible for us to unify the epoch verkle tries?",
        "created_at": "2021-04-08T20:10:53.560000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "hmm I think that would be *bad*",
        "created_at": "2021-04-08T20:11:10.789000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Because it would end up breaking the key:value abstraction",
        "created_at": "2021-04-08T20:11:20.432000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "As nodes would have to explicitly store only the parts of the tree that are not \"historical\"",
        "created_at": "2021-04-08T20:12:48.082000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "You would have a lot of code that treats the tries as disunified anyway",
        "created_at": "2021-04-08T20:13:17.726000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "eg. state sync would only care about the most recent regions",
        "created_at": "2021-04-08T20:13:27.951000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Oh also it would complicate the procedure for upgrading the state commitment scheme",
        "created_at": "2021-04-08T20:13:59.809000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Whereas if you have a cleanly separate commitment for each epoch then there's lots of ways to make it easy",
        "created_at": "2021-04-08T20:14:17.729000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "As you can temporarily have newer tries use a newer scheme and older tries use some older scheme until/unless a hard fork replaces them",
        "created_at": "2021-04-08T20:14:53.052000+00:00",
        "attachments": null
    }
]