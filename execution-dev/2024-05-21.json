[
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "is discv4 still being used (in execution clients broadly)?",
        "created_at": "2024-05-21T12:30:58.877000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "exclusively yes, we have not started using discv5",
        "created_at": "2024-05-21T12:32:53.131000+00:00",
        "attachments": null
    },
    {
        "author": "arnetheduck",
        "category": "general",
        "parent": "",
        "content": "any .. specific reason?",
        "created_at": "2024-05-21T12:45:04.595000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "general",
        "parent": "",
        "content": "Not all execution clients have/had a discv5 implementation in there language. I think C# is the only one left and it is currently in development last I heard, but still needs optimizations",
        "created_at": "2024-05-21T12:46:50.005000+00:00",
        "attachments": null
    },
    {
        "author": "kolbyml",
        "category": "general",
        "parent": "",
        "content": "Normally this is talked about in the p2p breakout room \u003c@226589605816696832\u003e would know more of the specifics on what is happening with the C# implementation",
        "created_at": "2024-05-21T12:49:02.159000+00:00",
        "attachments": null
    },
    {
        "author": "smartprogrammer",
        "category": "general",
        "parent": "",
        "content": "There is an implementation here, we are working on integrating it and will push it forward once we have satisfactory results from it.\nhttps://github.com/Pier-Two/Lantern.Discv5/",
        "created_at": "2024-05-21T12:50:20.981000+00:00",
        "attachments": null
    },
    {
        "author": "shekhirin",
        "category": "general",
        "parent": "",
        "content": "https://eips.ethereum.org/EIPS/eip-7685 doesn't mention the validation of requests root in the header against the calculated root from the requests derived from the block. The fact that Geth does it (https://github.com/shekhirin/go-ethereum/blob/251ef62cad04c89078fff296b4e31d58613b199c/core/block_validator.go#L143-L149) seems to be off-spec, but correct. I think it should be included in the EIP.\n\n\u003c@543900561460822016\u003e",
        "created_at": "2024-05-21T13:46:20.104000+00:00",
        "attachments": null
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "It would be nice if EL teams were able to at least give our portal network specs for history network a first pass before the next ACD so that we can have an informed conversation.  Questions and discussion can be done in \u003c#953349957400821860\u003e",
        "created_at": "2024-05-21T14:05:29.454000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "geth is going to look into the specs, but i think it will be next week",
        "created_at": "2024-05-21T15:06:47.573000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "by definition of the block, you should validate what you derived is equal to what you received",
        "created_at": "2024-05-21T15:07:45.486000+00:00",
        "attachments": null
    },
    {
        "author": "shekhirin",
        "category": "general",
        "parent": "",
        "content": "i would argue we still need to explicitly mention it, see https://eips.ethereum.org/EIPS/eip-4895#execution-payload-validity for example",
        "created_at": "2024-05-21T15:14:06.821000+00:00",
        "attachments": null
    },
    {
        "author": "shekhirin",
        "category": "general",
        "parent": "",
        "content": "another thing: https://eips.ethereum.org/EIPS/eip-6110 contains an explicit `assert deposit_requests == expected_deposit_requests` check, while https://eips.ethereum.org/EIPS/eip-7002 do not. IIUC requests root validation do not check the order inside one type of requests, should EIP-7002 contain a similar assertion?",
        "created_at": "2024-05-21T15:14:35.890000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "how would you implement 7685 without validating what you computed equals what you received? i don't really see the need for it to be explicit",
        "created_at": "2024-05-21T15:33:23.608000+00:00",
        "attachments": null
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "in 7002 there is this line:\n\n\u003e Each withdrawal request must appear in the EIP-7685 requests list in the order they are returned from dequeue_withdrawal_requests()",
        "created_at": "2024-05-21T15:44:34.034000+00:00",
        "attachments": null
    },
    {
        "author": "shekhirin",
        "category": "general",
        "parent": "",
        "content": "by following the EIP, so: \n1. Include requests into the block RLP encoding\n2. Calculate requests root when building a payload\n3. Ordering of different request types\n\nit doesn't mention validating the requests root, only calculating it. I don't see why we should omit this detail, given we have it in 4895?",
        "created_at": "2024-05-21T15:45:00.784000+00:00",
        "attachments": null
    },
    {
        "author": "shekhirin",
        "category": "general",
        "parent": "",
        "content": "sorry, i need to clarify: we validate that the calculated requests root of the requests match whats in the header when receiving a block over p2p or engine api (i.e. an integrity check), but we did not initially also check it when executing the block (i.e. requests generated from execution == requests in block)",
        "created_at": "2024-05-21T16:23:55.421000+00:00",
        "attachments": null
    }
]