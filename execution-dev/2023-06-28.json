[
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "hey, I had started working on state tests in this PR: https://github.com/ethereum/execution-spec-tests/pull/122 .\n\nThat PR might be a bit stale at this point, but I will circle back to update it soon, and also provide a link to the filled tests.",
        "created_at": "2023-06-28T13:55:08.757000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Cool! ðŸ˜„ If you could link me to the filled tests, then I will try them out on our implementation ðŸ˜„",
        "created_at": "2023-06-28T13:57:00.308000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "you can try these:  https://gist.github.com/jwasinger/9b7db5bba81f49a6059b6a5937daa8ca",
        "created_at": "2023-06-28T14:02:09.363000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "oh.  the network name is set to shanghai in those.  let me change to cancun",
        "created_at": "2023-06-28T14:02:31.476000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "okay done",
        "created_at": "2023-06-28T14:04:10.440000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Cool! Will test and report back ðŸ™‚",
        "created_at": "2023-06-28T14:04:21.315000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "These tests appear to be the same?",
        "created_at": "2023-06-28T15:53:22.350000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Wait, nvm",
        "created_at": "2023-06-28T15:53:41.778000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "The names of those tests are the same though, they are both `000/6780-create-inside-tx/shanghai`",
        "created_at": "2023-06-28T15:54:18.593000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "We are failing both tests, figuring out why",
        "created_at": "2023-06-28T16:00:15.421000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "We use 5k gas more on this one https://gist.githubusercontent.com/jwasinger/9b7db5bba81f49a6059b6a5937daa8ca/raw/62451c2a6e75adb5138ef133f6c8bc95b058bf54/eip6780_create_selfdestruct_same_tx.json",
        "created_at": "2023-06-28T16:00:49.691000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Do you want a trace \u003c@427903869226582018\u003e ? (and in which format?)",
        "created_at": "2023-06-28T17:28:03.698000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "I can't see where we would be going wrong ðŸ¤”",
        "created_at": "2023-06-28T17:42:46.690000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Only thing I can thing of right now is that we charge the 5k gas base cost of SELFDESTRUCT and the ref implementation doesnt?",
        "created_at": "2023-06-28T17:50:44.637000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "yeah please link me a trace.  the format that looks like this:\n\n```\n...\n{\"pc\":0,\"op\":96,\"gas\":\"0x2540be400\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":2,\"op\":96,\"gas\":\"0x2540be3fd\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x32\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":4,\"op\":96,\"gas\":\"0x2540be3fa\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x32\",\"0x1c\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":6,\"op\":57,\"gas\":\"0x2540be3f7\",\"gasCost\":\"0xf\",\"memSize\":0,\"stack\":[\"0x32\",\"0x1c\",\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"CODECOPY\"}\n...\n```",
        "created_at": "2023-06-28T17:51:05.330000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Cool, will spin one up",
        "created_at": "2023-06-28T17:51:18.655000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "",
        "created_at": "2023-06-28T17:56:44.510000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "eyJwYyI6MCwib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjowLCJzdGFjayI6W10sIm1lbVNpemUiOjAsImdhcyI6IjB4NWY1MGY5MCJ9CnsicGMiOjIsIm9wTmFtZSI6IlBVU0gxIiwicmVmdW5kIjowLCJkZXB0aCI6MCwic3RhY2siOlsiMHgzMiJdLCJtZW1TaXplIjowLCJnYXMiOiIweDVmNTBmOGQifQp7InBjIjo0LCJvcE5hbWUiOiJQVVNIMSIsInJlZnVuZCI6MCwiZGVwdGgiOjAsInN0YWNrIjpbIjB4MzIiLCIweDFjIl0sIm1lbVNpemUiOjAsImdhcyI6IjB4NWY1MGY4YSJ9CnsicGMiOjYsIm9wTmFtZSI6IkNPREVDT1BZIiwicmVmdW5kIjowLCJkZXB0aCI6MCwic3RhY2siOlsiMHgzMiIsIjB4MWMiLCIweDAiXSwibWVtU2l6ZSI6MCwiZ2FzIjoiMHg1ZjUwZjg3In0KeyJwYyI6Nywib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjowLCJzdGFjayI6W10sIm1lbVNpemUiOjY0LCJnYXMiOiIweDVmNTBmNzgifQp7InBjIjo5LCJvcE5hbWUiOiJQVVNIMSIsInJlZnVuZCI6MCwiZGVwdGgiOjAsInN0YWNrIjpbIjB4MzIiXSwibWVtU2l6ZSI6NjQsImdhcyI6IjB4NWY1MGY3NSJ9CnsicGMiOjExLCJvcE5hbWUiOiJQVVNIMSIsInJlZnVuZCI6MCwiZGVwdGgiOjAsInN0YWNrIjpbIjB4MzIiLCIweDAiXSwibWVtU2l6ZSI6NjQsImdhcyI6IjB4NWY1MGY3MiJ9CnsicGMiOjEzLCJvcE5hbWUiOiJDUkVBVEUiLCJyZWZ1bmQiOjAsImRlcHRoIjowLCJzdGFjayI6WyIweDMyIiwiMHgwIiwiMHgwIl0sIm1lbVNpemUiOjY0LCJnYXMiOiIweDVmNTBmNmYifQp7InBjIjowLCJvcE5hbWUiOiJQVVNIMSIsInJlZnVuZCI6MCwiZGVwdGgiOjEsInN0YWNrIjpbXSwibWVtU2l6ZSI6MCwiZ2FzIjoiMHg1ZGNjMDIyIn0KeyJwYyI6Miwib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjoxLCJzdGFjayI6WyIweDgiXSwibWVtU2l6ZSI6MCwiZ2FzIjoiMHg1ZGNjMDFmIn0KeyJwYyI6NCwib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjoxLCJzdGFjayI6WyIweDgiLCIweGMiXSwibWVtU2l6ZSI6MCwiZ2FzIjoiMHg1ZGNjMDFjIn0KeyJwYyI6Niwib3BOYW1lIjoiQ09ERUNPUFkiLCJyZWZ1bmQiOjAsImRlcHRoIjoxLCJzdGFjayI6WyIweDgiLCIweGMiLCIweDAiXSwibWVtU2l6ZSI6MCwiZ2FzIjoiMHg1ZGNjMDE5In0KeyJwYyI6Nywib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjoxLCJzdGFjayI6W10sIm1lbVNpemUiOjMyLCJnYXMiOiIweDVkY2MwMTAifQp7InBjIjo5LCJvcE5hbWUiOiJQVVNIMSIsInJlZnVuZCI6MCwiZGVwdGgiOjEsInN0YWNrIjpbIjB4OCJdLCJtZW1TaXplIjozMiwiZ2FzIjoiMHg1ZGNjMDBkIn0KeyJwYyI6MTEsIm9wTmFtZSI6IlJFVFVSTiIsInJlZnVuZCI6MCwiZGVwdGgiOjEsInN0YWNrIjpbIjB4OCIsIjB4MCJdLCJtZW1TaXplIjozMiwiZ2FzIjoiMHg1ZGNjMDBhIn0KeyJwYyI6MTQsIm9wTmFtZSI6IlBVU0gxIiwicmVmdW5kIjowLCJkZXB0aCI6MCwic3RhY2siOlsiMHg2NGUyZWJkNjQwNWFmOGNiMzQ4YWVjNTE5MDg0ZDNmZmY0MmViYmE2Il0sIm1lbVNpemUiOjY0LCJnYXMiOiIweDVmNDhjMTMifQp7InBjIjoxNiwib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjowLCJzdGFjayI6WyIweDY0ZTJlYmQ2NDA1YWY4Y2IzNDhhZWM1MTkwODRkM2ZmZjQyZWJiYTYiLCIweDAiXSwibWVtU2l6ZSI6NjQsImdhcyI6IjB4NWY0OGMxMCJ9CnsicGMiOjE4LCJvcE5hbWUiOiJQVVNIMSIsInJlZnVuZCI6MCwiZGVwdGgiOjAsInN0YWNrIjpbIjB4NjRlMmViZDY0MDVhZjhjYjM0OGFlYzUxOTA4NGQzZmZmNDJlYmJhNiIsIjB4MCIsIjB4MCJdLCJtZW1TaXplIjo2NCwiZ2FzIjoiMHg1ZjQ4YzBkIn0KeyJwYyI6MjAsIm9wTmFtZSI6IlBVU0gxIiwicmVmdW5kIjowLCJkZXB0aCI6MCwic3RhY2siOlsiMHg2NGUyZWJkNjQwNWFmOGNiMzQ4YWVjNTE5MDg0ZDNmZmY0MmViYmE2IiwiMHgwIiwiMHgwIiwiMHgwIl0sIm1lbVNpemUiOjY0LCJnYXMiOiIweDVmNDhjMGEifQp7InBjIjoyMiwib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjowLCJzdGFjayI6WyIweDY0ZTJlYmQ2NDA1YWY4Y2IzNDhhZWM1MTkwODRkM2ZmZjQyZWJiYTYiLCIweDAiLCIweDAiLCIweDAiLCIweDAiXSwibWVtU2l6ZSI6NjQsImdhcyI6IjB4NWY0OGMwNyJ9CnsicGMiOjI0LCJvcE5hbWUiOiJEVVA2IiwicmVmdW5kIjowLCJkZXB0aCI6MCwic3RhY2siOlsiMHg2NGUyZWJkNjQwNWFmOGNiMzQ4YWVjNTE5MDg0ZDNmZmY0MmViYmE2IiwiMHgwIiwiMHgwIiwiMHgwIiwiMHgwIiwiMHgwIl0sIm1lbVNpemUiOjY0LCJnYXMiOiIweDVmNDhjMDQifQp7InBjIjoyNSwib3BOYW1lIjoiR0FTTElNSVQiLCJyZWZ1bmQiOjAsImRlcHRoIjowLCJzdGFjayI6WyIweDY0ZTJlYmQ2NDA1YWY4Y2IzNDhhZWM1MTkwODRkM2ZmZjQyZWJiYTYiLCIweDAiLCIweDAiLCIweDAiLCIweDAiLCIweDAiLCIweDY0ZTJlYmQ2NDA1YWY4Y2IzNDhhZWM1MTkwODRkM2ZmZjQyZWJiYTYiXSwibWVtU2l6ZSI6NjQsImdhcyI6IjB4NWY0OGMwMSJ9CnsicGMiOjI2LCJvcE5hbWUiOiJDQUxMIiwicmVmdW5kIjowLCJkZXB0aCI6MCwic3RhY2siOlsiMHg2NGUyZWJkNjQwNWFmOGNiMzQ4YWVjNTE5MDg0ZDNmZmY0MmViYmE2IiwiMHgwIiwiMHgwIiwiMHgwIiwiMHgwIiwiMHgwIiwiMHg2NGUyZWJkNjQwNWFmOGNiMzQ4YWVjNTE5MDg0ZDNmZmY0MmViYmE2IiwiMHgyNTQwYmU0MDAiXSwibWVtU2l6ZSI6NjQsImdhcyI6IjB4NWY0OGJmZiJ9CnsicGMiOjAsIm9wTmFtZSI6IlBVU0gxIiwicmVmdW5kIjowLCJkZXB0aCI6MSwic3RhY2siOltdLCJtZW1TaXplIjowLCJnYXMiOiIweDVkY2I5NmQifQp7InBjIjoyLCJvcE5hbWUiOiJQVVNIMSIsInJlZnVuZCI6MCwiZGVwdGgiOjEsInN0YWNrIjpbIjB4MSJdLCJtZW1TaXplIjowLCJnYXMiOiIweDVkY2I5NmEifQp7InBjIjo0LCJvcE5hbWUiOiJTU1RPUkUiLCJyZWZ1bmQiOjAsImRlcHRoIjoxLCJzdGFjayI6WyIweDEiLCIweDAiXSwibWVtU2l6ZSI6MCwiZ2FzIjoiMHg1ZGNiOTY3In0KeyJwYyI6NSwib3BOYW1lIjoiUFVTSDEiLCJyZWZ1bmQiOjAsImRlcHRoIjoxLCJzdGFjayI6W10sIm1lbVNpemUiOjAsImdhcyI6IjB4NWRjNjMxMyJ9CnsicGMiOjcsIm9wTmFtZSI6IlNFTEZERVNUUlVDVCIsInJlZnVuZCI6MCwiZGVwdGgiOjEsInN0YWNrIjpbIjB4MCJdLCJtZW1TaXplIjowLCJnYXMiOiIweDVkYzYzMTAifQp7InBjIjoyNywib3BOYW1lIjoiU1RPUCIsInJlZnVuZCI6MCwiZGVwdGgiOjAsInN0YWNrIjpbIjB4NjRlMmViZDY0MDVhZjhjYjM0OGFlYzUxOTA4NGQzZmZmNDJlYmJhNiIsIjB4MSJdLCJtZW1TaXplIjo2NCwiZ2FzIjoiMHg1ZjQxNzhlIn0="
            }
        ]
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Our depth starts at 0 and we do not report opcode number",
        "created_at": "2023-06-28T17:56:54.457000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Could you also post your trace?",
        "created_at": "2023-06-28T18:04:59.361000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "yes.  I will get back to you.  having some technical difficulties with test filling atm",
        "created_at": "2023-06-28T18:18:20.829000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Sure ðŸ™‚",
        "created_at": "2023-06-28T18:25:59.957000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "the geth implementation was not charging the constant portion of the gas cost",
        "created_at": "2023-06-28T18:38:34.625000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "ðŸ™‚",
        "created_at": "2023-06-28T18:39:14.874000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Ahhh ðŸ™‚",
        "created_at": "2023-06-28T18:40:15.012000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "FYI: I set base costs of SELFDESTRUCT to 0 on the tests you gave me, and then they pass ðŸ™‚",
        "created_at": "2023-06-28T18:48:55.366000+00:00",
        "attachments": []
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "(but should be 5k cost of course)",
        "created_at": "2023-06-28T18:49:08.907000+00:00",
        "attachments": []
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "cool.  I will update the `execution-spec-tests` branch with the test filler, refill the tests and link the filled tests here.",
        "created_at": "2023-06-28T18:58:09.534000+00:00",
        "attachments": []
    }
]