[
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "hey, I had started working on state tests in this PR: https://github.com/ethereum/execution-spec-tests/pull/122 .\n\nThat PR might be a bit stale at this point, but I will circle back to update it soon, and also provide a link to the filled tests.",
        "created_at": "2023-06-28T13:55:08.757000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Cool! ðŸ˜„ If you could link me to the filled tests, then I will try them out on our implementation ðŸ˜„",
        "created_at": "2023-06-28T13:57:00.308000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "you can try these:  https://gist.github.com/jwasinger/9b7db5bba81f49a6059b6a5937daa8ca",
        "created_at": "2023-06-28T14:02:09.363000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "oh.  the network name is set to shanghai in those.  let me change to cancun",
        "created_at": "2023-06-28T14:02:31.476000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "okay done",
        "created_at": "2023-06-28T14:04:10.440000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Cool! Will test and report back ðŸ™‚",
        "created_at": "2023-06-28T14:04:21.315000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "These tests appear to be the same?",
        "created_at": "2023-06-28T15:53:22.350000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Wait, nvm",
        "created_at": "2023-06-28T15:53:41.778000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "The names of those tests are the same though, they are both `000/6780-create-inside-tx/shanghai`",
        "created_at": "2023-06-28T15:54:18.593000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "We are failing both tests, figuring out why",
        "created_at": "2023-06-28T16:00:15.421000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "We use 5k gas more on this one https://gist.githubusercontent.com/jwasinger/9b7db5bba81f49a6059b6a5937daa8ca/raw/62451c2a6e75adb5138ef133f6c8bc95b058bf54/eip6780_create_selfdestruct_same_tx.json",
        "created_at": "2023-06-28T16:00:49.691000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Do you want a trace \u003c@427903869226582018\u003e ? (and in which format?)",
        "created_at": "2023-06-28T17:28:03.698000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "I can't see where we would be going wrong ðŸ¤”",
        "created_at": "2023-06-28T17:42:46.690000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Only thing I can thing of right now is that we charge the 5k gas base cost of SELFDESTRUCT and the ref implementation doesnt?",
        "created_at": "2023-06-28T17:50:44.637000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "yeah please link me a trace.  the format that looks like this:\n\n```\n...\n{\"pc\":0,\"op\":96,\"gas\":\"0x2540be400\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":2,\"op\":96,\"gas\":\"0x2540be3fd\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x32\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":4,\"op\":96,\"gas\":\"0x2540be3fa\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x32\",\"0x1c\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":6,\"op\":57,\"gas\":\"0x2540be3f7\",\"gasCost\":\"0xf\",\"memSize\":0,\"stack\":[\"0x32\",\"0x1c\",\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"CODECOPY\"}\n...\n```",
        "created_at": "2023-06-28T17:51:05.330000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Cool, will spin one up",
        "created_at": "2023-06-28T17:51:18.655000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "",
        "created_at": "2023-06-28T17:56:44.510000+00:00",
        "attachments": [
            {
                "type": "text/plain; charset=utf-8",
                "origin_name": "message.txt",
                "content": "e35050a39d34bd88be4606a575db1de0983030b46ab91ffe6dbd85d5e04db7cc"
            }
        ]
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Our depth starts at 0 and we do not report opcode number",
        "created_at": "2023-06-28T17:56:54.457000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Could you also post your trace?",
        "created_at": "2023-06-28T18:04:59.361000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "yes.  I will get back to you.  having some technical difficulties with test filling atm",
        "created_at": "2023-06-28T18:18:20.829000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Sure ðŸ™‚",
        "created_at": "2023-06-28T18:25:59.957000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "the geth implementation was not charging the constant portion of the gas cost",
        "created_at": "2023-06-28T18:38:34.625000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "ðŸ™‚",
        "created_at": "2023-06-28T18:39:14.874000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "Ahhh ðŸ™‚",
        "created_at": "2023-06-28T18:40:15.012000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "FYI: I set base costs of SELFDESTRUCT to 0 on the tests you gave me, and then they pass ðŸ™‚",
        "created_at": "2023-06-28T18:48:55.366000+00:00",
        "attachments": null
    },
    {
        "author": "jochembrouwer",
        "category": "general",
        "parent": "",
        "content": "(but should be 5k cost of course)",
        "created_at": "2023-06-28T18:49:08.907000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "cool.  I will update the `execution-spec-tests` branch with the test filler, refill the tests and link the filled tests here.",
        "created_at": "2023-06-28T18:58:09.534000+00:00",
        "attachments": null
    }
]