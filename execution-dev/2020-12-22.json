[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "We don't have any channels for anonymity and cryptography (e.g, SNARKs/STARKs/NIZK, etc.).  Any chance we could get such a channel created \u003c@\u0026595685821026271242\u003e?",
        "created_at": "2020-12-22T06:53:56.293000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "In the meantime, I'll ask here:\nIs it possible to do something like Tornado but where you determine the withdraw address at note creation time, rather than at withdraw time?",
        "created_at": "2020-12-22T06:57:47.476000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "As a paranoid crypto owner, I don't trust my ability to secure a secret for an indefinite period of time.  Because of this, my assets are stored in a multisig, Gnosis Safe with social recovery, Recoverable Wallet, etc.  With the current Tornado design if I want maximum anonymity I need to store all of my assets in Tornado and secure the notes.  If someone gets my notes, they get my money.  If I lose my notes, I lose my money.",
        "created_at": "2020-12-22T06:59:53.315000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "However, if the note could only withdraw to a specific address, then now my situation is:\nIf someone gets my notes, they can withdraw my money to my contract wallet.\nIf I lose my notes, I lose my money.",
        "created_at": "2020-12-22T07:00:44.565000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This is a *much* better situation because I can store the notes in a way that is only *sort of* secure.  I don't need to strive for maximal security, I can focus instead on optimizing for loss prevention with a secondary focus on theft prevention.  Worst case scenario, a thief could force an early withdraw, which may hurt my anonymity, but I can just start the process over again (no fund loss).",
        "created_at": "2020-12-22T07:02:04.196000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Unfortunately, I don't understand the cryptography of ZK stuff well enough to know if this setup is possible or not.",
        "created_at": "2020-12-22T07:02:29.565000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "it seems like you could just modify the snark to include address as a public input, so that the commitment becomes secret + address + note instead of just secret + note.",
        "created_at": "2020-12-22T07:09:52.144000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I believe the current design is such that the note can trace back to the source of funds (which is how the compliance tooling works).  This means that we cannot publish the note as-is.",
        "created_at": "2020-12-22T07:16:18.933000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Though, maybe I'm misunderstanding you? (again, I don't fully grok the cryptography for Tornado)",
        "created_at": "2020-12-22T07:16:42.889000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Hmm, as long as it is possible to do \"compliance\", then there is risk of the note being compromised.",
        "created_at": "2020-12-22T07:17:28.615000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "ðŸ¤” What if I take current Tornado, and just craft the withdraw transaction as soon as the note is generated and then save that and throw away the note?",
        "created_at": "2020-12-22T07:17:58.935000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Are Tornado transactions good indefinitely, or do they become stale as people withdraw?",
        "created_at": "2020-12-22T07:18:12.854000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "ah right you provide the hash of the note as public input and not the note itself",
        "created_at": "2020-12-22T07:34:14.757000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "when withdrawing",
        "created_at": "2020-12-22T07:34:29.360000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "But the hash of the note cannot be front-run presumably, so I suppose it is a hash of the note + destination address or something?",
        "created_at": "2020-12-22T07:43:55.502000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "based on my brief glance of their docs, compliance is voluntary so I don't think the note can be compromised without you revealing it.\n\nTo enforce that you can only withdraw to a given address, you would add the address to the commitment.  the snark would then have hash(note), address as public inputs.",
        "created_at": "2020-12-22T07:45:32.549000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e based on my brief glance of their docs, compliance is voluntary so I don't think the note can be compromised without you revealing it.\nHmm, I thought compliance only required the note?",
        "created_at": "2020-12-22T07:45:49.923000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "sure. but you aren't revealing the note when you withdraw.  just the hash of it",
        "created_at": "2020-12-22T07:46:23.872000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So in order for my anonymity to be safe, I would need to store something *other* than the note.  Some derived piece of data.",
        "created_at": "2020-12-22T07:47:52.575000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "So the question is, can I derive some data from the note that preps it for withdraw at some point in the future and is sufficiently irreversible back to the note (or the deposit address)?",
        "created_at": "2020-12-22T07:48:13.992000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "I am not sure if the \"compliance-friendly\" note (timestamp of when deposit transaction was submitted?) is just generated by the frontend of tornado and not a requirement.\n\nif you generate the note randomly, I don't think revealing it alone can link back to a deposit.",
        "created_at": "2020-12-22T07:58:52.937000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "you should be fine modifying the commitment to include address.  and then at withdrawal time, revealing the address and the zkp that proves it was part of the original commitment.",
        "created_at": "2020-12-22T08:00:40.095000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "should be a few line change in the tornado contract and circuit.",
        "created_at": "2020-12-22T08:01:00.971000+00:00",
        "attachments": null
    },
    {
        "author": "jwasinger",
        "category": "general",
        "parent": "",
        "content": "but I'm no zk expert so I can't guarantee there isn't a glaring flaw",
        "created_at": "2020-12-22T08:01:43.701000+00:00",
        "attachments": null
    },
    {
        "author": "guthl_starkware",
        "category": "general",
        "parent": "",
        "content": "Is anyone aware of a functioning Python3 implementation of EthHash?",
        "created_at": "2020-12-22T15:51:58.265000+00:00",
        "attachments": null
    },
    {
        "author": "guthl_starkware",
        "category": "general",
        "parent": "",
        "content": "The wiki is using a version which is not compatible with python3 https://eth.wiki/en/concepts/ethash/ethash as stated in the original github: https://github.com/lukovkin/ethash",
        "created_at": "2020-12-22T15:52:47.621000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "\u003c@!619138323776012307\u003e Feel free to test this that I just made https://github.com/AndersStigsson/ethash I have tested it a little and it gets to the stage of \"Prepare full dataset... Could take a few hours, please be patient.\" but I only have a small NUC in a not so ventilated space, so don't want to run it at 100% on one core too long ðŸ™‚",
        "created_at": "2020-12-22T19:27:49.399000+00:00",
        "attachments": null
    },
    {
        "author": "\u003cGuthL\u003e",
        "category": "general",
        "parent": "",
        "content": "So get_seedhash works up to some block prior to 44945 (==11506062//(2**8)). 22472 works. I get a TypeError: Unicode-objects must be encoded before hashing after 44945. If needed I could try to find the exact the block if needed",
        "created_at": "2020-12-22T22:54:44.990000+00:00",
        "attachments": null
    },
    {
        "author": "\u003cGuthL\u003e",
        "category": "general",
        "parent": "",
        "content": "Thanks a lot for the work though",
        "created_at": "2020-12-22T22:54:54.359000+00:00",
        "attachments": null
    }
]