[
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "I am trying to wrap my head around PoC and execution payload in the context of 3rd party services, still. I‚Äôve read the current PoC discussion for data shards, but haven‚Äôt been able to translate that into a mental picture of which parts of the software ‚Äústack‚Äù see the secret.\n\nSay I have a validator, represented by its key, running inside a validator client or remote signer. It is owned by one party.\n\nI think I read here that having a VC and CL locally that then connects to a 3rd party EL is unwise, because this exposes the secret to that 3rd party.\n\nIs this also true if the CL/EL combo is 3rd party, and only the VC - or even just the remote signer - is local?",
        "created_at": "2021-10-22T08:26:17.568000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "What this gets at is the viability of services such as Blox, which runs a VC/CL/EL stack in Blox‚Äôs environment with the validator keys in a customer-controlled remote signer; or of Infura‚Äôs CL service, which offers a CL API to any VC that wants to connect to it.",
        "created_at": "2021-10-22T08:29:35.859000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "And how such services might need to change in a PoC/merge world.",
        "created_at": "2021-10-22T08:29:58.182000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "So execution PoC is to make sure that you've executed the payload and verified its validity. If you are running a signer that will sign whatever block is provided by a third party blindly, then currently you have a very cheap check that you won't be tricked into signing a slashable offense: you just check quickly against a tiny slashing dbase. When PoC arrives, this check becomes expensive, the only way of knowing that you're signing a valid block is to run the execution payload yourself and check it's validity. So validators that are signing blocks given by third party, are subject to these latter ones tricking them into signing a slashable block.",
        "created_at": "2021-10-22T10:28:09.164000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Which they won't do, not their business model.",
        "created_at": "2021-10-22T11:08:51.444000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "So this: \u003chttps://discord.com/channels/595666850260713488/688075293562503241/897618898948587742?\u003e says \"nope, 3rd party is a bad idea for EL\", and I tend to blindly believe whatever djrtwo tells me.",
        "created_at": "2021-10-22T11:09:58.151000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "I am assuming but don't know that it's a bad idea because PoC will send a secret key to EL. I am trying to work through the implications of that for third-party CL services, whether MPC (SSV VC) or not (\"traditional\" VC)",
        "created_at": "2021-10-22T11:10:54.062000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "SSV would most likely agree upon a CL state and execution payload, and then each node would confirm it with its local EL.",
        "created_at": "2021-10-22T11:13:49.315000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "The validator will need to give it's secret every 90 days to the EL operator. It is no longer trustless if you don't run your EL",
        "created_at": "2021-10-22T11:14:09.566000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "I haven't paid attention to PoC, is there a link for why this is required somewhere?",
        "created_at": "2021-10-22T11:14:58.592000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Ah ... wow. So, that's true for outsourced CL/EL as well. Since the VC talks to the CL, not the EL. So if I am thinking through this in order: VC talks to CL, gives it secret (every 90 days?), CL communicates secret to EL (every 90 days)",
        "created_at": "2021-10-22T11:16:44.004000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Do you have a link where these 90 days are documented? And thanks a ton for helping me through it, this is immensely useful.",
        "created_at": "2021-10-22T11:17:33.130000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I don't think there's an implementation, but the way PoC works is by having a transient secret. Then when you get a block that you need to verify part of this block will be encrypted for you only. You decrypt it an decide if it's a \"bomb\" (quoting dankrad). So if you don't want to run the check yourself, you'll need to share this secret with someone to do it for you",
        "created_at": "2021-10-22T11:19:40.911000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "This secret changes every few days and you'll need to periodically share it with whomever does the check for you",
        "created_at": "2021-10-22T11:20:23.771000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "If you just sign whatever it sends you to sign, then you are now trusting him actually checking",
        "created_at": "2021-10-22T11:20:52.835000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Which is not necessary now for CL slashings since the check is cheap",
        "created_at": "2021-10-22T11:21:19.005000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "https://dankradfeist.de/ethereum/2021/09/30/proofs-of-custody.html",
        "created_at": "2021-10-22T11:21:55.947000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "So I'm hearing \"uncertainty\". The actual implementation may have the check on the EL side, with the secret passed through from VC to CL to EL. Since doing this on the VC may be too expensive. But this creates trust, and that means 3rd-party for CL or EL gets ... interesting.",
        "created_at": "2021-10-22T11:22:43.827000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "Passing secrets around does not sound optimal.",
        "created_at": "2021-10-22T11:23:08.647000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "It does not. But unless that is what is envisioned, why the comment by danny that 3rd-party EL is a bad idea post merge?",
        "created_at": "2021-10-22T11:24:05.415000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "\"Proof of custody for execution\" in that paper linked above is quite dense. \"The validator will have to compute the proof of custody in the same way as described above, however the data is the execution trace.\" -- this sounds like the validator client does the work, the EL doesn't have a secret.",
        "created_at": "2021-10-22T11:26:23.545000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Which gets me full circle to \"so why the warning that 3rd-party EL won't be an option any more\"",
        "created_at": "2021-10-22T11:26:42.325000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "From the info that potuz linked, the issue is that with a third party EL you would:\n  - ask the EL for the data trace\n  - receive the data trace\n  - break the received data in to  `data0`, `data1` _etc.\n  - use the `datan` to generate the root\n\nBut there is no guarantee that the data trace returned from the EL is valid, hence you have to trust it to not slash you.",
        "created_at": "2021-10-22T11:29:57.445000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Okay",
        "created_at": "2021-10-22T11:30:11.528000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Do I have this same trust issue today when I use a 3rd-party CL?",
        "created_at": "2021-10-22T11:30:34.883000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "No",
        "created_at": "2021-10-22T11:31:43.804000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Cause you can check yourself quickly that you are not signing a slashable offense",
        "created_at": "2021-10-22T11:32:04.125000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Thank you. So post-merge, I have a trust issue with a 3rd-party EL. Since the VC talks to the CL, which talks to the EL, then post-merge, I also have a trust issue with a 3rd-party CL.",
        "created_at": "2021-10-22T11:32:21.649000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "This is a doozy.",
        "created_at": "2021-10-22T11:32:25.615000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I'd say post PoC, I don't see this happening too soon after the merge",
        "created_at": "2021-10-22T11:33:14.090000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "Well, let's say: The enforcement is post PoC, but if I am honest I *want* correct data, so I'm trusting from merge. Even if violation of that trust has no immediate impact on me until post-PoC.",
        "created_at": "2021-10-22T11:34:14.257000+00:00",
        "attachments": null
    },
    {
        "author": "pieterastra",
        "category": "general",
        "parent": "",
        "content": "https://discord.com/channels/595666850260713488/688075293562503241/897618898948587742\n\"expected to be released as soon as possible after the merge\"",
        "created_at": "2021-10-22T11:35:14.620000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "\"asap\" in this context might mean 12-18 months, as withdrawals come first",
        "created_at": "2021-10-22T11:35:32.903000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yeah, but I'd have to see that to believe it :)",
        "created_at": "2021-10-22T11:35:48.406000+00:00",
        "attachments": null
    },
    {
        "author": "pieterastra",
        "category": "general",
        "parent": "",
        "content": "fair üôÇ",
        "created_at": "2021-10-22T11:35:57.907000+00:00",
        "attachments": null
    },
    {
        "author": "jgm",
        "category": "general",
        "parent": "",
        "content": "There is a general question around if 3rd party ELs and CLs should be accommodated.  Many people use them for backups, if not primary.\n\nMy worry is that this has three possible outcomes:\n  - a validator adds their own local EL and/or CL\n  - a validator moves their entire validator to a third-party service\n  - a validator stops validating\n\nNow obviously I don't have percentages to assign to the above, but it seems that 2/3 of the options here will result in reduced decentralization, and the other comes with increased costs to the validator.  Doesn't seem like an ideal path to walk.",
        "created_at": "2021-10-22T11:36:25.747000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "So I shall take all this and discuss with Infura next Wednesday 3pm US eastern. I got Remy from ethstaker with me. Any of you interested in participating? Basically thrust of the discussion is \"what does merge mean for Infura services from a staker perspective\" - so not RPC API which will of course continue as it does now, but the CL service they have first and foremost, and the possibility of an engine API EL service",
        "created_at": "2021-10-22T11:37:31.759000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "100% what jgm says. There are a sizeable number of solo validators now that use Infura as their EL, because of the storage/IOPS requirements the EL has. Or as failover for their local EL. And as a checkpoint for the CL, or even as their main CL with the VC connecting directly to Infura.",
        "created_at": "2021-10-22T11:39:21.540000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "And I just got some clarification that current design thinking is that maybe, getting the date trace from remote would be expensive/risky with regard to bandwidth or time. Which I don't necessarily love, though I can see a way to work around it with a remote signer.",
        "created_at": "2021-10-22T14:43:18.193000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "That way my separated component setup would still work: VC/CL/EL combos in three regions on bare-metal, with a remote signer that's within ~100ms and lives in a container in a single region but with multiple AZs for DC failure scenarios.",
        "created_at": "2021-10-22T14:45:27.389000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "too many abbreviations for me to be able to read üôÇ",
        "created_at": "2021-10-22T15:45:42.666000+00:00",
        "attachments": null
    },
    {
        "author": "yorickdowne",
        "category": "general",
        "parent": "",
        "content": "AZ: Availability Zone. DC: Data Center. VC: Validator Client. EL: Execution Layer. CL: Consensus Layer. IOPS: I/O per second, random read/write performance of storage.",
        "created_at": "2021-10-22T16:29:35.334000+00:00",
        "attachments": null
    },
    {
        "author": "timbeiko",
        "category": "general",
        "parent": "",
        "content": "I‚Äôd be curious in listening in on that call if that‚Äôs possible!",
        "created_at": "2021-10-22T19:00:48.746000+00:00",
        "attachments": null
    }
]