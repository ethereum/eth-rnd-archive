[
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "I think it's a great idea!",
        "created_at": "2024-04-15T13:22:01.258000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "The execution payload header is not really needed in the CL, seems that the CL spec decided to commit it in the state \"just in case it may be useful later\". We only use the blockhash to validate against the parent. I think your idea is a good one, so that we set once and forever these generic request objects and stop worrying about adding more and more operations. But I'd wait a little bit perhaps instead of commiting to it in Prague. For example, if we do go a route like ePBS, in the current spec I removed almost entirely the execution payload header: \u003chttps://hackmd.io/uWVGcvcKSoqS4P5c5NHG3g#Builders-bids\u003e",
        "created_at": "2024-04-15T13:59:32.364000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Not sure I follow - under your spec, you still have `ExecutionPayload` with the regular fields?",
        "created_at": "2024-04-15T14:08:06.193000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "yeah, the execution payload travels with the regular fields, its enclosed in an envelope that contains the fields that are up for consumption by the CL, and the payload itself is completely opaque to the CL.",
        "created_at": "2024-04-15T14:32:23.376000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "one reason to keep it is light clients",
        "created_at": "2024-04-15T14:33:58.483000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "How would this proposal work with even how 6110 deposits / 7002 withdrawals are designed today?",
        "created_at": "2024-04-15T14:35:58.837000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "haven't looked into 6110, but 7002 is kinda mandatory for my proposal and last I looked it was well compatible with it",
        "created_at": "2024-04-15T14:36:35.469000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "withdrawals in general become a little more complicated, it's explained well in that design doc though",
        "created_at": "2024-04-15T14:36:48.909000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Okay if it is compatible then my requests proposal should also be compatible, because instead of sending just 7002 exit requests, the CL will receive different types of requests too",
        "created_at": "2024-04-15T14:37:50.238000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "yeah, definitely, I think it is, and I do support the general idea of blackboxing these as general requests. Just pointing that if we do separate the payload completely from the consensus data, in something like ePBS (and I suspect it would work in other designs as well like slot auctions and such) then you can do this cleanly by having an envelope with the actual data for CL consumption and the raw payload as byte objects inside",
        "created_at": "2024-04-15T14:39:50.385000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "I don't know how / where you were planning to process EL triggered exits in your proposal but just `s/el_exits/el_requests`",
        "created_at": "2024-04-15T14:40:25.766000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "i assume you have to accumulate them somewhere in the CL?",
        "created_at": "2024-04-15T14:40:40.662000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "it's jus the same as it is today",
        "created_at": "2024-04-15T14:40:50.641000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "withdrawals that come from the CL are a little more awkward cause they are processed in the CL first, and then possibly in the future honored by the EL",
        "created_at": "2024-04-15T14:41:25.096000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "that is in the execution payload though like I proposed requests be put? re: exits",
        "created_at": "2024-04-15T14:41:35.218000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "but anything that comes from the execution payload can be processed immediately on payload validation",
        "created_at": "2024-04-15T14:41:46.587000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "yeah, processing the payload does not change",
        "created_at": "2024-04-15T14:42:04.682000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "that can be done immediately",
        "created_at": "2024-04-15T14:42:10.869000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "processing the CL block does, cause there may be no payload",
        "created_at": "2024-04-15T14:42:20.937000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Okay sorry I think I still don't understand what your original comment was about?",
        "created_at": "2024-04-15T14:42:33.260000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "my comment was only referring to your oringinal comment regarding the header and keeping roots in the header",
        "created_at": "2024-04-15T14:43:00.340000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I was just pointing out that we can get rid completely of the header (acknowledging what Alex mentioned above) and the problem of shared resources is much smaller under ePBS",
        "created_at": "2024-04-15T14:43:31.631000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Are you talking about EL or CL header? Because I was pointing out that it would be added to the EL header so the EL can sync independently of the CL",
        "created_at": "2024-04-15T14:44:44.598000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "ah lol, yeah I was talking about the `ExecutionPayloadHeader`  like today that in that header we send the transaction roots and withdrawal roots in the blinded block case.",
        "created_at": "2024-04-15T14:45:36.599000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Do you still have qualms about this `Requests`  proposal being used in Prague? I think it is important to consider and possible do now because at the moment we don't have any EL -\u003e CL triggers. It would be much better to get _all_ the triggers within `Requests` rather than later on clean up some triggers that we put in prague to be in the framework",
        "created_at": "2024-04-15T14:47:29.517000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Alright, let me see if I understand your EIP: what this EIP does is add these \"requests\" to the actual execution payload. the CL needs to consume them correct",
        "created_at": "2024-04-15T14:49:48.306000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Correct. This is the same behavior as with 7002 exits currently.",
        "created_at": "2024-04-15T14:50:08.872000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "What I argue is that to me the cleanest approach is to have the payload in an envelope, the container has everything that the CL needs to actually use to process the payload, the payload has everything that the EL needs to use to process it.  There shouldn't be data that is shared and needs to be interpreted by both",
        "created_at": "2024-04-15T14:50:58.425000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "so for example on ePBS, the transactions roots, are no longer needed at all by the CL, so they aren't included anywhere]",
        "created_at": "2024-04-15T14:51:36.987000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Okay I think I understand the distinction. So then the requests should live in the envelope?",
        "created_at": "2024-04-15T14:51:45.198000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "right, this is what I suspect, but then the envelope can continue growing since this is actually interpreted by the CL, and since the EL does not need it at all, you can still sync by passing around the actual payload. And then \"requests\"  do not become that useful I suspect (but I don't really know how you guys sync)",
        "created_at": "2024-04-15T14:52:55.414000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "we'd probably download historical requests since they're committed to in the EL header and are accessible by JSON-RPC, but we can do that fine with just the execution payload from CL since they are artifacts we generate (like receipts)",
        "created_at": "2024-04-15T14:54:29.194000+00:00",
        "attachments": []
    },
    {
        "author": "lightclient",
        "category": "general",
        "parent": "",
        "content": "Okay do you think something needs to change about the above spec to be more forward compatible? When we have the Envelope it seems like we can just hoist it out of the payload?",
        "created_at": "2024-04-15T14:55:09.515000+00:00",
        "attachments": []
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I think so, I suspect that if this gets into Pectra then I can just remove the requests from the payload and add them to the envelope if these requests are to be interpreted and used by the CL.",
        "created_at": "2024-04-15T14:57:16.135000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "QQ: where does `initcontainer_size` come from \u003c@403707149043105803\u003e \u003c@425274498732916736\u003e",
        "created_at": "2024-04-15T16:28:55.442000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "what context?",
        "created_at": "2024-04-15T16:29:07.337000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "That is the whole size of the container, including subcontainers.",
        "created_at": "2024-04-15T16:29:48.993000+00:00",
        "attachments": []
    },
    {
        "author": "chfast",
        "category": "general",
        "parent": "",
        "content": "What is this place?",
        "created_at": "2024-04-15T16:29:52.291000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "So for a subcontainer, it's just the bytes in the subcontainer (andy any sub*-subcontainers)",
        "created_at": "2024-04-15T16:30:19.915000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "For legacy equivelant, it's the size of the deployed contract.",
        "created_at": "2024-04-15T16:30:40.779000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "or the initcode",
        "created_at": "2024-04-15T16:30:46.598000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "So whatever bytes go into the code for the message frame for initcontainer_size",
        "created_at": "2024-04-15T16:31:38.935000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "~~The eof spec defines it but never uses it:~~ Eof spec used but never defines it",
        "created_at": "2024-04-15T16:32:50.133000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "https://github.com/ipsilon/eof/blob/main/spec/eof.md",
        "created_at": "2024-04-15T16:32:51.733000+00:00",
        "attachments": []
    },
    {
        "author": "_shemnon",
        "category": "general",
        "parent": "",
        "content": "It's used in EIP-7620 - EOFCREATE and TXCREATE operations. - https://github.com/ethereum/EIPs/blob/41fb82670f71ce7b91407b1184b253bc118d8f1a/EIPS/eip-7620.md?plain=1#L122",
        "created_at": "2024-04-15T16:33:30.293000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "I meant its used but never defined sorry, ðŸ™ˆ",
        "created_at": "2024-04-15T16:51:13.964000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "Under \"The Purge\" there is a section titled \"log reform\".  Anyone have a lead on what problem that is meant to be focused on?",
        "created_at": "2024-04-15T19:43:45.164000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "idea as i understand it is to make the `LOG` series of opcodes nicer wrt protocol sustainability\n\nthe most radical approach would be to just remove logging from the EVM entirely",
        "created_at": "2024-04-15T19:45:06.016000+00:00",
        "attachments": []
    },
    {
        "author": "ralexstokes",
        "category": "general",
        "parent": "",
        "content": "(letting extra-protocol software handle indexing/tracing)",
        "created_at": "2024-04-15T19:45:23.833000+00:00",
        "attachments": []
    },
    {
        "author": "bridge-bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvb271828\u003e see discussion here:\n\nhttps://ethereum-magicians.org/t/eip-7668-remove-bloom-filters/19447",
        "created_at": "2024-04-15T19:45:33.758000+00:00",
        "attachments": []
    },
    {
        "author": "pipermerriam",
        "category": "general",
        "parent": "",
        "content": "Ah, it's simply removal of the in-protocol way to do this since it has not been an effective mechanism.  Makes sense.",
        "created_at": "2024-04-15T19:49:23.416000+00:00",
        "attachments": []
    }
]