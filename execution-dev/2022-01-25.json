[
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "That's very helpful feedback!",
        "created_at": "2022-01-25T00:15:10.638000+00:00",
        "attachments": null
    },
    {
        "author": "jakrypto.",
        "category": "general",
        "parent": "",
        "content": "I have a question regarding the execution clients post merge: how do we create sufficient incentives that enough folks run an execution client and not using 3rd party services such as infura?\nI think miners will shut down or not update their clients due to lack of rewards",
        "created_at": "2022-01-25T12:46:20.749000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "https://discord.com/channels/595666850260713488/692062809701482577/933802071487029348\n\nAlso might want to read up on Proof of Custody: https://dankradfeist.de/ethereum/2021/09/30/proofs-of-custody.html",
        "created_at": "2022-01-25T12:50:54.257000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "Short forks are OK, but I still miss the solution for deep forks. So what CL does when there is deep split? Should CL simply assume that EL will handle it somehow? Based on EL teams feedback it makes sense to assume this only until some N (that is different among different clients). Or if the split is deeper than N, then CL should start to behave differently in order to not overload the EL?",
        "created_at": "2022-01-25T13:09:03.013000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "The EL is perfectly capable of handling long forks in all models (otherwise it wouldn‚Äôt be compatible with current MainNet). It just may not be particularly fast to do as it may involve replaying blocks. So the EL would reply SYNCING while it does that reorg and the CL would continue in optimistic mode until the EL is ready again.",
        "created_at": "2022-01-25T20:58:13.767000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "There are usually very large limits on maximum reorg possible but those limits are set on the assumption they will never occur and manual intervention would be required if they are. \nSince they‚Äôre based on blocks not slots even in very long periods of non finalisation it wouldn‚Äôt be expected to occur under PoS either.",
        "created_at": "2022-01-25T20:59:31.870000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "So if some validator builds a block on HEAD - 200 block, then CL will ask EL to validate this payload?",
        "created_at": "2022-01-25T21:03:32.680000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "The new engine api would be to call insertPayload on that block which validates things like block hash but doesn‚Äôt actually execute it. If that fork became canonical the CL would call forkChoiceUpdated and at that point the EL would have to reorg over and execute the block.",
        "created_at": "2022-01-25T21:07:23.459000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "It‚Äôs the change from executePayload which forces the EL to execute every block to insertPayload which solves the problems geth was having (and every client would) by allowing the CL to provide non canonical blocks without forcing them to be executed.",
        "created_at": "2022-01-25T21:08:26.520000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "But how this weird fork can become canonical if no one is validating the payload so no one is voting on it?",
        "created_at": "2022-01-25T21:09:45.513000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "In normal circumstances such a block would be immediately orphaned. Anyone that wants to build on that block by definition would have already called forkChoiceUpdated and executed the block since that's its current head",
        "created_at": "2022-01-25T21:12:49.105000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "Yep exactly. The point is that these forks don‚Äôt become canonical except in extremely unusual circumstances (probably never in the particular case you describe) so there‚Äôs no point forcing the EL to execute it as the current engine API does.",
        "created_at": "2022-01-25T21:14:19.145000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "Ok, so if I‚Äôm on minority fork, then I hope that I‚Äôll optimistically sync to majority fork and this will trigger  my EL to reorg to the majority fork?",
        "created_at": "2022-01-25T21:23:52.821000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "Yes. Shouldn‚Äôt be ‚Äúhope‚Äù though. If fork choice and gossip is working you will optimistically sync to the majority fork. Which is to say at some point your CL will reorg to the majority fork and your EL will follow.",
        "created_at": "2022-01-25T21:25:43.949000+00:00",
        "attachments": null
    },
    {
        "author": "sauliusgrigaitis",
        "category": "general",
        "parent": "",
        "content": "Ok, we should try this on Kintsugi style split üôÇ",
        "created_at": "2022-01-25T21:30:06.345000+00:00",
        "attachments": null
    }
]