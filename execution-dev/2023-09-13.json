[
    {
        "author": "norwayfish",
        "category": "general",
        "parent": "",
        "content": "\u003c@\u00261070471163219824730\u003e is validation of txs before execution not implemented yet? or am I looking at the wrong place? validate_block_standalone is supposed to do that it seems, but it only does the first two points",
        "created_at": "2023-09-13T16:31:14.644000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "ae3c29cf07e9f769ebdfb4227af82c74dd83313de74d0e2af35f60e9b89bfca5"
            }
        ]
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "What kind of pre-execution block validation do you want to find? ie sender recovery?",
        "created_at": "2023-09-13T16:33:48.286000+00:00",
        "attachments": null
    },
    {
        "author": "norwayfish",
        "category": "general",
        "parent": "",
        "content": "I guess this part, right?",
        "created_at": "2023-09-13T16:36:51.276000+00:00",
        "attachments": [
            {
                "type": "image/png",
                "origin_name": "image.png",
                "content": "c5a451a4e354675ad52abcd2e844534edb083d15331600b985be8870e1afa528"
            }
        ]
    },
    {
        "author": "norwayfish",
        "category": "general",
        "parent": "",
        "content": "nonce and such",
        "created_at": "2023-09-13T16:36:58.314000+00:00",
        "attachments": null
    },
    {
        "author": "closer__",
        "category": "general",
        "parent": "",
        "content": "balance \u0026 nonce checks as well as contract size \u0026 gas limit checks happen directly in revm  \nhttps://github.com/bluealloy/revm",
        "created_at": "2023-09-13T16:38:07.185000+00:00",
        "attachments": null
    },
    {
        "author": "closer__",
        "category": "general",
        "parent": "",
        "content": "encoding \u0026 signature validation happens in reth",
        "created_at": "2023-09-13T16:38:29.923000+00:00",
        "attachments": null
    },
    {
        "author": "norwayfish",
        "category": "general",
        "parent": "",
        "content": "ok I see let me read that, that's in the AppendableChain right?",
        "created_at": "2023-09-13T16:39:54.303000+00:00",
        "attachments": null
    },
    {
        "author": "norwayfish",
        "category": "general",
        "parent": "",
        "content": "so invalid nonce would be caught here?\n```rust\n  fn validate_and_execute\u003cPSDP, DB, C, EF\u003e(\n        block: SealedBlockWithSenders,\n        parent_block: \u0026SealedHeader,\n        post_state_data_provider: PSDP,\n        externals: \u0026TreeExternals\u003cDB, C, EF\u003e,\n        block_kind: BlockKind,\n    ) -\u003e Result\u003cPostState, Error\u003e\n    where\n        PSDP: PostStateDataProvider,\n        DB: Database,\n        C: Consensus,\n        EF: ExecutorFactory,\n    {\n        // some checks are done before blocks comes here.\n        externals.consensus.validate_header_against_parent(\u0026block, parent_block)?;\n\n        let (block, senders) = block.into_components();\n        let block = block.unseal();\n\n        // get the state provider.\n        let db = externals.database();\n        let canonical_fork = post_state_data_provider.canonical_fork();\n        let state_provider = db.history_by_block_number(canonical_fork.number)?;\n\n        let provider = PostStateProvider::new(state_provider, post_state_data_provider);\n\n        let mut executor = externals.executor_factory.with_sp(\u0026provider);\n        let post_state = executor.execute_and_verify_receipt(\u0026block, U256::MAX, Some(senders))?;\n\n        // check state root if the block extends the canonical chain.\n        if block_kind.extends_canonical_head() {\n            // check state root\n            let state_root = provider.state_root(post_state.clone())?;\n            if block.state_root != state_root {\n                return Err(ConsensusError::BodyStateRootDiff {\n                    got: state_root,\n                    expected: block.state_root,\n                }\n                .into())\n            }\n        }\n\n        Ok(post_state)\n    }\n``` at `executor.execute_and_verify_receipt()` as ConsensusError?",
        "created_at": "2023-09-13T16:43:54.223000+00:00",
        "attachments": null
    },
    {
        "author": "norwayfish",
        "category": "general",
        "parent": "",
        "content": "also sorry if this is not the right place to ask these questions",
        "created_at": "2023-09-13T16:44:07.487000+00:00",
        "attachments": null
    },
    {
        "author": "rjected",
        "category": "general",
        "parent": "",
        "content": "Yes, it should",
        "created_at": "2023-09-13T16:57:35.471000+00:00",
        "attachments": null
    },
    {
        "author": "norwayfish",
        "category": "general",
        "parent": "",
        "content": "got it. thanks!",
        "created_at": "2023-09-13T16:58:04.246000+00:00",
        "attachments": null
    }
]