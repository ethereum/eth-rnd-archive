[
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The risk is that people stop clearing storage because there is no financial incentive to do so anymore.",
        "created_at": "2020-09-03T01:46:54.869000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Which will result in state growth.",
        "created_at": "2020-09-03T01:47:24.996000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e Im gonna try to pull some data on this, to see how much clearing is being done. What do you think of reduction vs. elimination of refund?",
        "created_at": "2020-09-03T02:04:02.480000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Yeah, the phrase \"spam\" is binary and moralistic (\"let's blame those users doing things we think are not sufficiently worthy!\")",
        "created_at": "2020-09-03T02:06:07.251000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e It's definitely more correct to talk about externalities",
        "created_at": "2020-09-03T02:06:17.571000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e I prefer the word \"congestion\"",
        "created_at": "2020-09-03T02:06:24.470000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e It's a bit less technocratic than \"externalities\"",
        "created_at": "2020-09-03T02:06:30.927000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e But describes the problem well",
        "created_at": "2020-09-03T02:06:42.982000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!636212126939217941\u003e I have, in the past, proposed removing gas refunds for basically the same reason you have here.  The pushback is that we'll see even more state growth than we already do which is currently a top problem for Ethereum.",
        "created_at": "2020-09-03T02:13:53.353000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I don't think a reduction would really help all that much.  Gas tokens would still be profitable, just at a higher spread in gas price.",
        "created_at": "2020-09-03T02:15:14.666000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Given we have seen a 500x spread, I don't think any reduction is going to do much.  üôÇ",
        "created_at": "2020-09-03T02:15:31.553000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm not personally convinced gas refunds are achieving the goal they set out to achieve.  I have seen extremely little code that goes out of its way to clear data.  It either clears data because it needs to set a value to 0, or it doesn't.  Also, clearing data unnecessarily (just for the gas refund) results in more complexity in gas estimation, which often times is *worse* for dapp usability than just having a higher (but more stable) gas cost for a transaction.",
        "created_at": "2020-09-03T02:18:22.320000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I have some code, for example, that I recently wrote that will probably end up using a constant time square root function instead of an efficient square root function just so I don't have to deal with gas limit variability.",
        "created_at": "2020-09-03T02:19:21.112000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Side note: Would be cool if we had a mechanism to tell gas estimation tools that some function internal should be estimated to cost X gas, but without having to design the function to be constant gas.",
        "created_at": "2020-09-03T02:20:38.152000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "\u003c@!301186049323958275\u003e not sure i understand this last point",
        "created_at": "2020-09-03T03:20:23.675000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "You mean my side note?",
        "created_at": "2020-09-03T03:21:15.354000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2020-09-03T03:21:23.822000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Not really related to your thing, just me lamenting.  üôÇ",
        "created_at": "2020-09-03T03:21:27.919000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is a bit of a UX nightmare to have contract calls that consume different amounts of gas depending on state of the network at the time the transaction is executed.",
        "created_at": "2020-09-03T03:22:00.473000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The most pathological case is when you have something like continuous interest calculation where the gas used changes every second depending how many 1 bits happen to be set in the current timestamp.",
        "created_at": "2020-09-03T03:22:38.809000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The problem here is that gas estimators just run the transaction *now* and see how much gas it costs, and then use that as the gas estimate.  There is no way for contract authors to give hints to gas estimators to say, \"this thing should be estimated as costing X\" (e.g., assume worst case scenario that all 1 bits in the timestamp are set).",
        "created_at": "2020-09-03T03:23:58.953000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Again, unrelated to your thing.  üôÇ",
        "created_at": "2020-09-03T03:24:04.713000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "\u003e The pushback is that we'll see even more state growth than we already do which is currently a top problem for Ethereum.\n\u003c@!301186049323958275\u003e say refund is removed, and a contract is no longer used (dormant) and isn't cleared ofc because there's no incentive, it is really a burden on state? It adds no additional `compute` overhead on a syncing node .. or am i missing something?",
        "created_at": "2020-09-03T03:29:18.886000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If data isn't zeroed out, then it stays in state forever, which means state grows at a faster rate than if state is zeroed out.",
        "created_at": "2020-09-03T03:33:31.869000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The main issue right now isn't compute, it is state size.  State doesn't currently fit into memory on most machines, which means state access sometimes goes to disk which is expensive.  Also IIUC, due to the nature of Ethereum's state model, random access speed needs to be high, which means you basically *have* to use SSD storage.  As state continues to grow, it continues to require larger and larger SSD drives.",
        "created_at": "2020-09-03T03:35:14.365000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I personally run a server in the cloud and it is *very close* to the point where I have to decide to stop running an Ethereum node or bump up a cost tier which is pretty significant.",
        "created_at": "2020-09-03T03:35:50.213000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "\u003e which means state access sometimes goes to disk which is expensive\n\u003c@!301186049323958275\u003e if I understood some of the recent Turbo-geth updates correctly, caching is much more improved, so this dormant contract costs mostly disk space. I could be wrong though Cc \u003c@456226577798135808\u003e",
        "created_at": "2020-09-03T03:38:49.302000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think getting turbo-geth strategies integrated into all major clients is a pretty long-term roadmap solution.",
        "created_at": "2020-09-03T03:39:42.958000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "To put it another way, we have a serious problem today (state growth) and removing gas refunds *may* make that problem worse.  We have solutions to the state growth problem in the works (regenesis, stateless, turbogeth, etc.) but we need to be careful not to overly exacerbate the state growth problems until we actually have those solutions live.",
        "created_at": "2020-09-03T03:41:10.619000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I'm playing a bit of devil's advocate here, I am weakly in favor of removing gas refunds today.",
        "created_at": "2020-09-03T03:41:25.468000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Mainly because I don't *think* they actually (in the real world, with irrational humans and all that) incentivize the behavior they are intended to incentivize.",
        "created_at": "2020-09-03T03:41:48.445000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "However, if you believe that gas refunds *do* actually incentivize the behavior that we want then the state growth problem is the argument against removing them.",
        "created_at": "2020-09-03T03:42:34.556000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "Would be nice to know: the effect of removing gas refund is equivalent to raising the block gaslimit by X. Difficult to quantify i think",
        "created_at": "2020-09-03T03:48:08.459000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Removing the refund would be equivalent to *reducing* the gas limit I believe.",
        "created_at": "2020-09-03T03:48:50.704000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Since refunds make more space available in a block by reducing the gas used by a transaction.",
        "created_at": "2020-09-03T03:49:10.372000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Though, I suppose you are thinking of the gas token killing aspect, since mining gas tokens consumes more gas than burning them.",
        "created_at": "2020-09-03T03:49:57.015000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "exactly",
        "created_at": "2020-09-03T03:50:23.862000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I would gladly entertain the proposals for removing refunds. But, trying to be a pragmatic, I defer them to the time when we'd actually have bandwidth for those. The way Ethereum core dev organisation is structured right now, means that key core developers need to be developers and \"politicians\" at the same time, which takes a lot of time and energy. Therefore, I am now cautious of taking up proposals that have merit, but would divert my time from things I personally think would have greater and more lasting impact. At the same time, I am constantly thinking how to increase our dev bandwidth, and try to align my strategy with this goal. I know it does not sound very satisfying for you \u003c@!636212126939217941\u003e , sorry üôÇ",
        "created_at": "2020-09-03T08:17:33.854000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "In terms of dormant contracts taking only disk space. It is mostly true. What we realised is that unless you are storing the state database on HDD (with mechanical moving parts, and huge penalty for accessing data out-of-order), the inactive state does not have huge impact during tx replay, but there is still impact. But it does have impact when re-transmitting state snapshot over the network, obviously. I did not gather any stats, but my intuition tells me that refunds do very little to incentivise clearing the space. I also wrote about it in one of my State Rent proposals",
        "created_at": "2020-09-03T08:25:18.327000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "with the benefit of the hindsight, I should say that introducing refunds was a good idea, but perhaps implemented not in a best way. Refunds are tricky to use efficiently for \"legitimate\" purposes (expect some very simple cases where you create and self-destruct a contract within the same tx), and they are capped, but they have this side-effect of the gas token",
        "created_at": "2020-09-03T08:27:41.699000+00:00",
        "attachments": null
    },
    {
        "author": "afdudley",
        "category": "general",
        "parent": "",
        "content": "\u003c@456226577798135808\u003e do you have a list of the implementation changes to gas refunds you would suggest?",
        "created_at": "2020-09-03T12:55:25.122000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I meant the changes that \u003c@!636212126939217941\u003e proposed - effectively making any gas refund equal to zero",
        "created_at": "2020-09-03T13:06:09.244000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "for destructing the contract and setting storage item to zero",
        "created_at": "2020-09-03T13:06:32.863000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Implementation is likely trivial (changing 2 numbers), but the implications are potentially large",
        "created_at": "2020-09-03T13:18:54.348000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "If the change is small, why worry about core dev time if a non-core dev is willing to champion the change?",
        "created_at": "2020-09-03T13:22:12.159000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That is, someone else does all of the EIP work, hard fork inclusion work, test generation work, etc.",
        "created_at": "2020-09-03T13:22:30.406000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Is the concern just the overhead cost of switching?",
        "created_at": "2020-09-03T13:22:40.483000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I am not worried about implementation time, I am worried about time we would spend as \"politicians\" arguing about this üôÇ",
        "created_at": "2020-09-03T13:22:57.877000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I would be happy for this change to be implemented, even given the opposition of so-called \"GasToken whales\" and people who would like to use \"Wisp\" design pattern",
        "created_at": "2020-09-03T13:35:04.894000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and from ENS, of course",
        "created_at": "2020-09-03T13:35:25.742000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "despite the opposition though, I do believe this change may contribute to solving a \"higher order\" problem at the expense of some people having to spend more gas unit for some operations. If at the end, the gas price drop 50%, then the argument for not doing it is moot",
        "created_at": "2020-09-03T13:37:02.428000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but I do not have any evidence and confidence that this change would help reduce the gas price",
        "created_at": "2020-09-03T13:37:34.687000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "I actually think adding an exception for the wisp pattern is reasonable",
        "created_at": "2020-09-03T13:37:36.848000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "Basically, change the mechanics so that CREATE costs 7000 gas at the beginning, and then charges 25000 + 200 * length at creation time",
        "created_at": "2020-09-03T13:37:56.926000+00:00",
        "attachments": null
    },
    {
        "author": ".vbuterin",
        "category": "general",
        "parent": "",
        "content": "so if the init phase exits without creating that 25k is never charged",
        "created_at": "2020-09-03T13:38:07.599000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Making those exceptions would make change more complicated, from \"trivial\" to \"not so trivial\". So I would use this argument - if there is some reasonable \"evidence\" that the usage of gas token and CHI makes the gas price problem much worse, then people using Wisp pattern will end up paying less fees if we cancel refunds üôÇ",
        "created_at": "2020-09-03T13:39:52.176000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and then if the Wisp pattern is so important, we should probably create a dedicate primitive for it or something",
        "created_at": "2020-09-03T13:40:21.275000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "if it was up to me, I would just do it because why not üôÇ",
        "created_at": "2020-09-03T13:43:12.551000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "What I would do is bunch this up with the change that increases gas cost for stuff (EIP-2929 I believe), and do it as soon as possible, as the \"Berlin\" hardfork",
        "created_at": "2020-09-03T13:49:00.900000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and then everything else (BLS, subroutines) after that",
        "created_at": "2020-09-03T13:49:24.337000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "it would also be a great way to ensure all the miners upgrade to the new tx pool handling in geth",
        "created_at": "2020-09-03T13:51:33.831000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003e and from ENS, of course\n\u003c@456226577798135808\u003e Does ENS use gas tokens?",
        "created_at": "2020-09-03T13:52:04.165000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "no, but they use self-destruct refunds quite a lot, though I am not sure they'll object to zeroing them",
        "created_at": "2020-09-03T13:52:31.124000+00:00",
        "attachments": null
    },
    {
        "author": "afdudley",
        "category": "general",
        "parent": "",
        "content": "\u003e it would also be a great way to ensure all the miners upgrade to the new tx pool handling in geth\n\u003c@456226577798135808\u003e If these things were done quickly, I think it would be a good display to the community at large as well.",
        "created_at": "2020-09-03T13:55:22.310000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but I would actually replace EIP-2929 with a much simpler version, which is trivial to implement",
        "created_at": "2020-09-03T13:55:52.717000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I would remove all exemptions except for precompiles, and also would remove SSTORE changes",
        "created_at": "2020-09-03T13:56:58.170000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Ah, sorry SSTORE modifications are required",
        "created_at": "2020-09-03T13:57:20.238000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e The exemptions are required for viability imo",
        "created_at": "2020-09-03T13:57:48.288000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Specifically the cache map",
        "created_at": "2020-09-03T13:57:54.677000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e A big reason why is that as I understand solidity checks codesize before calling",
        "created_at": "2020-09-03T13:58:04.214000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Which currently costs 800 * 2, and with the EIP would go up only to 2600, so quite a small increase",
        "created_at": "2020-09-03T13:58:16.864000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Whereas without the cache map it would be a crazy 5200",
        "created_at": "2020-09-03T13:58:23.672000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e Also, you'd need to exempt self-calling...",
        "created_at": "2020-09-03T13:58:33.317000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cvbuterin\u003e So may as well just \"do it properly\"",
        "created_at": "2020-09-03T13:58:38.338000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Ok, I see, I do not see this change as trivial anymore",
        "created_at": "2020-09-03T13:59:33.965000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "perhaps it is best to just cancel refunds first üôÇ",
        "created_at": "2020-09-03T13:59:48.973000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "this is actually how it happens all the time, you get all excited about something, and then you find so many nuances, and then you go: \"Oh, this is going to take some time....\" üôÇ",
        "created_at": "2020-09-03T14:02:17.207000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I think ‚òùÔ∏è is why engineers are notoriously bad at estimates.",
        "created_at": "2020-09-03T14:11:30.024000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It is *sooo* easy to not consider the nuance and edge cases.",
        "created_at": "2020-09-03T14:11:38.186000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "I can‚Äôt see how this can resolve the gas price problem. If is a problem of state size, the solution is something inverse of removing the refund üòÖ",
        "created_at": "2020-09-03T14:14:21.368000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "Nobody removes data onchain because is not a problem of them. If space is valuable to miners/validates",
        "created_at": "2020-09-03T14:15:28.542000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "Then the refund should be align with that",
        "created_at": "2020-09-03T14:15:44.976000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "To stop gastoken refund a % of the actual gas cost at time of deploy",
        "created_at": "2020-09-03T14:16:41.354000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "\u003c@!568002278116687873\u003e The problem is that we don't have any strong evidence that the refund is incentivizing the behavior we had hoped, and we have seen that it *does* incentivize behavior that is counter productive to the system running smoothly (gas tokens).",
        "created_at": "2020-09-03T14:22:36.882000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "Refunding 50% of something and I have to pay the rest is not a proper incentive to make a tx just to clean state",
        "created_at": "2020-09-03T14:23:42.231000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "I still have to pay to clean state",
        "created_at": "2020-09-03T14:23:53.627000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "\u003e To stop gastoken refund a % of the actual gas cost at time of deploy\n\u003c@568002278116687873\u003e  I think something in this line with a better protection of junk gas tokens",
        "created_at": "2020-09-03T14:27:04.638000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "\u003e I still have to pay to clean state\n\u003c@!568002278116687873\u003e Exactly. And the reason why refund is capped is to do with miners not wanting to include transactions for free. So, the sensible decision (with the benefit of the hindsight, of course) would be not to introduce refunds at all, which would have led to the decision not to introduce SELFDESTRUCT üôÇ This is how I know that setting rewards to 0 is a good change",
        "created_at": "2020-09-03T15:09:46.882000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e Do we actually have proof of the impact of Gastoken and CHI on the network? I'm looking at the number of chi and its gas consumption and it is just #10",
        "created_at": "2020-09-03T15:53:34.247000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "There is no evidence either way, that's what I was saying",
        "created_at": "2020-09-03T15:57:35.890000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but I would still support the cancellation of refund because it enables some simplification of rules, and paves the way for removing SELFDESTRUCT, which would bring many more simplifications",
        "created_at": "2020-09-03T16:05:18.776000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "it should be clear by now that refunds and SELFDESTRUCT was a premature optimisation with unintended consequences, and getting rid of it is a positive move",
        "created_at": "2020-09-03T16:07:26.711000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "\u003e it should be clear by now that refunds and SELFDESTRUCT was a premature optimisation with unintended consequences, and getting rid of it is a positive move\n\u003c@456226577798135808\u003e  I don‚Äôt know about this, you proposing to remove the only way to clean state",
        "created_at": "2020-09-03T16:08:50.145000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "but for the same reason, I don't like EIP-2200 and part of EIP-2929 that discounts things based on what happened prior in the same transaction",
        "created_at": "2020-09-03T16:08:52.482000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "@GuthL does the top list you are looking at include internal transactions, or only top level transactions (e.g., when gas token is the `to` field of a transaction)?",
        "created_at": "2020-09-03T16:09:17.980000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "Why not just create the correct incentive?",
        "created_at": "2020-09-03T16:09:29.875000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "\u003c@!568002278116687873\u003e it should also be clear by now that the state is not getting cleaned by SELFDESTRUCT and refunds",
        "created_at": "2020-09-03T16:09:37.612000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "the biggest cleaning of state was performed by a special case intervention in Spurious Dragon",
        "created_at": "2020-09-03T16:10:01.099000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "We should do that again.  üòâ",
        "created_at": "2020-09-03T16:10:13.437000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "That is a matter of align values, if the refund was 100% of the value at deploy time I think is more correct than 50% at current price",
        "created_at": "2020-09-03T16:10:49.635000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "there was a reason why refunds weren't made 100%",
        "created_at": "2020-09-03T16:11:54.024000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "and that should have been enough not to introduce them at all üôÇ",
        "created_at": "2020-09-03T16:12:12.190000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "If you refund based on the past gas price you are not making more that what you put there.",
        "created_at": "2020-09-03T16:13:40.192000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "That would require storing significantly more data (the problem we were originally trying to solve).",
        "created_at": "2020-09-03T16:17:58.144000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "The node don‚Äôt have that information?",
        "created_at": "2020-09-03T16:18:39.645000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "üò©",
        "created_at": "2020-09-03T16:18:57.858000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Not in any reasonably accessible form.",
        "created_at": "2020-09-03T16:19:12.006000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "this functionality would require remembering what was the gas price when certain item (account/storage slot) was created. That's extra data. But even it was easy to implement, this solution also has some weird unintended consequences - like accounts and storage lots having different inherent \"extra value\", depending on when they are created",
        "created_at": "2020-09-03T16:28:12.518000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "But the main reason 100% of refund is not given is that it can lead to transactions having 0 or negative fees, and you would not expect those to be mined (or perhaps they would, but it would be a \"trap\" for a miner)",
        "created_at": "2020-09-03T16:41:39.557000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e I just looked at Ethgasstation. But here are the statistic from Bloxy: https://bloxy.info/smart_contract_stat/0x0000000000004946c0e9f43f4dee607b0ef1fa1c",
        "created_at": "2020-09-03T16:41:59.464000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "because there is no generic way for the miner to figure out if tx would end up costing them money",
        "created_at": "2020-09-03T16:42:04.435000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Yeah, tx pool is full of transactions trying to mint CHI and GasToken at variety of gas prices",
        "created_at": "2020-09-03T16:48:17.064000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "it comes with a risk for the minters, of course. Because if their requested price is never reached, the only way for them to get rid of that tx and start using their account again is to pay CurrentGasPrice*21000 for diverting tx back to itself",
        "created_at": "2020-09-03T16:50:13.651000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "this is actually an interesting angle - 21k is not just payment for potentially creating a new account or doing a transaction, but it determines the cost of removing a transaction from the tx pool",
        "created_at": "2020-09-03T16:51:25.718000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so actually, slightly reducing the refund might already make this kind stuff unprofitable...",
        "created_at": "2020-09-03T16:52:43.233000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so the effect of GasToken2 and CHI is really the fact that they are buying up any dips in the gas price",
        "created_at": "2020-09-03T16:54:59.937000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "we could look at the tx pool and figure out what kind of \"buy wall\" we have there",
        "created_at": "2020-09-03T16:55:51.361000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "if it is substantial, and we can see that it does not let the gas price to come down, then we can argue it is making things worse",
        "created_at": "2020-09-03T16:56:20.881000+00:00",
        "attachments": null
    },
    {
        "author": "eth2_gitter_bot",
        "category": "general",
        "parent": "",
        "content": "\u003cGuthL\u003e That's entirely true. GasToken and CHI are exactly the reason why I think we won't see low gas price ever.",
        "created_at": "2020-09-03T17:01:48.037000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Well, then we've got to kill it as soon as possible",
        "created_at": "2020-09-03T17:04:52.041000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Thanks for bringing this up \u003c@!636212126939217941\u003e I think I have totally underestimated this",
        "created_at": "2020-09-03T17:10:46.095000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "we need to get some more data to confirm this beyond reasonable doubt, if we can",
        "created_at": "2020-09-03T17:11:43.769000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "\u003c@456226577798135808\u003e even though all these may sound like a good temporary solution, I don‚Äôt think you should push to implement it as any such hotfix will inevitably delay large reworks and changes",
        "created_at": "2020-09-03T18:21:58.487000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "what do you mean by \"all these\"?",
        "created_at": "2020-09-03T18:24:56.549000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "at this point I am not pushing any solutions yet, but I think we have an idea how to try to confirm whether the problem is so serious that it requires this kind of action",
        "created_at": "2020-09-03T18:27:50.309000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "I mean a general sentiment: there are many things in Ethereum that can be considered a technical debt. You have few different improvement ideas that (from my high level impression at least) would fix a lot of problems all together, but such large changes can not be implemented for various reasons (let‚Äôs call the current state of Eth as a ‚Äústatus quo‚Äù or ‚Äúmaintainence mode‚Äù). May be  it would be reasonable to let problems pile up until there would be a larger demand to fix it?",
        "created_at": "2020-09-03T18:35:38.293000+00:00",
        "attachments": null
    },
    {
        "author": "shamatar",
        "category": "general",
        "parent": "",
        "content": "Alexey is trying to propose various changes and fixes, and those are not just ideas, but well detailed solution. And it‚Äôs discouraging to see that such ideas are not well appreciated and not taken for further work",
        "created_at": "2020-09-03T18:57:37.505000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so regarding the GasToken2 and CHI, I am still kind of in doubt that there is a large enough pay wall out there. I am currently thinking the best way to analyse it",
        "created_at": "2020-09-03T19:00:36.975000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "if we take this Tx as an example of minting CHI: https://etherscan.io/tx/0x0d938bd1bad0ec9de772cc32b3ed06579f3ebaebc355dbcbfea5022a4c183b9c",
        "created_at": "2020-09-03T20:26:47.710000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "it spend 5,088,975 gas to mint 139 CHI",
        "created_at": "2020-09-03T20:27:12.574000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so it is roughly 36611 gas per CHI",
        "created_at": "2020-09-03T20:27:38.553000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "total amount of CHI minted is 2306620",
        "created_at": "2020-09-03T20:27:57.159000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "mutliplying....",
        "created_at": "2020-09-03T20:28:01.962000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "84.4 billion gas roughly captured by minting CHI tokens",
        "created_at": "2020-09-03T20:28:24.835000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "if we assume 12 million gas per block, that would fill up 7037 blocks",
        "created_at": "2020-09-03T20:28:59.075000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "CHI contract was deployed 100 days ago",
        "created_at": "2020-09-03T20:29:55.981000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "which is roughly 400k blocks",
        "created_at": "2020-09-03T20:30:36.924000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "so it looks like CHI minting captured about 1.7 % gas",
        "created_at": "2020-09-03T20:31:13.624000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "if we adjust for empty blocks, it might be 2% gas",
        "created_at": "2020-09-03T20:31:31.176000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "we can do the same analysis for GasToken2, and likely it will be a similar number",
        "created_at": "2020-09-03T20:31:53.688000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "next thing to do is perhaps to look only at the blocks where the gas price is going down and see how much of those are filled up with minting",
        "created_at": "2020-09-03T20:33:33.627000+00:00",
        "attachments": null
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "we can actually so a simple chart to capture this, with two lines: 1) avg gas price for each block 2) amount of gas per block captured by CHI/GasToken minting, and see if there is a correlation between the two, and the magnitude",
        "created_at": "2020-09-03T20:55:51.931000+00:00",
        "attachments": null
    },
    {
        "author": "axe1395",
        "category": "general",
        "parent": "",
        "content": "\u003e this functionality would require remembering what was the gas price when certain item (account/storage slot) was created. That's extra data. But even it was easy to implement, this solution also has some weird unintended consequences - like accounts and storage lots having different inherent \"extra value\", depending on when they are created\n\u003c@456226577798135808\u003e  we don‚Äôt need more data to implement, maybe is not worth to try to find the creation block and tx. can represent to much processing to make a delete of storage.",
        "created_at": "2020-09-03T21:17:50.930000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "BTW, I am already drafting an UMIP to enshrine a gas price oracle in UMA's DVM .. which will allow DeFi to create on-chain options/futures market for gas, which will give dApp developers a way to hedge their gas subsidies.",
        "created_at": "2020-09-03T22:58:33.885000+00:00",
        "attachments": null
    },
    {
        "author": "0xalizk",
        "category": "general",
        "parent": "",
        "content": "So the externalized costs of mint/free gas mining will be internalized by the 1inch's of the world in the form of options' premium they pay. Yeay sustainability!",
        "created_at": "2020-09-03T23:00:08.271000+00:00",
        "attachments": null
    }
]