[
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "I have a basic question that I asked in the forkchoice section. What's the downside of including a timestamp field in a transaction. So that's impossible to include transactions from the future in a block. This would make a few attacks to consensus much less enticing  CC \u003c@360491619402776577\u003e",
        "created_at": "2022-10-12T01:45:10.326000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "DoS attacks where you submit transactions that you know won't be included before their expiry.",
        "created_at": "2022-10-12T05:17:23.144000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Oh, sorry.  You are talking about a min-timestamp?",
        "created_at": "2022-10-12T05:17:36.866000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "What problem would such a thing solve?",
        "created_at": "2022-10-12T05:18:02.557000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "It makes certain MEV extraction forks useless",
        "created_at": "2022-10-12T09:49:56.611000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "My question is simply if there's any con doing this other than just adding 64 extra bits per transaction",
        "created_at": "2022-10-12T09:51:13.909000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It introduces a bit of a DoS vector, where you submit transactions with a very distant timestamp knowing they won't be includable anytime soon (and you can drain funding account prior to their execution or replace the nonce).  You can mitigate this by saying that the transactions cannot gossip at all until the timestamp is passed, which I think would be sufficient.  Could could tune this a bit and say that they can gossip 15 seconds before the timestamp is reached or something.",
        "created_at": "2022-10-12T09:54:20.434000+00:00",
        "attachments": null
    },
    {
        "author": "ivanhomoliak2827",
        "category": "general",
        "parent": "",
        "content": "Hi guys, my name is Ivan Homoliak and I work as a research scientist at Brno University of Technology. I focus on analysis of existing consensus protocols and design of new ones, beside other blockchain related things. Now, I am here to discuss one potential optimization to Merkle Patricia Trie. Can I explain it here or can you point me on a right channel/place, please?",
        "created_at": "2022-10-12T11:31:46.388000+00:00",
        "attachments": null
    },
    {
        "author": "pietjepuk",
        "category": "general",
        "parent": "",
        "content": "Ethresear.ch generally is the place for that type of stuff, you can post there and link here. Do note that R\u0026D is underway to move to Verkle trees.",
        "created_at": "2022-10-12T11:34:30.741000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Why is this a DOS vector? Eventually the check for funds is made either early or later in this case",
        "created_at": "2022-10-12T13:16:58.191000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Currently, if you submit a transaction to the network with a high gas fee it can be included right away, so even if you try to replace by fee you may get included at the high price anyway.  Depending on how good the attacker is at *avoiding* inclusion, this makes the cost of spamming the network with a bunch of really large transactions notably higher than the replacement transactions.",
        "created_at": "2022-10-12T13:18:50.589000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "However, if the transactions can intentionally be delayed, then it allows the attacker to guarantee that their large transaction will fully propagate and then be replaced by a much smaller (cheaper) transaction before being included.",
        "created_at": "2022-10-12T13:19:34.019000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This can be mitigated by refusing to gossip before the timestamp (or perhaps as early as 11 seconds before the timestamp), as it puts the attacker back into the situation where they may have to pay the high cost.",
        "created_at": "2022-10-12T13:20:12.298000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "A cheaper transaction wouldn't replace a more expensive one though - nodes only accept and gossip transactions that improve the price your paying (to prevent you spamming replacement transactions). There is a risk that you'd spam something well off in the future confident that you could build your own block that uses that nonce before the spam transactions can be included though.",
        "created_at": "2022-10-12T13:22:22.877000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "I believe most EL clients currently have a pretty naive RBF strategy which is to replace if the new transaction has +12.5% max fee and max priority fee.",
        "created_at": "2022-10-12T13:23:32.520000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "This means a 0 ETH transfer (21,000 gas) will successfully replace a transaction with 1MB of calldata and a huge gas limit as long as the transfer has 12.5% higher max and priority fee.",
        "created_at": "2022-10-12T13:24:12.831000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "Ah yes, good point. Cheaper in terms of using less gas would be accepted.",
        "created_at": "2022-10-12T13:24:32.650000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Even though the big one would be worth more if their block isn't 100% full.",
        "created_at": "2022-10-12T13:24:45.907000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "It would be cool to do better on this, but it is hard, especially since you don't know how much gas will actually be used until it is executed.",
        "created_at": "2022-10-12T13:25:02.093000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "0 ETH transfer with 10,000,000 gas limit would *look* (from the outside) to be worth more.  You can get even fancier by calling a contract that executes differently depending on where in the block it landed (which makes it simulate different than final execution).",
        "created_at": "2022-10-12T13:25:53.616000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "Yeah I don't think there's really much you can do for a normal node - MeV searchers may find it worth to have a more expensive algorithm in some cases but it's not worth executing the tx to find the actual gas used (and you'd die pretty quick).",
        "created_at": "2022-10-12T13:26:10.244000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "The problem here is that the really expensive transaction (huge calldata) would have a min_timestamp on it so it *can't* be included.",
        "created_at": "2022-10-12T13:27:01.479000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Which means it is just sitting in everyone's mempool waiting.  If something comes along that can be executed *right now* but is just a 0 ETH transfer, that will almost certainly get picked up instead.",
        "created_at": "2022-10-12T13:27:31.201000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "Yeah I can't see most nodes wanting to hold on to a tx that can't be executed yet anyway to be honest - there's limited space in the tx pool.",
        "created_at": "2022-10-12T13:28:00.462000+00:00",
        "attachments": null
    },
    {
        "author": "ivanhomoliak2827",
        "category": "general",
        "parent": "",
        "content": "Thank you \u003c@397389662085185547\u003e . I put it down at https://ethresear.ch/t/parallel-txs-processing-with-chunked-merkle-patricia-trie-s/13926. Let's see whether it makes sense.",
        "created_at": "2022-10-12T13:32:29.121000+00:00",
        "attachments": null
    },
    {
        "author": "sky.cactus",
        "category": "general",
        "parent": "",
        "content": "Yeah, though we would want to prevent nodes from *gossipping* transactions that can't execute in the next block I think, otherwise if one client gossips we eat the network cost of a 1MB transaction gossip only to have it dropped by all of that nodes peers.",
        "created_at": "2022-10-12T13:33:38.793000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Oh good that \u003c@340345049063882753\u003e understood this, I'm gonna look for you now so that you explain it to me ðŸ™‚",
        "created_at": "2022-10-12T19:22:48.257000+00:00",
        "attachments": null
    },
    {
        "author": "0xdefisensei",
        "category": "general",
        "parent": "",
        "content": "Are these tokens useful?",
        "created_at": "2022-10-12T20:49:31.400000+00:00",
        "attachments": [
            {
                "type": "image/jpeg",
                "origin_name": "IMG_5944.png",
                "content": "c7b5edc817113c64477bab299bb9c619468fec5d46000098eec70a8a02e8a393"
            }
        ]
    },
    {
        "author": "0xdefisensei",
        "category": "general",
        "parent": "",
        "content": "I donâ€™t know how to import them into my wallet",
        "created_at": "2022-10-12T20:50:15.202000+00:00",
        "attachments": null
    },
    {
        "author": "gakonst",
        "category": "general",
        "parent": "",
        "content": "Are there any test vectors for mempool implementations? For like configurations like tx gets submitted with some basefee, basefee changes, tx gets included, invalid tx sizes etc",
        "created_at": "2022-10-12T21:54:56.233000+00:00",
        "attachments": null
    },
    {
        "author": "gakonst",
        "category": "general",
        "parent": "",
        "content": "or various txs with dependencies across each other (e.g. nonce becoming valid after a gap is covered)",
        "created_at": "2022-10-12T21:55:39.818000+00:00",
        "attachments": null
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Not that I know of",
        "created_at": "2022-10-12T22:57:06.854000+00:00",
        "attachments": null
    },
    {
        "author": "ajsutton",
        "category": "general",
        "parent": "",
        "content": "I think I managed to avoid you today but happy to chat about it - just grab me when you next see me.  ðŸ™‚",
        "created_at": "2022-10-12T23:14:34.873000+00:00",
        "attachments": null
    }
]