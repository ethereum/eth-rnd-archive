[
    {
        "author": "xrchz",
        "category": "general",
        "parent": "",
        "content": "is 0x1 a precompile? I thought so, but if what you say is true this trace in geth's evm tool doesn't make sense:\n```\n{\"pc\":0,\"op\":96,\"gas\":\"0x5c7ec\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n{\"pc\":2,\"op\":53,\"gas\":\"0x5c7e9\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"CALLDATALOAD\"}\n{\"pc\":3,\"op\":63,\"gas\":\"0x5c7e6\",\"gasCost\":\"0x64\",\"memSize\":0,\"stack\":[\"0x1\"],\"depth\":1,\"refund\":0,\"opName\":\"EXTCODEHASH\"}\n{\"pc\":4,\"op\":96,\"gas\":\"0x5c782\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\n```\nwhich is an extract from running `evm --json blocktest tests/BlockchainTests/GeneralStateTests/stExtCodeHash/extCodeHashDynamicArgument.json`",
        "created_at": "2024-11-03T07:29:44.330000+00:00",
        "attachments": []
    },
    {
        "author": "xrchz",
        "category": "general",
        "parent": "",
        "content": "(the test above also seems to expect `0x0` as the extcodehash of `0x1`, but it expects hash of 0 for `0x2`)",
        "created_at": "2024-11-03T07:30:17.305000+00:00",
        "attachments": []
    },
    {
        "author": "xrchz",
        "category": "general",
        "parent": "",
        "content": "is the previous block number an input to the function? I haven't implemented it, but the way I can imagine to do it is: provide the block number in question to the function and also a timestamp for a known available beacon state root, and some merkle proofs to fill out the corresponding beacon state. The function then queries the 4788 contract with that timestamp to check the beacon state is accurate, and retrieves its slot and block numbers and its finalized epoch. then it checks that the current block number is \u003e= the state's block number, and the state's slot's epoch is \u003e= the state's finalized epoch.",
        "created_at": "2024-11-03T07:37:00.298000+00:00",
        "attachments": []
    },
    {
        "author": "xrchz",
        "category": "general",
        "parent": "",
        "content": "wait I think I get it! the test itself specifies the balances of the precompiles and they're not the same as on mainnet",
        "created_at": "2024-11-03T07:41:52.792000+00:00",
        "attachments": []
    },
    {
        "author": "xrchz",
        "category": "general",
        "parent": "",
        "content": "sorry that does make sense now",
        "created_at": "2024-11-03T07:41:58.411000+00:00",
        "attachments": []
    }
]