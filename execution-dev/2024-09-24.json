[
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "In your example scenario, the storage trie would be something like:\n\n```\nRoot [short node with key 0x00.0 [31 bytes]]\n  - Intermediate full node with 3 children set\n    - 0xa: short node with value 0x01 embedded\n    - 0xb: short node with value 0x02 embedded\n    - 0xc: short node with value 0x03 embedded\n```\n\nIn order to delete any of these items, you need to expand all the way down to the short node with the value being embedded (otherwise you cannot verify that the path really leads to the correct leaf). Buf if your deletion expands the path, then it must be part of the witness. Hence, all 3 nodes will be always part of the witness, independent of the deletion order.\n\nDepedning on the ordering, it can happen that some of tehm will be reconfigured/relinked, but to do thay tou yet again need to read the paths you are reconfiguring, so it is true that the last deletion will not read the original node, but reconfiguring it will require a read before that.\n\nUnless I'm missing something ðŸ˜„",
        "created_at": "2024-09-24T10:51:23.274000+00:00",
        "attachments": []
    },
    {
        "author": "karalabe",
        "category": "general",
        "parent": "",
        "content": "Would be nice if you could give an example state and exported witness from Reth that doesn't work correctly to cross reference (i.e. that I could manuall reconstruct in Geth). I could export *my* test for you to check, but my test behaves the same independent of order, so my hunch is that there's something more going on somewhere, so it's better if you can make a testcase from a known failing scenario.",
        "created_at": "2024-09-24T10:52:58.195000+00:00",
        "attachments": []
    },
    {
        "author": "nichebiche77",
        "category": "general",
        "parent": "",
        "content": "Hi",
        "created_at": "2024-09-24T17:18:55.880000+00:00",
        "attachments": []
    },
    {
        "author": "clab.by",
        "category": "general",
        "parent": "",
        "content": "This makes sense - I think it was me that was missing something, apologies ðŸ˜„ Those paths already being \"open\" from the initial setting of the 0 value should clear that concern up.",
        "created_at": "2024-09-24T17:40:04.976000+00:00",
        "attachments": []
    }
]