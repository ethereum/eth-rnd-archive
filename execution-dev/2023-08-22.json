[
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I know archive nodes store all transactions but do they also store the calldata within the transactions even if it's not used for contract calls?",
        "created_at": "2023-08-22T09:44:35.767000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2023-08-22T09:45:17.086000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "The calldata is part of the transactions (and is needed for correctly computing the txhash, even if it is not used in the call), only the blob data will be deleted by archive nodes",
        "created_at": "2023-08-22T09:46:08.965000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Even though calldata is not part of the state?",
        "created_at": "2023-08-22T09:47:15.128000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2023-08-22T09:47:28.316000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Ok, thank you",
        "created_at": "2023-08-22T09:47:42.633000+00:00",
        "attachments": []
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "The transactions response should contain the type byte of blob transactions, just like for all other transacrions.",
        "created_at": "2023-08-22T15:24:16.602000+00:00",
        "attachments": []
    },
    {
        "author": ".fjl",
        "category": "general",
        "parent": "",
        "content": "If that can't be inferred from the spec, we should clarify the spec",
        "created_at": "2023-08-22T15:24:59.044000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "And full nodes store the first 128 blocks, do they also store every contract that has ever been deployed too? Because the contracts are part of the state? And only the archive nodes store all calldata since calldata is not part of the state?",
        "created_at": "2023-08-22T17:09:38.375000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Full nodes also store all calldata",
        "created_at": "2023-08-22T17:14:38.973000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Full nodes store all transactions (and their calldata) as well as the state for the most recent 128 blocks. Archive nodes store all transactions as well as the state for all blocks. You can always recreate an archive node from a full node (and vice versa of course)",
        "created_at": "2023-08-22T17:16:13.325000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Full nodes store all calldata of the first 128 blocks, and archive nodes store all calldata since Genesis right?",
        "created_at": "2023-08-22T17:39:53.822000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "No full nodes store ALL calldata",
        "created_at": "2023-08-22T17:40:28.026000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Even beyond 128 blocks?",
        "created_at": "2023-08-22T17:40:41.770000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Yes",
        "created_at": "2023-08-22T17:40:45.685000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "But they don't store the associated transactions!?",
        "created_at": "2023-08-22T17:41:08.344000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "How would that work",
        "created_at": "2023-08-22T17:41:13.086000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "They store all associated transactions",
        "created_at": "2023-08-22T17:41:28.992000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "They do not store the intermediate states",
        "created_at": "2023-08-22T17:41:39.527000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Now I'm confused",
        "created_at": "2023-08-22T17:41:52.809000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "Full nodes store ALL transactions",
        "created_at": "2023-08-22T17:42:02.915000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Then what about the 128 blocks?",
        "created_at": "2023-08-22T17:42:15.465000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "What does that mean",
        "created_at": "2023-08-22T17:42:19.907000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Then what's the difference to archive nodes and why are those 5 times as large",
        "created_at": "2023-08-22T17:43:22.881000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "A block contains transactions, executing a block means you take the current state `s`, execute the transactions and end up with a state `s2`. Once you execute the block you don't need `s` anymore. Full nodes delete `s`, archive node store `s`",
        "created_at": "2023-08-22T17:44:36.034000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "And both node types store all blocks, all transactions, and all calldata since Genesis and the only difference is that archive nodes store all states as well and full nodes only the current one?",
        "created_at": "2023-08-22T17:46:05.539000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "yes exactly",
        "created_at": "2023-08-22T17:46:21.055000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Ohhh wow",
        "created_at": "2023-08-22T17:46:27.816000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "And the state includes the code and storage for all contracts right?",
        "created_at": "2023-08-22T17:47:01.524000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "yes",
        "created_at": "2023-08-22T17:47:06.859000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Omg thank you so much haha",
        "created_at": "2023-08-22T17:47:17.979000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I swear the documentation online doesn't convey it like that haha",
        "created_at": "2023-08-22T17:48:09.906000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "The history is ~500GB, the state is ~80GB, the history of states is 15TB (or 800GB if you store them like erigon)",
        "created_at": "2023-08-22T17:48:13.351000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Damn I would have thought the history is way larger",
        "created_at": "2023-08-22T17:48:55.350000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Because of all this calldata",
        "created_at": "2023-08-22T17:49:03.185000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "So does that mean archive nodes make a copy of every contract's storage after EVERY SINGLE block even though most don't change and you end up with thousands of copies?",
        "created_at": "2023-08-22T17:50:27.037000+00:00",
        "attachments": []
    },
    {
        "author": "mariusvanderwijden",
        "category": "general",
        "parent": "",
        "content": "yes, thats essentially what geth does (not for much longer), erigon only makes a copy of the storages that change",
        "created_at": "2023-08-22T17:51:02.997000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "Interesting... Thanks again, this was really helpful.\nAnd I guess there's no better place to ask than this since you actually build the nodes haha",
        "created_at": "2023-08-22T17:52:59.404000+00:00",
        "attachments": []
    },
    {
        "author": "Deleted User",
        "category": "general",
        "parent": "",
        "content": "I really appreciate it",
        "created_at": "2023-08-22T17:53:13.841000+00:00",
        "attachments": []
    }
]