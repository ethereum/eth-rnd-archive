[
    {
        "author": "mratsim",
        "category": "general",
        "parent": "",
        "content": "We use BLST sha256 https://github.com/supranational/blst/blob/master/src/asm/sha256-x86_64.pl\n\nThat said people behind BLST are from OpenSSL and Intel crypto.",
        "created_at": "2021-07-26T08:39:36.032000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Yeah those look like the respective codes in the Intel-ipsec-mb repo. I don't see the precomputed scheduled words for the padding block, so I think this is not optimized to hash just one block of 64 bytes",
        "created_at": "2021-07-26T09:58:13.219000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Thanks! this worked, and my guess was right on target \n```\n     250.546,        0.000,      250.546,      250.546,            1, Compute Hash Tree Root of state\n```",
        "created_at": "2021-07-26T12:01:16.486000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "will move to lighthouse now, \u003c@!539495253418180618\u003e if you are around I'd really appreciate if you could tell me how to benchmark this on lighthouse",
        "created_at": "2021-07-26T12:02:25.161000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "It seems that lighthouse also uses supranational's blst code so probably is the same",
        "created_at": "2021-07-26T12:23:05.265000+00:00",
        "attachments": null
    },
    {
        "author": "potuz",
        "category": "general",
        "parent": "",
        "content": "Alright, I posted the last I have here: https://hackmd.io/@potuz/rJX9iD30u \nThanks and cc. \u003c@!476250636548308992\u003e  \u003c@!449019668296892420\u003e \u003c@!491624610215886849\u003e \u003c@!602753420033785856\u003e  and \u003c@!340345049063882753\u003e . I didn't manage to benchmark Teku without making the cache play in so that the second run was O(1) compared with the first one that matters. The results are there, I am not really sure if I traced correctly all implementations to supranational's blst cause all clients depend on that already for their BLS signing. But I think the result from this test shows that a simple addition to that library (or whatever library you are using) should increase hashing performance on all clients without them needing to change any code.",
        "created_at": "2021-07-26T17:21:22.913000+00:00",
        "attachments": null
    }
]